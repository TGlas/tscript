<!doctype html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>TScript IDE</title><script defer="defer">/*! For license information please see main.js.LICENSE.txt */
(()=>{var __webpack_modules__={8560:(t,e,n)=>{const r=n(9497),{EEXIST:i,ENOENT:a,ENOTDIR:o,ENOTEMPTY:s}=n(2728);t.exports=class{constructor(){}_makeRoot(t=new Map){return t.set(0,{mode:511,type:"dir",size:0,ino:0,mtimeMs:Date.now()}),t}activate(t=null){this._root=null===t?new Map([["/",this._makeRoot()]]):"string"==typeof t?new Map([["/",this._makeRoot(this.parse(t))]]):t}get activated(){return!!this._root}deactivate(){this._root=void 0}size(){return this._countInodes(this._root.get("/"))-1}_countInodes(t){let e=1;for(let[n,r]of t)0!==n&&(e+=this._countInodes(r));return e}autoinc(){return this._maxInode(this._root.get("/"))+1}_maxInode(t){let e=t.get(0).ino;for(let[n,r]of t)0!==n&&(e=Math.max(e,this._maxInode(r)));return e}print(t=this._root.get("/")){let e="";const n=(t,r)=>{for(let[i,a]of t){if(0===i)continue;let t=a.get(0),o=t.mode.toString(8);e+=`${"\t".repeat(r)}${i}\t${o}`,"file"===t.type?e+=`\t${t.size}\t${t.mtimeMs}\n`:(e+="\n",n(a,r+1))}};return n(t,0),e}parse(t){let e=0;function n(t){const n=++e,r=1===t.length?"dir":"file";let[i,a,o]=t;return i=parseInt(i,8),a=a?parseInt(a):0,o=o?parseInt(o):Date.now(),new Map([[0,{mode:i,type:r,size:a,mtimeMs:o,ino:n}]])}let r=t.trim().split("\n"),i=this._makeRoot(),a=[{indent:-1,node:i},{indent:0,node:null}];for(let t of r){let e=t.match(/^\t*/)[0].length;t=t.slice(e);let[r,...i]=t.split("\t"),o=n(i);if(e<=a[a.length-1].indent)for(;e<=a[a.length-1].indent;)a.pop();a.push({indent:e,node:o}),a[a.length-2].node.set(r,o)}return i}_lookup(t,e=!0){let n=this._root,i="/",o=r.split(t);for(let s=0;s<o.length;++s){let l=o[s];if(n=n.get(l),!n)throw new a(t);if(e||s<o.length-1){const t=n.get(0);if("symlink"===t.type){let e=r.resolve(i,t.target);n=this._lookup(e)}i=i?r.join(i,l):l}}return n}mkdir(t,{mode:e}){if("/"===t)throw new i;let n=this._lookup(r.dirname(t)),a=r.basename(t);if(n.has(a))throw new i;let o=new Map,s={mode:e,type:"dir",size:0,mtimeMs:Date.now(),ino:this.autoinc()};o.set(0,s),n.set(a,o)}rmdir(t){let e=this._lookup(t);if("dir"!==e.get(0).type)throw new o;if(e.size>1)throw new s;let n=this._lookup(r.dirname(t)),i=r.basename(t);n.delete(i)}readdir(t){let e=this._lookup(t);if("dir"!==e.get(0).type)throw new o;return[...e.keys()].filter((t=>"string"==typeof t))}writeStat(t,e,{mode:n}){let i;try{let e=this.stat(t);null==n&&(n=e.mode),i=e.ino}catch(t){}null==n&&(n=438),null==i&&(i=this.autoinc());let a=this._lookup(r.dirname(t)),o=r.basename(t),s={mode:n,type:"file",size:e,mtimeMs:Date.now(),ino:i},l=new Map;return l.set(0,s),a.set(o,l),s}unlink(t){let e=this._lookup(r.dirname(t)),n=r.basename(t);e.delete(n)}rename(t,e){let n=r.basename(e),i=this._lookup(t);this._lookup(r.dirname(e)).set(n,i),this.unlink(t)}stat(t){return this._lookup(t).get(0)}lstat(t){return this._lookup(t,!1).get(0)}readlink(t){return this._lookup(t,!1).get(0).target}symlink(t,e){let n,i;try{let t=this.stat(e);null===i&&(i=t.mode),n=t.ino}catch(t){}null==i&&(i=40960),null==n&&(n=this.autoinc());let a=this._lookup(r.dirname(e)),o=r.basename(e),s={mode:i,type:"symlink",target:t,size:0,mtimeMs:Date.now(),ino:n},l=new Map;return l.set(0,s),a.set(o,l),s}_du(t){let e=0;for(const[n,r]of t.entries())e+=0===n?r.size:this._du(r);return e}du(t){let e=this._lookup(t);return this._du(e)}}},4788:(t,e,n)=>{const{encode:r,decode:i}=n(5036),a=n(1708),o=n(8560),{ENOENT:s,ENOTEMPTY:l,ETIMEDOUT:c}=n(2728),d=n(7190),h=n(5503),u=n(5913),p=n(2967),f=n(9497);t.exports=class{constructor(){this.saveSuperblock=a((()=>{this.flush()}),500)}async init(t,{wipe:e,url:n,urlauto:r,fileDbName:i=t,db:a=null,fileStoreName:s=t+"_files",lockDbName:l=t+"_lock",lockStoreName:c=t+"_lock"}={}){this._name=t,this._idb=a||new d(i,s),this._mutex=navigator.locks?new p(t):new u(l,c),this._cache=new o(t),this._opts={wipe:e,url:n},this._needsWipe=!!e,n&&(this._http=new h(n),this._urlauto=!!r)}async activate(){if(this._cache.activated)return;this._needsWipe&&(this._needsWipe=!1,await this._idb.wipe(),await this._mutex.release({force:!0})),await this._mutex.has()||await this._mutex.wait();const t=await this._idb.loadSuperblock();if(t)this._cache.activate(t);else if(this._http){const t=await this._http.loadSuperblock();this._cache.activate(t),await this._saveSuperblock()}else this._cache.activate();if(!await this._mutex.has())throw new c}async deactivate(){await this._mutex.has()&&await this._saveSuperblock(),this._cache.deactivate();try{await this._mutex.release()}catch(t){console.log(t)}await this._idb.close()}async _saveSuperblock(){this._cache.activated&&(this._lastSavedAt=Date.now(),await this._idb.saveSuperblock(this._cache._root))}_writeStat(t,e,n){let r=f.split(f.dirname(t)),i=r.shift();for(let t of r){i=f.join(i,t);try{this._cache.mkdir(i,{mode:511})}catch(t){}}return this._cache.writeStat(t,e,n)}async readFile(t,e){const{encoding:n}=e;if(n&&"utf8"!==n)throw new Error('Only "utf8" encoding is supported in readFile');let r=null,a=null;try{a=this._cache.stat(t),r=await this._idb.readFile(a.ino)}catch(t){if(!this._urlauto)throw t}if(!r&&this._http){let e=this._cache.lstat(t);for(;"symlink"===e.type;)t=f.resolve(f.dirname(t),e.target),e=this._cache.lstat(t);r=await this._http.readFile(t)}if(r&&(a&&a.size==r.byteLength||(a=await this._writeStat(t,r.byteLength,{mode:a?a.mode:438}),this.saveSuperblock()),"utf8"===n?r=i(r):r.toString=()=>i(r)),!a)throw new s(t);return r}async writeFile(t,e,n){const{mode:i,encoding:a="utf8"}=n;if("string"==typeof e){if("utf8"!==a)throw new Error('Only "utf8" encoding is supported in writeFile');e=r(e)}const o=await this._cache.writeStat(t,e.byteLength,{mode:i});await this._idb.writeFile(o.ino,e)}async unlink(t,e){const n=this._cache.lstat(t);this._cache.unlink(t),"symlink"!==n.type&&await this._idb.unlink(n.ino)}readdir(t,e){return this._cache.readdir(t)}mkdir(t,e){const{mode:n=511}=e;this._cache.mkdir(t,{mode:n})}rmdir(t,e){if("/"===t)throw new l;this._cache.rmdir(t)}rename(t,e){this._cache.rename(t,e)}stat(t,e){return this._cache.stat(t)}lstat(t,e){return this._cache.lstat(t)}readlink(t,e){return this._cache.readlink(t)}symlink(t,e){this._cache.symlink(t,e)}async backFile(t,e){let n=await this._http.sizeFile(t);await this._writeStat(t,n,e)}du(t){return this._cache.du(t)}flush(){return this._saveSuperblock()}}},5503:t=>{t.exports=class{constructor(t){this._url=t}loadSuperblock(){return fetch(this._url+"/.superblock.txt").then((t=>t.ok?t.text():null))}async readFile(t){const e=await fetch(this._url+t);if(200===e.status)return e.arrayBuffer();throw new Error("ENOENT")}async sizeFile(t){const e=await fetch(this._url+t,{method:"HEAD"});if(200===e.status)return e.headers.get("content-length");throw new Error("ENOENT")}}},7190:(t,e,n)=>{const r=n(5341);t.exports=class{constructor(t,e){this._database=t,this._storename=e,this._store=new r.Store(this._database,this._storename)}saveSuperblock(t){return r.set("!root",t,this._store)}loadSuperblock(){return r.get("!root",this._store)}readFile(t){return r.get(t,this._store)}writeFile(t,e){return r.set(t,e,this._store)}unlink(t){return r.del(t,this._store)}wipe(){return r.clear(this._store)}close(){return r.close(this._store)}}},5913:(t,e,n)=>{const r=n(5341),i=t=>new Promise((e=>setTimeout(e,t)));t.exports=class{constructor(t,e){this._id=Math.random(),this._database=t,this._storename=e,this._store=new r.Store(this._database,this._storename),this._lock=null}async has({margin:t=2e3}={}){if(this._lock&&this._lock.holder===this._id){const e=Date.now();return this._lock.expires>e+t||await this.renew()}return!1}async renew({ttl:t=5e3}={}){let e;return await r.update("lock",(n=>{const r=Date.now()+t;return e=n&&n.holder===this._id,this._lock=e?{holder:this._id,expires:r}:n,this._lock}),this._store),e}async acquire({ttl:t=5e3}={}){let e,n,i;if(await r.update("lock",(r=>{const a=Date.now(),o=a+t;return n=r&&r.expires<a,e=void 0===r||n,i=r&&r.holder===this._id,this._lock=e?{holder:this._id,expires:o}:r,this._lock}),this._store),i)throw new Error("Mutex double-locked");return e}async wait({interval:t=100,limit:e=6e3,ttl:n}={}){for(;e--;){if(await this.acquire({ttl:n}))return!0;await i(t)}throw new Error("Mutex timeout")}async release({force:t=!1}={}){let e,n,i;if(await r.update("lock",(r=>(e=t||r&&r.holder===this._id,n=void 0===r,i=r&&r.holder!==this._id,this._lock=e?void 0:r,this._lock)),this._store),await r.close(this._store),!e&&!t){if(n)throw new Error("Mutex double-freed");if(i)throw new Error("Mutex lost ownership")}return e}}},2967:t=>{t.exports=class{constructor(t){this._id=Math.random(),this._database=t,this._has=!1,this._release=null}async has(){return this._has}async acquire(){return new Promise((t=>{navigator.locks.request(this._database+"_lock",{ifAvailable:!0},(e=>(this._has=!!e,t(!!e),new Promise((t=>{this._release=t})))))}))}async wait({timeout:t=6e5}={}){return new Promise(((e,n)=>{const r=new AbortController;setTimeout((()=>{r.abort(),n(new Error("Mutex timeout"))}),t),navigator.locks.request(this._database+"_lock",{signal:r.signal},(t=>(this._has=!!t,e(!!t),new Promise((t=>{this._release=t})))))}))}async release({force:t=!1}={}){this._has=!1,this._release?this._release():t&&navigator.locks.request(this._database+"_lock",{steal:!0},(t=>!0))}}},3582:(t,e,n)=>{const r=n(4788),i=n(2665),a=n(9497);function o(t,e,...n){return void 0!==e&&"function"!=typeof e||(e={}),"string"==typeof e&&(e={encoding:e}),[t=a.normalize(t),e,...n]}function s(t,e,n,...r){return void 0!==n&&"function"!=typeof n||(n={}),"string"==typeof n&&(n={encoding:n}),[t=a.normalize(t),e,n,...r]}function l(t,e,...n){return[a.normalize(t),a.normalize(e),...n]}t.exports=class{constructor(t,e={}){this.init=this.init.bind(this),this.readFile=this._wrap(this.readFile,o,!1),this.writeFile=this._wrap(this.writeFile,s,!0),this.unlink=this._wrap(this.unlink,o,!0),this.readdir=this._wrap(this.readdir,o,!1),this.mkdir=this._wrap(this.mkdir,o,!0),this.rmdir=this._wrap(this.rmdir,o,!0),this.rename=this._wrap(this.rename,l,!0),this.stat=this._wrap(this.stat,o,!1),this.lstat=this._wrap(this.lstat,o,!1),this.readlink=this._wrap(this.readlink,o,!1),this.symlink=this._wrap(this.symlink,l,!0),this.backFile=this._wrap(this.backFile,o,!0),this.du=this._wrap(this.du,o,!1),this._deactivationPromise=null,this._deactivationTimeout=null,this._activationPromise=null,this._operations=new Set,t&&this.init(t,e)}async init(...t){return this._initPromiseResolve&&await this._initPromise,this._initPromise=this._init(...t),this._initPromise}async _init(t,e={}){await this._gracefulShutdown(),this._activationPromise&&await this._deactivate(),this._backend&&this._backend.destroy&&await this._backend.destroy(),this._backend=e.backend||new r,this._backend.init&&await this._backend.init(t,e),this._initPromiseResolve&&(this._initPromiseResolve(),this._initPromiseResolve=null),e.defer||this.stat("/")}async _gracefulShutdown(){this._operations.size>0&&(this._isShuttingDown=!0,await new Promise((t=>this._gracefulShutdownResolve=t)),this._isShuttingDown=!1,this._gracefulShutdownResolve=null)}_wrap(t,e,n){return async(...r)=>{r=e(...r);let i={name:t.name,args:r};this._operations.add(i);try{return await this._activate(),await t.apply(this,r)}finally{this._operations.delete(i),n&&this._backend.saveSuperblock(),0===this._operations.size&&(this._deactivationTimeout||clearTimeout(this._deactivationTimeout),this._deactivationTimeout=setTimeout(this._deactivate.bind(this),500))}}}async _activate(){this._initPromise||console.warn(new Error(`Attempted to use LightningFS ${this._name} before it was initialized.`)),await this._initPromise,this._deactivationTimeout&&(clearTimeout(this._deactivationTimeout),this._deactivationTimeout=null),this._deactivationPromise&&await this._deactivationPromise,this._deactivationPromise=null,this._activationPromise||(this._activationPromise=this._backend.activate?this._backend.activate():Promise.resolve()),await this._activationPromise}async _deactivate(){return this._activationPromise&&await this._activationPromise,this._deactivationPromise||(this._deactivationPromise=this._backend.deactivate?this._backend.deactivate():Promise.resolve()),this._activationPromise=null,this._gracefulShutdownResolve&&this._gracefulShutdownResolve(),this._deactivationPromise}async readFile(t,e){return this._backend.readFile(t,e)}async writeFile(t,e,n){return await this._backend.writeFile(t,e,n),null}async unlink(t,e){return await this._backend.unlink(t,e),null}async readdir(t,e){return this._backend.readdir(t,e)}async mkdir(t,e){return await this._backend.mkdir(t,e),null}async rmdir(t,e){return await this._backend.rmdir(t,e),null}async rename(t,e){return await this._backend.rename(t,e),null}async stat(t,e){const n=await this._backend.stat(t,e);return new i(n)}async lstat(t,e){const n=await this._backend.lstat(t,e);return new i(n)}async readlink(t,e){return this._backend.readlink(t,e)}async symlink(t,e){return await this._backend.symlink(t,e),null}async backFile(t,e){return await this._backend.backFile(t,e),null}async du(t){return this._backend.du(t)}async flush(){return this._backend.flush()}}},2665:t=>{t.exports=class{constructor(t){this.type=t.type,this.mode=t.mode,this.size=t.size,this.ino=t.ino,this.mtimeMs=t.mtimeMs,this.ctimeMs=t.ctimeMs||t.mtimeMs,this.uid=1,this.gid=1,this.dev=1}isFile(){return"file"===this.type}isDirectory(){return"dir"===this.type}isSymbolicLink(){return"symlink"===this.type}}},2728:t=>{function e(t){return class extends Error{constructor(...e){super(...e),this.code=t,this.message?this.message=t+": "+this.message:this.message=t}}}const n=e("EEXIST"),r=e("ENOENT"),i=e("ENOTDIR"),a=e("ENOTEMPTY"),o=e("ETIMEDOUT");t.exports={EEXIST:n,ENOENT:r,ENOTDIR:i,ENOTEMPTY:a,ETIMEDOUT:o}},9914:(t,e,n)=>{const r=n(9097),i=n(3582);function a(t,e){return"function"==typeof t&&(e=t),[(...t)=>e(null,...t),e=r(e)]}t.exports=class{constructor(...t){this.promises=new i(...t),this.init=this.init.bind(this),this.readFile=this.readFile.bind(this),this.writeFile=this.writeFile.bind(this),this.unlink=this.unlink.bind(this),this.readdir=this.readdir.bind(this),this.mkdir=this.mkdir.bind(this),this.rmdir=this.rmdir.bind(this),this.rename=this.rename.bind(this),this.stat=this.stat.bind(this),this.lstat=this.lstat.bind(this),this.readlink=this.readlink.bind(this),this.symlink=this.symlink.bind(this),this.backFile=this.backFile.bind(this),this.du=this.du.bind(this),this.flush=this.flush.bind(this)}init(t,e){return this.promises.init(t,e)}readFile(t,e,n){const[r,i]=a(e,n);this.promises.readFile(t,e).then(r).catch(i)}writeFile(t,e,n,r){const[i,o]=a(n,r);this.promises.writeFile(t,e,n).then(i).catch(o)}unlink(t,e,n){const[r,i]=a(e,n);this.promises.unlink(t,e).then(r).catch(i)}readdir(t,e,n){const[r,i]=a(e,n);this.promises.readdir(t,e).then(r).catch(i)}mkdir(t,e,n){const[r,i]=a(e,n);this.promises.mkdir(t,e).then(r).catch(i)}rmdir(t,e,n){const[r,i]=a(e,n);this.promises.rmdir(t,e).then(r).catch(i)}rename(t,e,n){const[r,i]=a(n);this.promises.rename(t,e).then(r).catch(i)}stat(t,e,n){const[r,i]=a(e,n);this.promises.stat(t).then(r).catch(i)}lstat(t,e,n){const[r,i]=a(e,n);this.promises.lstat(t).then(r).catch(i)}readlink(t,e,n){const[r,i]=a(e,n);this.promises.readlink(t).then(r).catch(i)}symlink(t,e,n){const[r,i]=a(n);this.promises.symlink(t,e).then(r).catch(i)}backFile(t,e,n){const[r,i]=a(e,n);this.promises.backFile(t,e).then(r).catch(i)}du(t,e){const[n,r]=a(e);this.promises.du(t).then(n).catch(r)}flush(t){const[e,n]=a(t);this.promises.flush().then(e).catch(n)}}},9497:t=>{function e(t){if(0===t.length)return".";let e=r(t);return e=e.reduce(i,[]),n(...e)}function n(...t){if(0===t.length)return"";let e=t.join("/");return e=e.replace(/\/{2,}/g,"/"),e}function r(t){if(0===t.length)return[];if("/"===t)return["/"];let e=t.split("/");return""===e[e.length-1]&&e.pop(),"/"===t[0]?e[0]="/":"."!==e[0]&&e.unshift("."),e}function i(t,e){if(0===t.length)return t.push(e),t;if("."===e)return t;if(".."===e){if(1===t.length){if("/"===t[0])throw new Error("Unable to normalize path - traverses above root directory");if("."===t[0])return t.push(e),t}return".."===t[t.length-1]?(t.push(".."),t):(t.pop(),t)}return t.push(e),t}t.exports={join:n,normalize:e,split:r,basename:function(t){if("/"===t)throw new Error(`Cannot get basename of "${t}"`);const e=t.lastIndexOf("/");return-1===e?t:t.slice(e+1)},dirname:function(t){const e=t.lastIndexOf("/");if(-1===e)throw new Error(`Cannot get dirname of "${t}"`);return 0===e?"/":t.slice(0,e)},resolve:function(...t){let r="";for(let i of t)r=i.startsWith("/")?i:e(n(r,i));return r}}},9758:(t,e,n)=>{"use strict";t.exports=n(9512)},9512:t=>{"use strict";var e=function(t){if(t=t||{},this.Promise=t.Promise||Promise,this.queues=Object.create(null),this.domainReentrant=t.domainReentrant||!1,this.domainReentrant){if("undefined"==typeof process||void 0===process.domain)throw new Error("Domain-reentrant locks require `process.domain` to exist. Please flip `opts.domainReentrant = false`, use a NodeJS version that still implements Domain, or install a browser polyfill.");this.domains=Object.create(null)}this.timeout=t.timeout||e.DEFAULT_TIMEOUT,this.maxOccupationTime=t.maxOccupationTime||e.DEFAULT_MAX_OCCUPATION_TIME,this.maxExecutionTime=t.maxExecutionTime||e.DEFAULT_MAX_EXECUTION_TIME,t.maxPending===1/0||Number.isInteger(t.maxPending)&&t.maxPending>=0?this.maxPending=t.maxPending:this.maxPending=e.DEFAULT_MAX_PENDING};e.DEFAULT_TIMEOUT=0,e.DEFAULT_MAX_OCCUPATION_TIME=0,e.DEFAULT_MAX_EXECUTION_TIME=0,e.DEFAULT_MAX_PENDING=1e3,e.prototype.acquire=function(t,e,n,r){if(Array.isArray(t))return this._acquireBatch(t,e,n,r);if("function"!=typeof e)throw new Error("You must pass a function to execute");var i=null,a=null,o=null;"function"!=typeof n&&(r=n,n=null,o=new this.Promise((function(t,e){i=t,a=e}))),r=r||{};var s=!1,l=null,c=null,d=null,h=this,u=function(e,r,l){c&&(clearTimeout(c),c=null),d&&(clearTimeout(d),d=null),e&&(h.queues[t]&&0===h.queues[t].length&&delete h.queues[t],h.domainReentrant&&delete h.domains[t]),s||(o?r?a(r):i(l):"function"==typeof n&&n(r,l),s=!0),e&&h.queues[t]&&h.queues[t].length>0&&h.queues[t].shift()()},p=function(n){if(s)return u(n);l&&(clearTimeout(l),l=null),h.domainReentrant&&n&&(h.domains[t]=process.domain);var i=r.maxExecutionTime||h.maxExecutionTime;if(i&&(d=setTimeout((function(){h.queues[t]&&u(n,new Error("Maximum execution time is exceeded "+t))}),i)),1===e.length){var a=!1;try{e((function(t,e){a||(a=!0,u(n,t,e))}))}catch(t){a||(a=!0,u(n,t))}}else h._promiseTry((function(){return e()})).then((function(t){u(n,void 0,t)}),(function(t){u(n,t)}))};h.domainReentrant&&process.domain&&(p=process.domain.bind(p));var f=r.maxPending||h.maxPending;if(h.queues[t])if(h.domainReentrant&&process.domain&&process.domain===h.domains[t])p(!1);else if(h.queues[t].length>=f)u(!1,new Error("Too many pending tasks in queue "+t));else{var m=function(){p(!0)};r.skipQueue?h.queues[t].unshift(m):h.queues[t].push(m);var g=r.timeout||h.timeout;g&&(l=setTimeout((function(){l=null,u(!1,new Error("async-lock timed out in queue "+t))}),g))}else h.queues[t]=[],p(!0);var y=r.maxOccupationTime||h.maxOccupationTime;return y&&(c=setTimeout((function(){h.queues[t]&&u(!1,new Error("Maximum occupation time is exceeded in queue "+t))}),y)),o||void 0},e.prototype._acquireBatch=function(t,e,n,r){"function"!=typeof n&&(r=n,n=null);var i=this,a=t.reduceRight((function(t,e){return function(t,e){return function(n){i.acquire(t,e,n,r)}}(e,t)}),e);if("function"!=typeof n)return new this.Promise((function(t,e){1===a.length?a((function(n,r){n?e(n):t(r)})):t(a())}));a(n)},e.prototype.isBusy=function(t){return t?!!this.queues[t]:Object.keys(this.queues).length>0},e.prototype._promiseTry=function(t){try{return this.Promise.resolve(t())}catch(t){return this.Promise.reject(t)}},t.exports=e},9742:(t,e)=>{"use strict";e.byteLength=function(t){var e=s(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,a=s(t),o=a[0],l=a[1],c=new i(function(t,e,n){return 3*(e+n)/4-n}(0,o,l)),d=0,h=l>0?o-4:o;for(n=0;n<h;n+=4)e=r[t.charCodeAt(n)]<<18|r[t.charCodeAt(n+1)]<<12|r[t.charCodeAt(n+2)]<<6|r[t.charCodeAt(n+3)],c[d++]=e>>16&255,c[d++]=e>>8&255,c[d++]=255&e;return 2===l&&(e=r[t.charCodeAt(n)]<<2|r[t.charCodeAt(n+1)]>>4,c[d++]=255&e),1===l&&(e=r[t.charCodeAt(n)]<<10|r[t.charCodeAt(n+1)]<<4|r[t.charCodeAt(n+2)]>>2,c[d++]=e>>8&255,c[d++]=255&e),c},e.fromByteArray=function(t){for(var e,r=t.length,i=r%3,a=[],o=16383,s=0,c=r-i;s<c;s+=o)a.push(l(t,s,s+o>c?c:s+o));return 1===i?(e=t[r-1],a.push(n[e>>2]+n[e<<4&63]+"==")):2===i&&(e=(t[r-2]<<8)+t[r-1],a.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"=")),a.join("")};for(var n=[],r=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0;o<64;++o)n[o]=a[o],r[a.charCodeAt(o)]=o;function s(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function l(t,e,r){for(var i,a,o=[],s=e;s<r;s+=3)i=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),o.push(n[(a=i)>>18&63]+n[a>>12&63]+n[a>>6&63]+n[63&a]);return o.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},8764:(t,e,n)=>{"use strict";const r=n(9742),i=n(645),a="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=l,e.SlowBuffer=function(t){return+t!=t&&(t=0),l.alloc(+t)},e.INSPECT_MAX_BYTES=50;const o=2147483647;function s(t){if(t>o)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,l.prototype),e}function l(t,e,n){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return h(t)}return c(t,e,n)}function c(t,e,n){if("string"==typeof t)return function(t,e){if("string"==typeof e&&""!==e||(e="utf8"),!l.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const n=0|m(t,e);let r=s(n);const i=r.write(t,e);return i!==n&&(r=r.slice(0,i)),r}(t,e);if(ArrayBuffer.isView(t))return function(t){if(K(t,Uint8Array)){const e=new Uint8Array(t);return p(e.buffer,e.byteOffset,e.byteLength)}return u(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(K(t,ArrayBuffer)||t&&K(t.buffer,ArrayBuffer))return p(t,e,n);if("undefined"!=typeof SharedArrayBuffer&&(K(t,SharedArrayBuffer)||t&&K(t.buffer,SharedArrayBuffer)))return p(t,e,n);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return l.from(r,e,n);const i=function(t){if(l.isBuffer(t)){const e=0|f(t.length),n=s(e);return 0===n.length||t.copy(n,0,0,e),n}return void 0!==t.length?"number"!=typeof t.length||X(t.length)?s(0):u(t):"Buffer"===t.type&&Array.isArray(t.data)?u(t.data):void 0}(t);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return l.from(t[Symbol.toPrimitive]("string"),e,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function d(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function h(t){return d(t),s(t<0?0:0|f(t))}function u(t){const e=t.length<0?0:0|f(t.length),n=s(e);for(let r=0;r<e;r+=1)n[r]=255&t[r];return n}function p(t,e,n){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),Object.setPrototypeOf(r,l.prototype),r}function f(t){if(t>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|t}function m(t,e){if(l.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||K(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const n=t.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return Q(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Y(t).length;default:if(i)return r?-1:Q(t).length;e=(""+e).toLowerCase(),i=!0}}function g(t,e,n){let r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return q(this,e,n);case"utf8":case"utf-8":return E(this,e,n);case"ascii":return I(this,e,n);case"latin1":case"binary":return P(this,e,n);case"base64":return _(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function y(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function v(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),X(n=+n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=l.from(e,r)),l.isBuffer(e))return 0===e.length?-1:b(t,e,n,r,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):b(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function b(t,e,n,r,i){let a,o=1,s=t.length,l=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;o=2,s/=2,l/=2,n/=2}function c(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(i){let r=-1;for(a=n;a<s;a++)if(c(t,a)===c(e,-1===r?0:a-r)){if(-1===r&&(r=a),a-r+1===l)return r*o}else-1!==r&&(a-=a-r),r=-1}else for(n+l>s&&(n=s-l),a=n;a>=0;a--){let n=!0;for(let r=0;r<l;r++)if(c(t,a+r)!==c(e,r)){n=!1;break}if(n)return a}return-1}function w(t,e,n,r){n=Number(n)||0;const i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;const a=e.length;let o;for(r>a/2&&(r=a/2),o=0;o<r;++o){const r=parseInt(e.substr(2*o,2),16);if(X(r))return o;t[n+o]=r}return o}function x(t,e,n,r){return J(Q(e,t.length-n),t,n,r)}function k(t,e,n,r){return J(function(t){const e=[];for(let n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function A(t,e,n,r){return J(Y(e),t,n,r)}function T(t,e,n,r){return J(function(t,e){let n,r,i;const a=[];for(let o=0;o<t.length&&!((e-=2)<0);++o)n=t.charCodeAt(o),r=n>>8,i=n%256,a.push(i),a.push(r);return a}(e,t.length-n),t,n,r)}function _(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function E(t,e,n){n=Math.min(t.length,n);const r=[];let i=e;for(;i<n;){const e=t[i];let a=null,o=e>239?4:e>223?3:e>191?2:1;if(i+o<=n){let n,r,s,l;switch(o){case 1:e<128&&(a=e);break;case 2:n=t[i+1],128==(192&n)&&(l=(31&e)<<6|63&n,l>127&&(a=l));break;case 3:n=t[i+1],r=t[i+2],128==(192&n)&&128==(192&r)&&(l=(15&e)<<12|(63&n)<<6|63&r,l>2047&&(l<55296||l>57343)&&(a=l));break;case 4:n=t[i+1],r=t[i+2],s=t[i+3],128==(192&n)&&128==(192&r)&&128==(192&s)&&(l=(15&e)<<18|(63&n)<<12|(63&r)<<6|63&s,l>65535&&l<1114112&&(a=l))}}null===a?(a=65533,o=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),i+=o}return function(t){const e=t.length;if(e<=S)return String.fromCharCode.apply(String,t);let n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=S));return n}(r)}e.kMaxLength=o,l.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),l.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),l.poolSize=8192,l.from=function(t,e,n){return c(t,e,n)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array),l.alloc=function(t,e,n){return function(t,e,n){return d(t),t<=0?s(t):void 0!==e?"string"==typeof n?s(t).fill(e,n):s(t).fill(e):s(t)}(t,e,n)},l.allocUnsafe=function(t){return h(t)},l.allocUnsafeSlow=function(t){return h(t)},l.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==l.prototype},l.compare=function(t,e){if(K(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),K(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(t)||!l.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let n=t.length,r=e.length;for(let i=0,a=Math.min(n,r);i<a;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},l.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return l.alloc(0);let n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;const r=l.allocUnsafe(e);let i=0;for(n=0;n<t.length;++n){let e=t[n];if(K(e,Uint8Array))i+e.length>r.length?(l.isBuffer(e)||(e=l.from(e)),e.copy(r,i)):Uint8Array.prototype.set.call(r,e,i);else{if(!l.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(r,i)}i+=e.length}return r},l.byteLength=m,l.prototype._isBuffer=!0,l.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)y(this,e,e+1);return this},l.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},l.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},l.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?E(this,0,t):g.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(t){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===l.compare(this,t)},l.prototype.inspect=function(){let t="";const n=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},a&&(l.prototype[a]=l.prototype.inspect),l.prototype.compare=function(t,e,n,r,i){if(K(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;let a=(i>>>=0)-(r>>>=0),o=(n>>>=0)-(e>>>=0);const s=Math.min(a,o),c=this.slice(r,i),d=t.slice(e,n);for(let t=0;t<s;++t)if(c[t]!==d[t]){a=c[t],o=d[t];break}return a<o?-1:o<a?1:0},l.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},l.prototype.indexOf=function(t,e,n){return v(this,t,e,n,!0)},l.prototype.lastIndexOf=function(t,e,n){return v(this,t,e,n,!1)},l.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let a=!1;for(;;)switch(r){case"hex":return w(this,t,e,n);case"utf8":case"utf-8":return x(this,t,e,n);case"ascii":case"latin1":case"binary":return k(this,t,e,n);case"base64":return A(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,e,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const S=4096;function I(t,e,n){let r="";n=Math.min(t.length,n);for(let i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function P(t,e,n){let r="";n=Math.min(t.length,n);for(let i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function q(t,e,n){const r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);let i="";for(let r=e;r<n;++r)i+=V[t[r]];return i}function C(t,e,n){const r=t.slice(e,n);let i="";for(let t=0;t<r.length-1;t+=2)i+=String.fromCharCode(r[t]+256*r[t+1]);return i}function j(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function z(t,e,n,r,i,a){if(!l.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<a)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function D(t,e,n,r,i){H(e,r,i,t,n,7);let a=Number(e&BigInt(4294967295));t[n++]=a,a>>=8,t[n++]=a,a>>=8,t[n++]=a,a>>=8,t[n++]=a;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[n++]=o,o>>=8,t[n++]=o,o>>=8,t[n++]=o,o>>=8,t[n++]=o,n}function O(t,e,n,r,i){H(e,r,i,t,n,7);let a=Number(e&BigInt(4294967295));t[n+7]=a,a>>=8,t[n+6]=a,a>>=8,t[n+5]=a,a>>=8,t[n+4]=a;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[n+3]=o,o>>=8,t[n+2]=o,o>>=8,t[n+1]=o,o>>=8,t[n]=o,n+8}function M(t,e,n,r,i,a){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function B(t,e,n,r,a){return e=+e,n>>>=0,a||M(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function F(t,e,n,r,a){return e=+e,n>>>=0,a||M(t,0,n,8),i.write(t,e,n,r,52,8),n+8}l.prototype.slice=function(t,e){const n=this.length;(t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);const r=this.subarray(t,e);return Object.setPrototypeOf(r,l.prototype),r},l.prototype.readUintLE=l.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||j(t,e,this.length);let r=this[t],i=1,a=0;for(;++a<e&&(i*=256);)r+=this[t+a]*i;return r},l.prototype.readUintBE=l.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||j(t,e,this.length);let r=this[t+--e],i=1;for(;e>0&&(i*=256);)r+=this[t+--e]*i;return r},l.prototype.readUint8=l.prototype.readUInt8=function(t,e){return t>>>=0,e||j(t,1,this.length),this[t]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(t,e){return t>>>=0,e||j(t,2,this.length),this[t]|this[t+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(t,e){return t>>>=0,e||j(t,2,this.length),this[t]<<8|this[t+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(t,e){return t>>>=0,e||j(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(t,e){return t>>>=0,e||j(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},l.prototype.readBigUInt64LE=Z((function(t){U(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||W(t,this.length-8);const r=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,i=this[++t]+256*this[++t]+65536*this[++t]+n*2**24;return BigInt(r)+(BigInt(i)<<BigInt(32))})),l.prototype.readBigUInt64BE=Z((function(t){U(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||W(t,this.length-8);const r=e*2**24+65536*this[++t]+256*this[++t]+this[++t],i=this[++t]*2**24+65536*this[++t]+256*this[++t]+n;return(BigInt(r)<<BigInt(32))+BigInt(i)})),l.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||j(t,e,this.length);let r=this[t],i=1,a=0;for(;++a<e&&(i*=256);)r+=this[t+a]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*e)),r},l.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||j(t,e,this.length);let r=e,i=1,a=this[t+--r];for(;r>0&&(i*=256);)a+=this[t+--r]*i;return i*=128,a>=i&&(a-=Math.pow(2,8*e)),a},l.prototype.readInt8=function(t,e){return t>>>=0,e||j(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},l.prototype.readInt16LE=function(t,e){t>>>=0,e||j(t,2,this.length);const n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(t,e){t>>>=0,e||j(t,2,this.length);const n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(t,e){return t>>>=0,e||j(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},l.prototype.readInt32BE=function(t,e){return t>>>=0,e||j(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},l.prototype.readBigInt64LE=Z((function(t){U(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||W(t,this.length-8);const r=this[t+4]+256*this[t+5]+65536*this[t+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),l.prototype.readBigInt64BE=Z((function(t){U(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||W(t,this.length-8);const r=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(r)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+n)})),l.prototype.readFloatLE=function(t,e){return t>>>=0,e||j(t,4,this.length),i.read(this,t,!0,23,4)},l.prototype.readFloatBE=function(t,e){return t>>>=0,e||j(t,4,this.length),i.read(this,t,!1,23,4)},l.prototype.readDoubleLE=function(t,e){return t>>>=0,e||j(t,8,this.length),i.read(this,t,!0,52,8)},l.prototype.readDoubleBE=function(t,e){return t>>>=0,e||j(t,8,this.length),i.read(this,t,!1,52,8)},l.prototype.writeUintLE=l.prototype.writeUIntLE=function(t,e,n,r){t=+t,e>>>=0,n>>>=0,r||z(this,t,e,n,Math.pow(2,8*n)-1,0);let i=1,a=0;for(this[e]=255&t;++a<n&&(i*=256);)this[e+a]=t/i&255;return e+n},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(t,e,n,r){t=+t,e>>>=0,n>>>=0,r||z(this,t,e,n,Math.pow(2,8*n)-1,0);let i=n-1,a=1;for(this[e+i]=255&t;--i>=0&&(a*=256);)this[e+i]=t/a&255;return e+n},l.prototype.writeUint8=l.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||z(this,t,e,1,255,0),this[e]=255&t,e+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||z(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||z(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||z(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||z(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},l.prototype.writeBigUInt64LE=Z((function(t,e=0){return D(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),l.prototype.writeBigUInt64BE=Z((function(t,e=0){return O(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),l.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*n-1);z(this,t,e,n,r-1,-r)}let i=0,a=1,o=0;for(this[e]=255&t;++i<n&&(a*=256);)t<0&&0===o&&0!==this[e+i-1]&&(o=1),this[e+i]=(t/a>>0)-o&255;return e+n},l.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*n-1);z(this,t,e,n,r-1,-r)}let i=n-1,a=1,o=0;for(this[e+i]=255&t;--i>=0&&(a*=256);)t<0&&0===o&&0!==this[e+i+1]&&(o=1),this[e+i]=(t/a>>0)-o&255;return e+n},l.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||z(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},l.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||z(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},l.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||z(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},l.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||z(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},l.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||z(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},l.prototype.writeBigInt64LE=Z((function(t,e=0){return D(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),l.prototype.writeBigInt64BE=Z((function(t,e=0){return O(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),l.prototype.writeFloatLE=function(t,e,n){return B(this,t,e,!0,n)},l.prototype.writeFloatBE=function(t,e,n){return B(this,t,e,!1,n)},l.prototype.writeDoubleLE=function(t,e,n){return F(this,t,e,!0,n)},l.prototype.writeDoubleBE=function(t,e,n){return F(this,t,e,!1,n)},l.prototype.copy=function(t,e,n,r){if(!l.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);const i=r-n;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,n,r):Uint8Array.prototype.set.call(t,this.subarray(n,r),e),i},l.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!l.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===t.length){const e=t.charCodeAt(0);("utf8"===r&&e<128||"latin1"===r)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;let i;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(i=e;i<n;++i)this[i]=t;else{const a=l.isBuffer(t)?t:l.from(t,r),o=a.length;if(0===o)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(i=0;i<n-e;++i)this[i+e]=a[i%o]}return this};const R={};function L(t,e,n){R[t]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function N(t){let e="",n=t.length;const r="-"===t[0]?1:0;for(;n>=r+4;n-=3)e=`_${t.slice(n-3,n)}${e}`;return`${t.slice(0,n)}${e}`}function H(t,e,n,r,i,a){if(t>n||t<e){const r="bigint"==typeof e?"n":"";let i;throw i=a>3?0===e||e===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(a+1)}${r}`:`>= -(2${r} ** ${8*(a+1)-1}${r}) and < 2 ** ${8*(a+1)-1}${r}`:`>= ${e}${r} and <= ${n}${r}`,new R.ERR_OUT_OF_RANGE("value",i,t)}!function(t,e,n){U(e,"offset"),void 0!==t[e]&&void 0!==t[e+n]||W(e,t.length-(n+1))}(r,i,a)}function U(t,e){if("number"!=typeof t)throw new R.ERR_INVALID_ARG_TYPE(e,"number",t)}function W(t,e,n){if(Math.floor(t)!==t)throw U(t,n),new R.ERR_OUT_OF_RANGE(n||"offset","an integer",t);if(e<0)throw new R.ERR_BUFFER_OUT_OF_BOUNDS;throw new R.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${e}`,t)}L("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),L("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),L("ERR_OUT_OF_RANGE",(function(t,e,n){let r=`The value of "${t}" is out of range.`,i=n;return Number.isInteger(n)&&Math.abs(n)>2**32?i=N(String(n)):"bigint"==typeof n&&(i=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(i=N(i)),i+="n"),r+=` It must be ${e}. Received ${i}`,r}),RangeError);const G=/[^+/0-9A-Za-z-_]/g;function Q(t,e){let n;e=e||1/0;const r=t.length;let i=null;const a=[];for(let o=0;o<r;++o){if(n=t.charCodeAt(o),n>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&a.push(239,191,189);continue}if(o+1===r){(e-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;a.push(n)}else if(n<2048){if((e-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function Y(t){return r.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(G,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function J(t,e,n,r){let i;for(i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function K(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function X(t){return t!=t}const V=function(){const t="0123456789abcdef",e=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let i=0;i<16;++i)e[r+i]=t[n]+t[i]}return e}();function Z(t){return"undefined"==typeof BigInt?$:t}function $(){throw new Error("BigInt not supported")}},1990:t=>{"use strict";function e(t,e,n){return e=e instanceof RegExp?e:new RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),t.replace(e,n)}var n={clean:function(t){if("string"!=typeof t)throw new Error("Expected a string, received: "+t);return t=e(t,"./","/"),t=e(t,"..","."),t=e(t," ","-"),t=e(t,/^[~^:?*\\\-]/g,""),t=e(t,/[~^:?*\\]/g,"-"),t=e(t,/[~^:?*\\\-]$/g,""),t=e(t,"@{","-"),t=e(t,/\.$/g,""),t=e(t,/\/$/g,""),e(t,/\.lock$/g,"")}};t.exports=n},4606:(t,e)=>{var n;n=function(t){t.version="1.2.2";var e=function(){for(var t=0,e=new Array(256),n=0;256!=n;++n)t=1&(t=1&(t=1&(t=1&(t=1&(t=1&(t=1&(t=1&(t=n)?-306674912^t>>>1:t>>>1)?-306674912^t>>>1:t>>>1)?-306674912^t>>>1:t>>>1)?-306674912^t>>>1:t>>>1)?-306674912^t>>>1:t>>>1)?-306674912^t>>>1:t>>>1)?-306674912^t>>>1:t>>>1)?-306674912^t>>>1:t>>>1,e[n]=t;return"undefined"!=typeof Int32Array?new Int32Array(e):e}(),n=function(t){var e=0,n=0,r=0,i="undefined"!=typeof Int32Array?new Int32Array(4096):new Array(4096);for(r=0;256!=r;++r)i[r]=t[r];for(r=0;256!=r;++r)for(n=t[r],e=256+r;e<4096;e+=256)n=i[e]=n>>>8^t[255&n];var a=[];for(r=1;16!=r;++r)a[r-1]="undefined"!=typeof Int32Array?i.subarray(256*r,256*r+256):i.slice(256*r,256*r+256);return a}(e),r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],l=n[5],c=n[6],d=n[7],h=n[8],u=n[9],p=n[10],f=n[11],m=n[12],g=n[13],y=n[14];t.table=e,t.bstr=function(t,n){for(var r=-1^n,i=0,a=t.length;i<a;)r=r>>>8^e[255&(r^t.charCodeAt(i++))];return~r},t.buf=function(t,n){for(var v=-1^n,b=t.length-15,w=0;w<b;)v=y[t[w++]^255&v]^g[t[w++]^v>>8&255]^m[t[w++]^v>>16&255]^f[t[w++]^v>>>24]^p[t[w++]]^u[t[w++]]^h[t[w++]]^d[t[w++]]^c[t[w++]]^l[t[w++]]^s[t[w++]]^o[t[w++]]^a[t[w++]]^i[t[w++]]^r[t[w++]]^e[t[w++]];for(b+=15;w<b;)v=v>>>8^e[255&(v^t[w++])];return~v},t.str=function(t,n){for(var r=-1^n,i=0,a=t.length,o=0,s=0;i<a;)(o=t.charCodeAt(i++))<128?r=r>>>8^e[255&(r^o)]:o<2048?r=(r=r>>>8^e[255&(r^(192|o>>6&31))])>>>8^e[255&(r^(128|63&o))]:o>=55296&&o<57344?(o=64+(1023&o),s=1023&t.charCodeAt(i++),r=(r=(r=(r=r>>>8^e[255&(r^(240|o>>8&7))])>>>8^e[255&(r^(128|o>>2&63))])>>>8^e[255&(r^(128|s>>6&15|(3&o)<<4))])>>>8^e[255&(r^(128|63&s))]):r=(r=(r=r>>>8^e[255&(r^(224|o>>12&15))])>>>8^e[255&(r^(128|o>>6&63))])>>>8^e[255&(r^(128|63&o))];return~r}},"undefined"==typeof DO_NOT_EXPORT_CRC?n(e):n({})},9027:(t,e,n)=>{var r=n(6375);function i(t,e){for(var n=[],i=t.length,a=e.length,o=function(t,e){var n=new r(t,e);n.compose();for(var i,a,o=n.getses(),s=t.length-1,l=e.length-1,c=o.length-1;c>=0;--c)o[c].t===n.SES_COMMON?(a?(a.chain={file1index:s,file2index:l,chain:null},a=a.chain):a=i={file1index:s,file2index:l,chain:null},s--,l--):o[c].t===n.SES_DELETE?s--:o[c].t===n.SES_ADD&&l--;var d={file1index:-1,file2index:-1,chain:null};return a?(a.chain=d,i):d}(t,e);null!==o;o=o.chain){var s=i-o.file1index-1,l=a-o.file2index-1;i=o.file1index,a=o.file2index,(s||l)&&n.push({file1:[i+1,s],file2:[a+1,l]})}return n.reverse(),n}t.exports=function(t,e,n){var r=[],a=[t,e,n],o=function(t,e,n){var r,a=i(e,t),o=i(e,n),s=[];function l(t,e){s.push([t.file1[0],e,t.file1[1],t.file2[0],t.file2[1]])}for(r=0;r<a.length;r++)l(a[r],0);for(r=0;r<o.length;r++)l(o[r],2);s.sort((function(t,e){return t[0]-e[0]}));var c=[],d=0;function h(t){t>d&&(c.push([1,d,t-d]),d=t)}for(var u=0;u<s.length;u++){for(var p=u,f=s[u],m=f[0],g=m+f[2];u<s.length-1;){var y=s[u+1],v=y[0];if(v>g)break;g=Math.max(g,v+y[2]),u++}if(h(m),p==u)f[4]>0&&c.push([f[1],f[3],f[4]]);else{var b={0:[t.length,-1,e.length,-1],2:[n.length,-1,e.length,-1]};for(r=p;r<=u;r++){var w=b[(f=s[r])[1]],x=f[0],k=x+f[2],A=f[3],T=A+f[4];w[0]=Math.min(A,w[0]),w[1]=Math.max(T,w[1]),w[2]=Math.min(x,w[2]),w[3]=Math.max(k,w[3])}var _=b[0][0]+(m-b[0][2]),E=b[0][1]+(g-b[0][3]),S=b[2][0]+(m-b[2][2]),I=b[2][1]+(g-b[2][3]);c.push([-1,_,E-_,m,g-m,S,I-S])}d=g}return h(e.length),c}(t,e,n),s=[];function l(){s.length&&r.push({ok:s}),s=[]}function c(t){for(var e=0;e<t.length;e++)s.push(t[e])}function d(e){if(e[2]!=e[6])return!0;for(var r=e[1],i=e[5],a=0;a<e[2];a++)if(t[a+r]!=n[a+i])return!0;return!1}for(var h=0;h<o.length;h++){var u=o[h],p=u[0];-1==p?d(u)?(l(),r.push({conflict:{a:t.slice(u[1],u[1]+u[2]),aIndex:u[1],o:e.slice(u[3],u[3]+u[4]),oIndex:u[3],b:n.slice(u[5],u[5]+u[6]),bIndex:u[5]}})):c(a[0].slice(u[1],u[1]+u[2])):c(a[p].slice(u[1],u[1]+u[2]))}return l(),r}},6375:t=>{t.exports=function(t,e){var n,r,i=t,a=e,o=i.length,s=a.length,l=!1,c=null,d=o+1,h=[],u=[],p=[],f="",m=function(t,e,n){return{x:t,y:e,k:n}},g=function(t,e){return{elem:t,t:e}},y=function(t,e,n){var r,l,c;for(r=e>n?h[t-1+d]:h[t+1+d],l=(c=Math.max(e,n))-t;l<o&&c<s&&i[l]===a[c];)++l,++c;return h[t+d]=u.length,u[u.length]=new m(l,c,r),c};return o>=s&&(n=i,r=o,i=a,a=n,o=s,s=r,l=!0,d=o+1),{SES_DELETE:-1,SES_COMMON:0,SES_ADD:1,editdistance:function(){return c},getlcs:function(){return f},getses:function(){return p},compose:function(){var t,e,n,r,v,b,w,x;for(t=s-o,e=o+s+3,n={},w=0;w<e;++w)n[w]=-1,h[w]=-1;r=-1;do{for(x=-++r;x<=t-1;++x)n[x+d]=y(x,n[x-1+d]+1,n[x+1+d]);for(x=t+r;x>=t+1;--x)n[x+d]=y(x,n[x-1+d]+1,n[x+1+d]);n[t+d]=y(t,n[t-1+d]+1,n[t+1+d])}while(n[t+d]!==s);for(c=t+2*r,v=h[t+d],b=[];-1!==v;)b[b.length]=new m(u[v].x,u[v].y,null),v=u[v].k;!function(t){var e,n,r;for(e=n=0,r=t.length-1;r>=0;--r)for(;e<t[r].x||n<t[r].y;)t[r].y-t[r].x>n-e?(p[p.length]=new g(a[n],l?-1:1),++n):t[r].y-t[r].x<n-e?(p[p.length]=new g(i[e],l?1:-1),++e):(p[p.length]=new g(i[e],0),f+=i[e],++e,++n)}(b)}}}},8806:function(t,e,n){var r=n(8764).Buffer;!function(t){"use strict";function e(t){for(var e=0,n=Math.min(65536,t.length+1),r=new Uint16Array(n),i=[],a=0;;){var o=e<t.length;if(!o||a>=n-1){var s=r.subarray(0,a);if(i.push(String.fromCharCode.apply(null,s)),!o)return i.join("");t=t.subarray(e),e=0,a=0}var l=t[e++];if(0==(128&l))r[a++]=l;else if(192==(224&l)){var c=63&t[e++];r[a++]=(31&l)<<6|c}else if(224==(240&l)){c=63&t[e++];var d=63&t[e++];r[a++]=(31&l)<<12|c<<6|d}else if(240==(248&l)){var h=(7&l)<<18|(c=63&t[e++])<<12|(d=63&t[e++])<<6|63&t[e++];h>65535&&(h-=65536,r[a++]=h>>>10&1023|55296,h=56320|1023&h),r[a++]=h}}}var n="Failed to ",i=function(t,e,r){if(t)throw new Error("".concat(n).concat(e,": the '").concat(r,"' option is unsupported."))},a="function"==typeof r&&r.from,o=a?function(t){return r.from(t)}:function(t){for(var e=0,n=t.length,r=0,i=Math.max(32,n+(n>>>1)+7),a=new Uint8Array(i>>>3<<3);e<n;){var o=t.charCodeAt(e++);if(o>=55296&&o<=56319){if(e<n){var s=t.charCodeAt(e);56320==(64512&s)&&(++e,o=((1023&o)<<10)+(1023&s)+65536)}if(o>=55296&&o<=56319)continue}if(r+4>a.length){i+=8,i=(i*=1+e/t.length*2)>>>3<<3;var l=new Uint8Array(i);l.set(a),a=l}if(0!=(4294967168&o)){if(0==(4294965248&o))a[r++]=o>>>6&31|192;else if(0==(4294901760&o))a[r++]=o>>>12&15|224,a[r++]=o>>>6&63|128;else{if(0!=(4292870144&o))continue;a[r++]=o>>>18&7|240,a[r++]=o>>>12&63|128,a[r++]=o>>>6&63|128}a[r++]=63&o|128}else a[r++]=o}return a.slice?a.slice(0,r):a.subarray(0,r)};function s(){this.encoding="utf-8"}s.prototype.encode=function(t,e){return i(e&&e.stream,"encode","stream"),o(t)};var l=!a&&"function"==typeof Blob&&"function"==typeof URL&&"function"==typeof URL.createObjectURL,c=["utf-8","utf8","unicode-1-1-utf-8"],d=e;a?d=function(t,e){return(t instanceof r?t:r.from(t.buffer,t.byteOffset,t.byteLength)).toString(e)}:l&&(d=function(t){try{return function(t){var e;try{var n=new Blob([t],{type:"text/plain;charset=UTF-8"});e=URL.createObjectURL(n);var r=new XMLHttpRequest;return r.open("GET",e,!1),r.send(),r.responseText}finally{e&&URL.revokeObjectURL(e)}}(t)}catch(n){return e(t)}});var h="construct 'TextDecoder'",u="".concat(n," ").concat(h,": the ");function p(t,e){if(i(e&&e.fatal,h,"fatal"),t=t||"utf-8",!(a?r.isEncoding(t):-1!==c.indexOf(t.toLowerCase())))throw new RangeError("".concat(u," encoding label provided ('").concat(t,"') is invalid."));this.encoding=t,this.fatal=!1,this.ignoreBOM=!1}p.prototype.decode=function(t,e){var n;return i(e&&e.stream,"decode","stream"),n=t instanceof Uint8Array?t:t.buffer instanceof ArrayBuffer?new Uint8Array(t.buffer):new Uint8Array(t),d(n,this.encoding)},t.TextEncoder=t.TextEncoder||s,t.TextDecoder=t.TextDecoder||p}("undefined"!=typeof window?window:void 0!==n.g?n.g:this)},645:(t,e)=>{e.read=function(t,e,n,r,i){var a,o,s=8*i-r-1,l=(1<<s)-1,c=l>>1,d=-7,h=n?i-1:0,u=n?-1:1,p=t[e+h];for(h+=u,a=p&(1<<-d)-1,p>>=-d,d+=s;d>0;a=256*a+t[e+h],h+=u,d-=8);for(o=a&(1<<-d)-1,a>>=-d,d+=r;d>0;o=256*o+t[e+h],h+=u,d-=8);if(0===a)a=1-c;else{if(a===l)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,r),a-=c}return(p?-1:1)*o*Math.pow(2,a-r)},e.write=function(t,e,n,r,i,a){var o,s,l,c=8*a-i-1,d=(1<<c)-1,h=d>>1,u=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:a-1,f=r?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,o=d):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),(e+=o+h>=1?u/l:u*Math.pow(2,1-h))*l>=2&&(o++,l/=2),o+h>=d?(s=0,o=d):o+h>=1?(s=(e*l-1)*Math.pow(2,i),o+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;t[n+p]=255&s,p+=f,s/=256,i-=8);for(o=o<<i|s,c+=i;c>0;t[n+p]=255&o,p+=f,o/=256,c-=8);t[n+p-f]|=128*m}},5151:t=>{function e(t){return Array.isArray(t)?t:[t]}const n=/^\s+$/,r=/(?:[^\\]|^)\\$/,i=/^\\!/,a=/^\\#/,o=/\r?\n/g,s=/^\.*\/|^\.+$/;let l="node-ignore";"undefined"!=typeof Symbol&&(l=Symbol.for("node-ignore"));const c=l,d=/([0-z])-([0-z])/g,h=()=>!1,u=[[/^\uFEFF/,()=>""],[/((?:\\\\)*?)(\\?\s+)$/,(t,e,n)=>e+(0===n.indexOf("\\")?" ":"")],[/(\\+?)\s/g,(t,e)=>{const{length:n}=e;return e.slice(0,n-n%2)+" "}],[/[\\$.|*+(){^]/g,t=>`\\${t}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(t,e,n)=>e+6<n.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(t,e,n)=>e+n.replace(/\\\*/g,"[^\\/]*")],[/\\\\\\(?=[$.|*+(){^])/g,()=>"\\"],[/\\\\/g,()=>"\\"],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(t,e,n,r,i)=>"\\"===e?`\\[${n}${(t=>{const{length:e}=t;return t.slice(0,e-e%2)})(r)}${i}`:"]"===i&&r.length%2==0?`[${(t=>t.replace(d,((t,e,n)=>e.charCodeAt(0)<=n.charCodeAt(0)?t:"")))(n)}${r}]`:"[]"],[/(?:[^*])$/,t=>/\/$/.test(t)?`${t}$`:`${t}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(t,e)=>(e?`${e}[^/]+`:"[^/]*")+"(?=$|\\/$)"]],p=Object.create(null),f=t=>"string"==typeof t;class m{constructor(t,e,n,r){this.origin=t,this.pattern=e,this.negative=n,this.regex=r}}const g=(t,e)=>{throw new e(t)},y=(t,e,n)=>f(t)?t?!y.isNotRelative(t)||n(`path should be a \`path.relative()\`d string, but got "${e}"`,RangeError):n("path must not be empty",TypeError):n(`path must be a string, but got \`${e}\``,TypeError),v=t=>s.test(t);y.isNotRelative=v,y.convert=t=>t;class b{constructor({ignorecase:t=!0,ignoreCase:e=t,allowRelativePaths:n=!1}={}){var r;r=c,Object.defineProperty(this,r,{value:true}),this._rules=[],this._ignoreCase=e,this._allowRelativePaths=n,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(t){if(t&&t[c])return this._rules=this._rules.concat(t._rules),void(this._added=!0);if((t=>t&&f(t)&&!n.test(t)&&!r.test(t)&&0!==t.indexOf("#"))(t)){const e=((t,e)=>{const n=t;let r=!1;0===t.indexOf("!")&&(r=!0,t=t.substr(1));const o=((t,e)=>{let n=p[t];return n||(n=u.reduce(((e,[n,r])=>e.replace(n,r.bind(t))),t),p[t]=n),e?new RegExp(n,"i"):new RegExp(n)})(t=t.replace(i,"!").replace(a,"#"),e);return new m(n,t,r,o)})(t,this._ignoreCase);this._added=!0,this._rules.push(e)}}add(t){return this._added=!1,e(f(t)?(t=>t.split(o))(t):t).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(t){return this.add(t)}_testOne(t,e){let n=!1,r=!1;return this._rules.forEach((i=>{const{negative:a}=i;r===a&&n!==r||a&&!n&&!r&&!e||i.regex.test(t)&&(n=!a,r=a)})),{ignored:n,unignored:r}}_test(t,e,n,r){const i=t&&y.convert(t);return y(i,t,this._allowRelativePaths?h:g),this._t(i,e,n,r)}_t(t,e,n,r){if(t in e)return e[t];if(r||(r=t.split("/")),r.pop(),!r.length)return e[t]=this._testOne(t,n);const i=this._t(r.join("/")+"/",e,n,r);return e[t]=i.ignored?i:this._testOne(t,n)}ignores(t){return this._test(t,this._ignoreCache,!1).ignored}createFilter(){return t=>!this.ignores(t)}filter(t){return e(t).filter(this.createFilter())}test(t){return this._test(t,this._testCache,!0)}}const w=t=>new b(t);if(w.isPathValid=t=>y(t&&y.convert(t),t,h),w.default=w,t.exports=w,"undefined"!=typeof process&&(process.env&&process.env.IGNORE_TEST_WIN32||"win32"===process.platform)){const t=t=>/^\\\\\?\\/.test(t)||/["<>|\u0000-\u001F]+/u.test(t)?t:t.replace(/\\/g,"/");y.convert=t;const e=/^[a-z]:\//i;y.isNotRelative=t=>e.test(t)||v(t)}},5717:t=>{"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}},8496:function(t,e,n){(t=n.nmd(t)).exports=function(){"use strict";function e(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function n(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?e(Object(r),!0).forEach((function(e){s(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,f(r.key),r)}}function o(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function s(t,e,n){return(e=f(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e)}function c(t){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},c(t)}function d(t,e){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},d(t,e)}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=c(t);if(e){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return h(t)}(this,n)}}function p(){return p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=c(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},p.apply(this,arguments)}function f(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:e+""}var m=function(t){return!(!t||!t.Window)&&t instanceof t.Window},g=void 0,y=void 0;function v(t){g=t;var e=t.document.createTextNode("");e.ownerDocument!==t.document&&"function"==typeof t.wrap&&t.wrap(e)===e&&(t=t.wrap(t)),y=t}function b(t){return m(t)?t:(t.ownerDocument||t).defaultView||y.window}"undefined"!=typeof window&&window&&v(window);var w=function(t){return!!t&&"object"===r(t)},x=function(t){return"function"==typeof t},k={window:function(t){return t===y||m(t)},docFrag:function(t){return w(t)&&11===t.nodeType},object:w,func:x,number:function(t){return"number"==typeof t},bool:function(t){return"boolean"==typeof t},string:function(t){return"string"==typeof t},element:function(t){if(!t||"object"!==r(t))return!1;var e=b(t)||y;return/object|function/.test("undefined"==typeof Element?"undefined":r(Element))?t instanceof Element||t instanceof e.Element:1===t.nodeType&&"string"==typeof t.nodeName},plainObject:function(t){return w(t)&&!!t.constructor&&/function Object\b/.test(t.constructor.toString())},array:function(t){return w(t)&&void 0!==t.length&&x(t.splice)}};function A(t){var e=t.interaction;if("drag"===e.prepared.name){var n=e.prepared.axis;"x"===n?(e.coords.cur.page.y=e.coords.start.page.y,e.coords.cur.client.y=e.coords.start.client.y,e.coords.velocity.client.y=0,e.coords.velocity.page.y=0):"y"===n&&(e.coords.cur.page.x=e.coords.start.page.x,e.coords.cur.client.x=e.coords.start.client.x,e.coords.velocity.client.x=0,e.coords.velocity.page.x=0)}}function T(t){var e=t.iEvent,n=t.interaction;if("drag"===n.prepared.name){var r=n.prepared.axis;if("x"===r||"y"===r){var i="x"===r?"y":"x";e.page[i]=n.coords.start.page[i],e.client[i]=n.coords.start.client[i],e.delta[i]=0}}}var _={id:"actions/drag",install:function(t){var e=t.actions,n=t.Interactable,r=t.defaults;n.prototype.draggable=_.draggable,e.map.drag=_,e.methodDict.drag="draggable",r.actions.drag=_.defaults},listeners:{"interactions:before-action-move":A,"interactions:action-resume":A,"interactions:action-move":T,"auto-start:check":function(t){var e=t.interaction,n=t.interactable,r=t.buttons,i=n.options.drag;if(i&&i.enabled&&(!e.pointerIsDown||!/mouse|pointer/.test(e.pointerType)||0!=(r&n.options.drag.mouseButtons)))return t.action={name:"drag",axis:"start"===i.lockAxis?i.startAxis:i.lockAxis},!1}},draggable:function(t){return k.object(t)?(this.options.drag.enabled=!1!==t.enabled,this.setPerAction("drag",t),this.setOnEvents("drag",t),/^(xy|x|y|start)$/.test(t.lockAxis)&&(this.options.drag.lockAxis=t.lockAxis),/^(xy|x|y)$/.test(t.startAxis)&&(this.options.drag.startAxis=t.startAxis),this):k.bool(t)?(this.options.drag.enabled=t,this):this.options.drag},beforeMove:A,move:T,defaults:{startAxis:"xy",lockAxis:"xy"},getCursor:function(){return"move"},filterEventType:function(t){return 0===t.search("drag")}},E=_,S={init:function(t){var e=t;S.document=e.document,S.DocumentFragment=e.DocumentFragment||I,S.SVGElement=e.SVGElement||I,S.SVGSVGElement=e.SVGSVGElement||I,S.SVGElementInstance=e.SVGElementInstance||I,S.Element=e.Element||I,S.HTMLElement=e.HTMLElement||S.Element,S.Event=e.Event,S.Touch=e.Touch||I,S.PointerEvent=e.PointerEvent||e.MSPointerEvent},document:null,DocumentFragment:null,SVGElement:null,SVGSVGElement:null,SVGElementInstance:null,Element:null,HTMLElement:null,Event:null,Touch:null,PointerEvent:null};function I(){}var P=S,q={init:function(t){var e=P.Element,n=t.navigator||{};q.supportsTouch="ontouchstart"in t||k.func(t.DocumentTouch)&&P.document instanceof t.DocumentTouch,q.supportsPointerEvent=!1!==n.pointerEnabled&&!!P.PointerEvent,q.isIOS=/iP(hone|od|ad)/.test(n.platform),q.isIOS7=/iP(hone|od|ad)/.test(n.platform)&&/OS 7[^\d]/.test(n.appVersion),q.isIe9=/MSIE 9/.test(n.userAgent),q.isOperaMobile="Opera"===n.appName&&q.supportsTouch&&/Presto/.test(n.userAgent),q.prefixedMatchesSelector="matches"in e.prototype?"matches":"webkitMatchesSelector"in e.prototype?"webkitMatchesSelector":"mozMatchesSelector"in e.prototype?"mozMatchesSelector":"oMatchesSelector"in e.prototype?"oMatchesSelector":"msMatchesSelector",q.pEventTypes=q.supportsPointerEvent?P.PointerEvent===t.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,q.wheelEvent=P.document&&"onmousewheel"in P.document?"mousewheel":"wheel"},supportsTouch:null,supportsPointerEvent:null,isIOS7:null,isIOS:null,isIe9:null,isOperaMobile:null,prefixedMatchesSelector:null,pEventTypes:null,wheelEvent:null},C=q;function j(t,e){if(t.contains)return t.contains(e);for(;e;){if(e===t)return!0;e=e.parentNode}return!1}function z(t,e){for(;k.element(t);){if(O(t,e))return t;t=D(t)}return null}function D(t){var e=t.parentNode;if(k.docFrag(e)){for(;(e=e.host)&&k.docFrag(e););return e}return e}function O(t,e){return y!==g&&(e=e.replace(/\/deep\//g," ")),t[C.prefixedMatchesSelector](e)}var M=function(t){return t.parentNode||t.host};function B(t,e){for(var n,r=[],i=t;(n=M(i))&&i!==e&&n!==i.ownerDocument;)r.unshift(i),i=n;return r}function F(t,e,n){for(;k.element(t);){if(O(t,e))return!0;if((t=D(t))===n)return O(t,e)}return!1}function R(t){return t.correspondingUseElement||t}function L(t){var e=t instanceof P.SVGElement?t.getBoundingClientRect():t.getClientRects()[0];return e&&{left:e.left,right:e.right,top:e.top,bottom:e.bottom,width:e.width||e.right-e.left,height:e.height||e.bottom-e.top}}function N(t){var e,n=L(t);if(!C.isIOS7&&n){var r={x:(e=(e=b(t))||y).scrollX||e.document.documentElement.scrollLeft,y:e.scrollY||e.document.documentElement.scrollTop};n.left+=r.x,n.right+=r.x,n.top+=r.y,n.bottom+=r.y}return n}function H(t){for(var e=[];t;)e.push(t),t=D(t);return e}function U(t){return!!k.string(t)&&(P.document.querySelector(t),!0)}function W(t,e){for(var n in e)t[n]=e[n];return t}function G(t,e,n){return"parent"===t?D(n):"self"===t?e.getRect(n):z(n,t)}function Q(t,e,n,r){var i=t;return k.string(i)?i=G(i,e,n):k.func(i)&&(i=i.apply(void 0,r)),k.element(i)&&(i=N(i)),i}function Y(t){return t&&{x:"x"in t?t.x:t.left,y:"y"in t?t.y:t.top}}function J(t){return!t||"x"in t&&"y"in t||((t=W({},t)).x=t.left||0,t.y=t.top||0,t.width=t.width||(t.right||0)-t.x,t.height=t.height||(t.bottom||0)-t.y),t}function K(t,e,n){t.left&&(e.left+=n.x),t.right&&(e.right+=n.x),t.top&&(e.top+=n.y),t.bottom&&(e.bottom+=n.y),e.width=e.right-e.left,e.height=e.bottom-e.top}function X(t,e,n){var r=n&&t.options[n];return Y(Q(r&&r.origin||t.options.origin,t,e,[t&&e]))||{x:0,y:0}}function V(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(t){return!0},r=arguments.length>3?arguments[3]:void 0;if(r=r||{},k.string(t)&&-1!==t.search(" ")&&(t=Z(t)),k.array(t))return t.forEach((function(t){return V(t,e,n,r)})),r;if(k.object(t)&&(e=t,t=""),k.func(e)&&n(t))r[t]=r[t]||[],r[t].push(e);else if(k.array(e))for(var i=0,a=e;i<a.length;i++){var o=a[i];V(t,o,n,r)}else if(k.object(e))for(var s in e)V(Z(s).map((function(e){return"".concat(t).concat(e)})),e[s],n,r);return r}function Z(t){return t.trim().split(/ +/)}var $=function(t,e){return Math.sqrt(t*t+e*e)},tt=["webkit","moz"];function et(t,e){t.__set||(t.__set={});var n=function(n){if(tt.some((function(t){return 0===n.indexOf(t)})))return 1;"function"!=typeof t[n]&&"__set"!==n&&Object.defineProperty(t,n,{get:function(){return n in t.__set?t.__set[n]:t.__set[n]=e[n]},set:function(e){t.__set[n]=e},configurable:!0})};for(var r in e)n(r);return t}function nt(t,e){t.page=t.page||{},t.page.x=e.page.x,t.page.y=e.page.y,t.client=t.client||{},t.client.x=e.client.x,t.client.y=e.client.y,t.timeStamp=e.timeStamp}function rt(t){t.page.x=0,t.page.y=0,t.client.x=0,t.client.y=0}function it(t){return t instanceof P.Event||t instanceof P.Touch}function at(t,e,n){return t=t||"page",(n=n||{}).x=e[t+"X"],n.y=e[t+"Y"],n}function ot(t,e){return e=e||{x:0,y:0},C.isOperaMobile&&it(t)?(at("screen",t,e),e.x+=window.scrollX,e.y+=window.scrollY):at("page",t,e),e}function st(t){return k.number(t.pointerId)?t.pointerId:t.identifier}function lt(t){var e=[];return k.array(t)?(e[0]=t[0],e[1]=t[1]):"touchend"===t.type?1===t.touches.length?(e[0]=t.touches[0],e[1]=t.changedTouches[0]):0===t.touches.length&&(e[0]=t.changedTouches[0],e[1]=t.changedTouches[1]):(e[0]=t.touches[0],e[1]=t.touches[1]),e}function ct(t){for(var e={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},n=0;n<t.length;n++){var r=t[n];for(var i in e)e[i]+=r[i]}for(var a in e)e[a]/=t.length;return e}function dt(t){if(!t.length)return null;var e=lt(t),n=Math.min(e[0].pageX,e[1].pageX),r=Math.min(e[0].pageY,e[1].pageY),i=Math.max(e[0].pageX,e[1].pageX),a=Math.max(e[0].pageY,e[1].pageY);return{x:n,y:r,left:n,top:r,right:i,bottom:a,width:i-n,height:a-r}}function ht(t,e){var n=e+"X",r=e+"Y",i=lt(t),a=i[0][n]-i[1][n],o=i[0][r]-i[1][r];return $(a,o)}function ut(t,e){var n=e+"X",r=e+"Y",i=lt(t),a=i[1][n]-i[0][n],o=i[1][r]-i[0][r];return 180*Math.atan2(o,a)/Math.PI}function pt(t){return k.string(t.pointerType)?t.pointerType:k.number(t.pointerType)?[void 0,void 0,"touch","pen","mouse"][t.pointerType]:/touch/.test(t.type||"")||t instanceof P.Touch?"touch":"mouse"}function ft(t){var e=k.func(t.composedPath)?t.composedPath():t.path;return[R(e?e[0]:t.target),R(t.currentTarget)]}var mt=function(){function t(e){i(this,t),this.immediatePropagationStopped=!1,this.propagationStopped=!1,this._interaction=e}return o(t,[{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),t}();Object.defineProperty(mt.prototype,"interaction",{get:function(){return this._interaction._proxy},set:function(){}});var gt=function(t,e){for(var n=0;n<e.length;n++){var r=e[n];t.push(r)}return t},yt=function(t){return gt([],t)},vt=function(t,e){for(var n=0;n<t.length;n++)if(e(t[n],n,t))return n;return-1},bt=function(t,e){return t[vt(t,e)]},wt=function(t){l(n,t);var e=u(n);function n(t,r,a){var o;i(this,n),(o=e.call(this,r._interaction)).dropzone=void 0,o.dragEvent=void 0,o.relatedTarget=void 0,o.draggable=void 0,o.propagationStopped=!1,o.immediatePropagationStopped=!1;var s="dragleave"===a?t.prev:t.cur,l=s.element,c=s.dropzone;return o.type=a,o.target=l,o.currentTarget=l,o.dropzone=c,o.dragEvent=r,o.relatedTarget=r.target,o.draggable=r.interactable,o.timeStamp=r.timeStamp,o}return o(n,[{key:"reject",value:function(){var t=this,e=this._interaction.dropState;if("dropactivate"===this.type||this.dropzone&&e.cur.dropzone===this.dropzone&&e.cur.element===this.target)if(e.prev.dropzone=this.dropzone,e.prev.element=this.target,e.rejected=!0,e.events.enter=null,this.stopImmediatePropagation(),"dropactivate"===this.type){var r=e.activeDrops,i=vt(r,(function(e){var n=e.dropzone,r=e.element;return n===t.dropzone&&r===t.target}));e.activeDrops.splice(i,1);var a=new n(e,this.dragEvent,"dropdeactivate");a.dropzone=this.dropzone,a.target=this.target,this.dropzone.fire(a)}else this.dropzone.fire(new n(e,this.dragEvent,"dragleave"))}},{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),n}(mt);function xt(t,e){for(var n=0,r=t.slice();n<r.length;n++){var i=r[n],a=i.dropzone,o=i.element;e.dropzone=a,e.target=o,a.fire(e),e.propagationStopped=e.immediatePropagationStopped=!1}}function kt(t,e){for(var n=function(t,e){for(var n=[],r=0,i=t.interactables.list;r<i.length;r++){var a=i[r];if(a.options.drop.enabled){var o=a.options.drop.accept;if(!(k.element(o)&&o!==e||k.string(o)&&!O(e,o)||k.func(o)&&!o({dropzone:a,draggableElement:e})))for(var s=0,l=a.getAllElements();s<l.length;s++){var c=l[s];c!==e&&n.push({dropzone:a,element:c,rect:a.getRect(c)})}}}return n}(t,e),r=0;r<n.length;r++){var i=n[r];i.rect=i.dropzone.getRect(i.element)}return n}function At(t,e,n){for(var r=t.dropState,i=t.interactable,a=t.element,o=[],s=0,l=r.activeDrops;s<l.length;s++){var c=l[s],d=c.dropzone,h=c.element,u=c.rect,p=d.dropCheck(e,n,i,a,h,u);o.push(p?h:null)}var f=function(t){for(var e,n,r,i=[],a=0;a<t.length;a++){var o=t[a],s=t[e];if(o&&a!==e)if(s){var l=M(o),c=M(s);if(l!==o.ownerDocument)if(c!==o.ownerDocument)if(l!==c){i=i.length?i:B(s);var d=void 0;if(s instanceof P.HTMLElement&&o instanceof P.SVGElement&&!(o instanceof P.SVGSVGElement)){if(o===c)continue;d=o.ownerSVGElement}else d=o;for(var h=B(d,s.ownerDocument),u=0;h[u]&&h[u]===i[u];)u++;var p=[h[u-1],h[u],i[u]];if(p[0])for(var f=p[0].lastChild;f;){if(f===p[1]){e=a,i=h;break}if(f===p[2])break;f=f.previousSibling}}else r=s,(parseInt(b(n=o).getComputedStyle(n).zIndex,10)||0)>=(parseInt(b(r).getComputedStyle(r).zIndex,10)||0)&&(e=a);else e=a}else e=a}return e}(o);return r.activeDrops[f]||null}function Tt(t,e,n){var r=t.dropState,i={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return"dragstart"===n.type&&(i.activate=new wt(r,n,"dropactivate"),i.activate.target=null,i.activate.dropzone=null),"dragend"===n.type&&(i.deactivate=new wt(r,n,"dropdeactivate"),i.deactivate.target=null,i.deactivate.dropzone=null),r.rejected||(r.cur.element!==r.prev.element&&(r.prev.dropzone&&(i.leave=new wt(r,n,"dragleave"),n.dragLeave=i.leave.target=r.prev.element,n.prevDropzone=i.leave.dropzone=r.prev.dropzone),r.cur.dropzone&&(i.enter=new wt(r,n,"dragenter"),n.dragEnter=r.cur.element,n.dropzone=r.cur.dropzone)),"dragend"===n.type&&r.cur.dropzone&&(i.drop=new wt(r,n,"drop"),n.dropzone=r.cur.dropzone,n.relatedTarget=r.cur.element),"dragmove"===n.type&&r.cur.dropzone&&(i.move=new wt(r,n,"dropmove"),n.dropzone=r.cur.dropzone)),i}function _t(t,e){var n=t.dropState,r=n.activeDrops,i=n.cur,a=n.prev;e.leave&&a.dropzone.fire(e.leave),e.enter&&i.dropzone.fire(e.enter),e.move&&i.dropzone.fire(e.move),e.drop&&i.dropzone.fire(e.drop),e.deactivate&&xt(r,e.deactivate),n.prev.dropzone=i.dropzone,n.prev.element=i.element}function Et(t,e){var n=t.interaction,r=t.iEvent,i=t.event;if("dragmove"===r.type||"dragend"===r.type){var a=n.dropState;e.dynamicDrop&&(a.activeDrops=kt(e,n.element));var o=r,s=At(n,o,i);a.rejected=a.rejected&&!!s&&s.dropzone===a.cur.dropzone&&s.element===a.cur.element,a.cur.dropzone=s&&s.dropzone,a.cur.element=s&&s.element,a.events=Tt(n,0,o)}}var St={id:"actions/drop",install:function(t){var e=t.actions,n=t.interactStatic,r=t.Interactable,i=t.defaults;t.usePlugin(E),r.prototype.dropzone=function(t){return function(t,e){if(k.object(e)){if(t.options.drop.enabled=!1!==e.enabled,e.listeners){var n=V(e.listeners),r=Object.keys(n).reduce((function(t,e){return t[/^(enter|leave)/.test(e)?"drag".concat(e):/^(activate|deactivate|move)/.test(e)?"drop".concat(e):e]=n[e],t}),{}),i=t.options.drop.listeners;i&&t.off(i),t.on(r),t.options.drop.listeners=r}return k.func(e.ondrop)&&t.on("drop",e.ondrop),k.func(e.ondropactivate)&&t.on("dropactivate",e.ondropactivate),k.func(e.ondropdeactivate)&&t.on("dropdeactivate",e.ondropdeactivate),k.func(e.ondragenter)&&t.on("dragenter",e.ondragenter),k.func(e.ondragleave)&&t.on("dragleave",e.ondragleave),k.func(e.ondropmove)&&t.on("dropmove",e.ondropmove),/^(pointer|center)$/.test(e.overlap)?t.options.drop.overlap=e.overlap:k.number(e.overlap)&&(t.options.drop.overlap=Math.max(Math.min(1,e.overlap),0)),"accept"in e&&(t.options.drop.accept=e.accept),"checker"in e&&(t.options.drop.checker=e.checker),t}return k.bool(e)?(t.options.drop.enabled=e,t):t.options.drop}(this,t)},r.prototype.dropCheck=function(t,e,n,r,i,a){return function(t,e,n,r,i,a,o){var s=!1;if(!(o=o||t.getRect(a)))return!!t.options.drop.checker&&t.options.drop.checker(e,n,s,t,a,r,i);var l=t.options.drop.overlap;if("pointer"===l){var c=X(r,i,"drag"),d=ot(e);d.x+=c.x,d.y+=c.y;var h=d.x>o.left&&d.x<o.right,u=d.y>o.top&&d.y<o.bottom;s=h&&u}var p=r.getRect(i);if(p&&"center"===l){var f=p.left+p.width/2,m=p.top+p.height/2;s=f>=o.left&&f<=o.right&&m>=o.top&&m<=o.bottom}return p&&k.number(l)&&(s=Math.max(0,Math.min(o.right,p.right)-Math.max(o.left,p.left))*Math.max(0,Math.min(o.bottom,p.bottom)-Math.max(o.top,p.top))/(p.width*p.height)>=l),t.options.drop.checker&&(s=t.options.drop.checker(e,n,s,t,a,r,i)),s}(this,t,e,n,r,i,a)},n.dynamicDrop=function(e){return k.bool(e)?(t.dynamicDrop=e,n):t.dynamicDrop},W(e.phaselessTypes,{dragenter:!0,dragleave:!0,dropactivate:!0,dropdeactivate:!0,dropmove:!0,drop:!0}),e.methodDict.drop="dropzone",t.dynamicDrop=!1,i.actions.drop=St.defaults},listeners:{"interactions:before-action-start":function(t){var e=t.interaction;"drag"===e.prepared.name&&(e.dropState={cur:{dropzone:null,element:null},prev:{dropzone:null,element:null},rejected:null,events:null,activeDrops:[]})},"interactions:after-action-start":function(t,e){var n=t.interaction,r=(t.event,t.iEvent);if("drag"===n.prepared.name){var i=n.dropState;i.activeDrops=[],i.events={},i.activeDrops=kt(e,n.element),i.events=Tt(n,0,r),i.events.activate&&(xt(i.activeDrops,i.events.activate),e.fire("actions/drop:start",{interaction:n,dragEvent:r}))}},"interactions:action-move":Et,"interactions:after-action-move":function(t,e){var n=t.interaction,r=t.iEvent;if("drag"===n.prepared.name){var i=n.dropState;_t(n,i.events),e.fire("actions/drop:move",{interaction:n,dragEvent:r}),i.events={}}},"interactions:action-end":function(t,e){if("drag"===t.interaction.prepared.name){var n=t.interaction,r=t.iEvent;Et(t,e),_t(n,n.dropState.events),e.fire("actions/drop:end",{interaction:n,dragEvent:r})}},"interactions:stop":function(t){var e=t.interaction;if("drag"===e.prepared.name){var n=e.dropState;n&&(n.activeDrops=null,n.events=null,n.cur.dropzone=null,n.cur.element=null,n.prev.dropzone=null,n.prev.element=null,n.rejected=!1)}}},getActiveDrops:kt,getDrop:At,getDropEvents:Tt,fireDropEvents:_t,filterEventType:function(t){return 0===t.search("drag")||0===t.search("drop")},defaults:{enabled:!1,accept:null,overlap:"pointer"}},It=St;function Pt(t){var e=t.interaction,n=t.iEvent,r=t.phase;if("gesture"===e.prepared.name){var i=e.pointers.map((function(t){return t.pointer})),a="start"===r,o="end"===r,s=e.interactable.options.deltaSource;if(n.touches=[i[0],i[1]],a)n.distance=ht(i,s),n.box=dt(i),n.scale=1,n.ds=0,n.angle=ut(i,s),n.da=0,e.gesture.startDistance=n.distance,e.gesture.startAngle=n.angle;else if(o||e.pointers.length<2){var l=e.prevEvent;n.distance=l.distance,n.box=l.box,n.scale=l.scale,n.ds=0,n.angle=l.angle,n.da=0}else n.distance=ht(i,s),n.box=dt(i),n.scale=n.distance/e.gesture.startDistance,n.angle=ut(i,s),n.ds=n.scale-e.gesture.scale,n.da=n.angle-e.gesture.angle;e.gesture.distance=n.distance,e.gesture.angle=n.angle,k.number(n.scale)&&n.scale!==1/0&&!isNaN(n.scale)&&(e.gesture.scale=n.scale)}}var qt={id:"actions/gesture",before:["actions/drag","actions/resize"],install:function(t){var e=t.actions,n=t.Interactable,r=t.defaults;n.prototype.gesturable=function(t){return k.object(t)?(this.options.gesture.enabled=!1!==t.enabled,this.setPerAction("gesture",t),this.setOnEvents("gesture",t),this):k.bool(t)?(this.options.gesture.enabled=t,this):this.options.gesture},e.map.gesture=qt,e.methodDict.gesture="gesturable",r.actions.gesture=qt.defaults},listeners:{"interactions:action-start":Pt,"interactions:action-move":Pt,"interactions:action-end":Pt,"interactions:new":function(t){t.interaction.gesture={angle:0,distance:0,scale:1,startAngle:0,startDistance:0}},"auto-start:check":function(t){if(!(t.interaction.pointers.length<2)){var e=t.interactable.options.gesture;if(e&&e.enabled)return t.action={name:"gesture"},!1}}},defaults:{},getCursor:function(){return""},filterEventType:function(t){return 0===t.search("gesture")}},Ct=qt;function jt(t,e,n,r,i,a,o){if(!e)return!1;if(!0===e){var s=k.number(a.width)?a.width:a.right-a.left,l=k.number(a.height)?a.height:a.bottom-a.top;if(o=Math.min(o,Math.abs(("left"===t||"right"===t?s:l)/2)),s<0&&("left"===t?t="right":"right"===t&&(t="left")),l<0&&("top"===t?t="bottom":"bottom"===t&&(t="top")),"left"===t){var c=s>=0?a.left:a.right;return n.x<c+o}if("top"===t){var d=l>=0?a.top:a.bottom;return n.y<d+o}if("right"===t)return n.x>(s>=0?a.right:a.left)-o;if("bottom"===t)return n.y>(l>=0?a.bottom:a.top)-o}return!!k.element(r)&&(k.element(e)?e===r:F(r,e,i))}function zt(t){var e=t.iEvent,n=t.interaction;if("resize"===n.prepared.name&&n.resizeAxes){var r=e;n.interactable.options.resize.square?("y"===n.resizeAxes?r.delta.x=r.delta.y:r.delta.y=r.delta.x,r.axes="xy"):(r.axes=n.resizeAxes,"x"===n.resizeAxes?r.delta.y=0:"y"===n.resizeAxes&&(r.delta.x=0))}}var Dt,Ot,Mt={id:"actions/resize",before:["actions/drag"],install:function(t){var e=t.actions,n=t.browser,r=t.Interactable,i=t.defaults;Mt.cursors=function(t){return t.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"}}(n),Mt.defaultMargin=n.supportsTouch||n.supportsPointerEvent?20:10,r.prototype.resizable=function(e){return function(t,e,n){return k.object(e)?(t.options.resize.enabled=!1!==e.enabled,t.setPerAction("resize",e),t.setOnEvents("resize",e),k.string(e.axis)&&/^x$|^y$|^xy$/.test(e.axis)?t.options.resize.axis=e.axis:null===e.axis&&(t.options.resize.axis=n.defaults.actions.resize.axis),k.bool(e.preserveAspectRatio)?t.options.resize.preserveAspectRatio=e.preserveAspectRatio:k.bool(e.square)&&(t.options.resize.square=e.square),t):k.bool(e)?(t.options.resize.enabled=e,t):t.options.resize}(this,e,t)},e.map.resize=Mt,e.methodDict.resize="resizable",i.actions.resize=Mt.defaults},listeners:{"interactions:new":function(t){t.interaction.resizeAxes="xy"},"interactions:action-start":function(t){!function(t){var e=t.iEvent,n=t.interaction;if("resize"===n.prepared.name&&n.prepared.edges){var r=e,i=n.rect;n._rects={start:W({},i),corrected:W({},i),previous:W({},i),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},r.edges=n.prepared.edges,r.rect=n._rects.corrected,r.deltaRect=n._rects.delta}}(t),zt(t)},"interactions:action-move":function(t){!function(t){var e=t.iEvent,n=t.interaction;if("resize"===n.prepared.name&&n.prepared.edges){var r=e,i=n.interactable.options.resize.invert,a="reposition"===i||"negate"===i,o=n.rect,s=n._rects,l=s.start,c=s.corrected,d=s.delta,h=s.previous;if(W(h,c),a){if(W(c,o),"reposition"===i){if(c.top>c.bottom){var u=c.top;c.top=c.bottom,c.bottom=u}if(c.left>c.right){var p=c.left;c.left=c.right,c.right=p}}}else c.top=Math.min(o.top,l.bottom),c.bottom=Math.max(o.bottom,l.top),c.left=Math.min(o.left,l.right),c.right=Math.max(o.right,l.left);for(var f in c.width=c.right-c.left,c.height=c.bottom-c.top,c)d[f]=c[f]-h[f];r.edges=n.prepared.edges,r.rect=c,r.deltaRect=d}}(t),zt(t)},"interactions:action-end":function(t){var e=t.iEvent,n=t.interaction;if("resize"===n.prepared.name&&n.prepared.edges){var r=e;r.edges=n.prepared.edges,r.rect=n._rects.corrected,r.deltaRect=n._rects.delta}},"auto-start:check":function(t){var e=t.interaction,n=t.interactable,r=t.element,i=t.rect,a=t.buttons;if(i){var o=W({},e.coords.cur.page),s=n.options.resize;if(s&&s.enabled&&(!e.pointerIsDown||!/mouse|pointer/.test(e.pointerType)||0!=(a&s.mouseButtons))){if(k.object(s.edges)){var l={left:!1,right:!1,top:!1,bottom:!1};for(var c in l)l[c]=jt(c,s.edges[c],o,e._latestPointer.eventTarget,r,i,s.margin||Mt.defaultMargin);l.left=l.left&&!l.right,l.top=l.top&&!l.bottom,(l.left||l.right||l.top||l.bottom)&&(t.action={name:"resize",edges:l})}else{var d="y"!==s.axis&&o.x>i.right-Mt.defaultMargin,h="x"!==s.axis&&o.y>i.bottom-Mt.defaultMargin;(d||h)&&(t.action={name:"resize",axes:(d?"x":"")+(h?"y":"")})}return!t.action&&void 0}}}},defaults:{square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},cursors:null,getCursor:function(t){var e=t.edges,n=t.axis,r=t.name,i=Mt.cursors,a=null;if(n)a=i[r+n];else if(e){for(var o="",s=0,l=["top","bottom","left","right"];s<l.length;s++){var c=l[s];e[c]&&(o+=c)}a=i[o]}return a},filterEventType:function(t){return 0===t.search("resize")},defaultMargin:null},Bt=Mt,Ft={id:"actions",install:function(t){t.usePlugin(Ct),t.usePlugin(Bt),t.usePlugin(E),t.usePlugin(It)}},Rt=0,Lt=function(t){return Dt(t)},Nt=function(t){return Ot(t)},Ht=function(t){if(Dt=t.requestAnimationFrame,Ot=t.cancelAnimationFrame,!Dt)for(var e=["ms","moz","webkit","o"],n=0;n<e.length;n++){var r=e[n];Dt=t["".concat(r,"RequestAnimationFrame")],Ot=t["".concat(r,"CancelAnimationFrame")]||t["".concat(r,"CancelRequestAnimationFrame")]}Dt=Dt&&Dt.bind(t),Ot=Ot&&Ot.bind(t),Dt||(Dt=function(e){var n=Date.now(),r=Math.max(0,16-(n-Rt)),i=t.setTimeout((function(){e(n+r)}),r);return Rt=n+r,i},Ot=function(t){return clearTimeout(t)})},Ut={defaults:{enabled:!1,margin:60,container:null,speed:300},now:Date.now,interaction:null,i:0,x:0,y:0,isScrolling:!1,prevTime:0,margin:0,speed:0,start:function(t){Ut.isScrolling=!0,Nt(Ut.i),t.autoScroll=Ut,Ut.interaction=t,Ut.prevTime=Ut.now(),Ut.i=Lt(Ut.scroll)},stop:function(){Ut.isScrolling=!1,Ut.interaction&&(Ut.interaction.autoScroll=null),Nt(Ut.i)},scroll:function(){var t=Ut.interaction,e=t.interactable,n=t.element,r=t.prepared.name,i=e.options[r].autoScroll,a=Wt(i.container,e,n),o=Ut.now(),s=(o-Ut.prevTime)/1e3,l=i.speed*s;if(l>=1){var c={x:Ut.x*l,y:Ut.y*l};if(c.x||c.y){var d=Gt(a);k.window(a)?a.scrollBy(c.x,c.y):a&&(a.scrollLeft+=c.x,a.scrollTop+=c.y);var h=Gt(a),u={x:h.x-d.x,y:h.y-d.y};(u.x||u.y)&&e.fire({type:"autoscroll",target:n,interactable:e,delta:u,interaction:t,container:a})}Ut.prevTime=o}Ut.isScrolling&&(Nt(Ut.i),Ut.i=Lt(Ut.scroll))},check:function(t,e){var n;return null==(n=t.options[e].autoScroll)?void 0:n.enabled},onInteractionMove:function(t){var e=t.interaction,n=t.pointer;if(e.interacting()&&Ut.check(e.interactable,e.prepared.name))if(e.simulation)Ut.x=Ut.y=0;else{var r,i,a,o,s=e.interactable,l=e.element,c=e.prepared.name,d=s.options[c].autoScroll,h=Wt(d.container,s,l);if(k.window(h))o=n.clientX<Ut.margin,r=n.clientY<Ut.margin,i=n.clientX>h.innerWidth-Ut.margin,a=n.clientY>h.innerHeight-Ut.margin;else{var u=L(h);o=n.clientX<u.left+Ut.margin,r=n.clientY<u.top+Ut.margin,i=n.clientX>u.right-Ut.margin,a=n.clientY>u.bottom-Ut.margin}Ut.x=i?1:o?-1:0,Ut.y=a?1:r?-1:0,Ut.isScrolling||(Ut.margin=d.margin,Ut.speed=d.speed,Ut.start(e))}}};function Wt(t,e,n){return(k.string(t)?G(t,e,n):t)||b(n)}function Gt(t){return k.window(t)&&(t=window.document.body),{x:t.scrollLeft,y:t.scrollTop}}var Qt={id:"auto-scroll",install:function(t){var e=t.defaults,n=t.actions;t.autoScroll=Ut,Ut.now=function(){return t.now()},n.phaselessTypes.autoscroll=!0,e.perAction.autoScroll=Ut.defaults},listeners:{"interactions:new":function(t){t.interaction.autoScroll=null},"interactions:destroy":function(t){t.interaction.autoScroll=null,Ut.stop(),Ut.interaction&&(Ut.interaction=null)},"interactions:stop":Ut.stop,"interactions:action-move":function(t){return Ut.onInteractionMove(t)}}},Yt=Qt;function Jt(t,e){var n=!1;return function(){return n||(y.console.warn(e),n=!0),t.apply(this,arguments)}}function Kt(t,e){return t.name=e.name,t.axis=e.axis,t.edges=e.edges,t}function Xt(t){return k.bool(t)?(this.options.styleCursor=t,this):null===t?(delete this.options.styleCursor,this):this.options.styleCursor}function Vt(t){return k.func(t)?(this.options.actionChecker=t,this):null===t?(delete this.options.actionChecker,this):this.options.actionChecker}var Zt={id:"auto-start/interactableMethods",install:function(t){var e=t.Interactable;e.prototype.getAction=function(e,n,r,i){var a=function(t,e,n,r,i){var a=t.getRect(r),o={action:null,interactable:t,interaction:n,element:r,rect:a,buttons:e.buttons||{0:1,1:4,3:8,4:16}[e.button]};return i.fire("auto-start:check",o),o.action}(this,n,r,i,t);return this.options.actionChecker?this.options.actionChecker(e,n,a,this,i,r):a},e.prototype.ignoreFrom=Jt((function(t){return this._backCompatOption("ignoreFrom",t)}),"Interactable.ignoreFrom() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue})."),e.prototype.allowFrom=Jt((function(t){return this._backCompatOption("allowFrom",t)}),"Interactable.allowFrom() has been deprecated. Use Interactble.draggable({allowFrom: newValue})."),e.prototype.actionChecker=Vt,e.prototype.styleCursor=Xt}};function $t(t,e,n,r,i){return e.testIgnoreAllow(e.options[t.name],n,r)&&e.options[t.name].enabled&&re(e,n,t,i)?t:null}function te(t,e,n,r,i,a,o){for(var s=0,l=r.length;s<l;s++){var c=r[s],d=i[s],h=c.getAction(e,n,t,d);if(h){var u=$t(h,c,d,a,o);if(u)return{action:u,interactable:c,element:d}}}return{action:null,interactable:null,element:null}}function ee(t,e,n,r,i){var a=[],o=[],s=r;function l(t){a.push(t),o.push(s)}for(;k.element(s);){a=[],o=[],i.interactables.forEachMatch(s,l);var c=te(t,e,n,a,o,r,i);if(c.action&&!c.interactable.options[c.action.name].manualStart)return c;s=D(s)}return{action:null,interactable:null,element:null}}function ne(t,e,n){var r=e.action,i=e.interactable,a=e.element;r=r||{name:null},t.interactable=i,t.element=a,Kt(t.prepared,r),t.rect=i&&r.name?i.getRect(a):null,oe(t,n),n.fire("autoStart:prepared",{interaction:t})}function re(t,e,n,r){var i=t.options,a=i[n.name].max,o=i[n.name].maxPerElement,s=r.autoStart.maxInteractions,l=0,c=0,d=0;if(!(a&&o&&s))return!1;for(var h=0,u=r.interactions.list;h<u.length;h++){var p=u[h],f=p.prepared.name;if(p.interacting()){if(++l>=s)return!1;if(p.interactable===t){if((c+=f===n.name?1:0)>=a)return!1;if(p.element===e&&(d++,f===n.name&&d>=o))return!1}}}return s>0}function ie(t,e){return k.number(t)?(e.autoStart.maxInteractions=t,this):e.autoStart.maxInteractions}function ae(t,e,n){var r=n.autoStart.cursorElement;r&&r!==t&&(r.style.cursor=""),t.ownerDocument.documentElement.style.cursor=e,t.style.cursor=e,n.autoStart.cursorElement=e?t:null}function oe(t,e){var n=t.interactable,r=t.element,i=t.prepared;if("mouse"===t.pointerType&&n&&n.options.styleCursor){var a="";if(i.name){var o=n.options[i.name].cursorChecker;a=k.func(o)?o(i,n,r,t._interacting):e.actions.map[i.name].getCursor(i)}ae(t.element,a||"",e)}else e.autoStart.cursorElement&&ae(e.autoStart.cursorElement,"",e)}var se={id:"auto-start/base",before:["actions"],install:function(t){var e=t.interactStatic,n=t.defaults;t.usePlugin(Zt),n.base.actionChecker=null,n.base.styleCursor=!0,W(n.perAction,{manualStart:!1,max:1/0,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}),e.maxInteractions=function(e){return ie(e,t)},t.autoStart={maxInteractions:1/0,withinInteractionLimit:re,cursorElement:null}},listeners:{"interactions:down":function(t,e){var n=t.interaction,r=t.pointer,i=t.event,a=t.eventTarget;n.interacting()||ne(n,ee(n,r,i,a,e),e)},"interactions:move":function(t,e){!function(t,e){var n=t.interaction,r=t.pointer,i=t.event,a=t.eventTarget;"mouse"!==n.pointerType||n.pointerIsDown||n.interacting()||ne(n,ee(n,r,i,a,e),e)}(t,e),function(t,e){var n=t.interaction;if(n.pointerIsDown&&!n.interacting()&&n.pointerWasMoved&&n.prepared.name){e.fire("autoStart:before-start",t);var r=n.interactable,i=n.prepared.name;i&&r&&(r.options[i].manualStart||!re(r,n.element,n.prepared,e)?n.stop():(n.start(n.prepared,r,n.element),oe(n,e)))}}(t,e)},"interactions:stop":function(t,e){var n=t.interaction,r=n.interactable;r&&r.options.styleCursor&&ae(n.element,"",e)}},maxInteractions:ie,withinInteractionLimit:re,validateAction:$t},le=se,ce={id:"auto-start/dragAxis",listeners:{"autoStart:before-start":function(t,e){var n=t.interaction,r=t.eventTarget,i=t.dx,a=t.dy;if("drag"===n.prepared.name){var o=Math.abs(i),s=Math.abs(a),l=n.interactable.options.drag,c=l.startAxis,d=o>s?"x":o<s?"y":"xy";if(n.prepared.axis="start"===l.lockAxis?d[0]:l.lockAxis,"xy"!==d&&"xy"!==c&&c!==d){n.prepared.name=null;for(var h=r,u=function(t){if(t!==n.interactable){var i=n.interactable.options.drag;if(!i.manualStart&&t.testIgnoreAllow(i,h,r)){var a=t.getAction(n.downPointer,n.downEvent,n,h);if(a&&"drag"===a.name&&function(t,e){if(!e)return!1;var n=e.options.drag.startAxis;return"xy"===t||"xy"===n||n===t}(d,t)&&le.validateAction(a,t,h,r,e))return t}}};k.element(h);){var p=e.interactables.forEachMatch(h,u);if(p){n.prepared.name="drag",n.interactable=p,n.element=h;break}h=D(h)}}}}}};function de(t){var e=t.prepared&&t.prepared.name;if(!e)return null;var n=t.interactable.options;return n[e].hold||n[e].delay}var he={id:"auto-start/hold",install:function(t){var e=t.defaults;t.usePlugin(le),e.perAction.hold=0,e.perAction.delay=0},listeners:{"interactions:new":function(t){t.interaction.autoStartHoldTimer=null},"autoStart:prepared":function(t){var e=t.interaction,n=de(e);n>0&&(e.autoStartHoldTimer=setTimeout((function(){e.start(e.prepared,e.interactable,e.element)}),n))},"interactions:move":function(t){var e=t.interaction,n=t.duplicate;e.autoStartHoldTimer&&e.pointerWasMoved&&!n&&(clearTimeout(e.autoStartHoldTimer),e.autoStartHoldTimer=null)},"autoStart:before-start":function(t){var e=t.interaction;de(e)>0&&(e.prepared.name=null)}},getHoldDuration:de},ue=he,pe={id:"auto-start",install:function(t){t.usePlugin(le),t.usePlugin(ue),t.usePlugin(ce)}},fe=function(t){return/^(always|never|auto)$/.test(t)?(this.options.preventDefault=t,this):k.bool(t)?(this.options.preventDefault=t?"always":"never",this):this.options.preventDefault};function me(t){var e=t.interaction,n=t.event;e.interactable&&e.interactable.checkAndPreventDefault(n)}var ge={id:"core/interactablePreventDefault",install:function(t){var e=t.Interactable;e.prototype.preventDefault=fe,e.prototype.checkAndPreventDefault=function(e){return function(t,e,n){var r=t.options.preventDefault;if("never"!==r)if("always"!==r){if(e.events.supportsPassive&&/^touch(start|move)$/.test(n.type)){var i=b(n.target).document,a=e.getDocOptions(i);if(!a||!a.events||!1!==a.events.passive)return}/^(mouse|pointer|touch)*(down|start)/i.test(n.type)||k.element(n.target)&&O(n.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *")||n.preventDefault()}else n.preventDefault()}(this,t,e)},t.interactions.docEvents.push({type:"dragstart",listener:function(e){for(var n=0,r=t.interactions.list;n<r.length;n++){var i=r[n];if(i.element&&(i.element===e.target||j(i.element,e.target)))return void i.interactable.checkAndPreventDefault(e)}}})},listeners:["down","move","up","cancel"].reduce((function(t,e){return t["interactions:".concat(e)]=me,t}),{})};function ye(t,e){if(e.phaselessTypes[t])return!0;for(var n in e.map)if(0===t.indexOf(n)&&t.substr(n.length)in e.phases)return!0;return!1}function ve(t){var e={};for(var n in t){var r=t[n];k.plainObject(r)?e[n]=ve(r):k.array(r)?e[n]=yt(r):e[n]=r}return e}var be=function(){function t(e){i(this,t),this.states=[],this.startOffset={left:0,right:0,top:0,bottom:0},this.startDelta=void 0,this.result=void 0,this.endResult=void 0,this.startEdges=void 0,this.edges=void 0,this.interaction=void 0,this.interaction=e,this.result=we(),this.edges={left:!1,right:!1,top:!1,bottom:!1}}return o(t,[{key:"start",value:function(t,e){var n,r,i=t.phase,a=this.interaction,o=function(t){var e=t.interactable.options[t.prepared.name],n=e.modifiers;return n&&n.length?n:["snap","snapSize","snapEdges","restrict","restrictEdges","restrictSize"].map((function(t){var n=e[t];return n&&n.enabled&&{options:n,methods:n._methods}})).filter((function(t){return!!t}))}(a);this.prepareStates(o),this.startEdges=W({},a.edges),this.edges=W({},this.startEdges),this.startOffset=(r=e,(n=a.rect)?{left:r.x-n.left,top:r.y-n.top,right:n.right-r.x,bottom:n.bottom-r.y}:{left:0,top:0,right:0,bottom:0}),this.startDelta={x:0,y:0};var s=this.fillArg({phase:i,pageCoords:e,preEnd:!1});return this.result=we(),this.startAll(s),this.result=this.setAll(s)}},{key:"fillArg",value:function(t){var e=this.interaction;return t.interaction=e,t.interactable=e.interactable,t.element=e.element,t.rect||(t.rect=e.rect),t.edges||(t.edges=this.startEdges),t.startOffset=this.startOffset,t}},{key:"startAll",value:function(t){for(var e=0,n=this.states;e<n.length;e++){var r=n[e];r.methods.start&&(t.state=r,r.methods.start(t))}}},{key:"setAll",value:function(t){var e=t.phase,n=t.preEnd,r=t.skipModifiers,i=t.rect,a=t.edges;t.coords=W({},t.pageCoords),t.rect=W({},i),t.edges=W({},a);for(var o=r?this.states.slice(r):this.states,s=we(t.coords,t.rect),l=0;l<o.length;l++){var c,d=o[l],h=d.options,u=W({},t.coords),p=null;null!=(c=d.methods)&&c.set&&this.shouldDo(h,n,e)&&(t.state=d,p=d.methods.set(t),K(t.edges,t.rect,{x:t.coords.x-u.x,y:t.coords.y-u.y})),s.eventProps.push(p)}W(this.edges,t.edges),s.delta.x=t.coords.x-t.pageCoords.x,s.delta.y=t.coords.y-t.pageCoords.y,s.rectDelta.left=t.rect.left-i.left,s.rectDelta.right=t.rect.right-i.right,s.rectDelta.top=t.rect.top-i.top,s.rectDelta.bottom=t.rect.bottom-i.bottom;var f=this.result.coords,m=this.result.rect;if(f&&m){var g=s.rect.left!==m.left||s.rect.right!==m.right||s.rect.top!==m.top||s.rect.bottom!==m.bottom;s.changed=g||f.x!==s.coords.x||f.y!==s.coords.y}return s}},{key:"applyToInteraction",value:function(t){var e=this.interaction,n=t.phase,r=e.coords.cur,i=e.coords.start,a=this.result,o=this.startDelta,s=a.delta;"start"===n&&W(this.startDelta,a.delta);for(var l=0,c=[[i,o],[r,s]];l<c.length;l++){var d=c[l],h=d[0],u=d[1];h.page.x+=u.x,h.page.y+=u.y,h.client.x+=u.x,h.client.y+=u.y}var p=this.result.rectDelta,f=t.rect||e.rect;f.left+=p.left,f.right+=p.right,f.top+=p.top,f.bottom+=p.bottom,f.width=f.right-f.left,f.height=f.bottom-f.top}},{key:"setAndApply",value:function(t){var e=this.interaction,n=t.phase,r=t.preEnd,i=t.skipModifiers,a=this.setAll(this.fillArg({preEnd:r,phase:n,pageCoords:t.modifiedCoords||e.coords.cur.page}));if(this.result=a,!a.changed&&(!i||i<this.states.length)&&e.interacting())return!1;if(t.modifiedCoords){var o=e.coords.cur.page,s={x:t.modifiedCoords.x-o.x,y:t.modifiedCoords.y-o.y};a.coords.x+=s.x,a.coords.y+=s.y,a.delta.x+=s.x,a.delta.y+=s.y}this.applyToInteraction(t)}},{key:"beforeEnd",value:function(t){var e=t.interaction,n=t.event,r=this.states;if(r&&r.length){for(var i=!1,a=0;a<r.length;a++){var o=r[a];t.state=o;var s=o.options,l=o.methods,c=l.beforeEnd&&l.beforeEnd(t);if(c)return this.endResult=c,!1;i=i||!i&&this.shouldDo(s,!0,t.phase,!0)}i&&e.move({event:n,preEnd:!0})}}},{key:"stop",value:function(t){var e=t.interaction;if(this.states&&this.states.length){var n=W({states:this.states,interactable:e.interactable,element:e.element,rect:null},t);this.fillArg(n);for(var r=0,i=this.states;r<i.length;r++){var a=i[r];n.state=a,a.methods.stop&&a.methods.stop(n)}this.states=null,this.endResult=null}}},{key:"prepareStates",value:function(t){this.states=[];for(var e=0;e<t.length;e++){var n=t[e],r=n.options,i=n.methods,a=n.name;this.states.push({options:r,methods:i,index:e,name:a})}return this.states}},{key:"restoreInteractionCoords",value:function(t){var e=t.interaction,n=e.coords,r=e.rect,i=e.modification;if(i.result){for(var a=i.startDelta,o=i.result,s=o.delta,l=o.rectDelta,c=0,d=[[n.start,a],[n.cur,s]];c<d.length;c++){var h=d[c],u=h[0],p=h[1];u.page.x-=p.x,u.page.y-=p.y,u.client.x-=p.x,u.client.y-=p.y}r.left-=l.left,r.right-=l.right,r.top-=l.top,r.bottom-=l.bottom}}},{key:"shouldDo",value:function(t,e,n,r){return!(!t||!1===t.enabled||r&&!t.endOnly||t.endOnly&&!e||"start"===n&&!t.setStart)}},{key:"copyFrom",value:function(t){this.startOffset=t.startOffset,this.startDelta=t.startDelta,this.startEdges=t.startEdges,this.edges=t.edges,this.states=t.states.map((function(t){return ve(t)})),this.result=we(W({},t.result.coords),W({},t.result.rect))}},{key:"destroy",value:function(){for(var t in this)this[t]=null}}]),t}();function we(t,e){return{rect:e,coords:t,delta:{x:0,y:0},rectDelta:{left:0,right:0,top:0,bottom:0},eventProps:[],changed:!0}}function xe(t,e){var n=t.defaults,r={start:t.start,set:t.set,beforeEnd:t.beforeEnd,stop:t.stop},i=function(t){var i=t||{};for(var a in i.enabled=!1!==i.enabled,n)a in i||(i[a]=n[a]);var o={options:i,methods:r,name:e,enable:function(){return i.enabled=!0,o},disable:function(){return i.enabled=!1,o}};return o};return e&&"string"==typeof e&&(i._defaults=n,i._methods=r),i}function ke(t){var e=t.iEvent,n=t.interaction.modification.result;n&&(e.modifiers=n.eventProps)}var Ae={id:"modifiers/base",before:["actions"],install:function(t){t.defaults.perAction.modifiers=[]},listeners:{"interactions:new":function(t){var e=t.interaction;e.modification=new be(e)},"interactions:before-action-start":function(t){var e=t.interaction,n=t.interaction.modification;n.start(t,e.coords.start.page),e.edges=n.edges,n.applyToInteraction(t)},"interactions:before-action-move":function(t){var e=t.interaction,n=e.modification,r=n.setAndApply(t);return e.edges=n.edges,r},"interactions:before-action-end":function(t){var e=t.interaction,n=e.modification,r=n.beforeEnd(t);return e.edges=n.startEdges,r},"interactions:action-start":ke,"interactions:action-move":ke,"interactions:action-end":ke,"interactions:after-action-start":function(t){return t.interaction.modification.restoreInteractionCoords(t)},"interactions:after-action-move":function(t){return t.interaction.modification.restoreInteractionCoords(t)},"interactions:stop":function(t){return t.interaction.modification.stop(t)}}},Te=Ae,_e={base:{preventDefault:"auto",deltaSource:"page"},perAction:{enabled:!1,origin:{x:0,y:0}},actions:{}},Ee=function(t){l(n,t);var e=u(n);function n(t,r,a,o,s,l,c){var d;i(this,n),(d=e.call(this,t)).relatedTarget=null,d.screenX=void 0,d.screenY=void 0,d.button=void 0,d.buttons=void 0,d.ctrlKey=void 0,d.shiftKey=void 0,d.altKey=void 0,d.metaKey=void 0,d.page=void 0,d.client=void 0,d.delta=void 0,d.rect=void 0,d.x0=void 0,d.y0=void 0,d.t0=void 0,d.dt=void 0,d.duration=void 0,d.clientX0=void 0,d.clientY0=void 0,d.velocity=void 0,d.speed=void 0,d.swipe=void 0,d.axes=void 0,d.preEnd=void 0,s=s||t.element;var u=t.interactable,p=(u&&u.options||_e).deltaSource,f=X(u,s,a),m="start"===o,g="end"===o,y=m?h(d):t.prevEvent,v=m?t.coords.start:g?{page:y.page,client:y.client,timeStamp:t.coords.cur.timeStamp}:t.coords.cur;return d.page=W({},v.page),d.client=W({},v.client),d.rect=W({},t.rect),d.timeStamp=v.timeStamp,g||(d.page.x-=f.x,d.page.y-=f.y,d.client.x-=f.x,d.client.y-=f.y),d.ctrlKey=r.ctrlKey,d.altKey=r.altKey,d.shiftKey=r.shiftKey,d.metaKey=r.metaKey,d.button=r.button,d.buttons=r.buttons,d.target=s,d.currentTarget=s,d.preEnd=l,d.type=c||a+(o||""),d.interactable=u,d.t0=m?t.pointers[t.pointers.length-1].downTime:y.t0,d.x0=t.coords.start.page.x-f.x,d.y0=t.coords.start.page.y-f.y,d.clientX0=t.coords.start.client.x-f.x,d.clientY0=t.coords.start.client.y-f.y,d.delta=m||g?{x:0,y:0}:{x:d[p].x-y[p].x,y:d[p].y-y[p].y},d.dt=t.coords.delta.timeStamp,d.duration=d.timeStamp-d.t0,d.velocity=W({},t.coords.velocity[p]),d.speed=$(d.velocity.x,d.velocity.y),d.swipe=g||"inertiastart"===o?d.getSwipe():null,d}return o(n,[{key:"getSwipe",value:function(){var t=this._interaction;if(t.prevEvent.speed<600||this.timeStamp-t.prevEvent.timeStamp>150)return null;var e=180*Math.atan2(t.prevEvent.velocityY,t.prevEvent.velocityX)/Math.PI;e<0&&(e+=360);var n=112.5<=e&&e<247.5,r=202.5<=e&&e<337.5;return{up:r,down:!r&&22.5<=e&&e<157.5,left:n,right:!n&&(292.5<=e||e<67.5),angle:e,speed:t.prevEvent.speed,velocity:{x:t.prevEvent.velocityX,y:t.prevEvent.velocityY}}}},{key:"preventDefault",value:function(){}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}]),n}(mt);Object.defineProperties(Ee.prototype,{pageX:{get:function(){return this.page.x},set:function(t){this.page.x=t}},pageY:{get:function(){return this.page.y},set:function(t){this.page.y=t}},clientX:{get:function(){return this.client.x},set:function(t){this.client.x=t}},clientY:{get:function(){return this.client.y},set:function(t){this.client.y=t}},dx:{get:function(){return this.delta.x},set:function(t){this.delta.x=t}},dy:{get:function(){return this.delta.y},set:function(t){this.delta.y=t}},velocityX:{get:function(){return this.velocity.x},set:function(t){this.velocity.x=t}},velocityY:{get:function(){return this.velocity.y},set:function(t){this.velocity.y=t}}});var Se=o((function t(e,n,r,a,o){i(this,t),this.id=void 0,this.pointer=void 0,this.event=void 0,this.downTime=void 0,this.downTarget=void 0,this.id=e,this.pointer=n,this.event=r,this.downTime=a,this.downTarget=o})),Ie=function(t){return t.interactable="",t.element="",t.prepared="",t.pointerIsDown="",t.pointerWasMoved="",t._proxy="",t}({}),Pe=function(t){return t.start="",t.move="",t.end="",t.stop="",t.interacting="",t}({}),qe=0,Ce=function(){function t(e){var n=this,r=e.pointerType,a=e.scopeFire;i(this,t),this.interactable=null,this.element=null,this.rect=null,this._rects=void 0,this.edges=null,this._scopeFire=void 0,this.prepared={name:null,axis:null,edges:null},this.pointerType=void 0,this.pointers=[],this.downEvent=null,this.downPointer={},this._latestPointer={pointer:null,event:null,eventTarget:null},this.prevEvent=null,this.pointerIsDown=!1,this.pointerWasMoved=!1,this._interacting=!1,this._ending=!1,this._stopped=!0,this._proxy=void 0,this.simulation=null,this.doMove=Jt((function(t){this.move(t)}),"The interaction.doMove() method has been renamed to interaction.move()"),this.coords={start:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},prev:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},cur:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},delta:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},velocity:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0}},this._id=qe++,this._scopeFire=a,this.pointerType=r;var o=this;this._proxy={};var s=function(t){Object.defineProperty(n._proxy,t,{get:function(){return o[t]}})};for(var l in Ie)s(l);var c=function(t){Object.defineProperty(n._proxy,t,{value:function(){return o[t].apply(o,arguments)}})};for(var d in Pe)c(d);this._scopeFire("interactions:new",{interaction:this})}return o(t,[{key:"pointerMoveTolerance",get:function(){return 1}},{key:"pointerDown",value:function(t,e,n){var r=this.updatePointer(t,e,n,!0),i=this.pointers[r];this._scopeFire("interactions:down",{pointer:t,event:e,eventTarget:n,pointerIndex:r,pointerInfo:i,type:"down",interaction:this})}},{key:"start",value:function(t,e,n){return!(this.interacting()||!this.pointerIsDown||this.pointers.length<("gesture"===t.name?2:1)||!e.options[t.name].enabled)&&(Kt(this.prepared,t),this.interactable=e,this.element=n,this.rect=e.getRect(n),this.edges=this.prepared.edges?W({},this.prepared.edges):{left:!0,right:!0,top:!0,bottom:!0},this._stopped=!1,this._interacting=this._doPhase({interaction:this,event:this.downEvent,phase:"start"})&&!this._stopped,this._interacting)}},{key:"pointerMove",value:function(t,e,n){this.simulation||this.modification&&this.modification.endResult||this.updatePointer(t,e,n,!1);var r,i,a=this.coords.cur.page.x===this.coords.prev.page.x&&this.coords.cur.page.y===this.coords.prev.page.y&&this.coords.cur.client.x===this.coords.prev.client.x&&this.coords.cur.client.y===this.coords.prev.client.y;this.pointerIsDown&&!this.pointerWasMoved&&(r=this.coords.cur.client.x-this.coords.start.client.x,i=this.coords.cur.client.y-this.coords.start.client.y,this.pointerWasMoved=$(r,i)>this.pointerMoveTolerance);var o,s,l,c=this.getPointerIndex(t),d={pointer:t,pointerIndex:c,pointerInfo:this.pointers[c],event:e,type:"move",eventTarget:n,dx:r,dy:i,duplicate:a,interaction:this};a||(o=this.coords.velocity,s=this.coords.delta,l=Math.max(s.timeStamp/1e3,.001),o.page.x=s.page.x/l,o.page.y=s.page.y/l,o.client.x=s.client.x/l,o.client.y=s.client.y/l,o.timeStamp=l),this._scopeFire("interactions:move",d),a||this.simulation||(this.interacting()&&(d.type=null,this.move(d)),this.pointerWasMoved&&nt(this.coords.prev,this.coords.cur))}},{key:"move",value:function(t){t&&t.event||rt(this.coords.delta),(t=W({pointer:this._latestPointer.pointer,event:this._latestPointer.event,eventTarget:this._latestPointer.eventTarget,interaction:this},t||{})).phase="move",this._doPhase(t)}},{key:"pointerUp",value:function(t,e,n,r){var i=this.getPointerIndex(t);-1===i&&(i=this.updatePointer(t,e,n,!1));var a=/cancel$/i.test(e.type)?"cancel":"up";this._scopeFire("interactions:".concat(a),{pointer:t,pointerIndex:i,pointerInfo:this.pointers[i],event:e,eventTarget:n,type:a,curEventTarget:r,interaction:this}),this.simulation||this.end(e),this.removePointer(t,e)}},{key:"documentBlur",value:function(t){this.end(t),this._scopeFire("interactions:blur",{event:t,type:"blur",interaction:this})}},{key:"end",value:function(t){var e;this._ending=!0,t=t||this._latestPointer.event,this.interacting()&&(e=this._doPhase({event:t,interaction:this,phase:"end"})),this._ending=!1,!0===e&&this.stop()}},{key:"currentAction",value:function(){return this._interacting?this.prepared.name:null}},{key:"interacting",value:function(){return this._interacting}},{key:"stop",value:function(){this._scopeFire("interactions:stop",{interaction:this}),this.interactable=this.element=null,this._interacting=!1,this._stopped=!0,this.prepared.name=this.prevEvent=null}},{key:"getPointerIndex",value:function(t){var e=st(t);return"mouse"===this.pointerType||"pen"===this.pointerType?this.pointers.length-1:vt(this.pointers,(function(t){return t.id===e}))}},{key:"getPointerInfo",value:function(t){return this.pointers[this.getPointerIndex(t)]}},{key:"updatePointer",value:function(t,e,n,r){var i,a,o,s=st(t),l=this.getPointerIndex(t),c=this.pointers[l];return r=!1!==r&&(r||/(down|start)$/i.test(e.type)),c?c.pointer=t:(c=new Se(s,t,e,null,null),l=this.pointers.length,this.pointers.push(c)),function(t,e,n){var r=e.length>1?ct(e):e[0];ot(r,t.page),function(t,e){e=e||{},C.isOperaMobile&&it(t)?at("screen",t,e):at("client",t,e)}(r,t.client),t.timeStamp=n}(this.coords.cur,this.pointers.map((function(t){return t.pointer})),this._now()),i=this.coords.delta,a=this.coords.prev,o=this.coords.cur,i.page.x=o.page.x-a.page.x,i.page.y=o.page.y-a.page.y,i.client.x=o.client.x-a.client.x,i.client.y=o.client.y-a.client.y,i.timeStamp=o.timeStamp-a.timeStamp,r&&(this.pointerIsDown=!0,c.downTime=this.coords.cur.timeStamp,c.downTarget=n,et(this.downPointer,t),this.interacting()||(nt(this.coords.start,this.coords.cur),nt(this.coords.prev,this.coords.cur),this.downEvent=e,this.pointerWasMoved=!1)),this._updateLatestPointer(t,e,n),this._scopeFire("interactions:update-pointer",{pointer:t,event:e,eventTarget:n,down:r,pointerInfo:c,pointerIndex:l,interaction:this}),l}},{key:"removePointer",value:function(t,e){var n=this.getPointerIndex(t);if(-1!==n){var r=this.pointers[n];this._scopeFire("interactions:remove-pointer",{pointer:t,event:e,eventTarget:null,pointerIndex:n,pointerInfo:r,interaction:this}),this.pointers.splice(n,1),this.pointerIsDown=!1}}},{key:"_updateLatestPointer",value:function(t,e,n){this._latestPointer.pointer=t,this._latestPointer.event=e,this._latestPointer.eventTarget=n}},{key:"destroy",value:function(){this._latestPointer.pointer=null,this._latestPointer.event=null,this._latestPointer.eventTarget=null}},{key:"_createPreparedEvent",value:function(t,e,n,r){return new Ee(this,t,this.prepared.name,e,this.element,n,r)}},{key:"_fireEvent",value:function(t){var e;null==(e=this.interactable)||e.fire(t),(!this.prevEvent||t.timeStamp>=this.prevEvent.timeStamp)&&(this.prevEvent=t)}},{key:"_doPhase",value:function(t){var e=t.event,n=t.phase,r=t.preEnd,i=t.type,a=this.rect;if(a&&"move"===n&&(K(this.edges,a,this.coords.delta[this.interactable.options.deltaSource]),a.width=a.right-a.left,a.height=a.bottom-a.top),!1===this._scopeFire("interactions:before-action-".concat(n),t))return!1;var o=t.iEvent=this._createPreparedEvent(e,n,r,i);return this._scopeFire("interactions:action-".concat(n),t),"start"===n&&(this.prevEvent=o),this._fireEvent(o),this._scopeFire("interactions:after-action-".concat(n),t),!0}},{key:"_now",value:function(){return Date.now()}}]),t}();function je(t){ze(t.interaction)}function ze(t){if(!function(t){return!(!t.offset.pending.x&&!t.offset.pending.y)}(t))return!1;var e=t.offset.pending;return Oe(t.coords.cur,e),Oe(t.coords.delta,e),K(t.edges,t.rect,e),e.x=0,e.y=0,!0}function De(t){var e=t.x,n=t.y;this.offset.pending.x+=e,this.offset.pending.y+=n,this.offset.total.x+=e,this.offset.total.y+=n}function Oe(t,e){var n=t.page,r=t.client,i=e.x,a=e.y;n.x+=i,n.y+=a,r.x+=i,r.y+=a}Pe.offsetBy="";var Me={id:"offset",before:["modifiers","pointer-events","actions","inertia"],install:function(t){t.Interaction.prototype.offsetBy=De},listeners:{"interactions:new":function(t){t.interaction.offset={total:{x:0,y:0},pending:{x:0,y:0}}},"interactions:update-pointer":function(t){return function(t){t.pointerIsDown&&(Oe(t.coords.cur,t.offset.total),t.offset.pending.x=0,t.offset.pending.y=0)}(t.interaction)},"interactions:before-action-start":je,"interactions:before-action-move":je,"interactions:before-action-end":function(t){var e=t.interaction;if(ze(e))return e.move({offset:!0}),e.end(),!1},"interactions:stop":function(t){var e=t.interaction;e.offset.total.x=0,e.offset.total.y=0,e.offset.pending.x=0,e.offset.pending.y=0}}},Be=Me,Fe=function(){function t(e){i(this,t),this.active=!1,this.isModified=!1,this.smoothEnd=!1,this.allowResume=!1,this.modification=void 0,this.modifierCount=0,this.modifierArg=void 0,this.startCoords=void 0,this.t0=0,this.v0=0,this.te=0,this.targetOffset=void 0,this.modifiedOffset=void 0,this.currentOffset=void 0,this.lambda_v0=0,this.one_ve_v0=0,this.timeout=void 0,this.interaction=void 0,this.interaction=e}return o(t,[{key:"start",value:function(t){var e=this.interaction,n=Re(e);if(!n||!n.enabled)return!1;var r=e.coords.velocity.client,i=$(r.x,r.y),a=this.modification||(this.modification=new be(e));if(a.copyFrom(e.modification),this.t0=e._now(),this.allowResume=n.allowResume,this.v0=i,this.currentOffset={x:0,y:0},this.startCoords=e.coords.cur.page,this.modifierArg=a.fillArg({pageCoords:this.startCoords,preEnd:!0,phase:"inertiastart"}),this.t0-e.coords.cur.timeStamp<50&&i>n.minSpeed&&i>n.endSpeed)this.startInertia();else{if(a.result=a.setAll(this.modifierArg),!a.result.changed)return!1;this.startSmoothEnd()}return e.modification.result.rect=null,e.offsetBy(this.targetOffset),e._doPhase({interaction:e,event:t,phase:"inertiastart"}),e.offsetBy({x:-this.targetOffset.x,y:-this.targetOffset.y}),e.modification.result.rect=null,this.active=!0,e.simulation=this,!0}},{key:"startInertia",value:function(){var t=this,e=this.interaction.coords.velocity.client,n=Re(this.interaction),r=n.resistance,i=-Math.log(n.endSpeed/this.v0)/r;this.targetOffset={x:(e.x-i)/r,y:(e.y-i)/r},this.te=i,this.lambda_v0=r/this.v0,this.one_ve_v0=1-n.endSpeed/this.v0;var a=this.modification,o=this.modifierArg;o.pageCoords={x:this.startCoords.x+this.targetOffset.x,y:this.startCoords.y+this.targetOffset.y},a.result=a.setAll(o),a.result.changed&&(this.isModified=!0,this.modifiedOffset={x:this.targetOffset.x+a.result.delta.x,y:this.targetOffset.y+a.result.delta.y}),this.onNextFrame((function(){return t.inertiaTick()}))}},{key:"startSmoothEnd",value:function(){var t=this;this.smoothEnd=!0,this.isModified=!0,this.targetOffset={x:this.modification.result.delta.x,y:this.modification.result.delta.y},this.onNextFrame((function(){return t.smoothEndTick()}))}},{key:"onNextFrame",value:function(t){var e=this;this.timeout=Lt((function(){e.active&&t()}))}},{key:"inertiaTick",value:function(){var t,e,n,r,i,a=this,o=this.interaction,s=Re(o).resistance,l=(o._now()-this.t0)/1e3;if(l<this.te){var c,d=1-(Math.exp(-s*l)-this.lambda_v0)/this.one_ve_v0;this.isModified?(0,0,t=this.targetOffset.x,e=this.targetOffset.y,n=this.modifiedOffset.x,r=this.modifiedOffset.y,c={x:Ne(i=d,0,t,n),y:Ne(i,0,e,r)}):c={x:this.targetOffset.x*d,y:this.targetOffset.y*d};var h={x:c.x-this.currentOffset.x,y:c.y-this.currentOffset.y};this.currentOffset.x+=h.x,this.currentOffset.y+=h.y,o.offsetBy(h),o.move(),this.onNextFrame((function(){return a.inertiaTick()}))}else o.offsetBy({x:this.modifiedOffset.x-this.currentOffset.x,y:this.modifiedOffset.y-this.currentOffset.y}),this.end()}},{key:"smoothEndTick",value:function(){var t=this,e=this.interaction,n=e._now()-this.t0,r=Re(e).smoothEndDuration;if(n<r){var i={x:He(n,0,this.targetOffset.x,r),y:He(n,0,this.targetOffset.y,r)},a={x:i.x-this.currentOffset.x,y:i.y-this.currentOffset.y};this.currentOffset.x+=a.x,this.currentOffset.y+=a.y,e.offsetBy(a),e.move({skipModifiers:this.modifierCount}),this.onNextFrame((function(){return t.smoothEndTick()}))}else e.offsetBy({x:this.targetOffset.x-this.currentOffset.x,y:this.targetOffset.y-this.currentOffset.y}),this.end()}},{key:"resume",value:function(t){var e=t.pointer,n=t.event,r=t.eventTarget,i=this.interaction;i.offsetBy({x:-this.currentOffset.x,y:-this.currentOffset.y}),i.updatePointer(e,n,r,!0),i._doPhase({interaction:i,event:n,phase:"resume"}),nt(i.coords.prev,i.coords.cur),this.stop()}},{key:"end",value:function(){this.interaction.move(),this.interaction.end(),this.stop()}},{key:"stop",value:function(){this.active=this.smoothEnd=!1,this.interaction.simulation=null,Nt(this.timeout)}}]),t}();function Re(t){var e=t.interactable,n=t.prepared;return e&&e.options&&n.name&&e.options[n.name].inertia}var Le={id:"inertia",before:["modifiers","actions"],install:function(t){var e=t.defaults;t.usePlugin(Be),t.usePlugin(Te),t.actions.phases.inertiastart=!0,t.actions.phases.resume=!0,e.perAction.inertia={enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,smoothEndDuration:300}},listeners:{"interactions:new":function(t){var e=t.interaction;e.inertia=new Fe(e)},"interactions:before-action-end":function(t){var e=t.interaction,n=t.event;return(!e._interacting||e.simulation||!e.inertia.start(n))&&null},"interactions:down":function(t){var e=t.interaction,n=t.eventTarget,r=e.inertia;if(r.active)for(var i=n;k.element(i);){if(i===e.element){r.resume(t);break}i=D(i)}},"interactions:stop":function(t){var e=t.interaction.inertia;e.active&&e.stop()},"interactions:before-action-resume":function(t){var e=t.interaction.modification;e.stop(t),e.start(t,t.interaction.coords.cur.page),e.applyToInteraction(t)},"interactions:before-action-inertiastart":function(t){return t.interaction.modification.setAndApply(t)},"interactions:action-resume":ke,"interactions:action-inertiastart":ke,"interactions:after-action-inertiastart":function(t){return t.interaction.modification.restoreInteractionCoords(t)},"interactions:after-action-resume":function(t){return t.interaction.modification.restoreInteractionCoords(t)}}};function Ne(t,e,n,r){var i=1-t;return i*i*e+2*i*t*n+t*t*r}function He(t,e,n,r){return-n*(t/=r)*(t-2)+e}var Ue=Le;function We(t,e){for(var n=0;n<e.length;n++){var r=e[n];if(t.immediatePropagationStopped)break;r(t)}}var Ge=function(){function t(e){i(this,t),this.options=void 0,this.types={},this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.global=void 0,this.options=W({},e||{})}return o(t,[{key:"fire",value:function(t){var e,n=this.global;(e=this.types[t.type])&&We(t,e),!t.propagationStopped&&n&&(e=n[t.type])&&We(t,e)}},{key:"on",value:function(t,e){var n=V(t,e);for(t in n)this.types[t]=gt(this.types[t]||[],n[t])}},{key:"off",value:function(t,e){var n=V(t,e);for(t in n){var r=this.types[t];if(r&&r.length)for(var i=0,a=n[t];i<a.length;i++){var o=a[i],s=r.indexOf(o);-1!==s&&r.splice(s,1)}}}},{key:"getRect",value:function(t){return null}}]),t}(),Qe=function(){function t(e){i(this,t),this.currentTarget=void 0,this.originalEvent=void 0,this.type=void 0,this.originalEvent=e,et(this,e)}return o(t,[{key:"preventOriginalDefault",value:function(){this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.originalEvent.stopPropagation()}},{key:"stopImmediatePropagation",value:function(){this.originalEvent.stopImmediatePropagation()}}]),t}();function Ye(t){return k.object(t)?{capture:!!t.capture,passive:!!t.passive}:{capture:!!t,passive:!1}}function Je(t,e){return t===e||("boolean"==typeof t?!!e.capture===t&&0==!!e.passive:!!t.capture==!!e.capture&&!!t.passive==!!e.passive)}var Ke={id:"events",install:function(t){var e,n=[],r={},i=[],a={add:o,remove:s,addDelegate:function(t,e,n,a,s){var d=Ye(s);if(!r[n]){r[n]=[];for(var h=0;h<i.length;h++){var u=i[h];o(u,n,l),o(u,n,c,!0)}}var p=r[n],f=bt(p,(function(n){return n.selector===t&&n.context===e}));f||(f={selector:t,context:e,listeners:[]},p.push(f)),f.listeners.push({func:a,options:d})},removeDelegate:function(t,e,n,i,a){var o,d=Ye(a),h=r[n],u=!1;if(h)for(o=h.length-1;o>=0;o--){var p=h[o];if(p.selector===t&&p.context===e){for(var f=p.listeners,m=f.length-1;m>=0;m--){var g=f[m];if(g.func===i&&Je(g.options,d)){f.splice(m,1),f.length||(h.splice(o,1),s(e,n,l),s(e,n,c,!0)),u=!0;break}}if(u)break}}},delegateListener:l,delegateUseCapture:c,delegatedEvents:r,documents:i,targets:n,supportsOptions:!1,supportsPassive:!1};function o(t,e,r,i){if(t.addEventListener){var o=Ye(i),s=bt(n,(function(e){return e.eventTarget===t}));s||(s={eventTarget:t,events:{}},n.push(s)),s.events[e]||(s.events[e]=[]),bt(s.events[e],(function(t){return t.func===r&&Je(t.options,o)}))||(t.addEventListener(e,r,a.supportsOptions?o:o.capture),s.events[e].push({func:r,options:o}))}}function s(t,e,r,i){if(t.addEventListener&&t.removeEventListener){var o=vt(n,(function(e){return e.eventTarget===t})),l=n[o];if(l&&l.events)if("all"!==e){var c=!1,d=l.events[e];if(d){if("all"===r){for(var h=d.length-1;h>=0;h--){var u=d[h];s(t,e,u.func,u.options)}return}for(var p=Ye(i),f=0;f<d.length;f++){var m=d[f];if(m.func===r&&Je(m.options,p)){t.removeEventListener(e,r,a.supportsOptions?p:p.capture),d.splice(f,1),0===d.length&&(delete l.events[e],c=!0);break}}}c&&!Object.keys(l.events).length&&n.splice(o,1)}else for(e in l.events)l.events.hasOwnProperty(e)&&s(t,e,"all")}}function l(t,e){for(var n=Ye(e),i=new Qe(t),a=r[t.type],o=ft(t)[0],s=o;k.element(s);){for(var l=0;l<a.length;l++){var c=a[l],d=c.selector,h=c.context;if(O(s,d)&&j(h,o)&&j(h,s)){var u=c.listeners;i.currentTarget=s;for(var p=0;p<u.length;p++){var f=u[p];Je(f.options,n)&&f.func(i)}}}s=D(s)}}function c(t){return l(t,!0)}return null==(e=t.document)||e.createElement("div").addEventListener("test",null,{get capture(){return a.supportsOptions=!0},get passive(){return a.supportsPassive=!0}}),t.events=a,a}},Xe={methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search:function(t){for(var e=0,n=Xe.methodOrder;e<n.length;e++){var r=n[e],i=Xe[r](t);if(i)return i}return null},simulationResume:function(t){var e=t.pointerType,n=t.eventType,r=t.eventTarget,i=t.scope;if(!/down|start/i.test(n))return null;for(var a=0,o=i.interactions.list;a<o.length;a++){var s=o[a],l=r;if(s.simulation&&s.simulation.allowResume&&s.pointerType===e)for(;l;){if(l===s.element)return s;l=D(l)}}return null},mouseOrPen:function(t){var e,n=t.pointerId,r=t.pointerType,i=t.eventType,a=t.scope;if("mouse"!==r&&"pen"!==r)return null;for(var o=0,s=a.interactions.list;o<s.length;o++){var l=s[o];if(l.pointerType===r){if(l.simulation&&!Ve(l,n))continue;if(l.interacting())return l;e||(e=l)}}if(e)return e;for(var c=0,d=a.interactions.list;c<d.length;c++){var h=d[c];if(!(h.pointerType!==r||/down/i.test(i)&&h.simulation))return h}return null},hasPointer:function(t){for(var e=t.pointerId,n=0,r=t.scope.interactions.list;n<r.length;n++){var i=r[n];if(Ve(i,e))return i}return null},idle:function(t){for(var e=t.pointerType,n=0,r=t.scope.interactions.list;n<r.length;n++){var i=r[n];if(1===i.pointers.length){var a=i.interactable;if(a&&(!a.options.gesture||!a.options.gesture.enabled))continue}else if(i.pointers.length>=2)continue;if(!i.interacting()&&e===i.pointerType)return i}return null}};function Ve(t,e){return t.pointers.some((function(t){return t.id===e}))}var Ze=Xe,$e=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer","windowBlur"];function tn(t,e){return function(n){var r=e.interactions.list,i=pt(n),a=ft(n),o=a[0],s=a[1],l=[];if(/^touch/.test(n.type)){e.prevTouchTime=e.now();for(var c=0,d=n.changedTouches;c<d.length;c++){var h=d[c],u={pointer:h,pointerId:st(h),pointerType:i,eventType:n.type,eventTarget:o,curEventTarget:s,scope:e},p=en(u);l.push([u.pointer,u.eventTarget,u.curEventTarget,p])}}else{var f=!1;if(!C.supportsPointerEvent&&/mouse/.test(n.type)){for(var m=0;m<r.length&&!f;m++)f="mouse"!==r[m].pointerType&&r[m].pointerIsDown;f=f||e.now()-e.prevTouchTime<500||0===n.timeStamp}if(!f){var g={pointer:n,pointerId:st(n),pointerType:i,eventType:n.type,curEventTarget:s,eventTarget:o,scope:e},y=en(g);l.push([g.pointer,g.eventTarget,g.curEventTarget,y])}}for(var v=0;v<l.length;v++){var b=l[v],w=b[0],x=b[1],k=b[2];b[3][t](w,n,x,k)}}}function en(t){var e=t.pointerType,n=t.scope,r={interaction:Ze.search(t),searchDetails:t};return n.fire("interactions:find",r),r.interaction||n.interactions.new({pointerType:e})}function nn(t,e){var n=t.doc,r=t.scope,i=t.options,a=r.interactions.docEvents,o=r.events,s=o[e];for(var l in r.browser.isIOS&&!i.events&&(i.events={passive:!1}),o.delegatedEvents)s(n,l,o.delegateListener),s(n,l,o.delegateUseCapture,!0);for(var c=i&&i.events,d=0;d<a.length;d++){var h=a[d];s(n,h.type,h.listener,c)}}var rn={id:"core/interactions",install:function(t){for(var e={},n=0;n<$e.length;n++){var r=$e[n];e[r]=tn(r,t)}var a,s=C.pEventTypes;function c(){for(var e=0,n=t.interactions.list;e<n.length;e++){var r=n[e];if(r.pointerIsDown&&"touch"===r.pointerType&&!r._interacting)for(var i=function(){var e=o[a];t.documents.some((function(t){return j(t.doc,e.downTarget)}))||r.removePointer(e.pointer,e.event)},a=0,o=r.pointers;a<o.length;a++)i()}}(a=P.PointerEvent?[{type:s.down,listener:c},{type:s.down,listener:e.pointerDown},{type:s.move,listener:e.pointerMove},{type:s.up,listener:e.pointerUp},{type:s.cancel,listener:e.pointerUp}]:[{type:"mousedown",listener:e.pointerDown},{type:"mousemove",listener:e.pointerMove},{type:"mouseup",listener:e.pointerUp},{type:"touchstart",listener:c},{type:"touchstart",listener:e.pointerDown},{type:"touchmove",listener:e.pointerMove},{type:"touchend",listener:e.pointerUp},{type:"touchcancel",listener:e.pointerUp}]).push({type:"blur",listener:function(e){for(var n=0,r=t.interactions.list;n<r.length;n++)r[n].documentBlur(e)}}),t.prevTouchTime=0,t.Interaction=function(e){l(r,e);var n=u(r);function r(){return i(this,r),n.apply(this,arguments)}return o(r,[{key:"pointerMoveTolerance",get:function(){return t.interactions.pointerMoveTolerance},set:function(e){t.interactions.pointerMoveTolerance=e}},{key:"_now",value:function(){return t.now()}}]),r}(Ce),t.interactions={list:[],new:function(e){e.scopeFire=function(e,n){return t.fire(e,n)};var n=new t.Interaction(e);return t.interactions.list.push(n),n},listeners:e,docEvents:a,pointerMoveTolerance:1},t.usePlugin(ge)},listeners:{"scope:add-document":function(t){return nn(t,"add")},"scope:remove-document":function(t){return nn(t,"remove")},"interactable:unset":function(t,e){for(var n=t.interactable,r=e.interactions.list.length-1;r>=0;r--){var i=e.interactions.list[r];i.interactable===n&&(i.stop(),e.fire("interactions:destroy",{interaction:i}),i.destroy(),e.interactions.list.length>2&&e.interactions.list.splice(r,1))}}},onDocSignal:nn,doOnInteractions:tn,methodNames:$e},an=rn,on=function(t){return t[t.On=0]="On",t[t.Off=1]="Off",t}(on||{}),sn=function(){function t(e,n,r,a){i(this,t),this.target=void 0,this.options=void 0,this._actions=void 0,this.events=new Ge,this._context=void 0,this._win=void 0,this._doc=void 0,this._scopeEvents=void 0,this._actions=n.actions,this.target=e,this._context=n.context||r,this._win=b(U(e)?this._context:e),this._doc=this._win.document,this._scopeEvents=a,this.set(n)}return o(t,[{key:"_defaults",get:function(){return{base:{},perAction:{},actions:{}}}},{key:"setOnEvents",value:function(t,e){return k.func(e.onstart)&&this.on("".concat(t,"start"),e.onstart),k.func(e.onmove)&&this.on("".concat(t,"move"),e.onmove),k.func(e.onend)&&this.on("".concat(t,"end"),e.onend),k.func(e.oninertiastart)&&this.on("".concat(t,"inertiastart"),e.oninertiastart),this}},{key:"updatePerActionListeners",value:function(t,e,n){var r,i=this,a=null==(r=this._actions.map[t])?void 0:r.filterEventType,o=function(t){return(null==a||a(t))&&ye(t,i._actions)};(k.array(e)||k.object(e))&&this._onOff(on.Off,t,e,void 0,o),(k.array(n)||k.object(n))&&this._onOff(on.On,t,n,void 0,o)}},{key:"setPerAction",value:function(t,e){var n=this._defaults;for(var r in e){var i=r,a=this.options[t],o=e[i];"listeners"===i&&this.updatePerActionListeners(t,a.listeners,o),k.array(o)?a[i]=yt(o):k.plainObject(o)?(a[i]=W(a[i]||{},ve(o)),k.object(n.perAction[i])&&"enabled"in n.perAction[i]&&(a[i].enabled=!1!==o.enabled)):k.bool(o)&&k.object(n.perAction[i])?a[i].enabled=o:a[i]=o}}},{key:"getRect",value:function(t){return t=t||(k.element(this.target)?this.target:null),k.string(this.target)&&(t=t||this._context.querySelector(this.target)),N(t)}},{key:"rectChecker",value:function(t){var e=this;return k.func(t)?(this.getRect=function(n){var r=W({},t.apply(e,n));return"width"in r||(r.width=r.right-r.left,r.height=r.bottom-r.top),r},this):null===t?(delete this.getRect,this):this.getRect}},{key:"_backCompatOption",value:function(t,e){if(U(e)||k.object(e)){for(var n in this.options[t]=e,this._actions.map)this.options[n][t]=e;return this}return this.options[t]}},{key:"origin",value:function(t){return this._backCompatOption("origin",t)}},{key:"deltaSource",value:function(t){return"page"===t||"client"===t?(this.options.deltaSource=t,this):this.options.deltaSource}},{key:"getAllElements",value:function(){var t=this.target;return k.string(t)?Array.from(this._context.querySelectorAll(t)):k.func(t)&&t.getAllElements?t.getAllElements():k.element(t)?[t]:[]}},{key:"context",value:function(){return this._context}},{key:"inContext",value:function(t){return this._context===t.ownerDocument||j(this._context,t)}},{key:"testIgnoreAllow",value:function(t,e,n){return!this.testIgnore(t.ignoreFrom,e,n)&&this.testAllow(t.allowFrom,e,n)}},{key:"testAllow",value:function(t,e,n){return!t||!!k.element(n)&&(k.string(t)?F(n,t,e):!!k.element(t)&&j(t,n))}},{key:"testIgnore",value:function(t,e,n){return!(!t||!k.element(n))&&(k.string(t)?F(n,t,e):!!k.element(t)&&j(t,n))}},{key:"fire",value:function(t){return this.events.fire(t),this}},{key:"_onOff",value:function(t,e,n,r,i){k.object(e)&&!k.array(e)&&(r=n,n=null);var a=V(e,n,i);for(var o in a){"wheel"===o&&(o=C.wheelEvent);for(var s=0,l=a[o];s<l.length;s++){var c=l[s];ye(o,this._actions)?this.events[t===on.On?"on":"off"](o,c):k.string(this.target)?this._scopeEvents[t===on.On?"addDelegate":"removeDelegate"](this.target,this._context,o,c,r):this._scopeEvents[t===on.On?"add":"remove"](this.target,o,c,r)}}return this}},{key:"on",value:function(t,e,n){return this._onOff(on.On,t,e,n)}},{key:"off",value:function(t,e,n){return this._onOff(on.Off,t,e,n)}},{key:"set",value:function(t){var e=this._defaults;for(var n in k.object(t)||(t={}),this.options=ve(e.base),this._actions.methodDict){var r=n,i=this._actions.methodDict[r];this.options[r]={},this.setPerAction(r,W(W({},e.perAction),e.actions[r])),this[i](t[r])}for(var a in t)"getRect"!==a?k.func(this[a])&&this[a](t[a]):this.rectChecker(t.getRect);return this}},{key:"unset",value:function(){if(k.string(this.target))for(var t in this._scopeEvents.delegatedEvents)for(var e=this._scopeEvents.delegatedEvents[t],n=e.length-1;n>=0;n--){var r=e[n],i=r.selector,a=r.context,o=r.listeners;i===this.target&&a===this._context&&e.splice(n,1);for(var s=o.length-1;s>=0;s--)this._scopeEvents.removeDelegate(this.target,this._context,t,o[s][0],o[s][1])}else this._scopeEvents.remove(this.target,"all")}}]),t}(),ln=function(){function t(e){var n=this;i(this,t),this.list=[],this.selectorMap={},this.scope=void 0,this.scope=e,e.addListeners({"interactable:unset":function(t){var e=t.interactable,r=e.target,i=k.string(r)?n.selectorMap[r]:r[n.scope.id],a=vt(i,(function(t){return t===e}));i.splice(a,1)}})}return o(t,[{key:"new",value:function(t,e){e=W(e||{},{actions:this.scope.actions});var n=new this.scope.Interactable(t,e,this.scope.document,this.scope.events);return this.scope.addDocument(n._doc),this.list.push(n),k.string(t)?(this.selectorMap[t]||(this.selectorMap[t]=[]),this.selectorMap[t].push(n)):(n.target[this.scope.id]||Object.defineProperty(t,this.scope.id,{value:[],configurable:!0}),t[this.scope.id].push(n)),this.scope.fire("interactable:new",{target:t,options:e,interactable:n,win:this.scope._win}),n}},{key:"getExisting",value:function(t,e){var n=e&&e.context||this.scope.document,r=k.string(t),i=r?this.selectorMap[t]:t[this.scope.id];if(i)return bt(i,(function(e){return e._context===n&&(r||e.inContext(t))}))}},{key:"forEachMatch",value:function(t,e){for(var n=0,r=this.list;n<r.length;n++){var i=r[n],a=void 0;if((k.string(i.target)?k.element(t)&&O(t,i.target):t===i.target)&&i.inContext(t)&&(a=e(i)),void 0!==a)return a}}}]),t}(),cn=function(){function t(){var e=this;i(this,t),this.id="__interact_scope_".concat(Math.floor(100*Math.random())),this.isInitialized=!1,this.listenerMaps=[],this.browser=C,this.defaults=ve(_e),this.Eventable=Ge,this.actions={map:{},phases:{start:!0,move:!0,end:!0},methodDict:{},phaselessTypes:{}},this.interactStatic=function(t){var e=function e(n,r){var i=t.interactables.getExisting(n,r);return i||((i=t.interactables.new(n,r)).events.global=e.globalEvents),i};return e.getPointerAverage=ct,e.getTouchBBox=dt,e.getTouchDistance=ht,e.getTouchAngle=ut,e.getElementRect=N,e.getElementClientRect=L,e.matchesSelector=O,e.closest=z,e.globalEvents={},e.version="1.10.26",e.scope=t,e.use=function(t,e){return this.scope.usePlugin(t,e),this},e.isSet=function(t,e){return!!this.scope.interactables.get(t,e&&e.context)},e.on=Jt((function(t,e,n){if(k.string(t)&&-1!==t.search(" ")&&(t=t.trim().split(/ +/)),k.array(t)){for(var r=0,i=t;r<i.length;r++){var a=i[r];this.on(a,e,n)}return this}if(k.object(t)){for(var o in t)this.on(o,t[o],e);return this}return ye(t,this.scope.actions)?this.globalEvents[t]?this.globalEvents[t].push(e):this.globalEvents[t]=[e]:this.scope.events.add(this.scope.document,t,e,{options:n}),this}),"The interact.on() method is being deprecated"),e.off=Jt((function(t,e,n){if(k.string(t)&&-1!==t.search(" ")&&(t=t.trim().split(/ +/)),k.array(t)){for(var r=0,i=t;r<i.length;r++){var a=i[r];this.off(a,e,n)}return this}if(k.object(t)){for(var o in t)this.off(o,t[o],e);return this}var s;return ye(t,this.scope.actions)?t in this.globalEvents&&-1!==(s=this.globalEvents[t].indexOf(e))&&this.globalEvents[t].splice(s,1):this.scope.events.remove(this.scope.document,t,e,n),this}),"The interact.off() method is being deprecated"),e.debug=function(){return this.scope},e.supportsTouch=function(){return C.supportsTouch},e.supportsPointerEvent=function(){return C.supportsPointerEvent},e.stop=function(){for(var t=0,e=this.scope.interactions.list;t<e.length;t++)e[t].stop();return this},e.pointerMoveTolerance=function(t){return k.number(t)?(this.scope.interactions.pointerMoveTolerance=t,this):this.scope.interactions.pointerMoveTolerance},e.addDocument=function(t,e){this.scope.addDocument(t,e)},e.removeDocument=function(t){this.scope.removeDocument(t)},e}(this),this.InteractEvent=Ee,this.Interactable=void 0,this.interactables=new ln(this),this._win=void 0,this.document=void 0,this.window=void 0,this.documents=[],this._plugins={list:[],map:{}},this.onWindowUnload=function(t){return e.removeDocument(t.target)};var n=this;this.Interactable=function(t){l(r,t);var e=u(r);function r(){return i(this,r),e.apply(this,arguments)}return o(r,[{key:"_defaults",get:function(){return n.defaults}},{key:"set",value:function(t){return p(c(r.prototype),"set",this).call(this,t),n.fire("interactable:set",{options:t,interactable:this}),this}},{key:"unset",value:function(){p(c(r.prototype),"unset",this).call(this);var t=n.interactables.list.indexOf(this);t<0||(n.interactables.list.splice(t,1),n.fire("interactable:unset",{interactable:this}))}}]),r}(sn)}return o(t,[{key:"addListeners",value:function(t,e){this.listenerMaps.push({id:e,map:t})}},{key:"fire",value:function(t,e){for(var n=0,r=this.listenerMaps;n<r.length;n++){var i=r[n].map[t];if(i&&!1===i(e,this,t))return!1}}},{key:"init",value:function(t){return this.isInitialized?this:function(t,e){return t.isInitialized=!0,k.window(e)&&v(e),P.init(e),C.init(e),Ht(e),t.window=e,t.document=e.document,t.usePlugin(an),t.usePlugin(Ke),t}(this,t)}},{key:"pluginIsInstalled",value:function(t){var e=t.id;return e?!!this._plugins.map[e]:-1!==this._plugins.list.indexOf(t)}},{key:"usePlugin",value:function(t,e){if(!this.isInitialized)return this;if(this.pluginIsInstalled(t))return this;if(t.id&&(this._plugins.map[t.id]=t),this._plugins.list.push(t),t.install&&t.install(this,e),t.listeners&&t.before){for(var n=0,r=this.listenerMaps.length,i=t.before.reduce((function(t,e){return t[e]=!0,t[dn(e)]=!0,t}),{});n<r;n++){var a=this.listenerMaps[n].id;if(a&&(i[a]||i[dn(a)]))break}this.listenerMaps.splice(n,0,{id:t.id,map:t.listeners})}else t.listeners&&this.listenerMaps.push({id:t.id,map:t.listeners});return this}},{key:"addDocument",value:function(t,e){if(-1!==this.getDocIndex(t))return!1;var n=b(t);e=e?W({},e):{},this.documents.push({doc:t,options:e}),this.events.documents.push(t),t!==this.document&&this.events.add(n,"unload",this.onWindowUnload),this.fire("scope:add-document",{doc:t,window:n,scope:this,options:e})}},{key:"removeDocument",value:function(t){var e=this.getDocIndex(t),n=b(t),r=this.documents[e].options;this.events.remove(n,"unload",this.onWindowUnload),this.documents.splice(e,1),this.events.documents.splice(e,1),this.fire("scope:remove-document",{doc:t,window:n,scope:this,options:r})}},{key:"getDocIndex",value:function(t){for(var e=0;e<this.documents.length;e++)if(this.documents[e].doc===t)return e;return-1}},{key:"getDocOptions",value:function(t){var e=this.getDocIndex(t);return-1===e?null:this.documents[e].options}},{key:"now",value:function(){return(this.window.Date||Date).now()}}]),t}();function dn(t){return t&&t.replace(/\/.*$/,"")}var hn=new cn,un=hn.interactStatic,pn="undefined"!=typeof globalThis?globalThis:window;hn.init(pn);var fn=Object.freeze({__proto__:null,edgeTarget:function(){},elements:function(){},grid:function(t){var e=[["x","y"],["left","top"],["right","bottom"],["width","height"]].filter((function(e){var n=e[0],r=e[1];return n in t||r in t})),n=function(n,r){for(var i=t.range,a=t.limits,o=void 0===a?{left:-1/0,right:1/0,top:-1/0,bottom:1/0}:a,s=t.offset,l=void 0===s?{x:0,y:0}:s,c={range:i,grid:t,x:null,y:null},d=0;d<e.length;d++){var h=e[d],u=h[0],p=h[1],f=Math.round((n-l.x)/t[u]),m=Math.round((r-l.y)/t[p]);c[u]=Math.max(o.left,Math.min(o.right,f*t[u]+l.x)),c[p]=Math.max(o.top,Math.min(o.bottom,m*t[p]+l.y))}return c};return n.grid=t,n.coordFields=e,n}}),mn={id:"snappers",install:function(t){var e=t.interactStatic;e.snappers=W(e.snappers||{},fn),e.createSnapGrid=e.snappers.grid}},gn=mn,yn={start:function(t){var e=t.state,r=t.rect,i=t.edges,a=t.pageCoords,o=e.options,s=o.ratio,l=o.enabled,c=e.options,d=c.equalDelta,h=c.modifiers;"preserve"===s&&(s=r.width/r.height),e.startCoords=W({},a),e.startRect=W({},r),e.ratio=s,e.equalDelta=d;var u=e.linkedEdges={top:i.top||i.left&&!i.bottom,left:i.left||i.top&&!i.right,bottom:i.bottom||i.right&&!i.top,right:i.right||i.bottom&&!i.left};if(e.xIsPrimaryAxis=!(!i.left&&!i.right),e.equalDelta){var p=(u.left?1:-1)*(u.top?1:-1);e.edgeSign={x:p,y:p}}else e.edgeSign={x:u.left?-1:1,y:u.top?-1:1};if(!1!==l&&W(i,u),null!=h&&h.length){var f=new be(t.interaction);f.copyFrom(t.interaction.modification),f.prepareStates(h),e.subModification=f,f.startAll(n({},t))}},set:function(t){var e=t.state,r=t.rect,i=t.coords,a=e.linkedEdges,o=W({},i),s=e.equalDelta?vn:bn;if(W(t.edges,a),s(e,e.xIsPrimaryAxis,i,r),!e.subModification)return null;var l=W({},r);K(a,l,{x:i.x-o.x,y:i.y-o.y});var c=e.subModification.setAll(n(n({},t),{},{rect:l,edges:a,pageCoords:i,prevCoords:i,prevRect:l})),d=c.delta;return c.changed&&(s(e,Math.abs(d.x)>Math.abs(d.y),c.coords,c.rect),W(i,c.coords)),c.eventProps},defaults:{ratio:"preserve",equalDelta:!1,modifiers:[],enabled:!1}};function vn(t,e,n){var r=t.startCoords,i=t.edgeSign;e?n.y=r.y+(n.x-r.x)*i.y:n.x=r.x+(n.y-r.y)*i.x}function bn(t,e,n,r){var i=t.startRect,a=t.startCoords,o=t.ratio,s=t.edgeSign;if(e){var l=r.width/o;n.y=a.y+(l-i.height)*s.y}else{var c=r.height*o;n.x=a.x+(c-i.width)*s.x}}var wn=xe(yn,"aspectRatio"),xn=function(){};xn._defaults={};var kn=xn;function An(t,e,n){return k.func(t)?Q(t,e.interactable,e.element,[n.x,n.y,e]):Q(t,e.interactable,e.element)}var Tn={start:function(t){var e=t.rect,n=t.startOffset,r=t.state,i=t.interaction,a=t.pageCoords,o=r.options,s=o.elementRect,l=W({left:0,top:0,right:0,bottom:0},o.offset||{});if(e&&s){var c=An(o.restriction,i,a);if(c){var d=c.right-c.left-e.width,h=c.bottom-c.top-e.height;d<0&&(l.left+=d,l.right+=d),h<0&&(l.top+=h,l.bottom+=h)}l.left+=n.left-e.width*s.left,l.top+=n.top-e.height*s.top,l.right+=n.right-e.width*(1-s.right),l.bottom+=n.bottom-e.height*(1-s.bottom)}r.offset=l},set:function(t){var e=t.coords,n=t.interaction,r=t.state,i=r.options,a=r.offset,o=An(i.restriction,n,e);if(o){var s=function(t){return!t||"left"in t&&"top"in t||((t=W({},t)).left=t.x||0,t.top=t.y||0,t.right=t.right||t.left+t.width,t.bottom=t.bottom||t.top+t.height),t}(o);e.x=Math.max(Math.min(s.right-a.right,e.x),s.left+a.left),e.y=Math.max(Math.min(s.bottom-a.bottom,e.y),s.top+a.top)}},defaults:{restriction:null,elementRect:null,offset:null,endOnly:!1,enabled:!1}},_n=xe(Tn,"restrict"),En={top:1/0,left:1/0,bottom:-1/0,right:-1/0},Sn={top:-1/0,left:-1/0,bottom:1/0,right:1/0};function In(t,e){for(var n=0,r=["top","left","bottom","right"];n<r.length;n++){var i=r[n];i in t||(t[i]=e[i])}return t}var Pn={noInner:En,noOuter:Sn,start:function(t){var e,n=t.interaction,r=t.startOffset,i=t.state,a=i.options;a&&(e=Y(An(a.offset,n,n.coords.start.page))),e=e||{x:0,y:0},i.offset={top:e.y+r.top,left:e.x+r.left,bottom:e.y-r.bottom,right:e.x-r.right}},set:function(t){var e=t.coords,n=t.edges,r=t.interaction,i=t.state,a=i.offset,o=i.options;if(n){var s=W({},e),l=An(o.inner,r,s)||{},c=An(o.outer,r,s)||{};In(l,En),In(c,Sn),n.top?e.y=Math.min(Math.max(c.top+a.top,s.y),l.top+a.top):n.bottom&&(e.y=Math.max(Math.min(c.bottom+a.bottom,s.y),l.bottom+a.bottom)),n.left?e.x=Math.min(Math.max(c.left+a.left,s.x),l.left+a.left):n.right&&(e.x=Math.max(Math.min(c.right+a.right,s.x),l.right+a.right))}},defaults:{inner:null,outer:null,offset:null,endOnly:!1,enabled:!1}},qn=xe(Pn,"restrictEdges"),Cn=W({get elementRect(){return{top:0,left:0,bottom:1,right:1}},set elementRect(t){}},Tn.defaults),jn=xe({start:Tn.start,set:Tn.set,defaults:Cn},"restrictRect"),zn={width:-1/0,height:-1/0},Dn={width:1/0,height:1/0},On=xe({start:function(t){return Pn.start(t)},set:function(t){var e=t.interaction,n=t.state,r=t.rect,i=t.edges,a=n.options;if(i){var o=J(An(a.min,e,t.coords))||zn,s=J(An(a.max,e,t.coords))||Dn;n.options={endOnly:a.endOnly,inner:W({},Pn.noInner),outer:W({},Pn.noOuter)},i.top?(n.options.inner.top=r.bottom-o.height,n.options.outer.top=r.bottom-s.height):i.bottom&&(n.options.inner.bottom=r.top+o.height,n.options.outer.bottom=r.top+s.height),i.left?(n.options.inner.left=r.right-o.width,n.options.outer.left=r.right-s.width):i.right&&(n.options.inner.right=r.left+o.width,n.options.outer.right=r.left+s.width),Pn.set(t),n.options=a}},defaults:{min:null,max:null,endOnly:!1,enabled:!1}},"restrictSize"),Mn={start:function(t){var e,n=t.interaction,r=t.interactable,i=t.element,a=t.rect,o=t.state,s=t.startOffset,l=o.options,c=l.offsetWithOrigin?function(t){var e=t.interaction.element;return Y(Q(t.state.options.origin,null,null,[e]))||X(t.interactable,e,t.interaction.prepared.name)}(t):{x:0,y:0};if("startCoords"===l.offset)e={x:n.coords.start.page.x,y:n.coords.start.page.y};else{var d=Q(l.offset,r,i,[n]);(e=Y(d)||{x:0,y:0}).x+=c.x,e.y+=c.y}var h=l.relativePoints;o.offsets=a&&h&&h.length?h.map((function(t,n){return{index:n,relativePoint:t,x:s.left-a.width*t.x+e.x,y:s.top-a.height*t.y+e.y}})):[{index:0,relativePoint:null,x:e.x,y:e.y}]},set:function(t){var e=t.interaction,n=t.coords,r=t.state,i=r.options,a=r.offsets,o=X(e.interactable,e.element,e.prepared.name),s=W({},n),l=[];i.offsetWithOrigin||(s.x-=o.x,s.y-=o.y);for(var c=0,d=a;c<d.length;c++)for(var h=d[c],u=s.x-h.x,p=s.y-h.y,f=0,m=i.targets.length;f<m;f++){var g,y=i.targets[f];(g=k.func(y)?y(u,p,e._proxy,h,f):y)&&l.push({x:(k.number(g.x)?g.x:u)+h.x,y:(k.number(g.y)?g.y:p)+h.y,range:k.number(g.range)?g.range:i.range,source:y,index:f,offset:h})}for(var v={target:null,inRange:!1,distance:0,range:0,delta:{x:0,y:0}},b=0;b<l.length;b++){var w=l[b],x=w.range,A=w.x-s.x,T=w.y-s.y,_=$(A,T),E=_<=x;x===1/0&&v.inRange&&v.range!==1/0&&(E=!1),v.target&&!(E?v.inRange&&x!==1/0?_/x<v.distance/v.range:x===1/0&&v.range!==1/0||_<v.distance:!v.inRange&&_<v.distance)||(v.target=w,v.distance=_,v.range=x,v.inRange=E,v.delta.x=A,v.delta.y=T)}return v.inRange&&(n.x=v.target.x,n.y=v.target.y),r.closest=v,v},defaults:{range:1/0,targets:null,offset:null,offsetWithOrigin:!0,origin:null,relativePoints:null,endOnly:!1,enabled:!1}},Bn=xe(Mn,"snap"),Fn={start:function(t){var e=t.state,n=t.edges,r=e.options;if(!n)return null;t.state={options:{targets:null,relativePoints:[{x:n.left?0:1,y:n.top?0:1}],offset:r.offset||"self",origin:{x:0,y:0},range:r.range}},e.targetFields=e.targetFields||[["width","height"],["x","y"]],Mn.start(t),e.offsets=t.state.offsets,t.state=e},set:function(t){var e=t.interaction,n=t.state,r=t.coords,i=n.options,a=n.offsets,o={x:r.x-a[0].x,y:r.y-a[0].y};n.options=W({},i),n.options.targets=[];for(var s=0,l=i.targets||[];s<l.length;s++){var c=l[s],d=void 0;if(d=k.func(c)?c(o.x,o.y,e):c){for(var h=0,u=n.targetFields;h<u.length;h++){var p=u[h],f=p[0],m=p[1];if(f in d||m in d){d.x=d[f],d.y=d[m];break}}n.options.targets.push(d)}}var g=Mn.set(t);return n.options=i,g},defaults:{range:1/0,targets:null,offset:null,endOnly:!1,enabled:!1}},Rn=xe(Fn,"snapSize"),Ln={aspectRatio:wn,restrictEdges:qn,restrict:_n,restrictRect:jn,restrictSize:On,snapEdges:xe({start:function(t){var e=t.edges;return e?(t.state.targetFields=t.state.targetFields||[[e.left?"left":"right",e.top?"top":"bottom"]],Fn.start(t)):null},set:Fn.set,defaults:W(ve(Fn.defaults),{targets:void 0,range:void 0,offset:{x:0,y:0}})},"snapEdges"),snap:Bn,snapSize:Rn,spring:kn,avoid:kn,transform:kn,rubberband:kn},Nn={id:"modifiers",install:function(t){var e=t.interactStatic;for(var n in t.usePlugin(Te),t.usePlugin(gn),e.modifiers=Ln,Ln){var r=Ln[n],i=r._defaults,a=r._methods;i._methods=a,t.defaults.perAction[n]=i}}},Hn=Nn,Un=function(t){l(n,t);var e=u(n);function n(t,r,a,o,s,l){var c;if(i(this,n),et(h(c=e.call(this,s)),a),a!==r&&et(h(c),r),c.timeStamp=l,c.originalEvent=a,c.type=t,c.pointerId=st(r),c.pointerType=pt(r),c.target=o,c.currentTarget=null,"tap"===t){var d=s.getPointerIndex(r);c.dt=c.timeStamp-s.pointers[d].downTime;var u=c.timeStamp-s.tapTime;c.double=!!s.prevTap&&"doubletap"!==s.prevTap.type&&s.prevTap.target===c.target&&u<500}else"doubletap"===t&&(c.dt=r.timeStamp-s.tapTime,c.double=!0);return c}return o(n,[{key:"_subtractOrigin",value:function(t){var e=t.x,n=t.y;return this.pageX-=e,this.pageY-=n,this.clientX-=e,this.clientY-=n,this}},{key:"_addOrigin",value:function(t){var e=t.x,n=t.y;return this.pageX+=e,this.pageY+=n,this.clientX+=e,this.clientY+=n,this}},{key:"preventDefault",value:function(){this.originalEvent.preventDefault()}}]),n}(mt),Wn={id:"pointer-events/base",before:["inertia","modifiers","auto-start","actions"],install:function(t){t.pointerEvents=Wn,t.defaults.actions.pointerEvents=Wn.defaults,W(t.actions.phaselessTypes,Wn.types)},listeners:{"interactions:new":function(t){var e=t.interaction;e.prevTap=null,e.tapTime=0},"interactions:update-pointer":function(t){var e=t.down,n=t.pointerInfo;!e&&n.hold||(n.hold={duration:1/0,timeout:null})},"interactions:move":function(t,e){var n=t.interaction,r=t.pointer,i=t.event,a=t.eventTarget;t.duplicate||n.pointerIsDown&&!n.pointerWasMoved||(n.pointerIsDown&&Yn(t),Gn({interaction:n,pointer:r,event:i,eventTarget:a,type:"move"},e))},"interactions:down":function(t,e){!function(t,e){for(var n=t.interaction,r=t.pointer,i=t.event,a=t.eventTarget,o=t.pointerIndex,s=n.pointers[o].hold,l=H(a),c={interaction:n,pointer:r,event:i,eventTarget:a,type:"hold",targets:[],path:l,node:null},d=0;d<l.length;d++){var h=l[d];c.node=h,e.fire("pointerEvents:collect-targets",c)}if(c.targets.length){for(var u=1/0,p=0,f=c.targets;p<f.length;p++){var m=f[p].eventable.options.holdDuration;m<u&&(u=m)}s.duration=u,s.timeout=setTimeout((function(){Gn({interaction:n,eventTarget:a,pointer:r,event:i,type:"hold"},e)}),u)}}(t,e),Gn(t,e)},"interactions:up":function(t,e){Yn(t),Gn(t,e),function(t,e){var n=t.interaction,r=t.pointer,i=t.event,a=t.eventTarget;n.pointerWasMoved||Gn({interaction:n,eventTarget:a,pointer:r,event:i,type:"tap"},e)}(t,e)},"interactions:cancel":function(t,e){Yn(t),Gn(t,e)}},PointerEvent:Un,fire:Gn,collectEventTargets:Qn,defaults:{holdDuration:600,ignoreFrom:null,allowFrom:null,origin:{x:0,y:0}},types:{down:!0,move:!0,up:!0,cancel:!0,tap:!0,doubletap:!0,hold:!0}};function Gn(t,e){var n=t.interaction,r=t.pointer,i=t.event,a=t.eventTarget,o=t.type,s=t.targets,l=void 0===s?Qn(t,e):s,c=new Un(o,r,i,a,n,e.now());e.fire("pointerEvents:new",{pointerEvent:c});for(var d={interaction:n,pointer:r,event:i,eventTarget:a,targets:l,type:o,pointerEvent:c},h=0;h<l.length;h++){var u=l[h];for(var p in u.props||{})c[p]=u.props[p];var f=X(u.eventable,u.node);if(c._subtractOrigin(f),c.eventable=u.eventable,c.currentTarget=u.node,u.eventable.fire(c),c._addOrigin(f),c.immediatePropagationStopped||c.propagationStopped&&h+1<l.length&&l[h+1].node!==c.currentTarget)break}if(e.fire("pointerEvents:fired",d),"tap"===o){var m=c.double?Gn({interaction:n,pointer:r,event:i,eventTarget:a,type:"doubletap"},e):c;n.prevTap=m,n.tapTime=m.timeStamp}return c}function Qn(t,e){var n=t.interaction,r=t.pointer,i=t.event,a=t.eventTarget,o=t.type,s=n.getPointerIndex(r),l=n.pointers[s];if("tap"===o&&(n.pointerWasMoved||!l||l.downTarget!==a))return[];for(var c=H(a),d={interaction:n,pointer:r,event:i,eventTarget:a,type:o,path:c,targets:[],node:null},h=0;h<c.length;h++){var u=c[h];d.node=u,e.fire("pointerEvents:collect-targets",d)}return"hold"===o&&(d.targets=d.targets.filter((function(t){var e,r;return t.eventable.options.holdDuration===(null==(e=n.pointers[s])||null==(r=e.hold)?void 0:r.duration)}))),d.targets}function Yn(t){var e=t.interaction,n=t.pointerIndex,r=e.pointers[n].hold;r&&r.timeout&&(clearTimeout(r.timeout),r.timeout=null)}var Jn=Object.freeze({__proto__:null,default:Wn});function Kn(t){var e=t.interaction;e.holdIntervalHandle&&(clearInterval(e.holdIntervalHandle),e.holdIntervalHandle=null)}var Xn={id:"pointer-events/holdRepeat",install:function(t){t.usePlugin(Wn);var e=t.pointerEvents;e.defaults.holdRepeatInterval=0,e.types.holdrepeat=t.actions.phaselessTypes.holdrepeat=!0},listeners:["move","up","cancel","endall"].reduce((function(t,e){return t["pointerEvents:".concat(e)]=Kn,t}),{"pointerEvents:new":function(t){var e=t.pointerEvent;"hold"===e.type&&(e.count=(e.count||0)+1)},"pointerEvents:fired":function(t,e){var n=t.interaction,r=t.pointerEvent,i=t.eventTarget,a=t.targets;if("hold"===r.type&&a.length){var o=a[0].eventable.options.holdRepeatInterval;o<=0||(n.holdIntervalHandle=setTimeout((function(){e.pointerEvents.fire({interaction:n,eventTarget:i,type:"hold",pointer:r,event:r},e)}),o))}}})},Vn=Xn,Zn={id:"pointer-events/interactableTargets",install:function(t){var e=t.Interactable;e.prototype.pointerEvents=function(t){return W(this.events.options,t),this};var n=e.prototype._backCompatOption;e.prototype._backCompatOption=function(t,e){var r=n.call(this,t,e);return r===this&&(this.events.options[t]=e),r}},listeners:{"pointerEvents:collect-targets":function(t,e){var n=t.targets,r=t.node,i=t.type,a=t.eventTarget;e.interactables.forEachMatch(r,(function(t){var e=t.events,o=e.options;e.types[i]&&e.types[i].length&&t.testIgnoreAllow(o,r,a)&&n.push({node:r,eventable:e,props:{interactable:t}})}))},"interactable:new":function(t){var e=t.interactable;e.events.getRect=function(t){return e.getRect(t)}},"interactable:set":function(t,e){var n=t.interactable,r=t.options;W(n.events.options,e.pointerEvents.defaults),W(n.events.options,r.pointerEvents||{})}}},$n=Zn,tr={id:"pointer-events",install:function(t){t.usePlugin(Jn),t.usePlugin(Vn),t.usePlugin($n)}},er=tr,nr={id:"reflow",install:function(t){var e=t.Interactable;t.actions.phases.reflow=!0,e.prototype.reflow=function(e){return function(t,e,n){for(var r=t.getAllElements(),i=n.window.Promise,a=i?[]:null,o=function(){var o=r[s],l=t.getRect(o);if(!l)return 1;var c,d=bt(n.interactions.list,(function(n){return n.interacting()&&n.interactable===t&&n.element===o&&n.prepared.name===e.name}));if(d)d.move(),a&&(c=d._reflowPromise||new i((function(t){d._reflowResolve=t})));else{var h=J(l),u=function(t){return{coords:t,get page(){return this.coords.page},get client(){return this.coords.client},get timeStamp(){return this.coords.timeStamp},get pageX(){return this.coords.page.x},get pageY(){return this.coords.page.y},get clientX(){return this.coords.client.x},get clientY(){return this.coords.client.y},get pointerId(){return this.coords.pointerId},get target(){return this.coords.target},get type(){return this.coords.type},get pointerType(){return this.coords.pointerType},get buttons(){return this.coords.buttons},preventDefault:function(){}}}({page:{x:h.x,y:h.y},client:{x:h.x,y:h.y},timeStamp:n.now()});c=function(t,e,n,r,i){var a=t.interactions.new({pointerType:"reflow"}),o={interaction:a,event:i,pointer:i,eventTarget:n,phase:"reflow"};a.interactable=e,a.element=n,a.prevEvent=i,a.updatePointer(i,i,n,!0),rt(a.coords.delta),Kt(a.prepared,r),a._doPhase(o);var s=t.window.Promise,l=s?new s((function(t){a._reflowResolve=t})):void 0;return a._reflowPromise=l,a.start(r,e,n),a._interacting?(a.move(o),a.end(i)):(a.stop(),a._reflowResolve()),a.removePointer(i,i),l}(n,t,o,e,u)}a&&a.push(c)},s=0;s<r.length&&!o();s++);return a&&i.all(a).then((function(){return t}))}(this,e,t)}},listeners:{"interactions:stop":function(t,e){var n=t.interaction;"reflow"===n.pointerType&&(n._reflowResolve&&n._reflowResolve(),function(t,e){t.splice(t.indexOf(e),1)}(e.interactions.list,n))}}},rr=nr;if(un.use(ge),un.use(Be),un.use(er),un.use(Ue),un.use(Hn),un.use(pe),un.use(Ft),un.use(Yt),un.use(rr),un.default=un,"object"===r(t)&&t)try{t.exports=un}catch(e){}return un.default=un,un}()},5036:(t,e,n)=>{n(8806),t.exports={encode:t=>(new TextEncoder).encode(t),decode:t=>(new TextDecoder).decode(t)}},1708:t=>{t.exports=function(t,e,n){var r;return function(){if(!e)return t.apply(this,arguments);var i=this,a=arguments,o=n&&!r;return clearTimeout(r),r=setTimeout((function(){if(r=null,!o)return t.apply(i,a)}),e),o?t.apply(this,arguments):void 0}}},9097:t=>{t.exports=function(t){var e,n;if("function"!=typeof t)throw new Error("expected a function but got "+t);return function(){return e?n:(e=!0,n=t.apply(this,arguments))}}},2575:(t,e,n)=>{"use strict";n.r(e)},6439:(t,e,n)=>{"use strict";n.r(e)},2434:(t,e,n)=>{"use strict";n.r(e)},6085:(t,e,n)=>{"use strict";n.r(e)},7462:(t,e,n)=>{"use strict";n.r(e)},3976:(t,e,n)=>{"use strict";n.r(e)},1018:(t,e,n)=>{"use strict";n.r(e)},582:(t,e,n)=>{"use strict";n.r(e)},5994:(t,e,n)=>{"use strict";n.r(e)},7366:(t,e,n)=>{"use strict";n.r(e)},1100:(t,e,n)=>{"use strict";n.r(e)},9591:(t,e,n)=>{"use strict";var r={};(0,n(4236).assign)(r,n(4555),n(8843),n(1619)),t.exports=r},4555:(t,e,n)=>{"use strict";var r=n(405),i=n(4236),a=n(9373),o=n(8898),s=n(2292),l=Object.prototype.toString,c=0,d=-1,h=0,u=8;function p(t){if(!(this instanceof p))return new p(t);this.options=i.assign({level:d,method:u,chunkSize:16384,windowBits:15,memLevel:8,strategy:h,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var n=r.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(n!==c)throw new Error(o[n]);if(e.header&&r.deflateSetHeader(this.strm,e.header),e.dictionary){var f;if(f="string"==typeof e.dictionary?a.string2buf(e.dictionary):"[object ArrayBuffer]"===l.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(n=r.deflateSetDictionary(this.strm,f))!==c)throw new Error(o[n]);this._dict_set=!0}}function f(t,e){var n=new p(e);if(n.push(t,!0),n.err)throw n.msg||o[n.err];return n.result}p.prototype.push=function(t,e){var n,o,s=this.strm,d=this.options.chunkSize;if(this.ended)return!1;o=e===~~e?e:!0===e?4:0,"string"==typeof t?s.input=a.string2buf(t):"[object ArrayBuffer]"===l.call(t)?s.input=new Uint8Array(t):s.input=t,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new i.Buf8(d),s.next_out=0,s.avail_out=d),1!==(n=r.deflate(s,o))&&n!==c)return this.onEnd(n),this.ended=!0,!1;0!==s.avail_out&&(0!==s.avail_in||4!==o&&2!==o)||("string"===this.options.to?this.onData(a.buf2binstring(i.shrinkBuf(s.output,s.next_out))):this.onData(i.shrinkBuf(s.output,s.next_out)))}while((s.avail_in>0||0===s.avail_out)&&1!==n);return 4===o?(n=r.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===c):2!==o||(this.onEnd(c),s.avail_out=0,!0)},p.prototype.onData=function(t){this.chunks.push(t)},p.prototype.onEnd=function(t){t===c&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Deflate=p,e.deflate=f,e.deflateRaw=function(t,e){return(e=e||{}).raw=!0,f(t,e)},e.gzip=function(t,e){return(e=e||{}).gzip=!0,f(t,e)}},8843:(t,e,n)=>{"use strict";var r=n(7948),i=n(4236),a=n(9373),o=n(1619),s=n(8898),l=n(2292),c=n(2401),d=Object.prototype.toString;function h(t){if(!(this instanceof h))return new h(t);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var n=r.inflateInit2(this.strm,e.windowBits);if(n!==o.Z_OK)throw new Error(s[n]);if(this.header=new c,r.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=a.string2buf(e.dictionary):"[object ArrayBuffer]"===d.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=r.inflateSetDictionary(this.strm,e.dictionary))!==o.Z_OK))throw new Error(s[n])}function u(t,e){var n=new h(e);if(n.push(t,!0),n.err)throw n.msg||s[n.err];return n.result}h.prototype.push=function(t,e){var n,s,l,c,h,u=this.strm,p=this.options.chunkSize,f=this.options.dictionary,m=!1;if(this.ended)return!1;s=e===~~e?e:!0===e?o.Z_FINISH:o.Z_NO_FLUSH,"string"==typeof t?u.input=a.binstring2buf(t):"[object ArrayBuffer]"===d.call(t)?u.input=new Uint8Array(t):u.input=t,u.next_in=0,u.avail_in=u.input.length;do{if(0===u.avail_out&&(u.output=new i.Buf8(p),u.next_out=0,u.avail_out=p),(n=r.inflate(u,o.Z_NO_FLUSH))===o.Z_NEED_DICT&&f&&(n=r.inflateSetDictionary(this.strm,f)),n===o.Z_BUF_ERROR&&!0===m&&(n=o.Z_OK,m=!1),n!==o.Z_STREAM_END&&n!==o.Z_OK)return this.onEnd(n),this.ended=!0,!1;u.next_out&&(0!==u.avail_out&&n!==o.Z_STREAM_END&&(0!==u.avail_in||s!==o.Z_FINISH&&s!==o.Z_SYNC_FLUSH)||("string"===this.options.to?(l=a.utf8border(u.output,u.next_out),c=u.next_out-l,h=a.buf2string(u.output,l),u.next_out=c,u.avail_out=p-c,c&&i.arraySet(u.output,u.output,l,c,0),this.onData(h)):this.onData(i.shrinkBuf(u.output,u.next_out)))),0===u.avail_in&&0===u.avail_out&&(m=!0)}while((u.avail_in>0||0===u.avail_out)&&n!==o.Z_STREAM_END);return n===o.Z_STREAM_END&&(s=o.Z_FINISH),s===o.Z_FINISH?(n=r.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===o.Z_OK):s!==o.Z_SYNC_FLUSH||(this.onEnd(o.Z_OK),u.avail_out=0,!0)},h.prototype.onData=function(t){this.chunks.push(t)},h.prototype.onEnd=function(t){t===o.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Inflate=h,e.inflate=u,e.inflateRaw=function(t,e){return(e=e||{}).raw=!0,u(t,e)},e.ungzip=u},4236:(t,e)=>{"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var i in n)r(n,i)&&(t[i]=n[i])}}return t},e.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var i={arraySet:function(t,e,n,r,i){if(e.subarray&&t.subarray)t.set(e.subarray(n,n+r),i);else for(var a=0;a<r;a++)t[i+a]=e[n+a]},flattenChunks:function(t){var e,n,r,i,a,o;for(r=0,e=0,n=t.length;e<n;e++)r+=t[e].length;for(o=new Uint8Array(r),i=0,e=0,n=t.length;e<n;e++)a=t[e],o.set(a,i),i+=a.length;return o}},a={arraySet:function(t,e,n,r,i){for(var a=0;a<r;a++)t[i+a]=e[n+a]},flattenChunks:function(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,i)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,a))},e.setTyped(n)},9373:(t,e,n)=>{"use strict";var r=n(4236),i=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(t){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){a=!1}for(var o=new r.Buf8(256),s=0;s<256;s++)o[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;function l(t,e){if(e<65534&&(t.subarray&&a||!t.subarray&&i))return String.fromCharCode.apply(null,r.shrinkBuf(t,e));for(var n="",o=0;o<e;o++)n+=String.fromCharCode(t[o]);return n}o[254]=o[254]=1,e.string2buf=function(t){var e,n,i,a,o,s=t.length,l=0;for(a=0;a<s;a++)55296==(64512&(n=t.charCodeAt(a)))&&a+1<s&&56320==(64512&(i=t.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(i-56320),a++),l+=n<128?1:n<2048?2:n<65536?3:4;for(e=new r.Buf8(l),o=0,a=0;o<l;a++)55296==(64512&(n=t.charCodeAt(a)))&&a+1<s&&56320==(64512&(i=t.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(i-56320),a++),n<128?e[o++]=n:n<2048?(e[o++]=192|n>>>6,e[o++]=128|63&n):n<65536?(e[o++]=224|n>>>12,e[o++]=128|n>>>6&63,e[o++]=128|63&n):(e[o++]=240|n>>>18,e[o++]=128|n>>>12&63,e[o++]=128|n>>>6&63,e[o++]=128|63&n);return e},e.buf2binstring=function(t){return l(t,t.length)},e.binstring2buf=function(t){for(var e=new r.Buf8(t.length),n=0,i=e.length;n<i;n++)e[n]=t.charCodeAt(n);return e},e.buf2string=function(t,e){var n,r,i,a,s=e||t.length,c=new Array(2*s);for(r=0,n=0;n<s;)if((i=t[n++])<128)c[r++]=i;else if((a=o[i])>4)c[r++]=65533,n+=a-1;else{for(i&=2===a?31:3===a?15:7;a>1&&n<s;)i=i<<6|63&t[n++],a--;a>1?c[r++]=65533:i<65536?c[r++]=i:(i-=65536,c[r++]=55296|i>>10&1023,c[r++]=56320|1023&i)}return l(c,r)},e.utf8border=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;n>=0&&128==(192&t[n]);)n--;return n<0||0===n?e:n+o[t[n]]>e?n:e}},6069:t=>{"use strict";t.exports=function(t,e,n,r){for(var i=65535&t|0,a=t>>>16&65535|0,o=0;0!==n;){n-=o=n>2e3?2e3:n;do{a=a+(i=i+e[r++]|0)|0}while(--o);i%=65521,a%=65521}return i|a<<16|0}},1619:t=>{"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},2869:t=>{"use strict";var e=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();t.exports=function(t,n,r,i){var a=e,o=i+r;t^=-1;for(var s=i;s<o;s++)t=t>>>8^a[255&(t^n[s])];return-1^t}},405:(t,e,n)=>{"use strict";var r,i=n(4236),a=n(342),o=n(6069),s=n(2869),l=n(8898),c=0,d=0,h=-2,u=2,p=8,f=286,m=30,g=19,y=2*f+1,v=15,b=3,w=258,x=w+b+1,k=42,A=103,T=113,_=666;function E(t,e){return t.msg=l[e],e}function S(t){return(t<<1)-(t>4?9:0)}function I(t){for(var e=t.length;--e>=0;)t[e]=0}function P(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(i.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))}function q(t,e){a._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,P(t.strm)}function C(t,e){t.pending_buf[t.pending++]=e}function j(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function z(t,e){var n,r,i=t.max_chain_length,a=t.strstart,o=t.prev_length,s=t.nice_match,l=t.strstart>t.w_size-x?t.strstart-(t.w_size-x):0,c=t.window,d=t.w_mask,h=t.prev,u=t.strstart+w,p=c[a+o-1],f=c[a+o];t.prev_length>=t.good_match&&(i>>=2),s>t.lookahead&&(s=t.lookahead);do{if(c[(n=e)+o]===f&&c[n+o-1]===p&&c[n]===c[a]&&c[++n]===c[a+1]){a+=2,n++;do{}while(c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&a<u);if(r=w-(u-a),a=u-w,r>o){if(t.match_start=e,o=r,r>=s)break;p=c[a+o-1],f=c[a+o]}}}while((e=h[e&d])>l&&0!=--i);return o<=t.lookahead?o:t.lookahead}function D(t){var e,n,r,a,l,c,d,h,u,p,f=t.w_size;do{if(a=t.window_size-t.lookahead-t.strstart,t.strstart>=f+(f-x)){i.arraySet(t.window,t.window,f,f,0),t.match_start-=f,t.strstart-=f,t.block_start-=f,e=n=t.hash_size;do{r=t.head[--e],t.head[e]=r>=f?r-f:0}while(--n);e=n=f;do{r=t.prev[--e],t.prev[e]=r>=f?r-f:0}while(--n);a+=f}if(0===t.strm.avail_in)break;if(c=t.strm,d=t.window,h=t.strstart+t.lookahead,u=a,p=void 0,(p=c.avail_in)>u&&(p=u),n=0===p?0:(c.avail_in-=p,i.arraySet(d,c.input,c.next_in,p,h),1===c.state.wrap?c.adler=o(c.adler,d,p,h):2===c.state.wrap&&(c.adler=s(c.adler,d,p,h)),c.next_in+=p,c.total_in+=p,p),t.lookahead+=n,t.lookahead+t.insert>=b)for(l=t.strstart-t.insert,t.ins_h=t.window[l],t.ins_h=(t.ins_h<<t.hash_shift^t.window[l+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[l+b-1])&t.hash_mask,t.prev[l&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=l,l++,t.insert--,!(t.lookahead+t.insert<b)););}while(t.lookahead<x&&0!==t.strm.avail_in)}function O(t,e){for(var n,r;;){if(t.lookahead<x){if(D(t),t.lookahead<x&&e===c)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=b&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+b-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-x&&(t.match_length=z(t,n)),t.match_length>=b)if(r=a._tr_tally(t,t.strstart-t.match_start,t.match_length-b),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=b){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+b-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else r=a._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(q(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<b-1?t.strstart:b-1,4===e?(q(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(q(t,!1),0===t.strm.avail_out)?1:2}function M(t,e){for(var n,r,i;;){if(t.lookahead<x){if(D(t),t.lookahead<x&&e===c)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=b&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+b-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=b-1,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-x&&(t.match_length=z(t,n),t.match_length<=5&&(1===t.strategy||t.match_length===b&&t.strstart-t.match_start>4096)&&(t.match_length=b-1)),t.prev_length>=b&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-b,r=a._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-b),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+b-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=b-1,t.strstart++,r&&(q(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((r=a._tr_tally(t,0,t.window[t.strstart-1]))&&q(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=a._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<b-1?t.strstart:b-1,4===e?(q(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(q(t,!1),0===t.strm.avail_out)?1:2}function B(t,e,n,r,i){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=r,this.func=i}function F(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=p,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*y),this.dyn_dtree=new i.Buf16(2*(2*m+1)),this.bl_tree=new i.Buf16(2*(2*g+1)),I(this.dyn_ltree),I(this.dyn_dtree),I(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(v+1),this.heap=new i.Buf16(2*f+1),I(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*f+1),I(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function R(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=u,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?k:T,t.adler=2===e.wrap?0:1,e.last_flush=c,a._tr_init(e),d):E(t,h)}function L(t){var e,n=R(t);return n===d&&((e=t.state).window_size=2*e.w_size,I(e.head),e.max_lazy_match=r[e.level].max_lazy,e.good_match=r[e.level].good_length,e.nice_match=r[e.level].nice_length,e.max_chain_length=r[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=b-1,e.match_available=0,e.ins_h=0),n}function N(t,e,n,r,a,o){if(!t)return h;var s=1;if(-1===e&&(e=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),a<1||a>9||n!==p||r<8||r>15||e<0||e>9||o<0||o>4)return E(t,h);8===r&&(r=9);var l=new F;return t.state=l,l.strm=t,l.wrap=s,l.gzhead=null,l.w_bits=r,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=a+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+b-1)/b),l.window=new i.Buf8(2*l.w_size),l.head=new i.Buf16(l.hash_size),l.prev=new i.Buf16(l.w_size),l.lit_bufsize=1<<a+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new i.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=e,l.strategy=o,l.method=n,L(t)}r=[new B(0,0,0,0,(function(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(D(t),0===t.lookahead&&e===c)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var r=t.block_start+n;if((0===t.strstart||t.strstart>=r)&&(t.lookahead=t.strstart-r,t.strstart=r,q(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-x&&(q(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(q(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(q(t,!1),t.strm.avail_out),1)})),new B(4,4,8,4,O),new B(4,5,16,8,O),new B(4,6,32,32,O),new B(4,4,16,16,M),new B(8,16,32,32,M),new B(8,16,128,128,M),new B(8,32,128,256,M),new B(32,128,258,1024,M),new B(32,258,258,4096,M)],e.deflateInit=function(t,e){return N(t,e,p,15,8,0)},e.deflateInit2=N,e.deflateReset=L,e.deflateResetKeep=R,e.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?h:(t.state.gzhead=e,d):h},e.deflate=function(t,e){var n,i,o,l;if(!t||!t.state||e>5||e<0)return t?E(t,h):h;if(i=t.state,!t.output||!t.input&&0!==t.avail_in||i.status===_&&4!==e)return E(t,0===t.avail_out?-5:h);if(i.strm=t,n=i.last_flush,i.last_flush=e,i.status===k)if(2===i.wrap)t.adler=0,C(i,31),C(i,139),C(i,8),i.gzhead?(C(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),C(i,255&i.gzhead.time),C(i,i.gzhead.time>>8&255),C(i,i.gzhead.time>>16&255),C(i,i.gzhead.time>>24&255),C(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),C(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(C(i,255&i.gzhead.extra.length),C(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=s(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(C(i,0),C(i,0),C(i,0),C(i,0),C(i,0),C(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),C(i,3),i.status=T);else{var u=p+(i.w_bits-8<<4)<<8;u|=(i.strategy>=2||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(u|=32),u+=31-u%31,i.status=T,j(i,u),0!==i.strstart&&(j(i,t.adler>>>16),j(i,65535&t.adler)),t.adler=1}if(69===i.status)if(i.gzhead.extra){for(o=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>o&&(t.adler=s(t.adler,i.pending_buf,i.pending-o,o)),P(t),o=i.pending,i.pending!==i.pending_buf_size));)C(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>o&&(t.adler=s(t.adler,i.pending_buf,i.pending-o,o)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){o=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(t.adler=s(t.adler,i.pending_buf,i.pending-o,o)),P(t),o=i.pending,i.pending===i.pending_buf_size)){l=1;break}l=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,C(i,l)}while(0!==l);i.gzhead.hcrc&&i.pending>o&&(t.adler=s(t.adler,i.pending_buf,i.pending-o,o)),0===l&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){o=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(t.adler=s(t.adler,i.pending_buf,i.pending-o,o)),P(t),o=i.pending,i.pending===i.pending_buf_size)){l=1;break}l=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,C(i,l)}while(0!==l);i.gzhead.hcrc&&i.pending>o&&(t.adler=s(t.adler,i.pending_buf,i.pending-o,o)),0===l&&(i.status=A)}else i.status=A;if(i.status===A&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&P(t),i.pending+2<=i.pending_buf_size&&(C(i,255&t.adler),C(i,t.adler>>8&255),t.adler=0,i.status=T)):i.status=T),0!==i.pending){if(P(t),0===t.avail_out)return i.last_flush=-1,d}else if(0===t.avail_in&&S(e)<=S(n)&&4!==e)return E(t,-5);if(i.status===_&&0!==t.avail_in)return E(t,-5);if(0!==t.avail_in||0!==i.lookahead||e!==c&&i.status!==_){var f=2===i.strategy?function(t,e){for(var n;;){if(0===t.lookahead&&(D(t),0===t.lookahead)){if(e===c)return 1;break}if(t.match_length=0,n=a._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(q(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(q(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(q(t,!1),0===t.strm.avail_out)?1:2}(i,e):3===i.strategy?function(t,e){for(var n,r,i,o,s=t.window;;){if(t.lookahead<=w){if(D(t),t.lookahead<=w&&e===c)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=b&&t.strstart>0&&(r=s[i=t.strstart-1])===s[++i]&&r===s[++i]&&r===s[++i]){o=t.strstart+w;do{}while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&i<o);t.match_length=w-(o-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=b?(n=a._tr_tally(t,1,t.match_length-b),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=a._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(q(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(q(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(q(t,!1),0===t.strm.avail_out)?1:2}(i,e):r[i.level].func(i,e);if(3!==f&&4!==f||(i.status=_),1===f||3===f)return 0===t.avail_out&&(i.last_flush=-1),d;if(2===f&&(1===e?a._tr_align(i):5!==e&&(a._tr_stored_block(i,0,0,!1),3===e&&(I(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),P(t),0===t.avail_out))return i.last_flush=-1,d}return 4!==e?d:i.wrap<=0?1:(2===i.wrap?(C(i,255&t.adler),C(i,t.adler>>8&255),C(i,t.adler>>16&255),C(i,t.adler>>24&255),C(i,255&t.total_in),C(i,t.total_in>>8&255),C(i,t.total_in>>16&255),C(i,t.total_in>>24&255)):(j(i,t.adler>>>16),j(i,65535&t.adler)),P(t),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?d:1)},e.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==k&&69!==e&&73!==e&&91!==e&&e!==A&&e!==T&&e!==_?E(t,h):(t.state=null,e===T?E(t,-3):d):h},e.deflateSetDictionary=function(t,e){var n,r,a,s,l,c,u,p,f=e.length;if(!t||!t.state)return h;if(2===(s=(n=t.state).wrap)||1===s&&n.status!==k||n.lookahead)return h;for(1===s&&(t.adler=o(t.adler,e,f,0)),n.wrap=0,f>=n.w_size&&(0===s&&(I(n.head),n.strstart=0,n.block_start=0,n.insert=0),p=new i.Buf8(n.w_size),i.arraySet(p,e,f-n.w_size,n.w_size,0),e=p,f=n.w_size),l=t.avail_in,c=t.next_in,u=t.input,t.avail_in=f,t.next_in=0,t.input=e,D(n);n.lookahead>=b;){r=n.strstart,a=n.lookahead-(b-1);do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+b-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++}while(--a);n.strstart=r,n.lookahead=b-1,D(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=b-1,n.match_available=0,t.next_in=c,t.input=u,t.avail_in=l,n.wrap=s,d},e.deflateInfo="pako deflate (from Nodeca project)"},2401:t=>{"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},4264:t=>{"use strict";t.exports=function(t,e){var n,r,i,a,o,s,l,c,d,h,u,p,f,m,g,y,v,b,w,x,k,A,T,_,E;n=t.state,r=t.next_in,_=t.input,i=r+(t.avail_in-5),a=t.next_out,E=t.output,o=a-(e-t.avail_out),s=a+(t.avail_out-257),l=n.dmax,c=n.wsize,d=n.whave,h=n.wnext,u=n.window,p=n.hold,f=n.bits,m=n.lencode,g=n.distcode,y=(1<<n.lenbits)-1,v=(1<<n.distbits)-1;t:do{f<15&&(p+=_[r++]<<f,f+=8,p+=_[r++]<<f,f+=8),b=m[p&y];e:for(;;){if(p>>>=w=b>>>24,f-=w,0==(w=b>>>16&255))E[a++]=65535&b;else{if(!(16&w)){if(0==(64&w)){b=m[(65535&b)+(p&(1<<w)-1)];continue e}if(32&w){n.mode=12;break t}t.msg="invalid literal/length code",n.mode=30;break t}x=65535&b,(w&=15)&&(f<w&&(p+=_[r++]<<f,f+=8),x+=p&(1<<w)-1,p>>>=w,f-=w),f<15&&(p+=_[r++]<<f,f+=8,p+=_[r++]<<f,f+=8),b=g[p&v];n:for(;;){if(p>>>=w=b>>>24,f-=w,!(16&(w=b>>>16&255))){if(0==(64&w)){b=g[(65535&b)+(p&(1<<w)-1)];continue n}t.msg="invalid distance code",n.mode=30;break t}if(k=65535&b,f<(w&=15)&&(p+=_[r++]<<f,(f+=8)<w&&(p+=_[r++]<<f,f+=8)),(k+=p&(1<<w)-1)>l){t.msg="invalid distance too far back",n.mode=30;break t}if(p>>>=w,f-=w,k>(w=a-o)){if((w=k-w)>d&&n.sane){t.msg="invalid distance too far back",n.mode=30;break t}if(A=0,T=u,0===h){if(A+=c-w,w<x){x-=w;do{E[a++]=u[A++]}while(--w);A=a-k,T=E}}else if(h<w){if(A+=c+h-w,(w-=h)<x){x-=w;do{E[a++]=u[A++]}while(--w);if(A=0,h<x){x-=w=h;do{E[a++]=u[A++]}while(--w);A=a-k,T=E}}}else if(A+=h-w,w<x){x-=w;do{E[a++]=u[A++]}while(--w);A=a-k,T=E}for(;x>2;)E[a++]=T[A++],E[a++]=T[A++],E[a++]=T[A++],x-=3;x&&(E[a++]=T[A++],x>1&&(E[a++]=T[A++]))}else{A=a-k;do{E[a++]=E[A++],E[a++]=E[A++],E[a++]=E[A++],x-=3}while(x>2);x&&(E[a++]=E[A++],x>1&&(E[a++]=E[A++]))}break}}break}}while(r<i&&a<s);r-=x=f>>3,p&=(1<<(f-=x<<3))-1,t.next_in=r,t.next_out=a,t.avail_in=r<i?i-r+5:5-(r-i),t.avail_out=a<s?s-a+257:257-(a-s),n.hold=p,n.bits=f}},7948:(t,e,n)=>{"use strict";var r=n(4236),i=n(6069),a=n(2869),o=n(4264),s=n(9241),l=0,c=-2,d=1,h=12,u=30,p=852,f=592;function m(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function g(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function y(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=d,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new r.Buf32(p),e.distcode=e.distdyn=new r.Buf32(f),e.sane=1,e.back=-1,l):c}function v(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,y(t)):c}function b(t,e){var n,r;return t&&t.state?(r=t.state,e<0?(n=0,e=-e):(n=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?c:(null!==r.window&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,v(t))):c}function w(t,e){var n,r;return t?(r=new g,t.state=r,r.window=null,(n=b(t,e))!==l&&(t.state=null),n):c}var x,k,A=!0;function T(t){if(A){var e;for(x=new r.Buf32(512),k=new r.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(s(1,t.lens,0,288,x,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;s(2,t.lens,0,32,k,0,t.work,{bits:5}),A=!1}t.lencode=x,t.lenbits=9,t.distcode=k,t.distbits=5}function _(t,e,n,i){var a,o=t.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new r.Buf8(o.wsize)),i>=o.wsize?(r.arraySet(o.window,e,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((a=o.wsize-o.wnext)>i&&(a=i),r.arraySet(o.window,e,n-i,a,o.wnext),(i-=a)?(r.arraySet(o.window,e,n-i,i,0),o.wnext=i,o.whave=o.wsize):(o.wnext+=a,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=a))),0}e.inflateReset=v,e.inflateReset2=b,e.inflateResetKeep=y,e.inflateInit=function(t){return w(t,15)},e.inflateInit2=w,e.inflate=function(t,e){var n,p,f,g,y,v,b,w,x,k,A,E,S,I,P,q,C,j,z,D,O,M,B,F,R=0,L=new r.Buf8(4),N=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return c;(n=t.state).mode===h&&(n.mode=13),y=t.next_out,f=t.output,b=t.avail_out,g=t.next_in,p=t.input,v=t.avail_in,w=n.hold,x=n.bits,k=v,A=b,M=l;t:for(;;)switch(n.mode){case d:if(0===n.wrap){n.mode=13;break}for(;x<16;){if(0===v)break t;v--,w+=p[g++]<<x,x+=8}if(2&n.wrap&&35615===w){n.check=0,L[0]=255&w,L[1]=w>>>8&255,n.check=a(n.check,L,2,0),w=0,x=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&w)<<8)+(w>>8))%31){t.msg="incorrect header check",n.mode=u;break}if(8!=(15&w)){t.msg="unknown compression method",n.mode=u;break}if(x-=4,O=8+(15&(w>>>=4)),0===n.wbits)n.wbits=O;else if(O>n.wbits){t.msg="invalid window size",n.mode=u;break}n.dmax=1<<O,t.adler=n.check=1,n.mode=512&w?10:h,w=0,x=0;break;case 2:for(;x<16;){if(0===v)break t;v--,w+=p[g++]<<x,x+=8}if(n.flags=w,8!=(255&n.flags)){t.msg="unknown compression method",n.mode=u;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=u;break}n.head&&(n.head.text=w>>8&1),512&n.flags&&(L[0]=255&w,L[1]=w>>>8&255,n.check=a(n.check,L,2,0)),w=0,x=0,n.mode=3;case 3:for(;x<32;){if(0===v)break t;v--,w+=p[g++]<<x,x+=8}n.head&&(n.head.time=w),512&n.flags&&(L[0]=255&w,L[1]=w>>>8&255,L[2]=w>>>16&255,L[3]=w>>>24&255,n.check=a(n.check,L,4,0)),w=0,x=0,n.mode=4;case 4:for(;x<16;){if(0===v)break t;v--,w+=p[g++]<<x,x+=8}n.head&&(n.head.xflags=255&w,n.head.os=w>>8),512&n.flags&&(L[0]=255&w,L[1]=w>>>8&255,n.check=a(n.check,L,2,0)),w=0,x=0,n.mode=5;case 5:if(1024&n.flags){for(;x<16;){if(0===v)break t;v--,w+=p[g++]<<x,x+=8}n.length=w,n.head&&(n.head.extra_len=w),512&n.flags&&(L[0]=255&w,L[1]=w>>>8&255,n.check=a(n.check,L,2,0)),w=0,x=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((E=n.length)>v&&(E=v),E&&(n.head&&(O=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,p,g,E,O)),512&n.flags&&(n.check=a(n.check,p,E,g)),v-=E,g+=E,n.length-=E),n.length))break t;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===v)break t;E=0;do{O=p[g+E++],n.head&&O&&n.length<65536&&(n.head.name+=String.fromCharCode(O))}while(O&&E<v);if(512&n.flags&&(n.check=a(n.check,p,E,g)),v-=E,g+=E,O)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===v)break t;E=0;do{O=p[g+E++],n.head&&O&&n.length<65536&&(n.head.comment+=String.fromCharCode(O))}while(O&&E<v);if(512&n.flags&&(n.check=a(n.check,p,E,g)),v-=E,g+=E,O)break t}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;x<16;){if(0===v)break t;v--,w+=p[g++]<<x,x+=8}if(w!==(65535&n.check)){t.msg="header crc mismatch",n.mode=u;break}w=0,x=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=h;break;case 10:for(;x<32;){if(0===v)break t;v--,w+=p[g++]<<x,x+=8}t.adler=n.check=m(w),w=0,x=0,n.mode=11;case 11:if(0===n.havedict)return t.next_out=y,t.avail_out=b,t.next_in=g,t.avail_in=v,n.hold=w,n.bits=x,2;t.adler=n.check=1,n.mode=h;case h:if(5===e||6===e)break t;case 13:if(n.last){w>>>=7&x,x-=7&x,n.mode=27;break}for(;x<3;){if(0===v)break t;v--,w+=p[g++]<<x,x+=8}switch(n.last=1&w,x-=1,3&(w>>>=1)){case 0:n.mode=14;break;case 1:if(T(n),n.mode=20,6===e){w>>>=2,x-=2;break t}break;case 2:n.mode=17;break;case 3:t.msg="invalid block type",n.mode=u}w>>>=2,x-=2;break;case 14:for(w>>>=7&x,x-=7&x;x<32;){if(0===v)break t;v--,w+=p[g++]<<x,x+=8}if((65535&w)!=(w>>>16^65535)){t.msg="invalid stored block lengths",n.mode=u;break}if(n.length=65535&w,w=0,x=0,n.mode=15,6===e)break t;case 15:n.mode=16;case 16:if(E=n.length){if(E>v&&(E=v),E>b&&(E=b),0===E)break t;r.arraySet(f,p,g,E,y),v-=E,g+=E,b-=E,y+=E,n.length-=E;break}n.mode=h;break;case 17:for(;x<14;){if(0===v)break t;v--,w+=p[g++]<<x,x+=8}if(n.nlen=257+(31&w),w>>>=5,x-=5,n.ndist=1+(31&w),w>>>=5,x-=5,n.ncode=4+(15&w),w>>>=4,x-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=u;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;x<3;){if(0===v)break t;v--,w+=p[g++]<<x,x+=8}n.lens[N[n.have++]]=7&w,w>>>=3,x-=3}for(;n.have<19;)n.lens[N[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,B={bits:n.lenbits},M=s(0,n.lens,0,19,n.lencode,0,n.work,B),n.lenbits=B.bits,M){t.msg="invalid code lengths set",n.mode=u;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;q=(R=n.lencode[w&(1<<n.lenbits)-1])>>>16&255,C=65535&R,!((P=R>>>24)<=x);){if(0===v)break t;v--,w+=p[g++]<<x,x+=8}if(C<16)w>>>=P,x-=P,n.lens[n.have++]=C;else{if(16===C){for(F=P+2;x<F;){if(0===v)break t;v--,w+=p[g++]<<x,x+=8}if(w>>>=P,x-=P,0===n.have){t.msg="invalid bit length repeat",n.mode=u;break}O=n.lens[n.have-1],E=3+(3&w),w>>>=2,x-=2}else if(17===C){for(F=P+3;x<F;){if(0===v)break t;v--,w+=p[g++]<<x,x+=8}x-=P,O=0,E=3+(7&(w>>>=P)),w>>>=3,x-=3}else{for(F=P+7;x<F;){if(0===v)break t;v--,w+=p[g++]<<x,x+=8}x-=P,O=0,E=11+(127&(w>>>=P)),w>>>=7,x-=7}if(n.have+E>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=u;break}for(;E--;)n.lens[n.have++]=O}}if(n.mode===u)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=u;break}if(n.lenbits=9,B={bits:n.lenbits},M=s(1,n.lens,0,n.nlen,n.lencode,0,n.work,B),n.lenbits=B.bits,M){t.msg="invalid literal/lengths set",n.mode=u;break}if(n.distbits=6,n.distcode=n.distdyn,B={bits:n.distbits},M=s(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,B),n.distbits=B.bits,M){t.msg="invalid distances set",n.mode=u;break}if(n.mode=20,6===e)break t;case 20:n.mode=21;case 21:if(v>=6&&b>=258){t.next_out=y,t.avail_out=b,t.next_in=g,t.avail_in=v,n.hold=w,n.bits=x,o(t,A),y=t.next_out,f=t.output,b=t.avail_out,g=t.next_in,p=t.input,v=t.avail_in,w=n.hold,x=n.bits,n.mode===h&&(n.back=-1);break}for(n.back=0;q=(R=n.lencode[w&(1<<n.lenbits)-1])>>>16&255,C=65535&R,!((P=R>>>24)<=x);){if(0===v)break t;v--,w+=p[g++]<<x,x+=8}if(q&&0==(240&q)){for(j=P,z=q,D=C;q=(R=n.lencode[D+((w&(1<<j+z)-1)>>j)])>>>16&255,C=65535&R,!(j+(P=R>>>24)<=x);){if(0===v)break t;v--,w+=p[g++]<<x,x+=8}w>>>=j,x-=j,n.back+=j}if(w>>>=P,x-=P,n.back+=P,n.length=C,0===q){n.mode=26;break}if(32&q){n.back=-1,n.mode=h;break}if(64&q){t.msg="invalid literal/length code",n.mode=u;break}n.extra=15&q,n.mode=22;case 22:if(n.extra){for(F=n.extra;x<F;){if(0===v)break t;v--,w+=p[g++]<<x,x+=8}n.length+=w&(1<<n.extra)-1,w>>>=n.extra,x-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;q=(R=n.distcode[w&(1<<n.distbits)-1])>>>16&255,C=65535&R,!((P=R>>>24)<=x);){if(0===v)break t;v--,w+=p[g++]<<x,x+=8}if(0==(240&q)){for(j=P,z=q,D=C;q=(R=n.distcode[D+((w&(1<<j+z)-1)>>j)])>>>16&255,C=65535&R,!(j+(P=R>>>24)<=x);){if(0===v)break t;v--,w+=p[g++]<<x,x+=8}w>>>=j,x-=j,n.back+=j}if(w>>>=P,x-=P,n.back+=P,64&q){t.msg="invalid distance code",n.mode=u;break}n.offset=C,n.extra=15&q,n.mode=24;case 24:if(n.extra){for(F=n.extra;x<F;){if(0===v)break t;v--,w+=p[g++]<<x,x+=8}n.offset+=w&(1<<n.extra)-1,w>>>=n.extra,x-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=u;break}n.mode=25;case 25:if(0===b)break t;if(E=A-b,n.offset>E){if((E=n.offset-E)>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=u;break}E>n.wnext?(E-=n.wnext,S=n.wsize-E):S=n.wnext-E,E>n.length&&(E=n.length),I=n.window}else I=f,S=y-n.offset,E=n.length;E>b&&(E=b),b-=E,n.length-=E;do{f[y++]=I[S++]}while(--E);0===n.length&&(n.mode=21);break;case 26:if(0===b)break t;f[y++]=n.length,b--,n.mode=21;break;case 27:if(n.wrap){for(;x<32;){if(0===v)break t;v--,w|=p[g++]<<x,x+=8}if(A-=b,t.total_out+=A,n.total+=A,A&&(t.adler=n.check=n.flags?a(n.check,f,A,y-A):i(n.check,f,A,y-A)),A=b,(n.flags?w:m(w))!==n.check){t.msg="incorrect data check",n.mode=u;break}w=0,x=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;x<32;){if(0===v)break t;v--,w+=p[g++]<<x,x+=8}if(w!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=u;break}w=0,x=0}n.mode=29;case 29:M=1;break t;case u:M=-3;break t;case 31:return-4;default:return c}return t.next_out=y,t.avail_out=b,t.next_in=g,t.avail_in=v,n.hold=w,n.bits=x,(n.wsize||A!==t.avail_out&&n.mode<u&&(n.mode<27||4!==e))&&_(t,t.output,t.next_out,A-t.avail_out)?(n.mode=31,-4):(k-=t.avail_in,A-=t.avail_out,t.total_in+=k,t.total_out+=A,n.total+=A,n.wrap&&A&&(t.adler=n.check=n.flags?a(n.check,f,A,t.next_out-A):i(n.check,f,A,t.next_out-A)),t.data_type=n.bits+(n.last?64:0)+(n.mode===h?128:0)+(20===n.mode||15===n.mode?256:0),(0===k&&0===A||4===e)&&M===l&&(M=-5),M)},e.inflateEnd=function(t){if(!t||!t.state)return c;var e=t.state;return e.window&&(e.window=null),t.state=null,l},e.inflateGetHeader=function(t,e){var n;return t&&t.state?0==(2&(n=t.state).wrap)?c:(n.head=e,e.done=!1,l):c},e.inflateSetDictionary=function(t,e){var n,r=e.length;return t&&t.state?0!==(n=t.state).wrap&&11!==n.mode?c:11===n.mode&&i(1,e,r,0)!==n.check?-3:_(t,e,r,r)?(n.mode=31,-4):(n.havedict=1,l):c},e.inflateInfo="pako inflate (from Nodeca project)"},9241:(t,e,n)=>{"use strict";var r=n(4236),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(t,e,n,l,c,d,h,u){var p,f,m,g,y,v,b,w,x,k=u.bits,A=0,T=0,_=0,E=0,S=0,I=0,P=0,q=0,C=0,j=0,z=null,D=0,O=new r.Buf16(16),M=new r.Buf16(16),B=null,F=0;for(A=0;A<=15;A++)O[A]=0;for(T=0;T<l;T++)O[e[n+T]]++;for(S=k,E=15;E>=1&&0===O[E];E--);if(S>E&&(S=E),0===E)return c[d++]=20971520,c[d++]=20971520,u.bits=1,0;for(_=1;_<E&&0===O[_];_++);for(S<_&&(S=_),q=1,A=1;A<=15;A++)if(q<<=1,(q-=O[A])<0)return-1;if(q>0&&(0===t||1!==E))return-1;for(M[1]=0,A=1;A<15;A++)M[A+1]=M[A]+O[A];for(T=0;T<l;T++)0!==e[n+T]&&(h[M[e[n+T]]++]=T);if(0===t?(z=B=h,v=19):1===t?(z=i,D-=257,B=a,F-=257,v=256):(z=o,B=s,v=-1),j=0,T=0,A=_,y=d,I=S,P=0,m=-1,g=(C=1<<S)-1,1===t&&C>852||2===t&&C>592)return 1;for(;;){b=A-P,h[T]<v?(w=0,x=h[T]):h[T]>v?(w=B[F+h[T]],x=z[D+h[T]]):(w=96,x=0),p=1<<A-P,_=f=1<<I;do{c[y+(j>>P)+(f-=p)]=b<<24|w<<16|x|0}while(0!==f);for(p=1<<A-1;j&p;)p>>=1;if(0!==p?(j&=p-1,j+=p):j=0,T++,0==--O[A]){if(A===E)break;A=e[n+h[T]]}if(A>S&&(j&g)!==m){for(0===P&&(P=S),y+=_,q=1<<(I=A-P);I+P<E&&!((q-=O[I+P])<=0);)I++,q<<=1;if(C+=1<<I,1===t&&C>852||2===t&&C>592)return 1;c[m=j&g]=S<<24|I<<16|y-d|0}}return 0!==j&&(c[y+j]=A-P<<24|64<<16|0),u.bits=S,0}},8898:t=>{"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},342:(t,e,n)=>{"use strict";var r=n(4236);function i(t){for(var e=t.length;--e>=0;)t[e]=0}var a=256,o=286,s=30,l=15,c=16,d=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],h=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],u=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],p=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],f=new Array(576);i(f);var m=new Array(60);i(m);var g=new Array(512);i(g);var y=new Array(256);i(y);var v=new Array(29);i(v);var b,w,x,k=new Array(s);function A(t,e,n,r,i){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=t&&t.length}function T(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function _(t){return t<256?g[t]:g[256+(t>>>7)]}function E(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function S(t,e,n){t.bi_valid>c-n?(t.bi_buf|=e<<t.bi_valid&65535,E(t,t.bi_buf),t.bi_buf=e>>c-t.bi_valid,t.bi_valid+=n-c):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function I(t,e,n){S(t,n[2*e],n[2*e+1])}function P(t,e){var n=0;do{n|=1&t,t>>>=1,n<<=1}while(--e>0);return n>>>1}function q(t,e,n){var r,i,a=new Array(l+1),o=0;for(r=1;r<=l;r++)a[r]=o=o+n[r-1]<<1;for(i=0;i<=e;i++){var s=t[2*i+1];0!==s&&(t[2*i]=P(a[s]++,s))}}function C(t){var e;for(e=0;e<o;e++)t.dyn_ltree[2*e]=0;for(e=0;e<s;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function j(t){t.bi_valid>8?E(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function z(t,e,n,r){var i=2*e,a=2*n;return t[i]<t[a]||t[i]===t[a]&&r[e]<=r[n]}function D(t,e,n){for(var r=t.heap[n],i=n<<1;i<=t.heap_len&&(i<t.heap_len&&z(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!z(e,r,t.heap[i],t.depth));)t.heap[n]=t.heap[i],n=i,i<<=1;t.heap[n]=r}function O(t,e,n){var r,i,o,s,l=0;if(0!==t.last_lit)do{r=t.pending_buf[t.d_buf+2*l]<<8|t.pending_buf[t.d_buf+2*l+1],i=t.pending_buf[t.l_buf+l],l++,0===r?I(t,i,e):(I(t,(o=y[i])+a+1,e),0!==(s=d[o])&&S(t,i-=v[o],s),I(t,o=_(--r),n),0!==(s=h[o])&&S(t,r-=k[o],s))}while(l<t.last_lit);I(t,256,e)}function M(t,e){var n,r,i,a=e.dyn_tree,o=e.stat_desc.static_tree,s=e.stat_desc.has_stree,c=e.stat_desc.elems,d=-1;for(t.heap_len=0,t.heap_max=573,n=0;n<c;n++)0!==a[2*n]?(t.heap[++t.heap_len]=d=n,t.depth[n]=0):a[2*n+1]=0;for(;t.heap_len<2;)a[2*(i=t.heap[++t.heap_len]=d<2?++d:0)]=1,t.depth[i]=0,t.opt_len--,s&&(t.static_len-=o[2*i+1]);for(e.max_code=d,n=t.heap_len>>1;n>=1;n--)D(t,a,n);i=c;do{n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],D(t,a,1),r=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=r,a[2*i]=a[2*n]+a[2*r],t.depth[i]=(t.depth[n]>=t.depth[r]?t.depth[n]:t.depth[r])+1,a[2*n+1]=a[2*r+1]=i,t.heap[1]=i++,D(t,a,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var n,r,i,a,o,s,c=e.dyn_tree,d=e.max_code,h=e.stat_desc.static_tree,u=e.stat_desc.has_stree,p=e.stat_desc.extra_bits,f=e.stat_desc.extra_base,m=e.stat_desc.max_length,g=0;for(a=0;a<=l;a++)t.bl_count[a]=0;for(c[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<573;n++)(a=c[2*c[2*(r=t.heap[n])+1]+1]+1)>m&&(a=m,g++),c[2*r+1]=a,r>d||(t.bl_count[a]++,o=0,r>=f&&(o=p[r-f]),s=c[2*r],t.opt_len+=s*(a+o),u&&(t.static_len+=s*(h[2*r+1]+o)));if(0!==g){do{for(a=m-1;0===t.bl_count[a];)a--;t.bl_count[a]--,t.bl_count[a+1]+=2,t.bl_count[m]--,g-=2}while(g>0);for(a=m;0!==a;a--)for(r=t.bl_count[a];0!==r;)(i=t.heap[--n])>d||(c[2*i+1]!==a&&(t.opt_len+=(a-c[2*i+1])*c[2*i],c[2*i+1]=a),r--)}}(t,e),q(a,d,t.bl_count)}function B(t,e,n){var r,i,a=-1,o=e[1],s=0,l=7,c=4;for(0===o&&(l=138,c=3),e[2*(n+1)+1]=65535,r=0;r<=n;r++)i=o,o=e[2*(r+1)+1],++s<l&&i===o||(s<c?t.bl_tree[2*i]+=s:0!==i?(i!==a&&t.bl_tree[2*i]++,t.bl_tree[32]++):s<=10?t.bl_tree[34]++:t.bl_tree[36]++,s=0,a=i,0===o?(l=138,c=3):i===o?(l=6,c=3):(l=7,c=4))}function F(t,e,n){var r,i,a=-1,o=e[1],s=0,l=7,c=4;for(0===o&&(l=138,c=3),r=0;r<=n;r++)if(i=o,o=e[2*(r+1)+1],!(++s<l&&i===o)){if(s<c)do{I(t,i,t.bl_tree)}while(0!=--s);else 0!==i?(i!==a&&(I(t,i,t.bl_tree),s--),I(t,16,t.bl_tree),S(t,s-3,2)):s<=10?(I(t,17,t.bl_tree),S(t,s-3,3)):(I(t,18,t.bl_tree),S(t,s-11,7));s=0,a=i,0===o?(l=138,c=3):i===o?(l=6,c=3):(l=7,c=4)}}i(k);var R=!1;function L(t,e,n,i){S(t,0+(i?1:0),3),function(t,e,n,i){j(t),E(t,n),E(t,~n),r.arraySet(t.pending_buf,t.window,e,n,t.pending),t.pending+=n}(t,e,n)}e._tr_init=function(t){R||(function(){var t,e,n,r,i,a=new Array(l+1);for(n=0,r=0;r<28;r++)for(v[r]=n,t=0;t<1<<d[r];t++)y[n++]=r;for(y[n-1]=r,i=0,r=0;r<16;r++)for(k[r]=i,t=0;t<1<<h[r];t++)g[i++]=r;for(i>>=7;r<s;r++)for(k[r]=i<<7,t=0;t<1<<h[r]-7;t++)g[256+i++]=r;for(e=0;e<=l;e++)a[e]=0;for(t=0;t<=143;)f[2*t+1]=8,t++,a[8]++;for(;t<=255;)f[2*t+1]=9,t++,a[9]++;for(;t<=279;)f[2*t+1]=7,t++,a[7]++;for(;t<=287;)f[2*t+1]=8,t++,a[8]++;for(q(f,287,a),t=0;t<s;t++)m[2*t+1]=5,m[2*t]=P(t,5);b=new A(f,d,257,o,l),w=new A(m,h,0,s,l),x=new A(new Array(0),u,0,19,7)}(),R=!0),t.l_desc=new T(t.dyn_ltree,b),t.d_desc=new T(t.dyn_dtree,w),t.bl_desc=new T(t.bl_tree,x),t.bi_buf=0,t.bi_valid=0,C(t)},e._tr_stored_block=L,e._tr_flush_block=function(t,e,n,r){var i,o,s=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<a;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),M(t,t.l_desc),M(t,t.d_desc),s=function(t){var e;for(B(t,t.dyn_ltree,t.l_desc.max_code),B(t,t.dyn_dtree,t.d_desc.max_code),M(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*p[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),i=t.opt_len+3+7>>>3,(o=t.static_len+3+7>>>3)<=i&&(i=o)):i=o=n+5,n+4<=i&&-1!==e?L(t,e,n,r):4===t.strategy||o===i?(S(t,2+(r?1:0),3),O(t,f,m)):(S(t,4+(r?1:0),3),function(t,e,n,r){var i;for(S(t,e-257,5),S(t,n-1,5),S(t,r-4,4),i=0;i<r;i++)S(t,t.bl_tree[2*p[i]+1],3);F(t,t.dyn_ltree,e-1),F(t,t.dyn_dtree,n-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),O(t,t.dyn_ltree,t.dyn_dtree)),C(t),r&&j(t)},e._tr_tally=function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(y[n]+a+1)]++,t.dyn_dtree[2*_(e)]++),t.last_lit===t.lit_bufsize-1},e._tr_align=function(t){S(t,2,3),I(t,256,f),function(t){16===t.bi_valid?(E(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},2292:t=>{"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},6470:t=>{"use strict";function e(t){if("string"!=typeof t)throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function n(t,e){for(var n,r="",i=0,a=-1,o=0,s=0;s<=t.length;++s){if(s<t.length)n=t.charCodeAt(s);else{if(47===n)break;n=47}if(47===n){if(a===s-1||1===o);else if(a!==s-1&&2===o){if(r.length<2||2!==i||46!==r.charCodeAt(r.length-1)||46!==r.charCodeAt(r.length-2))if(r.length>2){var l=r.lastIndexOf("/");if(l!==r.length-1){-1===l?(r="",i=0):i=(r=r.slice(0,l)).length-1-r.lastIndexOf("/"),a=s,o=0;continue}}else if(2===r.length||1===r.length){r="",i=0,a=s,o=0;continue}e&&(r.length>0?r+="/..":r="..",i=2)}else r.length>0?r+="/"+t.slice(a+1,s):r=t.slice(a+1,s),i=s-a-1;a=s,o=0}else 46===n&&-1!==o?++o:o=-1}return r}var r={resolve:function(){for(var t,r="",i=!1,a=arguments.length-1;a>=-1&&!i;a--){var o;a>=0?o=arguments[a]:(void 0===t&&(t=process.cwd()),o=t),e(o),0!==o.length&&(r=o+"/"+r,i=47===o.charCodeAt(0))}return r=n(r,!i),i?r.length>0?"/"+r:"/":r.length>0?r:"."},normalize:function(t){if(e(t),0===t.length)return".";var r=47===t.charCodeAt(0),i=47===t.charCodeAt(t.length-1);return 0!==(t=n(t,!r)).length||r||(t="."),t.length>0&&i&&(t+="/"),r?"/"+t:t},isAbsolute:function(t){return e(t),t.length>0&&47===t.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var t,n=0;n<arguments.length;++n){var i=arguments[n];e(i),i.length>0&&(void 0===t?t=i:t+="/"+i)}return void 0===t?".":r.normalize(t)},relative:function(t,n){if(e(t),e(n),t===n)return"";if((t=r.resolve(t))===(n=r.resolve(n)))return"";for(var i=1;i<t.length&&47===t.charCodeAt(i);++i);for(var a=t.length,o=a-i,s=1;s<n.length&&47===n.charCodeAt(s);++s);for(var l=n.length-s,c=o<l?o:l,d=-1,h=0;h<=c;++h){if(h===c){if(l>c){if(47===n.charCodeAt(s+h))return n.slice(s+h+1);if(0===h)return n.slice(s+h)}else o>c&&(47===t.charCodeAt(i+h)?d=h:0===h&&(d=0));break}var u=t.charCodeAt(i+h);if(u!==n.charCodeAt(s+h))break;47===u&&(d=h)}var p="";for(h=i+d+1;h<=a;++h)h!==a&&47!==t.charCodeAt(h)||(0===p.length?p+="..":p+="/..");return p.length>0?p+n.slice(s+d):(s+=d,47===n.charCodeAt(s)&&++s,n.slice(s))},_makeLong:function(t){return t},dirname:function(t){if(e(t),0===t.length)return".";for(var n=t.charCodeAt(0),r=47===n,i=-1,a=!0,o=t.length-1;o>=1;--o)if(47===(n=t.charCodeAt(o))){if(!a){i=o;break}}else a=!1;return-1===i?r?"/":".":r&&1===i?"//":t.slice(0,i)},basename:function(t,n){if(void 0!==n&&"string"!=typeof n)throw new TypeError('"ext" argument must be a string');e(t);var r,i=0,a=-1,o=!0;if(void 0!==n&&n.length>0&&n.length<=t.length){if(n.length===t.length&&n===t)return"";var s=n.length-1,l=-1;for(r=t.length-1;r>=0;--r){var c=t.charCodeAt(r);if(47===c){if(!o){i=r+1;break}}else-1===l&&(o=!1,l=r+1),s>=0&&(c===n.charCodeAt(s)?-1==--s&&(a=r):(s=-1,a=l))}return i===a?a=l:-1===a&&(a=t.length),t.slice(i,a)}for(r=t.length-1;r>=0;--r)if(47===t.charCodeAt(r)){if(!o){i=r+1;break}}else-1===a&&(o=!1,a=r+1);return-1===a?"":t.slice(i,a)},extname:function(t){e(t);for(var n=-1,r=0,i=-1,a=!0,o=0,s=t.length-1;s>=0;--s){var l=t.charCodeAt(s);if(47!==l)-1===i&&(a=!1,i=s+1),46===l?-1===n?n=s:1!==o&&(o=1):-1!==n&&(o=-1);else if(!a){r=s+1;break}}return-1===n||-1===i||0===o||1===o&&n===i-1&&n===r+1?"":t.slice(n,i)},format:function(t){if(null===t||"object"!=typeof t)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof t);return function(t,e){var n=e.dir||e.root,r=e.base||(e.name||"")+(e.ext||"");return n?n===e.root?n+r:n+"/"+r:r}(0,t)},parse:function(t){e(t);var n={root:"",dir:"",base:"",ext:"",name:""};if(0===t.length)return n;var r,i=t.charCodeAt(0),a=47===i;a?(n.root="/",r=1):r=0;for(var o=-1,s=0,l=-1,c=!0,d=t.length-1,h=0;d>=r;--d)if(47!==(i=t.charCodeAt(d)))-1===l&&(c=!1,l=d+1),46===i?-1===o?o=d:1!==h&&(h=1):-1!==o&&(h=-1);else if(!c){s=d+1;break}return-1===o||-1===l||0===h||1===h&&o===l-1&&o===s+1?-1!==l&&(n.base=n.name=0===s&&a?t.slice(1,l):t.slice(s,l)):(0===s&&a?(n.name=t.slice(1,o),n.base=t.slice(1,l)):(n.name=t.slice(s,o),n.base=t.slice(s,l)),n.ext=t.slice(o,l)),s>0?n.dir=t.slice(0,s-1):a&&(n.dir="/"),n},sep:"/",delimiter:":",win32:null,posix:null};r.posix=r,t.exports=r},2352:t=>{"use strict";const e=(t,e)=>function(...n){return new(0,e.promiseModule)(((r,i)=>{e.multiArgs?n.push(((...t)=>{e.errorFirst?t[0]?i(t):(t.shift(),r(t)):r(t)})):e.errorFirst?n.push(((t,e)=>{t?i(t):r(e)})):n.push(r),t.apply(this,n)}))};t.exports=(t,n)=>{n=Object.assign({exclude:[/.+(Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},n);const r=typeof t;if(null===t||"object"!==r&&"function"!==r)throw new TypeError(`Expected \`input\` to be a \`Function\` or \`Object\`, got \`${null===t?"null":r}\``);const i=t=>{const e=e=>"string"==typeof e?t===e:e.test(t);return n.include?n.include.some(e):!n.exclude.some(e)};let a;a="function"===r?function(...r){return n.excludeMain?t(...r):e(t,n).apply(this,r)}:Object.create(Object.getPrototypeOf(t));for(const r in t){const o=t[r];a[r]="function"==typeof o&&i(r)?e(o,n):o}return a}},9509:(t,e,n)=>{var r=n(8764),i=r.Buffer;function a(t,e){for(var n in t)e[n]=t[n]}function o(t,e,n){return i(t,e,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(a(r,e),e.Buffer=o),o.prototype=Object.create(i.prototype),a(i,o),o.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,n)},o.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=i(t);return void 0!==e?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},o.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},o.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},4189:(t,e,n)=>{var r=n(9509).Buffer;function i(t,e){this._block=r.alloc(t),this._finalSize=e,this._blockSize=t,this._len=0}i.prototype.update=function(t,e){"string"==typeof t&&(e=e||"utf8",t=r.from(t,e));for(var n=this._block,i=this._blockSize,a=t.length,o=this._len,s=0;s<a;){for(var l=o%i,c=Math.min(a-s,i-l),d=0;d<c;d++)n[l+d]=t[s+d];s+=c,(o+=c)%i==0&&this._update(n)}return this._len+=a,this},i.prototype.digest=function(t){var e=this._len%this._blockSize;this._block[e]=128,this._block.fill(0,e+1),e>=this._finalSize&&(this._update(this._block),this._block.fill(0));var n=8*this._len;if(n<=4294967295)this._block.writeUInt32BE(n,this._blockSize-4);else{var r=(4294967295&n)>>>0,i=(n-r)/4294967296;this._block.writeUInt32BE(i,this._blockSize-8),this._block.writeUInt32BE(r,this._blockSize-4)}this._update(this._block);var a=this._hash();return t?a.toString(t):a},i.prototype._update=function(){throw new Error("_update must be implemented by subclass")},t.exports=i},8336:(t,e,n)=>{var r=n(5717),i=n(4189),a=n(9509).Buffer,o=[1518500249,1859775393,-1894007588,-899497514],s=new Array(80);function l(){this.init(),this._w=s,i.call(this,64,56)}function c(t){return t<<5|t>>>27}function d(t){return t<<30|t>>>2}function h(t,e,n,r){return 0===t?e&n|~e&r:2===t?e&n|e&r|n&r:e^n^r}r(l,i),l.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},l.prototype._update=function(t){for(var e,n=this._w,r=0|this._a,i=0|this._b,a=0|this._c,s=0|this._d,l=0|this._e,u=0;u<16;++u)n[u]=t.readInt32BE(4*u);for(;u<80;++u)n[u]=(e=n[u-3]^n[u-8]^n[u-14]^n[u-16])<<1|e>>>31;for(var p=0;p<80;++p){var f=~~(p/20),m=c(r)+h(f,i,a,s)+l+n[p]+o[f]|0;l=s,s=a,a=d(i),i=r,r=m}this._a=r+this._a|0,this._b=i+this._b|0,this._c=a+this._c|0,this._d=s+this._d|0,this._e=l+this._e|0},l.prototype._hash=function(){var t=a.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},t.exports=l},986:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.doc_cheatsheet=void 0,e.doc_cheatsheet={id:"cheatsheet",name:"Cheat Sheet",title:"Cheat Sheet",content:'\n\t<div class="flex">\n\t<table class="nicetable">\n\t<tr><th><a href="?doc=/language/expressions/literals">literals</a></th><th>example</th></tr>\n\t<tr><td><a href="?doc=/language/expressions/literals/integers">integer</a></td><td><code>42</code></td></tr>\n\t<tr><td><a href="?doc=/language/expressions/literals/reals">real</a></td><td><code>6.62607015e-34</code></td></tr>\n\t<tr><td><a href="?doc=/language/expressions/literals/strings">string</a></td><td><code>"This is a test.\\nNext line."</code></td></tr>\n\t<tr><td>range</td><td><code>20:30</code></td></tr>\n\t<tr><td><a href="?doc=/language/expressions/literals/arrays">array</a></td><td><code>["foo", 42, false];</code></td></tr>\n\t<tr><td><a href="?doc=/language/expressions/literals/dictionaries">dictionary</a></td><td><code>{foo: 42, "bar-bar": false}</code></td></tr>\n\t</table>\n\t<table class="nicetable">\n\t<tr><th><a href="?doc=/language/statements">control structures</a></th><th>example / syntax</th></tr>\n\t<tr><td><a href="?doc=/language/statements/if-then-else">condition</a></td><td><code>if i == 0 then { ... } else { ... }</code></td></tr>\n\t<tr><td><a href="?doc=/language/statements/for-loops">for-loop</a></td><td><code>for var i in 0:n do { ... }</code></td></tr>\n\t<tr><td><a href="?doc=/language/statements/while-do-loops">while-do-loop</a></td><td><code>while not happy do { ... }</code></td></tr>\n\t<tr><td><a href="?doc=/language/statements/do-while-loops">do-while-loop</a></td><td><code>do { ... } while not happy;</code></td></tr>\n\t<tr><td><a href="?doc=/language/statements/try-catch">try-catch-block</a></td><td><code>try { ... } catch var ex do { ... }</code></td></tr>\n\t</table>\n\t<table class="nicetable">\n\t<tr><th><a href="?doc=/language/syntax/comments">comments</a></th><th>example</th></tr>\n\t<tr><td>line comment</td><td><code># comment</code></td></tr>\n\t<tr><td>range comment</td><td><code>#* comment *#</code></td></tr>\n\t</table>\n\t<table class="nicetable">\n\t<tr><th><a href="?doc=/language/declarations/variables">variables</a></th><th>example</th></tr>\n\t<tr><td>declare variable(s)</td><td><code>var a, b;</code></td></tr>\n\t<tr><td>declare and initialize</td><td><code>var c = 7;</code></td></tr>\n\t</table>\n\t<table class="nicetable">\n\t<tr><th>functions</th><th>example / syntax</th></tr>\n\t<tr><td><a href="?doc=/language/declarations/functions">function</a> or <a href="?doc=/language/declarations/classes">method</a></td><td><code>function myfunc (...) { ... }</code></td></tr>\n\t<tr><td><a href="?doc=/language/expressions/literals/anonymous-functions">lambda function</a></td><td><code>function (...) { ... }</code></td></tr>\n\t<tr><td>enclosing <a href="?doc=/language/expressions/literals/anonymous-functions">lambda function</a></td><td><code>function [...] (...) { ... }</code></td></tr>\n\t</table>\n\t<table class="nicetable">\n\t<tr><th>namespaces</th><th>example / syntax</th></tr>\n\t<tr><td>define <a href="?doc=/language/declarations/namespaces">namespace</a></td><td><code>namespace myspace { ... }</code></td></tr>\n\t<tr><td><a href="?doc=/language/directives/use">import</a> specific name(s)</td><td><code>from myspace use foo, bar;</code></td></tr>\n\t<tr><td><a href="?doc=/language/directives/use">import</a> whole namespace</td><td><code>use namespace myspace;</code></td></tr>\n\t</table>\n\t<table class="nicetable">\n\t<tr><th><a href="?doc=/library">standard library</a></th><th>topic</th></tr>\n\t<tr><td><a href="?doc=/library/core">core functions</a></td><td>messages, time, errors, files, events</td></tr>\n\t<tr><td><a href="?doc=/library/math">math functions</a></td><td>e.g., sine and square root</td></tr>\n\t<tr><td><a href="?doc=/library/turtle">turtle graphics</a></td><td>simple graphics</td></tr>\n\t<tr><td><a href="?doc=/library/canvas">canvas graphics</a></td><td>powerful 2D graphics</td></tr>\n\t</table>\n\t<table class="nicetable">\n\t<tr><th><a href="?doc=/language/declarations/classes">classes</a></th><th>example / syntax</th></tr>\n\t<tr><td>define class</td><td><code>class MyStuff { ... }</code></td></tr>\n\t<tr><td>define subclass</td><td><code>class MyCoolStuff : MyStuff { ... }</code></td></tr>\n\t<tr><td>constructor</td><td><code>constructor (...) { ... }</code></td></tr>\n\t<tr><td>constructor calling super class</td><td><code>constructor (...) : super(...) { ... }</code></td></tr>\n\t<tr><td>visibility sections</td><td><code>public:</code><br/><code>protected:</code><br/><code>private:</code></td></tr>\n\t<tr><td>class-related keywords</td><td><code>static</code>, <code>this</code>, <code>super</code></td></tr>\n\t</table>\n\t<table class="nicetable">\n\t<tr><th><a href="?doc=/language/types">data type</a></th><th>values</th></tr>\n\t<tr><td><a href="?doc=/language/types/null"><code>Null</code></a></td><td><code>null</code></td></tr>\n\t<tr><td><a href="?doc=/language/types/boolean"><code>Boolean</code></a></td><td><code>true</code>, <code>false</code></td></tr>\n\t<tr><td><a href="?doc=/language/types/integer"><code>Integer</code></a></td><td>signed 32-bit integers</td></tr>\n\t<tr><td><a href="?doc=/language/types/real"><code>Real</code></a></td><td>floating point numbers</td></tr>\n\t<tr><td><a href="?doc=/language/types/string"><code>String</code></a></td><td>text</td></tr>\n\t<tr><td><a href="?doc=/language/types/array"><code>Array</code></a></td><td>ordered container with integer keys</td></tr>\n\t<tr><td><a href="?doc=/language/types/dictionary"><code>Dictionary</code></a></td><td>associative container with string keys</td></tr>\n\t<tr><td><a href="?doc=/language/types/function"><code>Function</code></a></td><td>function, lambda function, method</td></tr>\n\t<tr><td><a href="?doc=/language/types/range"><code>Range</code></a></td><td>range of integers, <code>from:to</code></td></tr>\n\t<tr><td><a href="?doc=/language/types/type"><code>Type</code></a></td><td>description of a type</td></tr>\n\t</table>\n\t<table class="nicetable">\n\t<tr><th><a href="?doc=/language/expressions/precedence">operator</a></th><th>meaning</th></tr>\n\t<tr><td><a href="?doc=/language/expressions/binary-operators/addition"><code>+</code></a></td><td>addition</td></tr>\n\t<tr><td><a href="?doc=/language/expressions/binary-operators/subtraction"><code>-</code></a></td><td>negation, subtraction</td></tr>\n\t<tr><td><a href="?doc=/language/expressions/binary-operators/multiplication"><code>*</code></a></td><td>multiplication</td></tr>\n\t<tr><td><a href="?doc=/language/expressions/binary-operators/real-division"><code>/</code></a></td><td>real division</td></tr>\n\t<tr><td><a href="?doc=/language/expressions/binary-operators/integer-division"><code>//</code></a></td><td>integer division</td></tr>\n\t<tr><td><a href="?doc=/language/expressions/binary-operators/modulo"><code>%</code></a></td><td>modulo</td></tr>\n\t<tr><td><a href="?doc=/language/expressions/binary-operators/power"><code>^</code></a></td><td>power</td></tr>\n\t<tr><td><a href="?doc=/language/expressions/binary-operators/equality"><code>==</code>, <code>!=</code></a></td><td>equality</td></tr>\n\t<tr><td><a href="?doc=/language/expressions/binary-operators/order"><code>&lt;</code>, <code>&lt;=</code>, <code>&gt;</code>, <code>&gt;=</code></a></td><td>order comparison</td></tr>\n\t<tr><td><a href="?doc=/language/expressions/unary-operators/not"><code>not</code></a></td><td>logical or bitwise not</td></tr>\n\t<tr><td><a href="?doc=/language/expressions/binary-operators/and"><code>and</code></a></td><td>logical or bitwise and</td></tr>\n\t<tr><td><a href="?doc=/language/expressions/binary-operators/or"><code>or</code></a></td><td>logical or bitwise or</td></tr>\n\t<tr><td><a href="?doc=/language/expressions/binary-operators/xor"><code>xor</code></a></td><td>logical or bitwise exclusive or</td></tr>\n\t</table>\n\t</div>\n',children:[]}},5675:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.doc_concepts=void 0,e.doc_concepts={id:"concepts",name:"Core Concepts",title:"Core Concepts of the TScript Programming Language",content:'\n\t<p>\n\tThe TScript language is carefully designed with the goal to create\n\tan ideal programming language for programming beginners. This\n\toverarching goal encompasses a number of sub-goals and design\n\tprinciples.\n\t<ul>\n\t<li>\n\t\t<b>Visual Tasks.</b>\n\t\tProgramming beginners are new to programming, but they are\n\t\tusually not new to computers. Their expectation is to program\n\t\tthings they experienced before, in particular graphical user\n\t\tinterfaces. They may quickly lose interest when being confronted\n\t\twith writing console programs they can hardly relate to.\n\t\tTherefore TScript comes with easy-to-use graphics programming\n\t\tlibraries: an extremely simple one for turtle graphics, and a\n\t\tlittle more advanced one featuring a canvas for drawing and for\n\t\treceiving user input.\n\t</li>\n\t<li>\n\t\t<b>Avoid error-prone constructions.</b>\n\t\tSurprisingly many programming languages carry a legacy of\n\t\tconstructions around that are known to be problematic in one way\n\t\tor another, going far beyond the infamous\n\t\t<code class="code">goto</code> statement.\n\t\tExamples are macros in C++, the division operator of Python 2,\n\t\tJavascript\'s default behavior of turning assignments to mistyped\n\t\tvariables into globals, obscure scoping rules, and improper\n\t\tinformation hiding in classes. TScript aims to be strict about\n\t\tsuch issues, in the conviction that this is the best way to\n\t\tavoid many small but hard to find errors that will frustrate\n\t\tbeginners.\n\t</li>\n\t<li>\n\t\t<b>Clean syntax.</b>\n\t\tThe C-family of programming languages is known for its rather\n\t\tverbose syntax and for its extensive use of special characters\n\t\tin expressions. For example, the statement\n\t\t\t<div>\n\t\t\t\t<code class="code">for (i=0; a[i]; i++) *a[i] = *(b++) = -(c++);</code>\n\t\t\t</div>\n\t\tmakes perfect sense in C, but it is hard to parse, not only for\n\t\tbeginners.\n\t\tWhile TScript builds on the expressiveness of operators, it\n\t\ttries to avoid some of the complications of C. First of all,\n\t\tthere are no pointers, and hence no pointer arithmetics. Second,\n\t\tassignments cannot be chained because they do not return a\n\t\tvalue, which enforces a clean separation of tests and side\n\t\teffects. Third, core language constructs like conditions and\n\t\tloops use a rather keyword-rich and verbose syntax without\n\t\tparentheses.\n\t</li>\n\t<li>\n\t\t<b>Better fail than do the wrong thing.</b>\n\t\tSometimes it is convenient to handle inputs gracefully. For\n\t\texample, when expecting an integer, one may accept a string\n\t\trepresenting an integer as a decimal number. Another example is\n\t\tthe implicit conversion of integers and even strings to\n\t\tbooleans, which allows such types to appear in conditions.\n\t\tTScript largely disallows such code. The only implicit\n\t\tconversions are between integers and reals holding actual\n\t\tinteger values, and conversions to string when printing. The\n\t\treason is that implicit conversions can be really irritating, in\n\t\tparticular for beginners, in case that things go wrong and the\n\t\tconversion is unintended. Then the better solution is to demand\n\t\tan explicit cast and to fail otherwise with a clear error\n\t\tmessage that points the programmer to the problem.\n\t</li>\n\t<li>\n\t\t<b>Implementation of all standard concepts.</b> TScript is a\n\t\tpretty complete imperative and object oriented programming\n\t\tlanguage, in the sense that it covers all the standard\n\t\tconstructions like conditionals, loops, functions, classes,\n\t\tnamespaces, and the like. This is important since its aim is to\n\t\tprepare the programmer for work with other languages designed\n\t\tfor more serious use. There are some exception to the above\n\t\trule, i.e., TScript does not come with a switch-case construct,\n\t\tit does not have a ternary operator, and it does not allow for\n\t\toperator overloading.\n\t</li>\n\t</ul>\n\t</p>\n\t<p>\n\tThe following documents should be helpful for readers with some\n\tprogramming experience to get an quick overview of tscript:\n\t<ul>\n\t<li><a href="?doc=/cheatsheet">Cheat Sheet</a></li>\n\t<li><a href="?doc=/concepts/overview">The Language at a Glance</a></li>\n\t<li><a href="?doc=/concepts/design">Design Decisions</a></li>\n\t<li><a href="?doc=/concepts/arithmetics">Arithmetics</a></li>\n\t</ul>\n\t</p>\n',children:[{id:"overview",name:"The Language at a Glance",title:"The Language at a Glance",content:'\n\t\t<p>\n\t\tTScript is an imperative and object oriented language. In many\n\t\taspects it has similarities to "scripting" languages like Python\n\t\tand Javascript: code is executed as it is encountered, so there\n\t\tis no explicit entry point, variables are untyped, they\n\t\treference values instead of containing them, and memory is fully\n\t\tmanaged.\n\t\t</p>\n\t\t<p>\n\t\tFor a closer look, let\'s start with an example:\n\t\t<tscript>\n\t\t\tfor var i in 0:10 do print(93 - 8 * i);\n\t\t</tscript>\n\t\tThis line reveals a lot about the syntax of the language. First\n\t\tof all, it is semicolon delimited. Variables are declared with\n\t\tthe <keyword>var</keyword> keyword. There is a special\n\t\t<a href="?doc=/language/types/range">range</a>\n\t\ttype, objects of which are created with the colon operator.\n\t\tFunction calls and computations are denoted in the usual way.\n\t\tHowever, the <a href="?doc=/language/statements/for-loops">for-loop</a>\n\t\tis rather verbose, involving the keywords <keyword>for</keyword>,\n\t\t<keyword>in</keyword>, and <keyword>do</keyword>.\n\t\t</p>\n\t\t<p>\n\t\t<a href="?doc=/language/declarations/functions">Functions</a>\n\t\tare declared with the <keyword>function</keyword>\n\t\tkeyword:\n\t\t<tscript>\n\t\t\tfunction factorial(n)\n\t\t\t{\n\t\t\t\tif n == 0 then return 1;\n\t\t\t\telse return n * factorial(n - 1);\n\t\t\t}\n\t\t\tprint(factorial(10));   # 3628800\n\t\t</tscript>\n\t\tThe maybe only surprise here is the keyword\n\t\t<keyword>then</keyword>, which is another example of the verbose\n\t\tsyntax when it comes to control structures. It is also possible\n\t\tto assign functions to variables and to define\n\t\t<a href="?doc=/language/expressions/literals/anonymous-functions">anonymous (lambda) functions enclosing variables</a>.\n\t\t</p>\n\t\t<p>\n\t\tLike JSON, the TScript language knows the types\n\t\t<a href="?doc=/language/types/null">null</a>,\n\t\t<a href="?doc=/language/types/boolean">boolean</a>,\n\t\t<a href="?doc=/language/types/real">real</a> (number in JSON),\n\t\t<a href="?doc=/language/types/string">string</a>,\n\t\t<a href="?doc=/language/types/null">array</a>, and\n\t\t<a href="?doc=/language/types/dictionary">dictionary</a> (object in JSON),\n\t\tand JSON expressions are valid literals. In addition,\n\t\tTScript has a signed 32bit\n\t\t<a href="?doc=/language/types/integer">integer</a> type, a\n\t\t<a href="?doc=/language/types/range">range</a> type, a\n\t\t<a href="?doc=/language/types/function">function</a> type, and a\n\t\t<a href="?doc=/language/types/type">type</a> type. Arrays are\n\t\tdenoted with square brackets and dictionaries with curly braces.\n\t\tDictionary keys can be identifiers or strings:\n\t\t<tscript>\n            var n = null;                                       # null\n            var i = 25;                                         # an integer\n            var r = 2.0;                                        # a real\n            var b = false;                                      # a boolean\n            var s = "string";                                   # a string\n            var g = 1:10;                                       # a range\n            function add(a, b) { return a+b; }; var f = add;    # a function\n\t\t\tvar a = [2, 3, 5, 7, 11];                           # an array\n\t\t\tvar d = {name: "John", age: 25};                    #* a dictionary *#\n\t\t</tscript>\n\t\tThe above example also demonstrates line and block\n\t\t<a href="?doc=/language/syntax/comments">comments</a>.\n\t\t</p>\n\t\t<p>\n\t\tThe built-in types can be extended by declaring\n\t\t<a href="?doc=/language/declarations/classes">classes</a>:\n\t\t<tscript>\n\t\t\tclass Person\n\t\t\t{\n\t\t\tprivate:\n\t\t\t\tstatic var m_free_id = 0;\n\t\t\t\tvar m_id;\n\t\t\t\tvar m_name;\n\t\t\t\tvar m_age;\n\n\t\t\tpublic:\n\t\t\t\tconstructor(name, age)\n\t\t\t\t{\n\t\t\t\t\tm_name = name;\n\t\t\t\t\tm_age = age;\n\t\t\t\t\tm_id = m_free_id;\n\t\t\t\t\tm_free_id += 1;\n\t\t\t\t}\n\n\t\t\t\tfunction name()\n\t\t\t\t{ return m_name; }\n\n\t\t\t\tfunction age()\n\t\t\t\t{ return m_age; }\n\n\t\t\t\tfunction id()\n\t\t\t\t{ return m_id; }\n\t\t\t}\n\n\n\t\t\tvar name = "Dennis";\n\t\t\tvar age = 85;\n\t\t\tvar p = Person(name, age);  # p is now an instance of the data type Person\n\t\t</tscript>\n\t\tIn contrast to many other scripting languages, TScript\n\t\tconstructors are easily recognizable as such, and classes\n\t\tsupport proper information hiding.\n\t\t</p>\n\t\t<p>\n\t\tFurther features of interest are\n\t\t<a href="?doc=/language/declarations/namespaces">namespaces</a> and\n\t\tcorresponding <a href="?doc=/language/directives/use">use directives</a>,\n\t\tas well as <a href="?doc=/language/statements/throw">exceptions</a>.\n\t\tFor a more complete and more formal overview of the language please\n\t\trefer to the <a href="?doc=/language">reference documentation</a>.\n\t\t</p>\n\t\t<p>\n\t\tAn important aspect of TScript as a teaching language is the closed\n\t\tand rather limited universe it lives in. The language is not designed\n\t\tas a general purpose tool, capable of interacting with arbitrary\n\t\toperating systems and libraries. Instead, its scope is limited to a\n\t\tvery specific and highly standardized working environment. It comes\n\t\twith easily accessible <a href="?doc=/library/turtle">turtle graphics</a>\n\t\tand <a href="?doc=/library/canvas">canvas graphics</a> modules. While the\n\t\tformer is ideal for visual demonstrations of programming concepts\n\t\tlike loops and recursion, the latter allows for the creating of all\n\t\tkinds of (classic) games. Check the <a href="?doc=/examples">examples</a>\n\t\tfor demonstrations.\n\t\t</p>\n\t',children:[]},{id:"design",name:"Design Decisions",title:"Design Decisions",content:'\n\t\t<p>\n\t\tMost programming languages in common use exist for an extended\n\t\tperiod of time and underwent significant changes. Such changes\n\t\tregularly aim to fix design bugs introduced early on. This naturally\n\t\tcreates a tension between designing a proper solution and avoiding\n\t\tto break existing code. Therefore many such fixes are rather newly\n\t\tdesigned workarounds. The main claim to fame of TScript is that its\n\t\tinitial design is already very well crafted, which will hopefully\n\t\tavoid the need for larger changes in the future. The most important\n\t\tfactor making this possible is that the language is very limited in\n\t\tscope, which greatly reduces the need for future changes.\n\t\t</p>\n\t\t<p>\n\t\tStarting with a clean design is only possible by building on prior\n\t\t(positive and negative) experience. TScript combines well-designed\n\t\tconcepts from a range of existing programming languages &mdash; and\n\t\tsure, the decision which concepts are well-designed or not is a\n\t\tsomewhat subjective one. This affects its basic syntax, the level\n\t\tof abstraction of many concepts, as well as a number of specific\n\t\tbut important design decisions, some of which are listed in the\n\t\tfollowing.\n\t\t</p>\n\t\t<ul>\n\t\t\t<li>\n\t\t\t\tThe family of C-style languages has contributed\n\t\t\t\tinsignificance of whitespace, the semicolon as a delimiter,\n\t\t\t\tbraces as block markers, and scoping rules for variables,\n\t\t\t\tblock comments, and many minor details like the use of\n\t\t\t\tsquare brackets for variables enclosed by lambda functions.\n\t\t\t\tMost class-related features like proper information hiding,\n\t\t\t\ta fixed class layout and static members are inspired by C++\n\t\t\t\tand Java.\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\tAutomatic memory management, runtime typing, variables being\n\t\t\t\treferences to values, and the absence of an explicit entry\n\t\t\t\tpoint are very common concepts in high-level scripting\n\t\t\t\tlanguages.\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\tTScript is fully compatible with\n\t\t\t\t<a target="_blank" href="http://json.org/">JSON</a>, in the\n\t\t\t\tsense that every JSON expression is a legal TScript constant.\n\t\t\t\tJSON lays the foundation for the system of TScript core types.\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\tPython has contributed named parameters and separate operators\n\t\t\t\tfor integer and floating point division, and Matlab and NumPy\n\t\t\t\thave inspired array slicing and hence the Range type.\n\t\t\t\tTScript\'s keyword-rich syntax for expressing conditionals and\n\t\t\t\tloops without the need to enclose conditions into parentheses\n\t\t\t\tis not taken directly from a specific language, but it is\n\t\t\t\tinspired by the simplicity of Python syntax.\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\tAnonymous functions and closures are inspired by Javascript\'s\n\t\t\t\tpowerful event handling abilities, although the mechanism of\n\t\t\t\tenclosing values instead of variables is a bit different.\n\t\t\t</li>\n\t\t</ul>\n\t\t<p>\n\t\tIt is understood that many of these features are also present in other\n\t\tlanguages and that it is near impossible to give proper credit to every\n\t\tprogramming language out there.\n\t\t</p>\n\t',children:[]},{id:"arithmetics",name:"Arithmetics",title:"Arithmetics",content:'\n\t\t<p>\n\t\tTScript has two fundamental arithmetic types: Integer and Real.\n\t\tAt first glance, they seem to be rather similar, to the extent\n\t\tthat one may conclude that Integers are superfluous, since their\n\t\tentire range is covered by Reals. Indeed, most functions and\n\t\toperators that are designed for one type accept both types, and\n\t\talso mixed types in case of multiple arguments.\n\t\t</p>\n\t\t<p>\n\t\tHowever, merging the two types would clearly violate the\n\t\t<a target="_blank" href="https://en.wikipedia.org/wiki/Single_responsibility_principle">single responsibility principle</a>.\n\t\tThis is because integers and reals have very different (primary)\n\t\troles in the core language: integers act as array indices, while\n\t\treals are numeric values.\n\t\t</p>\n\t\t<p>\n\t\tIt turns out that array indexing requires its own arithmetics,\n\t\te.g, for implementing a two-dimensional grid with an array.\n\t\tThink of a matrix stored in\n\t\t<a target="_blank" href="https://en.wikipedia.org/wiki/Matrix_representation">row-major format</a>\n\t\tas an example. For a matrix of width <i>w</i> and height <i>h</i>\n\t\tand for zero-based column and row indices <i>(x,y)</i>, the index\n\t\tof the corresponding array item is\n\t\t<code class="code">i=x+w*y</code>. The operation is inverted by\n\t\t<code class="code">x=i%w</code> and\n\t\t<code class="code">y=i//w</code>, which justifies the way\n\t\tinteger division and modulo are defined. By induction, this\n\t\targument extends to <i>n</i>-dimensional grids.\n        <br>\n        <img style="display: block; margin: 1em auto;" src="data:image/png;base64,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"/>\n\t\t</p>\n\t\t<p>\n\t\tThe differences between integer and floating point arithmetics\n\t\tcan be broken down to three points:\n\t\t<ul>\n\t\t\t<li>division,</li>\n\t\t\t<li>overflow (and underflow), and</li>\n\t\t\t<li>rounding errors.</li>\n\t\t</ul>\n\t\tOverflow is often considered a minor issue, at least if it is\n\t\tclear a-priori that the program will not have to handle very\n\t\tlarge values. Rounding errors can cause\n\t\t<a target="_blank" href="https://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html">problems</a>\n\t\tin floating point arithmetics, but it tends to occur in contexts\n\t\twhere it is clear that we deal with reals, and experienced\n\t\tprogrammers of numerically sensitive algorithms are usually\n\t\taware of it. Division is problematic as follows:\n\t\t<tscript>\n\t\t\tfunction compute(a, b)\n\t\t\t{ return a / b; }\n\n\t\t\tprint(compute(1, 3));       # prints 0.3333...\n\t\t\tprint(compute(1.0, 3.0));   # prints 0.3333...\n\t\t</tscript>\n\t\t</p>\n\t\t<p>\n\t\tAssume for a second that the division operator would use the\n\t\tarithmetics induced by its types, then the first case would\n\t\ttrigger integer division and the statement would print zero!\n\t\t</p>\n\t\t<p>\n\t\tThe problem is that in a runtime-typed language like TScript\n\t\tthe compute function cannot know which types its arguments\n\t\twill take. However, most probably the zero result is not\n\t\tintended by the programmer. Runtime type checking and forced\n\t\tconversion can fix the problem,\n\t\t<tscript>\n\t\t\tfunction compute1(a, b)\n\t\t\t{\n\t\t\t\tassert(Type(a) == Real and Type(b) == Real);\n\t\t\t\treturn a / b;\n\t\t\t}\n\t\t\tfunction compute2(a, b)\n\t\t\t{ return Real(a) / Real(b); }\n\t\t</tscript>\n\t\tbut demanding this solution from the programmer is a far too\n\t\terror prone approach.\n\t\t</p>\n\t\t<p>\n\t\tThis dilemma is resolved by introducing two distinct division\n\t\toperators, <code class="code">/</code> for reals and\n\t\t<code class="code">//</code> for integers. This design is not\n\t\telegant, but it solves an important problem by avoiding\n\t\tfrequent and hard-to-find division bugs. This solution is of\n\t\tcourse inspired by Python3.\n\t\t</p>\n        <tscript>\n\t\t\tprint(1 / 3);       # prints 0.3333...\n\t\t\tprint(1 // 3);      # prints 0\n\t\t</tscript>\n\t\t<p>\n\t\tThe power operator <code class="code">^</code> is particularly\n\t\tprone to integer overflow. However, it is rarely applied with\n\t\tlarge exponents. Instead of providing a second operator that\n\t\tis more safe with respect to integer overflow, the function\n\t\t<a href="?doc=/library/math">math.pow</a> is provided as an alternative.\n\t\t</p>\n\t',children:[]},{id:"style",name:"Style",title:"Coding Style",content:'\n\t\t<p>\n\t\tAlso beyond its basic syntax, the TScript language aims to teach\n\t\tgood coding style. Therefore there exists an official style\n\t\tguide. It aims to be not too restrictive, while emphasizing a\n\t\tfew points that can make code much easier to read. These two\n\t\tpoints are:\n\t\t<ul>\n\t\t\t<li>indentation, and</li>\n\t\t\t<li>capitalization of identifiers.</li>\n\t\t</ul>\n\t\t</p>\n\t\t<h3>Style Checking Mode</h3>\n\t\t<p>\n\t\tAlthough the core language does not enforce any particular\n\t\tcoding style, it can be helpful for beginners to get used to a\n\t\tstyle that fosters readable code early on. Therefore the TScript\n\t\tIDE offers the option to enable a special <i>style checking\n\t\tmode</i>. In this mode, violations of this style guide are\n\t\treported as errors. The mode can be enabled/disables in the\n\t\tconfiguration dialog accessible through the toolbar.\n\t\t</p>\n\t\t<p>\n\t\t<img style="display: block; margin: 1em auto;" src="data:image/png;base64,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"/>\n\t\t</p>\n\t\t<h3>Indentation</h3>\n\t\t<p>\n\t\tThe language syntax does not enforce indentation. Quite the\n\t\tcontrary is the case: whitespace is entirely insignificant.\n\t\tHowever, it is clear that cleanly indented code is significantly\n\t\teasier to read. Therefore, clean indentation of blocks is\n\t\tenforced by this style guide.\n\t\t</p>\n\t\t<p>\n\t\t<b>Rules:</b> Each block (scope, function/class/namespace body)\n\t\tis indented uniformly. Its indentation exceeds the indentation\n\t\tof the surrounding block. Lines containing matching opening and\n\t\tclosing braces must have the same indentation. Up to the last\n\t\trule, these rules coincide with the Python programming language.\n\t\t</p>\n\t\t<p>\n\t\t</p>\n\t\t<tscript>\n\t\t\tfunction foo()\n\t\t\t{ print("foo"); }   # okay\n\n\t\t\tfunction bar() {\n\t\t\t\t\tprint("bar");\n\t\t\t\t} # wrong; indentation of braces does not match\n\n\t\t\tfunction foo2()\n\t\t\t{\n\t\t\t\t\tprint("foo");\n\t\t\t\tprint("foo2");\t# wrong; block is not indented consistently\n\t\t\t}\n\n\t\t\tfunction bar2()\n\t\t\t{\n\t\t\tprint("bar2");   # wrong; indentation does not increase\n\t\t\t}\n\t\t</tscript>\n\t\t</p>\n\t\t<h3>Capitalization of Identifiers</h3>\n\t\t<p>\n\t\tTScript uses the convention that identifiers starting with a\n\t\tcapital letter denote types, while all other identifiers denote\n\t\tvariables, functions, and namespaces.\n\t\t</p>\n\t\t<tscript>\n\t\t\tvar N = 1000;         # should be "n"\n\t\t\tfunction Display(x)   # should be "display"\n\t\t\t{ print(x); }\n\t\t\tnamespace Stuff {     # should be "stuff"\n\t\t\t\tclass set { }     # should be "Set"\n\t\t\t}\n\t\t\tvar T = Integer;      # this is borderline, but should be "t"\n\t\t</tscript>\n\t',children:[]}]}},9521:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.doc_data_uri=void 0,e.doc_data_uri={id:"dataURI",name:"Resource to Data URI Converter",title:"Resource to Data URI Converter",content:'\n\t<p>\n\tThis tool converts resource files (image and sound data) into\n\t<a target="_blank" href="https://en.wikipedia.org/wiki/Data_URI_scheme">data URIs</a>\n\tas they are used with <code>canvas.Image</code> and <code>audio.Sound</code> objects.\n\t</p>\n\n\t<h2>Input File</h2>\n\t<div style="font-family: monospace; background: #eee; border: 1px solid #aaa; padding: 5px;">\n\t<div><label for="png" >PNG&nbsp; image file </label><input style="margin: 3px 20px; background: #fff;" type="file" id="png" accept="image/png"  onchange="let mime = event.target.accept; let file = event.target.files[0]; let reader = new FileReader(); reader.onloadend = () => { if (reader.result.substring(0, 5) === \'data:\') document.getElementById(\'output\').value = reader.result; else document.getElementById(\'output\').value = \'data:\' + mime + \';base64,\' + reader.result; }; reader.readAsDataURL(file);"/></div>\n\t<div><label for="jpeg">JPEG image file </label><input style="margin: 3px 20px; background: #fff;" type="file" id="jpeg" accept="image/jpeg"     onchange="let mime = event.target.accept; let file = event.target.files[0]; let reader = new FileReader(); reader.onloadend = () => { if (reader.result.substring(0, 5) === \'data:\') document.getElementById(\'output\').value = reader.result; else document.getElementById(\'output\').value = \'data:\' + mime + \';base64,\' + reader.result; }; reader.readAsDataURL(file);"/></div>\n\t<div><label for="webp">WEBP image file </label><input style="margin: 3px 20px; background: #fff;" type="file" id="webp" accept="image/webp"     onchange="let mime = event.target.accept; let file = event.target.files[0]; let reader = new FileReader(); reader.onloadend = () => { if (reader.result.substring(0, 5) === \'data:\') document.getElementById(\'output\').value = reader.result; else document.getElementById(\'output\').value = \'data:\' + mime + \';base64,\' + reader.result; }; reader.readAsDataURL(file);"/></div>\n\t<div><label for="mp3" >MP3&nbsp; audio file </label><input style="margin: 3px 20px; background: #fff;" type="file" id="mp3" accept="audio/mpeg" onchange="let mime = event.target.accept; let file = event.target.files[0]; let reader = new FileReader(); reader.onloadend = () => { if (reader.result.substring(0, 5) === \'data:\') document.getElementById(\'output\').value = reader.result; else document.getElementById(\'output\').value = \'data:\' + mime + \';base64,\' + reader.result; }; reader.readAsDataURL(file);"/></div>\n\t<div><label for="aac" >AAC&nbsp; audio file </label><input style="margin: 3px 20px; background: #fff;" type="file" id="aac" accept="audio/aac"  onchange="let mime = event.target.accept; let file = event.target.files[0]; let reader = new FileReader(); reader.onloadend = () => { if (reader.result.substring(0, 5) === \'data:\') document.getElementById(\'output\').value = reader.result; else document.getElementById(\'output\').value = \'data:\' + mime + \';base64,\' + reader.result; }; reader.readAsDataURL(file);"/></div>\n\t<div><label for="webm">WEBM audio file </label><input style="margin: 3px 20px; background: #fff;" type="file" id="webm" accept="audio/webm"     onchange="let mime = event.target.accept; let file = event.target.files[0]; let reader = new FileReader(); reader.onloadend = () => { if (reader.result.substring(0, 5) === \'data:\') document.getElementById(\'output\').value = reader.result; else document.getElementById(\'output\').value = \'data:\' + mime + \';base64,\' + reader.result; }; reader.readAsDataURL(file);"/></div>\n\t</div>\n\t<h2>Output String</h2>\n\t<textarea id="output" style="font-family: monospace; margin: 10px 0; width: calc(100% - 40px); height: 10vh; background: #eee; border: 1px solid #aaa; padding: 5px; overflow: auto; resize: vertical;"></textarea>\n\t<div>\n\t<button id="copy" style="padding: 5px 10px;" onclick="let textarea = document.getElementById(\'output\'); if (navigator.clipboard) { navigator.clipboard.writeText(textarea.value); } else { textarea.focus(); textarea.select(); document.execCommand(\'copy\'); }">copy to clipboard</button>\n\t<button id="clear" style="padding: 5px 10px;" onclick="document.getElementById(\'output\').value = \'\';">clear</button>\n\t</div>\n',children:[]}},6083:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.doc_errors=void 0,e.doc_errors={id:"errors",name:"Error Messages",title:"All Error Messages Explained",content:"\n\t<p>\n\tSometimes error messages can be really confusing. Experienced\n\tprogrammers know how to read and interpret even seemingly obscure\n\terrors, and they have adapted to the oddities of their tools.\n\tHowever, beginners can get lost rather quickly when trying to\n\tunderstand the root cause of an error.\n\tOne reason for difficult to understand error messages is that in\n\tsome situations the parser or interpreter emitting the message would\n\thave to guess in order to determine the most probable cause of the\n\terror, while reporting only the symptoms down the road is easy.\n\t</p>\n\t<div class=\"example\">\n\t\t<h3>Example</h3>\n\t\tSay, the programmer accidentally deleted a brace closing a\n\t\tscope. Then an error message may complain that a closing brace\n\t\tis missing at the end of the program. Or it may complain that a\n\t\tconstructor is allowed only inside of a class, as in the example\n\t\tbelow.\n\t\t<tscript>\n\t\tclass A\n\t\t{\n\t\tpublic:\n\t\t\tvar x;\n\t\t\tfunction set(y)\n\t\t\t{\n\t\t\t\tif x == y then {\n\t\t\t\t\tx = y;\n\t\t\t\t}  # <-- what happens if this closing brace is removed?\n\t\t\t\tx = 3 / y;\n\t\t\t}\n\t\t\tconstructor()\n\t\t\t{\n\t\t\t\tx = 0;\n\t\t\t}\n\t\t}\n\t\t</tscript>\n\t\tAssume that the marked brace was accidentally deleted.\n\t\tWhat the programmer perceives is that according his code layout\n\t\tthe constructor is indeed part of the class, so the error does\n\t\tnot seem to make any sense. In contrast, TScript sees the\n\t\tconstructor as being declared within function\n\t\t<code class=\"code\">set</code>, because it\n\t\tkeeps interpreting closing braces differently than the programmer\n\t\tuntil it finally encounters an unresolvable situation and\n\t\treports an error. By the time it encounters the constructor it\n\t\tknows nothing about the class being never closed by a brace,\n\t\tfrom which a really smart program may then be able to narrow down\n\t\tthe error, or at least conclude that the error's root cause could\n\t\tpossibly be found in many different places.\n\t</div>\n\t<p>\n\tSuch situations are hard to avoid in entirety. Therefore, when\n\tencountering a strange error it is helpful to understand how error\n\tmessages come about. For sure, the true cause of the error is found\n\t<i>before</i> the reported error position, and as the above example\n\tdemonstrates, it may be far from the position where an error is\n\tfinally reported. More often than not, the true error is in the\n\tstatement <i>just preceding</i> the one where an error is reported.\n\tIn addition to such general but somewhat limited insights, this\n\tsection aims to help by explaining in detail what each error message\n\tmeans, how it typically occurs, and which pitfalls one should be\n\taware of.\n\t</p>\n\n\t<h2>Placeholders</h2>\n\t<p>\n\tMany error messages in this documentation contain placeholders like\n\t'X' and 'Y'. In an actual error message, these placeholders are\n\treplaced with actual names. For example, the error message\n\t<b>cannot order type 'X'</b> in the documentation could appear in a\n\treal context as <b>cannot order type 'Dictionary'</b>.\n\t</p>\n",children:[{id:"syntax",name:"Syntax Errors",title:"Syntax Errors",content:'\n\t\t<p>\n\t\tA syntax error indicates failure to follow the\n\t\t<a href="?doc=/language/syntax/EBNF-syntax">formal syntax</a>\n\t\tof the language.\n\t\t</p>\n\t',children:[{id:"se-1",content:'\n\t\t\t<p>\n\t\t\tThis error occurs in two situations:\n\t\t\t<ol>\n\t\t\t\t<li>\n\t\t\t\t\tA number is parsed as a floating point literal with decimal dot\n\t\t\t\t\t<code class="code">.</code>, but the dot is not followed by a\n\t\t\t\t\tnumber, as it should.\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\tA number is parsed as a floating point literal with exponent\n\t\t\t\t\tindicator <code class="code">E</code> or <code class="code">e</code>,\n\t\t\t\t\tbut the indicator is not followed by a number, as it should.\n\t\t\t\t</li>\n\t\t\t</lo>\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\t\tprint(5.0);         # number with decimal place\n\t\t\t\t\t# print(5.);        # error\n\t\t\t\t\t# print(.5);        # (different error)\n\t\t\t\t\tprint(-6.2E+002);   # number with exponent\n\t\t\t\t\t# print(-6.2E+);    # error\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t',children:[]},{id:"se-2",content:'\n\t\t\t<p>\n\t\t\tEach <a href="?doc=/language/expressions/literals/strings">string literal</a>\n\t\t\tmust end within a single line. This error indicates that the\n\t\t\tclosing double quotes character was not found before the end\n\t\t\tof the line.\n            <div class="example">\n            <h3>Example</h3>\n            <tscript do-not-run>\n# var s = "This string should have ended\n# in the line before";                         # error\n            </tscript>\n        </div>\n            </p>\n\t\t',children:[]},{id:"se-3",content:'\n\t\t\t<p>\n\t\t\tA Unicode escape sequence in a\n\t\t\t<a href="?doc=/language/expressions/literals/strings">string literal</a>\n\t\t\tis of the form <code class="code">\\uXXXX</code>, where each\n\t\t\tX represents a hexadecimal digit, i.e., a digit or a lower\n\t\t\tor upper case letter in the range A to F. This error is\n\t\t\treported if not all of the four characters following the \\u\n\t\t\tsequence are hex digits.\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\t\tprint("\\u20AC");    # Euro sign\n\t\t\t\t\t# print("\\u20");    # error: too few characters\n\t\t\t\t\t# print("\\u20YZ");  # error: Y and Z are invalid\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t',children:[]},{id:"se-4",content:'\n\t\t\t<p>\n\t\t\tIn a\n\t\t\t<a href="?doc=/language/expressions/literals/strings">string literal</a>,\n\t\t\tthe backslash character starts an escape sequence. Only specific codes\n\t\t\tare allowed in escape sequences, as specified\n\t\t\t<a href="?doc=/language/syntax/tokens">here</a>. This error occurs if an\n\t\t\tinvalid code is encountered.\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\t\tprint("\\n");     # line feed\n\t\t\t\t\t# print("\\z");   # error: z is not a value escape code\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t',children:[]},{id:"se-5",content:'\n\t\t\t<p>\n\t\t\tThis error is reported if an invalid character was encountered in the\n\t\t\tprogram. All characters are legal inside comments and string literals,\n\t\t\tbut not in the rest of the program. The exact rules which character is\n\t\t\tlegal in which context are determined by the\n\t\t\t<a href="?doc=/language/syntax/EBNF-syntax">syntax rules</a>.\n\t\t\tFor example, the characters <code class="code">@</code> and\n\t\t\t<code class="code">â</code> are not legal outside comments and string\n\t\t\tliterals.\n\t\t\t</p><p>\n\t\t\tThis error can be irritating in particular if a whitespace character\n\t\t\tis reported:\n\t\t\t</p><p>\n\t\t\t<pre class="code">syntax&nbsp;error;&nbsp;invalid&nbsp;character&nbsp;\'&nbsp;\'</pre>\n\t\t\t</p><p>\n\t\t\tIn this case the program contains a whitespace that is neither a normal\n\t\t\tspace nor a tabulator. The most common such character is the\n\t\t\tnon-breaking space. It looks like a normal space character, but it is\n\t\t\tnot. On some systems it can be produced by pressing the space bar while\n\t\t\tholding the control and shift modifiers. To solve the problem, simply\n\t\t\toverwrite the non-breaking space with a normal space character (space\n\t\t\tbar).\n\t\t\t</p>\n\t\t',children:[]},{id:"se-6",content:"\n\t\t\t<p>\n\t\t\tThe keyword <keyword>super</keyword> refers to the super class\n\t\t\tof the current class. Therefore, using this keyword outside of\n\t\t\ta class declaration results in this error.\n\t\t\t</p>\n\t\t",children:[]},{id:"se-7",content:"\n\t\t\t<p>\n\t\t\tThe keyword <keyword>super</keyword> refers to the super class\n\t\t\tof the current class. Therefore, using this keyword in a class\n\t\t\tthat does not have a super class results in this error.\n\t\t\t</p>\n\t\t",children:[]},{id:"se-8",content:'\n\t\t\t<p>\n\t\t\tThe keyword <keyword>super</keyword> is used to refer to members\n\t\t\tof the super class. The reference is of the form\n\t\t\t<code class="code">super.name</code>. This error indicates that\n\t\t\tthe dot is missing after super.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-9",content:'\n\t\t\t<p>\n\t\t\tThe keyword <keyword>super</keyword> is used to refer to members\n\t\t\tof the super class. The reference is of the form\n\t\t\t<code class="code">super.name</code>. This error indicates that\n\t\t\tthe identifier is missing after super.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-10",content:"\n\t\t\t<p>\n\t\t\tThis error can occur in multiple contexts, namely when parsing the\n\t\t\tsuper class in a class declaration, in a use directive, and when\n\t\t\tparsing the loop variable of a for-loop. It indicates that a name\n\t\t\treferring to a type or variable is expected but not found.\n\t\t\t</p>\n\t\t",children:[]},{id:"se-13",content:'\n\t\t\t<p>\n\t\t\tThis error message indicates that a name refers to a non-static\n\t\t\tattribute or method, which requires <keyword>this</keyword> to be\n\t\t\tvalid, but the lookup happens from a static context where no\n\t\t\t<keyword>this</keyword> object exists.\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\tclass A\n\t\t\t\t{\n\t\t\t\tpublic:\n\t\t\t\t\tvar x;\n\t\t\t\t\tstatic function f()\n\t\t\t\t\t{\n\t\t\t\t\t\t# print(x);   # error\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t\t<p>\n\t\t\tA context where this error may be unintuitive at first is when\n\t\t\tusing a function name as a\n\t\t\t<a href="?doc=/language/expressions/constants">constant expression</a>,\n\t\t\ti.e., as the default value of a parameter or as the initializer\n\t\t\tof an attribute. A constant can refer to a function declaration\n\t\t\tonly if it is not a member of a class or if it is static.\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\tclass A\n\t\t\t\t{\n\t\t\t\tpublic:\n\t\t\t\t\tfunction f() { }\n\t\t\t\t\tstatic function s() { }\n\t\t\t\t\t# var y = f;      # error\n\t\t\t\t\tvar z = s;        # okay\n\t\t\t\t}\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t',children:[]},{id:"se-14",content:'\n\t\t\t<p>\n\t\t\tWhen calling a function, all positional arguments must precede\n\t\t\tthe named arguments. This error occurs when that rule is violated\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\tfunction f(a, b=0, c=0) {  }\n\t\t\t\tf(7, c=2);      # okay\n\t\t\t\t# f(b=2, 6);    # error\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t',children:[]},{id:"se-15",content:"\n\t\t\t<p>\n\t\t\tThis error indicates that a function call is broken. The argument list\n\t\t\tis a comma-separated list of expressions in parentheses. In other words,\n\t\t\teach expression is followed either by a comma or by a closing parenthesis.\n\t\t\tThe error is reported if a different token is encountered.\n\t\t\t</p>\n\t\t",children:[]},{id:"se-16",content:'\n\t\t\t<p>\n\t\t\tThe formal syntax of a function call does not ensure that the object\n\t\t\tbeing called is indeed callable.\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\tfunction f(a) { }\n\t\t\t\tvar a = f;\n\t\t\t\ta(3);      # okay\n\t\t\t\ta = 42;\n\t\t\t\t# a(3);    # error\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t',children:[]},{id:"se-21",content:'\n\t\t\t<p>\n\t\t\tThe result of applying a left-unary of binary operator like\n\t\t\t<code class="code">+</code> is a temporary value. Assigning\n\t\t\tto this value does not make any sense, and therefore is a\n\t\t\tsyntax error.\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\tvar a;\n\t\t\t\ta = 1 + 2;      # okay\n\t\t\t\t# a + 1 = 2;    # error\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t',children:[]},{id:"se-22",content:"\n\t\t\t<p>\n\t\t\tAny expression can be enclosed in parentheses, usually for the\n\t\t\tpurpose of overriding operator precedence rules. When nesting\n\t\t\tmany parenthesis in a single expression, it is a common mistake\n\t\t\tto forget to close a parenthesis, which results in this error.\n\t\t\t</p>\n\t\t",children:[]},{id:"se-23",content:'\n\t\t\t<p>\n\t\t\tA sequence of digits forms an integer <i>token</i>. However, an integer\n\t\t\t<i>literal</i> is limited to the range 0 to 2147483647=2<sup>31</sup>-1,\n\t\t\tsince otherwise overflow would apply, which is undesirable for literals.\n\t\t\tThis error indicates that the valid range was exceeded.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tThis poses the difficulty of representing the smallest integer value,\n\t\t\twhich is -2147483648. It cannot be denoted as such, because its\n\t\t\tpositive counterpart exceeds the valid range, so an error occurs\n\t\t\tbefore negation is applied. Instead, the value can be denoted as\n\t\t\tfollows:\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\tvar a = -2147483647 - 1;          # usable as a constant\n\t\t\t\tvar b = -2^31;                    # usable as a constant\n\t\t\t\tvar c = Integer(-2147483648.0);   # not usable as a constant\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t',children:[]},{id:"se-24",content:'\n\t\t\t<p>\n\t\t\tAn <a href="?doc=/language/expressions/literals/arrays">array literal</a>\n\t\t\tstarts with an opening bracket <code class="code">[</code> and stops with\n\t\t\ta closing bracket <code class="code">]</code>, enclosing a comma-separated\n\t\t\tlist of expressions. This error indicates that neither a comma nor a\n\t\t\tclosing bracket was found after an expression.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-25",content:'\n\t\t\t<p>\n\t\t\tAn <a href="?doc=/language/expressions/literals/arrays">array literal</a>\n\t\t\tstarts with an opening bracket <code class="code">[</code> and stops with\n\t\t\ta closing bracket <code class="code">]</code>. This error indicates that\n\t\t\tthe end of the program was reached without encountering the closing\n\t\t\tbracket.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-26",content:'\n\t\t\t<p>\n\t\t\tKeys in a dictionary must be unique. This error occurs if a\n\t\t\t<a href="?doc=/language/expressions/literals/dictionaries">dictionary literal</a>\n\t\t\tspecifies the given key more than once.\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\tvar dict = {\n\t\t\t\t\t\t"name": "john",\n\t\t\t\t\t\t"age": 25,\n\t\t\t\t\t\t# "name": "smith",   # error: duplicate key \'name\'\n\t\t\t\t\t\t"address": "..."\n\t\t\t\t\t};\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t',children:[]},{id:"se-27",content:'\n\t\t\t<p>\n\t\t\tA <a href="?doc=/language/expressions/literals/dictionaries">dictionary literal</a>\n\t\t\tstarts with an opening brace <code class="code">{</code> and stops with\n\t\t\ta closing brace <code class="code">}</code>, enclosing a comma-separated\n\t\t\tlist of key-value pairs. This error indicates that neither a comma nor a\n\t\t\tclosing brace was found after a value.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-28",content:'\n\t\t\t<p>\n\t\t\tKeys in a <a href="?doc=/language/expressions/literals/dictionaries">dictionary literal</a>\n\t\t\tare identifiers or strings. This error is reported if neither of them\n\t\t\twas found where a key was expected.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-29",content:'\n\t\t\t<p>\n\t\t\tIn a <a href="?doc=/language/expressions/literals/dictionaries">dictionary literal</a>,\n\t\t\tkeys and values are separated by colons. This error occurs is there is\n\t\t\tno colon found after the key.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-30",content:'\n\t\t\t<p>\n\t\t\tA <a href="?doc=/language/expressions/literals/dictionaries">dictionary literal</a>\n\t\t\tstarts with an opening brace <code class="code">{</code> and stops with\n\t\t\ta closing brace <code class="code">}</code>. This error indicates that\n\t\t\tthe end of the program was reached without encountering the closing\n\t\t\tbrace.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-31",content:'\n\t\t\t<p>\n\t\t\tAn <a href="?doc=/language/expressions/literals/anonymous-functions">anonymous function</a>\n\t\t\texpression encloses variables as a comma-separated list of named expressions\n\t\t\tenclosed in square brackets. In other words, a comma or a closing bracket\n\t\t\tmust follow each variable or expression, otherwise this error is reported.\n\t\t\t</p>\n            <div class="example">\n            <h3>Example</h3>\n            <tscript do-not-run>\nvar array = [0, 1, 2, 3, 4, 5];\nfunction example(index) {\n    return function [index () {         # here the error occurs, because behind index a comma or closing bracket is expected\n        return array[index];\n    };\n}\n            </tscript>\n        </div>\n\t\t',children:[]},{id:"se-32",content:'\n\t\t\t<p>\n\t\t\tAn <a href="?doc=/language/expressions/literals/anonymous-functions">anonymous function</a>\n\t\t\texpression encloses variables as a comma-separated list of named expressions\n\t\t\tin square brackets. It can enclose variables under their names in the\n\t\t\tsurrounding scope, or it can enclose an expression under an explicitly\n\t\t\tgiven (variable) name. In the latter case, if the variable name is missing\n\t\t\tthen this error is reported.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-33",content:"\n\t\t\t<p>\n\t\t\tThe parameter list of a function is a comma separated list of identifiers,\n\t\t\tpossibly with the definition of default values, enclosed in parentheses.\n\t\t\tHence, each identifier (optionally with its default value) must be followed\n\t\t\tby a comma or closing parenthesis, otherwise this error is reported.\n\t\t\t</p>\n\t\t",children:[]},{id:"se-35",content:'\n\t\t\t<p>\n\t\t\tWhen using the keyword <keyword>function</keyword> in an expression,\n\t\t\tan <a href="?doc=/language/expressions/literals/anonymous-functions">anonymous function</a>\n\t\t\tis declared. The keyword is followed by an optional list of closure\n\t\t\tvariables enclosed in square brackets or by a parameter list in\n\t\t\tenclosed parentheses, otherwise this error is emitted.\n\t\t\t</p>\n            <div class="example">\n            <h3>Example</h3>\n            <tscript do-not-run>\nvar array = [0, 1, 2, 3, 4, 5];\nfunction example(index) {\n    return function index] () {         # here the error occurs, because behind the function keyword an opening bracket or parenthesis is expected\n        return array[index];\n    };\n}\n            </tscript>\n\t\t\t</div>\n\t\t',children:[]},{id:"se-36",content:'\n\t\t\t<p>\n\t\t\tWhen declaring a <a href="?doc=/language/declarations/functions">function</a>,\n\t\t\t<a href="?doc=/language/expressions/literals/anonymous-functions">anonymous function</a>,\n\t\t\tor a <a href="?doc=/language/declarations/classes">constructor</a>,\n\t\t\tthen a parameter list must be defined, even if it is empty. This\n\t\t\terror indicates that the opening parenthesis was not found.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-37",content:'\n\t\t\t<p>\n\t\t\tA <href="?doc=/language/declarations/functions">function</a> declares\n\t\t\tparameters as a comma-separated list in parentheses. Hence, each\n\t\t\tparameter must be followed by a comma or a closing parenthesis,\n\t\t\totherwise this error is reported.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-38",content:'\n\t\t\t<p>\n\t\t\tDefault values of\n\t\t\t<href="?doc=/language/declarations/functions">function</a> parameters\n\t\t\tmust be <a href="?doc=/language/expressions/constants">constants</a>.\n\t\t\tThis error indicates that the default value expression is not\n\t\t\tconsidered a proper constant in TScript.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-40",content:'\n\t\t\t<p>\n\t\t\tThis error indicates that a namespace, class, or function body is\n\t\t\tmissing in a <a href="?doc=/language/declarations">declaration</a> or\n\t\t\t<a href="?doc=/language/expressions/literals/anonymous-functions">anonymous function</a>.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-41",content:"\n\t\t\t<p>\n\t\t\tA keyword that cannot initiate an expression was detected in a context\n\t\t\twhere an expression is expected. Such contexts are manifold, i.e.,\n\t\t\ton the right-hand-side of an assignment operator, within a function\n\t\t\tcall, in the condition of a do-while or while-do loop, etc.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tFor example, the keyword <keyword>true</keyword> itself represents a\n\t\t\tvalid expression. On the contrary, the keyword <keyword>while</keyword>\n\t\t\tcannot be part of an expression.\n\t\t\t</p>\n\t\t",children:[]},{id:"se-42",content:'\n\t\t\t<p>\n\t\t\tA token that cannot initiate an expression was detected in a context\n\t\t\twhere an expression is expected. Such contexts are manifold, i.e.,\n\t\t\ton the right-hand-side of an assignment operator, within a function\n\t\t\tcall, in the condition of a do-while or while-do loop, etc.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tFor example, integer, real and string literals are valid expressions.\n\t\t\tOn the contrary, an expression cannot start with the token\n\t\t\t<code class="code">,</code> (a comma).\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript do-not-run>\n\t\t\t\tvar a = 42;              # valid\n\t\t\t\tvar b = 3.14159;         # valid\n\t\t\t\tvar c = "Hello World";   # valid\n\t\t\t\tvar d = ,                # invalid\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t\t</p>\n\t\t',children:[]},{id:"se-43",content:'\n\t\t\t<p>\n\t\t\tA <a href="?doc=/language/expressions/names">name</a> used to\n\t\t\t<a href="?doc=/language/expressions/member-access">access a member</a>\n\t\t\tof an object or a namespace is a sequence of identifiers separated\n\t\t\twith dots. This error indicates that the sequence ends with a dot,\n\t\t\tand not with an identifier, as it should.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-44",content:'\n\t\t\t<p>\n\t\t\tCharacters of strings and items of arrays and dictionaries are\n\t\t\t<a href="?doc=/language/expressions/item-access">accessed with an index in square brackets</a>.\n\t\t\tThis error indicates that the closing square bracket is missing\n\t\t\tafter the index expression.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-47",content:'\n\t\t\t<p>\n\t\t\tWithin a <a href="?doc=/language/declarations/classes">class declaration</a>\n\t\t\tthe keyword <keyword>this</keyword> refers to the object upon which\n\t\t\ta method acts. The keyword is only meaningful in contexts that do\n\t\t\tactually act on an object. The use of <keyword>this</keyword> in\n\t\t\tstatic functions and inner functions results in this error message.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tA second legal use of the <keyword>this</keyword> keyword is within an\n\t\t\t<a href="?doc=/language/expressions/literals/anonymous-functions">anonymous function</a>.\n\t\t\tThere it refers to the function itself, and hence allows the function\n\t\t\tto recursively call itself.\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\tclass A\n\t\t\t\t{\n\t\t\t\tpublic:\n\t\t\t\t\tfunction f()\n\t\t\t\t\t{\n\t\t\t\t\t\tprint(this);          # okay\n\t\t\t\t\t\tvar a = function ()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t# print(this);    # error\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\tstatic function s()\n\t\t\t\t\t{\n\t\t\t\t\t\t# print(this);        # error\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t',children:[]},{id:"se-48",content:'\n\t\t\t<p>\n\t\t\tAn <a href="?doc=/language/statements/assignments">assignment</a> ends with\n\t\t\ta semicolon. This error indicates that the semicolon was not found after\n\t\t\tthe expression on the right-hand-side of the assignment operator.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tCommon reasons for this error are that\n\t\t\t<ul>\n\t\t\t<li>the programmer either forgot to put the semicolon, <b>often in the preceding line</b>, or</li>\n\t\t\t<li>the right-hand-side expression ends earlier than anticipated by the\n\t\t\tprogrammer, usually due to a mistake.</li>\n\t\t\t</ul>\n\t\t\t</p>\n\t\t',children:[]},{id:"se-49",content:'\n\t\t\t<p>\n\t\t\tThis error indicates that an <a href="?doc=/language/expressions">expression</a>\n\t\t\tended in an unexpected way. When\n\t\t\t<a href="?doc=/language/statements/expressions">using an expression as a statement</a>,\n\t\t\tthe expression must be terminated with a semicolon. Alternatively, the expression\n\t\t\tcan be continued by appending a binary operator and a further expression.\n\t\t\tIf these expectations are not met then this error is reported.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tCommon reasons for this error are that\n\t\t\t<ul>\n\t\t\t<li>the programmer either forgot to put the semicolon, or</li>\n\t\t\t<li>the expression ends earlier than anticipated by the programmer,\n\t\t\tusually due to a mistake.</li>\n\t\t\t</ul>\n\t\t\t</p>\n\t\t',children:[]},{id:"se-50",content:'\n\t\t\t<p>\n\t\t\tIn a <a href="?doc=/language/declarations/variables">variable declaration</a>,\n\t\t\tthe names of all variables must be identifiers. This error indicates that\n\t\t\ta different type of <a href="?doc=/language/syntax/tokens">token</a> was\n\t\t\tencountered instead.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-51",content:'\n\t\t\t<p>\n\t\t\tThis error indicates that the basic syntax of a\n\t\t\t<a href="?doc=/language/declarations/variables">variable declaration</a>\n\t\t\tis violated. Variables are separated with commas, the list closes with a\n\t\t\tsemicolon, and each variable can have an initializer starting with an\n\t\t\tequals sign. Therefore the identifier must be followed by an equals sign,\n\t\t\ta comma, or a semicolon. Otherwise this error is reported.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-51b",content:'\n\t\t\t<p>\n\t\t\tThis error indicates that the basic syntax of a\n\t\t\t<a href="?doc=/language/declarations/variables">variable declaration</a>\n\t\t\tis violated. Variables are separated with commas, the list closes with a\n\t\t\tsemicolon. Therefore the initializer must be followed by a comma or a\n\t\t\tsemicolon. Otherwise this error is reported.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-52",content:'\n\t\t\t<p>\n\t\t\tA <a href="?doc=/language/declarations/functions">function declaration</a>\n\t\t\tmust have a name, which is an identifier. This error indicates that the\n\t\t\tname was not found after the <keyword>function</keyword> keyword.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tOne possible cause of this error is the attempt to denote an anonymous\n\t\t\tfunction in an expression forming a statement. This does not work directly,\n\t\t\tsince the <keyword>function</keyword> keyword triggers a function\n\t\t\tdeclaration, which is different from an anonymous function expression.\n\t\t\tThe anonymous function can be enclosed in parentheses in order to ensure\n\t\t\tproper parsing as an expression.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-53",content:'\n\t\t\t<p>\n\t\t\tThe <a href="?doc=/language/declarations/classes">constructor of a class</a>\n\t\t\tcan invoke the constructor of the super class with a special syntax,\n\t\t\t</p>\n\t\t',children:[]},{id:"se-54",content:'\n\t\t\t<p>\n\t\t\tA <a href="?doc=/language/declarations/classes">class declaration</a>\n\t\t\tcontains an identifier acting as the name of the class. This error\n\t\t\tindicates that no identifier was found after the keyword\n\t\t\t<keyword>class</keyword>.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-55",content:'\n\t\t\t<p>\n\t\t\tAn <a href="?doc=/language/declarations/classes">access modifier in a class declaration</a>\n\t\t\tconsists of one of the keywords <keyword>public</keyword>, <keyword>protected</keyword>,\n\t\t\tor <keyword>private</keyword>, followed by a colon. This error indicates that the colon\n\t\t\tis missing.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-56",content:'\n\t\t\t<p>\n\t\t\tAll <a href="?doc=/language/declarations/classes">members of a class</a>\n\t\t\tare subject to a visibility modifier, consisting of one of the keywords\n\t\t\t<keyword>public</keyword>, <keyword>protected</keyword>, or\n\t\t\t<keyword>private</keyword>, followed by a colon. This error indicates\n\t\t\tthat a member declaration precedes the first visibility modifier.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-57",content:'\n\t\t\t<p>\n\t\t\t<a href="?doc=/language/declarations/classes">Attributes of a class</a>\n\t\t\tcan be initialized in their declaration by providing an initializer.\n\t\t\tThis works for static as well as for non-static attributes. However,\n\t\t\tin contrast to global and local variables, the initializer must be\n\t\t\ta <a href="?doc=/language/expressions/constants">constant</a>.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-58",content:'\n\t\t\t<p>\n\t\t\tAll <a href="?doc=/language/declarations/classes">members of a class</a>\n\t\t\tare subject to visibility settings. The constructor of a class always\n\t\t\tcalls the constructor of the super class. This even holds for the\n\t\t\tdefault constructor, which is generated if no constructor is\n\t\t\texplicitly declared.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tIf the super class has declared its constructor private then the\n\t\t\tsub-class cannot properly initialize the super class. Therefore\n\t\t\tinheriting a class with private constructor is not possible.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-59",content:'\n\t\t\t<p>\n\t\t\tThe <a href="?doc=/language/declarations/classes">constructor of a class</a>\n\t\t\tneeds a <keyword>this</keyword> reference to the object to be initialized,\n\t\t\ttherefore it cannot be static. This error indicates that the constructor\n\t\t\twas marked as static.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-59b",content:'\n\t\t\t<p>\n\t\t\tThe <a href="?doc=/language/declarations/classes">constructor of a class</a>\n\t\t\tmust be unique, it cannot be overloaded. This is explicitly different from other\n            languages. Remove all but one constructor\n\t\t\tto fix this error.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-60",content:'\n\t\t\t<p>\n\t\t\tThe only members of a <a href="?doc=/language/declarations/classes">class</a>\n\t\t\tthat can be declared are attributes and methods. This error indicates that\n\t\t\ta class declaration found inside the scope of another class is declared\n\t\t\tstatic.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-61",content:'\n\t\t\t<p>\n\t\t\tThe only members of a <a href="?doc=/language/declarations/classes">class</a>\n\t\t\tthat can be declared are attributes and methods. This error indicates that\n\t\t\ta <a href="?doc=/language/directives/use">use directive</a> found inside the\n\t\t\tscope of another class is declared static.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-62",content:'\n\t\t\t<p>\n\t\t\tThis error indicates that an unexpected entity was found inside a\n\t\t\t<a href="?doc=/language/declarations/classes">class</a>. The class syntax\n\t\t\tdemands that only access modifiers, attribute and method declarations,\n\t\t\tdeclarations of nested classes, and use-directives are allowed.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-63",content:'\n\t\t\t<p>\n\t\t\tAs the error message states, a\n\t\t\t<a href="?doc=/language/declarations/namespaces">namespace</a> can be\n\t\t\tdeclared only at global scope or nested within another namespace.\n\t\t\tIt must not be declared at function of class scope. The error\n\t\t\tmessage indicates that this rule was violated.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-64",content:'\n\t\t\t<p>\n\t\t\tA <a href="?doc=/language/declarations/namespaces">namespace declaration</a>\n\t\t\tcontains an identifier acting as the name of the class. This error\n\t\t\tindicates that no identifier was found after the keyword\n\t\t\t<keyword>namespace</keyword>.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-65",content:'\n\t\t\t<p>\n\t\t\t<a href="?doc=/language/directives/use">Use directives</a> can have two forms.\n\t\t\tThis error occurs if the form starting with <keyword>from</keyword> does\n\t\t\tnot contain the keyword <keyword>use</keyword> after the from-clause.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-66",content:'\n\t\t\t<p>\n\t\t\tIn a <a href="?doc=/language/directives/use">use directive</a>, an imported name\n\t\t\tcan be remapped to a different name with an <keyword>as</keyword> clause.\n\t\t\tHowever, the same mechanism does not work when importing all name from a\n\t\t\tnamespace. This error indicates that the attempt was made nevertheless.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-67",content:'\n\t\t\t<p>\n\t\t\tThis error indicates that the <ebnf>identifier</ebnf> is missing after\n\t\t\t<keyword>as</keyword> in a <a href="?doc=/language/directives/use">use directive</a>.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-68",content:'\n\t\t\t<p>\n\t\t\tIn a <a href="?doc=/language/directives/use">use directive</a>, multiple names\n\t\t\tor whole namespaces can be imported. The individual imports are separated\n\t\t\twith commas, and the overall use directive closes with a semicolon. Therefore\n\t\t\teach import must be followed either by a comma or by a semicolon. This error\n\t\t\tindicates that the above rule is violated.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-69",content:'\n\t\t\t<p>\n\t\t\tThe error indicates that in an\n\t\t\t<a href="?doc=/language/statements/if-then-else">if-then-else</a> conditional\n\t\t\tstatement the keyword <keyword>then</keyword> is missing. This mistake is\n\t\t\tcommonly made by programmers coming from C-style languages which do not\n\t\t\thave this keyword.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-70",content:'\n\t\t\t<p>\n\t\t\tA <a href="?doc=/language/statements/for-loops">for loop</a> uses a loop\n\t\t\tvariable to indicate its current iteration. If this variable is declared\n\t\t\twithin the loop with the <keyword>var</keyword> keyword, then the variable\n\t\t\tname must be a plain <ebnf>identifier</ebnf>. The error message indicates\n\t\t\tthat a non-identifier token was encountered.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-71",content:'\n\t\t\t<p>\n\t\t\tIn a <a href="?doc=/language/statements/for-loops">for loop</a> declaring its\n\t\t\town loop variable, the keyword <keyword>in</keyword> must follow the loop\n\t\t\tvariable declaration. This error indicates that some other token was\n\t\t\tencountered.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-72",content:'\n\t\t\t<p>\n\t\t\tIn a <a href="?doc=/language/statements/for-loops">for loop</a> after the\n\t\t\tcontainer to loop over must be followed by the keyword <keyword>do</keyword>.\n\t\t\tThis error indicates that some other token was encountered.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-73",content:'\n\t\t\t<p>\n\t\t\tIf a <a href="?doc=/language/statements/for-loops">for loop</a> does not use\n\t\t\tloop variable declared within the loop, then the expression following\n\t\t\tthe keyword <keyword>for</keyword> could either be an externally declared\n\t\t\tloop variable or the container to iterate over. In the former case, the\n\t\t\texpression must be followed by <keyword>in</keyword>, in the latter case\n\t\t\tby <keyword>do</keyword>. The error message indicates that neither one\n\t\t\twas found.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-74",content:'\n\t\t\t<p>\n\t\t\tThe syntax of a <a href="?doc=/language/statements/do-while-loops">do-while loop</a>\n\t\t\tdemands that the loop body is followed by the keyword <keyword>while</keyword>.\n\t\t\tThis error message indicates that an different token was encountered.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-75",content:'\n\t\t\t<p>\n\t\t\tThe syntax of a <a href="?doc=/language/statements/do-while-loops">do-while loop</a>\n\t\t\tdemands that the condition is followed by a semicolon.\n\t\t\tThis error message indicates that an different token was encountered.\n\t\t\tIt may indicate that the expression representing the loop condition\n\t\t\tis broken.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-76",content:'\n\t\t\t<p>\n\t\t\tThe syntax of a <a href="?doc=/language/statements/while-do-loops">while-do loop</a>\n\t\t\tdemands that the condition is followed by the keyword <keyword>do</keyword>.\n\t\t\tThis error message indicates that an different token was encountered.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-77",content:'\n\t\t\t<p>\n\t\t\tA <a href="?doc=/language/statements/break-continue">break</a> statement\n\t\t\tcan only appear inside a loop. This error message indicates that there\n\t\t\tis no loop surrounding the statement.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-78",content:'\n\t\t\t<p>\n\t\t\tA <a href="?doc=/language/statements/break-continue">continue</a> statement\n\t\t\tcan only appear inside a loop. This error message indicates that there\n\t\t\tis no loop surrounding the statement.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-79",content:'\n\t\t\t<p>\n\t\t\tA <a href="?doc=/language/statements/return">return</a> statement returns\n\t\t\tthe control flow from the current function back to the calling context.\n\t\t\tWhen doing so, it can also return a value, which then becomes the value\n\t\t\tof the function call expression. However, a constructor does not evaluate\n\t\t\tto an arbitrary expression and therefore cannot return a value. A return\n\t\t\tstatement inside a constructor must not contain a return value, otherwise\n\t\t\tthis error is reported.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-80",content:'\n\t\t\t<p>\n\t\t\tA <a href="?doc=/language/statements/return">return</a> statement returns\n\t\t\tthe control flow from the current function back to the calling context.\n\t\t\tWhen doing so, it can also return a value, which then becomes the value\n\t\t\tof the function call expression. When applied at global or namespace\n\t\t\tscope, the return statement ends the program. Since a program does not\n\t\t\thave a value, a return statement at global or namespace scope must not\n\t\t\tcontain a return value, otherwise this error is reported.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-81",content:'\n\t\t\t<p>\n\t\t\tA <a href="?doc=/language/statements/return">return</a> statement ends with\n\t\t\ta semicolon. The error message indicates that this is not the case.\n\t\t\tThe most probably reason is that the return expression is broken.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-81b",content:'\n\t\t\t<p>\n\t\t\tA <a href="?doc=/language/statements/break-continue">break</a> statement ends with\n\t\t\ta semicolon. The error message indicates that this is not the case.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-81c",content:'\n\t\t\t<p>\n\t\t\tA <a href="?doc=/language/statements/break-continue">continue</a> statement ends with\n\t\t\ta semicolon. The error message indicates that this is not the case.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-82",content:'\n\t\t\t<p>\n\t\t\t<a href="?doc=/language/statements/try-catch">try-catch</a>\n\t\t\t</p>\n\t\t',children:[]},{id:"se-84",content:'\n\t\t\t<p>\n\t\t\t<a href="?doc=/language/statements/try-catch">try-catch</a>\n\t\t\t</p>\n\t\t',children:[]},{id:"se-85",content:'\n\t\t\t<p>\n\t\t\t<a href="?doc=/language/statements/try-catch">try-catch</a>\n\t\t\t</p>\n\t\t',children:[]},{id:"se-86",content:'\n\t\t\t<p>\n\t\t\t<a href="?doc=/language/statements/try-catch">try-catch</a>\n\t\t\t</p>\n\t\t',children:[]},{id:"se-87",content:'\n\t\t\t<p>\n\t\t\tA <a href="?doc=/language/statements/throw">throw</a> statements ends with\n\t\t\ta semicolon. This error message indicates that the semicolon is missing.\n\t\t\tThe most probably cause of this error is a bug in the expression preceding\n\t\t\tthe semicolon.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-88",content:'\n\t\t\t<p>\n\t\t\tCurly braces can close\n\t\t\t<a href="?doc=/language/statements/blocks">blocks of statements</a> and\n\t\t\t<a href="?doc=/language/expressions/literals/dictionaries">dictionary literals</a>.\n\t\t\tThis error indicates that a closing brace was found in a different\n\t\t\tcontext. The most common cause of this error is that the declaration\n\t\t\tor statement preceding the closing brace is broken.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-89",content:"\n\t\t\t<p>\n\t\t\tThis error is reported if a keyword that cannot start a statement\n\t\t\t(like, e.g., <keyword>static</keyword>) was encountered where a\n\t\t\tstatement was expected. This error has two common causes:\n\t\t\t<ul>\n\t\t\t\t<li>a keyword was used as an identifier, or</li>\n\t\t\t\t<li>the preceding statement is broken.</li>\n\t\t\t</ul>\n\t\t\t</p>\n\t\t",children:[]},{id:"se-90",content:'\n\t\t\t<p>\n\t\t\tThis error is reported if a token that cannot start a statement\n\t\t\t(like, e.g., <code class="code">+=</code>) was encountered where a\n\t\t\tstatement was expected. This error usually indicates that the\n\t\t\tstatement directly preceding the location where the error is\n\t\t\treported is broken.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-91",content:'\n\t\t\t<p>\n\t\t\tThis error is reported if the <keyword>include</keyword> is not\n\t\t\tfollowed by a string literal. The syntax should be\n\t\t\t<code class="code">include "filename";</code>. For example, an\n\t\t\tattempt to use the function-style syntax\n\t\t\t<code class="code">include("filename");</code>\n\t\t\tresults in this error.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-92",content:"\n\t\t\t<p>\n\t\t\tThis error indicates that the semicolon ending an\n\t\t\t<keyword>include</keyword> statement is missing. Adding the\n\t\t\tsemicolon after the string literal indicating the filename\n\t\t\tshould fix the problem.\n\t\t\t</p>\n\t\t",children:[]}]},{id:"argument-mismatch",name:"Argument Mismatch",title:"Argument Mismatch",content:"\n\t\t<p>\n\t\tValues passed into a function or operator can mismatch the needs\n\t\tand expectations of the function being called in several ways.\n\t\tArguments can be of the wrong type, or their values can be in an\n\t\tinvalid range. Errors in this category reflect such events.\n\t\t</p>\n\t",children:[{id:"am-1",content:'\n\t\t\t<p>\n\t\t\tA function specifies how many arguments it expects, but the formal\n\t\t\tfunction declaration does not specify which types can be processed.\n\t\t\tFor example, the wait function expects the number of milliseconds\n\t\t\tto wait as an argument, which must be a number. If a value of\n\t\t\tunrelated type is passed, say, a dictionary, then the function\n\t\t\treports this error.\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\t\twait(10);         # okay\n\t\t\t\t\t# wait("foo");    # error\n\t\t\t\t\t# wait({a: 2});   # error\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t\t<p>\n\t\t\tSuch errors occur for two frequent reasons.\n\t\t\t<ol>\n\t\t\t<li>The programmer passes positional\n\t\t\targuments in the wrong order. For example, the function\n\t\t\tString.find expects a search key (string), a start position\n\t\t\t(integer), and a flag (boolean). If the programmer passes\n\t\t\tthe start position first, then the function tries to\n\t\t\tinterpret it as the search key. Since the value is not a\n\t\t\tstring, the attempt fails and an error is reported.</li>\n\t\t\t<li>A variable or expression\n\t\t\tpassed to a function as a parameter is of a type that is\n\t\t\tnot expected by the programmer.</li>\n\t\t\t</ol>\n\t\t\t</p>\n\t\t',children:[]},{id:"am-2",content:'\n\t\t\t<p>\n\t\t\tThe <a href="?doc=/language/expressions/unary-operators/minus">unary operator not</a>\n\t\t\tis only defined for boolean arguments. Applying unary not\n\t\t\tto a value of any other type results in this error.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-3",content:'\n\t\t\t<p>\n\t\t\tThe <a href="?doc=/language/expressions/unary-operators/plus">unary operator +</a>\n\t\t\tis only defined for numerical arguments. Applying unary plus\n\t\t\tto a value of any other type results in this error.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-4",content:'\n\t\t\t<p>\n\t\t\tThe <a href="?doc=/language/expressions/unary-operators/minus">unary operator -</a>\n\t\t\tis only defined for numerical arguments. Applying unary minus\n\t\t\tto a value of any other type results in this error.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-5",content:'\n\t\t\t<p>\n\t\t\tThis error occurs if the\n\t\t\t<a href="?doc=/language/expressions/binary-operators/addition">binary operator +</a>\n\t\t\tis applied to two types that cannot be added. The operator supports\n\t\t\tnumeric types as well as string concatenation. All other operand\n\t\t\ttypes result in this error.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-6",content:'\n\t\t\t<p>\n\t\t\tThis error occurs if the\n\t\t\t<a href="?doc=/language/expressions/binary-operators/subtraction">binary operator -</a>\n\t\t\tis applied to non-numeric arguments.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-7",content:'\n\t\t\t<p>\n\t\t\tThis error occurs if the\n\t\t\t<a href="?doc=/language/expressions/binary-operators/multiplication">binary operator +</a>\n\t\t\tis applied to non-numeric arguments.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-8",content:'\n\t\t\t<p>\n\t\t\tThis error occurs if the\n\t\t\t<a href="?doc=/language/expressions/binary-operators/real-division">binary operator /</a>\n\t\t\tor the\n\t\t\t<a href="?doc=/language/expressions/binary-operators/integer-division">binary operator //</a>\n\t\t\tis applied to non-numeric arguments.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-9",content:'\n\t\t\t<p>\n\t\t\tThis error occurs if the\n\t\t\t<a href="?doc=/language/expressions/binary-operators/modulo">binary operator %</a>\n\t\t\tis applied to non-numeric arguments.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-10",content:'\n\t\t\t<p>\n\t\t\tThis error occurs if the\n\t\t\t<a href="?doc=/language/expressions/binary-operators/power">binary operator ^</a>\n\t\t\tis applied to non-numeric arguments.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-11",content:'\n\t\t\t<p>\n\t\t\tThis error occurs if the\n\t\t\t<a href="?doc=/language/expressions/binary-operators/addition">binary operator :</a>\n\t\t\tis applied to non-integer arguments.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-12",content:'\n\t\t\t<p>\n\t\t\tThis error occurs if one of the binary operators\n\t\t\t<a href="?doc=/language/expressions/binary-operators/and">and</a>,\n\t\t\t<a href="?doc=/language/expressions/binary-operators/or">or</a>, or\n\t\t\t<a href="?doc=/language/expressions/binary-operators/xor">xor</a>\n\t\t\tis applied to non-boolean non-integer arguments.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-13",content:'\n\t\t\t<p>\n\t\t\tThis error occurs when a value is converted to an integer. The\n\t\t\tvalue is often a real, but it can also be a string that is\n\t\t\tinterpreted as a real. If the real is not a finite value or if\n\t\t\tthe string representation overflows to an infinite value then\n\t\t\tthe error occurs. It is an error because integers cannot\n\t\t\trepresent infinity and not-a-number, and also the integer\n\t\t\toverflow rules are unsuitable to resolve this situation.\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\t\tvar r = Real.inf();\n\t\t\t\t\tvar s = "1e1000";\n\t\t\t\t\t# print(Integer(r));  # error: r is infinite\n\t\t\t\t\t# print(Integer(s));  # error: s parsed as Real\n\t\t\t\t\t                      # overflows to infinity\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t',children:[]},{id:"am-14",content:'\n\t\t\t<p>\n\t\t\tThis error occurs when a string is converted to an integer\n\t\t\tand the string value does not represent a number.\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\t\tprint(Integer("42"));        # prints 42\n\t\t\t\t\t# print(Integer(""));        # error\n\t\t\t\t\t# print(Integer("hello"));   # error\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t',children:[]},{id:"am-15",content:'\n\t\t\t<p>\n\t\t\tThis error occurs when a value is divided by zero with the\n\t\t\tinteger division operator <code class="code">//</code> or\n\t\t\twith the modulo operator <code class="code">%</code>. As an\n\t\t\texception, integer division by zero applied to type\n\t\t\t<a href="?doc=/language/types/real">Real</a> results in an\n\t\t\tinfinite value or not-a-number (NaN).\n\t\t\tIn contrast to this behavior, the real division operator\n\t\t\t<code class="code">/</code> does not emit an error and\n\t\t\talways produces an infinite result or not-a-number.\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\t\tprint(3 / 0);      # prints Infinity\n\t\t\t\t\t# print(3 // 0);   # error\n\t\t\t\t\t# print(3 % 0);    # error\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t\t<p>\n\t\t\tThis error usually occurs when dividing by a variable or by\n\t\t\tthe result of a complex expression the value of which was not\n\t\t\tforeseen by the programmer to be zero. Example:\n\t\t\t<tscript>\n\t\t\t\tvar a = math.pi();\n\t\t\t\tvar b = a - 2 * math.atan(1e100);  # numerically evaluates to zero\n\t\t\t\t# var c = math.e() % b;            # error\n\t\t\t</tscript>\n\t\t\t</p>\n\t\t',children:[]},{id:"am-16",content:'\n\t\t\t<p>\n\t\t\tValues are said to be ordered if they can be compared with operators\n\t\t\t<code class="code">&lt;</code>, <code class="code">&lt;=</code>,\n\t\t\t<code class="code">&gt;</code>, and <code class="code">&gt;=</code>.\n\t\t\tThe rules for ordering values are found\n\t\t\t<a href="?doc=/language/expressions/binary-operators/order">here</a>.\n\t\t\tFor example, arrays can be ordered, while dictionaries cannot.\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\t\tprint(1 < 2);               # prints true\n\t\t\t\t\tprint("hello" > "world");   # prints false\n\t\t\t\t\tprint([] < [42]);           # prints true\n\t\t\t\t\t# print({} < {a: 7});       # error: dictionaries are not ordered\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t\t<p>\n\t\t\tThis error occurs frequently if one of the operands of the comparison\n\t\t\tis of a type the programmer did not expect. E.g., a function like\n\t\t\t<a href="?doc=/language/types/string">String.find</a> usually returns a\n\t\t\tnumber, but in occasional error conditions it returns null. Therefore\n\t\t\ta statement like\n\t\t\t<tscript>\n\t\t\t\tvar s = "hello";\n\t\t\t\t# ... code that modifies s ...\n\t\t\t\tif s.find("e") < 10 then print("found e close to the beginning");\n\t\t\t</tscript>\n\t\t\traises an error, but only if the search key is not found.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-16b",content:'\n\t\t\t<p>\n\t\t\tValues are said to be ordered if they can be compared with operators\n\t\t\t<code class="code">&lt;</code>, <code class="code">&lt;=</code>,\n\t\t\t<code class="code">&gt;</code>, and <code class="code">&gt;=</code>.\n\t\t\tThe rules for ordering values are found\n\t\t\t<a href="?doc=/language/expressions/binary-operators/order">here</a>.\n\t\t\tFor example, arrays can be ordered, while dictionaries cannot.\n\t\t\tIn most cases, values of different types cannot be ordered. Integer\n\t\t\tand Real are exceptions:\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\t\tprint(3 < 3.14159);        # prints true\n\t\t\t\t\t# print(3 < true);         # error: cannot order integer and boolean\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t\t<p>\n\t\t\tThis error occurs frequently if one of the operands of the comparison\n\t\t\tis of a type the programmer did not expect. E.g., a function like\n\t\t\t<a href="?doc=/language/types/string">String.find</a> usually returns a\n\t\t\tnumber, but in occasional error conditions it returns null. Therefore\n\t\t\ta statement like\n\t\t\t<tscript>\n\t\t\t\tvar s = "hello";\n\t\t\t\t# ... code that modifies s ...\n\t\t\t\tif s.find("e") < 10 then print("found e close to the beginning");\n\t\t\t</tscript>\n\t\t\traises an error, but only if the search key is not found.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-17",content:'\n\t\t\t<p>\n\t\t\tWhen calling the Array constructor with an integer as the first\n\t\t\targument, an array of the given size is created. If this size is\n\t\t\tnegative then this error is reported.\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\t\tvar a = Array(3, false);      # [false, false, false]\n\t\t\t\t\t# var b = Array(-5, false);   # error\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t\t<p>\n\t\t\tThis error occurs if the expression controlling the array size\n\t\t\thappens to become negative, which was usually not anticipated by\n\t\t\tthe programmer.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-18",content:'\n\t\t\t<p>\n\t\t\tThe <a href="?doc=/language/types/array">Array.insert</a> function\n\t\t\ttakes a position within the array as its argument. The position\n\t\t\tmust neither be negative nor exceed the array length. If it does,\n\t\t\tthen this error is reported.\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\t\tvar a = [6, "foo", true];\n\t\t\t\t\ta.insert(3, null);       # works, inserts at the end\n\t\t\t\t\t# a.insert(-2, false);   # error, negative position\n\t\t\t\t\t# a.insert(10, "bar");   # error, position beyond the end\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t\t<p>\n\t\t\tThis error occurs if the expression controlling the array position\n\t\t\thappens to take values not anticipated by the programmer.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-18b",content:'\n\t\t\t<p>\n\t\t\tThe <a href="?doc=/language/types/array">Array.pop</a> function removes\n\t\t\tthe last item of the array, which is returned. If the array is\n\t\t\tempty and hence there is no item to remove and return then this\n\t\t\terror is reported.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-19",content:'\n\t\t\t<p>\n\t\t\tThe <a href="?doc=/language/types/array">Array.sort</a> function can\n\t\t\tsort the array according to a user-specificed order relation,\n\t\t\tdefined by the \'comparator\' function passed as an argument to\n\t\t\tArray.sort. Given two items as arguments, this function must\n\t\t\treturn a numeric value. If the value is non-numeric, then this\n\t\t\terror is reported.\n            <div class="example">\n            <h3>Example</h3>\n            <tscript>\nvar arr = [1, 4, 2, 3];\n\nfunction order1(a, b) {\n    if a<=b then return -1;\n}\n\nfunction order2(a, b) {\n    if a<=b then return -1; else return 1;\n}\n\nfunction order3(a, b) {\n    if a<=b then return "-1"; else return "1";\n}\n\n# print(arr.sort(order1));                      # error - if a>b the order function returns Null, but sort expects a number\nprint(arr.sort(order2));                        # works fine\n# print(arr.sort(order3));                      # error - the order function returns String, but sort expects a number\n            </tscript>\n        </div>\n\t\t\t</p>\n\t\t',children:[]},{id:"am-20",content:'\n\t\t\t<p>\n\t\t\tThis error is reported if the items of a\n\t\t\t<a href="?doc=/language/types/string">string</a> are\n\t\t\t<a href="?doc=/language/expressions/item-access">accessed</a>\n\t\t\twith an invalid index of key type. Valid index types are\n\t\t\tinteger and range.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-21",content:'\n\t\t\t<p>\n\t\t\tWhen <a href="?doc=/language/expressions/item-access">accessing</a>\n\t\t\ta single character of a <a href="?doc=/language/types/string">string</a>\n\t\t\tas an integer code, the index must be a valid position within the\n\t\t\tstring. This error indicates that the index is negative.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-22",content:'\n\t\t\t<p>\n\t\t\tWhen <a href="?doc=/language/expressions/item-access">accessing</a>\n\t\t\ta single character of a <a href="?doc=/language/types/string">string</a>\n\t\t\tas an integer code, the index must be a valid position within the\n\t\t\tstring. This error indicates that the index exceeds the valid range,\n\t\t\twhich is upper bounded by the string size.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-23",content:'\n\t\t\t<p>\n\t\t\tWhen <a href="?doc=/language/expressions/item-access">accessing</a> an item\n\t\t\tof an array, a valid (zero-based) index is neither negative, not does it\n\t\t\texceed the size of the array. This error indicates that the index is\n\t\t\tnegative. This error is usually caused by an expression evaluating to a\n\t\t\tnegative number, which was not anticipated by the programmer.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-24",content:'\n\t\t\t<p>\n\t\t\tWhen <a href="?doc=/language/expressions/item-access">accessing</a> an item\n\t\t\tof an <a href="?doc=/language/types/array">array</a>, a valid (zero-based)\n\t\t\tindex is neither negative, not does it exceed the size of the array.\n\t\t\tThis error indicates that the index is at least at large as the array size.\n\t\t\tThe error is usually caused by an expression evaluating to a too large\n\t\t\tnumber, which was not anticipated by the programmer.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-25",content:'\n\t\t\t<p>\n\t\t\tWhen <a href="?doc=/language/expressions/item-access">accessing</a> an item\n\t\t\tof an <a href="?doc=/language/types/array">array</a>, a valid index is of\n\t\t\ttype integer or range. If the expression is on the left-hand-side of an\n\t\t\tassignment operator, then the only valid index type is an integer. This\n\t\t\terror indicates that the index expression evaluates to a different type.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-26",content:'\n\t\t\t<p>\n\t\t\tWhen <a href="?doc=/language/expressions/item-access">accessing</a> an item\n\t\t\tof an <a href="?doc=/language/types/array">array</a>, a valid index is of\n\t\t\ttype integer or range. This error indicates that the index expression\n\t\t\tevaluates to a different type.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-27",content:'\n\t\t\t<p>\n\t\t\tWhen <a href="?doc=/language/expressions/item-access">accessing</a> an item\n\t\t\tof a <a href="?doc=/language/types/dictionary">dictionary</a>, the index\n\t\t\tmust be a key of the dictionary. This error indicates that the index was\n\t\t\tnot found as a key in the dictionary.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-28",content:'\n\t\t\t<p>\n\t\t\tWhen <a href="?doc=/language/expressions/item-access">accessing</a> an item\n\t\t\tof a <a href="?doc=/language/types/dictionary">dictionary</a>, a valid key\n\t\t\tis of type string. This error indicates that the index expression\n\t\t\tevaluates to a different type.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-29",content:'\n\t\t\t<p>\n\t\t\tWhen <a href="?doc=/language/expressions/item-access">accessing</a> an item\n\t\t\tof a <a href="?doc=/language/types/range">range</a>, the index must be a\n\t\t\tvalid index of an array representing the elements of the range. This\n\t\t\tmeans that it must not be negative, and it must be less than the size of\n\t\t\tthe range. This error indicates that the index is outside these bounds.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-30",content:'\n\t\t\t<p>\n\t\t\tWhen <a href="?doc=/language/expressions/item-access">accessing</a> an item\n\t\t\tof a <a href="?doc=/language/types/range">range</a>, the index must be a of\n\t\t\ttype integer or range. This error indicates that the index expression\n\t\t\tevaluates to a different type.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-31",content:'\n\t\t\t<p>\n\t\t\tThe <a href="?doc=/language/expressions/item-access">access operator</a>\n\t\t\tprovides access to the items of a container. The only types supporting\n\t\t\tthis mechanism are string, array, dictionary, and range. This error\n\t\t\tindicates that it was attempted to access an item of a different type.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-31b",content:'\n\t\t\t<p>\n\t\t\tThe <a href="?doc=/language/expressions/item-access">access operator</a>\n\t\t\tprovides access to the items of a container. The only types supporting\n\t\t\tthis mechanism when used on the left-hand-side of an assignment are\n\t\t\tarray and dictionary. This error indicates that it was attempted to\n\t\t\tset an item of a different type.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-32",content:'\n\t\t\t<p>\n\t\t\tThe left-hand side of an\n\t\t\t<a href="?doc=/language/statements/assignments">assignment operator</a>\n\t\t\tis an expression. However, not all expressions can be assigned to.\n\t\t\tThis error indicates that it was attempted to assign to an expression\n\t\t\tthat does not refer to a variable in which the result of the\n\t\t\tright-hand-side can be stored.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-33",content:'\n\t\t\t<p>\n\t\t\tThe condition in an\n\t\t\t<a href="?doc=/language/statements/if-then-else">if-then-else</a>\n\t\t\tstatement decides whether the then-branch or the else-branch is\n\t\t\texecuted. The expression must evaluate to a\n\t\t\t<a href="?doc=/language/types/boolean">boolean</a> value, otherwise\n\t\t\tthis error is triggered.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-34",content:'\n\t\t\t<p>\n\t\t\tA <a href="?doc=/language/statements/for-loops">for-loop</a> iterates\n\t\t\tover the items of a range or array. If the expression defining the\n\t\t\tcontainer evaluates to a different type then this error is emitted.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-35",content:'\n\t\t\t<p>\n\t\t\tA <a href="?doc=/language/statements/for-loops">for-loop</a> stores\n\t\t\tthe current item of the container it iterates over in a variable.\n\t\t\tIt this variable is not declared inside the loop, then an arbitrary\n\t\t\tname can be provided. This name must refer to a variable, otherwise\n\t\t\tthis error is triggered.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-36",content:'\n\t\t\t<p>\n\t\t\tThe condition in a\n\t\t\t<a href="?doc=/language/statements/do-while-loops">do-while loop</a>\n\t\t\tdecides whether to stop or to continue the loop. The expression\n\t\t\tmust evaluate to a <a href="?doc=/language/types/boolean">boolean</a>\n\t\t\tvalue, otherwise this error is triggered.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-37",content:'\n\t\t\t<p>\n\t\t\tThe condition in a\n\t\t\t<a href="?doc=/language/statements/while-do-loops">while-do loop</a>\n\t\t\tdecides whether to stop or to continue the loop. The expression\n\t\t\tmust evaluate to a <a href="?doc=/language/types/boolean">boolean</a>\n\t\t\tvalue, otherwise this error is triggered.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-38",content:'\n\t\t\t<p>\n\t\t\tLoading a value with the standard library\'s\n\t\t\t<code class="code">load</code> function failed because the key does\n\t\t\tnot exist.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tThis error occurs when trying to load a value from a key that was\n\t\t\tnot saved before. Use the <code class="code">exists</code> function\n\t\t\tto check whether a key exists.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-39",content:'\n\t\t\t<p>\n\t\t\tSaving a value with the standard library\'s <code class="code">save</code>\n\t\t\tfunction failed. This happens for two reasons.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tThe first and more usual cause is that the value is not a\n\t\t\t<a target="_blank" href="http://json.org/">JSON</a> constant.\n\t\t\tValues of type Null, Boolean, Integer, Real, and String are legal,\n\t\t\tas well as Array and Dictionary, if all of the values stored\n\t\t\ttherein are legal JSON values and the data structure is an\n\t\t\tacyclic graph (a tree).\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tThis error occurs if the value to be stored is or contains a value\n\t\t\tof a disallowed type, like a Range, Function, Type, or a user-defined\n\t\t\tclass. This error is also reported if the data structure is recursive,\n\t\t\ti.e., if an array or dictionary contains itself as a value, possibly\n\t\t\tindirectly.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tThe second reason is that the storage is full, i.e., its quota is\n\t\t\texceeded. Webservers usually allow to store data in the order of a\n\t\t\tfew megabytes per origin. When that space is full and the value to\n\t\t\tbe stored would exceed the quota, then this error is reported.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tNote that the available space is shared between saved programs\n\t\t\t(usually not very much data) and data stored by <i>all</i> programs.\n\t\t\tTo avoid this error, it can make sense to remove unneeded entries\n\t\t\tfrom the browser\'s local storage. Browser developer tools usually\n\t\t\toffer a way to view and modify local storage. TScript files are\n\t\t\tstored under keys starting with <code class="code">tscript.data.</code>\n\t\t\t</p>\n\t\t',children:[]},{id:"am-40",content:"\n\t\t\t<p>\n\t\t\tThe given event name is not known.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tThe most probable reason for this error is a misspelled event name.\n\t\t\t</p>\n\t\t",children:[]},{id:"am-41",content:'\n\t\t\t<p>\n\t\t\tThe function registered as an event handler is expected to take exactly\n\t\t\tone argument, the event object. A common way to declare event handlers\n\t\t\tis as follows:\n\t\t\t<tscript>\n\t\t\t\tfunction onKey(event)\n\t\t\t\t{\n\t\t\t\t\tprint(event.key);\n\t\t\t\t}\n\t\t\t\tsetEventHandler("canvas.keydown", onKey);\n\t\t\t\tsetEventHandler("canvas.keyup", function(event) { print(event.key); });\n\t\t\t</tscript>\n\t\t\tThe event parameter must be present even for events emitting an empty\n\t\t\tevent dictionary.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tThis error is raised if the event handler takes no arguments or more\n\t\t\tthan one argument.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-42",content:"\n\t\t\t<p>\n\t\t\tThe function <i>deepcopy</i> creates a deep copy of a container.\n\t\t\tIf the container holds other containers as values then they are\n\t\t\tdeep copied, too. The copied data structure must fulfill the\n\t\t\tfollowing requirements:\n\t\t\t<ul>\n\t\t\t\t<li>It must not contain a lambda function with an enclosed variable referring to a mutable value.</li>\n\t\t\t\t<li>It must not contain a member function bound to an object.</li>\n\t\t\t\t<li>It must not contain an object.</li>\n\t\t\t\t<li>It must not contain a loop, i.e., contain a value as its own sub-value.</li>\n\t\t\t</ul>\n\t\t\tThis error message indicates that at least one of the requirements\n\t\t\twas violated.\n\t\t\t</p>\n\t\t",children:[]},{id:"am-43",content:"\n\t\t\t<p>\n\t\t\tThe error indicates that a recursive data structure was passed\n\t\t\tto a function that cannot handle this case since it would result\n\t\t\tin an infinite recursion, as illustrated by the following example:\n\t\t\t<tscript>\n\t\t\t\tvar a = [];\n\t\t\t\ta.push(a);\n\t\t\t\t# print(a);          # error; would result in infinite recursion\n\t\t\t</tscript>\n\t\t\t</p>\n\t\t",children:[]},{id:"am-44",content:'\n\t\t\t<p>\n\t\t\tWhen constructing a <a href="?doc=/library/audio">stereo sound</a>,\n\t\t\tthe buffer arrays of all channels (i.e., left and right channel)\n\t\t\tmust have the same size. This error indicates that the sizes differ.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-44b",content:'\n\t\t\t<p>\n\t\t\tWhen constructing a <a href="?doc=/library/audio">sound object</a>,\n\t\t\tthe sample frequency must be within a range supported by the underlying\n\t\t\tsystem. Browsers are required to support values at least within the\n\t\t\trange 8000 to 96000.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-44c",content:'\n\t\t\t<p>\n\t\t\tWhen constructing a <a href="?doc=/library/audio">sound object</a>,\n\t\t\tthe number of channels must be at least one. Providing an empty array\n\t\t\traises this error. There is currently no upper limit on the number of\n\t\t\tchannels, although only values of 1 (mono) and 2 (stereo) can generally\n\t\t\tbe expected to work in all environments.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-45",content:'\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\tThe error indicates that a too large object was created.\n\t\t\t\t\t\tThis applies (in theory) to the types\n\t\t\t\t\t\tRange, Array, and Dictionary, but in practice it applies only\n\t\t\t\t\t\tto <a href="?doc=/language/types/range">ranges</a>. In the\n\t\t\t\t\t\tfollowing code\n\t\t\t\t\t\t<tscript do-not-run>\n\t\t\t\t\t\t\tvar r = -2000000000:2000000000;\n\t\t\t\t\t\t</tscript>\n\t\t\t\t\t\tthe range would span 4000000000 (4 billion) numbers. That\n\t\t\t\t\t\tnumber exceeds the Integer range and hence triggers this\n\t\t\t\t\t\terror message.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t',children:[]},{id:"am-46",content:'\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\tThe error indicates that a given resource string is invalid,\n\t\t\t\t\t\tor that the resource is of the wrong type. First of all, make\n\t\t\t\t\t\tsure that the string is a valid data URI. For example, a data\n\t\t\t\t\t\tURI encoding a JPEG image should start with\n\t\t\t\t\t\t<code>"data:image/jpeg;base64,"</code> followed by\n\t\t\t\t\t\tunsystematically looking data.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\tBesides a broken data URI, this error can occur when providing\n\t\t\t\t\t\tan unsuitable data type. For example, creating a sound object\n\t\t\t\t\t\tfrom image data raises this error.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t',children:[]},{id:"am-47",content:"\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\tThe error indicates that an array of the wrong size was passed\n\t\t\t\t\t\tto a function. For example, the <code>canvas.setPixel</code>\n\t\t\t\t\t\tfunction expects an array of size four as its last parameter.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t",children:[]},{id:"am-48",content:"\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\tThis error is raised when a file is not found in an\n\t\t\t\t\t\t<keyword>include</keyword> statement.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t",children:[]},{id:"am-49",content:"\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\tThis error is raised when a (possibly filled or framed) circle\n\t\t\t\t\t\tis drawn on the canvas with a negative radius.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t",children:[]},{id:"am-50",content:"\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\tThis error occurs on the attempt of initializing (constructing)\n\t\t\t\t\t\ta built-in value from itself, or from another value that is still\n\t\t\t\t\t\tin the process of being constructed. This is a very rare case.\n\t\t\t\t\t\tFor example, it occurs when instantiating an object of the\n\t\t\t\t\t\tfollowing class:\n\t\t\t\t\t\t<tscript do-not-run>\n\t\t\t\t\t\t\tclass BadInteger : Integer\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpublic:\n\t\t\t\t\t\t\t\tconstructor()\n\t\t\t\t\t\t\t\t: super(this)   # attempt to construct integer part from itself\n\t\t\t\t\t\t\t\t{ }\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</tscript>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t",children:[]}]},{id:"name",name:"Name Lookup Errors",title:"Name Lookup Errors",content:'\n\t\t<p>\n\t\tA <a href="?doc=/language/expressions/names">name</a> refers to a declaration\n\t\taccording to the name lookup rules. The errors in this category indicate\n\t\tthat something went wrong either when declaring or when resolving a name.\n\t\t</p>\n\t',children:[{id:"ne-1",content:'\n\t\t\t<p>\n\t\t\tWhen providing named arguments in a function call, each parameter\n\t\t\tcan be specified only once. This error indicates that a parameter\n\t\t\twas specified multiple times. This includes the case that the\n\t\t\tparameter was specified as a positional and as a names argument.\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\t\tfunction f(a, b, c=0) { }\n\t\t\t\t\tf(3, 5);           # okay\n\t\t\t\t\t# f(3, 5, b=8);    # error\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t\t<p>\n\t\t',children:[]},{id:"ne-2",content:'\n\t\t\t<p>\n\t\t\tWhen calling a function with named parameters then the function to be\n\t\t\tcalled must have a parameter with the given name &ndash; otherwise\n\t\t\tthis error is reported.\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\t\tfunction f(a, b = 0) { }\n\t\t\t\t\tf(a=3);      # okay\n\t\t\t\t\t# f(x=4);    # error\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t',children:[]},{id:"ne-3",content:'\n\t\t\t<p>\n\t\t\tA function cannot be called with more arguments than it has\n\t\t\tparameters. An attempt to do so results in this error.\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\tfunction f(a, b, c) { }\n\t\t\t\tf(3, 5, 8);         # okay\n\t\t\t\t# f(3, 5, 8, 2);    # error\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t',children:[]},{id:"ne-4",content:'\n\t\t\t<p>\n\t\t\tWhen calling a function, all (non-default) parameters must be\n\t\t\tspecified by providing corresponding (positional or named)\n\t\t\targuments. Failure to specify a parameter results in this error.\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\tfunction f(a, b, c) { }\n\t\t\t\tf(3, 5, 8);   # okay\n\t\t\t\t# f(3, 8);    # error: c not specified\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t',children:[]},{id:"ne-5",content:"\n\t\t\t<p>\n\t\t\tThis error means that the given name cannot be resolved\n\t\t\tsince no declaration of the given name exists. The three most\n\t\t\tcommon causes of this error are\n\t\t\t<ol>\n\t\t\t\t<li>the programmer forgot to declare the name,</li>\n\t\t\t\t<li>the name was mistyped, and</li>\n\t\t\t\t<li>the programmer forgot to make the name available with a use directive.</li>\n\t\t\t</ol>\n\t\t\t</p>\n\t\t",children:[]},{id:"ne-6",content:"\n\t\t\t<p>\n\t\t\tIn certain situations a name is resolved into a variable that cannot\n\t\t\tbe accessed from the current context. This error refers to the case\n\t\t\tthat the variable requires a <keyword>this</keyword> argument that\n\t\t\tis not present, i.e., when accessing a non-static attribute from\n\t\t\twithin a nested function or class.\n\t\t\t</p>\n\t\t\t<div>\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\tclass A\n\t\t\t\t{\n\t\t\t\tpublic:\n\t\t\t\t\tvar x;\n\t\t\t\t\tclass B\n\t\t\t\t\t{\n\t\t\t\t\tpublic:\n\t\t\t\t\t\tstatic function f()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t# print(x);   # error\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t",children:[]},{id:"ne-7",content:"\n\t\t\t<p>\n\t\t\tIn certain situations a name is resolved into a variable that cannot\n\t\t\tbe accessed from the current context. This error refers to the case\n\t\t\tthat the name refers to a local variable in an outer non-global scope.\n\t\t\t</p>\n\t\t\t<div>\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\tfunction f()\n\t\t\t\t{\n\t\t\t\t\tvar a = 7;\n\t\t\t\t\tfunction g()\n\t\t\t\t\t{\n\t\t\t\t\t\t# print(a);   # error\n\t\t\t\t\t}\n\t\t\t\t\tvar h = function[a]()\n\t\t\t\t\t{\n\t\t\t\t\t\tprint(a);     # okay\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t",children:[]},{id:"ne-8",content:"\n\t\t\t<p>\n\t\t\tIn certain situations a name is resolved into a variable that cannot\n\t\t\tbe accessed from the current context. This error refers to the case\n\t\t\tthat the only candidate to which the name could resolve is a private\n\t\t\tmember up a (direct or indirect) super class.\n\t\t\t</p>\n\t\t\t<div>\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\tclass A\n\t\t\t\t{\n\t\t\t\tprivate:\n\t\t\t\t\tvar x;\n\t\t\t\t}\n\t\t\t\tclass B : A\n\t\t\t\t{\n\t\t\t\tpublic:\n\t\t\t\t\tfunction f()\n\t\t\t\t\t{\n\t\t\t\t\t\t# print(x);   # error\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t",children:[]},{id:"ne-11",content:"\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\tThis error indicates that a name refers to a namespace, while a\n\t\t\t\t\t\tdifferent entity was expected.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<h3>Example</h3>\n\t\t\t\t\t\t\t<tscript>\n\t\t\t\t\t\t\tnamespace A\n\t\t\t\t\t\t\t{ }\n\t\t\t\t\t\t\tclass B # : A      # error; super class expected, namespace found\n\t\t\t\t\t\t\t{ }\n\t\t\t\t\t\t\t</tscript>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t",children:[]},{id:"ne-12",content:'\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\tThe <a href="?doc=/language/expressions/member-access">member access operator .</a>\n\t\t\t\t\t\treferences a public member of a type. If the left-hand-side evaluates\n\t\t\t\t\t\tto a type then access is restricted to public static members.\n\t\t\t\t\t\tThis error is reported if neither the type nor any of its super\n\t\t\t\t\t\tclasses has a public static member of the given name.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t',children:[]},{id:"ne-13",content:'\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\tThe <a href="?doc=/language/expressions/member-access">member access operator .</a>\n\t\t\t\t\t\treferences a public member of a type. This error is reported if neither\n\t\t\t\t\t\tthe type nor any of its super classes has a public member of the given\n\t\t\t\t\t\tname.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t',children:[]},{id:"ne-14",content:"\n\t\t\t<p>\n\t\t\tNames declared within a scope must be unique. This error indicates\n\t\t\tthat a variable name is already used by a different declaration.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tIn some contexts it is not obvious which names belong to which scope.\n\t\t\tOne typical pitfall is that function parameters, closure parameters,\n\t\t\tand the function body are all in the same scope.\n\t\t\t</p>\n\t\t",children:[]},{id:"ne-15",content:"\n\t\t\t<p>\n\t\t\tNames declared within a scope must be unique. This error indicates\n\t\t\tthat a function name is already used by a different declaration.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tIn some contexts it is not obvious which names belong to which scope.\n\t\t\tOne typical pitfall is that function parameters, closure parameters,\n\t\t\tand the function body are all in the same scope.\n\t\t\t</p>\n\t\t",children:[]},{id:"ne-16",content:'\n\t\t\t<p>\n\t\t\tNames declared within a scope must be unique. This error indicates\n\t\t\tthat a parameter name is already used by a different declaration.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tIn some contexts it is not obvious which names belong to which scope.\n\t\t\tOne typical pitfall is that function parameters, closure parameters,\n\t\t\tand the function body are all in the same scope. Therefore a function\n\t\t\tparameter can conflict with a\n\t\t\t<a href="?doc=/language/expressions/literals/anonymous-functions">closure</a>\n\t\t\tparameter, which is declared first.\n\t\t\t</p>\n\t\t',children:[]},{id:"ne-17",content:'\n\t\t\t<p>\n\t\t\tAll <a href="?doc=/language/expressions/literals/anonymous-functions">closure</a>\n\t\t\tparameters belong to the same scope, therefore they must be unique.\n\t\t\tIf two closure parameters are declared with same name are declared\n\t\t\tthen this error is reported.\n\t\t\t</p>\n\t\t',children:[]},{id:"ne-18",content:"\n\t\t\t<p>\n\t\t\tNames declared within a scope must be unique. This error indicates\n\t\t\tthat a class name is already used by a different declaration.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tIn some contexts it is not obvious which names belong to which scope.\n\t\t\tOne typical pitfall is that function parameters, closure parameters,\n\t\t\tand the function body are all in the same scope.\n\t\t\t</p>\n\t\t",children:[]},{id:"ne-19",content:"\n\t\t\t<p>\n\t\t\tNames declared within a scope must be unique. This error indicates\n\t\t\tthat a namespace name is already used by a different declaration.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tIn some contexts it is not obvious which names belong to which scope.\n\t\t\tOne typical pitfall is that function parameters, closure parameters,\n\t\t\tand the function body are all in the same scope.\n\t\t\t</p>\n\t\t",children:[]},{id:"ne-21",content:'\n\t\t\t<p>\n\t\t\tThe <a href="?doc=/language/declarations/classes">constructor of a class</a>\n\t\t\tcan invoke the constructor of the super class with a special syntax\n\t\t\tstarting with a colon after the parameter list. Calling the super class\n\t\t\tconstructor makes sense only if the class has a super class. This error\n\t\t\tindicates that the super class constructor is called although there does\n\t\t\tnot exist a super class.\n\t\t\t</p>\n\t\t',children:[]},{id:"ne-22",content:'\n\t\t\t<p>\n\t\t\tThe <a href="?doc=/language/declarations/classes">super class of a class</a>\n\t\t\tis provided as a name. The name must refer to a type, otherwise this\n\t\t\terror is reported.\n\t\t\t</p>\n\t\t',children:[]},{id:"ne-23",content:'\n\t\t\t<p>\n\t\t\tWhen importing all names from a namespace with a\n\t\t\t<a href="?doc=/language/directives/use">use directive</a> of the form\n\t\t\t<ebnf do-not-check>"use", "namespace", use-name</ebnf>, then the namespace is\n\t\t\tprovided as a name. This is done in the assumption that the name\n\t\t\tindeed refers to a namespace, otherwise this error is triggered.\n\t\t\t</p>\n\t\t',children:[]},{id:"ne-24",content:'\n\t\t\t<p>\n\t\t\tWhen importing a name from a namespace with a\n\t\t\t<a href="?doc=/language/directives/use">use directive</a>, then the\n\t\t\tnames are made available in the current scope as if the declarations\n\t\t\twere members of the scope. Since names of declarations in a scope\n\t\t\tmust be unique, this can trigger conflicts. This error indicates that\n\t\t\tthe attempt to import a name creates such a conflict, since the name\n\t\t\twas already taken by a declaration or by another name import.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tThe often easiest way to fix this problem is to remove the use directive\n\t\t\tand to access the declaration by its full name. When importing a single\n\t\t\tname, a better solution is to import the conflicting declaration under\n\t\t\tan alias name.\n\t\t\t</p>\n\t\t',children:[]},{id:"ne-25",content:'\n\t\t\t<p>\n\t\t\tIt was attempted to call a constructor of a type with a protected or\n\t\t\tprivate constructor from outside the scope of the class, and for a\n\t\t\tprotected constructor, from outside the scope of its sub-classes.\n\t\t\tThis violates the member access rules explained\n\t\t\t<a href="?doc=/language/declarations/classes">here</a>.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tAn easy fix is to make the constructor public. However, this error\n\t\t\tusually indicates that objects of the given type should not ever be\n\t\t\tcreated directly from outside the class.\n\t\t\t</p>\n\t\t',children:[]},{id:"ne-26",content:"\n\t\t\t<p>\n\t\t\tIt was attempted to use a class as its own super class.\n\t\t\tThat's not possible because inheritance chains must be cycle-free.\n\t\t\t</p>\n\t\t",children:[]},{id:"ne-28",content:'\n\t\t\t<p>\n\t\t\tIt was attempted to use the result of an expression that can only\n\t\t\tbe resolved at runtime as a loop variable. The only variables\n\t\t\tallowed as loop counters in a for-loop are local and global\n\t\t\tvariables, possible inside of namespaces.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tThis error occur if something along the following lines is\n\t\t\tattempted:\n\t\t\t</p>\n\t\t\t<div>\n\t\t\t\t<tscript do-not-run>\n\t\t\t\tvar counters = [0, 0];\n\t\t\t\tfor counters[0] in 0:10 do\n\t\t\t\t\tfor counters[1] in 0:10 do \n\t\t\t\t\t\tprint("Hello");\n\t\t\t\t</tscript>\n\t\t\t\t<tscript do-not-run>\n\t\t\t\tclass A\n\t\t\t\t{\n\t\t\t\tpublic:\n\t\t\t\t\tvar counter;\n\t\t\t\t};\n\t\t\t\tvar a = A();\n\t\t\t\tfor a.counter in 0:10 do print("Hello");\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t\t<p>\n\t\t\tIn both cases, the reason for the failure is that the result\n\t\t\tof the expressions (like <code>counters[0]</code>,\n\t\t\t<code>counters[1]</code> and <code>a.counter</code>) is resolved\n\t\t\tdynamically at runtime. Dynamic name lookup is not supported by\n\t\t\tTScript for-loops.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tAs a remedy, use a variable name that can be resolved statically.\n\t\t\tIdeally, loop counters should be declared inside of the for-loop\n\t\t\twith the <keyword>var</keyword> keyword:\n\t\t\t</p>\n\t\t\t<div>\n\t\t\t\t<tscript do-not-run>\n\t\t\t\tfor var k in 0:10 do print("Hello");\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t\t<p>\n\t\t\tAlternatively, all "plain" variables accessible from the scope\n\t\t\tcontaining the loop work fine:\n\t\t\t</p>\n\t\t\t<div>\n\t\t\t\t<tscript do-not-run>\n\t\t\t\tvar k;\n\t\t\t\t{\n\t\t\t\t\tfor k in 0:10 do print("Hello");\n\t\t\t\t}\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t',children:[]},{id:"ne-29",content:"\n\t\t\t<p>\n\t\t\tWhile functions and classes are subject to hoisting (i.e., their names\n\t\t\tcan be used before they are declared), variables are not. To fix this\n\t\t\terror, move the declaration of the variable before its first use.\n\t\t\t</p>\n\t\t",children:[]},{id:"ne-30",content:'\n\t\t\t<p>\n\t\t\tIt was tried to access a non-static member without an object. Example:\n\t\t\t</p>\n\t\t\t<tscript do-not-run>\n\t\t\t\tclass A\n\t\t\t\t{\n\t\t\t\tpublic:\n\t\t\t\t\tfunction f()\n\t\t\t\t\t{ print("Hello"); }\n\t\t\t\t}\n\n\t\t\t\tvar a = A();\n\t\t\t\ta.f();   # works\n\t\t\t\tA.f();   # error\n\t\t\t</tscript>\n\t\t\t<p>\n\t\t\tTo fix the problem, make sure to access the member through an object\n\t\t\t(the variable <code>a</code> in the above example), not through its\n\t\t\tclass (the class <code>A</code> in the above example).\n\t\t\t</p>\n\t\t',children:[]}]},{id:"logic",name:"Logic Errors",title:"Logic Errors",content:"\n\t\tThe errors in this category indicate a severe bug in the logic of a\n\t\tTScript program.\n\t",children:[{id:"le-1",content:"\n\t\t\t<p>\n\t\t\tThis error indicates that too many function calls were nested.\n\t\t\tIt is often caused by an infinite recursion.\n\t\t\t</p>\n\t\t",children:[]},{id:"le-2",content:'\n\t\t\t<p>\n\t\t\tThe function <code class="code">enterEventMode</code> was called,\n\t\t\tdirectly or indirectly, from within an event handler. Event\n\t\t\thandling mode cannot be nested, hence this error is reported.\n\t\t\t</p>\n\t\t',children:[]},{id:"le-3",content:'\n\t\t\t<p>\n\t\t\tThis error indicates that the function\n\t\t\t<code class="code">quitEventMode</code> was called although the\n\t\t\tprogram was not in event handling mode.\n\t\t\t</p>\n\t\t',children:[]}]},{id:"user",name:"User-Defined Errors",title:"User-Defined Errors",content:"\n\t\tThis section collects errors reported by the program itself, not by\n\t\tthe TScript programming language and its runtime environment.\n\t",children:[{id:"ue-1",content:'\n\t\t\t<p>\n\t\t\tThe library function <a href="?doc=/library/core">assert</a> can be\n\t\t\tcalled in order to report an error in case a condition is violated.\n\t\t\tThe error is reported by user or library code, not by the core language.\n            <div class="example">\n            <h3>Example</h3>\n            <tscript do-not-run>\nvar a = 1;\n\nassert(a==2);           # this throws a runtime-assertion failed error\n            </tscript>\n        </div>\n\t\t\t</p>\n\t\t',children:[]},{id:"ue-2",content:'\n\t\t\t<p>\n\t\t\tThe library function <a href="?doc=/library/core">error</a> can be\n\t\t\tcalled in order to report an error. The error is reported by user\n\t\t\tor library code, not by the core language.\n            <div class="example">\n            <h3>Example</h3>\n            <tscript do-not-run>\nif not ...  then\n    error("condition was not fulfilled");           # this throws a runtime error\n            </tscript>\n        </div>\n\t\t\t</p>\n\t\t',children:[]},{id:"ue-3",content:'\n\t\t\t<p>\n\t\t\tIf an exception is <a href="?doc=/language/statements/throw">thrown</a>\n\t\t\tand not <a href="?doc=/language/statements/try-catch">caught</a> then\n\t\t\tthe program stops and this error message is reported. This is often\n\t\t\tunintended by the programmer and hints at an internal error that\n\t\t\tshould be fixed.\n            <div class="example">\n            <h3>Example</h3>\n            <tscript do-not-run>\nvar arr = [0, 1, 2, 3, 4, 5, 6];\n\ntry {\n    for var i in 0:10 do {\n        if i >= arr.size()\n            then throw(i);\n    }\n}\ncatch var ex do {                               # an error occurs if this catch block\'d be missing\n    print(ex + " is too big for array!");\n}\n            </tscript>\n        </div>\n\t\t\t</p>\n\t\t',children:[]}]},{id:"style",name:"Style Errors",title:"Style Errors",content:"\n\t\tThis section collects errors reported by the style checker. They are not\n\t\tprogramming errors in a strict sense. Yet, if configured to do so,\n\t\tTScript reports style errors to enforce good programming style. This\n\t\tbehavior can be changed in the configuration dialog.\n\t",children:[{id:"ste-1",content:'\n\t\t\t<p>\n\t\t\tThis error is reported if the indentation of a program is\n\t\t\tinconsistent. The indentation in each block must be larger\n\t\t\tthan in its surrounding block, and it must be consistent\n\t\t\twithin the block.\n\t\t\t<tscript>\n\t\t\tprint("hello");\n\t\t\t{\n\t\t\tprint("world");   # wrong; inner block indentation must\n\t\t\t                  # exceed outer block indentation\n\t\t\t}\n\t\t\t</tscript>\n\t\t\t</p>\n\t\t',children:[]},{id:"ste-2",content:'\n\t\t\t<p>\n\t\t\tThis error is reported if the indentation of program block\n\t\t\tmarkers is inconsistent, i.e., if the indentation of the line\n\t\t\tcontaining an opening brace differs from the indentation of\n\t\t\tthe line with the corresponding closing brace:\n\t\t\t<tscript>\n\t\t\tif true then {\n\t\t\t\tprint("true!");\n\t\t\t\t}   # This brace must not be indented\n\t\t\t</tscript>\n\t\t\t</p>\n\t\t',children:[]},{id:"ste-3",content:"\n\t\t\t<p>\n\t\t\tThis error can occur when a variable, function, or namespace name\n\t\t\tstarts with a capital letter. By convention, these names start with\n\t\t\ta lowercase letter or an underscore.\n\t\t\t</p>\n\t\t\t<tscript>\n\t\t\t{\n\t\t\t\tvar foo = 7;   # okay\n\t\t\t\tvar Bar = 8;   # wrong; easily mistaken for a type\n\t\t\t}\n\t\t\t</tscript>\n\t\t",children:[]},{id:"ste-4",content:"\n\t\t\t<p>\n\t\t\tThis error can occur when a class name starts with a\n\t\t\tlowercase letter or an underscore. By convention, TScript\n\t\t\tclass names start with a capital letter.\n\t\t\t</p>\n\t\t\t<tscript>\n\t\t\t{\n\t\t\t\tclass Foo {}   # okay\n\t\t\t\tclass bar {}   # wrong\n\t\t\t}\n\t\t\t</tscript>\n\t\t",children:[]}]},{id:"internal",name:"Internal Errors",title:"Internal Errors",content:"\n\t\tThis section collects errors reported by TScript about itself.\n\t\tSuch errors <i>should of course never occur</i>, however, it is\n\t\tclear that bugs are unavoidable.\n\t",children:[{id:"ie-1",content:"\n\t\t\t<p>\n\t\t\tThis error is reported if the TScript parser fails to\n\t\t\toperate as expected. This is not the fault of the program\n\t\t\twritten by the user, but rather a bug on the side of\n\t\t\tTScript.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tThis should never happen. If it does happens to you, then\n\t\t\tplease report the bug.\n\t\t\t</p>\n\t\t",children:[]},{id:"ie-2",content:"\n\t\t\t<p>\n\t\t\tThis error is reported if the TScript interpreter fails to\n\t\t\toperate as expected. This is not the fault of the program\n\t\t\twritten by the user, but rather a bug on the side of\n\t\t\tTScript or its standard library.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tThis should never happen. If it does happens to you, then\n\t\t\tplease report the bug.\n\t\t\t</p>\n\t\t",children:[]}]}]}},9295:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.doc_examples=void 0,e.doc_examples={id:"examples",name:"Example Programs",title:"Example Programs",content:'\n\t<p>\n\tThis section provides example programs demonstrating the use of\n\tturtle and canvas graphics. They can by copied by clicking the code.\n\tSimply paste the code into the editor and run the programs. You may\n\tneed to activate the corresponding panels (turtle or canvas) in\n\torder to see the output.\n\t</p>\n\t<ul>\n\t\t<li><a href="?doc=/examples/koch-snowflake">Koch snowflake (turtle graphics)</a></li>\n\t\t<li><a href="?doc=/examples/game-of-life">Conway\'s Game of Life (canvas graphics)</a></li>\n\t\t<li><a href="?doc=/examples/cube-3D">Rotating 3D Cube (canvas graphics)</a></li>\n\t</ul>\n',children:[{id:"koch-snowflake",name:"Koch Snowflake",title:"Koch Snowflake",content:"\n\t\t<tscript do-not-run>\n\t\t\t#\n\t\t\t# Koch snowflake\n\t\t\t# https://en.wikipedia.org/wiki/Koch_snowflake\n\t\t\t#\n\n\t\t\tfunction segment(length, depth)\n\t\t\t{\n\t\t\t\tif depth <= 0 then\n\t\t\t\t{\n\t\t\t\t\tturtle.move(length);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tsegment(length/3, depth-1);\n\t\t\t\t\tturtle.turn(60);\n\t\t\t\t\tsegment(length/3, depth-1);\n\t\t\t\t\tturtle.turn(-120);\n\t\t\t\t\tsegment(length/3, depth-1);\n\t\t\t\t\tturtle.turn(60);\n\t\t\t\t\tsegment(length/3, depth-1);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar h0 = -80 / 3 * math.sqrt(3);\n\t\t\tfor var depth in 1:7 do\n\t\t\t{\n\t\t\t\tturtle.reset(-80, h0, 90);\n\t\t\t\tturtle.color(0, 0, 0);\n\t\t\t\tfor 0:3 do\n\t\t\t\t{\n\t\t\t\t\tsegment(160, depth);\n\t\t\t\t\tturtle.turn(-120);\n\t\t\t\t}\n\t\t\t\tif depth == 6 then break;\n\t\t\t\twait(1000);\n\t\t\t\tturtle.reset(-80, h0, 90);\n\t\t\t\tturtle.color(1, 1, 1);\n\t\t\t\tfor 0:3 do\n\t\t\t\t{\n\t\t\t\t\tsegment(160, depth);\n\t\t\t\t\tturtle.turn(-120);\n\t\t\t\t}\n\t\t\t}\n\t\t</tscript>\n\t",children:[]},{id:"game-of-life",name:"Game of Life",title:"Game of Life",content:'\n\t\t<tscript do-not-run>\n\t\t\t#\n\t\t\t# Game of Life\n\t\t\t# https://en.wikipedia.org/wiki/Conway%27s_Game_of_Life\n\t\t\t#\n\n\t\t\t# initialize the field\n\t\t\tvar fieldsize = 25;\n\t\t\tvar field = [];\n\t\t\tfor var y in 0:fieldsize do\n\t\t\t{\n\t\t\t\tvar row = [];\n\t\t\t\tfor var x in 0:fieldsize do row.push(math.random() < 0.2);\n\t\t\t\tfield.push(row);\n\t\t\t}\n\n\t\t\t# progress the dynamics by one time step\n\t\t\tfunction step()\n\t\t\t{\n\t\t\t\tvar newfield = [];\n\t\t\t\tfor var y in 0:fieldsize do\n\t\t\t\t{\n\t\t\t\t\tvar row = [];\n\t\t\t\t\tfor var x in 0:fieldsize do\n\t\t\t\t\t{\n\t\t\t\t\t\tvar n = 0;\n\t\t\t\t\t\tfor var b in -1:2 do\n\t\t\t\t\t\t\tfor var a in -1:2 do\n\t\t\t\t\t\t\t\tif field[(y+b+fieldsize) % fieldsize][(x+a+fieldsize) % fieldsize] then n += 1;\n\t\t\t\t\t\tif field[y][x] then row.push(n == 3 or n == 4);\n\t\t\t\t\t\telse row.push(n == 3);\n\t\t\t\t\t}\n\t\t\t\t\tnewfield.push(row);\n\t\t\t\t}\n\t\t\t\tfield = newfield;\n\t\t\t}\n\n\t\t\t# redraw the whole field\n\t\t\tfunction draw()\n\t\t\t{\n\t\t\t\t# size of a cell in pixels\n\t\t\t\tvar sz = math.min(canvas.width() // fieldsize, canvas.height() // fieldsize);\n\t\t\t\tif sz <= 0 then return;\n\n\t\t\t\tfor var y in 0:fieldsize do\n\t\t\t\t{\n\t\t\t\t\tfor var x in 0:fieldsize do\n\t\t\t\t\t{\n\t\t\t\t\t\tif field[y][x] then canvas.setFillColor(1, 1, 1);\n\t\t\t\t\t\telse canvas.setFillColor(0, 0, 1);\n\t\t\t\t\t\tcanvas.fillRect(x*sz, y*sz, sz, sz);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t# draw the initial state\n\t\t\tcanvas.setFillColor(0, 0, 0);\n\t\t\tcanvas.clear();\n\t\t\tdraw();\n\n\t\t\t# infinite "game" loop\n\t\t\twhile true do\n\t\t\t{\n\t\t\t\tstep();\n\t\t\t\tdraw();\n\t\t\t}\n\t\t</tscript>\n\t',children:[]},{id:"cube-3D",name:"3D Cube",title:"3D Cube",content:'\n\t\t<tscript do-not-run>\n\t\t\t#\n\t\t\t# 3D cube\n\t\t\t#\n\n\t\t\tuse namespace math;\n\n\t\t\tclass Face\n\t\t\t{\n\t\t\tpublic:\n\t\t\t\tvar color;\n\t\t\t\tvar points;\n\t\t\t\tconstructor(points_, color_)\n\t\t\t\t{\n\t\t\t\t\tpoints = points_;\n\t\t\t\t\tcolor = color_;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar points3d = [\n\t\t\t\t\t[-1,-1,-1],\n\t\t\t\t\t[+1,-1,-1],\n\t\t\t\t\t[-1,+1,-1],\n\t\t\t\t\t[+1,+1,-1],\n\t\t\t\t\t[-1,-1,+1],\n\t\t\t\t\t[+1,-1,+1],\n\t\t\t\t\t[-1,+1,+1],\n\t\t\t\t\t[+1,+1,+1],\n\t\t\t\t];\n\t\t\tvar faces = [\n\t\t\t\t\tFace([0,1,3,2], [1,0,0]),\n\t\t\t\t\tFace([1,0,4,5], [1,1,0]),\n\t\t\t\t\tFace([3,1,5,7], [0,1,0]),\n\t\t\t\t\tFace([2,3,7,6], [0,0,1]),\n\t\t\t\t\tFace([0,2,6,4], [1,0,1]),\n\t\t\t\t\tFace([6,7,5,4], [0,1,1]),\n\t\t\t\t];\n\n\t\t\tfunction matmat(m1, m2)\n\t\t\t{\n\t\t\t\tvar ret = [[1,0,0], [0,1,0], [0,0,1]];\n\t\t\t\tfor var i in 0:3 do\n\t\t\t\t{\n\t\t\t\t\tfor var j in 0:3 do\n\t\t\t\t\t{\n\t\t\t\t\t\tvar sum = 0.0;\n\t\t\t\t\t\tfor var k in 0:3 do sum += m1[i][k] * m2[k][j];\n\t\t\t\t\t\tret[i][j] = sum;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn ret;\n\t\t\t}\n\n\t\t\tfunction matvec(m, v)\n\t\t\t{\n\t\t\t\tvar ret = [0,0,0];\n\t\t\t\tfor var j in 0:3 do\n\t\t\t\t{\n\t\t\t\t\tvar sum = 0.0;\n\t\t\t\t\tfor var k in 0:3 do sum += m[j][k] * v[k];\n\t\t\t\t\tret[j] = sum;\n\t\t\t\t}\n\t\t\t\treturn ret;\n\t\t\t}\n\n\t\t\tfunction projection(v)\n\t\t\t{\n\t\t\t\tuse namespace canvas;\n\t\t\t\tvar w = width() / 2;\n\t\t\t\tvar h = height() / 2;\n\t\t\t\tvar s = min(w, h);\n\t\t\t\treturn [w + s * v[0] / (v[2] + 3), h + s * v[1] / (v[2] + 3)];\n\t\t\t}\n\n\t\t\tfunction draw(yaw, pitch)\n\t\t\t{\n\t\t\t\tvar rot_yaw = [[cos(yaw),0,sin(yaw)], [0,1,0], [-sin(yaw),0,cos(yaw)]];\n\t\t\t\tvar rot_pitch = [[1,0,0], [0,cos(pitch),sin(pitch)], [0,-sin(pitch),cos(pitch)]];\n\t\t\t\tvar rot = matmat(rot_yaw, rot_pitch);\n\t\t\t\tvar points2d = [];\n\t\t\t\tfor var p in points3d do\n\t\t\t\t{\n\t\t\t\t\tvar p3d = matvec(rot, p);\n\t\t\t\t\tvar p2d = projection(p3d);\n\t\t\t\t\tpoints2d.push(p2d);\n\t\t\t\t}\n\t\t\t\tfor var f in faces do\n\t\t\t\t{\n\t\t\t\t\tvar list = [];\n\t\t\t\t\tfor var i in f.points do list.push(points2d[i]);\n\t\t\t\t\tvar v0 = [list[1][0] - list[0][0], list[1][1] - list[0][1]];\n\t\t\t\t\tvar v1 = [list[2][0] - list[1][0], list[2][1] - list[1][1]];\n\t\t\t\t\tvar det = v0[0] * v1[1] - v0[1] * v1[0];\n\t\t\t\t\tif det <= 0 then continue;\n\t\t\t\t\tuse namespace canvas;\n\t\t\t\t\tsetFillColor(f.color[0], f.color[1], f.color[2]);\n\t\t\t\t\tframeArea(list);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tdraw(0, 0);\n\n\t\t\tfunction onMouseMove(event)\n\t\t\t{\n\t\t\t\tuse namespace canvas;\n\t\t\t\tsetFillColor(1, 1, 1);\n\t\t\t\tclear();\n\t\t\t\tdraw(width() / 2 - event.x / 100, event.y / 100 - height() / 2);\n\t\t\t}\n\n\t\t\talert("Move the mouse over the canvas!");\n\t\t\tsetEventHandler("canvas.mousemove", onMouseMove);\n\t\t\tenterEventMode();\n\t\t</tscript>\n\t',children:[]}]}},97:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.doc_git=void 0,e.doc_git={id:"git",name:"Git in TScript",title:"Git in TScript",content:'\n    <p>\n    <a href="https://git-scm.com" target="_blank">Git</a> is a powerful tool for version control and filesharing.\n    Whenever multiple people work on one software project, a common problem is that a file can be\n    edited by multiple people <i>at the same time</i>.\n    </p>\n    <p>\n    Without Git, the team would have to decide in what order the changes should take effect.\n    This can be especially tricky when two users work on the exact same line of code.\n    With Git, changes can be tracked and tested individually (in different versions) before combining changes\n    or (when working on the same line of code) deciding on which version to use.\n    </p>\n    <p>\n    Another advantage of Git and the main purpose of the current TScript Git integration\n    is the ability to save changes remotely (i.e on platforms such as GitHub or GitLab)\n    so that the newest version can be downloaded and worked on anywhere.\n    </p>\n    <p>\n    The following pages give a brief introduction to the Git implementation specifically for TScript.\n    This implementation is very rudimentary and offers only the basics of the Git toolkit.\n    The <a href="https://git-scm.com/docs" target="_blank">official Git documentation</a>\n    offers much more in-depth information about Git.\n    </p>\n    <div class="warning">\n        Please ensure that you use the online version of the TScript IDE. Git will not work if you run the TScript IDE locally!\n    </div>\n    ',children:[{id:"basics",name:"Git basics",title:"Git basics",content:"\n            <p>\n            In order to understand the following pages, one needs to understand the Git terminology first.\n            </p>\n            <p>\n            A project in Git is called a repository (or repo for short). Changes that were made locally can be pushed ('uploaded')\n            to or pulled ('donwloaded') from the remote repository.\n            This requires that a copy from the remote repository already exists locally.\n            If the project is not yet saved locally, the remote repository can be cloned ('copied') to the local file system.\n            </p>\n            ",children:[]},{id:"start",name:"Getting started",title:"Getting started with Git",content:'\n            <p>\n            In order to use Git with TScript, either a <a href="https://github.com" target="_blank">GitHub</a>\n            or <a href="https://gitlab.ruhr-uni-bochum.de/" target="_blank">RUB GitLab</a> account\n            must be linked to TScript.\n            </p>\n            <p>\n            To link a GitHub or GitLab account, press the Git button in the toolbar. If no user is logged in,\n            the Git dialog offers the choice to link either a GitHub or GitLab account.\n            A new window will open with the respective platform\'s login page.\n            After a successful login, TScript needs permission to access files in private repositories.\n            When permission is given, the login page will redirect to the TScript IDE and the account is now linked.\n            </p>\n            <h3>Cloning</h3>\n            <p>\n            When opening the Git dialog again with a linked account, the dialog shows a dropdown menu and three buttons.\n            All repositories that belong to the user who is currently logged in are listed in the dropdown menu.\n            The list also shows if a repository is private (lock icon) or public (no lock icon).\n            In addition to the user\'s repositories, there is also an option to clone a repository from a 3rd party using\n            a GitHub or GitLab link (\'Custom...\').\n            </p>\n            <p>\n            After selecting a remote repository from the dropdown menu (or providing a link to a 3rd party remote repository),\n            the remote repository can be cloned into a TScript project by pressing the clone button. If the cloning is successful,\n            the Git dialog closes and the file tree shows all folders and files from the repository.\n            A file can be opened in the editor window by double clicking on the name in the file tree.\n            </p>\n            <h3>Pushing</h3>\n            <p>\n            Changes that were made in TScript can be pushed to the remote repository using the push button.\n            Just make sure to save the edited file(s) using the control-s shortcut or the save button before pushing.\n            </p>\n            <div class="warning">\n                Remote changes are discarded when pushing local changes, so make sure to pull from\n                the remote repository before making new changes!\n\t\t    </div>\n            <h3>Pulling</h3>\n            <p>\n            The TScript IDE will automatically detect if the current project is a valid Git repository.\n            If it is valid, the clone button will change into the pull button. When pressing the pull button,\n            the newest changes are pulled from the remote repository.\n            </p>\n            <div class="warning">\n                Local changes are discarded when pulling remote changes, so make sure to push before\n                pulling from the remote repository!\n\t\t    </div>\n            ',children:[]}]}},4045:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.doc_ide=void 0,e.doc_ide={id:"ide",name:"The TScript IDE",title:"The TScript Integrated Development Environment (IDE)",content:"\n\t<p>\n\tTScript is not only a programming language, it also comes with a\n\tfully fledged integrated development environment (IDE). The IDE\n\tincludes a code editor and powerful debugging facilities.\n\t</p>\n\t<p>\n\tIn principle, the IDE can be decoupled from the programming language,\n\tand a single IDE can be used for a multitude of languages. However,\n\tproviding a default IDE for the language has advantages for\n\tbeginners. No choices need to be made. More importantly, there is no\n\tfriction in setup and configuration processes.\n\t</p>\n\t<p>\n\tThe TScript IDE main window consists of a toolbar at the top and an\n\tarea holding several panels. The panels can be docked to a wide area\n\ton the left or to a more narrow area on the right. They can also\n\tfloat around freely on top of docked panels, one panel can be\n\tmaximizied on top of all others, and panels can be reduced to icons.\n\tAll of this is controlled with the buttons in the title bar of each\n\tpanel. Panels can be resized by dragging the lower and right edges.\n\t</p>\n",children:[{id:"toolbar",name:"Toolbar",title:"Toolbar",content:'\n\t\t<p>\n\t\tThe IDE has a toolbar at the top. It features a number of central\n\t\tcontrols.\n\t\t</p>\n        <p>\n        <img style="width: 100%;" src="data:image/png;base64,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"/>\n        </p>\n\t\t<p>\n\t\tThe five leftmost buttons manage files (red). They create a new\n\t\tdocument, open a document from a file, save to file, and save\n\t\tunder a different name. The rightmost button is used to integrate \n\t\t<a href="?doc=/git">Git</a>, which is an advanced feature \n\t\tfor the curious or experienced.\n\t\t<div class="warning">\n\t\t\tLocal storage is not a safe place to store data! It can be\n\t\t\tcleared at any time by the browser, and it is actively\n\t\t\tcleared by some plug-ins when removing cookies. Do not rely\n\t\t\ton your source code being safely stored when using this\n\t\t\ttechnology! Instead, consider storing important programs in\n\t\t\ttext files separate from TScript.\n\t\t</div>\n\t\tFurthermore, when opening TScript from multiple locations on the\n\t\tweb or in the file system, the browser treats the websites as\n\t\tdifferent, and files stored in one instance are not available in\n\t\tthe others.\n\t\t</p><p>\n\t\tThe next group of buttons controls program execution (green). They\n\t\tstart or continue, interrupt, and abort the program. When multiple\n\t\tdocuments are open at the same time, the dropdown box allows to\n\t\tselect the one that is to be executed.\n\t\t</p><p>\n\t\tThe buttons with the blue frame marker belong to the debugger.\n\t\tThey step through the program at different levels of granularity.\n\t\tThe button with the little red dot toggles (sets/removes) the\n\t\tbreakpoint in the current line, or the closest line below that is\n\t\ta legal breakpoint location.\n\t\t</p><p>\n\t\tThe green arrow opens the export dialog (yellow frame). It allows\n\t\tto export programs using turtle graphics or canvas graphics as\n\t\tstandalone applications (web pages). These files can be ran in a\n\t\tbrowser, i.e., independent of the TScript IDE.\n\t\t</p><p>\n\t\tThe button with the gear symbol opens the configuration dialog.\n\t\tCurrently it allows to configure the hotkeys associated with the\n\t\ttoolbar buttons. Furthermore, there is a checkbox that enables\n\t\t<a href="?doc=/concepts/style">style checking mode</a>.\n\t\t</p><p>\n\t\tIt follows a wide element with colored background, called the\n\t\tprogram state indicator. It indicates whether the program is just\n\t\tabout to be written, whether it was parsed successfully or whether\n\t\tan error occurred, and whether the program is running, waiting, or\n\t\tinterrupted.\n\t\t</p><p>\n\t\tRight of the program indicator there is an area collecting icons of\n\t\ticonified panels (purple). The icons can be clicked to restore the\n\t\tprevious non-icon state of a panel. The icon with the folder corresponds \n\t\tto a seperate file system that implements a file tree. It is used for \n\t\tthe <a href="?doc=/git">Git</a> integration and is only necessary for \n\t\tthat. Be careful, where you store your files! To create a new project \n\t\tgo to \'Open document\' => \'Show projects\'.\n\t\t</p>\n\t\t<p>\n\t\tFinally, the button on the far right opens the documentation (i.e.,\n\t\tthis very collection of documents) in a new window or browser tab.\n\t\t</p>\n\t',children:[]},{id:"editor",name:"Source Code Editor",title:"Source Code Editor",content:'\n\t\t<p>\n\t\tThe source code editor is the most important panel. It consists\n\t\tof a modern browser-based text editor with syntax highlighting\n\t\tfor the TScript programming language. The program code is typed,\n\t\tpasted, or loaded into this panel. Breakpoints can be toggled\n\t\t(added/removed) by clicking the bar on the left, which also\n\t\tdisplays line numbers.\n\t\t</p>\n\t\t<p>\n\t\tSince longer programs usually consist of multiple files, the IDE\n\t\tsupports any number of editor panels. Creating or opening a new\n\t\tfile spawns a new editor.\n\t\t</p>\n\t\t<p>\n\t\tBesides the hotkeys defined for the\n\t\t<a href="?doc=/ide/toolbar">toolbar</a> buttons, the editor provides\n\t\tthe following hotkeys:\n\t\t<table class="nicetable left">\n\t\t\t<tr><th>key</th><th>effect</th></tr>\n\t\t\t<tr><td>control-A</td><td>select all</td></tr>\n\t\t\t<tr><td>control-Z</td><td>undo last change</td></tr>\n\t\t\t<tr><td>shift-control-Z</td><td>redo last change</td></tr>\n\t\t\t<tr><td>control-Home</td><td>jump to start of the document</td></tr>\n\t\t\t<tr><td>control-End</td><td>jump to end of the document</td></tr>\n\t\t\t<tr><td>Tabulator</td><td>when applied to a selection, indent the affected lines</td></tr>\n\t\t\t<tr><td>shift-Tabulator</td><td>un-indent the current or selected line(s)</td></tr>\n\t\t\t<tr><td>control-D</td><td>toggle line comment; comment/uncomment current or selected line(s)</td></tr>\n\t\t\t<tr><td>control-F</td><td>open the <i>find/replace</i> dialog</td></tr>\n\t\t\t<tr><td>F3</td><td>next search result</td></tr>\n\t\t</table>\n\t\tOn MacOS, use the command key instead of the control key.\n\t\t</p>\n\t',children:[]},{id:"messages",name:"Message Area",title:"Message Area",content:'\n\t\t<p>\n\t\tThe message area contains two types of entities: text printed by\n\t\tthe program with the <a href="?doc=/library/core">print</a> function,\n\t\tand error messages. Errors are clickable, highlighting the line\n\t\tof code in which the error occurred. Also, there is a clickable\n\t\tinformation symbol &#128712; that opens the documentation of the\n\t\terror.\n\t\t</p>\n\t',children:[]},{id:"debugging",name:"Debugging Facilities",title:"Debugging Facilities",content:'\n\t\t<p>\n\t\tThe debugger is firmly integrated into the IDE. It consists of\n\t\tseveral elements. The most prominent ones are stack and program\n\t\tview. Furthermore, stepwise program execution is controlled with\n\t\tthe toolbar buttons, the message area collects error messages,\n\t\twhich are often a starting point for debugging, and breakpoints\n\t\tare defined in the source code error.\n\t\t</p>\n\n\t\t<h2>The Stack View</h2>\n\t\t<p>\n\t\tThis panel contains information only while the program is running.\n\t\tIt displays the program state as a tree. At the topmost level, the\n\t\ttree contains one node per stack frame, which is the entity holding\n\t\tall local variables of a function. The bottom-most stack frame\n\t\t(with index [0]) holds the global variables.\n\t\t</p>\n\t\t<p>\n\t\tEach stack frame holds one sub-node per variable. If the variable\n\t\trefers to a container or an object, then the node can be opened and\n\t\tthe items or attributes are found in the next layer. For example,\n\t\tan array holding 10 items is represented by 10 sub-nodes, one for\n\t\teach item.\n\t\t</p>\n\t\t<p>\n\t\tFurthermore, each stack frame holds a list of temporary values. A\n\t\ttemporary value exists only during the evaluation of an expression,\n\t\tbefore it is consumed by another expression.\n\t\t</p>\n\t\t<p>\n\t\tThe panel allows to inspect the values of all variables at runtime.\n\t\tThis information is invaluable for debugging. While running the\n\t\tprogram step by step the programmer can monitor the effect of all\n\t\tcommands on the variables.\n\t\t</p>\n        <p>\n        <img style="display: block; margin: 1em auto;" src="data:image/png;base64,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"/>\n        </p>\n\n\t\t<h2>The Program View</h2>\n\t\t<p>\n\t\tThis panel contains information only after the program is parsed.\n\t\tIt displays the program structure as a tree. The root node\n\t\trepresents the global scope. Nodes below this one represent\n\t\tdeclarations and statements, which again have sub-nodes, all the\n\t\tway down to atomic units like literals, names, operators, etc.\n\t\tClicking a node of the tree navigates the cursor in the source code\n\t\teditor to the corresponding element. The position of the element is\n\t\tfurthermore provided in parentheses, in the form (line:character).\n\t\t</p>\n\t\t<p>\n\t\tDuring runtime, the tree displays the current instruction by\n\t\thighlighting it with an orange background. It provides an\n\t\tinstructive illustration of the program flow, which can be a\n\t\tvaluable debugging aid.\n\t\t</p>\n\t',children:[]},{id:"program",name:"Program IO Panels",title:"Program IO Panels",content:"\n\t\t<p>\n\t\tThere are two panels dedicated to input and output of the program:\n\t\tone for turtle graphics, and one for a proper graphical user interface.\n\t\tIt is uncommon to include these facilities directly into an IDE. This\n\t\tis because programs are supposed to run independent of the IDE. For\n\t\tTScript this is a minor concern, since the language is not designed\n\t\tfor production use.\n\t\t</p>\n\n\t\t<h2>Turtle Graphics</h2>\n\t\t<p>\n\t\tThe turtle graphics panel represents the area in which the fictitious\n\t\tturtle robot moves around. The panel contains the lines drawn by the\n\t\trobot while moving. It does not display the turtle.\n\t\t</p>\n\t\t<p>\n\t\tThe panel is automatically cleared at program start. The drawing\n\t\tremains even after the program has finished.\n\t\t</p>\n\t\t<p>\n\t\tThe drawing area is a square. However, for display, the area is\n\t\tstretched along one axis to match the aspect ratio of the panel.\n\t\tTherefore it is best practice to keep the panel roughly square shaped.\n\t\t</p>\n\n\t\t<h2>Canvas Graphics</h2>\n\t\t<p>\n\t\tThe canvas panel contains a canvas for drawing geometric shapes and\n\t\ttext. With these tools it is rather easy to display images, for\n\t\texample for simple video games. The panel allows for rich user\n\t\tinteraction. Mouse clicks and mouse pointer movement as well as key\n\t\tpresses generate events that can be processed by the program to\n\t\tcreate interactive applications.\n\t\t</p>\n\t",children:[]},{id:"exportdialog",name:"Export dialog",title:"Export dialog",content:"\n\t\t<p>\n\t\tThe export dialog allows to create a standalone webpage from the current TScript code.\n\t\tIt is either a turtle application or a canvas application, that means that only one of these is shown\n\t\tin the final webpage.\n\t\t</p>\n\t",children:[]}]}},6142:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.documentationData=void 0;const r=n(986),i=n(5675),a=n(6083),o=n(9295),s=n(4045),l=n(8703),c=n(9521),d=n(9919),h=n(3193),u=n(97);let p={id:"",name:"TScript Documentation",title:"TScript Documentation",children:new Array,content:'\n<p>\nWelcome to TScript!\n</p>\n<p>\nTScript (&quot;teaching-script&quot;) is a programming language created\nspecifically for programming beginners. Its clean design yields a smooth\nlearning experience. It offers simple graphics manipulation\nenvironments, which greatly boost motivation and stimulate a playful and\nexplorative learning style.\n</p>\n<h2>Overview</h2>\n<p>\nThe ideal entry point for a programming beginner is the tutorial. In the\ndevelopment environment, locate the blackboard icon\n<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAABHNCSVQICAgIfAhkiAAAAXtJREFUOI3FlM1qwkAUhc9oghaniKgELAlqKYVGXEiXblz0OXyMPkMfI8/RhRvJzk0JhRLalFl0EWqrQWhUNF2I4mQ0TU2lZ5c5537c+bkBiRCl9BQHikSahJDBYLC0LItbbzQaaLVakbXSNiRsUkqpbdu4LlnIyCvbny1h2Zn4Hfd6vYAxJgReX55QLUz4tU+Kav1SyGqahk6nQ7iOGWNoVx6FcLsCACf8GhYAxGx/qy8pbJ7f3AkFcfR8f8t9pw6ixNBecBAExwETQhLB/+codjzt5OAk0EhwUh0NLAxI+KEnBmuathnJ4XCI7MxBLkvgvMuoXTS5Isd+QK00x+RriWmmjmKxuGGstfOGDMMI1v+N/tsVut0u+Y0P7Dnj6cgBALijBRRFEXxFUeCOFlw2FjiLDwAAc+dQVVXwVVUFc+dc9kewaZpBOZ8GAIx9GbquC9vUdZ2MfRkAUM6nYZqmMPsC2PM8FOjqTlO5s53dbHsFKsHzvL25P9c3ZS94XuDLwyoAAAAASUVORK5CYII="/>\nin the toolbar. It opens the tutorial panel. The tutorial is not part of\nthis documentation; instead, it is tightly integrated into the\nprogramming environment.\n</p>\n<p>\nBeing a reference documentation, this collection of documents is not\ndesigned for being read front to end, but rather as a resource for\nlooking up information. For programmers experienced with other\nprogramming languages, the section\n<a href="?doc=/concepts">core concepts</a> is a good starting point, the\n<a href="?doc=/cheatsheet">cheat sheet</a> provides the most\nimportant bits in compact form, and for the impatient there are a few\n<a href="?doc=/examples">examples</a>.\n</p>\n'};p.children.push(i.doc_concepts),p.children.push(s.doc_ide),p.children.push(l.doc_language),p.children.push(h.doc_stdlib),p.children.push(o.doc_examples),p.children.push(a.doc_errors),p.children.push(u.doc_git),p.children.push(c.doc_data_uri),p.children.push(r.doc_cheatsheet),p.children.push(d.doc_legal),e.documentationData=p},8703:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.doc_language=void 0,e.doc_language={id:"language",name:"The TScript Language",title:"Reference Documentation for the TScript Programming Language",content:"\n\t<p>\n\tThis is the reference documentation of the TScript programming\n\tlanguage. It covers all language features in great detail and with\n\tprecision.\n\t</p>\n",children:[{id:"syntax",name:"Syntax",title:"Syntax",content:'\n\t\t<p>\n\t\tThe syntax of the TScript language specifies whether a text is\n\t\ta well-formed (valid) or ill-formed (invalid) program. A\n\t\twell-formed program can be executed, while trying to run\n\t\tan ill-formed (or malformed) program results in an error\n\t\tmessage already before the program starts. The syntax is\n\t\tspecified in terms of an\n\t\t<a target="_blank" href="https://en.wikipedia.org/wiki/Extended_Backus%E2%80%93Naur_form">Extended Backus-Naur Form (EBNF)</a>.\n\t\t</p>\n\t\t<p>\n\t\tThe documents within this section define various general aspects\n\t\tof the TScript syntax. For completeness sake, we also provide a\n\t\t<a href="?doc=/language/syntax/EBNF-syntax">complete formal EBNF definition of the TScript syntax</a>.\n\t\t</p>\n\t',children:[{id:"character-set",name:"Character Set",title:"Character Set",content:'\n\t\t\t<p>\n\t\t\tTScript source code consists of unicode characters from the\n\t\t\t<a target="_blank" href="https://en.wikipedia.org/wiki/Plane_(Unicode)#Basic_Multilingual_Plane">Basic Multilingual Plane</a> (BMP).\n\t\t\tThese characters have codes in the range U+0000 to U+FFFF.\n\t\t\tIn other words, each character (or "code point") can be\n\t\t\trepresented as an unsigned 16-bit integer.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tHowever, this document does not specify the <i>character\n\t\t\tencoding</i>, but only the <i>character set</i>. So for\n\t\t\texample UTF-8 encoded text is fine, as long as it does not\n\t\t\tcontain code points above U+FFFF.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tOutside of\n\t\t\t<a href="?doc=/language/syntax/comments">comments</a> and\n\t\t\t<a href="?doc=/language/expressions/literals/strings">string literals</a>,\n\t\t\tonly the printable ASCII range U+0020 to U+007E and the\n\t\t\tASCII control characters U+0009 (horizontal tabulator),\n\t\t\tU+000A (line feed), and U+000D (carriage return) are valid.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tInside comments and string literals, the full range U+0000\n\t\t\tto U+FFFF is legal. Every character can be denoted in plain\n\t\t\tASCII by means of an escaping mechanism.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t<b>Note:</b>\n\t\t\tThe TScript implementation is based directly on Javascript\n\t\t\t(ECMAScript&nbsp;6). Javascript allows its implementations\n\t\t\tto support the complete unicode range by composing\n\t\t\tcharacters outside the BMP with the UTF16 encoding, but this\n\t\t\tfeature is not mandatory. In practice, Javascript engines do\n\t\t\tsupport the mechanism, which amounts to representing the\n\t\t\tunicode characters outside the BMP with two characters in\n\t\t\tthe range U+0000 to U+FFFF. This solution is error-prone.\n\t\t\tFor example, it is somewhat surprising if a string that\n\t\t\tprints as a single character consists of two characters, as\n\t\t\trevealed by the size method and when accessing the\n\t\t\tcharacters, slicing the string, etc. It is therefore\n\t\t\trecommended to restrict string contents to the BMP.\n\t\t\t</p>\n\t\t',children:[]},{id:"tokens",name:"Tokens",title:"Tokens",content:'\n\t\t\t<p>\n\t\t\tA TScript program consists of a sequence of tokens. Each\n\t\t\ttoken is a meaningful and often short string of characters\n\t\t\twith clear semantics. Tokens can be separated by whitespace,\n\t\t\tcomments, other terminals, or they can be self-delimiting.\n\t\t\tA sequence of input characters that does not match any of\n\t\t\tthe token types results in a syntax error. In this documentation\n            the red-written expressions need to be replaced by the corresponding\n            tokens. The "|" denote the logical or, "()" enclose connected tokens.\n            "[]" express that the inner expressions are optional and therefore can\n            be chosen zero or one times, "{}" express that the inner expressions can\n            be chosen zero or n times.\n\t\t\t</p>\n\n\t\t\t<h2>Whitespace and Comments</h2>\n\t\t\t<p>\n\t\t\tWhitespace and\n\t\t\t<a href="?doc=/language/syntax/comments">comments</a> are not\n\t\t\tby themselves considered tokens, but they separate tokens\n\t\t\tand therefore they must be defined:\n\t\t\t<ebnf>\n\t\t\t\twhitespace = " " | tabulator | carriage-return | line-feed ;\n\t\t\t\ttabulator = $ U+0009 $ ;\n\t\t\t\tcarriage-return = $ U+000A $ ;\n\t\t\t\tline-feed = $ U+000D $ ;\n\t\t\t\tcomment = line-comment | block-comment ;\n\t\t\t\tline-comment = "#", (unicode-char - "*" - line-feed),\n\t\t\t\t                   { unicode-char - line-feed } ;                           # example: # this is a comment\n\t\t\t\tblock-comment = "#*", { (unicode-char - "*")                                # example: #* this is a\n\t\t\t\t                        | ("*", { "*" }, (unicode-char - "#"))              #             multiline comment *#\n\t\t\t\t                      }, "*#" ;\n\t\t\t\tunicode-char = $ any Unicode character U+0000 to U+FFFF $ ;\n\t\t\t</ebnf>\n\t\t\t</p>\n\n\t\t\t<h2>Identifiers and Keywords</h2>\n\t\t\t<p>\n\t\t\tAn identifier is defined as follows:\n\t\t\t<ebnf>\n\t\t\t\tidentifier = id_or_key - keyword ;                                          # example: _x, x, X, x2 are correct identifiers\n\t\t\t\tid_or_key = (letter | "_"), { letter | digit | "_" } ;                      # example: 2X, 3x, var  are incorrect identifiers\n\t\t\t\tletter = "A" | "B" | "C" | "D" | "E" | "F" | "G"\n\t\t\t\t       | "H" | "I" | "J" | "K" | "L" | "M" | "N"\n\t\t\t\t       | "O" | "P" | "Q" | "R" | "S" | "T" | "U"\n\t\t\t\t       | "V" | "W" | "X" | "Y" | "Z" | "a" | "b"\n\t\t\t\t       | "c" | "d" | "e" | "f" | "g" | "h" | "i"\n\t\t\t\t       | "j" | "k" | "l" | "m" | "n" | "o" | "p"\n\t\t\t\t       | "q" | "r" | "s" | "t" | "u" | "v" | "w"\n\t\t\t\t       | "x" | "y" | "z" ;\n\t\t\t\tdigit = "0" | "1" | "2" | "3" | "4" | "5" | "6"\n\t\t\t\t      | "7" | "8" | "9" ;\n\t\t\t\tkeyword = $ list of TScript keywords $ ;\n\t\t\t</ebnf>\n\t\t\tIt is essentially a non-empty name consisting of letters,\n\t\t\tdigits and underscores that does not start with a digit.\n\t\t\tFor the definition of <ebnf>keyword</ebnf> see the\n\t\t\t<a href="?doc=/language/syntax/keywords">list of keywords</a>.\n\t\t\t</p>\n\n\t\t\t<h2>Integers</h2>\n\t\t\t<p>\n\t\t\tAn integer is simply defined as a non-empty sequence of\n\t\t\tdigits:\n\t\t\t<ebnf>\n\t\t\t\tinteger = digit, { digit } ;\n\t\t\t</ebnf>\n\t\t\tToo large tokens exceeding the\n\t\t\t<a href="?doc=/language/types/integer">integer</a> range result\n\t\t\tin an error message when parsing the literal formed from the\n\t\t\ttoken.\n\t\t\t</p>\n\n\t\t\t<h2>Reals</h2>\n\t\t\t<p>\n\t\t\tA real must contain a fractional part, or an exponent, or both:\n\t\t\t<ebnf>\n\t\t\t\treal = integer, ".", integer                                                # example: 2.523\n\t\t\t\t\t | integer, ("e" | "E"), [ "+" | "-" ], integer                         # example: 1e2, 1e-5\n\t\t\t\t     | integer, ".", integer, ("e" | "E"), [ "+" | "-" ], integer ;         # example: 1.5e3\n\t\t\t</ebnf>\n\t\t\t</p>\n\n\t\t\t<h2>Strings</h2>\n\t\t\t<p>\n\t\t\tSimple strings are character sequences enclosed in double\n\t\t\tquotes. A string token can contain escape sequences. It is\n\t\t\tdefined as follows:\n\t\t\t<ebnf>\n\t\t\t\tstring = \'"\', { (unicode-char - "\\" - line-feed) | escape }, \'"\' ;\n\t\t\t\tescape = "\\", "\\"\n\t\t\t\t       | "\\", \'"\'\n\t\t\t\t       | "\\", "r"\n\t\t\t\t       | "\\", "n"\n\t\t\t\t       | "\\", "t"\n\t\t\t\t       | "\\", "f"\n\t\t\t\t       | "\\", "b"\n\t\t\t\t       | "\\", "/"\n\t\t\t\t       | "\\", "u", hex, hex, hex, hex ;\n\t\t\t\thex = digit | "A" | "B" | "C" | "D" | "E" | "F"\n\t\t\t\t            | "a" | "b" | "c" | "d" | "e" | "f" ;\n\t\t\t</ebnf>\n\t\t\tA <a href="?doc=/language/expressions/literals/strings">string literal</a>\n\t\t\tcan consist of multiple such tokens.\n\t\t\t</p>\n\n\t\t\t<h2>Operators, Groupings, and Separators</h2>\n\t\t\t<p>\n\t\t\tFor these simple token types, we let the definition speak\n\t\t\tfor itself. Note that some operators start with a shorter\n\t\t\tsequence that also forms an operator. The token is always\n\t\t\tthe longest possible sequence.\n\t\t\t</p>\n\t\t\t<ebnf>\n\t\t\t\toperator = arithmetic_op | compare_op | assign-op ;\n\t\t\t\tbinary-op = "+" | "-" | "*" | "/" | "//" | "%" | "^" ;\n\t\t\t\tcompare_op = "==" | "!=" | "<" | "<=" | ">" | ">=" ;\n\t\t\t\tassign-op = "=" | "+=" | "-=" | "*=" | "/=" | "%=" | "^=" ;\n\t\t\t\tgrouping = "(" | ")" | "[" | "]" | "{" | "}" ;\n\t\t\t\tseparator = "," | "." | ";" ;\n\t\t\t</ebnf>\n\t\t',children:[]},{id:"keywords",name:"Keywords",title:"List of Keywords",content:"\n\t\t\t<p>\n\t\t\tCertain identifier names are disallowed, namely the\n\t\t\tso-called keywords. Here is a complete list of all TScript\n\t\t\tkeywords in alphabetical order:\n\t\t\t</p>\n\t\t\t<ul>\n\t\t\t\t<li><keyword>and</keyword></li>\n\t\t\t\t<li><keyword>break</keyword></li>\n\t\t\t\t<li><keyword>case</keyword></li>\n\t\t\t\t<li><keyword>catch</keyword></li>\n\t\t\t\t<li><keyword>class</keyword></li>\n\t\t\t\t<li><keyword>const</keyword></li>\n\t\t\t\t<li><keyword>constructor</keyword></li>\n\t\t\t\t<li><keyword>continue</keyword></li>\n\t\t\t\t<li><keyword>default</keyword></li>\n\t\t\t\t<li><keyword>do</keyword></li>\n\t\t\t\t<li><keyword>else</keyword></li>\n\t\t\t\t<li><keyword>enum</keyword></li>\n\t\t\t\t<li><keyword>export</keyword></li>\n\t\t\t\t<li><keyword>false</keyword></li>\n\t\t\t\t<li><keyword>for</keyword></li>\n\t\t\t\t<li><keyword>from</keyword></li>\n\t\t\t\t<li><keyword>function</keyword></li>\n\t\t\t\t<li><keyword>if</keyword></li>\n\t\t\t\t<li><keyword>import</keyword></li>\n\t\t\t\t<li><keyword>include</keyword></li>\n\t\t\t\t<li><keyword>module</keyword></li>\n\t\t\t\t<li><keyword>namespace</keyword></li>\n\t\t\t\t<li><keyword>not</keyword></li>\n\t\t\t\t<li><keyword>null</keyword></li>\n\t\t\t\t<li><keyword>operator</keyword></li>\n\t\t\t\t<li><keyword>or</keyword></li>\n\t\t\t\t<li><keyword>private</keyword></li>\n\t\t\t\t<li><keyword>protected</keyword></li>\n\t\t\t\t<li><keyword>public</keyword></li>\n\t\t\t\t<li><keyword>return</keyword></li>\n\t\t\t\t<li><keyword>static</keyword></li>\n\t\t\t\t<li><keyword>super</keyword></li>\n\t\t\t\t<li><keyword>switch</keyword></li>\n\t\t\t\t<li><keyword>then</keyword></li>\n\t\t\t\t<li><keyword>this</keyword></li>\n\t\t\t\t<li><keyword>throw</keyword></li>\n\t\t\t\t<li><keyword>true</keyword></li>\n\t\t\t\t<li><keyword>try</keyword></li>\n\t\t\t\t<li><keyword>use</keyword></li>\n\t\t\t\t<li><keyword>var</keyword></li>\n\t\t\t\t<li><keyword>while</keyword></li>\n\t\t\t\t<li><keyword>xor</keyword></li>\n\t\t\t</ul>\n\t\t\t<p>\n\t\t\tNot all keywords are used in the current version of the language,\n\t\t\tsome are reserved for future extensions.\n\t\t\t</p>\n\t\t",children:[]},{id:"comments",name:"Comments",title:"Line and Block Comments",content:'\n\t\t\t<p>\n\t\t\tComments are pieces of program code without any semantic\n\t\t\tmeaning. In other words, comments are ignored when running\n\t\t\tthe program. While being ignored by the machine, they are\n\t\t\tintended to be read by humans, usually for the purpose of\n\t\t\tdocumentation. In TScript there are two types of comments:\n\t\t\tline comments and block comments.\n\t\t\t</p>\n\t\t\t<h2>Line Comments</h2>\n\t\t\t<p>\n\t\t\tLine comments start with the token\n\t\t\t<code class="code">#</code> not immediately followed by\n\t\t\t<code class="code">*</code> and extend to the end of the\n\t\t\tline. One beneficial property of line comments is that they\n\t\t\tcan be nested, i.e.,\n\t\t\t<tscript>\n\t\t\t\t# # a nested line comment\n\t\t\t</tscript>\n\t\t\tis still a valid comment, since the fact that a comment is\n\t\t\tinside another comment is ignored.\n\t\t\t</p>\n\t\t\t<h2>Block Comments</h2>\n\t\t\t<p>\n\t\t\tBlock comments start with <code class="code">#*</code> and end with\n\t\t\t<code class="code">*#</code>. In contrast to line comments, block\n\t\t\tcomments are entirely free in their extent. They may span\n\t\t\tonly a small part of a line or even multiple lines. The price to pay is that\n\t\t\tblock comments cannot be nested, since in\n\t\t\t<div class="code"><pre class="code"><code class="code"><span class="code-comment">#* a broken #* block *#</span> comment *#</code></pre></div>\n\t\t\tthe comment ends with the <i>first</i> occurrence of\n\t\t\t<code class="code">*#</code>, so that <code class="code">comment *</code> is\n\t\t\tinterpreted as program code (which is most probably malformed),\n\t\t\tand the final <code class="code">#</code> as the start of a\n\t\t\tline comment.\n\t\t\t</p>\n\t\t',children:[]},{id:"lexical-blocks",name:"Lexical Blocks and Separators",title:"Lexical Blocks and Separators",content:'\n\t\t\t<p>\n\t\t\tIn TScript, whitespace is useful for separating tokens, but\n\t\t\tit is insignificant for separating language constructs like\n\t\t\tdefinitions, statements, and directives. In particular,\n\t\t\tindentation is optional, and statements can extend beyond\n\t\t\tthe end of the current line. Instead, declarations and\n\t\t\tstatements are delimited by keywords and, in most cases,\n\t\t\twith a semicolon&nbsp;<tscript>;</tscript>. This means that\n\t\t\tin many cases the tokens in between semicolons form a single\n\t\t\tstatement.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tAnother useful structural property of the TScript language that\n\t\t\tbecomes apparent already at the lexical level are parentheses\n\t\t\t<code class="code">( )</code>, square brackets <code class="code">[ ]</code>,\n\t\t\tand curly braces <code class="code">{ }</code>. The TScript syntax\n\t\t\tis designed so that opening and closing tokens must always match.\n\t\t\tFor example, when encountering the sequence of tokens\n\t\t\t<code class="code">{(</code> then <code class="code">)</code> is fine, while\n\t\t\tencountering <code class="code">}</code> first indicates a syntax error.\n\t\t\t<tscript do-not-run>\n{\n\t()\n}           # this is okay\n\n{\n\t(\n} )         # this is not\n\t\t\t</tscript>\n\t\t\t</p>\n\t\t',children:[]},{id:"EBNF-syntax",name:"Complete EBNF Syntax",title:"Complete Formal EBNF Definition of the TScript Syntax",content:'\n\t\t\t<p>\n\t\t\tThis section collects all syntax rules for reference.\n\t\t\t</p>\n\n\t\t\t<ebnf>\n\t\t\twhitespace = " " | tabulator | carriage-return | line-feed ;\n\t\t\ttabulator = $ U+0009 $ ;\n\t\t\tcarriage-return = $ U+000A $ ;\n\t\t\tline-feed = $ U+000D $ ;\n\t\t\tcomment = line-comment | block-comment ;\n\t\t\tline-comment = "#", (unicode-char - "*" - line-feed),\n\t\t\t                   { unicode-char - line-feed } ;\n\t\t\tblock-comment = "#*", { (unicode-char - "*")\n\t\t\t                       | ("*", { "*" }, (unicode-char - "#"))\n\t\t\t                     }, "*#" ;\n\t\t\tunicode-char = $ any Unicode character U+0000 to U+FFFF $ ;\n\t\t\tidentifier = id_or_key - keyword ;\n\t\t\tid_or_key = (letter | "_"), { letter | digit | "_" } ;\n\t\t\tletter = "A" | "B" | "C" | "D" | "E" | "F" | "G"\n\t\t\t       | "H" | "I" | "J" | "K" | "L" | "M" | "N"\n\t\t\t       | "O" | "P" | "Q" | "R" | "S" | "T" | "U"\n\t\t\t       | "V" | "W" | "X" | "Y" | "Z" | "a" | "b"\n\t\t\t       | "c" | "d" | "e" | "f" | "g" | "h" | "i"\n\t\t\t       | "j" | "k" | "l" | "m" | "n" | "o" | "p"\n\t\t\t       | "q" | "r" | "s" | "t" | "u" | "v" | "w"\n\t\t\t       | "x" | "y" | "z" ;\n\t\t\tdigit = "0" | "1" | "2" | "3" | "4" | "5" | "6"\n\t\t\t      | "7" | "8" | "9" ;\n\t\t\tkeyword = "and" | "break" | "catch" | "class" | "constructor"\n\t\t\t        | "continue" | "do" | "else" | "false" | "for" | "from"\n\t\t\t        | "function" | "if" | "namespace" | "not" | "null"\n\t\t\t        | "or" | "private" | "protected" | "public" | "return"\n\t\t\t        | "static" | "super" | "then" | "this" | "throw"\n\t\t\t        | "true" | "try" | "use" | "var" | "while" | "xor" ;\n\n\t\t\tinteger = digit, { digit } ;\n\t\t\treal = integer, ".", integer\n\t\t\t\t | integer, ("e" | "E"), [ "+" | "-" ], integer\n\t\t\t     | integer, ".", integer, ("e" | "E"), [ "+" | "-" ], integer ;\n\t\t\tstring = \'"\', { (unicode-char - "\\" - line-feed) | escape }, \'"\' ;\n\t\t\tescape = "\\", "\\"\n\t\t\t       | "\\", \'"\'\n\t\t\t       | "\\", "r"\n\t\t\t       | "\\", "n"\n\t\t\t       | "\\", "t"\n\t\t\t       | "\\", "f"\n\t\t\t       | "\\", "b"\n\t\t\t       | "\\", "/"\n\t\t\t       | "\\", "u", hex, hex, hex, hex ;\n\t\t\thex = digit | "A" | "B" | "C" | "D" | "E" | "F"\n\t\t\t            | "a" | "b" | "c" | "d" | "e" | "f" ;\n\n\t\t\toperator = arithmetic_op | compare_op | assign-op ;\n\t\t\tbinary-op = "+" | "-" | "*" | "/" | "//" | "%" | "^" ;\n\t\t\tcompare_op = "==" | "!=" | "<" | "<=" | ">" | ">=" ;\n\t\t\tassign-op = "=" | "+=" | "-=" | "*=" | "/=" | "%=" | "^=" ;\n\t\t\tgrouping = "(" | ")" | "[" | "]" | "{" | "}" ;\n\t\t\tseparator = "," | "." | ";" ;\n\n\t\t\tdeclaration = var-decl\n\t\t\t            | func-decl\n\t\t\t            | class-decl\n\t\t\t            | namespace-decl ;\n\n\t\t\tvar-decl = "var", single-var, { ",", single-var }, ";" ;\n\t\t\tsingle-var = identifier, [ "=", expression ] ;\n\t\t\tfunc-decl = "function", identifier, "(", param-list, ")", func-body ;\n\t\t\tparam-list = [ param-decl, { ",", param-decl } ] ;\n\t\t\tparam-decl = identifier, [ "=", constant-ex ] ;\n\t\t\tconstant-ex = $ expression that evaluates to a constant $ ;\n\t\t\tfunc-body = "{", { declaration | statement | directive }, "}" ;\n\t\t\tclass-decl = "class", identifier, [ ":", name ], class-body ;\n\t\t\tclass-body = "{", "}" | "{", visibility, { visibility\n\t\t\t                                           | constructor\n\t\t\t                                           | [ "static" ], declaration\n\t\t\t                                           | directive },\n\t\t\t                        "}" ;\n\t\t\tvisibility = ("public" | "procected" | "private"), ":" ;\n\t\t\tconstructor = "constructor", "(", param-list, ")",\n\t\t\t         [ ":", "super", "(", [ expression, { ",", expression } ], ")", ],\n\t\t\t         func-body ;\n\t\t\tnamespace-decl = "namespace", identifier, namespace-body ;\n\t\t\tnamespace-body = "{", { declaration | statement | directive }, "}" ;\n\n\t\t\tdirective = use ;\n\t\t\tuse-directive = [ "from", name ], "use", name-import,\n\t\t\t                                     { ",", name-import }, ";" ;\n\t\t\tname-import = ("namespace", use-name)\n\t\t\t            | (use-name, [ "as", identifier ]) ;\n\t\t\tuse-name = identifier, { ".", identifier } ;\n\n\t\t\texpression = literal\n\t\t\t           | group\n\t\t\t           | unary-operator\n\t\t\t           | binary-operator\n\t\t\t           | function-call\n\t\t\t           | item-access\n\t\t\t           | member-access\n\t\t\t           | name ;\n\t\t\tliteral = null\n\t\t\t        | boolean\n\t\t\t        | integer\n\t\t\t        | real\n\t\t\t        | string, { string }\n\t\t\t        | array\n\t\t\t        | dictionary\n\t\t\t        | lambda ;\n\t\t\tnull = "null" ;\n\t\t\tboolean = "true" | "false" ;\n\t\t\tarray = empty-array | nonempty-array ;\n\t\t\tempty-array = "[", "]" ;\n\t\t\tnonempty-array = "[", expression, { ",", expression }, [ "," ], "]" ;\n\t\t\tdictionary = empty-dictionary | nonempty-dictionary ;\n\t\t\tempty-dictionary = "{", "}" ;\n\t\t\tnonempty-dictionary = "{", key-value, { ",", key-value }, [ "," ], "}" ;\n\t\t\tkey-value = (string | identifier), ":", expression ;\n\t\t\tlambda = "function", [ closure ], "(", param-list, ")", func-body ;\n\t\t\tclosure = "[", [ closure-param, { ",", closure-param, } ], "]" ;\n\t\t\tclosure-param = [ identifier, "=" ], expression ;\n\t\t\tparam-list = [ param-decl, { ",", param-decl } ] ;\n\t\t\tparam-decl = identifier, [ "=", constant-ex ] ;\n\t\t\tconstant-ex = $ expression that evaluates to a constant $ ;\n\t\t\tfunc-body = "{", { declaration | statement | directive }, "}" ;\n\t\t\tname = ("super", ".", identifier) | (identifier, {".", identifier}) ;\n\n\t\t\tblock = "{", { declaration | statement | directive }, "}" ;\n\t\t\tassignment = lhs, assign-op, expression, ";" ;\n\t\t\tlhs = name\n\t\t\t        | expression, "[", expression, "]"\n\t\t\t        | expression, ".", identifier ;\n\t\t\tassign-op = "=" | "+=" | "-=" | "*=" | "/=" | "%=" | "^=" ;\n\t\t\tcondition = "if", expression, "then", statement,\n\t\t\t                          [ "else", statement ] ;\n\t\t\tfor-loop = "for", [ loop-var, "in" ], expression, "do", statement ;\n\t\t\tloop-var = ("var", identifier) | name ;\n\t\t\twhile-do-loop = "while", expression, "do", statement ;\n\t\t\tdo-while-loop = "do", statement, "while", expression, ";" ;\n\t\t\tbreak = "break", ";" ;\n\t\t\tcontinue = "continue", ";" ;\n\t\t\treturn = "return", [ expression ], ";" ;\n\t\t\tthrow = "throw", expression, ";" ;\n\t\t\ttry-catch = "try", statement,\n\t\t\t            "catch", "var", identifier, "do", statement ;\n\n\t\t\tprogram = { declaration | statement | directive } ;\n\t\t\t</ebnf>\n\t\t',children:[]}]},{id:"declarations",name:"Declarations",title:"Declarations",content:"\n\t\t<p>\n\t\tA declaration defines a named entity. Possible entities are variables,\n\t\tfunctions, classes, and namespaces. Hence, a declaration is defined\n\t\tformally as follows:\n\t\t<ebnf>\n\t\t\tdeclaration = var-decl\n\t\t\t            | func-decl\n\t\t\t            | class-decl\n\t\t\t            | namespace-decl ;\n\t\t</ebnf>\n\t\tThe terms on the right hand side are defined in the following\n\t\tsub-sections.\n\t\t</p>\n\t",children:[{id:"variables",name:"Variables",title:"Variables",content:'\n\t\t\t<p>\n\t\t\tA variable is a named entity referencing a value.\n\t\t\t</p>\n\n\t\t\t<h2>Syntax</h2>\n\t\t\t<p>\n\t\t\tVariables are declared with following syntax:\n\t\t\t<ebnf>\n\t\t\t\tvar-decl = "var", single-var, { ",", single-var }, ";" ;    # var ex, am, ple;\n\t\t\t\t  single-var = identifier, [ "=", expression ] ;            # ex = 1, am, ple\n\t\t\t</ebnf>\n\t\t\tThey are referenced by their name.\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\t\tvar a, b=5, c=b+1;\n\t\t\t\t\tprint(a);\n\t\t\t\t\tprint(b + c);\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t\t<p>\n\t\t\tAt each time, a variable references exactly one value. Variables\n\t\t\tare untyped; they can refer to a values of any type, and the type\n\t\t\tcan change during runtime.\n            <tscript>\n                var a = "this is a string";\n                a = 45;                         # a is now an integer\n            </tscript>\n\t\t\tIf a variable is not initialized (like <code class="code">a</code>\n\t\t\tin the above example), then it is implicitly set to\n\t\t\t<keyword>null</keyword>. Therefore the following two statements\n\t\t\tare equivalent:\n\t\t\t<tscript>\n\t\t\t\tvar x;\n\t\t\t</tscript>\n\t\t\t<tscript>\n\t\t\t\tvar x = null;\n\t\t\t</tscript>\n\t\t\tThe variable name must not appear anywhere in its initializer,\n\t\t\ti.e., in the expression on the right hand side of the equals sign.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tMultiple variables can refer to the same value.\n\t\t\t<a href="?doc=/language/statements/assignments">Assigning</a> a value\n\t\t\tto a variable only references the value, it does not copy the value.\n\t\t\tIt is different from initialization, and the variable itself may\n\t\t\tappear on the right hand side, referring to the old value before\n\t\t\tthe actual assignment takes place:\n\t\t\t<tscript>\nvar x = 3;              # initialization\nx = 2 * x + 1;          # assignment\n\nvar a = [0, 1, 2];\nvar b = a;\n\nprint(b);               # prints [0, 1, 2]\na.push(3);\nprint(b);               # prints [0, 1, 2, 3] ==> b is a reference to a, not a copy\n\nvar c = [0, 1, 2];\nvar d = deepcopy(c);\n\nprint(d);               # prints [0, 1, 2]\nc.push(3);\nprint(d);               # prints [0, 1, 2] ==> d only copied the value of c\n\t\t\t</tscript>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tParameters of functions are also variables, although they are\n\t\t\tdeclared without <keyword>var</keyword>\n\t\t\t(see <a href="?doc=/language/declarations/functions">functions</a>).\n\t\t\tThey are initialized to a value provided by the function\n\t\t\tcall or to their default value, if present. Default values\n\t\t\tare limited to constant expressions.\n            <tscript>\n            function example(a = 2) {       # 2 is the default value for a\n                return a;\n            }\n\n            print(example());               # prints 2\n\n            print(example(3));              # prints 3\n            </tscript>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tVariables inside classes are called attributes. These variables\n\t\t\tcan be initialized, but the initializer must evaluate to a\n\t\t\tconstant. Variable that should be initialized to a value\n\t\t\tcomputed at runtime can be set in the constructor.\n            <tscript>\n            class example {\n                private:\n                    var x = 2;              # has to be a constant\n                    var y;\n                public:\n                    constructor(a) {\n                        y = a;              # if you want to enable dynamic initialisation of y\n                    }\n            }\n            </tscript>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tClosure parameters are somewhere in between the above two cases.\n\t\t\tThey are stored inside the function closure like attributes in\n\t\t\tan object. Whenever the closure is called they are copied, and\n\t\t\tthe copies become parameters of the function.\n\t\t\t</p>\n\n\t\t\t<h2>Lifetime of Variables</h2>\n\t\t\t<p>\n\t\t\tTScript distinguishes three types of variables:\n\t\t\t<ul>\n\t\t\t\t<li>Global variables are declared at global scope, in a namespace, or as static attributes of global classes. They are available for the whole runtime of the program.</li>\n\t\t\t\t<li>Local variables are declared in a non-global non-class scope, or as parameters of a function or closure. They are available inside their defining scope, or for closure parameters, inside the function body. After the scope is left they "go out of scope" and cannot be accessed any more.</li>\n\t\t\t\t<li>Attributes are declared in a class scope. Non-static attributes are part of an object, and hence their lifetime is bound to the lifetime of the object.</li>\n\t\t\t</ul>\n            <tscript do-not-run>\n            var x = 1;                      # global declaration\n            {\n                print(x);                   # works\n                var y = 2;                  # local declaration\n            }\n            print(y);                       # does not work\n            </tscript>\n\t\t\tIt may seem at first glance that binding a variable to a closure extends its lifetime to the lifetime of the closure. This is not the case. Instead, values are <i>copied</i> into closure parameters, which are independent variables, as demonstrated here:\n\t\t\t<tscript>\n\t\t\t\tfunction f()\n\t\t\t\t{\n\t\t\t\t\tvar x = 42;\n\t\t\t\t\tvar ret = function [x] () { return x; };\n\t\t\t\t\tx *= 2;\n\t\t\t\t\treturn ret;\n\t\t\t\t}\n\t\t\t\tprint(f()());   # prints 42, not 84\n\t\t\t</tscript>\n\t\t\t</p>\n\t\t',children:[]},{id:"functions",name:"Functions",title:"Functions",content:'\n\t\t\t<p>\n\t\t\tA function is a named block of code that can be invoked arbitrarily\n\t\t\toften, possibly with different parameter values.\n\t\t\t</p>\n\n\t\t\t<h2>Syntax</h2>\n\t\t\t<p>\n\t\t\tFunctions are declared with the following syntax:\n\t\t\t<ebnf>\n\t\t\t\tfunc-decl = "function", identifier, "(", param-list, ")", func-body ;   # function example() {}\n\t\t\t\t  param-list = [ param-decl, { ",", param-decl } ] ;                    # (ex, am, ple)\n\t\t\t\t  param-decl = identifier, [ "=", constant-ex ] ;                       # ex or ex = 1\n\t\t\t\t  constant-ex = $ expression that evaluates to a constant $ ;\n\t\t\t\t  func-body = "{", { declaration | statement | directive }, "}" ;       # { . . . }\n\t\t\t</ebnf>\n\t\t\tIt is referenced by its name, and invoked by\n\t\t\t<a href="?doc=/language/expressions/function-calls">providing\n\t\t\tvalues for the parameters in parentheses</a>. The effect of invoking a\n\t\t\tfunction is that the control flow is transferred to the function body.\n\t\t\tAfter the function body is left with a <keyword>return</keyword>\n\t\t\tstatement or by reaching the end of the function body, the control flow\n\t\t\tis returned to the calling context.\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\t\tfunction circleArea(radius)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn math.pi() * radius * radius;\n\t\t\t\t\t}\n\t\t\t\t\tvar func = circleArea;\n\t\t\t\t\tprint(circleArea(3));   # prints 9*pi = 28.2743...\n\t\t\t\t\tprint(func(3));         # prints 9*pi = 28.2743...\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t\t<p>\n\t\t\tParameters of functions are always named, with an optional default value.\n\t\t\tAs can be seen in the above example, function names are valid expressions\n\t\t\t(of type <a href="?doc=/language/types/function">Function</a>).\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tAn alternative way to define functions are\n\t\t\t<a href="?doc=/language/expressions/literals/anonymous-functions">anonymous\n\t\t\tfunctions</a>.\n\t\t\t</p>\n\t\t',children:[]},{id:"classes",name:"Classes",title:"Classes",content:'\n\t\t\t<p>\n\t\t\tA class declaration adds a new type to the program. Values or objects\n\t\t\tof this type can be instantiated by calling the type like a function.\n\t\t\t</p>\n\n\t\t\t<h2>Syntax</h2>\n\t\t\t<p>\n\t\t\tA class is declared with the following syntax:\n\t\t\t<ebnf>\n\t\t\t\tclass-decl = "class", identifier, [ ":", name ], class-body ;\n\t\t\t\t  class-body = "{", [ directive ], "}"\n\t\t\t\t             | "{", [ directive ], visibility,\n\t\t\t\t                  { visibility\n         \t\t\t\t            | constructor\n\t\t         \t\t            | [ "static" ], declaration\n\t\t\t\t                    | directive },\n         \t\t\t\t      "}" ;\n\t\t\t\t  visibility = ("public" | "procected" | "private"), ":" ;\n\t\t\t\t  constructor = "constructor", "(", param-list, ")",\n\t\t\t\t         [ ":", "super", "(", [ expression, { ",", expression } ], ")" ],\n\t\t\t\t         func-body ;\n\t\t\t</ebnf>\n\t\t\tRefer to <a href="?doc=/language/declarations/functions">functions</a>\n\t\t\tfor a definition of <ebnf>param-list</ebnf> and <ebnf>func-body</ebnf>.\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\nclass Circle\n{\n    use namespace math;\n\n\tprivate:\n\t\tvar m_radius = 0;\n\n    public:\n\t\tconstructor(radius=1)                         # constructor, gets called by "var c = Circle(5)" and sets m_radius to handed value; if no value is given, sets radius to 1 by default\n\t\t{\n            m_radius = radius;\n        }\n\t\tfunction radius()\n\t\t{ return m_radius; }\n\t\tfunction area()\n    \t{ return math.pi() * m_radius * m_radius; }\n}\n\nvar c = Circle(3);\nprint("The circle has radius " + c.radius() + " and area " + c.area() + ".");       # prints "The circle has radius 3 and area 28.274333882308138."\nvar c2 = Circle();\nprint("The circle has radius " + c2.radius() + " and area " + c2.area() + ".");     # prints "The circle has radius 1 and area 3.141592653589793."\n    \t\t\t</tscript>\n\t\t\t</div>\n\n\t\t\t<h2>The Constructor</h2>\n\t\t\t<p>\n\t\t\tThe constructor of a class is called whenever the class is instantiated,\n\t\t\ti.e., when a new object of that very class is created. Its role is to\n\t\t\tinitialize the object\'s state, comprised by its attributes. Attributes\n\t\t\tcan equally well be declared with a constant initializer. Non-constant\n\t\t\t(parameter-dependent) initialization is done in the constructor.\n\t\t\tOf course, the constructor can perform further tasks. Uninitialized\n\t\t\tmembers hold the value <keyword>null</keyword>.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tClasses with a public constructor can be instantiated from everywhere,\n\t\t\tand the same holds for classes without constructor (which implies the\n\t\t\tgeneration of a public default constructor). Constructors can also be\n\t\t\tprotected or private. A class with private constructor can be\n\t\t\tinstantiated only from within a method of the class, and the class\n\t\t\tcannot have sub-classes. A class with protected constructor can have\n\t\t\tsub-classes, since the constructor can be called from a sub-class\n\t\t\tconstructor.\n\t\t\t</p>\n\n\t\t\t<h2>Static and Non-Static Members</h2>\n\t\t\t<p>\n\t\t\tDeclarations inside the function body as known as members of the class.\n\t\t\tMembers can be declared <keyword>static</keyword>. Static members belong\n\t\t\tto the class, not to its objects. For a static variable (also called a\n\t\t\tclass variable) this means that a single instance of the variable with\n\t\t\tglobal lifetime exists, independent of the number of objects of the\n\t\t\tclass. In contrast, the liftime of attributes (non-static variables) is\n\t\t\tbound to the object. A non-static function member is called a method.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tA public member of a class is referenced with the dot-operator, as seen\n\t\t\tin the example above. Inside the class, its members can be accessed by\n\t\t\ttheir names. The object itself, i.e., the left-hand-side of the\n\t\t\t<a href="?doc=/language/expressions/member-access">dot operator</a>,\n\t\t\tis available under the name <keyword>this</keyword>. A static function\n\t\t\tcan be invoked without referring to an instance of the class, and hence\n\t\t\t<keyword>this</keyword> is undefined in a static function. The following\n\t\t\texample demonstrates static members:\n\t\t\t<tscript>\n\t\t\t\tclass Counted\n\t\t\t\t{\n\t\t\t\tprivate:\n\t\t\t\t\tstatic var m_counter = 0;\n\n\t\t\t\tpublic:\n\t\t\t\t\tconstructor() { m_counter += 1; }\n\t\t\t\t\tfunction doSomething() { #* dummy *# }\n\t\t\t\t\tstatic function numberOfInstances()\n\t\t\t\t\t{\n\t\t\t\t\t\t# doSomething();   # error; this is not defined\n\t\t\t\t\t\t# return this;     # error; this is not defined\n\t\t\t\t\t\treturn m_counter;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tvar a = Counted(), b = Counted(), c = Counted();\n\t\t\t\tprint(Counted.numberOfInstances());\n\t\t\t\tprint(a.numberOfInstances());\n\t\t\t</tscript>\n\t\t\t</p>\n\n\t\t\t<h2>Dynamic Dispatching</h2>\n\t\t\t<p>\n\t\t\tMember name lookup of the form <code class="code">a.numberOfInstances</code>\n\t\t\tin the above code happens dynamically at runtime. The result of the\n\t\t\t<a href="?doc=/language/expressions/member-access">member access</a> (and\n\t\t\ttherefore, in this context, the invoked function) depends on the type\n\t\t\tof the left-hand-side, provided that multiple classes declare a member\n\t\t\tof the same name. This is an elegant mechanism for creating implicit\n\t\t\tswitches in code based on the type of data it encounters. Referencing\n\t\t\ta member name that does not exist in the type (more precisely, in its\n\t\t\tpublic interface) results in an error message.\n\t\t\t</p>\n\n\t\t\t<h2>Visibility of Members</h2>\n\t\t\t<p>\n\t\t\tTScript classes allow for proper information hiding, i.e., they can\n\t\t\thide implementation details behind a public or protected interface. From\n\t\t\toutside the class, only members declared <keyword>public</keyword> are\n\t\t\tvisible, i.e., members following a <keyword>public</keyword> declaration.\n\t\t\tIn addition, <keyword>protected</keyword> members are visible within\n\t\t\tsub-classes (see below), while <keyword>private</keyword> members are\n\t\t\tonly visible within the class itself. It is common practice to declare\n\t\t\tmost attributes as private to the class, and to provide access\n\t\t\tfacilities in terms of protected and public methods.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tAlso inside classes, the general principle that declarations can be\n\t\t\tused only after they were declared is applied. Therefore it is common\n\t\t\tpractice to declare attributes towards the beginning of the class, so\n\t\t\tthat they can be accessed by methods declared below them.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tHiding information is not always necessary, and sometimes\n\t\t\tover-complicates matters. In some cases simple classes consisting\n\t\t\tonly of public attributes are a meaningful choice. For example, the\n\t\t\tfollowing class may represent a point in a two-dimensional coordinate\n\t\t\tsystem:\n\t\t\t<tscript>\n\t\t\t\tclass Point\n\t\t\t\t{\n\t\t\t\tpublic:\n\t\t\t\t\tvar x, y;\n\n\t\t\t\t\tconstructor(x_, y_)\n\t\t\t\t\t{ x = x_; y = y_; }\n\t\t\t\t}\n\n\t\t\t</tscript>\n\t\t\tThe same data can of course be held in an array\n\t\t\t<code class="code">[x,y]</code> or a dictionary\n\t\t\t<code class="code">{"x":x,"y":y}</code>, but the class has the\n\t\t\tadvantages of making the role of the type and of its members explicit.\n\t\t\tThis makes code more readable and more maintainable. Furthermore it\n\t\t\tadds the ability of code to test for its the data type to clarify the\n\t\t\trole of a value, which is not possible with generic containers since\n\t\t\tthey are used for many purposes.\n\t\t\t</p>\n\n\t\t\t<h2>Inheritance</h2>\n\t\t\t<p>\n\t\t\tA class can be based on any other type, including all the\n\t\t\t<a href="?doc=/language/types">built-in types</a> (however, note that\n\t\t\taggregation is often preferable over inheriting an immutable type).\n\t\t\tThis means that the type, also known as the sub-class in this context,\n\t\t\tinherits all properties and members from its super-class.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tSubclassing is a common mechanism for extending the functionality of\n\t\t\ta type, and for creating a set of types with a uniform interface.\n\t\t\tThe mechanism allows to override (generic) functionality of the base\n\t\t\tor super class with (specialized) functionality of the sub-class,\n\t\t\tsimply by declaring a method of the same name as in the super class.\n\t\t\tThis does not create a name conflict. When invoking such a method on\n\t\t\tan object of the sub-class then the dispatching rules dictate that the\n\t\t\tmethod declared in the sub-class is invoked, and the method in the\n\t\t\tsuper class is ignored.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tWhen implementing sub-classes, there regularly is the demand to access\n\t\t\ta super-class member of the same name or the super class constructor.\n\t\t\tThis can be achieved with a special syntax for the constructor and for\n\t\t\tnames based on the <keyword>super</keyword> keyword, as follows:\n\t\t\t<tscript>\nclass Person\n{\n\tprivate:\n\t\tvar m_name;\n\t\tvar m_address;                                                      # m_name and m_address can only be accessed in Person\n\n    protected:\n        var m_example = 1;                                                  # m_example can be accessed in Person and in Person\'s heirs\n\n\tpublic:\n\t\tconstructor(name, address)\n\t\t{\n\t\t\tm_name = name;\n\t\t\tm_address = address;\n\t\t}\n\n\t\tfunction description()\n\t\t{ return "name: " + m_name + "\\naddress: " + m_address + "\\n"; }  # the constructor and the function description can be accessed from anywhere\n}\n\nclass Customer : Person\n{\n\tprivate:\n\t\tvar m_customerID;\n\n    public:\n\t\tconstructor(id, name, address):super(name, address)\n\t\t{ m_customerID = id; }\n\n\t\tfunction description()\n\t\t{\n            # print(super.m_name);                                            # this does not work, since m_name is not visible in this slope\n\n            print(super.m_example);                                           # this does work, since m_example is protected and therefore visible for Customer\n\n            return "id: " + m_customerID + "\\n" + super.description();\n        }\n}\n\nvar c = Customer("1357", "Joe", "city center");\nprint(c.description());\n            </tscript>\n\t\t\t</p>\n\t\t',children:[]},{id:"namespaces",name:"Namespaces",title:"Namespaces",content:'\n\t\t\t<p>\n\t\t\tA namespace is a named scope designed to organize declarations.\n\t\t\t</p>\n\n\t\t\t<h2>Syntax</h2>\n\t\t\tNamespaces are declared with the following syntax:\n\t\t\t<p>\n\t\t\t<ebnf>\n\t\t\t\tnamespace-decl = "namespace", identifier, namespace-body ;                 # namespace example {}\n\t\t\t\t  namespace-body = "{", { declaration | statement | directive }, "}" ;     # { . . . }\n\t\t\t</ebnf>\n\t\t\tNamespaces can only be declared at global scope or within other\n\t\t\tnamespaces. However, the same namespace can be declared multiple\n\t\t\ttimes. The different declarations are treated as parts of the same\n\t\t\tnamespace.\n\t\t\t</p>\n\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\t\tnamespace distributions\n\t\t\t\t\t{\n\t\t\t\t\t\tnamespace detail\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfunction gaussian()\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvar g = math.sin(2 * math.pi() * math.random());\n\t\t\t\t\t\t\t\tg *= math.sqrt(-2 * math.log(math.random()));\n\t\t\t\t\t\t\t\treturn g;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction uniform(lower, upper)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn lower + (upper - lower) * math.random();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction exponential(lambda)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn -math.log(math.random()) / lambda;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction gaussian(mu, sigma)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn mu + sigma * detail.gaussian();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tfor var i in 0:20 do print(distributions.gaussian(1.5, 0.1));\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t\t<p>\n\t\t\tNamespaces allow to keep globally accessible names out of the global\n\t\t\tscope. For large collections of declarations this greatly reduces the\n\t\t\tchance of name collisions. This is particularly important when working\n\t\t\twith large software libraries.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tAs a price, the full names of declarations get longer, since the\n\t\t\tnamespace name is prepended to the declared name, separated with a dot.\n\t\t\tThis is not necessarily an issue since individual names and even whole\n\t\t\tnamespaces can be <a href="?doc=/language/directives/use">imported</a> into\n\t\t\tthe scopes where they are used. Since import is usually selective, name\n\t\t\tcollisions are still rate.\n\t\t\t</p>\n\t\t',children:[]}]},{id:"directives",name:"Directives",title:"Directives",content:'\n\t\t<p>\n\t\tA directive is an instruction to the TScript language that is\n\t\tnot directly related to the program flow itself. It is neither a\n\t\tdeclaration nor a statement.\n\t\t<ebnf>\n\t\t\tdirective = use ;\n\t\t</ebnf>\n\t\tCurrently, the only directive is the\n\t\t<a href="?doc=/language/directives/use">use</a> directive. There exist\n\t\tplans to add directives for including external files and libraries\n\t\tin the future.\n\t\t</p>\n\t',children:[{id:"use",name:"Using Names from Namespaces with Use Directives",title:"Using Names from Namespaces with Use Directives",content:'\n\t\t\t<p>\n\t\t\tA <keyword>use</keyword> directive imports names declared in a\n\t\t\tnamespace directly into the current scope. This allows for\n\t\t\teasier access to names that are otherwise lengthy to write\n\t\t\tout. The syntax is as follows:\n\t\t\t<ebnf>\n\t\t\t\tuse-directive = [ "from", name ], "use", name-import,\n\t\t\t\t                                     { ",", name-import }, ";" ;\n\t\t\t\tname-import = ("namespace", use-name)\n\t\t\t\t            | (use-name, [ "as", identifier ]) ;\n\t\t\t\tuse-name = identifier, { ".", identifier } ;\n\t\t\t</ebnf>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tA <ebnf>name</ebnf> refers to a declaration inside\n\t\t\ta namespace, possibly to a namespace itself. The first form\n\t\t\t<ebnf do-not-check>namespace name</ebnf> imports all names <i>inside</i>\n\t\t\tthe the referenced namespace into the current scope. The\n\t\t\tsecond form <ebnf do-not-check>name ["as" identifier]</ebnf> imports a\n\t\t\tsingle name. In the latter case the optional identifier is\n\t\t\ta new alias name under which the original declaration is\n\t\t\tmade available. If it is not provided, then the last identifier\n\t\t\tof the fully qualified name is used, e.g., <code class="code">c</code>\n\t\t\tis used when importing the name <code class="code">a.b.c</code>.\n\t\t\tIf <ebnf do-not-check>"from" name</ebnf> is provided,\n\t\t\tthen all subsequent names are looked up in the context of\n\t\t\tthe given namespace, not in the context of the current\n\t\t\tscope.\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\t\tnamespace a {\n\t\t\t\t\t    namespace b {\n\t\t\t\t\t        var y = "hello";\n\t\t\t\t\t    }\n\t\t\t\t\t}\n\t\t\t\t\t# all of the print statements output "hello":\n\t\t\t\t\tprint(a.b.y);\n\t\t\t\t\t{\n\t\t\t\t\t    use namespace a;\n\t\t\t\t\t    print(b.y);\n\t\t\t\t\t}\n\t\t\t\t\t{\n\t\t\t\t\t    use namespace a.b;\n\t\t\t\t\t    print(y);\n\t\t\t\t\t}\n\t\t\t\t\t{\n\t\t\t\t\t    use a.b.y;\n\t\t\t\t\t    print(y);\n\t\t\t\t\t}\n\t\t\t\t\t{\n\t\t\t\t\t    from a use namespace b;\n\t\t\t\t\t    print(y);\n\t\t\t\t\t}\n\t\t\t\t\t{\n\t\t\t\t\t    from a use b.y;\n\t\t\t\t\t    print(y);\n\t\t\t\t\t}\n\t\t\t\t\t{\n\t\t\t\t\t    from a.b use y;\n\t\t\t\t\t    print(y);\n\t\t\t\t\t}\n\t\t\t\t\t{\n\t\t\t\t\t    from a.b use y as z;\n\t\t\t\t\t    print(z);\n\t\t\t\t\t}\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t',children:[]}]},{id:"expressions",name:"Expressions",title:"Expressions",content:'\n\t\t<p>\n\t\tAn expression is a computation that produces a value. The simplest atomic\n\t\texpressions are constants and names referring to declarations. Expressions\n\t\tcan be combined by means of operators into more complex expressions.\n\t\t</p>\n\n\t\t<h2>Syntax</h2>\n\t\t<p>\n\t\tHere we list groups of expression types, which are further differentiated\n\t\tin a number of sub-sections.\n\t\t<ebnf>\n\t\t\texpression = literal\n\t\t\t           | group\n\t\t\t           | unary-operator\n\t\t\t           | binary-operator\n\t\t\t           | function-call\n\t\t\t           | item-access\n\t\t\t           | member-access\n\t\t\t           | name ;\n\t\t</ebnf>\n\t\t</p>\n\n\t\t<h2>Side Effects</h2>\n\t\t<p>\n\t\tSome expressions have side effects. A side effect is defined as an effect\n\t\tthat is unrelated to the computation of the expression result. In many\n\t\tcases, the only purpose of evaluating such expressions is to invoke the\n\t\tside effects. A simple example is the\n\t\t<a href="?doc=/library/core">print</a> function:\n\t\tit prints its argument as a side effect and return <keyword>null</keyword>.\n\t\tIn order to facilitate the invocation of such functions,\n\t\t<a href="?doc=/language/statements/expressions">expressions can be used as\n\t\tstatements</a>.\n\t\t</p>\n\t',children:[{id:"literals",name:"Literals",title:"Literals",content:"\n\t\t<p>\n\t\tTScript knows five types of atomic literals. From these,\n\t\tcontainer-valued composite literals can be created. In addition,\n\t\tlambda functions are considered a special type of literal:\n\t\t<ebnf>\n\t\t\tliteral = null\n\t\t\t        | boolean\n\t\t\t        | integer\n\t\t\t        | real\n\t\t\t        | string, { string }\n\t\t\t        | array\n\t\t\t        | dictionary\n\t\t\t        | lambda ;\n\t\t</ebnf>\n\t\t</p>\n\t\t",children:[{id:"null",name:"The Null Literal",title:"The Null Literal",content:'\n\t\t\t\t<p>\n\t\t\t\tThere is only one value of type\n\t\t\t\t<a href="?doc=/language/types/null">Null</a>,\n\t\t\t\tdenoted by the keyword <keyword>null</keyword>:\n\t\t\t\t<ebnf>\n\t\t\t\t\tnull = "null" ;\n\t\t\t\t</ebnf>\n\t\t\t\tIt is commonly used to represent a "meaningless" value,\n\t\t\t\tor a yet uninitialized value.\n\t\t\t\t</p>\n\t\t\t\t<div class="example">\n\t\t\t\t\t<h3>Example</h3>\n\t\t\t\t\t<tscript>\n\t\t\t\t\t\tvar a;             # a is implicitly set to null\n\t\t\t\t\t\tvar b = null;      # b is explicitly set to null\n\t\t\t\t\t\tif b == null then print("b is null.");\n\t\t\t\t\t</tscript>\n\t\t\t\t</div>\n\t\t\t',children:[]},{id:"booleans",name:"Boolean Literals",title:"Boolean Literals",content:'\n\t\t\t\t<p>\n\t\t\t\tThe <a href="?doc=/language/types/boolean">Boolean</a> type represent the\n\t\t\t\tlogical values <keyword>true</keyword> and <keyword>false</keyword>,\n\t\t\t\tboth of which are keywords. They result from comparisons, and act as\n\t\t\t\tinput to if-conditions and loop-statements:\n\t\t\t\t<ebnf>\n\t\t\t\t\tboolean = "true" | "false" ;\n\t\t\t\t</ebnf>\n\t\t\t\t</p>\n\t\t\t\t<div class="example">\n\t\t\t\t\t<h3>Example</h3>\n\t\t\t\t\t<tscript>\n\t\t\t\t\t\tvar a = true;\n\t\t\t\t\t\tvar b = false;\n\t\t\t\t\t\tvar c = 3 == 5;     # assignment of false\n\t\t\t\t\t\tif c then\n\t\t\t\t\t\t    print("3 equals 5");\n\t\t\t\t\t\telse\n\t\t\t\t\t\t    print("3 differs from 5");\n\t\t\t\t\t</tscript>\n\t\t\t\t</div>\n\t\t\t',children:[]},{id:"integers",name:"Integer Literals",title:"Integer Literals",content:'\n\t\t\t\t<p>\n\t\t\t\tAn Integer literal represents a constant of type\n\t\t\t\t<a href="?doc=/language/types/integer">Integer</a>. It is denoted by\n\t\t\t\tan integer <a href="?doc=/language/syntax/tokens">token</a>.\n\t\t\t\tThe value must lie in the integer range, i.e., it must not exceed\n\t\t\t\t2<sup>31</sup> - 1 = 2147483647.\n\t\t\t\t</p>\n\t\t\t\t<div class="example">\n\t\t\t\t\t<h3>Example</h3>\n\t\t\t\t\t<tscript>\n\t\t\t\t\t\tvar a = 0;\n\t\t\t\t\t\tvar b = 42;\n\t\t\t\t\t\tvar c = -99;             # negated literal 99\n\t\t\t\t\t\t# var d = -2147483648;   # error, range exceeded\n\t\t\t\t\t\tvar e = -2147483647-1;\n\t\t\t\t\t</tscript>\n\t\t\t\t</div>\n\t\t\t',children:[]},{id:"reals",name:"Real Literals",title:"Real Literals",content:'\n\t\t\t\t<p>\n\t\t\t\tA Real literal represents a constant of type\n\t\t\t\t<a href="?doc=/language/types/real">Real</a>. It is denoted by a\n\t\t\t\treal <a href="?doc=/language/syntax/tokens">token</a>.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\tThere is no syntax for denoting the special IEEE floating point\n\t\t\t\tvalues INF (infinity) and NaN (not a number) as literals. Instead\n\t\t\t\tthe functions <a href="?doc=/language/types/real">Real.inf()</a> and\n\t\t\t\t<a href="?doc=/language/types/real">Real.nan()</a> can be used to create such\n\t\t\t\tliterals. The methods <a href="?doc=/language/types/real">Real.isFinite()</a>,\n\t\t\t\t<a href="?doc=/language/types/real">Real.isInfinite()</a>, and\n\t\t\t\t<a href="?doc=/language/types/real">Real.isNan()</a> test for degenerate values.\n\t\t\t\tReal numbers that exceed the range specified in the\n\t\t\t\t<a href="https://de.wikipedia.org/wiki/IEEE_754" target="_blank">IEEE 754 standard</a>\n\t\t\t\toverflow to positive or negative infinity, or underflow to zero.\n\t\t\t\t</p>\n\t\t\t\t<div class="example">\n\t\t\t\t\t<h3>Example</h3>\n\t\t\t\t\t<tscript>\nvar a = 4;                      # not a real, but an integer\nvar b = 4.0;                    # real literal representing 4\nvar c = 4e0;                    # real literal representing 4\nvar d = 400e-2;                 # real literal representing 4\nvar e = 0.04e2;                 # real literal representing 4\nvar f = -123.456e+78;           # negated literal 123.456e+78\nvar g = 1E1000;                 # overflow to infinity\nvar h = 1E-1000;                # underflow to zero\nvar pi = 3.1415926535897931;    # full precision literal\n\nvar inf = Real.inf();           # sets inf to mathematical infinity\nvar nan = Real.nan();           # sets nan to the special constant NaN (not-a-number)\n\nprint(inf.isInfinite());        # prints true\nprint(nan.isNan());             # prints true\n\n\t\t\t\t\t</tscript>\n\t\t\t\t</div>\n\t\t\t',children:[]},{id:"strings",name:"String Literals",title:"String Literals",content:'\n\t\t\t\t<p>A <a href="?doc=/language/types/string">String</a>\n\t\t\t\tliteral consists of a sequence of\n\t\t\t\t<a href="?doc=/language/syntax/tokens">string tokens</a>,\n\t\t\t\teach of which is text enclosed in double quotes within a\n\t\t\t\tsingle line of code. String tokens must be separated only\n\t\t\t\tby whitespace including newlines, and comments.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\tEvery\n\t\t\t\t<a href="?doc=/language/syntax/character-set">character</a>\n\t\t\t\tin between the double quotes is a part of the text\n\t\t\t\tbelonging to the string literal, with one exception: the\n\t\t\t\tbackslash \'\\\' acts as a so-called escape character. This\n\t\t\t\tcharacter introduces an escape sequence with a special\n\t\t\t\tmeaning, as follows:\n\t\t\t\t</p>\n\t\t\t\t<ul>\n\t\t\t\t\t<li><code class="code">\\\\</code> represents a single backslash (ASCII 92)</li>\n\t\t\t\t\t<li><code class="code">\\"</code> represents double quotes (ASCII 34)</li>\n\t\t\t\t\t<li><code class="code">\\t</code> represents a horizontal tabulator (ASCII 9)</li>\n\t\t\t\t\t<li><code class="code">\\r</code> represents a carriage return (ASCII 13)</li>\n\t\t\t\t\t<li><code class="code">\\n</code> represents a line feed (ASCII 10)</li>\n\t\t\t\t\t<li><code class="code">\\f</code> represents a form feed (ASCII 12)</li>\n\t\t\t\t\t<li><code class="code">\\b</code> represents a backspace (ASCII 8)</li>\n\t\t\t\t\t<li><code class="code">\\/</code> represents a slash (ASCII 47)</li>\n\t\t\t\t\t<li><code class="code">\\uXXXX</code> represents any Unicode character, where XXXX is the 4-digit hexadecimal code of the character (or code point)</li>\n\t\t\t\t</ul>\n\t\t\t\t<div class="example">\n\t\t\t\t\t<h3>Example</h3>\n\t\t\t\t\t<tscript>\nprint("hello world");                                       # prints: hello world\nprint("this string prints "                                 # prints: this string prints on a single line\n        "on a single line");\nprint("this string prints\\non two lines");                 # prints: this string prints\n                                                            #         on two lines\nprint("a quote \\"Alea iacta est!\\" inside a string");     # prints: a quote "Alea iacta est!" inside a string\nprint("escaped Euro sign: \\u20AC");                        # prints: escaped Euro sign: €\nprint("multi "                                              # prints: multi line string literal\n      "line "\n      "string "\n      "literal");\n\t\t\t\t\t</tscript>\n\t\t\t\t</div>\n\t\t\t',children:[]},{id:"arrays",name:"Array Literals",title:"Array Literals",content:'\n\t\t\t\t<p><a href="?doc=/language/types/array">Array</a>\n\t\t\t\tliterals are comma-separated sequences of expressions enclosed\n\t\t\t\tin square brackets. The results of evaluating the expressions\n\t\t\t\tbecome the items of the array literal:\n\t\t\t\t<ebnf>\n\t\t\t\t\tarray = empty-array | nonempty-array ;\n\t\t\t\t\t  empty-array = "[", "]" ;\n\t\t\t\t\t  nonempty-array = "[", expression, { ",", expression }, [ "," ], "]" ;\n\t\t\t\t</ebnf>\n\t\t\t\t</p>\n\t\t\t\t<div class="example">\n\t\t\t\t\t<h3>Example</h3>\n\t\t\t\t\t<tscript>\n\t\t\t\t\t\tvar a = [];                     # empty array\n\t\t\t\t\t\tvar b = [16, true, "hello"];\n\t\t\t\t\t\tvar c = [["nested", "array"], "literal"];\n\t\t\t\t\t\tvar d = [c, 7*b[0], 2^10];\n\t\t\t\t\t</tscript>\n\t\t\t\t</div>\n                <p>\n                <img style="display: block; margin: 1em auto;" src="data:image/png;base64,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"/>\n                </p>\n\t\t\t\t<p>\n\t\t\t\tIf all items are constants, then the whole array is a constant.\n\t\t\t\t</p>\n\t\t\t',children:[]},{id:"dictionaries",name:"Dictionary Literals",title:"Dictionary Literals",content:'\n\t\t\t\t<p><a href="?doc=/language/types/dictionary">Dictionary</a>\n\t\t\t\tliterals are comma-separated sequences of key-value pairs enclosed\n\t\t\t\tin curly braces. A key-value pair consists of a key, which is either\n\t\t\t\ta string or an identifier, and a value, which is the result of an\n\t\t\t\tarbitrary expression:\n\t\t\t\t<ebnf>\n\t\t\t\t\tdictionary = empty-dictionary | nonempty-dictionary ;\n\t\t\t\t\t  empty-dictionary = "{", "}" ;\n\t\t\t\t\t  nonempty-dictionary = "{", key-value, { ",", key-value }, [ "," ], "}" ;\n\t\t\t\t\t  key-value = (string | identifier), ":", expression ;\n\t\t\t\t</ebnf>\n\t\t\t\tThe key-value pairs become the items of the\n\t\t\t\tdictionary literal. Importantly, the identifier is not looked up as\n\t\t\t\ta name, but it represents the string that would arise if it were\n\t\t\t\tenclosed in double quotes, so using identifiers instead of strings\n\t\t\t\tfor keys is merely syntactic sugar that saves typing the double\n\t\t\t\tquotes. Keys are string tokens, not string literals, and hence cannot\n\t\t\t\tspan multiple lines.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\tNote that not all keys can be represented with the identifier\n\t\t\t\tshort-notation, simply because they are not valid identifiers. Also\n\t\t\t\tnote that this means that string variables cannot act as keys in\n\t\t\t\tstring literals; this can be achieved with the\n\t\t\t\t<a href="?doc=/language/expressions/item-access">item access operator</a>.\n\t\t\t\t</p>\n\t\t\t\t<div class="example">\n\t\t\t\t\t<h3>Example</h3>\n\t\t\t\t\t<tscript>\n\t\t\t\t\t\tvar a = {};             # empty dictionary\n\t\t\t\t\t\t# identifier keys:\n\t\t\t\t\t\tvar b = {name: "Sam", phone: "911", age: 35};\n\t\t\t\t\t\t# non-identifier keys:\n\t\t\t\t\t\tvar c = {"name": "Sam", "phone": "911", "age": 35};\n\t\t\t\t\t\tvar d = {"---": math.sin(2), "true": math.cos(2)};\n\n\t\t\t\t\t\t# item access:\n\t\t\t\t\t\tprint(b["name"]);\n\t\t\t\t\t\tprint(c["name"]);\n\t\t\t\t\t\tprint(d["---"]);\n\t\t\t\t\t</tscript>\n\t\t\t\t</div>\n\t\t\t\t<p>\n\t\t\t\tIf all values are constants, then the whole dictionary is a constant.\n\t\t\t\t</p>\n\t\t\t',children:[]},{id:"anonymous-functions",name:"Anonymous Functions",title:"Anonymous Functions",content:'\n\t\t\t\t<p>\n\t\t\t\tAn anonymous function or lambda function follows the syntax:\n\t\t\t\t<ebnf>\n\t\t\t\t\tlambda = "function", [ closure ], "(", param-list, ")", func-body ;\n\t\t\t\t\t  closure = "[", [ closure-param, { ",", closure-param } ], "]" ;\n\t\t\t\t\t  closure-param = [ identifier, "=" ], expression ;\n\t\t\t\t\t  param-list = [ param-decl, { ",", param-decl } ] ;\n\t\t\t\t\t  param-decl = identifier, [ "=", constant-ex ] ;\n\t\t\t\t\t  constant-ex = $ expression that evaluates to a constant $ ;\n\t\t\t\t\t  func-body = "{", { declaration | statement | directive }, "}" ;\n\t\t\t\t</ebnf>\n\t\t\t\tIn contrast to a <a href="?doc=/language/declarations/functions">function\n\t\t\t\tdeclaration</a> it does not have a name by which is could be referenced.\n\t\t\t\tHowever, being an expression it can be stored in a variable or returned\n\t\t\t\tfrom a function. An anonymous function is of type\n\t\t\t\t<a href="?doc=/language/types/function">Function</a>.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\tAnonymous functions can enclose variables from their surrounding scopes,\n\t\t\t\twhich are stored in the function object. In fact, the result of arbitrary\n\t\t\t\texpressions can be stored. These expressions are evaluated when the\n\t\t\t\tanonymous function is created. They are available from inside the\n\t\t\t\tfunction body when the function is invoked, which can be at a later time\n\t\t\t\tand, importantly, from a different scope. In the following (somewhat\n\t\t\t\tcontrived) example, the variable <code class="code">square</code> is not\n\t\t\t\taccessible from the global scope where <code class="code">lambda</code>\n\t\t\t\tis defined, yet the variable is available inside the anonymous function\n\t\t\t\tbecause its value is enclosed in the function as a closure parameter.\n\t\t\t\t</p>\n\t\t\t\t<div class="example">\n\t\t\t\t\t<h3>Example</h3>\n\t\t\t\t\t<tscript>\nfunction createAreaCalculator(radius)\n{\n\tvar square = radius * radius;\n\treturn function [square] ()                 # this is the anonymous function\n\t\t{\n\t\t\treturn math.pi() * square;\n\t\t};  # the semicolon terminates the first return statement\n}\nvar lambda = createAreaCalculator(3);\nprint(lambda());   # prints 9*pi = 28.2743...\n\n# function doesNotWork()\n# {\n#    return function [square] ()                # square is unknown\n#       {\n#           return math.pi() * square;\n#       };\n# }\n\t\t\t\t\t</tscript>\n\t\t\t\t</div>\n\t\t\t\t<p>\n\t\t\t\tThe abilities of anonymous functions to be declared in-place as an\n\t\t\t\texpression and to enclose values from a surrounding scope are\n\t\t\t\tparticularly well-suited for callbacks.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\tLambda functions do not have a name, therefore they cannot be referred\n\t\t\t\tto by name. This is a problem when writing recursive algorithms, since\n\t\t\t\tthe function must be able to call itself. To allow for recursion, the\n\t\t\t\t<keyword>this</keyword> keyword refers to the function itself. Hence,\n\t\t\t\tthe following code computes the factorial of a number:\n\t\t\t\t</p>\n\t\t\t\t<div class="example">\n\t\t\t\t\t<h3>Example</h3>\n\t\t\t\t\t<tscript>\n\t\t\t\t\t\tvar fac = function(n)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif n == 0\n\t\t\t\t\t\t\t\tthen return 1;\n\t\t\t\t\t\t\t\telse return n * this(n-1);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\tprint(fac(7));   # 5040\n\t\t\t\t\t</tscript>\n\t\t\t\t</div>\n\t\t\t\t<p>\n\t\t\t\tNote that writing the else-case as\n\t\t\t\t<code class="code">else return n * fac(n-1);</code> does not work\n\t\t\t\tbecause <code class="code">fac</code> is a variable that cannot be\n\t\t\t\tused until it is fully initialized, and the else-statement is part\n\t\t\t\tof the initializer.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\tWhen invoking a lambda function, all closure variables are\n\t\t\t\t<i>copied</i> into the local frame. Hence, any modification of a\n\t\t\t\tclosure variable is limited to the duration of the function\n\t\t\t\texecution.\n\t\t\t\t</p>\n\t\t\t',children:[]}]},{id:"unary-operators",name:"Unary Operators",title:"Unary Operators",content:"\n\t\t\t<p>\n\t\t\tThere are three unary operators, all of which are left-unary operators\n\t\t\tbinding to an argument on their right-hand side.\n\t\t\t</p>\n\t\t",children:[{id:"not",name:"Logical or Bitwise Negation",title:"Logical or Bitwise Negation",content:'\n\t\t\t\t<p>\n\t\t\t\t<code class="code">operator not</code> performs a logical or bitwise\n\t\t\t\tnegation of its argument. For <keyword>true</keyword> it returns\n\t\t\t\t<keyword>false</keyword> and for <keyword>false</keyword> it returns\n\t\t\t\t<keyword>true</keyword>, and it flips all 32 bits of an integer.\n\t\t\t\tWhen applied to a value that is not a\n\t\t\t\t<a href="?doc=/language/types/boolean">Boolean</a> or an\n\t\t\t\t<a href="?doc=/language/types/integer">Integer</a> then the operator\n\t\t\t\treports an error.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\tNote: For an integer x, <code class="code">(not x)</code> is\n\t\t\t\tequivalent to <code class="code">(-1 - x)</code>.\n\t\t\t\t</p>\n                <div class="example">\n\t\t\t\t\t<h3>Example</h3>\n\t\t\t\t\t<tscript do-not-run>\n20 in binary:       00000000 00000000 00000000 00010100\nnot 20 in binary:   11111111 11111111 11111111 11101011\n                    </tscript>\n\t\t\t\t</div>\n\t\t\t',children:[]},{id:"plus",name:"Arithmetic Positive",title:"Arithmetic Positive",content:'\n\t\t\t\t<p>\n\t\t\t\tThe unary <code class="code">operator +</code> represents "no sign\n\t\t\t\tchange". In other words, it returns its argument unaltered.\n\t\t\t\tWhen applied to a non-numeric argument, i.e., a value that is neither\n\t\t\t\tan integer <a href="?doc=/language/types/integer">Integer</a> nor a\n\t\t\t\t<a href="?doc=/language/types/real">Real</a>, the operator reports an\n\t\t\t\terror.\n\t\t\t\t</p>\n                <div class="example">\n                <h3>Example</h3>\n                <tscript>\nvar example = 5;\nprint(+example);    # prints 5\n\nexample = 2.5;\nprint(+example);    # prints 2.5\n                </tscript>\n            </div>\n\t\t\t',children:[]},{id:"minus",name:"Arithmetic Negation",title:"Arithmetic Negation",content:'\n\t\t\t\t<p>\n\t\t\t\tThe unary <code class="code">operator -</code> represents algebraic\n\t\t\t\tnegation, which is a change of sign; it returns "minus" its argument.\n\t\t\t\tWhen applied to a non-numeric argument, i.e., a value that is neither\n\t\t\t\tan integer <a href="?doc=/language/types/integer">Integer</a> nor a\n\t\t\t\t<a href="?doc=/language/types/real">Real</a>, the operator reports an\n\t\t\t\terror.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\tWhen applied to an <a href="?doc=/language/types/integer">Integer</a>,\n\t\t\t\tthen the operator is subject to integer overflow. Overflow happens\n\t\t\t\tonly in a single case:\n\t\t\t\t<tscript>\nvar example = 5;\nprint(-example);    # prints -5;\n\nexample = -2.5;\nprint(-example);    # prints 2.5;\n\nexample = -2^31;\nprint(example);        # -2147483648\nprint(-example);       # -2147483648 due to overflow\n\t\t\t\t</tscript>\n\t\t\t\t</p>\n\t\t\t',children:[]}]},{id:"binary-operators",name:"Binary Operators",title:"Binary Operators",content:"\n\t\t\t<p>\n\t\t\tTScript defines a total of 17 binary operators. There are seven\n\t\t\tarithmetic operators, six comparison operators, three logical\n\t\t\toperators, and the range operator.\n\t\t\t</p>\n\t\t",children:[{id:"addition",name:"Addition",title:"Addition",content:'\n\t\t\t\t<p>\n\t\t\t\tThe binary <code class="code">operator +</code> returns the sum of\n\t\t\t\tits arguments. If at least one argument is a string, then the\n\t\t\t\tconcatenation of the arguments converted to strings.\n\t\t\t\tIf one of its arguments is non-numeric, i.e., a value that is neither\n\t\t\t\tan integer <a href="?doc=/language/types/integer">Integer</a> nor a\n\t\t\t\t<a href="?doc=/language/types/real">Real</a>, and if not at least one of\n\t\t\t\tthe arguments is a <a href="?doc=/language/types/string">String</a>,\n\t\t\t\tthen the operator reports an error.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\tTwo integers are added as integers, and two reals are added as\n\t\t\t\treals. Mixed cases are always treated as reals. This means that\n\t\t\t\tonly in the first case the result is an integer. The corresponding\n\t\t\t\toverflow rules apply.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\tFor string concatenation, a non-string arguments is first converted\n\t\t\t\tto a string with the <a href="?doc=/language/types/string">String</a>\n\t\t\t\tconstructor. For core types like booleans, numeric types, array\n\t\t\t\tand dictionary containers and ranges this usually gives the desired\n\t\t\t\tresult.\n\t\t\t\t</p>\n                <div class="example">\n                <h3>Example</h3>\n                <tscript do-not-run>\nprint("ex" + "ample");          # prints "example"\nprint("ex" + 4 + "mple");       # prints "ex4mple"\nprint("this is " + true);       # prints "this is true"\nprint(3 + 4);                   # prints 7\nprint(3.5 + 2.5);               # prints 6\nprint(3.5 + 4);                 # prints 7.5\nprint(5.5 + true);              # error\n                </tscript>\n            </div>\n\t\t\t',children:[]},{id:"subtraction",name:"Subtraction",title:"Subtraction",content:'\n\t\t\t\t<p>\n\t\t\t\tThe binary <code class="code">operator -</code> returns the\n\t\t\t\tdifference between its arguments.\n\t\t\t\tIf one of its arguments is non-numeric, i.e., a value that is neither\n\t\t\t\tan integer <a href="?doc=/language/types/integer">Integer</a> nor a\n\t\t\t\t<a href="?doc=/language/types/real">Real</a>, then the operator reports\n\t\t\t\tan error.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\tTwo integers are subtracted as integers, and two reals are subtracted\n\t\t\t\tas reals. Mixed cases are always treated as reals. This means that\n\t\t\t\tonly in the first case the result is an integer. The corresponding\n\t\t\t\toverflow rules apply.\n\t\t\t\t</p>\n                <div class="example">\n                <h3>Example</h3>\n                <tscript do-not-run>\nprint(4 - 3);                   # prints 1\nprint(3.5 - 2.5);               # prints 1\nprint(4.5 - 4);                 # prints 0.5\nprint(5.5 - true);              # error\n                </tscript>\n            </div>\n\t\t\t',children:[]},{id:"multiplication",name:"Multiplication",title:"Multiplication",content:'\n\t\t\t\t<p>\n\t\t\t\tThe binary <code class="code">operator *</code> returns the\n\t\t\t\tproduct of its arguments.\n\t\t\t\tIf one of its arguments is non-numeric, i.e., a value that is neither\n\t\t\t\tan integer <a href="?doc=/language/types/integer">Integer</a> nor a\n\t\t\t\t<a href="?doc=/language/types/real">Real</a>, then the operator reports\n\t\t\t\tan error.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\tTwo integers are multiplied as integers, and two reals are multiplied\n\t\t\t\tas reals. Mixed cases are always treated as reals. This means that\n\t\t\t\tonly in the first case the result is an integer. The corresponding\n\t\t\t\toverflow rules apply.\n\t\t\t\t</p>\n                <div class="example">\n                <h3>Example</h3>\n                <tscript do-not-run>\nprint(4 * 3);                   # prints 12\nprint(3.5 * 2.5);               # prints 8.75\nprint(4.5 * 4);                 # prints 20\nprint(5.5 * true);              # error\n                </tscript>\n            </div>\n\t\t\t',children:[]},{id:"real-division",name:"Real Division",title:"Real Division",content:'\n\t\t\t\t<p>\n\t\t\t\tThe binary <code class="code">operator /</code> returns the\n\t\t\t\tquotient of its arguments.\n\t\t\t\tIf one of its arguments is non-numeric, i.e., a value that is neither\n\t\t\t\tan integer <a href="?doc=/language/types/integer">Integer</a> nor a\n\t\t\t\t<a href="?doc=/language/types/real">Real</a>, then the operator reports\n\t\t\t\tan error.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\tThe arguments are always treated as reals. This means that the result\n\t\t\t\tis always a real, which can have a fractional part.\n\t\t\t\t</p>\n                <div class="example">\n                <h3>Example</h3>\n                <tscript do-not-run>\nprint(4 / 2);                   # prints 2\nprint(6.5 / 3.25);              # prints 2\nprint(5.2 / 4);                 # prints 1.3\nprint(5.5 / true);              # error\n                </tscript>\n            </div>\n\t\t\t',children:[]},{id:"integer-division",name:"Integer Division",title:"Integer Division",content:'\n\t\t\t\t<p>\n\t\t\t\tThe binary <code class="code">operator //</code> returns the\n\t\t\t\tquotient of its arguments, rounded down to the nearest integer.\n\t\t\t\tIf one of its arguments is non-numeric, i.e., a value that is neither\n\t\t\t\tan integer <a href="?doc=/language/types/integer">Integer</a> nor a\n\t\t\t\t<a href="?doc=/language/types/real">Real</a>, then the operator reports\n\t\t\t\tan error.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\tIf both arguments are integers then the result of the division is an\n\t\t\t\tinteger. Integer division overflows only in a single case:\n\t\t\t\t<tscript do-not-run>\nprint(4 // 3);                  # prints 1\nprint(6.5 // 3.1);              # prints 2.0\nprint(5.2 // 4);                # prints 1.0\nprint(5.5 // true);             # error\n\nvar a = -2^31;\nprint(a);                       # -2147483648\nprint(a / -1);                  # 2147483648 (real)\nprint(a // -1);                 # -2147483648 due to overflow\n\t\t\t\t</tscript>\n\t\t\t\tIf at least one argument is a real then the arguments are treated\n\t\t\t\tas reals, and the result is real.\n\t\t\t\t</p>\n\t\t\t',children:[]},{id:"modulo",name:"Modulo",title:"Modulo",content:'\n\t\t\t\t<p>\n\t\t\t\tThe binary <code class="code">operator %</code> returns the\n\t\t\t\tremainder of the\n\t\t\t\t<a href="?doc=/language/expressions/binary-operators/integer-division">integer division</a>\n\t\t\t\tof its arguments:</br>\n\t\t\t\t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="code">a % b = a - (a // b) * b</code></br>\n\t\t\t\tIf one of the arguments is non-numeric, i.e., a value that is neither\n\t\t\t\tan integer <a href="?doc=/language/types/integer">Integer</a> nor a\n\t\t\t\t<a href="?doc=/language/types/real">Real</a>, then the operator reports\n\t\t\t\tan error.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\tIf both arguments are integers then the result is an integer,\n\t\t\t\totherwise the operation is carried out in floating point\n\t\t\t\tarithmetics and the result is real. The result of the modulo\n\t\t\t\toperation is always in the range<br>\n\t\t\t\t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="code">0 <= a % b < math.abs(b)</code></br>\n\t\t\t\t</p>\n                <div class="example">\n                <h3>Example</h3>\n                <tscript do-not-run>\nprint(5 % 2);                   # prints 1\nprint(6.5 % 3.15);              # prints 0.2\nprint(5.2 % 4);                 # prints 1.2\nprint(5.5 % true);              # error\n                </tscript>\n            </div>\n\t\t\t',children:[]},{id:"power",name:"Power",title:"Power",content:'\n\t\t\t\t<p>\n\t\t\t\tThe binary <code class="code">operator ^</code> returns its\n\t\t\t\tleft argument to the power of its right arguments.\n\t\t\t\tIf one of its arguments is non-numeric, i.e., a value that is neither\n\t\t\t\tan integer <a href="?doc=/language/types/integer">Integer</a> nor a\n\t\t\t\t<a href="?doc=/language/types/real">Real</a>, then the operator reports\n\t\t\t\tan error.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\tIf both arguments are integers and the right-hand-side is non-negative,\n\t\t\t\tthen the operation is performed with integer arithmetics. All other\n\t\t\t\tcases are treated as reals. This means that only in the first case the\n\t\t\t\tresult is an integer. The corresponding overflow rules apply.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\tThis behavior may not always be desired. The function\n\t\t\t\t<a href="?doc=/library/math">math.pow</a> performs the same operation, but it always\n\t\t\t\tapplies floating point arithmetics.\n\t\t\t\t</p>\n                <div class="example">\n                <h3>Example</h3>\n                <tscript do-not-run>\nprint(2^3);                 # prints 8\nprint(2^(-3));              # prints 0.125\nprint(2.5^2);               # prints 6.25\nprint(4^0.5);               # prints 2\nprint(1.5^2.5);             # prints 2.75567596..\nprint(5.5 / true);          # error\n                </tscript>\n            </div>\n\t\t\t',children:[]},{id:"equality",name:"Comparison for Equality",title:"Comparison for Equality",content:'\n\t\t\t\t<p>\n\t\t\t\tTwo values can be compared for equality with\n\t\t\t\t<code class="code">operator ==</code>. Given two arbitrary values, the\n\t\t\t\toperator returns a <a href="?doc=/language/types/boolean">Boolean</a>.\n\t\t\t\tEquivalently, <code class="code">operator !=</code> checks for inequality.\n\t\t\t\t<code class="code">a != b</code> is equivalent to\n\t\t\t\t<code class="code">not a == b</code>.\n\t\t\t\t</p>\n\n\t\t\t\t<h2>Definition of Value Equality</h2>\n\t\t\t\t<p>\n\t\t\t\tThe definition of value equality depends on the type. For built-in atomic\n\t\t\t\ttypes like boolean, integers, reals and strings, two values are equal if\n\t\t\t\tthey are of the same type and they hold the same boolean, number or string.\n\t\t\t\tIn particular the integer <code class="code">2</code> and the real number\n\t\t\t\t<code class="code">2.0</code> compare equal, but they differ from the\n\t\t\t\tstring <code class="code">"2"</code>.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\tContainers are considered equal if they are of the same type and all of\n\t\t\t\ttheir keys and items are equal. Care must be taken to avoid recursive\n\t\t\t\treferences, see below.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\tRanges are equal if begin and end are equal numbers. Types compare equal\n\t\t\t\tonly if they represent the same built-in type or class. Functions compare\n\t\t\t\tequal if calling them invokes the same TScript code. For methods, the\n\t\t\t\tobject must agree in addition, and for closures, all enclosed parameters\n\t\t\t\tmust compare equal.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\tThere is currently no meaningful way to compare objects, even within the\n\t\t\t\tsame class. Therefore all objects are considered different, and the check\n\t\t\t\tfor equality coincides with the check for identity performed by the\n\t\t\t\tstandard library function <a href="">same</a>. Classes that inherit the\n\t\t\t\tbuilt-in types are compares like these, while their attributes are\n\t\t\t\tignored.\n\t\t\t\t</p>\n                <div class="example">\n                <h3>Example</h3>\n                <tscript>\nprint(2 == 2.0);                        # prints true\nprint(2 == "2");                        # prints false\n\nvar r = [1, 2, 3];\nvar s = [1.0, 2, 3];\nvar t = [3, 2, 1];\n\nprint(r == s);                          # prints true\nprint(r == t);                          # prints false\nprint(s == t);                          # prints false\n\nfunction a() {var a = 1; return a;}\nfunction b() {var b = 1; return b;}\n\nprint(a == b);                          # prints false\nprint(a() == b());                      # prints true\n                </tscript>\n            </div>\n\n\t\t\t\t<h2>A Note on Infinite Recursion</h2>\n\t\t\t\t<p>\n\t\t\t\tWarning: Comparing recursively defined containers results in an infinite\n\t\t\t\trecursion of the comparison! See the following example:\n\t\t\t\t<tscript>\n\t\t\t\t\tvar a = [];\n\t\t\t\t\tvar b = [a];\n\t\t\t\t\ta.push(b);         # now a refers to b and b refers to a\n\t\t\t\t\t# print(a == b);   # error due to infinite recursion\n\t\t\t\t</tscript>\n\t\t\t\t</p>\n\t\t\t',children:[]},{id:"order",name:"Comparison for Order",title:"Comparison for Order",content:'\n\t\t\t\t<p>\n\t\t\t\tTwo values can be compared for order with\n\t\t\t\t<code class="code">operator &lt;</code>. Given two arbitrary values, the\n\t\t\t\toperator returns a <a href="?doc=/language/types/boolean">Boolean</a> if the\n\t\t\t\tvalues can be ordered. Otherwise it reports an error.\n\t\t\t\tEquivalently, <code class="code">operator &lt;=</code>,\n\t\t\t\t<code class="code">operator &gt;</code>, and\n\t\t\t\t<code class="code">operator &gt;=</code> can be used to compare for order,\n\t\t\t\twith the following identity:\n\t\t\t\t<code class="code">a &lt; b</code> is equivalent to\n\t\t\t\t<code class="code">not b &lt;= a</code>,\n\t\t\t\t<code class="code">b &gt; a</code>, and\n\t\t\t\t<code class="code">not a &gt;= b</code>.\n\t\t\t\t</p>\n                <div class="example">\n                <h3>Example</h3>\n                <tscript>\nprint(2 > 1.0);                         # prints true\n# print(2 > "1");                       # error\n\nvar r = [1, 2, 3];\nvar s = [0, 3, 4, 5, 6, 7, 8];\n\nprint(r > s);                           # prints true, as the first comparison that isn\'t equal is >\n                </tscript>\n            </div>\n\t\t\t\t<h2>Definition of Order and Applicability</h2>\n\t\t\t\t<p>\n\t\t\t\tThe definition of value order depends on the type. Booleans cannot be\n\t\t\t\tordered. Numbers (integers and reals) are ordered in the usual way.\n\t\t\t\tStrings and arrays are ordered\n\t\t\t\t<a target="_blank" href="https://en.wikipedia.org/wiki/Lexicographical_order">lexicographically</a>.\n\t\t\t\tDictionaries, functions, ranges, types, and classes cannot be ordered.\n\t\t\t\t</p>\n\n\t\t\t\t<h2>A Note on Infinite Recursion</h2>\n\t\t\t\t<p>\n\t\t\t\tWarning: Comparing recursively defined arrays results in an infinite\n\t\t\t\trecursion of the comparison! See the following example:\n\t\t\t\t<tscript>\n\t\t\t\t\tvar a = [];\n\t\t\t\t\tvar b = [a];\n\t\t\t\t\ta.push(b);          # now a refers to b and b refers to a\n\t\t\t\t\t# print(a &lt; b);  # error due to infinite recursion\n\t\t\t\t</tscript>\n\t\t\t\t</p>\n\t\t\t',children:[]},{id:"and",name:"Conjunction",title:"Conjunction",content:'\n\t\t\t\t<p>\n\t\t\t\tThe binary <code class="code">operator and</code> returns the\n\t\t\t\tlogical or bitwise conjunction of its arguments. Both arguments\n\t\t\t\tmust be <a href="?doc=/language/types/boolean">Boolean</a>s or\n\t\t\t\t<a href="?doc=/language/types/integer">Integer</a>s, otherwise\n\t\t\t\tthe operator reports an error. The result is defined as follows:\n\t\t\t\t<table class="nicetable">\n\t\t\t\t\t<tr><th>or</th><th>false</th><th>true</th></tr>\n\t\t\t\t\t<tr><th>false</th><td>false</td><td>false</td></tr>\n\t\t\t\t\t<tr><th>true</th><td>false</td><td>true</td></tr>\n\t\t\t\t</table>\n\t\t\t\tIt applies to all 32 bits of an integer accordingly.\n\t\t\t\t</p><p>\n\t\t\t\tNote: The operator does not implement so-called short-circuit\n\t\t\t\tbehavior! I.e., in the code\n\t\t\t\t<tscript>\n\t\t\t\tfunction test(x)\n\t\t\t\t{\n\t\t\t\t\tprint(x);\n\t\t\t\t\treturn x >= 0;\n\t\t\t\t}\n\t\t\t\tif false and test(7) then print("hello");\n\t\t\t\t</tscript>\n\t\t\t\tthe function <code>test</code> is called, although it can be\n\t\t\t\tdecided based on the left operand of <code>and</code> that the\n\t\t\t\texpression evaluates to false. Hence, the print statement inside\n\t\t\t\tof the function is executed. That may be surprising for\n\t\t\t\texperienced programmers who got used to short-circuit behavior.\n\t\t\t\t</p>\n\t\t\t',children:[]},{id:"or",name:"Disjunction",title:"Disjunction",content:'\n\t\t\t\t<p>\n\t\t\t\tThe binary <code class="code">operator or</code> returns the\n\t\t\t\t(non-exclusive) logical or bitwise disjunction of its arguments.\n\t\t\t\tBoth arguments must be\n\t\t\t\t<a href="?doc=/language/types/boolean">Boolean</a>s or\n\t\t\t\t<a href="?doc=/language/types/integer">Integer</a>s, otherwise\n\t\t\t\tthe operator reports an error. The result is defined as follows:\n\t\t\t\t<table class="nicetable">\n\t\t\t\t\t<tr><th>or</th><th>false</th><th>true</th></tr>\n\t\t\t\t\t<tr><th>false</th><td>false</td><td>true</td></tr>\n\t\t\t\t\t<tr><th>true</th><td>true</td><td>true</td></tr>\n\t\t\t\t</table>\n\t\t\t\tIt applies to all 32 bits of an integer accordingly.\n\t\t\t\t</p><p>\n\t\t\t\tNote: The operator does not implement so-called short-circuit\n\t\t\t\tbehavior! I.e., in the code\n\t\t\t\t<tscript>\n\t\t\t\tfunction test(x)\n\t\t\t\t{\n\t\t\t\t\tprint(x);\n\t\t\t\t\treturn x >= 0;\n\t\t\t\t}\n\t\t\t\tif true or test(-7) then print("hello");\n\t\t\t\t</tscript>\n\t\t\t\tthe function <code>test</code> is called, although it can be\n\t\t\t\tdecided based on the left operand of <code>or</code> that the\n\t\t\t\texpression evaluates to true. Hence, the print statement inside\n\t\t\t\tof the function is executed. That may be surprising for\n\t\t\t\texperienced programmers who got used to short-circuit behavior.\n\t\t\t\t</p>\n\t\t\t',children:[]},{id:"xor",name:"Exclusive Disjunction",title:"Exclusive Disjunction",content:'\n\t\t\t\t<p>\n\t\t\t\tThe binary <code class="code">operator xor</code> returns the\n\t\t\t\texclusive logical or bitwise disjunction of its arguments. Both\n\t\t\t\targuments must be <a href="?doc=/language/types/boolean">Boolean</a>s\n\t\t\t\tor <a href="?doc=/language/types/integer">Integer</a>s, otherwise\n\t\t\t\tthe operator reports an error. The result is defined as follows:\n\t\t\t\t<table class="nicetable">\n\t\t\t\t\t<tr><th>xor</th><th>false</th><th>true</th></tr>\n\t\t\t\t\t<tr><th>false</th><td>false</td><td>true</td></tr>\n\t\t\t\t\t<tr><th>true</th><td>true</td><td>false</td></tr>\n\t\t\t\t</table>\n\t\t\t\tIt applies to all 32 bits of an integer accordingly.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\tNote: For booleans, the operator is equivalent to\n\t\t\t\t<code class="code">operator !=</code>.\n\t\t\t\t</p>\n\t\t\t',children:[]},{id:"range",name:"Range Operator",title:"Range Operator",content:'\n\t\t\t\t<p>\n\t\t\t\tThe binary <code class="code">operator :</code> constructs a\n\t\t\t\t<a href="?doc=/language/types/range">Range</a> from its arguments.\n\t\t\t\tBoth arguments must be integers, or reals with equivalent values,\n\t\t\t\totherwise the operator reports an error. The left-hand-side becomes\n\t\t\t\tthe begin of the range, the right-hand-side becomes the end.\n\t\t\t\tApplying the operator is equivalent to passing the arguments to\n\t\t\t\tthe <a href="?doc=/language/types/range">Range</a> constructor.\n\t\t\t\t</p>\n\t\t\t',children:[]}]},{id:"function-calls",name:"Function Calls",title:"Function Calls",content:'\n\t\t\t<h2>Syntax</h2>\n\t\t\t<p>\n\t\t\tA function call is an expression with the following syntax:\n\t\t\t<ebnf>\n\t\t\t\tfunction-call = expression, "(", argument, { ",", argument }, ")", ";" ;   # example("example");\n\t\t\t\targument = [ identifier, "=" ], expression ;\n\t\t\t</ebnf>\n\t\t\tThe first expression must resolve to a callable object, hereafter\n\t\t\treferred to as the function for short, which is a\n\t\t\t<a href="?doc=/language/declarations/functions">function</a> or\n\t\t\t<a href="?doc=/language/declarations/classes">method</a> declaration,\n\t\t\ta <a href="?doc=/language/types">type</a>, or an\n\t\t\t<a href="?doc=/language/expressions/literals/anonymous-functions">anonymous function</a>.\n\t\t\tThe arguments must match the function\'s parameters.\n\t\t\t</p>\n\n\t\t\t<h2>Control Flow</h2>\n\t\t\t<p>\n\t\t\tThe effect of the call is that a new stack frame is created with\n\t\t\tone local variable per parameter. These parameter variables are\n\t\t\tinitialized to the values of the arguments. Then the control flow\n\t\t\tcontinues at the beginning of the function body. After the function\n\t\t\treturns, either by means of an explicit\n\t\t\t<a href="?doc=/language/statements/return">return</a> statement or when\n\t\t\treaching the end of its body, the return value becomes the value\n\t\t\tof the function call expression, the stack frame is removed, and\n\t\t\tthe program continues in the original frame.\n\t\t\t</p>\n\n\t\t\t<h2>Positional and Named Arguments</h2>\n\t\t\t<p>\n\t\t\tIn simple cases there is exactly one argument for each parameter\n\t\t\tof the function. The matting between arguments are parameters is\n\t\t\tdetermined by their order. Such arguments are called <i>positional</i>\n\t\t\targuments.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tIf a parameter of a function specifies a default value then the\n\t\t\tcorresponding argument can be dropped. A neat way of providing\n\t\t\tvalues only for some parameters is to use <i>named</i> arguments,\n\t\t\ti.e., arguments with <ebnf do-not-check>identifier "="</ebnf>\n\t\t\tpresent. Named arguments must not be followed by positional arguments,\n\t\t\tsince that would be extremely confusing and error-prone. Also\n\t\t\targuments without default values can be specified by name, although\n\t\t\tthis is not required.\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\t\tfunction f(a, b=0, c=0) { print(a+b+c); }\n\t\t\t\t\tf(3, 4, 5);        # a=3, b=4, c=5\n\t\t\t\t\tf(3);              # a=3, b=0, c=0\n\t\t\t\t\tf(3, c=5);         # a=3, b=0, c=5\n\t\t\t\t\tf(a=3, c=5);       # a=3, b=0, c=5\n\t\t\t\t\tf(a=3, b=4, c=5);  # a=3, b=4, c=5\n\t\t\t\t\t# f(3, b=4, 5);    # error\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t',children:[]},{id:"item-access",name:"Item Access",title:"Item Access",content:'\n\t\t\t<p>\n\t\t\tAn item access is an expression with the following syntax:\n\t\t\t<ebnf>\n\t\t\t\titem-access = expression, "[", expression, "]", ";" ;\n\t\t\t</ebnf>\n\t\t\tThe first (base) expression must resolve to a\n\t\t\t<a href="?doc=/language/types/string">string</a>,\n\t\t\t<a href="?doc=/language/types/array">array</a>,\n\t\t\t<a href="?doc=/language/types/dictionary">dictionary</a>, or\n\t\t\t<a href="?doc=/language/types/range">range</a>.\n\t\t\tThe second (index) expression must resolve to a valid\n\t\t\tindex or key, the type of which depends on the former one.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tThe result of an item access depends on the base type and\n\t\t\ton the key type as follows:\n\t\t\t<ul>\n\t\t\t<li>A string indexed with an integer returns the Unicode\n\t\t\tcode point of the character at the given (zero-based)\n\t\t\tposition.</li>\n\t\t\t<li>A string indexed with a range returns the corresponding\n\t\t\tsubstring.</li>\n\t\t\t<li>An array indexed with an integer returns the item at\n\t\t\tthe given (zero-based) position.</li>\n\t\t\t<li>An array indexed with a range returns the sub-array\n\t\t\tof items indexed by the range.</li>\n\t\t\t<li>A dictionary indexed with a string returns the value\n\t\t\tassociated with the corresponding key.</li>\n\t\t\t<li>A range behaves exactly like an array holding the\n\t\t\tvalues represented by the range as consecutive values,\n\t\t\thowever, when indexed with a range it returns another\n\t\t\trange.</li>\n\t\t\t</ul>\n\t\t\t</p>\n            <div class="example">\n            <h3>Example</h3>\n            <tscript>\nvar s = "hello";\nprint(s[2]);                    # prints 108\nprint(s[1:3]);                  # prints "el"\n\nvar a = [1, 2, 3, 4];\nprint(a[1]);                    # prints 2\nprint(a[0:3]);                  # prints [1,2,3]\n\nvar d = {"example": [1,2,3]};\nprint(d["example"]);            # prints [1,2,3]\n\nvar r = 1:4;\nprint(r[2]);                    # prints 3\nprint(r[1:2]);                  # prints 2:3\n\n            </tscript>\n        </div>\n\t\t',children:[]},{id:"member-access",name:"Member Access",title:"Member Access",content:'\n\t\t\t<p>\n\t\t\tA member access is an expression with the following syntax:\n\t\t\t<ebnf>\n\t\t\t\tmember-access = expression, ".", identifier ;\n\t\t\t</ebnf>\n\t\t\tThe expression evaluates to a public member of the object to\n\t\t\twhich the <ebnf>expression</ebnf> evaluates. If the expression\n\t\t\tdoes not have a member with the name given by the\n\t\t\t<ebnf>identifier</ebnf> then an error is reported. If the\n\t\t\texpression evaluates to a type, then this syntax accesses its\n\t\t\tstatic public members.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tThe member access operator cannot be used to access private\n\t\t\tand protected members. This does not even work inside of a\n\t\t\tclass. These members can be accessed by name (with the\n\t\t\t<ebnf>identifier</ebnf> alone), or with\n\t\t\t<a href="?doc=/language/declarations/classes">super</a>.\n\t\t\t</p>\n            <div class="example">\n            <h3>Example</h3>\n            <tscript>\nclass example {\n    private:\n        var ample = "ample";\n\n    public:\n        var ex = "ex";\n        function example() {\n            print(this.ex);         # ex is public - works fine\n            print(this.ample);      # ample is private - error\n        }\n}\n\nvar e = example();\nprint(e.ex);                        # works fine\n# print(e.ample);                   # error\n            </tscript>\n        </div>\n\t\t',children:[]},{id:"names",name:"Names and Name Lookup",title:"Names and Name Lookup",content:'\n\t\t\t<p>\n\t\t\tA name has the syntax\n\t\t\t<ebnf>\n\t\t\t\tname = ("super", ".", identifier) | (identifier, {".", identifier}) ;\n\t\t\t</ebnf>\n\t\t\twhere all but the last <ebnf>identifier</ebnf> must refer to\n\t\t\ta <a href="?doc=/language/declarations/namespaces">namespace</a>.\n\t\t\tThe keyword <keyword>super</keyword> refers to the super class\n\t\t\tof the enclosing\n\t\t\t<a href="?doc=/language/declarations/classes">class</a>, hence\n\t\t\tit can be used only inside of a class declaration.\n\t\t\tThe declaration a name refers to is determined by the name\n\t\t\tlookup rules found below.\n\t\t\t</p>\n\n\t\t\t<h2>Scopes and Visibility of Names</h2>\n\t\t\t<p>\n\t\t\tTScript imposes strict rules on the visibility of declarations\n\t\t\tbased on scopes.\n\t\t\tIn TScript, every block enclosed in curly braces is a scope.\n\t\t\tScopes can apparently be nested, as in the following example,\n\t\t\twhich contains five scopes: the global scope, a class, a\n\t\t\tfunction, and two blocks.\n\t\t\t</p><p>\n\t\t\t<tscript>\n\t\t\t\tvar a;\n\t\t\t\t{\n\t\t\t\t\tvar x;\n\t\t\t\t\tclass Cl\n\t\t\t\t\t{\n\t\t\t\t\tpublic:\n\t\t\t\t\t\tfunction m()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ta = 99;\n\t\t\t\t\t\t\t# y = 99;  # error: y is not yet defined\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tvar y;\n\t\t\t\t\t{\n\t\t\t\t\t\t# z = 1;   # error: z is not yet defined\n\t\t\t\t\t\tvar z;\n\t\t\t\t\t\tz = 2;\n\t\t\t\t\t}\n\t\t\t\t\ta = 42;\n\t\t\t\t\tx = 42;\n\t\t\t\t\ty = 42;\n\t\t\t\t\t# z = 42;      # error: cannot access z from here\n\t\t\t\t}\n\t\t\t</tscript>\n\t\t\t</p><p>\n\t\t\tNames of variables, functions, classes and namespaces declared\n\t\t\twithin a scope are only visible from within that scope, and from\n\t\t\twithin sub-scopes. They are neither visible before they are declared,\n\t\t\tnor after their enclosing scope ends. This makes it possible to have\n\t\t\tmultiple declarations of the same name, as along as they are found in\n\t\t\tdifferent scopes. The name always refers to the declaration in the\n\t\t\tinnermost scope:\n\t\t\t</p><p>\n\t\t\t<tscript>\n\t\t\t\tvar a = 1;\n\t\t\t\t{\n\t\t\t\t\tprint(a);           # prints 1\n\t\t\t\t\tvar a = 2;\n\t\t\t\t\t{\n\t\t\t\t\t\tprint(a);       # prints 2\n\t\t\t\t\t\tvar a = 3;\n\t\t\t\t\t\tprint(a);       # prints 3\n\t\t\t\t\t\t# var a = 4;    # error; the name \'a\' is already\n\t\t\t\t\t\t                # defined in this scope\n\t\t\t\t\t}\n\t\t\t\t\tprint(a);           # prints 2\n\t\t\t\t}\n\t\t\t\tprint(a);               # prints 1\n\t\t\t</tscript>\n\t\t\t</p><p>\n\t\t\tThis means that declarations of the same name mask each other, but\n\t\t\tthey do not result in errors.\n\t\t\t</p>\n\n\t\t\t<h2>Visibility within a Scope</h2>\n\t\t\t<p>\n\t\t\tAll names defined within a scope are visible within that scope, with the\n\t\t\texception of variables: they are visible only from the point of their\n\t\t\tdefinition onwards, but not before. This is implicit in the previous\n\t\t\texample, where the first <code class="code">print</code>-statement\n\t\t\toutputs 1, not 2. This is because the variable declared in the next line\n\t\t\tis not yet visible. That makes sense, because at the time the statement\n\t\t\tis executed, the variable does not exist yet. In contrast, the second\n\t\t\tto last <code class="code">print</code>-statement in the same scope\n\t\t\toutputs 2, which means that it refers to the variable within that scope.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tFor other names (functions, classes, namespaces), the behavior is\n\t\t\tdifferent. All names within a scope are visible within the whole scope,\n\t\t\tirrespective of the order of declarations:\n\t\t\t</p><p>\n\t\t\t<tscript>\n\t\t\t\tfunction f()\n\t\t\t\t{ print(1); }\n\t\t\t\t{\n\t\t\t\t\tf();            # prints 2\n\t\t\t\t\tfunction f()\n\t\t\t\t\t{ print(2); }\n\t\t\t\t\tf();            # prints 2\n\t\t\t\t}\n\t\t\t</tscript>\n\t\t\t</p><p>\n\t\t\tBoth calls of <code class="code">f</code> output the value 2,\n\t\t\tindicating that the "inner" function is visible within the whole scope,\n\t\t\teven before it is defined. Hence, its definition masks the name\n\t\t\t<code class="code">f</code> within the whole scope.\n\t\t\t</p>\n\n\t\t\t<h2>Namespaces</h2>\n\t\t\t<p>\n\t\t\tDeclarations defined inside a namespace are accessed with the dot\n\t\t\toperator:\n\t\t\t</p><p>\n\t\t\t<tscript>\n\t\t\tnamespace N\n\t\t\t{\n\t\t\t\tvar a;\n\t\t\t\tfunction say() { print("a = " + a); }\n\t\t\t}\n\t\t\t# a = 7;     # the enclosing scope of \'a\' is not visible\n\t\t\t# say();     # the enclosing scope of \'say\' is not visible\n\t\t\tN.a = 7;     # works as desired\n\t\t\tN.say();     # works as desired\n\t\t\t</tscript>\n\t\t\t</p><p>\n\t\t\tThis works because the <code class="code">namespace N</code> is visible\n\t\t\tfrom the perspective of the statement. Its members\n\t\t\t<code class="code">a</code> and <code class="code">say</code> are not directly visible,\n\t\t\thowever, they can be accessed as members of <code class="code">N</code>.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tWhen accessing members of a namespace many times it can be\n\t\t\tconvenient to make names from a namespace directly available in the\n\t\t\tcurrent scope:\n\t\t\t</p><p>\n\t\t\t<tscript>\n\t\t\tnamespace N\n\t\t\t{\n\t\t\t\tvar a;\n\t\t\t\tfunction say() { print("a = " + a); }\n\t\t\t}\n\t\t\tuse namespace N;   # make all names from N visible\n\t\t\ta = 7;       # now this works!\n\t\t\tsay();       # now this works!\n\t\t\tN.a = 7;     # this also still works\n\t\t\tN.say();     # this also still works\n\t\t\t</tscript>\n\t\t\t</p><p>\n\t\t\tNames can even be imported into classes. Then variables and functions\n\t\t\tdefined in the namespace can be accessed like static members of the\n\t\t\tclass.\n\t\t\t</p>\n\n\t\t\t<h2>Names in Classes and Super Classes</h2>\n\t\t\t<p>\n\t\t\tMembers of a class can be declared in any order. In This includes\n\t\t\tvariables, or in other words, attributes:\n\t\t\t</p><p>\n\t\t\t<tscript>\n\t\t\tclass A\n\t\t\t{\n\t\t\tpublic:\n\t\t\t\tfunction f()\n\t\t\t\t{\n\t\t\t\t\tprint(x);   # works, although x is declared below\n\t\t\t\t}\n\t\t\tprivate:\n\t\t\t\tvar x;\n\t\t\t}\n\t\t\t</tscript>\n\t\t\t</p><p>\n\t\t\tInside a class it is possible to access the public and protected\n\t\t\tmembers of all super classes, although they are declared in unrelated\n\t\t\tscopes:\n\t\t\t</p><p>\n\t\t\t<tscript>\n\t\t\tclass A\n\t\t\t{\n\t\t\tprotected:\n\t\t\t\tvar m, n;\n\t\t\t}\n\t\t\tclass B : A   # B inherits A, and therefore its members m and n\n\t\t\t{\n\t\t\tpublic:\n\t\t\t\tvar n;\n\t\t\t\tfunction set(value)\n\t\t\t\t{\n\t\t\t\t\tm = value;         # access to m works\n\t\t\t\t\tn = value;         # sets B.n\n\t\t\t\t\tsuper.n = value;   # sets A.n\n\t\t\t\t}\n\t\t\t}\n\t\t\t</tscript>\n\t\t\t</p>\n\n\t\t\t<h2>Name Lookup</h2>\n\t\t\t<p>\n\t\t\tWhen TScript encounters a name, then it proceeds as follows.\n\t\t\tIt checks all scopes for a declaration with the given name,\n\t\t\tstarting from the innermost scope and moving towards enclosing\n\t\t\tscopes until the global scope is processed. For each scope, it\n\t\t\tdoes the following:\n\t\t\t<ul>\n\t\t\t\t<li>If the name is defined inside of the scope and before\n\t\t\t\t\tits use, then the lookup is successful.</li>\n\t\t\t\t<li>If the name is defined inside of the scope and before\n\t\t\t\t\tafter its use, and if it does not refer to a variable,\n\t\t\t\t\tthen the lookup is successful.</li>\n\t\t\t\t<li>If the name is imported from a namespace into the scope\n\t\t\t\t\tbefore its use, then the lookup is successful.</li>\n\t\t\t\t<li>If the scope is a class, then loop through the chain of\n\t\t\t\t\tsuper classes, starting at the current class. If the\n\t\t\t\t\tname is defined in a class, or if it is imported from a\n\t\t\t\t\tnamespace, then the name lookup is successful.</li>\n\t\t\t</ul>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tThese rules imply that some names refer to objects that are not\n\t\t\taccessible, like in the following example:\n\t\t\t</p><p>\n\t\t\t<tscript>\n\t\t\tfunction f()\n\t\t\t{\n\t\t\t\tvar x = 7;\n\t\t\t\tfunction g()\n\t\t\t\t{\n\t\t\t\t\t# return x + 1;   # error!\n\t\t\t\t}\n\t\t\t\treturn g;\n\t\t\t}\n\t\t\tvar h = f();\n\t\t\tprint(h);     # prints &lt;Function g&gt;\n\t\t\tprint(h());\n\t\t\t</tscript>\n\t\t\t</p><p>\n\t\t\tThe problem is that when g is called under the name h in the last\n\t\t\tline, then x has already gone out of scope. This can be avoided\n\t\t\tby turning g into a closure:\n\t\t\t</p><p>\n\t\t\t<tscript>\n\t\t\tfunction f()\n\t\t\t{\n\t\t\t\tvar x = 7;\n\t\t\t\treturn function [x] ()\n\t\t\t\t{\n\t\t\t\t\treturn x + 1;   # works\n\t\t\t\t};\n\t\t\t}\n\t\t\tvar h = f();\n\t\t\tprint(h);     # prints &lt;Function anonymous 4:11&gt;\n\t\t\tprint(h());   # prints 8\n\t\t\t</tscript>\n\t\t\t</p>\n\t\t',children:[]},{id:"precedence",name:"Precedence of Operations",title:"Precedence of Operations",content:'\n\t\t\t<h2>Order of Evaluation of Expressions and Operators</h2>\n\t\t\t<p>\n\t\t\tDifferent operators have different precedence, i.e., binding\n\t\t\tstrength. In the following example, the order of operations\n\t\t\tdepends on the binding strength of the operators:\n\t\t\t</p>\n\t\t\t<tscript>\n\t\t\t\tvar x = [2, 3, 5, 7];\n\t\t\t\tvar i = 4 - 1 * 2;\n\t\t\t\tvar a = -2^x[i];\n\t\t\t</tscript>\n\t\t\t<p>\n\t\t\tIn the second line the usual mathematical convention that multiplication\n\t\t\tis computed before addition is expected. This is realized in TScript by\n\t\t\tgiving <code class="code">operator&nbsp;*</code> a higher precedence\n\t\t\t(binding strength) than <code class="code">operator&nbsp;+</code>.\n\t\t\tThough, a higher precedence is traditionally expressed by a lower number,\n\t\t\tsee the table below.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tSimilarly, the minus sign in the last statement is applied to the\n\t\t\tpower, not only to its base, since the exponentiation\n\t\t\t<code class="code">operator&nbsp;^</code> binds stronger than the arithmetic negation\n\t\t\t<code class="code">operator&nbsp;-</code>.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tAlso for operators of the equal precedence the evaluation order can matter\n\t\t\tfor the result, as in <code class="code">7 - 4 - 3</code>. Furthermore,\n\t\t\texpressions can have side-effects, the order of which depends on the\n\t\t\tevaluation order. In TScript, the evaluation order is always well-defined.\n\t\t\tOperators of the same precedence and the expressions in between are\n\t\t\tevaluated either left-to-right or right-to-left.\n\t\t\t</p>\n\n\t\t\t<h2>Precedence and Evaluation Order Rules</h2>\n\t\t\t<p>\n\t\t\tThe precedence rules are summarized in the following table.\n\t\t\t</p>\n\t\t\t<table class="nicetable">\n\t\t\t\t<tr><th>precedence</th><th>operator type</th><th>operators</th><th>evaluation order</th></tr>\n\t\t\t\t<tr><td>0</td><td>right&nbsp;unary</td><td><code class="code">[]</code> <code class="code">.</code></td><td>left-to-right</td></tr>\n\t\t\t\t<tr><td>0</td><td>right&nbsp;n-ary</td><td><code class="code">()</code></td><td>left-to-right</td></tr>\n\t\t\t\t<tr><td>1</td><td>binary</td><td><code class="code">^</code></td><td>left-to-right</td></tr>\n\t\t\t\t<tr><td>2</td><td>left&nbsp;unary</td><td><code class="code">+</code> <code class="code">-</code></td><td>right-to-left</td></tr>\n\t\t\t\t<tr><td>3</td><td>binary</td><td><code class="code">*</code> <code class="code">/</code> <code class="code">//</code> <code class="code">%</code></td><td>left-to-right</td></tr>\n\t\t\t\t<tr><td>4</td><td>binary</td><td><code class="code">+</code> <code class="code">-</code></td><td>left-to-right</td></tr>\n\t\t\t\t<tr><td>5</td><td>binary</td><td><code class="code">:</code></td><td>left-to-right</td></tr>\n\t\t\t\t<tr><td>6</td><td>binary</td><td><code class="code">==</code> <code class="code">!=</code> <code class="code">&lt;</code> <code class="code">&lt;=</code> <code class="code">&gt;</code> <code class="code">&gt;=</code></td><td>left-to-right</td></tr>\n\t\t\t\t<tr><td>7</td><td>left&nbsp;unary</td><td><code class="code">not</code></td><td>right-to-left</td></tr>\n\t\t\t\t<tr><td>8</td><td>binary</td><td><code class="code">and</code></td><td>left-to-right</td></tr>\n\t\t\t\t<tr><td>9</td><td>binary</td><td><code class="code">or</code> <code class="code">xor</code></td><td>left-to-right</td></tr>\n\t\t\t\t<tr><td>10</td><td>assignment</td><td><code class="code">=</code> <code class="code">+=</code> <code class="code">-=</code> <code class="code">*=</code> <code class="code">/=</code> <code class="code">//=</code> <code class="code">%=</code> <code class="code">^=</code></td><td>right-to-left</td></tr>\n\t\t\t</table>\n\n\t\t\t<h2>Parentheses</h2>\n\t\t\t<p>\n\t\t\tEvery part of an expression can be enclosed in parentheses, which\n\t\t\tbind stronger than all operators. The most common reason is to\n\t\t\toverride operator precedence, as in the following example:\n\t\t\t<tscript>\n\t\t\t\tvar a = 2;\n\t\t\t\tvar b = (3 + a) * 6;\n\t\t\t</tscript>\n\t\t\t</p>\n\t\t',children:[]},{id:"constants",name:"Constants",title:"Constants",content:'\n\t\t\t<p>\n\t\t\tConstants are expressions that do not depend on the values\n\t\t\tof variables. Their main uses are as immediate values within\n\t\t\texpressions and as initializers of attributes. A further use\n\t\t\tis as default values of function parameters.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tAll <a href="?doc=/language/expressions/literals">literals</a> of\n\t\t\tnon-container types are constants. This includes all\n\t\t\t<a href="?doc=/concepts/design">JSON</a> types, but also\n\t\t\tfunctions (excluding non-static methods). Array and dictionary\n\t\t\tliterals are constants if all of their items are constants:\n\t\t\t<tscript>\n\t\t\t\tvar c1 = null;                  # constant\n\t\t\t\tvar c2 = true;                  # constant\n\t\t\t\tvar c3 = 42;                    # constant\n\t\t\t\tvar c4 = 8.57e-7;               # constant\n\t\t\t\tvar c5 = "hello";               # constant\n\t\t\t\tvar c6 = print;                 # constant\n\t\t\t\tvar c7 = [true, 42];            # constant\n\t\t\t\tvar c8 = {"a": true, "b": 42};  # constant\n\t\t\t\tvar n = [c2, c3];               # not a constant\n\t\t\t</tscript>\n\t\t\tThe last expression is not a constant since c2 and c3 are\n\t\t\tvariables.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tOther expressions are de-facto constants, in particular the\n\t\t\treturn values of functions without side-effects with constant\n\t\t\tparameters, e.g.,\n\t\t\t<tscript>\n\t\t\t\tvar n = math.sqrt(2);           # not a constant\n\t\t\t</tscript>\n\t\t\tThe above expression is not considered a constant in TScript,\n\t\t\tsince it is evaluated at runtime. The core language does not\n\t\t\thave any knowledge about which functions have side effects\n\t\t\tand which ones do not.\n\t\t\t</p>\n\t\t',children:[]}]},{id:"statements",name:"Statements",title:"Statements",content:'\n\t\t<p>\n\t\tStatements are instructions that change the state of the\n\t\tprogram. For example, they can modify a variable or change the\n\t\tprogram flow. Besides assignments and constructs like\n\t\tconditionals and loops, also simple expressions are considered\n\t\tstatements since they can have side effects, e.g., by calling\n\t\t<code class="code">print</code> or <code class="code">wait</code>.\n\t\tStatements are formally defined as follows:\n\t\t<ebnf>\n\t\t\tstatement = block\n\t\t\t          | assignment\n\t\t\t          | expression, ";"\n\t\t\t          | condition\n\t\t\t          | for-loop\n\t\t\t          | while-do-loop\n\t\t\t          | do-while-loop\n\t\t\t          | break\n\t\t\t          | continue\n\t\t\t          | return\n\t\t\t          | throw\n\t\t\t          | try-catch ;\n\t\t</ebnf>\n\t\t</p>\n        <div class="example">\n        <h3>Example</h3>\n        <tscript>\nvar a = 1;      # statement\n\nfor 0:3 do      # statement\n{\n    print(a);   # statement\n    break;      # statement\n}\n\n        </tscript>\n    </div>\n\t',children:[{id:"blocks",name:"Blocks of Statements",title:"Blocks of Statements",content:'\n\t\t\t<p>\n\t\t\tA block of statements has the following syntax:\n\t\t\t<ebnf>\n\t\t\t\tblock = "{", { declaration | statement | directive }, "}" ;\n\t\t\t</ebnf>\n\t\t\tThe whole block can take the role of a single statement,\n\t\t\tallowing to execute multiple statements where a single one\n\t\t\tis specified by the formal syntax, i.e., in conditions,\n\t\t\tloops, and try/catch-blocks. Furthermore, beyond multiple\n\t\t\tstatements, a block can contain declarations and directives.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tAt the same time, the block acts as a scope, so the usual\n\t\t\t<a href="?doc=/language/expressions/names">name lookup</a> rules\n\t\t\tapply. This means that declarations made inside the block\n\t\t\tbecome invalid as soon as the block is left. Of course,\n\t\t\tfunctions declared inside the block can be returned or\n\t\t\tassigned to variables declared outside the block, and the\n\t\t\tsame holds for objects of locally declared classes.\n\t\t\t</p>\n            <div class="example">\n            <h3>Example</h3>\n            <tscript>\nvar example;\nif true then {\n    function ex() {\n        print("Hello World");\n    }\n\n    example = ex;\n}\n\nexample();                      # works fine\n# ex();                         # does not work, since ex() is only known inside of the if then block\n            </tscript>\n        </div>\n\t\t',children:[]},{id:"assignments",name:"Assignments",title:"Assignments",content:'\n\t\t\t<p>\n\t\t\tAssignments have the following form:\n\t\t\t<ebnf>\n\t\t\t\tassignment = lhs, assign-op, expression, ";" ;                  # example: var example = 28;\n\t\t\t\t  lhs = name\n\t\t\t\t        | expression, "[", expression, "]"\n\t\t\t\t        | expression, ".", identifier ;\n\t\t\t\t  assign-op = "=" | "+=" | "-=" | "*=" | "/=" | "%=" | "^=" ;\n\t\t\t</ebnf>\n\t\t\tThe expression <ebnf>lhs</ebnf> on the left-hand-side (lhs) of the\n\t\t\tassignment must refer to a variable. It must not refer to a function\n\t\t\tor to a constant.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tAssignments are evaluated from right to left: the <ebnf>expression</ebnf>\n\t\t\ton the right-hand-side (rhs) is evaluated before the <ebnf>lhs</ebnf>. The\n\t\t\teffect of an assignment with <code class="code">operator =</code> is\n\t\t\tthat the variable referenced by the <ebnf>lhs</ebnf> is overwritten\n\t\t\twith the result of the <ebnf>expression</ebnf>. In other words, after\n\t\t\tthe assignment the variable references the value to which the rhs\n\t\t\tevaluates. Note that an assignment does not copy the value represented by\n\t\t\tthe rhs, it only makes the lhs reference the same value, as can be seen in\n\t\t\tthe following example:\n\t\t\t<tscript>\n\t\t\t\tvar a = [2, 3, 5, 7];\n\t\t\t\tvar b = a;\n\t\t\t\ta[2] = 97;\n\t\t\t\tprint(b);   # prints [2,3,97,7]\n\t\t\t</tscript>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tThe assignment operators <code class="code">+= -= *= /= %= ^=</code> are\n\t\t\tcalled compound assignment operators. The statement\n\t\t\t<code class="code">a += 3;</code> is equivalent to\n\t\t\t<code class="code">a = a + 3;</code>, and the same applies to the other\n\t\t\tbinary arithmetic <a href="?doc=/language/expressions/binary-operators">operators</a>.\n\t\t\tHowever, this equivalence is not exact in general, since with compound\n\t\t\tassignment the lhs expression is evaluated only once. This difference\n\t\t\tis demonstrated in the following example:\n\t\t\t<tscript>\n\t\t\t\tvar counter = 0;\n\t\t\t\tvar a = [0, 0];\n\t\t\t\tfunction get()\n\t\t\t\t{\n\t\t\t\t\tcounter += 1;\n\t\t\t\t\treturn a;\n\t\t\t\t}\n\t\t\t\tget()[0] += 7;\n\t\t\t\tprint(a);                # prints [7, 0]\n\t\t\t\tprint(counter);          # prints 1\n\t\t\t\tget()[1] = get()[1] + 7;\n\t\t\t\tprint(a);                # prints [7, 7]\n\t\t\t\tprint(counter);          # prints 3\n\t\t\t</tscript>\n\t\t\t</p>\n\t\t',children:[]},{id:"expressions",name:"Expressions",title:"Expressions",content:'\n\t\t\t<p>\n\t\t\tAn expression followed by a semicolon is a valid statement.\n\t\t\tFor many expressions this is rather pointless:\n\t\t\t<tscript>\n\t\t\t\t"hello world";\n\t\t\t\tmath.sqrt(81) == 9;\n\t\t\t</tscript>\n\t\t\tAn expression makes sense as a standalone statement if it has\n\t\t\tside-effects. Primary examples are calls to standard library\n\t\t\tfunctions:\n\t\t\t<tscript>\n\t\t\t\tprint("hello world");\n\t\t\t\tassert(math.sqrt(81) == 9);\n\t\t\t</tscript>\n\t\t\tOf course, a function call can result in an arbitrary sequence\n\t\t\tof commands being executed inside the function body and further\n\t\t\tfunctions called from there, and therefore the side effects can\n\t\t\tbecome arbitrarily complex.\n\t\t\t</p>\n\t\t',children:[]},{id:"if-then-else",name:"Conditions with if then else",title:"Conditions with if then else",content:'\n\t\t\t<p>\n\t\t\tA conditional control structure is denoted as follows:\n\t\t\t<ebnf>\n\t\t\tcondition = "if", expression, "then", statement,\n\t\t\t                            [ "else", statement ] ;\n\t\t\t</ebnf>\n\t\t\tThe <ebnf>expression</ebnf> must evaluate to a\n\t\t\t<a href="?doc=/language/types/boolean">Boolean</a>, otherwise an error\n\t\t\tis reported.\n\t\t\tIf the <ebnf>expression</ebnf> evaluates to <keyword>true</keyword>\n\t\t\tthen the <ebnf>statement</ebnf> following <keyword>then</keyword>\n\t\t\tis executed, otherwise the <ebnf>statement</ebnf> following\n\t\t\t<keyword>else</keyword> is executed, if present. It is common that\n\t\t\tthe statements are <a href="?doc=/language/statements/blocks">blocks</a>.\n\t\t\t</p>\n            <div class="example">\n            <h3>Example</h3>\n            <tscript>\nif true then {}              # works\nif 3 < 5 then {}             # works\n# if 1 then {}                 # does not work\n# if "true" then {}            # does not work\n            </tscript>\n        </div>\n\n\t\t',children:[]},{id:"for-loops",name:"For-Loops",title:"For-Loops",content:'\n\t\t\t<p>\n\t\t\tA for-loop has the following syntax:\n\t\t\t<ebnf>\n\t\t\tfor-loop = "for", [ loop-var, "in" ], expression, "do", statement ;\n\t\t\t  loop-var = ("var", identifier) | name ;\n\t\t\t</ebnf>\n\t\t\tThe <ebnf>expression</ebnf> must evaluate to a\n\t\t\t<a href="?doc=/language/types/range">Range</a> or an\n\t\t\t<a href="?doc=/language/types/array">Array</a>, otherwise an error is\n\t\t\treported.\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\t\t# print 9, 16, 25, 36, 49 in five lines\n\t\t\t\t\tfor var i in 3:8 do print(i*i);\n\n\t\t\t\t\t# print "hello" and "world" in two lines\n\t\t\t\t\tfor var i in ["hello", "world"] do print(i);\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t\t<p>\n\t\t\tThe for-loop executes the <ebnf>statement</ebnf> exactly once for\n\t\t\teach value in the range or array. This value is assigned to the loop\n\t\t\tvariable. An already declared variable can be used as the loop\n\t\t\tvariable, which is referenced by the given <ebnf>name</ebnf>, so it\n\t\t\tcan even be declared in another namespace.\n\t\t\tAlternatively, a new variable can declared with the\n\t\t\t<ebnf do-not-check>"var" identifier</ebnf> syntax. This variable belongs to the\n\t\t\tloop, which acts as its scope, hence its name does not collide with\n\t\t\tother declarations outside the loop, and the variable goes out of\n\t\t\tscope after the last loop iteration. It is common to execute\n\t\t\tmultiple statements in each loop iteration by using a\n\t\t\t<a href="?doc=/language/statements/blocks">block</a>.\n\t\t\t</p>\n\n\t\t\t<h2>Repeated Execution</h2>\n\t\t\t<p>\n\t\t\tLooping over a range is the idiomatic way to execute code a number\n\t\t\tof times in a row. The loop counter provides an easy way to\n\t\t\tparameterize the repeated code:\n\t\t\t<tscript>\n\t\t\t\tfor var i in 0:10 do print(10-i + "...");\n\t\t\t\tprint("now!");\n\t\t\t</tscript>\n\t\t\tIn simple contexts the loop variable is not needed. Consequently,\n\t\t\tit can be dropped:\n\t\t\t<tscript>\n\t\t\t\tfor 0:10 do print("wait...");\n\t\t\t\tprint("now!");\n\t\t\t</tscript>\n\t\t\t</p>\n\n\t\t\t<h2>Looping over Containers</h2>\n\t\t\t<p>\n\t\t\tLooping over an array works directly with a for-loop. For a\n\t\t\tdictionary it is not clear whether the loop variable shall hold\n\t\t\tkeys, values, or both. Therefore an explicit decision must be\n\t\t\tmade by the programmer, using the Dictionary methods\n\t\t\t<a href="?doc=/language/types/dictionary">keys</a> or\n\t\t\t<a href="?doc=/language/types/dictionary">values</a>, as shown in\n\t\t\tthe following example:\n\t\t\t<tscript>\n\t\t\t\tvar dict = {a: 3, b: 10, c: null};\n\t\t\t\tfor var i in dict.keys() do print(i + ": " + dict[i]);\n\t\t\t\tfor var i in dict.values() do print(i);\n\t\t\t</tscript>\n\t\t\tSince arrays also have keys and values() methods, this technique can\n\t\t\tloop over containers (arrays and dictionaries) in a generic fashion:\n\t\t\t<tscript>\n\t\t\t\tvar arr = [3, 10, null];\n\t\t\t\tvar dict = {a: 3, b: 10, c: null};\n\n\t\t\t\tfunction printContainer(container)\n\t\t\t\t{\n\t\t\t\t\tprint(Type(container));\n\t\t\t\t\tfor var i in container.keys() do\n\t\t\t\t\t{\n\t\t\t\t\t\tprint(i + ": " + container[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tprintContainer(arr);\n\t\t\t\tprintContainer(dict);\n\t\t\t</tscript>\n\t\t\t</p>\n\n\t\t\t<h2>Modifying the Container in the Loop</h2>\n\t\t\t<p>\n\t\t\tIt is safe to modify the object iterated over during execution of the loop.\n\t\t\tThe loop is entirely unaffected by such modification because it iterates\n\t\t\tover a copy of the object. For example, the following is not an infinite loop:\n\t\t\t</p>\n\t\t\t<tscript>\n\t\t\t\tvar arr = ["foo"];\n\t\t\t\tfor var i in arr do arr.push(i);\n\t\t\t\tprint(arr);   # prints [foo,foo]\n\t\t\t</tscript>\n\n\t\t\t<h2>Changing the Control Flow</h2>\n\t\t\t<p>\n\t\t\tEqually well, modifying the loop variable does not have an effect on the\n\t\t\tcontrol flow, because in the next iteration the variable is assigned the\n\t\t\tnext value from the container:\n\t\t\t<tscript>\n\t\t\t\tfor var i in 0:10 do\n\t\t\t\t{\n\t\t\t\t\tif i == 3 then i = 7;   # attempt to skip 3,4,5,6 fails\n\t\t\t\t\tprint(i);   # prints 0, 1, 2, <span style="color:red">7</span>, 4, 5, 6, 7, 8, 9\n\t\t\t\t}\n\t\t\t</tscript>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tSometimes it is necessary to change the control flow during execution\n\t\t\tof the loop. We have seen that modifying the loop variable and the\n\t\t\tloop object does not achieve this effect. Instead, the following two\n\t\t\toperations work.\n\t\t\tThe loop a a whole can be aborted with <a href="?doc=/language/statements/break-continue">break</a>.\n\t\t\tThe current iteration can be aborted with <a href="?doc=/language/statements/break-continue">continue</a>.\n\t\t\tIt is not possible to extend a for loop during execution. If this is\n\t\t\ta requirement then a\n\t\t\t<a href="?doc=/language/statements/while-do-loops">while-do-loop</a>\n\t\t\tcan be used.\n\t\t\t</p>\n\t\t',children:[]},{id:"while-do-loops",name:"While-Do-Loops",title:"While-Do-Loops",content:'\n\t\t\t<p>\n\t\t\tThe while-do-loop syntax is as follows:\n\t\t\t<ebnf>\n\t\t\t\twhile-do-loop = "while", expression, "do", statement ;\n\t\t\t</ebnf>\n\t\t\tThe loop evaluates the <ebnf>expression</ebnf>. If it does not result in\n\t\t\ta <a href="?doc=/language/types/boolean">Boolean</a>, then an error is emitted.\n\t\t\tIf the expression evaluates to <keyword>false</keyword> then the loop is\n\t\t\tfinished. However, if it evaluates to <keyword>true</keyword> then the\n\t\t\t<ebnf>statement</ebnf> is executed and the loop starts over by re-evaluating\n\t\t\tthe expression. This scheme corresponds to a pre-checked loop, i.e., a loop\n\t\t\tthat checks the condition <i>before</i> executing the statement.\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\t\t# find a zero of a function with Newton\'s method\n\t\t\t\t\tfunction f(x)\n\t\t\t\t\t{ return x^5 - 7 * x^3 + 2 * x^2 + x + 4.2; }\n\t\t\t\t\tfunction df(x)\n\t\t\t\t\t{ return 5 * x^4 - 21 * x^2 + 4 * x + 1; }\n\n\t\t\t\t\tvar x = 0.0;\n\t\t\t\t\twhile math.abs(f(x)) > 1e-5 do\n\t\t\t\t\t{\n\t\t\t\t\t\tvar step = f(x) / df(x);\n\t\t\t\t\t\tx -= step;\n\t\t\t\t\t}\n\t\t\t\t\tprint("The zero of f is close to x=" + x);\n\t\t\t\t\tprint("The function value at x is f(x)=" + f(x));\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t\t<p>\n\t\t\tIt is easy to create an infinite while-do loop:\n\t\t\t<pre class="code"><code class="code">while true do { }</code></pre>\n\t\t\tThe construction can actually be useful if the loop is aborted with a\n\t\t\t<keyword>break</keyword> statement.\n\t\t\t</p>\n\t\t',children:[]},{id:"do-while-loops",name:"Do-While-Loops",title:"Do-While-Loops",content:'\n\t\t\t<p>\n\t\t\tThe do-while-loop syntax is as follows:\n\t\t\t<ebnf>\n\t\t\t\tdo-while-loop = "do", statement, "while", expression, ";" ;\n\t\t\t</ebnf>\n\t\t\tThe loop executes the <ebnf>statement</ebnf>. Then it evaluates the\n\t\t\t<ebnf>expression</ebnf>. If it does not result in a\n\t\t\t<a href="?doc=/language/types/boolean">Boolean</a>, then an error is emitted.\n\t\t\tIf the expression evaluates to <keyword>false</keyword> then the loop is\n\t\t\tfinished. However, if it evaluates to <keyword>true</keyword> then the\n\t\t\tloop starts over. This scheme corresponds to a post-checked loop, i.e., a\n\t\t\tloop that checks the condition <i>after</i> executing the statement.\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\t\t# find a zero of a function with Newton\'s method\n\t\t\t\t\tfunction f(x)\n\t\t\t\t\t{ return x^5 - 7 * x^3 + 2 * x^2 + x + 4.2; }\n\t\t\t\t\tfunction df(x)\n\t\t\t\t\t{ return 5 * x^4 - 21 * x^2 + 4 * x + 1; }\n\n\t\t\t\t\tvar x = 0.0;\n\t\t\t\t\tdo\n\t\t\t\t\t{\n\t\t\t\t\t\tvar step = f(x) / df(x);\n\t\t\t\t\t\tx -= step;\n\t\t\t\t\t}\n\t\t\t\t\twhile math.abs(f(x)) > 1e-5;\n\t\t\t\t\tprint("The zero of f is close to x=" + x);\n\t\t\t\t\tprint("The function value at x is f(x)=" + f(x));\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t\t<p>\n\t\t\tIt is easy to create an infinite while loop:\n\t\t\t<pre class="code"><code class="code">do { } while true;</code></pre>\n\t\t\tThe construction can actually be useful if the loop is aborted with a\n\t\t\t<keyword>break</keyword> statement.\n\t\t\t</p>\n\t\t',children:[]},{id:"break-continue",name:"Break and Continue",title:"Break and Continue",content:'\n\t\t\t<p>\n\t\t\tThe <keyword>break</keyword> and <keyword>continue</keyword> statements\n\t\t\tchange the control flow of the current innermost loop within the current\n\t\t\tfunction. The break statement exits the loop. The continue statement\n\t\t\tskips the remainder of a loop iteration. Their syntax is trivial:\n\t\t\t<ebnf>\n\t\t\t\tbreak = "break", ";" ;\n\t\t\t\tcontinue = "continue", ";" ;\n\t\t\t</ebnf>\n\t\t\tAfter a continue statement, the loop jumps to its check of the stopping\n\t\t\tcriterion. If it does not stop then it continues with the next loop\n\t\t\titeration, otherwise with the next statement following the loop body.\n\t\t\tBreak and continue statements outside of a loop body result in an error\n\t\t\tmessage.\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\t\t# find all primes below some number\n\t\t\t\t\tvar N = 100;                  # look for primes up to this point\n\t\t\t\t\tvar primes = [];\n\t\t\t\t\tfor var i in 2:N do\n\t\t\t\t\t{\n\t\t\t\t\t\t# check whether i is prime by finding a factor\n\t\t\t\t\t\tvar factor = null;\n\t\t\t\t\t\tfor var p in primes do\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif p * p > i then break;  # don\'t check too large primes\n\t\t\t\t\t\t\tif i % p == 0 then\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t# found a factor\n\t\t\t\t\t\t\t\tfactor = p;\n\t\t\t\t\t\t\t\tbreak;                # don\'t check further factors\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif factor != null then continue;  # skip non-primes\n\t\t\t\t\t\tprint(i + " is prime");\n\t\t\t\t\t\tprimes.push(i);\n\t\t\t\t\t}\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t',children:[]},{id:"return",name:"Return",title:"Return",content:'\n\t\t\t<p>\n\t\t\tThe return statement immediately returns from a function.\n\t\t\tIts syntax is as follows:\n\t\t\t<ebnf>\n\t\t\t\treturn = "return", [ expression ], ";" ;\n\t\t\t</ebnf>\n\t\t\tIf the optional <ebnf>expression</ebnf> is not present, then\n\t\t\t<keyword>null</keyword> is used as the default value.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tThe return statement first evaluates the expression, known as the\n\t\t\treturn value, then leaves the current function, and returns the\n\t\t\tvalue to the caller. In other words, the function call expression\n\t\t\tin the calling context evaluates to the return value.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tWhen executed at global scope, the return statement terminates the\n\t\t\tprogram. A constructor as well as the global scope do not return a\n\t\t\tvalue. Therefore, in these contexts, a return statement must not\n\t\t\tcontain a return value.\n\t\t\t</p>\n            <div class="example">\n            <h3>Example</h3>\n            <tscript>\nfunction example() {\n    var e = 1;\n    return e+1;\n}\n\nprint(example());               # prints 2, since the e+1 gets first evaluated and then returned\n\n# return 1;                     # error, since one tries to return an integer from the global scope\n\nreturn;                         # terminates the program\n\nprint("example");               # will not be executed\n            </tscript>\n        </div>\n\t\t',children:[]},{id:"throw",name:"Throw",title:"Throw",content:'\n\t\t\t<h2>Syntax and Effect</h2>\n\t\t\t<p>\n\t\t\tAn exception is thrown with the following syntax:\n\t\t\t<ebnf>\n\t\t\t\tthrow = "throw", expression, ";" ;\n\t\t\t</ebnf>\n\t\t\tThe result of evaluating the <ebnf>expression</ebnf> is called\n\t\t\tan exception.\n\t\t\tThe effect of throwing an exception is that execution continues\n\t\t\tin the <keyword>catch</keyword>-part of the closest enclosing\n\t\t\t<keyword>try</keyword>-<keyword>catch</keyword> block.\n\t\t\tThe search for the closest enclosing <keyword>try</keyword> block\n\t\t\tworks as follows. The current scope is left until a\n\t\t\t<keyword>try</keyword> block, global scope, or a function scope\n\t\t\tis found. In case of a <keyword>try</keyword> block the search\n\t\t\tis successful, and the exception is assigned to the variable\n\t\t\tdeclared in the <keyword>catch</keyword> block. Otherwise the\n\t\t\truntime system leaves the current function and continues the\n\t\t\tsearch in the calling function. If no <keyword>try</keyword>-block\n\t\t\tis found before global scope is encountered, then the program\n\t\t\tterminates with an error message, which contains a string\n\t\t\trepresentation of the exception.\n\t\t\t</p>\n\n\t\t\t<h2>Error Handling</h2>\n\t\t\t<p>\n\t\t\tExceptions are regularly used for error reporting across possibly\n\t\t\tdeeply nested function calls. The role of the exception is to\n\t\t\tprovide a useful description of the error, which can be either\n\t\t\thandled programmatically by the catch block, or reported to the\n\t\t\tuser.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tSometimes only certain types of errors should be handled in a\n\t\t\tspecific <keyword>catch</keyword> block. In this case the\n\t\t\texception can be caught, examined, and possibly re-thrown.\n\t\t\t</p>\n\t\t',children:[]},{id:"try-catch",name:"Try and Catch",title:"Try and Catch",content:'\n\t\t\t<h2>Syntax</h2>\n\t\t\t<p>\n\t\t\tThe syntax of a <keyword>try</keyword>-<keyword>catch</keyword>\n\t\t\tstatement is as follows:\n\t\t\t<ebnf>\n\t\t\t\ttry-catch = "try", statement,\n\t\t\t\t            "catch", "var", identifier, "do", statement ;\n\t\t\t</ebnf>\n\t\t\tUnder normal conditions, the try-catch-block executes only\n\t\t\tthe statement following <keyword>try</keyword>. This is nearly\n\t\t\talways a block of statements, also referred to as the try-block.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tHowever, if an exception is thrown in the try-block or in any\n\t\t\tfunction called from this block, then execution continues in\n\t\t\tthe statement following <keyword>do</keyword>. This is again\n\t\t\tusually a block of statements, called the catch-block. The value\n\t\t\tpassed to the <keyword>throw</keyword> instruction, known as the\n\t\t\t<i>exception</i>, is assigned to the variable declared after\n\t\t\t<keyword>catch</keyword>. Catch blocks are used to react to\n\t\t\terror conditions, which are reported by throwing an\n\t\t\texception.\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\tvar sum = 0;\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\t# this sum is doomed to fail\n\t\t\t\t\tvar numbers = [3.2, 5.6, 0.0, 8.0, 2.4];\n\t\t\t\t\tfor var i in numbers do\n\t\t\t\t\t{\n\t\t\t\t\t\tfor var j in numbers do\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif i == 0 then throw "division by zero";\n\t\t\t\t\t\t\telse sum += j / i;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tprint(sum);\n\t\t\t\t}\n\t\t\t\tcatch var ex do\n\t\t\t\t{\n\t\t\t\t\t# and here we "handle" the error\n\t\t\t\t\tif ex == "division by zero" then\n\t\t\t\t\t\tprint("division by zero, partial sum: " + sum);\n\t\t\t\t\telse throw ex;\n\t\t\t\t}\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\tfunction doStuff(n)\n\t\t\t\t{\n\t\t\t\t\tif n == 0 then return 1;\n\t\t\t\t\telse if n < 0 then throw "oh no!";\n\t\t\t\t\telse return 3 * doStuff(n - 2);\n\t\t\t\t}\n\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\tprint(doStuff(4));\n\t\t\t\t\tprint(doStuff(8));\n\t\t\t\t\tprint(doStuff(11));   # exception thrown in here\n\t\t\t\t\tprint(doStuff(14));\n\t\t\t\t}\n\t\t\t\tcatch var ex do\n\t\t\t\t{\n\t\t\t\t\t# and here we "handle" the error\n\t\t\t\t\tprint("exception: " + ex);\n\t\t\t\t}\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t',children:[]}]},{id:"types",name:"The Type System",title:"The Type System",content:"\n\t\t<p>\n\t\tA type defines a set of values, which are of similar nature.\n\t\tThey are associated with operations acting on the value, i.e.,\n\t\tevaluating or manipulating values. The available data types\n\t\ttherefore define how information can be represented natively,\n\t\twhich units of information can be processed atomically, and\n\t\thow information can be aggregated.\n\t\t</p>\n\t\t<p>\n\t\tTScript's core type system is rather minimal. It does not aim\n\t\tfor completeness, but it is extensible. For example, there is\n\t\tno built-in type representing a date, but it is easy enough to\n\t\tadd a class taking that role.\n\t\t</p>\n\t\t<p>\n\t\tNot all types represent typical units of information, like bits,\n\t\tnumbers, and strings. Two such types are Function and Type. The\n\t\tability to use functions as types enables powerful programming\n\t\ttechniques. Types as values are used to check for the types of\n\t\tvariables referenced by variables at runtime.\n\t\t</p>\n\t\t<p>\n\t\tProgrammers can extend the type system to new kinds of information\n\t\tby writing their own classes. Simple classes like a date class can\n\t\tbehave similar to atomic types. More complex classes can for\n\t\texample act as containers, or represent resources (like files).\n\t\tClasses support proper information hiding, which allows the\n\t\tprogrammer to separate implementation details from a public\n\t\tinterface.\n\t\t</p>\n\t\t<p>\n\t\tTScript does not distinguish between built-in types and classes,\n\t\tin the sense that all types are equally capable of taking each role.\n\t\tFor example, it is perfectly legal to use a built-in type like\n\t\tInteger as a super class, which might make sense for a date class.\n\t\tHowever, it is not possible to overload operators. For classes, the\n\t\tcapabilities of operators must therefore be emulated with functions.\n\t\t</p>\n\t",children:[{id:"null",name:"Null",title:"The Type <i>Null</i>",content:'\n\t\t\t<p>\n\t\t\tThe Null type has only a single value, the\n\t\t\t<a href="?doc=/language/expressions/literals/null">null literal</a>.\n\t\t\tThis value is immutable. It does not offer any operations.\n\t\t\tWhile it is clear that <keyword>null</keyword> cannot represent\n\t\t\tmuch useful information, is has a twofold role: first of all, it\n\t\t\tacts as a <i>default initializer</i> for all variables, and second,\n\t\t\tit is a canonical <i>marker</i> for an exceptional state, like an\n\t\t\terror condition or marking a process as incomplete. For example, a\n\t\t\tfunction that is expected to return an integer may use a return\n\t\t\tvalue of <keyword>null</keyword> to indicate that it was not\n\t\t\table to complete its task (for whatever reason).\n\t\t\t</p>\n            <div class="example">\n            <h3>Example</h3>\n            <tscript>\nvar example;\n\nif example == null then print("example");     # prints "example"\n# if test == null then print("test");         # error, since test is not defined - non defined variables are therefore not the same as null\n            </tscript>\n        </div>\n\n\t\t\t<h2>Methods</h2>\n\t\t\t<table class="methods">\n\t\t\t<tr><th>constructor</th><td>\n\t\t\t\tThe <code class="code">constructor()</code> creates a null\n\t\t\t\tvalue.\n\t\t\t</td></tr>\n\t\t\t</table>\n\t\t',children:[]},{id:"boolean",name:"Boolean",title:"The Type <i>Boolean</i>",content:'\n\t\t\t<p>\n\t\t\tThe type Boolean represents the two logical values, denoted by the\n\t\t\t<a href="?doc=/language/expressions/literals/booleans">literals</a>\n\t\t\t<keyword>true</keyword> and <keyword>false</keyword>. They are\n\t\t\timmutable.\n\t\t\t</p>\n\n\t\t\t<h2>Operations</h2>\n\t\t\tBooleans offer a number of operations, namely the operators\n\t\t\t<a href="?doc=/language/expressions/unary-operators/not">not</a>,\n\t\t\t<a href="?doc=/language/expressions/binary-operators/and">and</a>,\n\t\t\t<a href="?doc=/language/expressions/binary-operators/or">or</a>, and\n\t\t\t<a href="?doc=/language/expressions/binary-operators/xor">xor</a>.\n\t\t\tThey can be compared for equality with the operators\n\t\t\t<code class="code">==</code> and <code class="code">!=</code>\n\t\t\t(and in fact, for Boolean, the operators\n\t\t\t<code class="code">xor</code> and <code class="code">!=</code>\n\t\t\tare equivalent), but they cannot be ordered. Booleans are\n\t\t\tdemanded by the language as conditions in\n\t\t\t<a href="?doc=/language/statements/if-then-else">conditionals</a>\n\t\t\tand <a href="?doc=/language/statements/while-do-loops">pre-</a> and\n\t\t\t<a href="?doc=/language/statements/do-while-loops">post-</a>checked\n\t\t\tloops. Furthermore, they are frequently used as flags, and they\n\t\t\tcan be used to represent single bits.\n\t\t\t</p>\n            <div class="example">\n            <h3>Example</h3>\n            <tscript>\nvar a = true;\nvar b = false;\n\nprint(not a);           # prints false;\n\nprint(a and a);         # prints true;\nprint(a and b);         # prints false;\nprint(b and b); \t    # prints true;\n\nprint(a or b);          # prints true;\nprint(a or a);          # prints true;\nprint(b or b);          # prints false;\n\nprint(a xor b);         # prints true;\nprint(a xor a);         # prints false;\nprint(b xor b);         # prints false;\n\n\n\nvar FLAG_FOUNDITEM = false;                                     # this flag indicates if an item is already found in a search\n\nvar example_array = Array(10);\nexample_array[4] = 1;\n\nfor var i in 0:10 do {\n    if example_array[i] == 1 then FLAG_FOUNDITEM = true;      # the flag is set to true, once a specific condition - in this case finding a specific item - is met\n\n    if FLAG_FOUNDITEM then break;                             # the flag can be checked at any location (in this example a flag isn\'t needed, though)\n}\n\n            </tscript>\n        </div>\n\n\t\t\t<h2>Methods</h2>\n\t\t\t<table class="methods">\n\t\t\t<tr><th>constructor</th><td>\n\t\t\t\tThe <code class="code">constructor(value)</code> creates a copy\n\t\t\t\tof a boolean value.\n\t\t\t</td></tr>\n\t\t\t</table>\n\t\t',children:[]},{id:"integer",name:"Integer",title:"The Type <i>Integer</i>",content:'\n\t\t\t<p>\n\t\t\tThere exist <i>2<sup>32</sup></i> values of type Integer, namely\n\t\t\tthe whole numbers in the range <i>-2147483648 = -2<sup>31</sup></i>\n\t\t\tto <i>2147483647 = 2<sup>31</sup>-1</i>. Non-negative integers can be\n\t\t\trepresented directly as\n\t\t\t<a href="?doc=/language/expressions/literals/integers">integer literals</a>.\n\t\t\tThe values are immutable.\n\t\t\t</p>\n\n\t\t\t<h2>Operations</h2>\n\t\t\t<p>\n\t\t\tIntegers can be combined with a number of unary and binary operators.\n\t\t\tWhen the result of such an operator is outside the integer range then\n\t\t\tthe result <i>underflows</i> or <i>overflows</i>, i.e., wraps around\n\t\t\tthe range, which can be understood as representatives of the integers\n\t\t\tmodulo <i>2<sup>32</sup></i>. Being aware of this behavior is important\n\t\t\twhen dealing with large numbers, in particular since the operations are\n\t\t\tnot fully consistent from an algebraic perspective.\n\t\t\t</p>\n\t\t\t<table class="methods">\n\t\t\t<tr><th>unary&nbsp;+</th><td>\n\t\t\t\tThe operator is a no-operation, or more correctly, the identity\n\t\t\t\tmapping. It returns its argument unmodified. It merely exists for\n\t\t\t\tsymmetry with unary&nbsp;-, e.g., in the following situation:\n\t\t\t\t<tscript>\n\t\t\t\t\tvar a = [-1, +1];\n\t\t\t\t</tscript>\n\t\t\t</td></tr>\n\t\t\t<tr><th>unary&nbsp;-</th><td>\n\t\t\t\tThe operator negates its argument. This operation overflows only\n\t\t\t\tfor the value <i>-2<sup>31</sup> = -2147483648</i>, resulting in\n\t\t\t\tthe exact same value.\n\t\t\t</td></tr>\n\t\t\t<tr><th>unary&nbsp;not</th><td>\n\t\t\t\tThe operator flips all 32 bits of its argument.\n\t\t\t</td></tr>\n\t\t\t<tr><th>binary&nbsp;+</th><td>\n\t\t\t\tAdd the arguments. The result is subject to under- and overflow.\n\t\t\t</td></tr>\n\t\t\t<tr><th>binary&nbsp;-</th><td>\n\t\t\t\tSubtract the arguments. The result is subject to under- and overflow.\n\t\t\t</td></tr>\n\t\t\t<tr><th>binary&nbsp;*</th><td>\n\t\t\t\tMultiply the arguments. The result is subject to under- and overflow,\n\t\t\t\twhich is particularly common for this operation. Example:\n\t\t\t\t<tscript>\n\t\t\t\t\tprint(65535 * 65537);   # overflows to -1\n\t\t\t\t</tscript>\n\t\t\t</td></tr>\n\t\t\t<tr><th>binary&nbsp;/</th><td>\n\t\t\t\tDivide the arguments as reals. The arguments are first converted\n\t\t\t\tto reals, then they are divided as reals, and the result is of\n\t\t\t\ttype Real, even if the remainder of the integer division is zero.\n\t\t\t\t<tscript>\n\t\t\t\t\tprint(6 / 3);     # 2\n\t\t\t\t\tprint(5 / 3);     # 1.6666...\n\t\t\t\t\tprint(4 / 3);     # 1.3333...\n\t\t\t\t\tprint(1 / 3);     # 0.3333...\n\t\t\t\t\tprint(-1 / 3);    # -0.3333...\n\t\t\t\t\tprint(1 / -3);    # -0.3333...\n\t\t\t\t</tscript>\n\t\t\t</td></tr>\n\t\t\t<tr><th>binary&nbsp;//</th><td>\n\t\t\t\tDivide the arguments as integers, defined as</br>\n\t\t\t\t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="code">a // b = math.floor(a / b)</code></br>\n\t\t\t\tNote that <code class="code">a * b = c</code> implies\n\t\t\t\t<code class="code">c // a = b</code> only if the multiplication\n\t\t\t\tdoes not overflow. Division is not well-defined in the modulo\n\t\t\t\tarithmetic implied by overflow!\n\t\t\t\tInstead "normal" integer division (without modulo) is assumed.\n\t\t\t\tThe result is rounded down to the closest integer. For example:\n\t\t\t\t<tscript>\n\t\t\t\t\tprint(6 // 3);     # 2\n\t\t\t\t\tprint(5 // 3);     # 1\n\t\t\t\t\tprint(4 // 3);     # 1\n\t\t\t\t\tprint(1 // 3);     # 0\n\t\t\t\t\tprint(-1 // 3);    # -1, since we round down\n\t\t\t\t\tprint(1 // -3);    # -1 again\n\t\t\t\t\tprint(-(1 // 3));  # 0\n\t\t\t\t</tscript>\n\t\t\t</td></tr>\n\t\t\t<tr><th>binary&nbsp;%</th><td>\n\t\t\t\tRemainder of the integer division. The result is defined by\n\t\t\t\tthe following identity:</br>\n\t\t\t\t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="code">a % b = a - (a // b) * b</code></br>\n\t\t\t\tThis ensures that the result is always in the range</br>\n\t\t\t\t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="code">0 <= a % b < math.abs(b)</code></br>\n\t\t\t\tFor example:\n\t\t\t\t<tscript>\n\t\t\t\t\tprint(6 % 3);     # 0\n\t\t\t\t\tprint(5 % 3);     # 2\n\t\t\t\t\tprint(4 % 3);     # 1\n\t\t\t\t\tprint(1 % 3);     # 1\n\t\t\t\t\tprint(-1 % 3);    # 2, not -1\n\t\t\t\t\tprint(1 % -3);    # 2 again, since 1//-3 = -1//3\n\t\t\t\t\tprint(-(1 % 3));  # -1\n\t\t\t\t</tscript>\n\t\t\t</td></tr>\n\t\t\t<tr><th>binary&nbsp;^</th><td>\n\t\t\t\tThe operation <i>n ^ m</i> computes the <i>m</i>-th power of\n\t\t\t\t<i>n</i>. If <i>m</i> is non-negative then the result is an\n\t\t\t\tinteger, which is subject to the usual under- and overflow rules.\n\t\t\t\tFor negative exponent both arguments are converted to reals\n\t\t\t\tbefore applying the same operator for reals. Examples:\n\t\t\t\t<tscript>\n\t\t\t\t\tprint(2 ^ 4);       # 16\n\t\t\t\t\tprint(-2 ^ 4);      # -16\n\t\t\t\t\tprint((-2) ^ 4);    # 16\n\t\t\t\t\tprint(2 ^ -2);      # 0.25\n\t\t\t\t</tscript>\n\t\t\t</td></tr>\n\t\t\t<tr><th>binary&nbsp;and</th><td>\n\t\t\t\tThe operator returns the bitwise conjunction applied independently\n\t\t\t\tto all 32 bits of its arguments.\n\t\t\t\t</tscript>\n\t\t\t</td></tr>\n\t\t\t<tr><th>binary&nbsp;or</th><td>\n\t\t\t\tThe operator returns the bitwise non-exclusive disjunction applied\n\t\t\t\tindependently to all 32 bits of its arguments.\n\t\t\t\t</tscript>\n\t\t\t</td></tr>\n\t\t\t<tr><th>binary&nbsp;xor</th><td>\n\t\t\t\tThe operator returns the bitwise exclusive disjunction applied\n\t\t\t\tindependently to all 32 bits of its arguments.\n\t\t\t\t</tscript>\n\t\t\t</td></tr>\n\t\t\t</table>\n\t\t\t<p>\n\t\t\tIntegers can be\n\t\t\t<a href="?doc=/language/expressions/binary-operators/equality">compared for equality</a>\n\t\t\tand they are <a href="?doc=/language/expressions/binary-operators/order">ordered</a>.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tNote: bitwise operators have a very low precedence, i.e., a low binding\n\t\t\tstrength. Therefore, in a condition like <code class="code">x and 64 == 0</code>\n\t\t\tthe comparison operator <code class="code">==</code> is executed\n\t\t\t<i>before</i> the bitwise operator <code class="code">and</code>. This\n\t\t\tis usually intended for logical operators, but not for bitwise operators.\n\t\t\tTherefore bitwise operators should always be used with parentheses:\n\t\t\t<code class="code">(x and 64) == 0</code>.\n\t\t\t</p>\n\n\t\t\t<h2>Methods</h2>\n\t\t\t<table class="methods">\n\t\t\t<tr><th>constructor</th><td>\n\t\t\t\t<code class="code">constructor(value)</code> converts the\n\t\t\t\tvalue to an integer. For integers this amounts to copying, reals\n\t\t\t\tare rounded down, and strings are parsed as decimal numbers.\n\t\t\t\tThe result is subject to integer overflow. Other types as well as\n\t\t\t\tthe special Real values infinity and not-a-number raise an error.\n\t\t\t</td></tr>\n\t\t\t</table>\n\t\t',children:[]},{id:"real",name:"Real",title:"The Type <i>Real</i>",content:'\n\t\t\t<p>\n\t\t\tThe type Real represents floating point numbers according to the\n\t\t\t<a target="_blank" href="https://de.wikipedia.org/wiki/IEEE_754">IEEE 754 standard</a>.\n\t\t\tThis number format offers an excessive range and a precision of\n\t\t\tabout 15-16 decimal digits. Although the precision is more than\n\t\t\tsufficient for most tasks, one should be aware of its limitations\n\t\t\tlike rounding errors, which can result in catastrophic cancellation.\n\t\t\tThese aspects have been discussed in detail in\n\t\t\t<a target="_blank" href="https://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html">this classic article</a>.\n\t\t\tPositive reals can be represented directly as\n\t\t\t<a href="?doc=/language/expressions/literals/reals">real literals</a>.\n\t\t\tThe values are immutable.\n\t\t\t</p>\n\n\t\t\t<h2>Operations</h2>\n\t\t\t<p>\n\t\t\tReals can be combined with a number of unary and binary operators.\n\t\t\tWhen the result of such an operator is outside the floating point range\n\t\t\tthen the result <i>underflows</i> (to zero) or <i>overflows</i> (to\n\t\t\tpositive or negative infinity). Being aware of this behavior is important\n\t\t\twhen dealing with large numbers, in particular since the operations are\n\t\t\tnot fully consistent from an algebraic perspective. Computations with\n\t\t\tinfinite values easily result in undefined results, which are encoded by\n\t\t\tthe special value NaN (not-a-number).\n\t\t\t</p>\n\t\t\t<table class="methods">\n\t\t\t<tr><th>unary&nbsp;+</th><td>\n\t\t\t\tThe unary <code class="code">operator +</code> is a no-operation,\n\t\t\t\tor more correctly, the identity mapping. It returns its argument\n\t\t\t\tunmodified. It merely exists for symmetry with unary&nbsp;-, i.e.,\n\t\t\t\tin the following situation:\n\t\t\t\t<tscript>\n\t\t\t\t\tvar a = [-1.0, +1.0];\n\t\t\t\t</tscript>\n\t\t\t</td></tr>\n\t\t\t<tr><th>unary&nbsp;-</th><td>\n\t\t\t\tThe unary <code class="code">operator -</code> negates its argument.\n\t\t\t</td></tr>\n\t\t\t<tr><th>binary&nbsp;+</th><td>\n\t\t\t\tAdd the arguments. The result is subject to under- and overflow.\n\t\t\t</td></tr>\n\t\t\t<tr><th>binary&nbsp;-</th><td>\n\t\t\t\tSubtract the arguments. The result is subject to under- and overflow.\n\t\t\t</td></tr>\n\t\t\t<tr><th>binary&nbsp;*</th><td>\n\t\t\t\tMultiply the arguments. The result is subject to under- and overflow.\n\t\t\t</td></tr>\n\t\t\t<tr><th>binary&nbsp;/</th><td>\n\t\t\t\tDivide the arguments. The result is subject to under- and overflow.\n\t\t\t</td></tr>\n\t\t\t<tr><th>binary&nbsp;//</th><td>\n\t\t\t\tDivide the arguments and round the result down to the closest integer.\n\t\t\t\tYet, the result is of type Real. This operator is compatible with\n\t\t\t\tinteger division and with the modulo operation defined below.\n\t\t\t\tFor example:\n\t\t\t\t<tscript>\n\t\t\t\t\tprint(3.5 // 1.5);      # 2\n\t\t\t\t\tprint(-3.5 // 1.5);     # -3\n\t\t\t\t\tprint(-(3.5 // 1.5));   # -2\n\t\t\t\t</tscript>\n\t\t\t</td></tr>\n\t\t\t<tr><th>binary&nbsp;%</th><td>\n\t\t\t\tRemainder of the division, pretending that the quotient had been\n\t\t\t\trounded down to the nearest integer. The result is defined as</br>\n\t\t\t\t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="code">a % b = a - b * (a // b)</code></br>\n\t\t\t\t(for positive denominator, otherwise the result is negated).\n\t\t\t\tFor example:\n\t\t\t\t<tscript>\n\t\t\t\t\tprint(3.5 % 1.5);      # 0.5\n\t\t\t\t\tprint(-3.5 % 1.5);     # 1\n\t\t\t\t\tprint(-(3.5 % 1.5));   # -0.5\n\t\t\t\t</tscript>\n\t\t\t</td></tr>\n\t\t\t<tr><th>binary&nbsp;^</th><td>\n\t\t\t\tThe operation <i>n&nbsp;^&nbsp;m</i> computes the <i>m</i>-th power of\n\t\t\t\t<i>n</i>. Note that raising a negative number to a non-integer power is\n\t\t\t\tnot a well-defined operation, yielding the result NaN.\n\t\t\t</td></tr>\n\t\t\t</table>\n\t\t\t<p>\n\t\t\tReals can be\n\t\t\t<a href="?doc=/language/expressions/binary-operators/equality">compared for equality</a>\n\t\t\tand they are <a href="?doc=/language/expressions/binary-operators/order">ordered</a>.\n\t\t\tAll operations on reals can mix integers and reals. The integer is then\n\t\t\tconverted to a real, and the operation is executed with floating-point\n\t\t\tlogic, even if the numbers represented by the reals could be converted\n\t\t\tto integers without loss of precision.\n\t\t\t</p>\n\n\t\t\t<h2>Methods</h2>\n\t\t\t<table class="methods">\n\t\t\t<tr><th>constructor</th><td>\n\t\t\t\t<code class="code">constructor(value)</code> converts the\n\t\t\t\tvalue to a real. For reals this amounts to copying, integers\n\t\t\t\tare converted, and strings are parsed as decimal numbers.\n\t\t\t\tThe result is subject to roundoff errors. All other types\n\t\t\t\tand all error conditions result in not-a-number.\n\t\t\t</td></tr>\n\t\t\t<tr><th>isFinite</th><td>\n\t\t\t\t<code class="code">isFinite()</code> test whether the value\n\t\t\t\tis finite. This is the case if it is neither infinite nor\n\t\t\t\tNaN.\n\t\t\t</td></tr>\n\t\t\t<tr><th>isInfinite</th><td>\n\t\t\t\t<code class="code">isInfinite()</code> test whether the value\n\t\t\t\tis infinite. This is the case if it equals positive or\n\t\t\t\tnegative infinity.\n\t\t\t</td></tr>\n\t\t\t<tr><th>isNan</th><td>\n\t\t\t\t<code class="code">isNan()</code> test whether the value\n\t\t\t\tis not-a-number.\n\t\t\t</td></tr>\n\t\t\t<tr><th>inf</th><td>\n\t\t\t\t<code class="code">static inf()</code> returns positive\n\t\t\t\tinfinity.\n\t\t\t</td></tr>\n\t\t\t<tr><th>nan</th><td>\n\t\t\t\t<code class="code">static nan()</code> returns not-a-number.\n\t\t\t</td></tr>\n\t\t\t</table>\n\n            <div class="example">\n            <h3>Example</h3>\n            <tscript>\nvar infiniteR = Real.inf();\n\nprint(infiniteR.isInfinite());      # prints true\nprint(infiniteR.isFinite());        # prints false\n\n            </tscript>\n        </div>\n\t\t',children:[]},{id:"string",name:"String",title:"The Type <i>String</i>",content:'\n\t\t\t<p>\n\t\t\tThe type String represents text. A string is a sequence of\n\t\t\t<a href="?doc=/language/syntax/character-set">characters</a> of\n\t\t\tarbitrary length, also known as the <i>size</i> of the string.\n\t\t\tAlthough strings can contain any Unicode code point in the\n\t\t\trange U+0000 to U+FFFF,\n\t\t\t<a href="?doc=/language/expressions/literals/strings">string\n\t\t\tliterals</a> allow to encode all characters with plain ASCII.\n\t\t\tDespite their sequence nature, strings are immutable. Hence\n\t\t\twhen the need for modifying a string arises then a new string\n\t\t\tmust be constructed.\n\t\t\t</p>\n\n\t\t\t<h2>Operations</h2>\n\t\t\t<table class="methods">\n\t\t\t<tr><th>binary&nbsp;+</th><td>\n\t\t\t\tConcatenate two strings as sequences of characters. Only one of the\n\t\t\t\toperands needs to be a string in order to trigger the application of\n\t\t\t\tthis operator; the other operand is converted to a string as if it\n\t\t\t\thad been passed to the String constructor. The following two\n\t\t\t\tstatements are equivalent:\n\t\t\t\t<tscript>\n\t\t\t\t\tprint("pi = " + math.pi());\n\t\t\t\t\tprint("pi = " + String(math.pi()));\n\t\t\t\t</tscript>\n\t\t\t</td></tr>\n\t\t\t<tr><th>item&nbsp;access&nbsp;[]</th><td>\n\t\t\t\tIf the index is of type Integer then the single character at the\n\t\t\t\tspecified (zero-based) position is returned. The position must be\n\t\t\t\tvalid, i.e., it must neither be negative nor exceed the size of\n\t\t\t\tthe string. The character is returned as an integer in the range\n\t\t\t\t0 to 65535 representing the unicode code point.\n\t\t\t\t<tscript>\n\t\t\t\t\tprint("hello world"[5]); # prints 32, the code of " "\n\t\t\t\t</tscript>\n\t\t\t\tIf the index is of type Range then the substring described by the\n\t\t\t\trange is extracted. Parts of the range that lie outside the valid\n\t\t\t\tindex range are ignored.\n\t\t\t\t<tscript>\n\t\t\t\t\tprint("hello world"[6:100]); # prints "world"\n\t\t\t\t</tscript>\n\t\t\t</td></tr>\n\t\t\t</table>\n\t\t\t<p>\n\t\t\tStrings can be\n\t\t\t<a href="?doc=/language/expressions/binary-operators/equality">compared for equality</a>\n\t\t\tand they are <a href="?doc=/language/expressions/binary-operators/order">ordered</a>.\n\t\t\tStrings are equal if they have the same length and all characters\n\t\t\tcoincide. They are ordered lexicographically.\n\t\t\t</p>\n\n\t\t\t<h2>Methods</h2>\n\t\t\t<table class="methods">\n\t\t\t<tr><th>constructor</th><td>\n\t\t\t\t<code class="code">constructor(value)</code> converts the\n\t\t\t\tvalue to a string.\n\t\t\t</td></tr>\n\t\t\t<tr><th>size</th><td>\n\t\t\t\tThe <code class="code">function size()</code> returns the size of\n\t\t\t\tthe string, which is the number of characters in the sequence.\n\t\t\t</td></tr>\n\t\t\t<tr><th>find</th><td>\n\t\t\t\tThe <code class="code">function find(searchterm, start=0, backward=false)</code>\n\t\t\t\tsearches for the string <i>searchterm</i> inside the string.\n\t\t\t\tIf <i>backward</i> is <keyword>false</keyword> then it returns\n\t\t\t\tthe first position not smaller than <i>start</i> where it encounters\n\t\t\t\t<i>searchterm</i> inside the string, or <keyword>null</keyword>\n\t\t\t\tif it is not found. If <i>backward</i> is <keyword>true</keyword>\n\t\t\t\tthen the last position no larger than <i>start</i> where\n\t\t\t\t<i>searchterm</i> is found inside the string is returned.\n\t\t\t</td></tr>\n\t\t\t<tr><th>split</th><td>\n\t\t\t\tThe <code class="code">function split(separator)</code> splits\n\t\t\t\tthe string into substrings, separated by the separator string.\n\t\t\t\tIt returns the substrings as an array. In case of two consecutive\n\t\t\t\tseparators or a separator at the beginning or end of the string\n\t\t\t\tthe resulting substring is empty. Example:\n\t\t\t\t<tscript>\n\t\t\t\t\tvar s = "hello,A,,B,";\n\t\t\t\t\tvar a = s.split(",");\n\t\t\t\t\t# a = ["hello", "A", "", "B", ""]\n\t\t\t\t</tscript>\n\t\t\t</td></tr>\n\t\t\t<tr><th>toLowerCase</th><td>\n\t\t\t\tThe <code class="code">function toLowerCase()</code> returns the string in only lower case characters.\n\t\t\t</td></tr>\n\t\t\t<tr><th>toUpperCase</th><td>\n\t\t\t\tThe <code class="code">function toUpperCase()</code> returns the string in only upper case characters.\n\t\t\t</td></tr>\n\t\t\t<tr><th>replace</th><td>\n\t\t\t\tThe <code class="code">function replace(pattern, replacement)</code> returns the string, but replaced all occurences of the string <i>pattern</i> with the string <i>replacement</i>.\n\t\t\t</td></tr>\n\t\t\t<tr><th>fromUnicode</th><td>\n\t\t\t\tThe <code class="code">static function fromUnicode(characters)</code>\n\t\t\t\tconverts a single integer or an array of integers into a string\n\t\t\t\tthe character codes of which coincide with the integers.\n\t\t\t\t<tscript>\n\t\t\t\t\tprint(String.fromUnicode([50, 8364])); # prints "2€"\n\t\t\t\t</tscript>\n\t\t\t</td></tr>\n\t\t\t<tr><th>join</th><td>\n\t\t\t\tThe <code class="code">static function join(array, separator = "")</code>\n\t\t\t\tcreates a string from an array of strings, separated by the (optional)\n\t\t\t\tseparator. To this end, the entries of the array and the separator\n\t\t\t\tare converted to strings at need. A typical example is to compose a\n\t\t\t\tsentence from words (with a single space as a separator):\n\t\t\t\t<tscript>\n\t\t\t\t\tprint(String.join(["Hello", "World"], " ")); # prints "Hello World"\n\t\t\t\t</tscript>\n\t\t\t\tAnother example is the composition of a path from components:\n\t\t\t\t<tscript>\n\t\t\t\t\tprint(String.join(["documents", "computer", "bill.pdf"], "/")); # prints "documents/computer/bill.pdf"\n\t\t\t\t</tscript>\n\t\t\t</td></tr>\n\t\t\t</table>\n\t\t',children:[]},{id:"array",name:"Array",title:"The Type <i>Array</i>",content:'\n\t\t\t<p>\n\t\t\tThe type Array is a container capable of holding multiple values,\n\t\t\tcalled items of the array. Items are arranged in a sequence. They\n\t\t\tare accessed by integer-valued indices. Arrays are mutable: items\n\t\t\tcan be inserted, deleted, and overwritten. Arrays can be created\n\t\t\tas <a href="?doc=/language/expressions/literals/arrays">literals</a>.\n\t\t\tThese literals can contain arbitrary expressions (not necessarily\n\t\t\tliterals), which evaluate to the items.\n\t\t\t</p>\n\n\t\t\t<h2>Indexing</h2>\n\t\t\t<p>\n\t\t\tAn array with <i>n</i> items has size <i>n</i>. The items are accessed with\n\t\t\t<a target="_blank" href="https://en.wikipedia.org/wiki/Zero-based_numbering#Computer_programming">zero-based indices</a>\n\t\t\tin the range 0 to <i>n-1</i>.\n\t\t\t</p>\n\n\t\t\t<h2>Operations</h2>\n\t\t\t<table class="methods">\n\t\t\t<tr><th>item&nbsp;access&nbsp;[]</th><td>\n\t\t\t\tIf the index is of type Integer then the single item at the\n\t\t\t\tspecified (zero-based) position is returned. The position must be\n\t\t\t\tvalid, i.e., it must neither be negative nor exceed the size of\n\t\t\t\tthe array.\n\t\t\t\tIf the index is of type Range then the sub-array described by the\n\t\t\t\trange is extracted. Parts of the range that lie outside the valid\n\t\t\t\tindex range are ignored.\n\t\t\t</td></tr>\n\t\t\t</table>\n\t\t\t<p>\n\t\t\tArrays can be\n\t\t\t<a href="?doc=/language/expressions/binary-operators/equality">compared for equality</a>\n\t\t\tand they are <a href="?doc=/language/expressions/binary-operators/order">ordered</a>,\n\t\t\tif all of their items are ordered.\n\t\t\tArrays are equal if they have the same length and all items compare\n\t\t\tequal. They are ordered lexicographically. Ordering two array with\n\t\t\titems that are not ordered results in an error message.\n\t\t\t</p>\n\n\t\t\t<h2>Methods</h2>\n\t\t\t<table class="methods">\n\t\t\t<tr><th>constructor</th><td>\n\t\t\t\t<code class="code">constructor(size_or_other=0, value=null)</code>\n\t\t\t\tcreates a new array. If <i>size_or_other</i> is an integer then the\n\t\t\t\tarray contains <i>size_or_other</i> copies of <i>value</i>.\n\t\t\t\tIf <i>size_or_other</i> is an array then the array is copied.\n\t\t\t\tif <i>size_or_other</i> is a range then an array is created\n\t\t\t\tthat contains the elements are the range as items.\n\t\t\t</td></tr>\n\t\t\t<tr><th>size</th><td>\n\t\t\t\tThe <code class="code">function size()</code> returns the size of\n\t\t\t\tthe array, which is the number of items.\n\t\t\t</td></tr>\n\t\t\t<tr><th>slice</th><td>\n\t\t\t\tThe <code class="code">function slice(start, end)</code> returns the content of the given range in the array.\n\t\t\t</td></tr>\n\t\t\t<tr><th>push</th><td>\n\t\t\t\tThe <code class="code">function push(item)</code> appends the\n\t\t\t\tgiven item to the array.\n\t\t\t</td></tr>\n\t\t\t<tr><th>pop</th><td>\n\t\t\t\tThe <code class="code">function pop()</code> removes and returns\n\t\t\t\tthe last item from the array. When applied to the empty array it\n\t\t\t\traises an error.\n\t\t\t</td></tr>\n\t\t\t<tr><th>insert</th><td>\n\t\t\t\tThe <code class="code">function insert(position, item)</code>\n\t\t\t\tinserts a new item at a given position. The index must be\n\t\t\t\tnon-negative and it must not exceed the array size.\n\t\t\t</td></tr>\n\t\t\t<tr><th>remove</th><td>\n\t\t\t\tThe <code class="code">function remove(range)</code> removes\n\t\t\t\tthe indicated range of items from the array. If range is an\n\t\t\t\tinteger, then it is interpreted as range:range+1.\n\t\t\t</td></tr>\n\t\t\t<tr><th>sort</th><td>\n\t\t\t\tThe <code class="code">function sort(comparator=null)</code>\n\t\t\t\tsorts the array in-place. Sorting is stable, i.e., the order of\n\t\t\t\tequivalent items is preserved. If <i>comparator</i> equals\n\t\t\t\t<keyword>null</keyword> then the built-in\n\t\t\t\t<a href="?doc=/language/expressions/binary-operators/order">order\n\t\t\t\trelation</a> is used for sorting, which means that all items\n\t\t\t\tin the array must be ordered. Otherwise <i>comparator</i> is\n\t\t\t\tassumed to be a function of two arguments (denoted lhs and rhs)\n\t\t\t\tthat returns a numeric value. A negative return value means that\n\t\t\t\t<i>lhs</i> should appear before <i>rhs</i>, a positive return\n\t\t\t\tvalue means <i>lhs</i> should appear after <i>rhs</i>, and zero\n\t\t\t\tindicates that the order does not matter, i.e., <i>lhs</i> and\n\t\t\t\t<i>rhs</i> are equivalent with respect to the order relation.\n\t\t\t\tThe <i>compare</i> function is assumed to induce a\n\t\t\t\t<a target="_blank" href="https://en.wikipedia.org/wiki/Weak_ordering#Strict_weak_orderings">strict weak order relation</a>.\n\t\t\t\tIf this assumption is not fulfilled then there is no guarantee\n\t\t\t\tthat the function will manage to sort the array.\n\t\t\t</td></tr>\n\t\t\t<tr><th>keys</th><td>\n\t\t\t\tThe <code class="code">function keys()</code> returns the\n\t\t\t\trange <code class="code">0:size()</code>. Its main purpose is\n\t\t\t\tcompatibility with\n\t\t\t\t<a href="?doc=/language/types/dictionary">Dictionary.keys</a>.\n\t\t\t</td></tr>\n\t\t\t<tr><th>values</th><td>\n\t\t\t\tThe <code class="code">function values()</code> returns the\n\t\t\t\tarray itself. Its main purpose is compatibility with\n\t\t\t\t<a href="?doc=/language/types/dictionary">Dictionary.values</a>.\n\t\t\t</td></tr>\n\t\t\t<tr><th>concat</th><td>\n\t\t\t\t<code class="code">static function concat(first, second)</code>\n\t\t\t\tconcatenates two arrays. It returns the concatenated array.\n\t\t\t</td></tr>\n\t\t\t</table>\n\n            <div class="example">\n            <h3>Example</h3>\n            <tscript>\nvar arr = [2, 3, 1, 4, 5, 7, 6, 8, 9];\n\nfunction ascending(a, b) {\n    if a<=b then return -1; else return 1;\n}\n\nfunction descending(a, b) {\n    if a<=b then return 1; else return -1;\n}\n\narr.sort();\nprint(arr);                                     # prints [1, 2, 3, 4, 5, 6, 7, 8, 9]\n\narr.sort(descending);\nprint(arr);                                     # prints [9, 8, 7, 6, 5, 4, 3, 2, 1]\n\narr.sort(ascending);\nprint(arr);                                     # prints [1, 2, 3, 4, 5, 6, 7, 8, 9]\n            </tscript>\n        </div>\n\t\t',children:[]},{id:"dictionary",name:"Dictionary",title:"The Type <i>Dictionary</i>",content:'\n\t\t\t<p>\n\t\t\tThe type Dictionary is a container capable of holding multiple\n\t\t\tvalues, called items of the dictionary. Items are accessed with\n\t\t\tstring-valued keys. Dictionaries are mutable: items can be inserted,\n\t\t\tdeleted, and overwritten. Dictionaries can be created as\n\t\t\t<a href="?doc=/language/expressions/literals/dictionaries">literals</a>.\n\t\t\tThese literals can contain arbitrary expressions (not necessarily\n\t\t\tliterals), which evaluate to the items.\n\t\t\t</p>\n\n\t\t\t<h2>Indexing</h2>\n\t\t\t<p>\n\t\t\tA dictionary with <i>n</i> items has size <i>n</i>. The items are\n\t\t\taccessed with keys. Any two different strings form two different\n\t\t\tkeys, which can refer to different items. The empty string is a\n\t\t\tlegal key. Of course, not every possible string refers to an item,\n\t\t\tbut only keys that were explicitly defined.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tConceptually, keys in a dictionary are not ordered. In particular,\n\t\t\tthe lexicographical order of strings does not apply. Instead, the\n\t\t\t<code class="code">keys()</code> and <code class="code">values()</code>\n\t\t\tmethods report items chronologically, i.e., in the order they were\n\t\t\tinserted. This order also applies when converting a dictionary to\n\t\t\ta string.\n\t\t\t</p>\n\n\t\t\t<h2>Operations</h2>\n\t\t\t<table class="methods">\n\t\t\t<tr><th>item&nbsp;access&nbsp;[]</th><td>\n\t\t\t\tThe index is expected to be of type string. The string must be\n\t\t\t\ta valid key, i.e., an item with that key must have been defined\n\t\t\t\tbefore. The operator returns the value stored with the key.\n\t\t\t</td></tr>\n\t\t\t</table>\n\t\t\t<p>\n\t\t\tDictionaries can be\n\t\t\t<a href="?doc=/language/expressions/binary-operators/equality">compared for equality</a>,\n\t\t\tbut they are not <a href="?doc=/language/expressions/binary-operators/order">ordered</a>.\n\t\t\tTwo dictionaries compare equal if they contain the same keys, and if\n\t\t\tthe items associated with these keys compare equal.\n\t\t\t</p>\n\n\t\t\t<h2>Methods</h2>\n\t\t\t<table class="methods">\n\t\t\t<tr><th>constructor</th><td>\n\t\t\t\t<code class="code">constructor(other=null)</code>\n\t\t\t\tcreates a new dictionary. If <i>other</i> is null then the\n\t\t\t\tdictionary is empty. If <i>other</i> is a dictionary then it\n\t\t\t\tis copied.\n\t\t\t</td></tr>\n\t\t\t<tr><th>size</th><td>\n\t\t\t\tThe <code class="code">function size()</code> returns the size of\n\t\t\t\tthe dictionary, which is the number of items.\n\t\t\t</td></tr>\n\t\t\t<tr><th>has</th><td>\n\t\t\t\tThe <code class="code">function has(key)</code> tests whether\n\t\t\t\t<i>key</i> is the key of an item.\n\t\t\t</td></tr>\n\t\t\t<tr><th>remove</th><td>\n\t\t\t\tThe <code class="code">function remove(key)</code> removes the\n\t\t\t\titem with the given key.\n\t\t\t</td></tr>\n\t\t\t<tr><th>keys</th><td>\n\t\t\t\tThe <code class="code">function keys()</code> returns an array\n\t\t\t\tof strings holding all keys of the dictionary. This method\n\t\t\t\tprovides an easy way of iterating over all items of a dictionary:\n\t\t\t\t<tscript>\n\t\t\t\t\tvar d = {a: 6, b: "foo", c: true};\n\t\t\t\t\tfor var key in d.keys() do\n\t\t\t\t\t\tprint(key + ": " + d[key]);\n\t\t\t\t</tscript>\n\t\t\t</td></tr>\n\t\t\t<tr><th>values</th><td>\n\t\t\t\tThe <code class="code">function values()</code> returns an array\n\t\t\t\tholding all values of the dictionary. The order of the values\n\t\t\t\tis the same as the order of keys returned by\n\t\t\t\t<code class="code">function keys()</code>.\n\t\t\t</td></tr>\n\t\t\t<tr><th>merge</th><td>\n\t\t\t\t<code class="code">static function merge(first, second)</code>\n\t\t\t\tmerges two dictionaries, i.e., it joins the key/value pairs from\n\t\t\t\tboth dictionaries into a single dictionary. If a key appears in\n\t\t\t\tboth dictionaries then the value from the second one prevails.\n\t\t\t\tThe function returns the merged dictionary.\n\t\t\t</td></tr>\n\t\t\t</table>\n\t\t\t</table>\n\n            <div class="example">\n            <h3>Example</h3>\n            <tscript>\nvar dict1 = {a: 1, b: 1};\nvar dict2 = {b: 2, c: 2};\n\nprint(Dictionary.merge(dict1, dict2));      # prints {a:1,b:2,c:2}\n            </tscript>\n        </div>\n\t\t',children:[]},{id:"function",name:"Function",title:"The Type <i>Function</i>",content:'\n\t\t\t<p>\n\t\t\tThe Function type represents\n\t\t\t<a href="?doc=/language/declarations/functions">function declarations</a>,\n\t\t\t<a href="?doc=/language/declarations/classes">member function\n\t\t\tdeclarations</a> applied to an object, and\n\t\t\t<a href="?doc=/language/expressions/literals/anonymous-functions">anonymous\n\t\t\tfunctions</a>, possibly with enclosed parameters. This summarizes\n\t\t\tall blocks of code that can be\n\t\t\t<a href="?doc=/language/expressions/function-calls">called or invoked</a>\n\t\t\tby providing parameters in parentheses.\n\t\t\tFunctions are immutable. The only operation they provide is the call\n\t\t\toperator.\n\t\t\t</p>\n\n\t\t\t<h2>Operations</h2>\n\t\t\t<table class="methods">\n\t\t\t<tr><th>function&nbsp;call&nbsp;()</th><td>\n\t\t\t\tCalls the function. See\n\t\t\t\t<a href="?doc=/language/expressions/function-calls">function calls</a>\n\t\t\t\tfor details.\n\t\t\t</td></tr>\n\t\t\t</table>\n\t\t\t<p>\n\t\t\tFunctions can be\n\t\t\t<a href="?doc=/language/expressions/binary-operators/equality">compared for equality</a>,\n\t\t\tbut they are not <a href="?doc=/language/expressions/binary-operators/order">ordered</a>.\n\t\t\t</p>\n\n\t\t\t<h2>Methods</h2>\n\t\t\t<table class="methods">\n\t\t\t<tr><th>constructor</th><td>\n\t\t\t\tThe <code class="code">constructor(value)</code> creates a copy\n\t\t\t\tof a function value.\n\t\t\t</td></tr>\n\t\t\t</table>\n\t\t',children:[]},{id:"range",name:"Range",title:"The Type <i>Range</i>",content:'\n\t\t\t<p>\n\t\t\tThe Range type represents a range of integers. It is defined by\n\t\t\ttwo integers, <i>begin</i> and <i>end</i>. They define the half-open\n\t\t\trange\n\t\t\t</p>\n\t\t\t<div style="width: 100%; text-align: center; font-style: italic;">\n\t\t\t\t{n&nbsp;&isin;&nbsp;&#x2124;&nbsp;|&nbsp;begin&nbsp;&le;&nbsp;x&nbsp;&lt;&nbsp;end}.\n\t\t\t</div>\n\t\t\t<p>\n\t\t\tConsequently, in case\n\t\t\tof <i>begin&nbsp;&ge;&nbsp;end</i> the range is empty. Begin and end\n\t\t\tcan be any values in the valid <a href="?doc=/language/types/integer">integer</a>\n\t\t\trange; in particular, they can be negative.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tA range can be\n\t\t\tconstructed with the range constructor or with the\n\t\t\t<a href="?doc=/language/expressions/binary-operators/range">range operator&nbsp;:</a>.\n\t\t\tThe two options are equivalent:\n\t\t\t<tscript>\n\t\t\t\tvar r1 = Range(10, 15);\n\t\t\t\tvar r2 = 10:15;\n\t\t\t\tprint(r1 == r2);   # prints true\n\t\t\t</tscript>\n\t\t\tOnce constructed, a range is immutable.\n\t\t\t</p>\n\n\t\t\t<h2>Operations</h2>\n\t\t\t<p>\n\t\t\tRanges offer two rather trivial operations, both by means of the\n\t\t\t<a href="?doc=/language/expressions/item-access">item access operator</a>,\n\t\t\tnamely access to items by index, and slicing. The behavior is designed\n\t\t\tto mimic that of an array holding the elements of the range as items:\n\t\t\t<tscript>\n\t\t\t\tvar range = 10:15;   # pretend: var range = [10,11,12,13,14];\n\t\t\t\tprint(range[3]);     # prints 13\n\t\t\t\tprint(range[-2:2]);  # prints 10:12\n\t\t\t</tscript>\n\t\t\tItem access with an integer index requires that the index is valid,\n\t\t\ti.e., it is non-negative and less than the size of the range, which\n\t\t\tis defined as max(<i>end-begin</i>,&nbsp;0). Slicing access with another\n\t\t\trange does not require all indices to be valid, and the resulting range\n\t\t\tis clipped to the valid range.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tTwo ranges compare equal if and\n\t\t\tonly if begin and end coincide. This means that two empty ranges with\n\t\t\tdifferent begin and end do not compare equal, although they represent the\n\t\t\tsame (empty) set of integers. Ranges are not ordered.\n\t\t\t</p>\n\n\t\t\t<h2>Methods</h2>\n\t\t\t<table class="methods">\n\t\t\t<tr><th>constructor</th><td>\n\t\t\t\tThe <code class="code">constructor(begin, end)</code> creates a\n\t\t\t\tnew range from begin to end. Both arguments must be integers, or\n\t\t\t\treals representing integer values.\n\t\t\t</td></tr>\n\t\t\t<tr><th>size</th><td>\n\t\t\t\t<code class="code">function size()</code> returns the size of\n\t\t\t\tthe range. In order to avoid overflow for very large ranges the\n\t\t\t\treturn value is of type <code>Real</code>, although it is always\n\t\t\t\ta non-negative integer.\n\t\t\t</td></tr>\n\t\t\t<tr><th>begin</th><td>\n\t\t\t\t<code class="code">function begin()</code> returns the begin of\n\t\t\t\tthe range.\n\t\t\t</td></tr>\n\t\t\t<tr><th>end</th><td>\n\t\t\t\t<code class="code">function end()</code> returns the end of\n\t\t\t\tthe range.\n\t\t\t</td></tr>\n\t\t\t</table>\n\t\t',children:[]},{id:"type",name:"Type",title:"The Type <i>Type</i>",content:'\n\t\t\t<p>\n\t\t\tThe values of type Type represent types, i.e., built-in types and\n\t\t\tclasses. They are immutable. A type value can be constructed from\n\t\t\tany value.\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\t\tvar a = [];\n\t\t\t\t\tvar t = Type(a);\n\t\t\t\t\tprint(t);       # &lt;Type Array&gt;\n\t\t\t\t\tprint(Array);   # &lt;Type Array&gt;\n\t\t\t\t\tif t == Array then print("a is an array");\n\n\t\t\t\t\tvar tt = Type(t);\n\t\t\t\t\tprint(tt);      # &lt;Type Type&gt;\n\t\t\t\t\tvar ttt = Type(tt);\n\t\t\t\t\tprint(ttt);     # &lt;Type Type&gt;\n\n\t\t\t\t\tvar b = t(3:8); # construct a new Array from a range using "t"\n\t\t\t\t\tprint(b);       # [3,4,5,6,7]\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t\t<p>\n\t\t\tType values are useful for three purposes:\n\t\t\t<ol>\n\t\t\t<li>\n\t\t\t\tTesting at runtime whether a value is of a specific type.\n\t\t\t\tFor example, this allows to test whether a number is an\n\t\t\t\tinteger or a real, and hence for determining whether\n\t\t\t\t<a href="?doc=/language/types/integer">integer</a> or\n\t\t\t\t<a href="?doc=/language/types/real">floating point</a> arithmetic\n\t\t\t\tis used when applying an operator.\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\tConstructing new objects of a type determined at runtime,\n\t\t\t\te.g., in a factory pattern.\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\tType values can access static members of classes:\n\t\t\t\t<tscript>\n\t\t\t\t\tclass A\n\t\t\t\t\t{\n\t\t\t\t\tpublic:\n\t\t\t\t\t\tstatic var s = 18;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar a = A();\n\t\t\t\t\tvar t = Type(a);\n\t\t\t\t\tprint(a.s);   # prints 18\n\t\t\t\t\tprint(t.s);   # prints 18\n\t\t\t\t</tscript>\n\t\t\t</li>\n\t\t\t</ol>\n\t\t\t</p>\n\n\t\t\t<h2>Operations</h2>\n\t\t\t<p>\n\t\t\tType values do not offer any operations other than the function call\n\t\t\toperator, which invokes the constructor of the type, and the member\n\t\t\taccess operator, which accesses static members of the class.\n\t\t\tTwo type values compare equal if they refer to the same type. Types\n\t\t\tare not ordered.\n\t\t\t</p>\n\n\t\t\t<h2>Methods</h2>\n\t\t\t<table class="methods">\n\t\t\t<tr><th>constructor</th><td>\n\t\t\t\tThe <code class="code">constructor(value)</code> creates a new\n\t\t\t\ttype object. It describes the type of <i>value</i>.\n\t\t\t</td></tr>\n\t\t\t<tr><th>superclass</th><td>\n\t\t\t\t<code class="code">static function superclass(type)</code>\n\t\t\t\treturns a type object representing the direct super class of\n\t\t\t\tthe given <i>type</i>, or null if the it does not have a super\n\t\t\t\tclass.\n\t\t\t</td></tr>\n\t\t\t<tr><th>isOfType</th><td>\n\t\t\t\t<code class="code">static function isOfType(value, type)</code>\n\t\t\t\ttests whether <i>value</i> is of type <i>type</i> or a derived\n\t\t\t\tclass. This test is equivalent to\n\t\t\t\t<code class="code">Type.isDerivedFrom(Type(value), type)</code>.\n\t\t\t</td></tr>\n\t\t\t<tr><th>isDerivedFrom</th><td>\n\t\t\t\t<code class="code">static function isDerivedFrom(subclass, superclass)</code>\n\t\t\t\ttests whether <i>subclass</i> inherits <i>superclass</i> as a direct\n\t\t\t\tor indirect base (including the case that the types coincide).\n\t\t\t</td></tr>\n\t\t\t</table>\n\t\t',children:[]},{id:"class",name:"Classes",title:"Classes",content:'\n\t\t\t<p>\n\t\t\tA Class is a user-defined type. It is created through a\n\t\t\t<a href="?doc=/language/declarations/classes">class declaration</a>;\n\t\t\tthe technical aspects of class declarations are discussed right\n\t\t\tthere.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tClasses allow the programmer to extend the\n\t\t\t<a href="?doc=/language/types">system of built-in types</a>. They open\n\t\t\tup the whole world of\n\t\t\t<a target="_blank" href="https://en.wikipedia.org/wiki/Object-oriented_programming">object-oriented programming</a>,\n\t\t\ta programming paradigm in which data and functionality is organized\n\t\t\tinto objects, which are instances of classes. Objects organize data\n\t\t\tinto semantically meaningful units. Classes bind functions operating\n\t\t\ton these chunks to the corresponding object. Classes define a public\n\t\t\t(possibly a protected) interface, defining the functionality. The\n\t\t\timplementation of the functionality is opaque to the user of a class\n\t\t\tor object, and hence allows the implementer to modify implementation\n\t\t\tdetails without affecting the outside world. This principle is known\n\t\t\tas "encapsulation" or "information hiding". Furthermore, classes can\n\t\t\textend existing types through (single) inheritance.\n\t\t\t</p>\n\n\t\t\t<h2>Demonstration of Class Features</h2>\n\t\t\t<p>\n\t\t\tThe following is a non-trivial example of a (rather minimal) class\n\t\t\trepresenting a date.\n\t\t\t</p>\n\t\t\t<tscript>\n\t\t\t\t# The Date class represents a date as the number of days since\n\t\t\t\t# 01.01.1970. The range is limited to years 1970 to 2099, for\n\t\t\t\t# ease of leap year handling. Objects store this value in an\n\t\t\t\t# integer, not in a member variable, but by inheriting type\n\t\t\t\t# Integer. In an object oriented view this means that a Date\n\t\t\t\t# *is* an integer. This design makes the integer operators\n\t\t\t\t# for arithmetics and comparison available for dates. The\n\t\t\t\t# class is based on the Gregorian calendar, and the date\n\t\t\t\t# format is European: "day.month.year", not "year, month day".\n\t\t\t\tclass Date : Integer\n\t\t\t\t{\n\t\t\t\tprivate:\n\t\t\t\t\tstatic var month_start = [0, 31, 59, 90, 120, 151,\n\t\t\t\t\t        181, 212, 243, 273, 304, 334, 365];\n\t\t\t\t\tstatic var weekdays = ["Monday", "Tuesday", "Wednesday",\n\t\t\t\t\t\t\t"Thursday", "Friday", "Saturday", "Sunday"];\n\n\t\t\t\tpublic:\n\t\t\t\t\t# construct a date from the number of days since 1.1.1970\n\t\t\t\t\tconstructor(daysSince1970) : super(daysSince1970)\n\t\t\t\t\t{ assert(daysSince1970 >= 0, "invalid date"); }\n\n\t\t\t\t\t# construct a date from day, month, and year\n\t\t\t\t\tstatic function fromDMY(day, month, year)\n\t\t\t\t\t{\n\t\t\t\t\t\tassert(Type(year) == Integer, "invalid date");\n\t\t\t\t\t\tassert(Type(month) == Integer, "invalid date");\n\t\t\t\t\t\tassert(Type(day) == Integer, "invalid date");\n\t\t\t\t\t\tassert(year >= 1970 and year < 2100, "invalid date");\n\t\t\t\t\t\tassert(month >= 1 and month <= 12, "invalid date");\n\t\t\t\t\t\tvar leapyears = (year - 1 - 1968) // 4;\n\t\t\t\t\t\tvar leapyear = year % 4 == 0;\n\t\t\t\t\t\tvar mlen = month_start[month] - month_start[month - 1];\n\t\t\t\t\t\tif month == 2 and leapyear then mlen += 1;\n\t\t\t\t\t\tassert(day >= 1 and day <= mlen, "invalid date");\n\n\t\t\t\t\t\tvar x = 365 * (year - 1970) + leapyears\n\t\t\t\t\t\t          + month_start[month - 1] + (day - 1);\n\t\t\t\t\t\tif leapyear and month > 2 then x += 1;\n\t\t\t\t\t\treturn Date(x);\n\t\t\t\t\t}\n\n\t\t\t\t\t# return the date x days later\n\t\t\t\t\tfunction advance(x)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn Date(this + x);\n\t\t\t\t\t}\n\n\t\t\t\t\t# return the year component of the date\n\t\t\t\t\tfunction year()\n\t\t\t\t\t{\n\t\t\t\t\t\treturn Integer((this + 0.5) / 365.25) + 1970;\n\t\t\t\t\t}\n\n\t\t\t\t\t# return the month component of the date\n\t\t\t\t\tfunction month()\n\t\t\t\t\t{\n\t\t\t\t\t\tvar y = year();\n\t\t\t\t\t\tvar r;\n\t\t\t\t\t\tif this < 2*365 then r = (this % 365);\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tr = Integer((this - 2*365) % 365.25);\n\t\t\t\t\t\t\tif y % 4 == 0 and r >= 31 + 28 then r -= 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor var i in 0:12 do\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar m = 11 - i;\n\t\t\t\t\t\t\tif r >= month_start[m] then return m + 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t# return the day component of the date\n\t\t\t\t\tfunction day()\n\t\t\t\t\t{\n\t\t\t\t\t\tvar y = year();\n\t\t\t\t\t\tvar r, feb29 = 0;\n\t\t\t\t\t\tif this < 2*365 then r = (this % 365);\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tr = Integer((this - 2*365) % 365.25);\n\t\t\t\t\t\t\tif y % 4 == 0 then\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif r == 59 then feb29 = 1;\n\t\t\t\t\t\t\t\tif r >= 59 then r -= 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor var i in 0:12 do\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar m = 11 - i;\n\t\t\t\t\t\t\tif r >= month_start[m] then\n\t\t\t\t\t\t\t\treturn r - month_start[m] + 1 + feb29;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t# return the day-of-week as a string\n\t\t\t\t\tfunction dayOfWeek()\n\t\t\t\t\t{\n\t\t\t\t\t\treturn weekdays[(this + 3) % 7];\n\t\t\t\t\t}\n\n\t\t\t\t\t# return a nice string representation of the date\n\t\t\t\t\tfunction prettyString()\n\t\t\t\t\t{\n\t\t\t\t\t\treturn dayOfWeek() + ", " + day()\n\t\t\t\t\t\t                    + "." + month()\n\t\t\t\t\t\t                    + "." + year();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t# construct various dates\n\t\t\t\tvar daysSince1970 = Integer(time() // 86400000);\n\t\t\t\tvar today = Date(daysSince1970);\n\t\t\t\tvar release = Date.fromDMY(version()["day"],\n\t\t\t\t                           version()["month"],\n\t\t\t\t                           version()["year"]);\n\t\t\t\tvar ch = Date.fromDMY(24, 12, 1990);\n\t\t\t\tvar ny = ch.advance(8);\n\n\t\t\t\t# operations on dates\n\t\t\t\tprint("Days since TScript release: " + (today - release));\n\t\t\t\tif release > ny then print("TScript was released after 1990.");\n\n\t\t\t\t# date methods\n\t\t\t\tprint("Christmas day 1990 was " + ch.dayOfWeek() + ", "\n\t\t\t\t\t\t+ ch.day() + "."\n\t\t\t\t\t\t+ ch.month() + "."\n\t\t\t\t\t\t+ ch.year());\n\t\t\t\tprint("Newyear\'s day 1991 was " + ny.prettyString());\n\t\t\t</tscript>\n\t\t',children:[]}]}]}},9919:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.doc_legal=void 0,e.doc_legal={id:"legal",name:"Legal Information",title:"Legal Information",content:'\n\t<p>\n\tThis is the reference implementation of the TScript programming language.\n\tThe software/website is provided under an\n\t<a target="_blank" href="https://en.wikipedia.org/wiki/MIT_License">MIT license</a>.\n\t</p>\n\n\t<h2>License</h2>\n\t<p>\n\tCopyright (C) by Tobias Glasmachers.\n\t</p>\n\t<p>\n\tPermission is hereby granted, free of charge, to any person obtaining a copy\n\tof this software and associated documentation files (the "Software"), to deal\n\tin the Software without restriction, including without limitation the rights\n\tto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n\tcopies of the Software, and to permit persons to whom the Software is\n\tfurnished to do so, subject to the following conditions:\n\t</p>\n\t<p>\n\tThe above copyright notice and this permission notice shall be included in\n\tall copies or substantial portions of the Software.\n\t</p>\n\t<p>\n\tTHE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n\tIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n\tFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n\tAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n\tLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n\tOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n\tTHE SOFTWARE.\n\t</p>\n\n\t<h2>Acknowledgments</h2>\n\t<p>\n\tThe TScript IDE uses the following library:\n\t<ul>\n\t\t<li>\n\t\t\tThe <a target="_blank" href="http://interactjs.io/">interact</a>\n\t\t\tlibrary is used under an\n\t\t\t<a target="_blank" href="https://github.com/taye/interact.js/blob/master/LICENSE">MIT license</a>.\n\t\t</li>\n\t</ul>\n\tThanks to <a href="https://github.com/manuel-fischer">Manuel Fischer</a>,\n\t<a href="https://github.com/TheHllm">The Hllm</a>,\n\t<a href="https://github.com/Jartreg">Jartreg</a>,\n\tand\n\t<a href="https://github.com/duckmopsi">duckmopsi</a>\n\tfor contributions.\n\t</p>\n',children:[]}},3193:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.doc_stdlib=void 0,e.doc_stdlib={id:"library",name:"The TScript Standard Library",title:"Reference Documentation for the TScript Standard Library",content:"\n\t<p>\n\tThis is the reference documentation of the TScript standard library.\n\tIts core consists of a hand full of general utility functions and a set\n\tof standard mathematical functions. Further parts of the library cover\n\tturtle and canvas graphics, as well as sound output.\n\t</p>\n",children:[{id:"core",name:"Core Functions",title:"Core Functions",content:'\n\t\t<p>\n\t\tThe functions described in this section perform essential core tasks.\n\t\tInstead of being library functions, they could equally well be\n\t\timplemented as language features.\n\t\t</p>\n\t\t<table class="methods">\n\t\t<tr><th>terminate</th><td>\n\t\t\tThe <code class="code">function terminate()</code> immediately\n\t\t\tterminates the program. This is considered &quot;normal&quot;\n\t\t\ttermination, in contrast to termination due to an error.\n\t\t</td></tr>\n\t\t<tr><th>assert</th><td>\n\t\t\tThe <code class="code">function assert(condition, message)</code>\n\t\t\ttests whether <i>condition</i> evaluates to false. In that case it\n\t\t\tstops the program and emits <i>message</i> as an error message.\n\t\t\tThis function should be used to verify that invariants of the\n\t\t\tprogram are fulfilled. Ideally, an assertion should never fail,\n\t\t\tand if it does then it indicates a bug. Assertions should not be\n\t\t\tused to check user input or other error conditions. An exception\n\t\t\tshould be thrown in that case.\n\t\t</td></tr>\n\t\t<tr><th>error</th><td>\n\t\t\tThe <code class="code">function error(message)</code>\n\t\t\tstops the program and emits <i>message</i> as an error message.\n\t\t\tThis function should be used to report unrecoverable errors. As\n\t\t\tsuch, errors have a different role than exceptions, which should\n\t\t\tindicate recoverable errors.\n\t\t</td></tr>\n\t\t<tr><th>same</th><td>\n\t\t\tThe <code class="code">function same(first, second)</code> tests\n\t\t\twhether its arguments refer to the same object.\n\t\t\t<div class="example">\n\t\t\t<h3>Example</h3>\n\t\t\t<tscript>\nvar a = [1, 2, 3];\nvar b = a;\nvar c = deepcopy(a);\nvar d = [1, 2, 3];\n\nprint(same(a, b));\t  # prints true;\nprint(same(a, c));\t  # prints false;\nprint(same(a, d));\t  # prints false;\nprint(same(a, 1));\t  # prints false;\n\t\t\t</tscript>\n\t\t</div>\n\t\t</td></tr>\n\t\t<tr><th>version</th><td>\n\t\t\tThe <code class="code">function version()</code> returns a\n\t\t\tdictionary describing the current TScript version. The\n\t\t\treturned dictionary holds the following fields:\n\t\t\t<ul>\n\t\t\t<li>type: release type (string)</li>\n\t\t\t<li>major: first and most significant part of the version number</li>\n\t\t\t<li>minor: middle part of the version number</li>\n\t\t\t<li>patch: last and least significant part of the version number</li>\n\t\t\t<li>day: day of the release date</li>\n\t\t\t<li>month: month of the release date</li>\n\t\t\t<li>year: year of the release date</li>\n\t\t\t<li>full: human-readable version string</li>\n\t\t\t</ul>\n\t\t</td></tr>\n\t\t<tr><th>print</th><td>\n\t\t\tThe <code class="code">function print(text)</code> outputs its\n\t\t\targument as a new line into the message area. For this purpose,\n\t\t\tthe argument is converted to a string.\n\t\t</td></tr>\n\t\t<tr><th>alert</th><td>\n\t\t\tThe <code class="code">function alert(text)</code> opens a modal\n\t\t\tmessage box presenting the text to the user. For this purpose,\n\t\t\tthe argument is converted to a string. The program continues\n\t\t\tafter the user has closed the message box.\n\t\t</td></tr>\n\t\t<tr><th>confirm</th><td>\n\t\t\tThe <code class="code">function confirm(text)</code> opens a\n\t\t\tmodal message box presenting the text to the user. For this\n\t\t\tpurpose, the argument is converted to a string. The user can\n\t\t\teither confirm or cancel the dialog, resulting in a return\n\t\t\tvalue of <code class="code">true</code> or\n\t\t\t<code class="code">false</code>, respectively. The program\n\t\t\tcontinues after the user has processed the message box.\n\t\t\t<div class="example">\n\t\t\t<h3>Example</h3>\n\t\t\t<tscript>\nvar confirmed = confirm("Print Hello World?");\n\nif confirmed then print("Hello World");\t\t # if user confirms, the program prints "Hello World", else nothing\n\t\t\t</tscript>\n\t\t</div>\n\t\t</td></tr>\n\t\t<tr><th>prompt</th><td>\n\t\t\tThe <code class="code">function prompt(text)</code> opens a\n\t\t\tmodal message box presenting the text to the user. For this\n\t\t\tpurpose, the argument is converted to a string. The user can\n\t\t\tinput a string in response, which is returned by the function.\n\t\t\tThe program continues after the user has processed the message\n\t\t\tbox.\n\t\t\t<div class="example">\n\t\t\t<h3>Example</h3>\n\t\t\t<tscript>\nvar s = prompt("Tell me what to print");\n\nif not s == null then print(s);\t\t\t\t\t\t\t\t\t   # prints the input given by the user\nelse print("process was terminated by user");\t\t\t\t\t\t # if process is terminated without input given, it tells the user\n\t\t\t</tscript>\n\t\t</div>\n\t\t</td></tr>\n\t\t<tr><th>wait</th><td>\n\t\t\tThe <code class="code">function wait(ms)</code> delays program\n\t\t\texecution for <i>ms</i> milliseconds.\n\t\t</td></tr>\n\t\t<tr><th>time</th><td>\n\t\t\tThe <code class="code">function time()</code> returns the number\n\t\t\tof milliseconds since midnight 01.01.1970\n\t\t\t<a target="_blank" href="https://en.wikipedia.org/wiki/Coordinated_Universal_Time">UTC</a>\n\t\t\tas a real.\n\t\t</td></tr>\n\t\t<tr><th>localtime</th><td>\n\t\t\tThe <code class="code">function localtime()</code> returns the number\n\t\t\tof milliseconds since midnight 01.01.1970\n\t\t\tas a real. The value refers to local time, i.e., taking the\n\t\t\tlocal time zone and daylight saving time into account.\n\t\t</td></tr>\n\t\t<tr><th>exists</th><td>\n\t\t\tThe <code class="code">function exists(key)</code> returns\n\t\t\t<keyword>true</keyword> if a value was stored with the given\n\t\t\tkey, and <keyword>false</keyword> otherwise. This is analogous\n\t\t\tto checking whether a file exists in the file system.\n\t\t</td></tr>\n\t\t<tr><th>load</th><td>\n\t\t\tThe <code class="code">function load(key)</code> returns the\n\t\t\tvalue that was stored with the given key. If the key does\n\t\t\tnot exist then the function reports an error. This is\n\t\t\tanalogous to loading data from a file into memory.\n\t\t</td></tr>\n\t\t<tr><th>save</th><td>\n\t\t\tThe <code class="code">function save(key, value)</code> stores\n\t\t\tthe value with the given key to a persistent storage. The\n\t\t\tstored value remains stored even after the program terminates.\n\t\t\tIt can be loaded at any later time, even by a different program.\n\t\t\tThis is analogous to storing data in a file. The stored data is\n\t\t\trestricted to JSON format. This means that the value must be of\n\t\t\ttype Null, Boolean, Integer, Real, or String, or it must be an\n\t\t\tArray or Dictionary holding JSON values. JSON values must not\n\t\t\tform cycles: an Array or Dictionary value may not be nested,\n\t\t\ti.e., be contained as an item inside itself or one of its\n\t\t\tsub-items.\n\t\t</td></tr>\n\t\t<tr><th>listKeys</th><td>\n\t\t\tThe <code class="code">function listKeys()</code> returns an array containing the keys to all stored values.\n\t\t</td></tr>\n\t\t<tr><th>deepcopy</th><td>\n\t\t\t<p>\n\t\t\tThe <code class="code">function deepcopy(value)</code> creates\n\t\t\ta deep copy of a container. If the container holds other\n\t\t\tcontainers as values then they are deep copied, too. The copied\n\t\t\tdata structure must fulfill the following requirements:\n\t\t\t<ul>\n\t\t\t\t<li>It must not contain lambda functions.</li>\n\t\t\t\t<li>It must not contain objects.</li>\n\t\t\t\t<li>It must not contain a loop, i.e., contain a value as its own sub-value.</li>\n\t\t\t</ul>\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t<h3>Example</h3>\n\t\t\t<tscript>\nvar a = [0, 1, 2];\nvar b = a;\nvar c = deepcopy(a);\n\na.push(3);\n\nprint(b);\t\t\t   # prints [0, 1, 2, 3], since it\'s a reference to the same array also referenced by variable a\nprint(c);\t\t\t   # prints [0, 1, 2], since it\'s a copy\n\t\t\t</tscript>\n\t\t</div>\n\t\t</td></tr>\n\t\t<tr><th>setEventHandler</th><td>\n\t\t\tThe <code class="code">function setEventHandler(event, handler)</code>\n\t\t\tsets an event handler for a named event. The handler is a callback\n\t\t\tfunction that is called with an event parameter whenever the\n\t\t\tcorresponding event is triggered. The event name is provided\n\t\t\tas a string. The most common use of this function is to handle\n\t\t\tGUI-related events emitted by the <a href="?doc=/library/canvas">canvas</a>.\n\t\t\tThe standard library provides a &quot;timer&quot; event,\n\t\t\twhich is fired roughly every 20 milliseonds.\n\t\t\t<tscript>\n\t\t\t\tfunction onTick(event)\n\t\t\t\t{\n\t\t\t\t\tprint("tick...");\n\t\t\t\t}\n\t\t\t\tsetEventHandler("timer", onTick);\n\t\t\t\tenterEventMode();\n\t\t\t</tscript>\n\t\t\tEvents are triggered and handled only after calling\n\t\t\t<code class="code">enterEventMode</code>. The event handler is\n\t\t\tcalled with an event parameter, the type of which depends on the\n\t\t\tevent type. For the timer event, the event is simply a\n\t\t\t<keyword>null</keyword> value. Calling\n\t\t\t<code class="code">setEventHandler</code> with\n\t\t\t<code class="code">handler = null</code> removes the handler for\n\t\t\tthe given event type.\n\n\t\t\tWhen events take more than 20 milliseconds to complete,\n\t\t\tthe &quot;timer&quot; event only gets called once for this timespan.\n\t\t</td></tr>\n\t\t<tr><th>enterEventMode</th><td>\n\t\t\tThe <code class="code">function enterEventMode()</code> puts the\n\t\t\tprogram into event handling mode. The function returns only after\n\t\t\tcalling <code class="code">quitEventMode</code> from within an\n\t\t\tevent handler. The program still continues to run, handling all\n\t\t\tevents received from external sources, like mouse and keyboard\n\t\t\tevents for the canvas. Of course, at least one event handler\n\t\t\tshould be registered before calling this function.\n\t\t</td></tr>\n\t\t<tr><th>quitEventMode</th><td>\n\t\t\tThe <code class="code">function quitEventMode(result = null)</code>\n\t\t\tputs the program back into normal processing mode. It is usually\n\t\t\tcalled from within an event handler. The program handles all\n\t\t\tqueued events, then it continues with the next statement\n\t\t\tfollowing <code class="code">enterEventMode</code>. The parameter\n\t\t\t<code class="code">result</code> becomes the return value of\n\t\t\t<code class="code">function enterEventMode()</code>.\n\t\t</td></tr>\n\t\t</table>\n\t',children:[]},{id:"math",name:"Math Functions",title:"Math Functions",content:'\n\t\t<p>\n\t\tThe <code class="code">namespace math</code> contains a number\n\t\tof functions computing powers, logarithms, trigonometric and\n\t\thyperbolic functions. Unless stated differently, all functions\n\t\toperate on real numbers, and integers are converted to reals.\n\t\tAll trigonometric functions work with radians.\n\t\t</p>\n\t\t<table class="methods">\n\t\t<tr><th>pi</th><td>\n\t\t\tThe <code class="code">function math.pi()</code> returns the constant\n\t\t\t<a target="_blank" href="https://en.wikipedia.org/wiki/Pi">pi</a>.\n\t\t</td></tr>\n\t\t<tr><th>e</th><td>\n\t\t\tThe <code class="code">function math.e()</code> returns Euler\'s constant\n\t\t\t<a target="_blank" href="https://en.wikipedia.org/wiki/E_(mathematical_constant)">e</a>.\n\t\t</td></tr>\n\t\t<tr><th>abs</th><td>\n\t\t\tThe <code class="code">function math.abs(x)</code> returns the absolute\n\t\t\tvalue of its argument. For an integer argument the result is of type\n\t\t\tinteger. The function overflows only for the value <code class="code">-2147483648</a>.\n\t\t</td></tr>\n\t\t<tr><th>sqrt</th><td>\n\t\t\tThe <code class="code">function math.sqrt(x)</code> returns the square\n\t\t\troot of its argument.\n\t\t</td></tr>\n\t\t<tr><th>cbrt</th><td>\n\t\t\tThe <code class="code">function math.cbrt(x)</code> returns the cubic\n\t\t\troot of its argument.\n\t\t</td></tr>\n\t\t<tr><th>floor</th><td>\n\t\t\tThe <code class="code">function math.floor(x)</code> returns the argument\n\t\t\trounded down, i.e., the closest integer not larger than <i>x</i>. Although\n\t\t\tthe return value is an integer, it is of type <code class="code">Real</code>\n\t\t\tto avoid integer overflow.\n\t\t</td></tr>\n\t\t<tr><th>round</th><td>\n\t\t\tThe <code class="code">function math.round(x)</code> returns the argument\n\t\t\trounded to the nearest integer. Although the return value is an integer,\n\t\t\tit is of type <code class="code">Real</code> to avoid integer overflow.\n\t\t</td></tr>\n\t\t<tr><th>ceil</th><td>\n\t\t\tThe <code class="code">function math.ceil(x)</code> returns the argument\n\t\t\trounded up, i.e., the closest integer not smaller than <i>x</i>. Although\n\t\t\tthe return value is an integer, it is of type <code class="code">Real</code>\n\t\t\tto avoid integer overflow.\n\t\t</td></tr>\n\t\t<tr><th>sin</th><td>\n\t\t\tThe <code class="code">function math.sin(x)</code> returns the\n\t\t\t<a target="_blank" href="https://en.wikipedia.org/wiki/Trigonometric_functions">sine</a>\n\t\t\tof its argument in radians.\n\t\t</td></tr>\n\t\t<tr><th>cos</th><td>\n\t\t\tThe <code class="code">function math.cos(x)</code> returns the\n\t\t\t<a target="_blank" href="https://en.wikipedia.org/wiki/Trigonometric_functions">cosine</a>\n\t\t\tof its argument in radians.\n\t\t</td></tr>\n\t\t<tr><th>tan</th><td>\n\t\t\tThe <code class="code">function math.tan(x)</code> returns the\n\t\t\t<a target="_blank" href="https://en.wikipedia.org/wiki/Trigonometric_functions">tangent</a>\n\t\t\tof its argument in radians.\n\t\t</td></tr>\n\t\t<tr><th>sinh</th><td>\n\t\t\tThe <code class="code">function math.sinh(x)</code> returns the\n\t\t\t<a target="_blank" href="https://en.wikipedia.org/wiki/Hyperbolic_function">hyperbolic sine</a>\n\t\t\tof its argument.\n\t\t</td></tr>\n\t\t<tr><th>cosh</th><td>\n\t\t\tThe <code class="code">function math.cosh(x)</code> returns the\n\t\t\t<a target="_blank" href="https://en.wikipedia.org/wiki/Hyperbolic_function">hyperbolic cosine</a>\n\t\t\tof its argument.\n\t\t</td></tr>\n\t\t<tr><th>tanh</th><td>\n\t\t\tThe <code class="code">function math.tanh(x)</code> returns the\n\t\t\t<a target="_blank" href="https://en.wikipedia.org/wiki/Hyperbolic_function">hyperbolic tangent</a>\n\t\t\tof its argument.\n\t\t</td></tr>\n\t\t<tr><th>asin</th><td>\n\t\t\tThe <code class="code">function math.asin(x)</code> returns the inverse\n\t\t\t<a target="_blank" href="https://en.wikipedia.org/wiki/Trigonometric_functions">sine</a>\n\t\t\tof its argument. The return value is an angle in radians.\n\t\t</td></tr>\n\t\t<tr><th>acos</th><td>\n\t\t\tThe <code class="code">function math.acos(x)</code> returns the inverse\n\t\t\t<a target="_blank" href="https://en.wikipedia.org/wiki/Trigonometric_functions">cosine</a>\n\t\t\tof its argument. The return value is an angle in radians.\n\t\t</td></tr>\n\t\t<tr><th>atan</th><td>\n\t\t\tThe <code class="code">function math.atan(x)</code> returns the inverse\n\t\t\t<a target="_blank" href="https://en.wikipedia.org/wiki/Trigonometric_functions">tangent</a>\n\t\t\tof its argument. The return value is an angle in radians.\n\t\t</td></tr>\n\t\t<tr><th>atan2</th><td>\n\t\t\tThe <code class="code">function math.atan2(y, x)</code> returns the inverse\n\t\t\t<a target="_blank" href="https://en.wikipedia.org/wiki/Trigonometric_functions">tangent</a>\n\t\t\tof <i>y/x</i>. This is the angle between the vectors (x, y) and (1, 0) in radians.\n\t\t</td></tr>\n\t\t<tr><th>asinh</th><td>\n\t\t\tThe <code class="code">function math.asinh(x)</code> returns the inverse\n\t\t\t<a target="_blank" href="https://en.wikipedia.org/wiki/Hyperbolic_function">hyperbolic sine</a>\n\t\t\tof its argument.\n\t\t</td></tr>\n\t\t<tr><th>acosh</th><td>\n\t\t\tThe <code class="code">function math.acosh(x)</code> returns the inverse\n\t\t\t<a target="_blank" href="https://en.wikipedia.org/wiki/Hyperbolic_function">hyperbolic cosine</a>\n\t\t\tof its argument.\n\t\t</td></tr>\n\t\t<tr><th>atanh</th><td>\n\t\t\tThe <code class="code">function math.atanh(x)</code> returns the inverse\n\t\t\t<a target="_blank" href="https://en.wikipedia.org/wiki/Hyperbolic_function">hyperbolic tangent</a>\n\t\t\tof its argument.\n\t\t</td></tr>\n\t\t<tr><th>exp</th><td>\n\t\t\tThe <code class="code">function math.exp(x)</code> returns the\n\t\t\t<a target="_blank" href="https://en.wikipedia.org/wiki/Exponential_function">exponential function</a>\n\t\t\tof its argument.\n\t\t</td></tr>\n\t\t<tr><th>log</th><td>\n\t\t\tThe <code class="code">function math.log(x)</code> returns the\n\t\t\t<a target="_blank" href="https://en.wikipedia.org/wiki/https://en.wikipedia.org/wiki/Natural_logarithm">natural logarithm</a>\n\t\t\tof its argument.\n\t\t</td></tr>\n\t\t<tr><th>log2</th><td>\n\t\t\tThe <code class="code">function math.log2(x)</code> returns the\n\t\t\t<a target="_blank" href="https://en.wikipedia.org/wiki/https://en.wikipedia.org/wiki/https://en.wikipedia.org/wiki/Logarithm">logarithm with base 2</a>\n\t\t\tof its argument.\n\t\t</td></tr>\n\t\t<tr><th>log10</th><td>\n\t\t\tThe <code class="code">function math.log10(x)</code> returns the\n\t\t\t<a target="_blank" href="https://en.wikipedia.org/wiki/https://en.wikipedia.org/wiki/https://en.wikipedia.org/wiki/Logarithm">logarithm with base 10</a>\n\t\t\tof its argument.\n\t\t</td></tr>\n\t\t<tr><th>pow</th><td>\n\t\t\tThe <code class="code">function math.pow(b, e)</code> returns the <i>e</i>-th power of <i>b</i>.\n\t\t\tIt is an alternative to <a href="?doc=/language/expressions/binary-operators/power">operator ^</a>\n\t\t\tthat always works with data type <code class="code">Real</code>.\n\t\t</td></tr>\n\t\t<tr><th>sign</th><td>\n\t\t\tThe <code class="code">function math.sign(x)</code> returns the\n\t\t\tsign of its argument, encoded as <i>-1</i>, <i>0</i>, or <i>+1</i>.\n\t\t\tThe return type is an integer if the argument is, otherwise it is real.\n\t\t</td></tr>\n\t\t<tr><th>min</th><td>\n\t\t\tThe <code class="code">function math.min(a, b)</code> returns the smaller\n\t\t\tof its two arguments. The function is applicable to non-numeric arguments\n\t\t\tas long as they are ordered. It is equivalent to<br/>\n\t\t\t<code class="code">if a <= b then return a; else return b;</code>\n\t\t</td></tr>\n\t\t<tr><th>max</th><td>\n\t\t\tThe <code class="code">function math.max(a, b)</code> returns the larger\n\t\t\tof its two arguments. The function is applicable to non-numeric arguments\n\t\t\tas long as they are ordered. It is equivalent to<br/>\n\t\t\t<code class="code">if a >= b then return a; else return b;</code>\n\t\t</td></tr>\n\t\t<tr><th>random</th><td>\n\t\t\tThe <code class="code">function math.random()</code> returns a real number\n\t\t\tdrawn from the uniform distribution on the half-open unit interval [0,&nbsp;1[.\n\t\t</td></tr>\n\t\t</table>\n\t',children:[]},{id:"turtle",name:"Turtle Graphics",title:"Turtle Graphics",content:'\n\t\t<p>\n\t\tThe functions in this section control the "turtle", an imaginary robot\n\t\tequipped with a pen that can move around and draw lines. The turtle\n\t\tmoves in a two-dimensional area. It is described by a Cartesian\n\t\tcoordinate system with horizontal (x) and vertical (y) axes. The origin\n\t\tis at the center of the area, and the visible area extends from -100 to\n\t\t+100 in each direction. The turtle can leave the visible area.\n\t\t</p>\n\t\t<p>\n\t\tAt program start, the turtle is located at the origin of its coordinate\n\t\tsystem, it is equipped with a black pen, and it faces upwards, or in\n\t\tother words, along the positive y-axis. The turtle can move and turn.\n\t\tWhile doing so it can lower and raise a pen. While lowered, the pen\n\t\tdraws the path taken by the turtle. The result of such drawing is known\n\t\tas "turtle graphics". The color of the pen can be changed.\n\t\t</p>\n\t\t<table class="methods">\n\t\t<tr><th>reset</th><td>\n\t\t\tThe <code class="code">function reset(x=0, y=0, degrees=0, down=true)</code>\n\t\t\tplaces the turtle at position <i>(x, y)</i> on its drawing area.\n\t\t\tIts orientation is given by <i>degrees</i>, the color is set to\n\t\t\tblack, and the pen is active if <i>down</i> is true. Using this\n\t\t\tfunction for actual drawing is considered improper use, or "cheating",\n\t\t\tsince this operation is not available to an actual robot. The\n\t\t\tintended use is to initialize the turtle in a different position\n\t\t\tthan the center.\n\t\t</td></tr>\n\t\t<tr><th>move</th><td>\n\t\t\tThe <code class="code">function move(distance)</code> moves the\n\t\t\tturtle forward by the given distance, or backward if the distance\n\t\t\tis negative. If the pen is down in this state then a line is drawn.\n\t\t</td></tr>\n\t\t<tr><th>turn</th><td>\n\t\t\tThe <code class="code">function turn(degrees)</code> rotates the\n\t\t\tturtle clockwise, where 360 <i>degrees</i> are one full rotation.\n\t\t\tA negative angle corresponds to a counter-clockwise rotation.\n\t\t</td></tr>\n\t\t<tr><th>color</th><td>\n\t\t\tThe <code class="code">function color(red, green, blue)</code>\n\t\t\tsets the color of the pen, defined by red, green and blue components.\n\t\t\tAll values are clipped to the range [0,&nbsp;1].\n\t\t</td></tr>\n\t\t<tr><th>pen</th><td>\n\t\t\tThe <code class="code">function pen(down)</code> lifts the pen if\n\t\t\t<i>down</i> is false and lowers the pen if <i>down</i> is true.\n\t\t</td></tr>\n\t\t</table>\n\t\t<div class="example">\n\t\t<h3>Example</h3>\n\t\t<tscript>\nturtle.move(30);            # black line upwards\nturtle.color(1,0,0);        # turn color red\nturtle.turn(60);            # turn 60 degrees clockwise\nturtle.move(30);            # red line\nturtle.color(1,1,0);        # turn color yellow\nturtle.turn(60);            # turn 60 degress clockwise\nturtle.move(15);            # yellow line\nturtle.pen(false);          # rise the pen\nturtle.move(15);            # move but do not draw (pen is up)\nturtle.pen(true);           # lower the pen\nturtle.color(0,1,0);        # turn color green\nturtle.turn(60);            # turn 60 degrees clockwise\nturtle.move(30);            # green line\nturtle.color(0,0,1);        # turn color blue\nturtle.turn(60);            # turn 60 degrees clockwise\nturtle.move(30);            # blue line\nturtle.color(1,0,1);        # turn color pink\nturtle.turn(60);            # turn 60 degrees clockwise\nturtle.move(30);            # pink line back to the origin\n\t\t</tscript>\n\t\t<div style="text-align: center; margin: 20px;">\n\t\t<img src="data:image/png;base64,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">\n\t\t</div>\n\t</div>\n\t',children:[]},{id:"canvas",name:"Canvas Graphics",title:"Canvas Graphics",content:'\n\t\t<p>\n\t\tThe functions in this section control the "canvas", a rectangular\n\t\tsurface for drawing geometric shapes and text. Canvas graphics is\n\t\tsignificantly more flexible than turtle graphics. The canvas\n\t\tprovides user-triggered mouse and keyboard events.\n\t\t</p>\n\t\t<p>\n\t\tThe canvas is a two-dimensional grid of pixels. Each pixel covers\n\t\tan area of size 1x1. The origin of the coordinate system is the\n\t\ttop/left corner of the top/left pixel. The x-coordinate grows\n\t\ttowards the right, while the y-coordinate grows towards the bottom.\n\t\tThe latter is in contrast to a standard mathematical coordinate\n\t\tsystem, however, the convention is common for computer screens.\n\t\tThe size of the canvas depends on the size of the window containing\n\t\tthe canvas. Drawing outside the canvas has no effect.\n\t\t</p>\n\t\t<p>\n\t\tNote that the above convention means that integer coordinates refer\n\t\tto the corners of pixels. Hence, the coordinates of the center of\n\t\tthe top/left pixel are (0.5, 0.5). All drawing operations are\n\t\tdefined in continuous coordinates. Conceptually, drawing a red line\n\t\tof width 1 from point (10, 10) to point (20, 10) spills red ink\n\t\tover the rectangle with corners (10, 9.5), (10, 10.5), (20, 10.5),\n\t\t(20, 9.5). Therefore the pixels in rows y=9 and y=10 are covered\n\t\tby 50% red ink. When drawing on top of white background, then the\n\t\tdrawing command results in two consecutive horizontal pixel rows\n\t\tof light red color. However, the intended is most probably to fill\n\t\ta single pixel row with fully red color. This is achieved by\n\t\tdrawing a line of width 1 from (10, 10.5) to (20, 10.5). This shift\n\t\tof 0.5 is a bit unintuitive at first, and it is caused by integer\n\t\tcoordinates referring to the corners of pixels, not to their centers.\n\t\t</p>\n\t\t<p>\n\t\tCanvas drawing is stateful. This means that properties of drawing\n\t\toperations like line and fill color and line width are set before\n\t\tthe actual drawing commands are issued. This makes it easy to draw,\n\t\te.g., many lines of the same width and color in sequence.\n\t\t</p>\n\t\t<p>\n\t\tAll drawing functions can also be used for offline drawing onto a\n\t\t<code>Bitmap</code> object. The target object of all drawing\n\t\toperations can be set with <code>setDrawingTarget</code>. The\n\t\tdrawing state is separate per target. This means that changing a\n\t\tproperty (like the line color) for one target does not affect the\n\t\tsame property for any other target.\n\t\t</p>\n\t\t<p>\n\t\tThe canvas namespace provides a large number of functions. They are\n\t\tsplit into the following categories: reading properties, setting\n\t\tproperties, raw pixel access, transformations, drawing, and managing\n\t\tevents.\n\t\t</p>\n\n\t\t<h3>Reading Properties</h3>\n\t\t<table class="methods">\n\t\t<tr><th>width</th><td>\n\t\t\tThe <code class="code">function width()</code> returns the current\n\t\t\twidth of the canvas in pixels.\n\t\t</td></tr>\n\t\t<tr><th>height</th><td>\n\t\t\tThe <code class="code">function height()</code> returns the current\n\t\t\theight of the canvas in pixels.\n\t\t</td></tr>\n\t\t</table>\n\n\t\t<h3>Setting Properties</h3>\n\t\t<table class="methods">\n\t\t<tr><th>setLineWidth</th><td>\n\t\t\tThe <code class="code">function setLineWidth(width)</code> sets\n\t\t\tthe line width. The parameter <code class="code">width</code>\n\t\t\tmust be a positive number.\n\t\t</td></tr>\n\t\t<tr><th>setLineColor</th><td>\n\t\t\tThe <code class="code">function setLineColor(red, green, blue, alpha)</code>\n\t\t\tsets the line color. All arguments are in the range 0 to 1. The\n\t\t\talpha (opacity) argument is optional, it defaults to 1.\n\t\t</td></tr>\n\t\t<tr><th>setFillColor</th><td>\n\t\t\tThe <code class="code">function setFillColor(red, green, blue, alpha)</code>\n\t\t\tsets the fill color. All arguments are in the range 0 to 1. The\n\t\t\talpha (opacity) argument is optional, it defaults to 1.\n\t\t</td></tr>\n\t\t<tr><th>setOpacity</th><td>\n\t\t\tThe <code class="code">function setOpacity(alpha)</code>\n\t\t\tsets a global opacity (alpha) value for all drawing operations.\n\t\t\tA value of 0 means that operations are fully transparent and hence\n\t\t\thave no effect, while a value of 1 means that drawing is fully\n\t\t\topaque.\n\t\t</td></tr>\n\t\t<tr><th>setFont</th><td>\n\t\t\tThe <code class="code">function setFont(fontface, fontsize)</code>\n\t\t\tsets the current font. The fontface is a string, it must correspond\n\t\t\tto a font existing on the system. The fontsize is defined in pixels,\n\t\t\tit must be a positive number. The default font is a 16px Helvetica\n\t\t\tfont.\n\t\t</td></tr>\n\t\t<tr><th>setTextAlign</th><td>\n\t\t\tThe <code class="code">function setTextAlign(alignment)</code>\n\t\t\tsets the text alignment. Possible values are\n\t\t\t<code class="code">&quot;left&quot;</code> (the default),\n\t\t\t<code class="code">&quot;center&quot;</code>, and\n\t\t\t<code class="code">&quot;right&quot;</code>.\n\t\t\tThe position given in text drawing commands is relative to the\n\t\t\talignment.\n\t\t</td></tr>\n\t\t</table>\n\n\t\t<h3>Raw Pixel Access</h3>\n\t\t<p>\n\t\tNote that the pixel coordinates for raw pixel access are not\n\t\taffected by the current transformation.\n\t\t</p>\n\t\t<table class="methods">\n\t\t<tr><th>getPixel</th><td>\n\t\t\tThe <code class="code">function getPixel(x, y)</code> returns the\n\t\t\t"raw" pixel value as an array of four numbers, encoding the RGBA\n\t\t\tcolor value. Each component (red, green, blue, and alpha) is an\n\t\t\tinteger in the range 0 to 255. This is the format in which the\n\t\t\tcolor information is stored in the graphics hardware.\n\t\t</td></tr>\n\t\t<tr><th>setPixel</th><td>\n\t\t\tThe <code class="code">function setPixel(x, y, data)</code> sets\n\t\t\ta raw pixel value. The data argument is an array of four integers\n\t\t\twith the same meaning as the return value of <code>getPixel</code>.\n\t\t</td></tr>\n\t\t</table>\n\n\t\t<h3>Drawing</h3>\n\t\t<table class="methods">\n\t\t<tr><th>clear</th><td>\n\t\t\tThe <code class="code">function clear()</code> erases all drawn\n\t\t\tcontent by filling the entire canvas with the current fill color.\n\t\t\tIt also resets the transformation (see function reset() below).\n\t\t</td></tr>\n\t\t<tr><th>line</th><td>\n\t\t\tThe <code class="code">function line(x1, y1, x2, y2)</code> draws\n\t\t\ta line from (x1, y1) to (x2, y2) using the current line width and\n\t\t\tline color.\n\t\t</td></tr>\n\t\t<tr><th>rect</th><td>\n\t\t\tThe <code class="code">function rect(left, top, width, height)</code>\n\t\t\tdraws the outline of a rectangle with the current line width and\n\t\t\tline color.\n\t\t</td></tr>\n\t\t<tr><th>fillRect</th><td>\n\t\t\tThe <code class="code">function fillRect(left, top, width, height)</code>\n\t\t\tfills a rectangle with the current fill color.\n\t\t</td></tr>\n\t\t<tr><th>frameRect</th><td>\n\t\t\tThe <code class="code">function frameRect(left, top, width, height)</code>\n\t\t\tfills a rectangle with the current fill color and draws the outline with\n\t\t\tthe current line color and line width.\n\t\t</td></tr>\n\t\t<tr><th>circle</th><td>\n\t\t\tThe <code class="code">function circle(x, y, radius)</code>\n\t\t\tdraws the outline of a circle with the current line width and\n\t\t\tline color.\n\t\t</td></tr>\n\t\t<tr><th>fillCircle</th><td>\n\t\t\tThe <code class="code">function fillCircle(x, y, radius)</code>\n\t\t\tfills a circle with the current fill color.\n\t\t</td></tr>\n\t\t<tr><th>frameCircle</th><td>\n\t\t\tThe <code class="code">function frameCircle(x, y, radius)</code>\n\t\t\tfills a circle with the current fill color and draws the outline with\n\t\t\tthe current line color and line width.\n\t\t</td></tr>\n\t\t<tr><th>curve</th><td>\n\t\t\tThe <code class="code">function curve(points, closed)</code> draws\n\t\t\ta polygon given by the array <code class="code">points</code>, each\n\t\t\tentry of which is an array containing (x, y) coordinates. For example,\n\t\t\tthe array <code class="code">[[100, 100], [200, 100], [100, 200]]</code>\n\t\t\tspecifies a curve consisting of two lines (three lines forming a triangle\n\t\t\tif the curve is closed), connecting the points (100, 100), (200, 100),\n\t\t\tand (100, 200). If the optional argument <code class="code">closed</code>\n\t\t\tis set to <code class="code">true</code> then the first and the last point\n\t\t\tare connected, resulting in a closed polygon. The curve is drawn with the\n\t\t\tcurrent line width and line color.\n\t\t</td></tr>\n\t\t<tr><th>fillArea</th><td>\n\t\t\tThe <code class="code">function fillArea(points)</code> fills the\n\t\t\tclosed polygon given by <code class="code">points</code> (see function\n\t\t\tcurve) with the current fill color.\n\t\t</td></tr>\n\t\t<tr><th>frameArea</th><td>\n\t\t\tThe <code class="code">function frameArea(points)</code> fills the\n\t\t\tclosed polygon given by <code class="code">points</code> (see function\n\t\t\tcurve) with the current fill color, and then draws the polygon outline\n\t\t\twith the given line color and line width.\n\t\t</td></tr>\n\t\t<tr><th>text</th><td>\n\t\t\tThe <code class="code">function text(x, y, str)</code> draws the string\n\t\t\t<code class="code">str</code> at position (x, y), relative to the\n\t\t\tcurrent text alignment, using the current font and fill color.\n\t\t</td></tr>\n\t\t<tr><th>paintImage</th><td>\n\t\t\tThe <code class="code">function paintImage(x, y, source)</code> draws an\n\t\t\timage <code class="code">source</code> at position (x, y). The source can\n\t\t\tbe a canvas.Bitmap object or <code>null</code>. In the latter case, the\n\t\t\tcurrent canvas is drawn.\n\t\t</td></tr>\n\t\t<tr><th>paintImageSection</th><td>\n\t\t\tThe <code class="code">function paintImage(dx, dy, dw, dh, source, sx, sy, sw, sh)</code>\n\t\t\tdraws a section of the image <code class="code">source</code>\n\t\t\tspecified by the rectangle (sx, sy, sw, sh) into the rectangle\n\t\t\tspecified by (dx, dy, dw, dh) on the target canvas. The source can\n\t\t\tbe a canvas.Bitmap object or <code>null</code>. In the latter case,\n\t\t\ta section from the current canvas is drawn.\n\t\t</td></tr>\n\t\t</table>\n\t\t<div class="example">\n\t\t<h3>Example</h3>\n\t\t<tscript>\nvar points = [                  # polygon vertices\n\t[60, 60],\n\t[150, 60],\n\t[150, 150],\n\t[105, 200],\n\t[60, 150]\n];\n\ncanvas.setFillColor(1,1,0);     # set the fill color to yellow\ncanvas.fillArea(points);        # fill the polygon\n\ncanvas.setLineColor(1,0,0);     # lines in red\ncanvas.setLineWidth(10);        # lines 10 pixels wide\ncanvas.curve(points, true);     # draw polygon outline\n\t\t</tscript>\n\t\t<img style="display: block; margin: 1em auto;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIMAAACxCAMAAADQ8f7yAAAAYFBMVEX//+7/cWn/9eX/z8H/hHv/Xlj/ODT/AAD//wD/S0b/vAD/JSP/qp//zwD/4tP/vK//lwD/EgD/EhH/l43/qgD/JQD/9QD/cQD/OAD/hAD/SwD/4gD/XgD/9ub/IQD/49TtVKObAAAB30lEQVR42u3bR24DMRBEUSoNrZxzuv8tvaVg2Axd5ADGr7WG+Ku3UjvHGGOMMWacbzAaaKCBhv/R8CUeDTTQQAMNNNBAAw000EADDTTQQAMNNNBAAw000EADDTTQQAMNNNBAAw000EADDTTQQAMNNKQ2bLQJm6L/9B6UCYfC/xXPdAmz0v82b5eqhOU2p2Ec/vh41yTcj+Gr4+ghyiD8+eWkSDhdwjcHCdcwk/CDm6LhFr44STrJmYafPOwJj/C9adpZ0LALPzpbE87ha90w8TZpNQ8/u9oSruFb81XygdRoF364EfHo/W6UcaW1/rhVOGh49H6ddSq28BIwP3j0i8x7tb0CzE8e99lHcwIwc3msAGY+j3owC3hUg1nCoxjMMh6lYJbyKASznEcZmBYeRWDaeJSAaeVRAKadRzOYCh6tYEp4tIGp4dEEpopHA5g6HovBVPJYCKaWxyIw1TwWgKnnMRvMGjxmglmHxzwwK/GYA2YtHjPArMdjMpg1eUwEsy6PSWDW5jEBzPo8RsFswWMEzNerBY8RMNvwGAGzDY8RMJvwGAOzCY8xMJvwGAOzCY8xMJvwGAFz4frZvj2Pf4A5dv1t0J7HX8CcuH43bc7jzz277tl3g3u/HWOMVdo3CO9/RNXVrEEAAAAASUVORK5CYII="/>\n\t</div>\n\t\t<h3>Transformations</h3>\n\t\t<table class="methods">\n\t\t<tr><th>reset</th><td>\n\t\t\tThe <code class="code">function reset()</code> resets the current\n\t\t\ttransformation. Afterwards the origin of the coordinate system is\n\t\t\tthe top left corner, with axes extending to the right and to the\n\t\t\tbottom.\n\t\t\t<img style="display: block; margin: 1em auto;" src ="data:image/png;base64,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"/>\n\t\t</td></tr>\n\t\t<tr><th>shift</th><td>\n\t\t\tThe <code class="code">function shift(dx, dy)</code> translates\n\t\t\tthe origin of the coordinate system by the vector (dx, dy).\n\t\t\t<img style="display: block; margin: 1em auto;" src ="data:image/png;base64,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"/>\n\t\t</td></tr>\n\t\t<tr><th>scale</th><td>\n\t\t\tThe <code class="code">function scale(factor)</code> scales the\n\t\t\tcoordinate system by the given factor.\n\t\t\t<img style="display: block; margin: 1em auto;" src ="data:image/png;base64,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"/>\n\t\t</td></tr>\n\t\t<tr><th>rotate</th><td>\n\t\t\tThe <code class="code">function rotate(angle)</code> rotates the\n\t\t\tcoordinate system clockwise by the given angle. The angle is given\n\t\t\tin radians, i.e., a full rotation corresponds to the angle\n\t\t\t<code class="code">2 * math.pi()</code>.\n\t\t\t<img style="display: block; margin: 1em auto;" src ="data:image/png;base64,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"/>\n\t\t</td></tr>\n\t\t<tr><th>transform</th><td>\n\t\t\tThe <code class="code">function transform(A, b)</code> transforms\n\t\t\tcoordinates (x, y) into new coordinates A (x, y) + b, where A is\n\t\t\tthe 2x2 matrix <code class="code">[[A11, A12], [A21, A22]]</code>\n\t\t\tand b is the vector <code class="code">[b1, b2]</code>.\n\t\t\t<img style="display: block; margin: 1em auto;" src ="data:image/png;base64,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"/>\n\t\t</td></tr>\n\t\t</table>\n\n\t\t<h3>Managing Events</h3>\n\t\t<p>\n\t\tThe canvas emits the following events:\n\t\t\t<table class="nicetable">\n\t\t\t<tr><th>event name</th><th>event type</th><th>meaning</th></tr>\n\t\t\t<tr><td>&quot;canvas.mousemove&quot;</td><td>MouseMoveEvent</td><td>mouse pointer moved to new position within the canvas</td></tr>\n\t\t\t<tr><td>&quot;canvas.mouseout&quot;</td><td>Null</td><td>mouse pointer left the canvas</td></tr>\n\t\t\t<tr><td>&quot;canvas.mousedown&quot;</td><td>MouseButtonEvent</td><td>mouse button pressed</td></tr>\n\t\t\t<tr><td>&quot;canvas.mouseup&quot;</td><td>MouseButtonEvent</td><td>mouse button released</td></tr>\n\t\t\t<tr><td>&quot;canvas.keydown&quot;</td><td>KeyboardEvent</td><td>keyboard key pressed</td></tr>\n\t\t\t<tr><td>&quot;canvas.keyup&quot;</td><td>KeyboardEvent</td><td>keyboard key released</td></tr>\n\t\t\t<tr><td>&quot;canvas.resize&quot;</td><td>ResizeEvent</td><td>canvas resized</td></tr>\n\t\t\t</table>\n\t\tThey can be received by setting corresponding event handlers with the\n\t\tstandard library function <code class="code">setEventHandler</code>.\n\t\t</p>\n\t\t<p>\n\t\tThe different event types are lightweight classes providing\n\t\tpublic attributes. They are defined as follows:\n\t\t</p><p>\n\t\t<tscript>\n\t\t\tclass MouseMoveEvent\n\t\t\t{\n\t\t\tpublic:\n\t\t\t\tvar x;\t\t # horizontal pointer position\n\t\t\t\tvar y;\t\t # vertical pointer position\n\t\t\t\tvar buttons;   # array of pressed buttons\n\t\t\t\tvar shift;\t # shift key pressed?\n\t\t\t\tvar control;   # control key pressed?\n\t\t\t\tvar alt;\t   # alt key pressed?\n\t\t\t\tvar meta;\t  # meta key pressed?\n\t\t\t}\n\n\t\t\tclass MouseButtonEvent\n\t\t\t{\n\t\t\tpublic:\n\t\t\t\tvar x;\t\t # horizontal pointer position\n\t\t\t\tvar y;\t\t # vertical pointer position\n\t\t\t\tvar button;\t# button that caused the event\n\t\t\t\tvar buttons;   # array of pressed buttons\n\t\t\t\tvar shift;\t # shift key pressed?\n\t\t\t\tvar control;   # control key pressed?\n\t\t\t\tvar alt;\t   # alt key pressed?\n\t\t\t\tvar meta;\t  # meta key pressed?\n\t\t\t}\n\n\t\t\tclass KeyboardEvent\n\t\t\t{\n\t\t\tpublic:\n\t\t\t\tvar key;\t   # name of the key that caused the event\n\t\t\t\tvar shift;\t # shift key pressed?\n\t\t\t\tvar control;   # control key pressed?\n\t\t\t\tvar alt;\t   # alt key pressed?\n\t\t\t\tvar meta;\t  # meta key pressed?\n\t\t\t}\n\n\t\t\tclass ResizeEvent\n\t\t\t{\n\t\t\tpublic:\n\t\t\t\tvar width;\t # new width of the canvas\n\t\t\t\tvar height;\t# new height of the canvas\n\t\t\t}\n\t\t</tscript>\n\t\t</p><p>\n\t\tButtons are named <code class="code">"left"</code>,\n\t\t<code class="code">"middle"</code>, and <code class="code">"right"</code>.\n\t\tKeys are named according to the\n\t\t<a target="_blank" href="https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key/Key_Values">JavaScript rules</a>.\n\t\t</p><p>\n\t\tMouse pointer coordinates always refer to <i>untransformed</i> canvas pixels:\n\t\tif a transformation has been performed before the event occurs (like\n\t\t<code class="code">shift(100, 100);</code>) then drawing actions inside the\n\t\tevent handler are affected by the transformation. However, the coordinates\n\t\treported in the event object are unaffected; they always refer to the\n\t\toriginal canvas coordinates.\n\t\t</p>\n\t\t<div class="examples">\n\t\t<h3>Examples</h3>\n\t\t<tscript do-not-run>\n\t\t\tfunction onMouseMove(event) {\n\t\t\t\tvar radius;\n\t\t\t\tif event.shift then\n\t\t\t\t\tradius = 2;                                # set radius to 2 if shift is pressed\n\t\t\t\telse\n\t\t\t\t\tradius = 1;                                # else set radius to 1\n\n\t\t\t\tcanvas.circle(event.x, event.y, radius);       # draws a circle centered at point where mouse moved to\n\t\t\t}\n\t\t\tsetEventHandler("canvas.mousemove", onMouseMove);\n\t\t\tenterEventMode();\n\t\t</tscript>\n\t\t<tscript do-not-run>\n\t\t\tfunction onMouseOut(event) {\n\t\t\t\tprint("left canvas");                          # prints when the mouse leaves the canvas\n\t\t\t}\n\t\t\tsetEventHandler("canvas.mouseout", onMouseOut);\n\t\t\tenterEventMode();\n\t\t</tscript>\n\t\t<tscript do-not-run>\n\t\t\tfunction onMouseDown(event) {\n\t\t\t\tcanvas.circle(event.x, event.y, 1);            # draws a small circle centered at the point where the mouse button was pressed\n\t\t\t}\n\t\t\tsetEventHandler("canvas.mousedown", onMouseDown);\n\t\t\tenterEventMode();\n\t\t</tscript>\n\t\t<tscript do-not-run>\n\t\t\tfunction onMouseUp(event) {\n\t\t\t\tcanvas.circle(event.x, event.y, 1);            # draws a small circle centered at the point where the mouse button was released\n\t\t\t}\n\t\t\tsetEventHandler("canvas.mouseup", onMouseUp);\n\t\t\tenterEventMode();\n\t\t</tscript>\n\t\t<tscript do-not-run>\n\t\t\tfunction onKeyDown(event) {\n\t\t\t\tprint(event.key);                              # prints the key that was pressed\n\t\t\t}\n\t\t\tsetEventHandler("canvas.keydown", onKeyDown);\n\t\t\tenterEventMode();\n\t\t</tscript>\n\t\t<tscript do-not-run>\n\t\t\tfunction onKeyUp(event) {\n\t\t\t\tprint(event.key);                              # prints the key that was released\n\t\t\t}\n\t\t\tsetEventHandler("canvas.keyup", onKeyUp);\n\t\t\tenterEventMode();\n\t\t</tscript>\n\t\t<tscript do-not-run>\n\t\t\tfunction onResize(event) {\n\t\t\t\tprint(event.width + " " + event.height);       # prints the new size of the canvas\n\t\t\t}\n\t\t\tsetEventHandler("canvas.resize", onResize);\n\t\t\tenterEventMode();\n\t\t</tscript>\n\n\t\t<h3>The Bitmap Class</h3>\n\t\t<p>\n\t\tThe class <code>Bitmap</code> fulfills two purposes: it allows for\n\t\toffline drawing, and it offers a convenient way to use image resources\n\t\tin programs.\n\t\t</p>\n\t\t<table class="methods">\n\t\t<tr><th>Bitmap</th><td>\n\t\t\t<code class="code">Bitmap(resourceOrWidth, height = null)</code>\n\t\t\tconstructs a bitmap (image) object. The parameter\n\t\t\t<code class="code">resourceOrWidth</code> is either a resource string\n\t\t\tcontaining a <a href="?doc=/dataURI">data URI</a>, or an integer\n\t\t\tspecifying the width. The height parameter is relevant only in the\n\t\t\tlatter case. The constructor creates a bitmap image with the given\n\t\t\tcontent, or of the given dimensions. A bitmap created from dimensions\n\t\t\tis initially transparent black.\n\t\t</td></tr>\n\t\t</table>\n\n\t\t<h3>Methods</h3>\n\t\t<table class="methods">\n\t\t<tr><th>Bitmap.width()</th><td>\n\t\t\tThe method returns the width of the bitmap in pixels. An alternative\n\t\t\tway of querying the width of a bitmap is to set it as the current\n\t\t\tdrawing target, then call <code>canvas.width()</code>, and finally\n\t\t\treset the old drawing target. This method avoids the complication of\n\t\t\tthat procedure.\n\t\t</td></tr>\n\t\t<tr><th>Bitmap.height()</th><td>\n\t\t\tThe method returns the width of the bitmap in pixels. An alternative\n\t\t\tway of querying the width of a bitmap is to set it as the current\n\t\t\tdrawing target, then call <code>canvas.height()</code>, and finally\n\t\t\treset the old drawing target. This method avoids the complication of\n\t\t\tthat procedure.\n\t\t</td></tr>\n\t\t</table>\n\n\t\t<h3>Examples</h3>\n\t\t<tscript>\n\t\t\tvar jpg_data = "data:image/jpeg;base64,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";\n\t\t\tvar image = canvas.Bitmap(jpg_data);\n\t\t\tcanvas.paintImage(100, 100, image);\n\t\t</tscript>\n\t\t<tscript do-not-run>\n\t\tcanvas.setFillColor(1, 1, 1);\n\t\tcanvas.clear();\n\t\tvar h = canvas.height();\n\t\tcanvas.setOpacity(1);\n\t\twhile true do\n\t\t{\n\t\t\tvar a = math.random() * 0.9 * h;\n\t\t\tvar b = math.random() * 0.1 * h;\n\t\t\tcanvas.setFillColor(1, 1, 1);\n\t\t\tcanvas.fillRect(0, 0, 1, h);\n\t\t\tcanvas.setFillColor(1, 0, 0);\n\t\t\tcanvas.fillRect(0, a, 1, b);\n\t\t\tcanvas.paintImage(1, 0, null);\n\t\t\twait(0.01);\n\t\t}\n\t\t</tscript>\n\t</div>\n\t',children:[]},{id:"audio",name:"Audio playback",title:"Audio playback",content:'\n\t\t\t<p>TScript supports playback of audio. The class <code class="code">Sound</code>\n\t\t\trepresent sound samples. A sound sample consists of channels, where each channel\n\t\t\tis represented by a buffer: an array of numbers, with values ranging from -1 to 1.\n\t\t\tAs an alternative to providing explicit buffers, sound objects can be constructed\n\t\t\tfrom media resources encoded as a data URI in a string.\n\t\t\t</p><p>\n\t\t\tEach sound sample can be played an arbitrary number of times, and even\n\t\t\trepeatedly in a loop. Re-using a sound sample object is much faster than\n\t\t\tcreating a new sound sample object from an array each time the sound\n\t\t\tshall be played.\n\t\t\t</p>\n\t\t\t<h3>Classes and Constructors</h3>\n\t\t\t<table class="methods">\n\t\t\t<tr><th>Sound</th><td>\n\t\t\t\t<code class="code">Sound(buffers, sampleRate = null)</code>\n\t\t\t\tconstructs a sound sample object. The parameter\n\t\t\t\t<code class="code">buffers</code> is an array of arrays containing the\n\t\t\t\tsamples to be played, or a string containing a <a href="?doc=/dataURI">data URI</a>.\n\t\t\t\tThe second parameter <code class="code">sampleRate</code> specifies the\n\t\t\t\trate at which the array samples are to be played in Hz. The sample rate\n\t\t\t\tshould be in the range 8000&nbsp;Hz to 96000&nbsp;Hz. If the first parameter\n\t\t\t\tis a data URI, then the sample rate is ignored.\n\t\t\t\tTypical channel numbers are one (mono) and two (stereo).\n\t\t\t</td></tr>\n\t\t\t</table>\n\n\t\t\t<h3>Methods</h3>\n\t\t\t<table class="methods">\n\t\t\t<tr><th>play</th><td>\n\t\t\t\tThe <code class="code">function play</code> starts playing the sound.\n\t\t\t\tThe playback is asynchronous, meaning that the call returns immediately\n\t\t\t\tregardless of sound duration. Further instances of the sound can be\n\t\t\t\tplayed by calling the function again, even while the sound is still\n\t\t\t\tplaying.\n\t\t\t</td></tr>\n\t\t\t<tr><th>startLoop</th><td>\n\t\t\t\tThe <code class="code">function startLoop()</code> starts looping the\n\t\t\t\tsound, i.e., playing the sound repeatedly. The function returns\n\t\t\t\timmediately. In contrast to <code>play</code>, for each sound sample\n\t\t\t\tobject, only a single loop can exist at a time.\n\t\t\t</td></tr>\n\t\t\t<tr><th>stopLoop</th><td>\n\t\t\t\tThe <code class="code">function stopLoop()</code> stops a sound loop\n\t\t\t\tthat was previously started with <code>startLoop</code>.\n\t\t\t</td></tr>\n\t\t\t<tr><th>looping</th><td>\n\t\t\t\tThe <code class="code">function looping()</code> returns\n\t\t\t\t<code>true</code> if the sound loop is currently running, and\n\t\t\t\totherwise <code>false</code>.\n\t\t\t</td></tr>\n\t\t\t</table>\n\n\t\t\t<div class="example">\n\t\t\t<h3>Example</h3>\n\t\t\t<p> The following code plays two different tones on the left and right channels\n\t\t\tof a stereo device. <code class="code">l_freq</code>, <code class="code">r_freq</code>\n\t\t\tand <code class="code">sampleRate</code> can be modified to alter the tones.\n\t\t\t<tscript>\n\t\t\t\tuse namespace math;\n\t\t\t\tuse namespace audio;\n\n\t\t\t\tvar durationInSeconds = 2;\n\t\t\t\tvar l_freq = 440; # frequency in Hz\n\t\t\t\tvar r_freq = 554;\n\t\t\t\tvar sampleRate = 8000; # sampleRate in Hz\n\n\t\t\t\tvar l_samples = [];\n\t\t\t\tvar r_samples = [];\n\n\t\t\t\tfor var i in 0:(sampleRate * durationInSeconds) do\n\t\t\t\t{\n\t\t\t\t\tl_samples.push(sin( i * (l_freq / sampleRate) * 2 * pi()));\n\t\t\t\t}\n\n\t\t\t\tfor var i in 0:(sampleRate * durationInSeconds) do\n\t\t\t\t{\n\t\t\t\t\tr_samples.push(sin( i * (r_freq / sampleRate) * 2 * pi()));\n\t\t\t\t}\n\n\t\t\t\tvar sound = Sound([l_samples, r_samples], sampleRate);\n\t\t\t\t# only play 0.5 of 2 seconds\n\t\t\t\tsound.play();\n\t\t\t\twait(500);\n\t\t\t\t# all sounds are stopped at the end of the program\n\t\t\t</tscript>\n\t\t\t</div>\n\n\t\t\t<div class="example">\n\t\t\t<h3>Example</h3>\n\t\t\t<p> The following code constructs a sound object from a data URI, representing\n\t\t\tmp3 encoded data. The sound is played three times.\n\t\t\t<tscript>\n\t\t\tvar mp3 = "data:audio/mpeg;base64,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AQAAAaQAAAAgAAA0gAAABKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqv/7FGThj/AAAGkAAAAIAAANIAAAAQAAAaQAAAAgAAA0gAAABKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqv/7FGThj/AAAGkAAAAIAAANIAAAAQAAAaQAAAAgAAA0gAAABKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqv/7FGThj/AAAGkAAAAIAAANIAAAAQAAAaQAAAAgAAA0gAAABKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqv/7FGThj/AAAGkAAAAIAAANIAAAAQAAAaQAAAAgAAA0gAAABKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqv/7FGThj/AAAGkAAAAIAAANIAAAAQAAAaQAAAAgAAA0gAAABKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqv/7FGThj/AAAGkAAAAIAAANIAAAAQAAAaQAAAAgAAA0gAAABKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqv/7FGThj/AAAGkAAAAIAAANIAAAAQAAAaQAAAAgAAA0gAAABKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqg==";\n\t\t\tvar sound = audio.Sound(mp3);\n\t\t\tfor 0:3 do\n\t\t\t{\n\t\t\t\tsound.play();\n\t\t\t\twait(1000);\n\t\t\t}\n\t\t\t</tscript>\n\t\t\t</div>\n\t\t',children:[]}]}},2188:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.escapeHtmlChars=void 0,e.escapeHtmlChars=function(t){let e="";for(let n=0;n<t.length;n++){let r=t[n];e+="\n"==r?"<br/>":'"'==r?"&quot;":"<"==r?"&lt;":">"==r?"&gt;":"&"==r?"&amp;":r}return e}},8910:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createInterpreter=void 0;const r=n(8706),i=n(6025),a=n(5939);e.createInterpreter=function(t,e,n){let o=new a.Interpreter(t,(0,i.createDefaultServices)());o.service.canvas._trafo_a=Array(Array(1,0),Array(0,1)),o.service.canvas._trafo_b=Array(0,0),o.service.canvas._transform=function(t){let e=Array();for(let n of t)e.push([o.service.canvas._trafo_a[0][0]*n[0]+o.service.canvas._trafo_a[0][1]*n[1]+o.service.canvas._trafo_b[0],o.service.canvas._trafo_a[1][0]*n[0]+o.service.canvas._trafo_a[1][1]*n[1]+o.service.canvas._trafo_b[1]]);return e},o.service.canvas._multiply=function(t,e){let n=[[o.service.canvas._trafo_a[0][0]*t[0][0]+o.service.canvas._trafo_a[0][1]*t[1][0],o.service.canvas._trafo_a[0][0]*t[0][1]+o.service.canvas._trafo_a[0][1]*t[1][1]],[o.service.canvas._trafo_a[1][0]*t[0][0]+o.service.canvas._trafo_a[1][1]*t[1][0],o.service.canvas._trafo_a[1][0]*t[0][1]+o.service.canvas._trafo_a[1][1]*t[1][1]]],r=[o.service.canvas._trafo_a[0][0]*e[0]+o.service.canvas._trafo_a[0][1]*e[1]+o.service.canvas._trafo_b[0],o.service.canvas._trafo_a[1][0]*e[0]+o.service.canvas._trafo_a[1][1]*e[1]+o.service.canvas._trafo_b[1]];o.service.canvas._trafo_a=n,o.service.canvas._trafo_b=r},o.service.canvas._quadratic=function(t){return[[(t*=t)*o.service.canvas._trafo_a[0][0]*o.service.canvas._trafo_a[0][0]+t*o.service.canvas._trafo_a[0][1]*o.service.canvas._trafo_a[0][1],t*o.service.canvas._trafo_a[0][0]*o.service.canvas._trafo_a[1][0]+t*o.service.canvas._trafo_a[0][1]*o.service.canvas._trafo_a[1][1]],[t*o.service.canvas._trafo_a[1][0]*o.service.canvas._trafo_a[0][0]+t*o.service.canvas._trafo_a[1][1]*o.service.canvas._trafo_a[0][1],t*o.service.canvas._trafo_a[1][0]*o.service.canvas._trafo_a[1][0]+t*o.service.canvas._trafo_a[1][1]*o.service.canvas._trafo_a[1][1]]]},o.eventnames["canvas.resize"]=!0,o.eventnames["canvas.mousedown"]=!0,o.eventnames["canvas.mouseup"]=!0,o.eventnames["canvas.mousemove"]=!0,o.eventnames["canvas.mouseout"]=!0,o.eventnames["canvas.keydown"]=!0,o.eventnames["canvas.keyup"]=!0,o.eventnames.timer=!0,o.reset();for(let t=0;t<e.length;t++)if("object"==typeof e[t]&&null!==e[t]){let n=e[t].type,i=e[t].classname,a=e[t].event,s=o.program,l=i.split(".");for(let t of l)s=s.names[t];let c={type:s,value:{a:Array()}};for(let t=0;t<n.objectsize;t++)c.value.a.push(r.TScript.json2typed.call(o,null));if(a)for(let t in a){if(!a.hasOwnProperty(t))continue;let e=s.names[t].id;c.value.a[e]=r.TScript.json2typed.call(o,a[t])}o.eventqueue.push({type:n,event:c}),e.splice(t,1),t--}let s=o.service.turtle.move;return o.service.print=function(t){n.push({type:"print",value:t})},o.service.alert=function(t){return new Promise(((e,r)=>{n.push({type:"alert",value:t}),e(null)}))},o.service.confirm=function(t){return new Promise(((t,n)=>{e&&0!==e.length?t(!!e.shift()):t(!1)}))},o.service.prompt=function(t){return new Promise(((t,n)=>{e&&0!==e.length?t(e.shift()):t("")}))},o.service.message=function(t,e=null,r=null,i=""){n.push({type:"runtime error",message:t,line:e,href:i})},o.service.turtle.move=function(t){let e=o.service.turtle.x,r=o.service.turtle.y;s.call(this,t);let i=o.service.turtle.x,a=o.service.turtle.y;o.service.turtle.down&&0!=t&&n.push({type:"turtle line",from:[e,r],to:[i,a],color:o.service.turtle.rgb})},o.service.canvas.dom={width:1920,height:1080},o.service.canvas.setLineColor=function(t,e,r){n.push({type:"canvas setLineColor",r:t,g:e,b:r})},o.service.canvas.setFillColor=function(t,e,r){n.push({type:"canvas setFillColor",r:t,g:e,b:r})},o.service.canvas.clear=function(){n.push({type:"canvas clear"})},o.service.canvas.line=function(t,e,r,i){let a=o.service.canvas._transform([[t,e],[r,i]]);n.push({type:"canvas line",from:a[0],to:a[1]})},o.service.canvas.rect=function(t,e,r,i){r<0&&(t+=r,r=-r),i<0&&(e+=i,i=-i);let a=o.service.canvas._transform([[t,e],[t+r,e],[t+r,e+i],[t,e+i]]);n.push({type:"canvas line",from:a[0],to:a[1]}),n.push({type:"canvas line",from:a[1],to:a[2]}),n.push({type:"canvas line",from:a[2],to:a[3]}),n.push({type:"canvas line",from:a[3],to:a[0]})},o.service.canvas.fillRect=function(t,e,r,i){r<0&&(t+=r,r=-r),i<0&&(e+=i,i=-i);let a=o.service.canvas._transform([[t,e],[t+r,e],[t+r,e+i],[t,e+i]]);n.push({type:"canvas fill",points:a})},o.service.canvas.frameRect=function(t,e,r,i){r<0&&(t+=r,r=-r),i<0&&(e+=i,i=-i);let a=o.service.canvas._transform([[t,e],[t+r,e],[t+r,e+i],[t,e+i]]);n.push({type:"canvas fill",points:a}),n.push({type:"canvas line",from:a[0],to:a[1]}),n.push({type:"canvas line",from:a[1],to:a[2]}),n.push({type:"canvas line",from:a[2],to:a[3]}),n.push({type:"canvas line",from:a[3],to:a[0]})},o.service.canvas.circle=function(t,e,r){n.push({type:"canvas ellipse curve",center:o.service.canvas._transform([[t,e]])[0],shape:o.service.canvas._quadratic(r)})},o.service.canvas.fillCircle=function(t,e,r){n.push({type:"canvas ellipse fill",center:o.service.canvas._transform([[t,e]])[0],shape:o.service.canvas._quadratic(r)})},o.service.canvas.frameCircle=function(t,e,r){let i=o.service.canvas._transform([[t,e]])[0],a=o.service.canvas._quadratic(r);n.push({type:"canvas ellipse fill",center:i,shape:a}),n.push({type:"canvas ellipse curve",center:i,shape:a})},o.service.canvas.curve=function(t,e){let r=o.service.canvas._transform(t);for(let e=1;e<r.length;e++)n.push({type:"canvas line",from:t[e-1],to:t[e]});e&&n.push({type:"canvas line",from:t[t.length-1],to:t[0]})},o.service.canvas.fillArea=function(t){n.push({type:"canvas fill",points:o.service.canvas._transform(t)})},o.service.canvas.frameArea=function(t){n.push({type:"canvas frame",points:o.service.canvas._transform(t)})},o.service.canvas.text=function(t,e,r){let i=o.service.canvas._transform([[t,e]])[0];n.push({type:"canvas text",position:i,str:r})},o.service.canvas.reset=function(){o.service.canvas._trafo_a=[[1,0],[0,1]],o.service.canvas._trafo_b=[0,0]},o.service.canvas.shift=function(t,e){o.service.canvas._multiply([[1,0],[0,1]],[t,e])},o.service.canvas.scale=function(t){o.service.canvas._multiply([[t,0],[0,t]],[0,0])},o.service.canvas.rotate=function(t){let e=Math.cos(t),n=Math.sin(t);o.service.canvas._multiply([[e,-n],[n,e]],[0,0])},o.service.canvas.transform=function(t,e){o.service.canvas._multiply(t,e)},o}},2831:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hasStructure=void 0;const r=n(6676);e.hasStructure=function(t,e){let n=function(t){let e=0;function n(){for(;e<t.length&&(" "===t[e]||"\t"===t[e]||"\n"===t[e]||"\r"===t[e]);)e++}function r(){if(n(),e>=t.length)return null;let r=t[e];if('"'===r){let n="";for(e++;e<t.length;){if(r=t[e],e++,'"'===r)return n;n+=r}return null}if("'"===r){let n="";for(e++;e<t.length;){if(r=t[e],e++,"'"===r)return n;n+=r}return null}if(r>="A"&&r<="Z"||r>="a"&&r<="z"||"_"===r){let n=r;for(e++;r=t[e],r>="A"&&r<="Z"||r>="a"&&r<="z"||r>="0"&&r<="9"||"_"===r;)n+=r,e++;return n}return null}function i(){let a=r();if(null===a)return null;let o={petype:a};if(n(),e>=t.length)return null;let s=t[e];if("("===s){e++;let i=r();if(null===i)return null;if(n(),")"!=t[e])return null;e++,o.base={name:i}}else if("["===s){e++;let i=r();if(null===i)return null;if(n(),"]"!=t[e])return null;e++,o.name=i}if(n(),e>=t.length)return null;if(s=t[e],"{"!==s)return";"===s?(e++,o):null;{e++;let r=new Array;for(;;){if(n(),e>=t.length)return null;if(";"===t[e]){e++;continue}if("}"===t[e])return e++,o.sub=1===r.length?r[0]:r,o;let a=i();if(null===a)return null;r.push(a)}}}if(n(),e>=t.length)return null;if("{"!==t[e]){let r=i();return n(),e>=t.length?r:null}{e++;let r=new Array;for(;;){if(n(),e>=t.length)return null;if(";"===t[e]){e++;continue}if("}"===t[e])return e++,n(),e>=t.length?1===r.length?r[0]:r:null;let a=i();if(null===a)return null;r.push(a)}}}(e);return null===n?(console.log("error in pseudo code:\n\n"+e),!1):function(t,e){function n(t){return null!==t&&"object"==typeof t&&t.constructor===Object}function i(t){return Array.isArray(t)||n(t)}function a(t,e){if(t.nstack.length!=e.nstack.length||t.dstack.length!=e.dstack.length||t.next.length!=e.next.length)return!1;for(let n=0;n<t.nstack.length;n++){if(t.nstack[n].length!=e.nstack[n].length)return!1;for(let r=0;r<t.nstack[n].length;r++)if(t.nstack[n][r]!==e.nstack[n][r])return!1}for(let n=0;n<t.dstack.length;n++)if(t.dstack[n]!==e.dstack[n])return!1;for(let n=0;n<t.next.length;n++)if(t.next[n]!==e.next[n])return!1;return!0}let o=[{nstack:new Array,dstack:new Array,next:[t]}];return function t(e){if(!e)return!1;if(e.builtin)return!1;if("breakpoint"===e.petype)return!1;let s=o.length;for(let t=0;t<s;t++){let a=o[t];if(0===a.next.length)continue;let s=a.next[0];if(!i(s))throw new Error("[isSubtree] key node is not an array or object");let l=Array.isArray(e)===Array.isArray(s);if(l&&n(s)){if(s.hasOwnProperty("petype")){let t=e.petype?e.petype:"",n=s.petype?s.petype:"";l=t.indexOf(n)>=0}s.hasOwnProperty("name")&&(l=(e.name?e.name:"")===(s.name?s.name:""))}if(l){let t=a.nstack.slice(),n=a.dstack.slice();t.push(a.next.slice(1)),n.push(e);let l=new Array;for(let t in s){if(!s.hasOwnProperty(t))continue;if(r.reserved_node_names.hasOwnProperty(t))continue;let e=s[t];i(e)&&l.push(e)}o.push({nstack:t,dstack:n,next:l})}}for(let n in e){if(!e.hasOwnProperty(n))continue;if(r.reserved_node_names.hasOwnProperty(n))continue;let a=e[n];if(i(a)&&t(a))return!0}let l=new Array,c=new Array;for(let t=0;t<o.length;t++){let n=o[t];if(n.dstack[n.dstack.length-1]===e){if(n.next.length>0)continue;if(n.dstack.pop(),n.next=n.nstack.pop(),0===n.nstack.length)return!0;c.push(n)}else l.push(n)}o=l;for(let t=0;t<c.length;t++){let e=!1;for(let n=0;n<o.length;n++)if(a(c[t],o[n])){e=!0;break}e||o.push(c[t])}return!1}(e)}(n,t)}},6519:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.evaluation=void 0;const r=n(2188),i=n(2128);e.evaluation=function(){let t={};function e(t){return"object"==typeof t&&null!==t}function n(t){let e=0,n=(t=String(t)).length;if(0===n)return null;if("-"===t[e]&&e++,e>=n||t[e]<"0"||t[e]>"9")return null;for(;e<n&&t[e]>="0"&&t[e]<="9";)e++;if(e<n){if("."===t[e]){if(e++,e===n||t[e]<"0"||t[e]>"9")return null;for(;e<n&&t[e]>="0"&&t[e]<="9";)e++}if("e"===t[e]||"E"===t[e]){if(e++,"+"!==t[e]&&"-"!==t[e]||e++,t[e]<"0"||t[e]>"9")return null;for(;e<n&&t[e]>="0"&&t[e]<="9";)e++}}return e<n?null:parseFloat(t)}function a(t,e,n=.01){return Array.isArray(t)&&Array.isArray(e)&&2==t.length&&2==e.length?Math.abs(t[0]-e[0])>n||Math.abs(t[1]-e[1])>n?"Wrong coordinates - expected: "+e+" - obtained: "+t:null:"internal error: unexpected data type in check_coordinates"}function o(t,e,n=1e-4){return Math.abs(t[0][0]-e[0][0])>n||Math.abs(t[0][1]-e[0][1])>n||Math.abs(t[1][0]-e[1][0])>n||Math.abs(t[1][1]-e[1][1])>n?0===t[0][1]&&0===t[1][0]&&0===e[0][1]&&0===e[1][0]&&Math.abs(t[0][0]-t[1][1])<=n&&Math.abs(e[0][0]-e[1][1])<=n?"Wrong radius - expected: "+Math.sqrt(e[0][0])+" - obtained: "+Math.sqrt(t[0][0]):"Wrong ellipse shape - expected: "+e+" - obtained: "+t:null}function s(t,r){if(Array.isArray(t)){if(!Array.isArray(r))return"internal error: unexpected data type in compare_events";if(t.length!=r.length)return"Wrong array size - expected "+r.length+" - obtained "+t.length;for(let e=0;e<t.length;e++){let n=s(t[e],r[e]);if(""!=n)return n}return""}if(e(t)){if(!e(r))return"internal error: unexpected data type in compare_events";if(t.hasOwnProperty("type")&&r.hasOwnProperty("type")&&t.type!=r.type)return"Wrong result data type - expected: "+r.type+" - obtained: "+t.type;if("print"===t.type||"alert"===t.type){if(t.value!=r.value)return"Wrong message in "+t.type+" command - expected: "+r.value+" - obtained: "+t.value}else if("turtle line"===t.type){let e=s(t.from,r.from),n=s(t.to,r.to),i=s(t.to,r.from),a=s(t.from,r.to);if(!(""==e&&""==n||""==i&&""==a))return""!=e?e:n}else if("canvas line"===t.type){if((a(t.from,r.from)||a(t.to,r.to))&&(a(t.from,r.to)||a(t.to,r.from)))return"Line coordinates do not match - expected: "+r.from+" to "+r.to+" - obtained: "+t.from+" to "+t.to}else if("canvas fill"===t.type){let e=function(t,e,n=.01){if(t.length!==e.length)return"Number of points does not match - expected "+e.length+" - obtained "+t.length;let r=e.length;for(let i=0;i<r;i++){{let o=!0;for(let s=0;s<r;s++)if(a(t[(i+s)%r],e[s],n)){o=!1;break}if(o)return null}{let o=!0;for(let s=0;s<r;s++)if(a(t[(i+r-s)%r],e[s],n)){o=!1;break}if(o)return null}}return"Outlines do not match - expected "+JSON.stringify(e)+" - obtained "+JSON.stringify(t)}(t.points,r.points);if(e)return e}else if("canvas ellipse curve"===t.type){let e=a(t.center,r.center);if(e)return e;if(e=o(t.shape,r.shape),e)return e}else if("canvas ellipse fill"===t.type){let e=a(t.center,r.center);if(e)return e;if(e=o(t.shape,r.shape),e)return e}else if("canvas text"===t.type){let e=a(t.position,r.position);if(e)return e;if(t.str!==r.str)return"Wrong text - expected: "+r+" - obtained: "+t}else for(let e in t){if(!t.hasOwnProperty(e))continue;if("type"===e)continue;let n=s(t[e],r[e]);if(""!=n)return n}return""}if("string"==typeof t||"number"==typeof t){let e=n(t),i=n(r);if(null===e||null===i){if(t!=r)return"Wrong value - expected: "+r+" - obtained: "+t}else if(!(Math.abs(e-i)<1e-4||Math.abs(e/i-1)<1e-4))return"Wrong number - expected: "+r+" - obtained: "+t;return""}return t!=r?"Wrong value - expected: "+r+" - obtained: "+t:""}function l(t,n,i=null,a=!1){i||(i="$j71dKyoSL2KmbHXIa5dC$");let o='<table class="code-evaluation">\r\n<tr><th>your solution</th><th>reference solution</th></tr>\r\n',l=0,c=function(t,e,n=""){l++;let i="<tr><td";if(""!=n&&(i+=' class="'+n+'"'),i+=">",null!==e){i+="event type: "+(0,r.escapeHtmlChars)(e.type)+"<br/>";for(let t in e)e.hasOwnProperty(t)&&"type"!==t&&(i+=" "+(0,r.escapeHtmlChars)(t)+": "+(0,r.escapeHtmlChars)(JSON.stringify(e[t])))}if(i+="</td><td",""!=n&&(i+=' class="'+n+'"'),i+=">",null!==t){i+="event type: "+(0,r.escapeHtmlChars)(t.type)+"<br/>";for(let e in t)t.hasOwnProperty(e)&&"type"!==e&&(i+=" "+(0,r.escapeHtmlChars)(e)+": "+(0,r.escapeHtmlChars)(JSON.stringify(t[e])))}return i+="</td></tr>\r\n",i},d=n.findIndex((t=>"print"===t.type&&t.value===i)),h=t.findIndex((t=>"print"===t.type&&t.value===i));d>=0&&h>=0&&(n.splice(0,d+1),t.splice(0,h+1));let u=!1,p=!1;for(let t=0;t<n.length;t++){let e=n[t];e.type&&"print"===e.type&&(e.value.indexOf(i)>=0?u=!0:p=!0)}if(!p)for(let e=0;e<t.length;e++){let n=t[e];n.type&&"print"===n.type&&n.value.indexOf(i)<0&&(t.splice(e,1),e--)}let f="",m="",g="",y="";if(t.length>0&&"print"===t[t.length-1].type&&t[t.length-1].value.indexOf(i)>=0){let e=t[t.length-1].value,n=e.indexOf(i);f=e.substr(0,n),m=e.substr(n+i.length),t.splice(t.length-1,1)}if(n.length>0&&"print"===n[n.length-1].type&&n[n.length-1].value.indexOf(i)>=0){let t=n[n.length-1].value,e=t.indexOf(i);g=t.substr(0,e),y=t.substr(e+i.length),n.splice(n.length-1,1)}let v={"assertion failed":!0,"uncaught exception":!0,"runtime error;":!0},b=0,w=n.slice();for(;b<t.length;){let n=t[b].type;if("print"===n&&t[b].value.indexOf(i)>=0&&(n="marker"),"compile error"===n)return["Error while parsing the code - "+t[b].message,""];if(0===w.length){if("runtime error"===n)return o+="</table>\r\n",["Runtime error while executing the code - "+t[b].message,l>0?o:""];{o+=c(null,t[b],"error"),o+="</table>\r\n";let r="Unexpected surplus output";return e(t[b])&&t[b].hasOwnProperty("type")&&(r+=" of type "+n),[r,l>0?o:""]}}if("runtime error"===n){let e=null;for(let n in v)v.hasOwnProperty(n)&&t[b].message.indexOf(n)>=0&&(e=n);if("runtime error"===w[0].type){if(w[0].message.indexOf(e)>=0||w[0].href===t[b].href){b++,w.shift();continue}return o+=c(w[0],t[b],"error"),o+="</table>\r\n",["Unexpected runtime error; expected error: "+w[0].message+" - obtained error: "+t[b].message,l>0?o:""]}return["Runtime error while executing the code - "+t[b].message,""]}if(a){let e=-1;for(let n=0;n<w.length;n++)if(""===s(t[b],w[n])){e=n;break}if(e<0){let e='<tr><td class="error">event type: '+(0,r.escapeHtmlChars)(t[b].type)+"<br/>";for(let n in t[b])t[b].hasOwnProperty(n)&&"type"!==n&&(e+=" "+(0,r.escapeHtmlChars)(n)+": "+(0,r.escapeHtmlChars)(JSON.stringify(t[b][n])));e+='</td><td class="error">no matching event was produced by the reference solution. Candidates:<table>';for(let t=0;t<w.length;t++){e+='<tr><td class="error">event type: '+(0,r.escapeHtmlChars)(w[t].type)+"<br/>";for(let n in w[t])w[t].hasOwnProperty(n)&&"type"!==n&&(e+=" "+(0,r.escapeHtmlChars)(n)+": "+(0,r.escapeHtmlChars)(JSON.stringify(w[t][n])));e+="</td></tr>",l++}return e+="</table></td></tr>\r\n",o+=e+"</table>\r\n",["unmatched events, see detailed table for more information",l>0?o:""]}"marker"!=n&&(o+=c(w[e],t[b])),b++,w.splice(e,1)}else{let e=s(t[b],w[0]);if(""!=e)return o+=c(w[0],t[b],"error"),o+="</table>\r\n",[e,l>0?o:""];"marker"!=n&&(o+=c(w[0],t[b])),b++,w.shift()}}if(w.length>0){o+=c(w[0],null,"error"),o+="</table>\r\n";let t="";return"runtime error"===w[0].type?t="Runtime error expected":(t="Missing output",e(w[0])&&w[0].hasOwnProperty("type")&&(t+=" of type "+JSON.stringify(w[0].type))),o+="</table>\r\n",[t,l>0?o:""]}if(o+="</table>\r\n",0===l&&(o=""),""===f&&""===g)return["",""];function x(t,e){return e.indexOf("Type String")>=0?'"'+t.replace(/\\/g,"\\\\").replace(/\"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t")+'"':t+""}if(""===f)return["Missing return value - expected "+x(y,g)+" of type "+g+"; the function terminates without returning a value",""];if(""===g)throw new Error("internal error: missing return type in compare_runs");return f!=g&&(["<Type Integer>","<Type Real>"].indexOf(f)<0||["<Type Integer>","<Type Real>"].indexOf(g)<0)?["Wrong data type of the return value - expected: "+g+" - obtained: "+f,""]:""===s(m,y)?["",""]:["Wrong return value - expected: "+x(y,g)+" of type "+g+" - obtained: "+x(m,f)+" of type "+f,""]}return t.evaluate=function(t,e,n){let a="$j71dKyoSL2KmbHXIa5dC$";e+="\n#**#\n";let o=t.correct,s=t.points?t.points:0,c=t.timeout?t.timeout:3,d=t.hasOwnProperty("context")?t.context:"",h=new Array,u=new Array,p=new Array;function f(t){if("call"===t.type){let n=t.code,r=t.hasOwnProperty("context")?d+t.context:d;p.push(n);let i=r+"\n\n"+e+'\n\n{print("'+a+'"); var result = '+n+'; print(Type(result) + "'+a+'" + result);\n}\n',s=r+"\n\n"+o+'\n\n{print("'+a+'"); var result = '+n+'; print(Type(result) + "'+a+'" + result);\n}\n',l=t.hasOwnProperty("input")?t.input:new Array;h.push(i),u.push(l.slice()),h.push(s),u.push(l.slice())}else if("code"===t.type){let n=t.code,r=t.hasOwnProperty("context")?d+t.context:d;p.push(n);let i=r+"\n\n"+e+"\n\n{"+n+"\n}\n",a=r+"\n\n"+o+"\n\n{"+n+";\n}\n",s=t.hasOwnProperty("input")?t.input:new Array;h.push(i),u.push(s.slice()),h.push(a),u.push(s.slice())}else if("js"===t.type){let n=t.code;h.push("@"+n+"\n@\n"+e),u.push(new Array)}}if(t.hasOwnProperty("evaluation"))for(let e in t.tests)f(t.tests[e]);else if(t.hasOwnProperty("tests")&&null!==t.tests)for(let e=0;e<t.tests.length;e++)f(t.tests[e]);else h.push(e),u.push(t.hasOwnProperty("input")?t.input.slice():new Array),h.push(o),u.push(t.hasOwnProperty("input")?t.input.slice():new Array);(0,i.run_multiple)(h,u,c,(function(e){let i=null,o=null,c=s;if(null===e)i="internal error: failed to evaluate the code",c=0;else if("string"==typeof e)i=e,c=0;else if("object"!=typeof e||null===e||Array.isArray(e)){if(!t.hasOwnProperty("ignore-color")||t["ignore-color"])for(let y=0;y<e.length;y++)e[y]&&Array.isArray(e[y])&&(e[y]=e[y].filter((t=>"canvas setLineColor"!==t.type&&"canvas setFillColor"!==t.type)),e[y].length>0&&"canvas clear"===e[y][0].type&&e[y].shift());let d=t.hasOwnProperty("ignore-order")&&!!t["ignore-order"],h=0,u=!1,f=0,m=0;function g(t){let n=!0,r=null,i=null;if("call"===t.type){let t=l(e[m],e[m+1],a,d);""!=t[0]&&(n=!1,r="Error:\n"+t[0]+";\nTest code:\n"+p[f],i=t[1]),m+=2,f++}else if("code"===t.type){let t=l(e[m],e[m+1],a,d);""!=t[0]&&(n=!1,r=t[0],""!=p[f]&&(r="Error:\n"+t[0]+";\nTest code:\n"+p[f]),i=t[1]),m+=2,f++}else{if("js"!==t.type)throw new Error("unknown test type '"+t.type+"' in run_multiple");"string"==typeof e[m]&&(n=!1,r=e[m],t.hasOwnProperty("feedback")&&(i=t.feedback)),m++}return[n,r,i]}if(t.hasOwnProperty("evaluation")){let v={};for(let w in t.tests){let x=t.tests[w],k=!0,A=null,T=null;[k,A,T]=g(x),k||null!==i||(i=A,o=T),v[w]=k?1:0}let b=t.evaluation.replace(/\$/g,"tests.");c=new Function("tests","return "+b+";")(v)}else if(t.hasOwnProperty("tests")&&null!==t.tests){for(let _=0;_<t.tests.length;_++){let E=t.tests[_],S=!0,I=null,P=null;if([S,I,P]=g(E),S)E.hasOwnProperty("fraction")&&(h+=E.fraction);else if(c=0,u=!0,null===i&&(i=I,o=P),!E.hasOwnProperty("fatal")||E.fatal)break}u&&(c=h*s)}else{let q=l(e[0],e[1],a,d);""!=q[0]&&(c=0,i=q[0],o=q[1])}}else{if(i="Error:\n"+e.msg,t.tests){let C=0;for(let j=0;j<t.tests.length;j++){let z=t.tests[j];if("call"===z.type||"code"===z.type?C+=2:"js"===z.type&&(C+=1),C>e.index){z.code&&(o="<p>Test case:</p><pre>"+(0,r.escapeHtmlChars)(z.code)+"</pre>");break}}}c=0}n({error:i,details:o,points:c})}))},t}()},9395:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isRecursive=void 0;const r=n(8397),i=n(6025),a=n(5939),o=n(6676);e.isRecursive=function(t){return!!function(t){return!!t&&function t(e,n){if(e.builtin)return!1;if("breakpoint"===e.petype)return!1;if("function"===e.petype&&e.name){let t=n.slice();t.push(e.name),n=t}if("function call"===e.petype){if(e.base.name&&n.indexOf(e.base.name)>=0)return!0;if("this"===e.base.petype)return!0}for(let i in e){if(!e.hasOwnProperty(i))continue;if(o.reserved_node_names.hasOwnProperty(i))continue;let a=e[i];if(r=a,(Array.isArray(r)||function(t){return null!==t&&"object"==typeof t&&t.constructor===Object}(r))&&t(a,n))return!0}var r;return!1}(t,new Array)}(t)||function(t,e=3,n=[]){if(!t)return!1;n=n.slice();let o=new a.Interpreter(t,(0,i.createDefaultServices)());o.service.turtle.move,o.service.print=function(t){},o.service.alert=function(t){},o.service.message=function(t,e,n,r){},o.service.prompt=function(t){},o.service.turtle.move=function(t){},o.service.canvas.dom={width:1920,height:1080},o.service.canvas.clear=function(){},o.service.canvas.line=function(t,e,n,r){},o.service.canvas.rect=function(t,e,n,r){},o.service.canvas.fillRect=function(t,e,n,r){},o.service.canvas.frameRect=function(t,e,n,r){},o.service.canvas.circle=function(t,e,n){},o.service.canvas.fillCircle=function(t,e,n){},o.service.canvas.frameCircle=function(t,e,n){},o.service.canvas.curve=function(t,e){},o.service.canvas.fillArea=function(t){},o.service.canvas.frameArea=function(t){},o.service.canvas.text=function(t,e,n){},o.service.canvas.reset=function(){},o.service.canvas.shift=function(t,e){},o.service.canvas.scale=function(t){},o.service.canvas.rotate=function(t){},o.service.canvas.transform=function(t,e){},o.stopthread(),o.reset();let s=(new Date).getTime()+1e3*e;for(;;){let t=(new Date).getTime();if(t>=s)break;if("waiting"===o.status&&(o.status="running"),"running"!=o.status)break;for(;(new Date).getTime()-t<14&&"running"===o.status;){o.exec_step();let t=o.stack.length;for(let e=0;e<t;e++)for(let t=0;t<e;t++)if(o.stack[e].pe[0]===o.stack[t].pe[0])return!0;if(o.halt)break}o.timerEventEnqueued||(o.timerEventEnqueued=o.enqueueEvent("timer",{type:o.program.types[r.Typeid.typeid_null],value:{b:null}}))}return!1}(t)}},6676:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.reserved_node_names=void 0,e.reserved_node_names={breakpoints:!0,children:!0,class_constructor:!0,declaration:!0,displayname:!0,id:!0,lines:!0,name:!0,names:!0,operator:!0,params:!0,parent:!0,petype:!0,reference:!0,scope:!0,step:!0,sim:!0,superclass:!0,type:!0,types:!0,typedvalue:!0,var_id:!0,var_scope:!0,variables:!0,where:!0}},2128:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.run_multiple=void 0;const parser_1=__webpack_require__(7277),isRecursive_1=__webpack_require__(9395),hasStructure_1=__webpack_require__(2831),createInterpreter_1=__webpack_require__(8910);function run_multiple(code,inputs,maxseconds,process){let timeout=(new Date).getTime()+1e3*maxseconds,index=0,all=new Array,output=new Array;for(let t=0;t<inputs.length;t++)inputs[t]=inputs[t].slice();function compute(){let c=code[index];if("@"===c[0]){let split=c.indexOf("\n@\n"),jsc=c.substr(1,split-1),tsc=c.substr(split+3),testfunction;eval("testfunction = function(code, parse, hasStructure, isRecursive) {\n"+jsc+"\nreturn null; };\n"),all.push(testfunction(tsc,parser_1.parseProgramFromString,hasStructure_1.hasStructure,isRecursive_1.isRecursive)),output=new Array,index++,index===code.length?process(all):compute()}else{let t=(0,parser_1.parseProgramFromString)(c);if(t.program){let e=t.program,n=(0,createInterpreter_1.createInterpreter)(e,inputs[index],output);function r(){(new Date).getTime()>timeout?(n.stopthread(),all={msg:"timeout - program execution took too long",index},process(all)):"finished"===n.status||"error"===n.status?(n.stopthread(),all.push(output),output=new Array,index++,index===code.length?process(all):compute()):setTimeout(r,1)}n.reset(),n.run(),setTimeout(r,1)}else{let i=t.errors;for(let a=0;a<i.length;a++){let o=i[a];output.push({type:"compile error",line:o.line,message:o.message})}all.push(output),output=new Array,index++,index===code.length?process(all):compute()}}}compute()}exports.run_multiple=run_multiple},2907:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.app_id_gitlab=e.client_id_github=e.frontend_url=e.proxy_server_url=e.server_url=void 0,e.server_url="https://togla.ini.rub.de:31234",e.proxy_server_url="https://togla.ini.rub.de:31235",e.frontend_url="https://tglas.github.io/tscript/",e.client_id_github="Ov23li79J7jZEgnG3sdL",e.app_id_gitlab="72f4e1d2b9f44a1d54d4b3614147b9d3b73b02c9c20d5af59249058f5d4ab102"},1536:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toClipboard=void 0,e.toClipboard=function(t){let e=document.createElement("textarea");e.value=t,document.body.appendChild(e),e.focus(),e.select();try{document.execCommand("copy")}catch(t){}document.body.removeChild(e)}},6694:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.doc=void 0;const o=n(6142),s=n(150),l=n(6025),c=n(5939),d=n(7277),h=n(4641),u=n(101),p=n(7994),f=n(1586),m=a(n(6042)),g=n(1536),y=n(2188);e.doc=function(){let t=o.documentationData,n="",r=null;function i(t,r){let i={children:[],ids:[]};if(null===t)i.children.push(e.doc),i.ids.push("");else{i.opened=r.split("/").length<=2||n.substr(0,r.length)==r;for(var a=0;a<t.children.length;a++)i.children.push(t.children[a]),i.ids.push(r+"/"+t.children[a].id);i.element=m.createElement({type:"span"}),m.createElement({type:"span",parent:i.element,classname:r==n?"entry current":"entry",text:t.name})}return i}let a=function(t){let e=t.current();if(e>="A"&&e<="Z"||e>="a"&&e<="z"||"_"==e){let n=e;for(t.advance();t.good();){let e=t.current();if(!(e>="A"&&e<="Z"||e>="a"&&e<="z"||e>="0"&&e<="9"||"_"==e||"-"==e))break;n+=e,t.advance()}return{type:"identifier",value:n}}if('"'==e){t.advance();let e="";for(;;){t.good()||t.error("syntax error in string literal; closing double quotes '\"' expected");let n=t.current();if("\r"==n||"\n"==n)t.error("syntax error in string literal; closing double quotes '\"' expected before end-of-line");else{if('"'==n){t.advance();break}e+=n,t.advance()}}return{type:"literal",value:e}}if("'"==e){t.advance();let e="";for(;;){t.good()||t.error("syntax error in string literal; closing single quotes ' expected");let n=t.current();if("\r"==n||"\n"==n)t.error("syntax error in string literal; closing double quotes '\"' expected before end-of-line");else{if("'"==n){t.advance();break}e+=n,t.advance()}}return{type:"literal",value:e}}if("$"==e){t.advance();let e="";for(;;){t.good()||t.error("syntax error in special; closing dollar sigh '$' expected");let n=t.current();if(t.advance(),"$"==n)break;e+=n}return{type:"special",value:e}}if("#"==e){t.advance();let e="";for(;t.good();){let n=t.current();if(e+=n,t.advance(),"\n"==n)break}return{type:"comment",value:e}}return t.advance(),"=,-|".indexOf(e)>=0?{type:"operator",value:e}:"()[]{}".indexOf(e)>=0?{type:"grouping",value:e}:";".indexOf(e)>=0?{type:"delimiter",value:e}:void t.error("EBNF syntax error; invalid character '"+e+"'")},v=function(t){if("#"==t.current()){if(t.advance(),"*"==t.current()){for(t.advance();("*"!=t.current()||"#"!=t.next())&&""!=t.current();)t.advance();return t.advance(2),{type:"comment"}}for(;"\n"!=t.current()&&""!=t.current();)t.advance();return t.advance(),{type:"comment"}}{let e=h.Lexer.get_token(t,d.defaultParseOptions,!0);return t.advance(e.code.length),e}};function b(t,e,n){if(t.indexOf("\n")>=0){let r=t.split("\n"),i="",a=1e6;for(let t=0;t<r.length;t++){let e=r[t];if(a>=1e6){for(let t=0;t<e.length;t++)if(" \t\r".indexOf(e[t])<0){i=e.substr(0,t),a=t;break}}else for(let t=0;t<e.length&&!(t>=a);t++)if(i[t]!=e[t]){a=t,i=i.substr(0,a);break}}let o='<div class="'+e+'"><pre class="'+e+'">';for(let t=0;t<r.length;t++){let a=r[t];0==t&&a.length<=i.length||(a.length>i.length&&(o+=b(a.substr(i.length),e,n)),o+="\n")}for(;o.length>0&&"\n"==o[o.length-1];)o=o.substr(0,o.length-1);return o+="</pre></div>",o}{let r=k(t),i='<code class="'+e+'">';for(;!r.eof();){for(;r.good();){let t=r.current();if(" \t\r".indexOf(t)<0)break;" "==t?i+=t:"\t"==t&&(i+="    "),r.advance()}if(r.eof())break;let a=r.pos,o=n(r),s=t.substr(a,r.pos-a);s=s.replaceAll("&","&amp").replaceAll("<","&lt;"),i+='<span class="'+e+"-"+o.type+'">'+s+"</span>"}return i+="</code>",i}}function w(t){let e=(0,d.parseProgramFromString)(t);if(!e.program)throw e.errors[0].message;let n=new c.Interpreter(e.program,(0,l.createDefaultServices)());for(n.reset(),n.service.message=function(t){throw t},n.service.documentation_mode=!0;"running"==n.status||"waiting"==n.status;)n.exec_step();"finished"!=n.status&&alert("code sample failed to run:\n"+t)}function x(t){let e=k(t);function n(){let t=!0;for(;e.good();){e.skip();let r=a(e);if(!r)return null;if("comment"!=r.type)if("grouping"==r.type){if(")]}".indexOf(r.value)>=0)return r;t||e.error("EBNF syntax error: operator or closing bracket expected"),null===n()&&e.error("EBNF: opening "+r.value+" not properly closed"),t=!1}else if("identifier"==r.type||"literal"==r.type||"special"==r.type)t||e.error("EBNF syntax error: operator or closing bracket expected"),t=!1;else if("operator"==r.type)t&&e.error("EBNF syntax error: expression expected before operator "+r.value),"="==r.value&&e.error("EBNF syntax error: assignment does not work here"),t=!0;else{if("delimiter"==r.type)return t&&e.error("EBNF syntax error: expression expected before semicolon"),r;e.error("unexpected token type in checkEBNF")}}return null}let r=!0;for(;e.skip(),e.good();){let t=a(e);if("identifier"!=(null==t?void 0:t.type)&&e.error("EBNF syntax error: left-hand-side must be an identifier"),e.skip(),!e.good()){if(r)break;e.error("EBNF syntax error: assignment operator '=' expected")}let i=a(e);if(!i)break;"operator"==i.type&&"="==i.value||e.error("EBNF syntax error: assignment operator '=' expected");let o=n();";"!=(null==o?void 0:o.value)&&e.error("EBNF syntax error: final semicolon expected"),r=!1}}function k(t){return{source:t,pos:0,good:function(){return this.pos<this.source.length},bad:function(){return!this.good()},eof:function(){return this.pos>=this.source.length},indentation:function(){return 0},error:function(t,e=[]){let n="documentation internal error in code: '"+this.source+"' ("+t+")";throw new Error(n)},current:function(){return this.pos>=this.source.length?"":this.source[this.pos]},lookahead:function(t){return this.pos+t>=this.source.length?"":this.source[this.pos+t]},next:function(){return this.lookahead(1)},get:function(){return{pos:this.pos,line:this.line,ch:this.ch}},set:function(t){this.pos=t.pos,this.line=t.line,this.ch=t.ch},advance:function(t=1){this.pos+t>this.source.length&&(t=this.source.length-this.pos);for(let e=0;e<t;e++)"\n"==this.current()&&(this.line++,this.ch=0),this.pos++,this.ch++},skip:function(){for(;this.good();){let t=this.current();if("#"!=t){if(" "!=t&&"\t"!=t&&"\r"!=t&&"\n"!=t)break;"\n"==t?(this.line++,this.ch=0):this.ch++,this.pos++}else if(this.pos++,this.ch++,"*"==this.current()){this.pos++,this.ch++;let t=!1;for(;this.good();)if("\n"!=this.current()){if(t&&"#"==this.current()){this.pos++,this.ch++;break}t="*"==this.current(),this.pos++,this.ch++}else this.pos++,this.line++,this.ch=0,t=!1}else for(;this.good()&&"\n"!=this.current();)this.pos++,this.ch++}}}}function A(t,e=!1){let n=t.toLowerCase(),r="",i=0;for(;i<t.length;){let o=n.indexOf("<",i);if(o<0){r+=t.substr(i);break}if(r+=t.substr(i,o-i),i=o,"<ebnf>"==n.substr(i,6)){i+=6;let o=n.indexOf("</ebnf>",i);if(o<0)throw"[doc] <ebnf> tag not closed";let s=t.substr(i,o-i);i=o+7,e||x(s),r+=b(s,"ebnf",a)}else if("<ebnf do-not-check>"==n.substr(i,19)){i+=19;let e=n.indexOf("</ebnf>",i);if(e<0)throw"[doc] <ebnf> tag not closed";let o=t.substr(i,e-i);i=e+7,r+=b(o,"ebnf",a)}else if("<tscript>"==n.substr(i,9)){i+=9;let a=n.indexOf("</tscript>",i);if(a<0)throw"[doc] <tscript> tag not closed";let o=t.substr(i,a-i);i=a+10,e||w(o),r+=b(o,e?"code":"copy code",v)}else if("<tscript do-not-run>"==n.substr(i,20)){i+=20;let a=n.indexOf("</tscript>",i);if(a<0)throw"[doc] <tscript> tag not closed";let o=t.substr(i,a-i);i=a+10,r+=b(o,e?"code":"copy code",v)}else if("<keyword>"==n.substr(i,9)){i+=9;let e=n.indexOf("</keyword>",i);if(e<0)throw"[doc] <keyword> tag not closed";let a=t.substr(i,e-i);i=e+10,r+='<span class="keyword">'+a+"</span>"}else r+=t[i],i++}return r}function T(t){let n=t.split("/");if(""!=n[0])throw"invalid path: "+t;let r=null,i=null,a=-1,o=e.doc;for(let s=1;s<n.length;s++){if(!o.hasOwnProperty("children"))throw"invalid path: "+t;let l=o.children,c=null;for(let t=0;t<l.length;t++)if(l[t].id==n[s]){r=o,i=r==e.doc?"":i+"/"+r.id,a=t,c=l[t];break}if(null===c)throw"invalid path: "+t;o=c}return[o,r,i,a]}function _(t,e){let n=function(t){let e=t.toLowerCase(),n="",r=0;for(;r<t.length;){let i=e.indexOf("<",r);if(i<0){n+=t.substr(r);break}if(n+=t.substr(r,i-r),r=i,"<ebnf>"==e.substr(r,6)){r+=6;let t=e.indexOf("</ebnf>",r);if(t<0)throw"[doc] <ebnf> tag not closed";r=t+7,n+=" "}else if("<tscript>"==e.substr(r,10)){r+=10;let t=e.indexOf("</tscript>",r);if(t<0)throw"[doc] <tscript> tag not closed";r=t+11,n+=" "}else if("<h1>"==e.substr(r,4)){r+=4;let i=e.indexOf("</h1>",r);if(i<0)throw"[doc] <h1> tag not closed";let a=t.substr(r,i-r)+" ";r=i+5,n+=a,n+=a,n+=a,n+=a,n+=a}else if("<h2>"==e.substr(r,4)){r+=4;let i=e.indexOf("</h2>",r);if(i<0)throw"[doc] <h2> tag not closed";let a=t.substr(r,i-r)+" ";r=i+5,n+=a,n+=a,n+=a}else if("<h3>"==e.substr(r,4)){r+=4;let i=e.indexOf("</h3>",r);if(i<0)throw"[doc] <h3> tag not closed";let a=t.substr(r,i-r)+" ";r=i+5,n+=a,n+=a}else{let e=t.indexOf(">",r+1);if(e<0)throw"[doc] tag not closed";r=e+1,n+=" "}}return n}("<h1>"+e.title+"</h1>\n"+e.content);f.searchengine.add(t,n);for(let n=0;n<e.children.length;n++){let r=e.children[n];_(t+"/"+r.id,r)}}function E(t,e){let n=0;for(;;){let r=t.content.indexOf('href="',n);if(r<0)break;n=r+6,r=t.content.indexOf('"',n);let i=t.content.substr(n,r-n);if(n=r+1,i.startsWith("?doc="))try{T(i.slice(5))}catch(t){alert("[link checker] broken link to '"+i+"' in document '"+e+"'")}}for(let n=0;n<t.children.length;n++)E(t.children[n],e+"/"+t.children[n].id)}return t.get_token_ebnf=a,t.get_token_code=v,t.processCode=b,t.prepare=A,t.setpath=function(e){if(e||(e=""),e.length>0&&"#"==e[0]&&(e=e.substr(1)),"search/"==e.substr(0,7)){let a=e.substr(7).split("/"),o="<h2>Search Results for <i>&quot;";for(let t=0;t<a.length;t++)0!=t&&(o+=" "),o+=(0,y.escapeHtmlChars)(a[t]);o+="&quot;</i></h2>";let s=f.searchengine.find(a);if(s.length>0){o+="<ul>";for(let t=0;t<s.length;t++){let e=s[t].id;o+='<li><a href="?doc='+e+'">'+T(e)[0].title+'</a><div class="searchresults">terms:<i>';let n=new Array;for(let e in s[t].matches)s[t].matches.hasOwnProperty(e)&&n.push([e,s[t].matches[e]]);n.sort((function(t,e){return e[1]-t[1]}));for(let t=0;t<n.length;t++)o+=" "+n[t][0];o+="</i></div></li>"}o+="</ul>"}else o+="<p>sorry, no results found</p>";t.dom_content.innerHTML=o,t.dom_content.scrollTop=0,n="",r.update(i)}else try{let a=T(e),o=a[0],s=a[1],l=a[2],c=a[3],d="<h1>"+o.title+"</h1>\n";if(o.hasOwnProperty("content")&&(d+=o.content+"\n"),o.hasOwnProperty("children")){if(d+='<div class="related">\n',d+="<h2>Related Topics</h2>\n<ul>\n",s){if(d+='back to enclosing topic: <a href="?doc='+l+'">'+s.name+"<a><br/>\n",c>0){let t=s.children[c-1];d+='previous topic: <a href="?doc='+l+"/"+t.id+'">'+t.name+"<a><br/>\n"}if(c+1<s.children.length){let t=s.children[c+1];d+='next topic: <a href="?doc='+l+"/"+t.id+'">'+t.name+"<a><br/>\n"}}if(o.children.length>0){d+="<h3>Subordinate Topics</h3>\n<ul>\n";for(let t=0;t<o.children.length;t++)d+='<li><a href="?doc='+e+"/"+o.children[t].id+'">'+o.children[t].name+"</a></li>\n";d+="</ul>\n"}d+="</div>\n"}d+='<div class="pad"></div>\n',t.dom_content.innerHTML=A(d),t.dom_content.scrollTop=0,n=e,r.update(i);let h=document.getElementsByTagName("pre");for(let t=0;t<h.length;t++){let e=h[t];if(e.className.indexOf("code")>=0){let t=e.textContent+"\n";e.parentNode.addEventListener("click",(function(e){(0,g.toClipboard)(t)}))}}}catch(t){throw t.message?alert(t.message):alert(t),t}},t.dom_container=null,t.dom_main=null,t.dom_sidebar=null,t.dom_version=null,t.dom_search=null,t.dom_searchtext=null,t.dom_tree=null,t.dom_content=null,t.embedded=!1,t.create=function(n,a){a||(a={embedded:!1}),t.embedded=a.embedded,a.embedded||(document.title="TScript Documentation",function(){let t=localStorage.getItem("tscript.ide.config"),e="default";if(t){let n=JSON.parse(t);n.hasOwnProperty("theme")&&(e=n.theme)}m.isThemeConfig(e)&&m.setThemeConfig(e)}()),t.dom_container=n,t.dom_main=m.createElement({type:"div",parent:n,id:"doc-main"}),t.dom_sidebar=m.createElement({type:"div",parent:n,id:"sidebar"}),t.dom_version=m.createElement({type:"div",parent:t.dom_sidebar,id:"version"}),t.dom_search=m.createElement({type:"div",parent:t.dom_sidebar,id:"search"}),t.dom_searchtext=m.createElement({type:"input",parent:t.dom_search,id:"searchtext",properties:{type:"text",placeholder:"search"}}),t.dom_tree=m.createElement({type:"div",parent:t.dom_sidebar,id:"tree"}),t.dom_content=m.createElement({type:"div",parent:n,id:"content"}),window.setTimeout((function(e){t.dom_version.innerHTML=u.Version.full(),t.dom_version.addEventListener("click",(function(e){t.embedded?t.setpath("/legal"):(0,p.navigate)("?doc=/legal")}))}),100);let o=function(t,e=""){let n=["X","Y","Z","W","V"];if(!t.hasOwnProperty("name")){let r=s.ErrorHelper.errorTemplate(e).split("$$");t.name=r[0];for(let e=1;e<r.length;e++)t.name+=n[e-1]+r[e]}t.hasOwnProperty("title")||(t.title="Error Message: "+t.name);for(let n=0;n<t.children.length;n++)o(t.children[n],e+"/"+t.children[n].id)};for(let t=0;t<e.doc.children.length;t++)"errors"==e.doc.children[t].id&&o(e.doc.children[t]);if(r=new m.TreeControl({parent:t.dom_tree,info:i,nodeclick:function(e,n,r){t.embedded?t.setpath(r):(0,p.navigate)("?doc="+r)}}),r.update(),f.searchengine.clear(),_("",e.doc),t.dom_searchtext.addEventListener("keypress",(function(e){if("Enter"==e.key)if(t.embedded){let e=f.searchengine.tokenize(t.dom_searchtext.value),n="#search";for(let t=0;t<e.length;t++)n+="/"+e[t];window.sessionStorage.setItem("docpath",n),t.setpath(n)}else{const e=new URLSearchParams({doc:"search",q:t.dom_searchtext.value});(0,p.navigate)("?"+e.toString())}})),E(e.doc,""),a.embedded){let e=window.sessionStorage.getItem("docpath");e||(e="#"),t.setpath(e),document.addEventListener("click",(function(e){let n=e.target||e.srcElement;if("A"===n.tagName){let r=n.getAttribute("href");return 0==r.length||!r.startsWith("?doc=")||(r=r.replace("?doc=","#"),window.sessionStorage.setItem("docpath",r),t.setpath(r),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),!1)}}))}},t}()},194:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ReplaceAction=e.UncommentAction=e.CommentAction=e.UnindentAction=e.IndentAction=e.SimpleAction=e.Action=void 0;const r=n(6566),i=n(1643);class a{constructor(){}execute(t,e){throw"override me in all sub-classes"}revert(t){throw"override me in all sub-classes"}}e.Action=a,a.empty=new Uint32Array(0),a.tab=new Uint32Array([9]);class o extends a{constructor(t,e,n=null,r=null,i=!0){super(),this.pos=e,this.remove=n?"number"==typeof n?t.range(e,e+n):n:a.empty,this.insert=r||a.empty,this.canMerge=i}execute(t,e){t._modify(this.pos,this.remove.length,this.insert),t.selection=e&&this.insert.length>0?this.pos:null,t.cursor=this.pos+this.insert.length}revert(t){t._modify(this.pos,this.insert.length,this.remove),t.selection=this.pos,t.cursor=this.pos+this.remove.length}linesChanged(t){let e=0,n=0;for(let t of this.remove)10===t&&e++;for(let t of this.insert)10===t&&n++;if(e+n===0)return null;let i=new r.Iterator(t);return i.setPosition(this.pos),{line:i.row,removed:e,inserted:n}}}e.SimpleAction=o,e.IndentAction=class extends a{constructor(t,e,n){super(),this.beginLine=e,this.endLine=n}execute(t,e){for(let e=this.beginLine;e<this.endLine;e++){let n=new r.Iterator(t);n.setCoordinates(e,0),t._modify(n.pos,0,a.tab)}let n=new r.Iterator(t);n.setCoordinates(this.beginLine,0),t.selection=n.pos,n.setCoordinates(this.endLine,0),t.cursor=n.pos}revert(t){for(let e=this.beginLine;e<this.endLine;e++){let n=new r.Iterator(t);n.setCoordinates(e,0),t._modify(n.pos,1,a.empty)}let e=new r.Iterator(t);e.setCoordinates(this.beginLine,0),t.selection=e.pos,e.setCoordinates(this.endLine,0),t.cursor=e.pos}},e.UnindentAction=class extends a{constructor(t,e,n){super(),this.beginLine=e,this.changed=new Uint8Array(n-e);let a=!1;for(let e=0;e<this.changed.length;e++){let n=new r.Iterator(t);if(n.setCoordinates(this.beginLine+e,0),9===n.character())this.changed[e]=i.tabWidth+1,a=!0;else if(32!==n.character())this.changed[e]=0;else{let t=0;for(let e=0;e<i.tabWidth&&32===n.character();e++)t++,n.advance();this.changed[e]=t,a=!0}}a||(this.changed=null)}trivial(){return null===this.changed}execute(t,e){if(!this.changed)return;for(let e=0;e<this.changed.length;e++){let n=this.changed[e];if(0===n)continue;let o=new r.Iterator(t);o.setCoordinates(this.beginLine+e,0),t._modify(o.pos,n>i.tabWidth?1:n,a.empty)}let n=new r.Iterator(t);n.setCoordinates(this.beginLine,0),t.selection=n.pos,n.setCoordinates(this.beginLine+this.changed.length,0),t.cursor=n.pos}revert(t){if(!this.changed)return;let e=new Uint32Array(i.tabWidth);e.fill(32);for(let n=0;n<this.changed.length;n++){let o=this.changed[n];if(0===o)continue;let s=o<=i.tabWidth?e.subarray(0,o):a.tab,l=new r.Iterator(t);l.setCoordinates(this.beginLine+n,0),t._modify(l.pos,0,s)}let n=new r.Iterator(t);n.setCoordinates(this.beginLine,0),t.selection=n.pos,n.setCoordinates(this.beginLine+this.changed.length,0),t.cursor=n.pos}},e.CommentAction=class extends a{constructor(t,e,n){super(),this.beginLine=e,this.endLine=n,this.cursor0=t.cursor,this.selection0=t.selection,this.cursor1=t.cursor,this.selection1=t.selection;let r=t.language.linecomment.length;null===this.selection1?this.cursor1+=r:this.cursor1<this.selection1?(this.cursor1+=r,this.selection1+=(n-e)*r):(this.cursor1+=(n-e)*r,this.selection1+=r)}execute(t,e){for(let e=this.beginLine;e<this.endLine;e++){let n=new r.Iterator(t);n.setCoordinates(e,0),t._modify(n.pos,0,t.language.linecomment)}t.cursor=this.cursor1,t.selection=this.selection1}revert(t){let e=t.language.linecomment.length;for(let n=this.beginLine;n<this.endLine;n++){let i=new r.Iterator(t);i.setCoordinates(n,0),t._modify(i.pos,e,a.empty)}t.cursor=this.cursor0,t.selection=this.selection0}},e.UncommentAction=class extends a{constructor(t,e,n){super(),this.beginLine=e,this.endLine=n,this.cursor0=t.cursor,this.selection0=t.selection,this.cursor1=t.cursor,this.selection1=t.selection;let r=t.language.linecomment.length;null===this.selection1?this.cursor1-=r:this.cursor1<this.selection1?(this.cursor1-=r,this.selection1-=(n-e)*r):(this.cursor1-=(n-e)*r,this.selection1-=r)}execute(t,e){let n=t.language.linecomment.length;for(let e=this.beginLine;e<this.endLine;e++){let i=new r.Iterator(t);i.setCoordinates(e,0),t._modify(i.pos,n,a.empty)}t.cursor=this.cursor1,t.selection=this.selection1}revert(t){for(let e=this.beginLine;e<this.endLine;e++){let n=new r.Iterator(t);n.setCoordinates(e,0),t._modify(n.pos,0,t.language.linecomment)}t.cursor=this.cursor0,t.selection=this.selection0}},e.ReplaceAction=class extends a{constructor(t,e,n,r){super(),this.actions=[],this.remove=[],this.insert=r,e.sort(((t,e)=>t-e));let i=n.length,a=r.length-i,s=0;for(let n of e){let e=t.range(n,n+i),r=this.remove.length;for(let t=0;t<this.remove.length;t++){let n=!0;for(let r=0;r<i;r++)if(this.remove[t][r]!==e[r]){n=!1;break}if(n){r=t;break}}r===this.remove.length&&this.remove.push(e);let l=new o(t,n+s,this.remove[r],this.insert);this.actions.push(l),s+=a}}execute(t,e){for(let n=0;n<this.actions.length;n++)this.actions[n].execute(t,e)}revert(t){for(let e=this.actions.length-1;e>=0;e--)this.actions[e].revert(t)}}},5852:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Document=void 0;const r=n(1643),i=n(6566),a=n(194),o=n(6232);class s{constructor(t,e){this.cursor=0,this.selection=null,this.history=[],this.history_pos=0,this.history_clean=0,this.language=t;let n=s.str2arr(e),r=this._createChunks(n,0);this.begin=r[0],this.end=r[r.length-1],this.root=this._buildTree(r)}static str2arr(t){let e=0,n=new Uint32Array(t.length);for(let r=0;r<t.length;r++){let i=t.codePointAt(r);i<32&&9!==i&&10!==i||(n[e]=i,e++,i>=65536&&r++)}return e<n.length&&(n=n.subarray(0,e)),n}static arr2str(t){if(t.length<=1024)return String.fromCodePoint(...t);let e=new Array;for(let n=0;n<t.length;n+=1024){let r=Math.min(n+1024,t.length),i=String.fromCodePoint(...t.slice(n,r));e.push(i)}return e.join("")}static chartype(t){return 10===t?0:t<=32||t>=128&&t<=160?1:t>=48&&t<=57?3:t>=65&&t<=90||t>=97&&t<=122||95===t||t>160?2:4}isDirty(){return this.history_clean!==this.history_pos}setClean(){this.history_clean=this.history_pos}text(){let t=new Array;for(let e=this.begin;null!==e;e=e.next)t.push(s.arr2str(e.data));return t.join("")}range(t,e){t=Math.max(0,Math.min(this.root.size,t)),e=Math.max(t,Math.min(this.root.size,e));let n=new Uint32Array(e-t),r=new i.Iterator(this);r.setPosition(t);let a=0;for(;r.pos<e;){let t=r.leaf.size-r.offset;if(e-r.pos<t){n.set(r.leaf.data.subarray(r.offset,r.offset+e-r.pos),a);break}n.set(r.leaf.data.subarray(r.offset,r.offset+t),a),a+=t,r.jump(t)}return n}size(){return this.root.size}height(){return this.root.linebreaks+1}width(){return Math.max(this.root.firstwidth,this.root.innerwidth,this.root.lastwidth)}view(t,e,n,r){let a=r-n,o=new Uint32Array(a*(e-t)),s=this.matchingBracket(this.cursor),l=Math.min(this.cursor,null===this.selection?this.cursor:this.selection),c=Math.max(this.cursor,null===this.selection?this.cursor:this.selection),d=new i.Iterator(this);if(d.setPosition(this.cursor),d.row>=t&&d.row<e){let e=(d.row-t)*a;d.col>=n&&d.col<r&&(o[e+d.col-n]|=67108864,"match"===s.status?o[e+d.col-n]|=536870912:"none"!==s.status&&(o[e+d.col-n]|=1073741824));for(let t=0;t<a;t++)o[e++]|=134217728}if("match"===s.status||"mismatch"===s.status){let l=new i.Iterator(this);if(l.setPosition(s.position),l.row>=t&&l.row<e){let e=(l.row-t)*a;l.col>=n&&l.col<r&&("match"===s.status?o[e+l.col-n]|=536870912:o[e+l.col-n]|=1073741824)}}let h=0;for(let a=t;a<e;a++){let t=!1,e=n,s=new i.HighlightingIterator(this,((i,a,s,l)=>{let c=2097152*s|(l?268435456:0);for(let t=0;t<a;t++){let a=e-i+t;if(!(a<n)){if(a>=r)break;o[h-i+t]+=c}}e-i+a>=r&&(t=!0)}));if(s.setCoordinates(a,n),s.atEnd())return o;for(;!t;){let t=s.character();if(t<32&&(t=32),null!==this.selection&&s.pos>=l&&s.pos<c&&(t|=33554432),!s.advance())return o;if(s.row>a){if(l<s.pos&&c>=s.pos)for(let n=e;n<r;n++)o[h++]+=t;else h+=r-e;break}{let n=Math.min(r,s.col);for(let r=e;r<n;r++)o[h++]+=t;e=s.col}}}return o}execute(t,e=!1){if(this.history.splice(this.history_pos),this.history_clean>this.history_pos&&(this.history_clean=-1),t.execute(this,!1),e&&this.history_pos>0){let e=this.history[this.history_pos-1];if(t instanceof a.SimpleAction&&e instanceof a.SimpleAction&&e.canMerge){var n;if(0===t.remove.length&&e.insert.length>0&&t.pos===e.pos+e.insert.length)return(n=new Uint32Array(e.insert.length+t.insert.length)).set(e.insert),n.set(t.insert,e.insert.length),void(e.insert=n);if(0===t.insert.length&&e.remove.length>0&&t.pos+t.remove.length===e.pos)return(n=new Uint32Array(e.remove.length+t.remove.length)).set(t.remove),n.set(e.remove,t.remove.length),e.pos-=t.remove.length,void(e.remove=n);if(0===t.insert.length&&0===e.insert.length&&t.pos===e.pos)return(n=new Uint32Array(e.remove.length+t.remove.length)).set(e.remove),n.set(t.remove,e.remove.length),void(e.remove=n)}}this.history.push(t),this.history_pos++}undo(){if(0===this.history_pos)return null;this.history_pos--;let t=this.history[this.history_pos];return t.revert(this),t}redo(){if(this.history_pos===this.history.length)return null;let t=this.history[this.history_pos];return t.execute(this,!0),this.history_pos++,t}find(t,e,n=!0,r=!0){let a=e.length;if(0===a)return t;function o(t,e){return n&&(t<256&&(t+=s._lower[t]),e<256&&(e+=s._lower[e])),t===e}let l=new Uint32Array(a);for(let t=0;t<a;t++){l[t]=t;for(let n=1;n<t-1;n++){let r=!0;for(let i=0;i<t-n;i++)if(!o(e[i],e[n+i])){r=!1;break}if(r){l[t]=n;break}}}let c=this.root.size,d=0,h=new i.Iterator(this);if(t<=c-a)for(h.setPosition(t);h.pos<c;){let t=h.character();if(o(t,e[d]))d++;else for(;d=Math.max(0,d-l[d]),0!==d;)if(o(t,e[d])){d++;break}if(d===a)return h.pos-a+1;h.advance()}if(!r)return null;for(h.setPosition(0),c=Math.min(this.root.size,t+a-1);h.pos<c;){let t=h.character();if(o(t,e[d]))d++;else for(;d=Math.max(0,d-l[d]),0!==d;)if(o(t,e[d])){d++;break}if(d===a)return h.pos-a+1;h.advance()}return null}matchingBracket(t=null){null===t&&(t=this.cursor);let e=new i.Iterator(this);e.setPosition(t);let n=e.character(),a=String.fromCharCode(n);if("()[]{}".indexOf(a)<0)return{status:"none",position:null};const s={"(":")","[":"]","{":"}"};let l=s.hasOwnProperty(a),c=e.leaf,d=e.offset;t-=d;let h=(t,e)=>{let n=new Array,r=t.state;for(let i=0;i<t.data.length;i++){let a=t.data[i],l=this.language.process(r,a);if(r=o.Language.state(l),o.Language.again(l)&&(l=this.language.process(r,a),r=o.Language.state(l)),o.Language.bracket(l)){let t=String.fromCharCode(a);e&&n.length>0&&t===s[n[n.length-1].bracket]?n.pop():n.push({bracket:t,offset:i})}}return n},u=h(c,!1),p=!1;for(let t of u)t.offset===d&&(p=!0);if(!p)return{status:"none",iterator:null};if(l){let e=new Array;for(let n of u)if(!(n.offset<d))if(s.hasOwnProperty(n.bracket))e.push(n.bracket);else{if(0===e.length)throw"[Document.matchingBracket] internal error (unmatched is empty)";if(s[e[e.length-1]]!==n.bracket)return{status:"mismatch",position:t+n.offset};if(e.pop(),0===e.length)return{status:"match",position:t+n.offset}}let n=c.brackets.length-e.length;for(;;){let e=c.parent;if(!e)return{status:"missing",position:null};if(c===e.left){let r=e.right,i=c.brackets.length,a=Math.min(i,r.brackets.length),o=0;for(;o<a&&s[c.brackets[i-o-1]]===r.brackets[o];)o++;if(n>=c.brackets.length-o){n=c.brackets.length-n-1,t+=c.size,c=r;break}}else n+=e.brackets.length-c.brackets.length,t-=e.left.size;c=e}let i="match";for(;c instanceof r.Interior;)2*n<c.brackets.length+c.left.brackets.length-c.right.brackets.length?c=c.left:(n+=c.right.brackets.length-c.brackets.length,t+=c.left.size,c=c.right);u=h(c,!0);let o=u[n];return s[a]!==o.bracket&&(i="mismatch"),{status:i,position:t+o.offset}}{let e=new Array;for(let n=u.length-1;n>=0;n--){let r=u[n];if(!(r.offset>d))if(s.hasOwnProperty(r.bracket)){if(0===e.length)throw"[Document.matchingBracket] internal error (unmatched is empty)";if(s[r.bracket]!==e[e.length-1])return{status:"mismatch",position:t+r.offset};if(e.pop(),0===e.length)return{status:"match",position:t+r.offset}}else e.push(r.bracket)}let n=e.length-1;for(;;){let e=c.parent;if(!e)return{status:"missing",position:null};if(c===e.right){let r=e.left;t-=r.size;let i=r.brackets.length,a=Math.min(i,c.brackets.length),o=0;for(;o<a&&s[r.brackets[i-o-1]]===c.brackets[o];)o++;if(n<o){n=r.brackets.length-n-1,c=r;break}n+=e.brackets.length-c.brackets.length}c=e}let i="match";for(;c instanceof r.Interior;)2*n<c.brackets.length+c.left.brackets.length-c.right.brackets.length?c=c.left:(n+=c.right.brackets.length-c.brackets.length,t+=c.left.size,c=c.right);u=h(c,!0);let o=u[n];return s[o.bracket]!==a&&(i="mismatch"),{status:i,position:t+o.offset}}}_modify(t,e,n){if(e+n.length===0)return;if(t+e>this.root.size)throw"[Document.modify] invalid parameters";if(0===t&&e===this.root.size){let t=this._createChunks(n,0);return this.begin=t[0],this.end=t[t.length-1],void(this.root=this._buildTree(t))}let a=new Set,o=new Array,s=new Set,l=n.length-e,c=Math.min(n.length,e),d=new i.Iterator(this);d.setPosition(t);let h=d.leaf,u=h.state;for(let t=0;t<c;){for(let t=d.leaf.parent;null!==t;t=t.parent)a.add(t);let e=d.leaf.data.length-d.offset,r=Math.min(e,c-t);d.leaf.data.set(n.subarray(t,t+r),d.offset),d.jump(r),t+=r,d.leaf!==h&&(h.state=u,u=h.recalc(this.language),h=h.next)}if(l<0){let t=-l;for(;t>0;){for(let t=d.leaf.parent;null!==t;t=t.parent)a.add(t);let e=d.leaf.data.length-d.offset,n=Math.min(t,e);if(d.leaf.data.length===n)s.add(d.leaf),d.jump(n),h=d.leaf;else{let t=d.leaf,e=d.offset;d.jump(n);let i=t.data.length-n,a=new Uint32Array(i);a.set(t.data.subarray(0,e),0),a.set(t.data.subarray(e+n),e),t.data=a,i<r.Leaf.minNodeSize&&o.push(t)}t-=n,d.leaf!==h&&(h.state=u,u=h.recalc(this.language),h=h.next)}}else if(l>0){for(let t=d.leaf.parent;null!==t;t=t.parent)a.add(t);let t=new Uint32Array(d.leaf.data.length+l);if(t.set(d.leaf.data.subarray(0,d.offset),0),t.set(n.subarray(c),d.offset),t.set(d.leaf.data.subarray(d.offset),d.offset+l),d.leaf.data=t,t.length>r.Leaf.maxNodeSize){let t=d.leaf,e=this._createChunks(t.data,u),n=this._buildTree(e),r=t.parent;n.parent=r,r?r.left===t?r.left=n:r.right=n:this.root=n;let i=e[0],a=e[e.length-1];i.prev=t.prev,a.next=t.next,i.prev?i.prev.next=i:this.begin=i,a.next?a.next.prev=a:this.end=a,h=a,u=a.state,t.prev=null,t.next=null,t.parent=null}}let p=t=>{t.prev?t.prev.next=t.next:this.begin=t.next,t.next?t.next.prev=t.prev:this.end=t.prev;let e=t.parent;if(!e)throw"[Document.modify] internal error (no parent)";let n=e.left===t?e.right:e.left,r=e.parent;r?r.left==e?r.left=n:r.right=n:this.root=n,n.parent=r,a.delete(e);let i=o.indexOf(t);i>=0&&o.splice(i,1),t.prev=null,t.next=null,t.parent=null,e.parent=null},f=(t,e)=>{let n=t.data.length+e.data.length,i=new Uint32Array(n);i.set(t.data,0),i.set(e.data,t.data.length),new r.Leaf(i,u),t.data=i,t.recalc(this.language),n<r.Leaf.minNodeSize&&o.push(t),p(e)},m=(t,e)=>{let n=t.data.length+e.data.length,r=new Uint32Array(n);r.set(t.data,0),r.set(e.data,t.data.length);let i=this._createChunks(r,u);if(2!==i.length)throw"[Document.modify balanceLeaves] internal error (bad number of chunks)";let a=[t,e];for(let t=0;t<2;t++)a[t].height=i[t].height,a[t].size=i[t].size,a[t].linebreaks=i[t].linebreaks,a[t].tabulator=i[t].tabulator,a[t].firstwidth=i[t].firstwidth,a[t].innerwidth=i[t].innerwidth,a[t].lastwidth=i[t].lastwidth,a[t].brackets=i[t].brackets,a[t].data=i[t].data,a[t].state=i[t].state};for(let t of s)p(t);do{h.state=u,u=h.recalc(this.language),h=h.next}while(h&&h.state!==u);for(;o.length>0;){let t,e=o.pop();if(e.prev)t=[e.prev,e];else{if(!e.next)break;t=[e,e.next]}2*(t[0].data.length+t[1].data.length)<r.Leaf.maxNodeSize+r.Leaf.bestNodeSize?f(t[0],t[1]):m(t[0],t[1])}{let t=new Array,e=new Map;for(let n of a){let i=0;n.left instanceof r.Interior&&a.has(n.left)&&(e.set(n.left,n),i++),n.right instanceof r.Interior&&a.has(n.right)&&(e.set(n.right,n),i++),0===i&&t.push(n)}for(;t.length>0;){let n=t.pop();n.recalc(this.language),a.delete(n);let i=e.get(n);if(!i)break;(i.left instanceof r.Leaf||!a.has(i.left))&&(i.right instanceof r.Leaf||!a.has(i.right))&&t.push(i)}if(t.length>0)throw"[Document.modify] internal error (topological sort failed)"}if(this.root.height>1.5*Math.log2(this.root.numberOfLeaves())+2){let t=new Array;for(let e=this.begin;null!==e;e=e.next)t.push(e);this.root=this._buildTree(t)}return l}_createChunks(t,e){let n=t.length,i=Math.max(1,0|Math.ceil(n/r.Leaf.bestNodeSize)),a=new Array;for(let o=0;o<i;o++){let s=n*o/i|0,l=n*(o+1)/i|0,c=t.slice(s,l),d=new r.Leaf(c,e);if(e=d.recalc(this.language),a.push(d),o>0){let t=a[o-1];t.next=d,d.prev=t}}return a}_buildTree(t){let e=t;for(;e.length>1;){let t=new Array;for(let n=0;n<e.length;n+=2)if(n+1<e.length){let i=new r.Interior(e[n],e[n+1]);i.recalc(this.language),t.push(i)}else t.push(e[n]);e=t}return e[0]}}e.Document=s,s._lower=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])},3623:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{l(r.next(t))}catch(t){a(t)}}function s(t){try{l(r.throw(t))}catch(t){a(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}l((r=r.apply(t,e||[])).next())}))},i=this&&this.__asyncValues||function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t="function"==typeof __values?__values(t):t[Symbol.iterator](),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise((function(r,i){!function(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)}(r,i,(e=t[n](e)).done,e.value)}))}}},a=this&&this.__await||function(t){return this instanceof a?(this.v=t,this):new a(t)},o=this&&this.__asyncGenerator||function(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(t){i[t]&&(r[t]=function(e){return new Promise((function(n,r){o.push([t,e,n,r])>1||l(t,e)}))})}function l(t,e){try{(n=i[t](e)).value instanceof a?Promise.resolve(n.value.v).then(c,d):h(o[0][2],n)}catch(t){h(o[0][3],t)}var n}function c(t){l("next",t)}function d(t){l("throw",t)}function h(t,e){t(e),o.shift(),o.length&&l(o[0][0],o[0][1])}},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.reloadProjectEditorTabsRecursively=e.closeProjectEditorTabsRecursively=e.updateTabTitle=e.Editor=void 0;const l=s(n(9497)),c=n(5584),d=n(6075),h=n(8323),u=n(6042),p=n(194),f=n(5852),m=n(6566),g=n(6232),y=n(6193),v=new Map([["ctrl+f","find"],["f3","find next"],["ctrl+a","select all"],["ctrl+z","undo"],["shift+ctrl+z","redo"],["ctrl+d","toggle comment"],["ctrl+b","bracket"]]);class b{constructor(t={}){var e,n,r;this.devicePixelRatio=0,this.scroll_x=0,this.scroll_y=0,this.capture=null,this.events={},this.fontsize=0,this.tpad=0,this.bpad=0,this.em=0,this.lnwidth=0,this.charwidth=0,this.hpad=0,this.digits=0,this.target_x=0;const{language:i="plain",text:a="",parent:o,focus:s=!1}=t;this.keybindings=null!==(e=t.keybindings)&&void 0!==e?e:v,this.readOnly=null!==(n=t.readOnly)&&void 0!==n&&n;const l=new g.Language(i);this.document=new f.Document(l,a),this.setTarget(),this.themeName=null!==(r=t.theme)&&void 0!==r?r:(0,u.getResolvedTheme)(),this.offscreen=new OffscreenCanvas(0,0),this.devicePixelRatio=window.devicePixelRatio,this.dom_main=document.createElement("div"),this.dom_main.style.display="flex",this.dom_main.style.flexDirection="column",this.dom_main.className="editor",this.dom_container=document.createElement("div"),this.dom_container.className="container",this.dom_container.style.height="calc(100% - 37px)",this.dom_container.style.width="100%",this.dom_container.style.display="flex",this.dom_container.style.flexGrow="1",this.dom_main.appendChild(this.dom_container),this.dom_bars=document.createElement("div"),this.dom_bars.className="bars",this.dom_bars.style.height="100%",this.dom_bars.style.overflow="hidden",this.dom_bars.style.flexGrow="0",this.dom_bars.style.display="flex",this.dom_container.appendChild(this.dom_bars),this.dom_bar_linenumbers=document.createElement("canvas"),this.dom_bar_linenumbers.className="bar linenumbers",this.dom_bar_linenumbers.style.height="100%",this.dom_bars.appendChild(this.dom_bar_linenumbers),this.dom_bar_icon=document.createElement("canvas"),this.dom_bar_icon.className="bar icon",this.dom_bar_icon.style.height="100%",this.dom_bars.appendChild(this.dom_bar_icon),this.dom_content=document.createElement("div"),this.dom_content.className="content",this.dom_content.style.position="relative",this.dom_content.style.overflow="auto",this.dom_content.style.height="100%",this.dom_content.style.width="100%",this.dom_content.style.flexGrow="1",this.dom_content.style.cursor="text",this.dom_container.appendChild(this.dom_content),this.dom_display=document.createElement("canvas"),this.dom_display.className="display",this.dom_display.style.position="absolute",this.dom_display.style.left="0",this.dom_display.style.top="0",this.dom_display.style.width="100%",this.dom_display.style.height="100%",this.dom_display.style.overflow="auto",this.dom_display.style.whiteSpace="pre",this.dom_display.style.tabSize="4",this.dom_content.appendChild(this.dom_display),this.dom_focus=document.createElement("div"),this.dom_focus.className="focus",this.dom_focus.style.position="absolute",this.dom_focus.style.left="0px",this.dom_focus.style.top="0px",this.dom_focus.style.width="100%",this.dom_focus.style.height="100%",this.dom_focus.style.color="transparent",this.dom_focus.style.caretColor="transparent",this.dom_focus.setAttribute("tabindex","0"),this.dom_focus.setAttribute("contenteditable","true"),this.dom_content.appendChild(this.dom_focus),this.dom_scroller=document.createElement("div"),this.dom_scroller.className="scroller",this.dom_scroller.style.position="absolute",this.dom_scroller.style.left="0",this.dom_scroller.style.top="0",this.dom_scroller.style.width="100%",this.dom_scroller.style.height="100%",this.dom_scroller.style.overflow="auto",this.dom_content.appendChild(this.dom_scroller),this.dom_sizer=document.createElement("div"),this.dom_sizer.className="sizer",this.dom_sizer.style.minWidth="100%",this.dom_sizer.style.minHeight="100%",this.dom_scroller.appendChild(this.dom_sizer),this.dom_search=document.createElement("div"),this.dom_search.className="search",this.dom_search.addEventListener("keydown",(t=>{"Escape"===t.key&&this.closeSearch()})),this.dom_search.style.fontFamily="sans",this.dom_search.style.fontSize="14px",this.dom_search.style.height="36px",this.dom_search.style.overflow="hidden",this.dom_search.style.flexGrow="0",this.dom_search.style.width="98%",this.dom_search.style.padding="0 1%",this.dom_search.style.display="none",this.dom_search.style.justifyContent="space-evenly",this.dom_search.style.alignItems="center",this.dom_search.style.gap="1%",this.dom_main.appendChild(this.dom_search),this.dom_search_key=document.createElement("input"),this.dom_search_key.setAttribute("type","text"),this.dom_search_key.setAttribute("placeholder","search text"),this.dom_search_key.addEventListener("keydown",(t=>{"Enter"===t.key&&(this.onFind(),t.preventDefault(),t.stopPropagation())})),this.dom_search_key.style.padding="0 5px",this.dom_search_key.style.flexGrow="1",this.dom_search_key.style.minWidth="100px",this.dom_search_key.style.height="24px",this.dom_search.appendChild(this.dom_search_key),this.dom_search_replacement=document.createElement("input"),this.dom_search_replacement.setAttribute("type","text"),this.dom_search_replacement.setAttribute("placeholder","replace with"),this.dom_search_replacement.addEventListener("keydown",(t=>{"Enter"===t.key&&(this.onReplace(),t.preventDefault(),t.stopPropagation())})),this.dom_search_replacement.style.padding="0 5px",this.dom_search_replacement.style.flexGrow="1",this.dom_search_replacement.style.minWidth="100px",this.dom_search_replacement.style.height="24px",this.dom_search.appendChild(this.dom_search_replacement),this.dom_search_label=document.createElement("label"),this.dom_search_label.innerText=" ignore case ",this.dom_search_label.style.flexGrow="0",this.dom_search_label.style.userSelect="none",this.dom_search.appendChild(this.dom_search_label),this.dom_search_ignorecase=document.createElement("input"),this.dom_search_ignorecase.setAttribute("type","checkbox"),this.dom_search_ignorecase.checked=!0,this.dom_search_ignorecase.style.flexGrow="0",this.dom_search_label.appendChild(this.dom_search_ignorecase),this.dom_search_find=document.createElement("button"),this.dom_search_find.innerText="find",this.dom_search_find.addEventListener("click",this.onFind.bind(this)),this.dom_search_find.style.flexGrow="0",this.dom_search_find.style.padding="0 3px",this.dom_search_find.style.height="24px",this.dom_search.appendChild(this.dom_search_find),this.dom_search_replace=document.createElement("button"),this.dom_search_replace.innerText="replace",this.dom_search_replace.addEventListener("click",this.onReplace.bind(this)),this.dom_search_replace.style.flexGrow="0",this.dom_search_replace.style.padding="0 3px",this.dom_search_replace.style.height="24px",this.dom_search.appendChild(this.dom_search_replace),this.dom_search_replaceall=document.createElement("button"),this.dom_search_replaceall.innerText="all",this.dom_search_replaceall.addEventListener("click",this.onReplaceAll.bind(this)),this.dom_search_replaceall.style.flexGrow="0",this.dom_search_replaceall.style.padding="0 3px",this.dom_search_replaceall.style.height="24px",this.dom_search.appendChild(this.dom_search_replaceall),this.dom_search_close=document.createElement("div"),this.dom_search_close.className="close",this.dom_search_close.innerText="✕",this.dom_search_close.addEventListener("click",(t=>{this.closeSearch()})),this.dom_search_close.style.flexGrow="0",this.dom_search_close.style.fontSize="24px",this.dom_search_close.style.cursor="pointer",this.dom_search.appendChild(this.dom_search_close),this.applyColorTheme(),this.observer=new ResizeObserver((t=>{this.recalc(),this.draw()})),this.observer.observe(this.dom_content),this.dom_scroller.addEventListener("scroll",this.onScroll.bind(this)),this.dom_scroller.addEventListener("pointerdown",this.onPointerStart.bind(this)),this.dom_scroller.addEventListener("pointermove",this.onPointerMove.bind(this)),this.dom_scroller.addEventListener("pointerup",this.onPointerFinish.bind(this)),this.dom_scroller.addEventListener("pointercancel",this.onPointerAbort.bind(this)),this.dom_scroller.addEventListener("dblclick",this.onDoubleClick.bind(this)),this.dom_bars.addEventListener("pointerdown",this.onBarClick.bind(this)),this.dom_focus.addEventListener("focus",this.onFocus.bind(this)),this.dom_focus.addEventListener("blur",this.onBlur.bind(this)),this.dom_focus.addEventListener("keydown",this.onKey.bind(this)),this.dom_focus.addEventListener("input",this.onInput.bind(this)),this.dom_focus.addEventListener("cut",this.onCut.bind(this)),this.dom_focus.addEventListener("copy",this.onCopy.bind(this)),this.dom_focus.addEventListener("paste",this.onPaste.bind(this)),window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",this.applyColorTheme.bind(this)),o&&o.appendChild(this.dom_main),s&&this.focus(),this.docChanged()}dom(){return this.dom_main}text(){return this.document.text()}setText(t,e={}){this.document=new f.Document(this.document.language,t),this.docChanged(),this.setTarget(0),e.hasOwnProperty("cursor")&&this.setCursorPosition(e.cursor.row,e.cursor.col),e.hasOwnProperty("scrollIntoView")&&!e.scrollIntoView||this.scrollIntoView(),this.draw()}selection(){if(null===this.document.selection)return"";let t=Math.min(this.document.cursor,this.document.selection),e=Math.max(this.document.cursor,this.document.selection),n=this.document.range(t,e);return f.Document.arr2str(n)}selectWordAtCursor(){let t=new Set([2,3]),e=new m.Iterator(this.document);e.setPosition(this.document.cursor);let n=e.character(),r=f.Document.chartype(n);if(t.has(r)||(e.pos>0&&e.back(),n=e.character(),r=f.Document.chartype(n),t.has(r))){for(;t.has(f.Document.chartype(e.character()));)e.advance();for(this.document.cursor=e.pos;t.has(f.Document.chartype(e.before()));)e.back();this.document.selection=e.pos}}setTheme(t){this.themeName=t,this.applyColorTheme()}hasFocus(){return document.activeElement===this.dom_focus}focus(){document.activeElement!==this.dom_focus&&(this.dom_focus.focus(),window.setTimeout((()=>{this.dom_focus.focus()}),0))}blur(){document.activeElement===this.dom_focus&&(this.dom_focus.blur(),window.setTimeout((()=>{this.dom_focus.blur()}),0))}getCursorPosition(){let t=new m.Iterator(this.document);return t.setPosition(this.document.cursor),{row:t.row,col:t.col}}setCursorPosition(t,e){let n=new m.Iterator(this.document);n.setCoordinates(t,e),this.document.cursor=n.pos,this.document.selection=null,this.scrollIntoView(),this.draw()}setCursorPositionByCharacter(t,e){let n=new m.Iterator(this.document);n.setCoordinates(t,0);for(let t=0;t<e;t++)n.advance();this.document.cursor=n.pos,this.document.selection=null,this.scrollIntoView(),this.draw()}draw(){if(!this.offscreen)return;let t=this.offscreen.width,e=this.offscreen.height,n=(this.document.width(),this.document.height()),r=Math.min(n,Math.floor(this.scroll_y/this.em)),i=Math.min(n,Math.ceil((e+this.scroll_y)/this.em)),a=Math.floor(this.scroll_x/this.charwidth),o=Math.ceil((t+this.scroll_x)/this.charwidth);{let t=this.dom_bar_linenumbers.getContext("2d");t.fillStyle=this.theme.bars.linenumbers.background,t.fillRect(0,0,this.dom_bar_linenumbers.width,this.dom_bar_linenumbers.height),t.fillStyle=this.theme.bars.linenumbers.color,t.font=.8*this.fontsize+"px monospace",t.textAlign="right",t.textBaseline="top";let e=this.dom_bar_linenumbers.width-2;for(let n=r;n<i;n++){let r=this.em*n+.1*this.fontsize+this.tpad-this.scroll_y;t.fillText(String(n+1),e,r)}}{let t=this.dom_bar_icon.width,e=this.dom_bar_icon.getContext("2d");if(e.fillStyle=this.theme.bars.icons.background,e.fillRect(0,0,t,this.dom_bar_icon.height),this.events.barDraw){e.font=.8*this.fontsize+"px monospace",e.textAlign="left",e.textBaseline="top",e.fillStyle=this.theme.bars.icons.color;const n=this.events.barDraw(r,i);for(let a=r;a<i;a++){let i=n[a-r];if(!i)continue;let o=this.em*a+.1*this.fontsize+this.tpad-this.scroll_y;e.fillText(i,1,o,t-4)}}}{const n=this.theme.content.highlight;let s=this.document.view(r,i,a,o),l=this.offscreen.getContext("2d");l.fillStyle=this.theme.content.background,l.fillRect(0,0,this.offscreen.width,this.offscreen.height),l.globalAlpha=this.readOnly?.6:1,l.textAlign="left",l.textBaseline="top";let c=0;for(let e=r;e<i;e++){let r=this.em*e-this.scroll_y,i=r+ +this.tpad,d=o,h=a,u=!1,p=c;for(let t=a;t<o;t++){let e=s[c]/33554432|0;4&e&&(u=!0),1&e&&(d=Math.min(d,t),h=Math.max(h,t+1)),c++}if(u&&(l.fillStyle=this.theme.content.cursorline[this.hasFocus()?0:1],l.fillRect(0,r,t,this.em)),d<h){let t=this.charwidth*d+this.hpad-this.scroll_x,e=this.charwidth*h+this.hpad-this.scroll_x;l.fillStyle=this.theme.content.selection[this.hasFocus()?0:1],l.fillRect(t,r,e-t,this.em)}c=p;for(let t=a;t<o;t++){let e=this.charwidth*t+this.hpad-this.scroll_x,a=s[c]/536870912&3;a>0&&(l.fillStyle=this.theme.content.bracket[a-1],l.fillRect(e,r,this.charwidth,this.em));let o=2097151&s[c];const d=s[c]/2097152&15;o>32&&(l.fillStyle=n[d],l.fillText(String.fromCodePoint(o),e,i,this.charwidth)),67108864&s[c]&&(l.fillStyle=n[0],l.fillRect(e-.04*this.charwidth,r+.05*this.em,.08*this.charwidth,.9*this.em)),c++}}l.globalAlpha=1,t>0&&e>0&&this.dom_display.getContext("2d").putImageData(l.getImageData(0,0,t,e),0,0)}}scrollTo(t,e,n=!1){let r=this.offscreen.width-this.charwidth,i=this.offscreen.height-this.em;n?(this.scroll_x=Math.max(0,this.em*t+this.hpad-i/2),this.scroll_y=Math.max(0,this.charwidth*e-r/2),window.setTimeout((()=>{this.dom_scroller.scrollLeft=this.scroll_x/window.devicePixelRatio,this.dom_scroller.scrollTop=this.scroll_y/window.devicePixelRatio}),0)):(this.em*t<this.scroll_y?(this.scroll_y=this.em*t,window.setTimeout((()=>{this.scroll_y=this.em*t,this.dom_scroller.scrollTop=this.scroll_y/window.devicePixelRatio}),0)):this.em*t>this.scroll_y+i&&(this.scroll_y=this.em*t-i,window.setTimeout((()=>{this.scroll_y=this.em*t-i,this.dom_scroller.scrollTop=this.scroll_y/window.devicePixelRatio}),0)),this.charwidth*e-this.hpad<this.scroll_x?(this.scroll_x=Math.max(0,this.charwidth*e-this.hpad),window.setTimeout((()=>{this.scroll_x=Math.max(0,this.charwidth*e-this.hpad),this.dom_scroller.scrollLeft=this.scroll_x/window.devicePixelRatio}),0)):this.charwidth*e+this.hpad>this.scroll_x+r&&(this.scroll_x=this.charwidth*e+this.hpad-r,window.setTimeout((()=>{this.scroll_x=this.charwidth*e+this.hpad-r,this.dom_scroller.scrollLeft=this.scroll_x/window.devicePixelRatio}),0)))}scrollIntoView(t=null,e=!1){null===t&&(t=new m.Iterator(this.document)).setPosition(this.document.cursor),this.scrollTo(t.row,t.col,e)}updateScrollbars(){window.setTimeout((()=>{this.dom_scroller.scrollLeft=this.scroll_x/window.devicePixelRatio,this.dom_scroller.scrollTop=this.scroll_y/window.devicePixelRatio}),0)}isDirty(){return this.document.isDirty()}setClean(){this.document.setClean()}isReadOnly(){return this.readOnly}setReadOnly(t){t!==this.readOnly&&(this.readOnly=t,t?(this.dom_search_replacement.setAttribute("disabled","disabled"),this.dom_search_replace.setAttribute("disabled","disabled"),this.dom_search_replaceall.setAttribute("disabled","disabled"),this.dom_focus.setAttribute("contenteditable","false")):(this.dom_search_replacement.removeAttribute("disabled"),this.dom_search_replace.removeAttribute("disabled"),this.dom_search_replaceall.removeAttribute("disabled"),this.dom_focus.setAttribute("contenteditable","true")),this.draw())}docChanged(){let t=this.document.width(),e=this.document.height();this.dom_sizer.style.width=(t*this.charwidth+2*this.hpad)/window.devicePixelRatio+"px",this.dom_sizer.style.height=e*this.em/window.devicePixelRatio+"px";let n=Math.floor(Math.log10(e)+1);n!==this.digits&&(this.digits=n,this.dom_bar_linenumbers.width=this.digits*this.lnwidth+6,this.dom_bar_linenumbers.style.width=this.dom_bar_linenumbers.width/window.devicePixelRatio+"px")}setTarget(t=null){if(null===t){let t=new m.Iterator(this.document);t.setPosition(this.document.cursor),this.target_x=t.col}else this.target_x=t}selectedLines(){let t=new m.Iterator(this.document);t.setPosition(this.document.cursor);let e=t.row,n=t.row+1;if(null!==this.document.selection){let r=new m.Iterator(this.document);r.setPosition(this.document.selection),r.row,r.pos<t.pos?(e=r.row,0===t.col&&n--):(n=r.row+1,0===r.col&&n--)}return[e,n]}simpleAction(t,e=!0){var n,r;if(this.readOnly)return;let i=this.document.cursor,a=0;null!==this.document.selection&&(a=Math.abs(i-this.document.selection),i=Math.min(i,this.document.selection)),"string"==typeof t&&(t=0===t.length?null:f.Document.str2arr(t));let o=new p.SimpleAction(this.document,i,a,t||null,e);this.document.execute(o,e),this.setTarget(),this.scrollIntoView(),null===(r=(n=this.events).changed)||void 0===r||r.call(n,o.linesChanged(this.document))}onScroll(t=null){let e=this.dom_scroller.scrollLeft,n=this.dom_scroller.scrollTop;this.scroll_x=window.devicePixelRatio*e,this.scroll_y=window.devicePixelRatio*n,this.draw()}onFocus(t){var e,n;this.draw(),null===(n=(e=this.events).focus)||void 0===n||n.call(e)}onBlur(t){var e,n;this.draw(),null===(n=(e=this.events).blur)||void 0===n||n.call(e)}onKey(t){var e,n,r,i,a,o,s,l;if(b._modifierKeys.has(t.key)||"Dead"===t.key||"Unidentified"===t.key)return!0;let c=t.key,d="";if(t.shiftKey&&(d+="shift+"),(t.ctrlKey||t.metaKey)&&(d+="ctrl+"),t.altKey&&(d+="alt+"),d+=c.toLowerCase(),void 0!==this.keybindings.get(d)){let t=this.keybindings.get(d);if("find"===t)this.dom_search.style.display="flex",this.dom_search_key.focus(),this.dom_search_key.select();else if("find next"===t)this.onFind();else if("replace"!==t||this.readOnly)if("select all"===t)this.document.selection=0,this.document.cursor=this.document.size();else if("undo"!==t||this.readOnly)if("redo"!==t||this.readOnly)if("toggle comment"!==t||this.readOnly){if("bracket"===t){let t=this.document.matchingBracket(this.document.cursor);"match"===t.status&&(this.document.cursor=t.position,this.document.selection=null,this.setTarget(),this.scrollIntoView(),this.draw())}}else{let t=this.document.language.linecomment;if(t){let e=t.length,[n,a]=this.selectedLines(),o=!0;for(let r=n;r<a;r++){let n=new m.Iterator(this.document);n.setCoordinates(r,0);let i=this.document.range(n.pos,n.pos+e),a=!0;for(let n=0;n<e;n++)if(i[n]!==t[n]){a=!1;break}if(!a){o=!1;break}}let s=o?new p.UncommentAction(this.document,n,a):new p.CommentAction(this.document,n,a);this.document.execute(s),this.setTarget(),this.scrollIntoView(),null===(i=(r=this.events).changed)||void 0===i||i.call(r,null)}}else{let t=this.document.redo();this.setTarget(),null===(n=(e=this.events).changed)||void 0===n||n.call(e,t instanceof p.SimpleAction?t.linesChanged(this.document):null),this.scrollIntoView()}else{let t=this.document.undo();if(this.setTarget(),this.events.changed){const e=t instanceof p.SimpleAction?t.linesChanged(this.document):null;this.events.changed(e?{line:e.line,inserted:e.removed,removed:e.inserted}:null)}this.scrollIntoView()}else this.dom_search.style.display="flex"}else if(b._cursorKeys.has(c)){if(t.shiftKey?null===this.document.selection&&(this.document.selection=this.document.cursor):this.document.selection=null,"ArrowUp"===c)if(t.ctrlKey)this.dom_scroller.scrollTop-=this.em/window.devicePixelRatio;else{let t=new m.Iterator(this.document);t.setPosition(this.document.cursor);let e=t.row;e>0&&(t.setCoordinates(e-1,this.target_x),this.document.cursor=t.pos,this.scrollIntoView(t))}else if("ArrowDown"===c)if(t.ctrlKey)this.dom_scroller.scrollTop+=this.em/window.devicePixelRatio;else{let t=new m.Iterator(this.document);t.setPosition(this.document.cursor);let e=t.row;t.setCoordinates(e+1,this.target_x),this.document.cursor=t.pos,this.scrollIntoView(t)}else if("ArrowLeft"===c)if(t.ctrlKey){if(this.document.cursor>0){let t=new m.Iterator(this.document);t.setPosition(this.document.cursor);let e=t.before(),n=f.Document.chartype(e);if(0===n)t.back();else{if(1===n)for(t.back();t.pos>0&&(e=t.before(),f.Document.chartype(e)===n);)t.back();if(t.pos>0&&(t.pos===this.document.cursor||10!==e)){t.back(),e=t.character();let n=f.Document.chartype(e);if(n>=2)for(;t.pos>0;){let e=t.before();if(f.Document.chartype(e)!==n)break;t.back()}}}this.document.cursor=t.pos,this.setTarget()}}else this.document.cursor>0&&(this.document.cursor--,this.setTarget(),this.scrollIntoView());else if("ArrowRight"===c)if(t.ctrlKey){if(this.document.cursor<this.document.size()){let t=new m.Iterator(this.document);t.setPosition(this.document.cursor);let e=t.character(),n=f.Document.chartype(e);if(0===n)t.advance();else{if(1===n)for(t.advance();!t.atEnd();){let e=t.character();if(f.Document.chartype(e)!==n)break;t.advance()}if(!t.atEnd()){let e=t.character(),n=f.Document.chartype(e);if(t.advance(),n>=2)for(;!t.atEnd();){let e=t.character();if(f.Document.chartype(e)!==n)break;t.advance()}}}this.document.cursor=t.pos,this.setTarget()}}else this.document.cursor<this.document.size()&&(this.document.cursor++,this.setTarget(),this.scrollIntoView());else if("PageUp"===c)if(t.ctrlKey){let t=Math.max(1,this.offscreen.height/this.em-1|0);this.dom_scroller.scrollTop-=t*this.em/window.devicePixelRatio}else{let t=Math.max(1,this.offscreen.height/this.em-1|0),e=new m.Iterator(this.document);e.setPosition(this.document.cursor);let n=Math.max(0,e.row-t);e.setCoordinates(n,this.target_x),this.document.cursor=e.pos,this.scrollIntoView(e)}else if("PageDown"===c)if(t.ctrlKey){let t=Math.max(1,this.offscreen.height/this.em-1|0);this.dom_scroller.scrollTop+=t*this.em/window.devicePixelRatio}else{let t=Math.max(1,this.offscreen.height/this.em-1|0),e=new m.Iterator(this.document);e.setPosition(this.document.cursor),e.setCoordinates(e.row+t,this.target_x),this.document.cursor=e.pos,this.scrollIntoView(e)}else if("Home"===c)if(t.ctrlKey)this.document.cursor=0,this.setTarget(),this.scrollIntoView();else{let t=new m.Iterator(this.document);t.setPosition(this.document.cursor),t.col;let e=t.row;t.setCoordinates(e,0);let n=t.pos;for(;9===t.character()||32===t.character();)t.advance();let r=t.pos;this.document.cursor=this.document.cursor===r?n:r,this.setTarget(),this.scrollIntoView()}else if("End"===c)if(t.ctrlKey)this.document.cursor=this.document.size(),this.setTarget(),this.scrollIntoView();else{let t=new m.Iterator(this.document);t.setPosition(this.document.cursor);let e=t.row;t.setCoordinates(e+1,0),this.document.cursor=t.pos-(0===t.col&&t.row>e?1:0),this.setTarget(),this.scrollIntoView()}}else{if(!b._specialKeys.has(c))return!0;if("Tab"!==c||this.readOnly)if("Backspace"!==c||this.readOnly)if("Delete"!==c||this.readOnly)if("Enter"!==c||this.readOnly)"Escape"===c&&this.closeSearch();else{let t=new m.Iterator(this.document);t.setPosition(this.document.cursor);let e=t.row;t.setCoordinates(e,0);let n=[10];for(;(9===t.character()||32===t.character())&&t.pos<this.document.cursor;)n.push(t.character()),t.advance();this.simpleAction(new Uint32Array(n))}else null!==this.document.selection&&this.document.selection!==this.document.cursor?this.simpleAction(null):this.document.cursor<this.document.size()&&(this.document.selection=this.document.cursor+1,this.simpleAction(null));else null!==this.document.selection&&this.document.selection!==this.document.cursor?this.simpleAction(null):this.document.cursor>0&&(this.document.selection=this.document.cursor-1,this.simpleAction(null));else if(t.shiftKey){let[t,e]=this.selectedLines(),n=new p.UnindentAction(this.document,t,e);n.trivial()||(this.document.execute(n),this.setTarget(),this.scrollIntoView(),null===(o=(a=this.events).changed)||void 0===o||o.call(a,null))}else if(null!==this.document.selection&&this.document.selection!==this.document.cursor){let[t,e]=this.selectedLines(),n=new p.IndentAction(this.document,t,e);this.document.execute(n),this.setTarget(),this.scrollIntoView(),null===(l=(s=this.events).changed)||void 0===l||l.call(s,null)}else this.simpleAction("\t")}t.preventDefault(),t.stopPropagation(),this.docChanged(),this.draw()}onInput(t){this.readOnly||("insertText"===t.inputType||"insertCompositionText"===t.inputType&&!t.isComposing||"insertFromComposition"===t.inputType?(this.simpleAction(t.data),this.docChanged(),this.draw(),this.dom_focus.innerHTML=""):"insertLineBreak"!==t.inputType&&"insertParagraph"!==t.inputType||(this.simpleAction("\n"),this.docChanged(),this.draw(),this.dom_focus.innerHTML=""))}onCut(t){let e=this.selection();e.length>0&&t.clipboardData&&!this.readOnly&&(this.simpleAction(null),t.clipboardData.setData("text/plain",e),t.preventDefault(),t.stopPropagation(),this.docChanged(),this.draw())}onCopy(t){let e=this.selection();e.length>0&&t.clipboardData&&(t.clipboardData.setData("text/plain",e),t.preventDefault(),t.stopPropagation())}onPaste(t){let e=null!==this.document.selection&&this.document.selection!==this.document.cursor;if(t.clipboardData&&!this.readOnly){let n=t.clipboardData.getData("Text");(e||n.length>0)&&(this.simpleAction(n,!1),this.docChanged(),this.draw())}t.preventDefault(),t.stopPropagation(),this.dom_focus.innerHTML=""}processPointer(t,e=!1){let n=0|Math.round(t.offsetX*window.devicePixelRatio),r=0|Math.round(t.offsetY*window.devicePixelRatio),i=0|Math.round((n-this.hpad)/this.charwidth),a=0|Math.floor(r/this.em);i<0&&(i=0);let o=new m.Iterator(this.document);return o.setCoordinates(a,i),{pos:o.pos,row:o.row,col:o.col,bx:n,by:r,cx:i,cy:a,iter:o}}onPointerStart(t){if(t.target!==this.dom_sizer)return;let e=this.processPointer(t);this.dom_focus.focus(),this.capture=t.pointerId,this.dom_sizer.setPointerCapture(this.capture),null===this.document.selection?t.shiftKey?this.document.selection=this.document.cursor:this.document.selection=e.pos:t.shiftKey||(this.document.selection=e.pos),this.document.cursor=e.pos,this.setTarget(e.col),this.draw()}onPointerMove(t){if(null===this.capture)return;let e=this.processPointer(t);this.document.cursor=e.pos,this.setTarget(e.col),this.draw()}onPointerFinish(t){if(null===this.capture)return;this.dom_sizer.releasePointerCapture(this.capture),this.capture=null,this.focus();let e=this.processPointer(t);this.document.cursor=e.pos,this.document.selection===this.document.cursor&&(this.document.selection=null),this.setTarget(e.col),this.draw()}onPointerAbort(t){null!==this.capture&&(this.dom_sizer.releasePointerCapture(this.capture),this.capture=null)}onDoubleClick(t){if(t.target!==this.dom_sizer)return;let e=this.processPointer(t);this.dom_focus.focus();let n=new Set([2,3]),r=e.iter,i=r.character();if(0===i)return;let a=f.Document.chartype(i);if(n.has(a)){for(;n.has(f.Document.chartype(r.character()));)r.advance();for(this.document.cursor=r.pos;n.has(f.Document.chartype(r.before()));)r.back();this.document.selection=r.pos,this.setTarget(e.col),this.draw()}}onBarClick(t){if(t.preventDefault(),t.stopPropagation(),this.dom_focus.focus(),!this.events.barClick)return;let e=0|Math.round(t.offsetY*window.devicePixelRatio),n=0|Math.floor((e+this.scroll_y)/this.em),r=this.document.height();this.events.barClick(Math.min(n,r)),this.draw()}closeSearch(){this.dom_search.style.display="none",this.focus()}onFind(){let t=f.Document.str2arr(this.dom_search_key.value),e=this.dom_search_ignorecase.checked,n=this.document.find(this.document.cursor,t,e,!0);null!==n&&(this.document.selection=n,this.document.cursor=n+t.length,this.scrollIntoView(),this.draw())}onReplace(){if(this.readOnly)return;let t=f.Document.str2arr(this.dom_search_key.value),e=f.Document.str2arr(this.dom_search_replacement.value),n=this.dom_search_ignorecase.checked,r=this.document.cursor;null!==this.document.selection&&this.document.selection<r&&(r=this.document.selection);let i=this.document.find(r,t,n,!0);null!==i&&(i===this.document.selection||i===this.document.cursor?(this.document.selection=i,this.document.cursor=i+t.length,this.simpleAction(e)):(this.document.selection=i,this.document.cursor=i+t.length,this.scrollIntoView()),this.draw())}onReplaceAll(){var t,e;if(this.readOnly)return;let n=f.Document.str2arr(this.dom_search_key.value),r=f.Document.str2arr(this.dom_search_replacement.value),i=this.dom_search_ignorecase.checked,a=new Array,o=0,s=this.document.size();for(;o<s;){let t=this.document.find(o,n,i,!1);if(null===t)break;a.push(t),o=t+n.length}if(0===a.length)return;let l=new p.ReplaceAction(this.document,a,n,r);this.document.execute(l),this.setTarget(),this.scrollIntoView(),null===(e=(t=this.events).changed)||void 0===e||e.call(t,null),this.closeSearch()}applyColorTheme(){this.theme=y.themes[this.themeName],this.dom_bars.style.borderRight="solid 1px "+this.theme.bars.separator,this.dom_content.style.background=this.theme.content.background,this.dom_search.style.background=this.theme.search.background,this.dom_search.style.color=this.theme.search.color,this.dom_search.style.borderTop="solid 1px "+this.theme.search.separator,this.dom_search_close.style.color=this.theme.search.close,this.dom_search_key.style.background=this.theme.search.fields,this.dom_search_key.style.color=this.theme.search.color,this.dom_search_replacement.style.background=this.theme.search.fields,this.dom_search_replacement.style.color=this.theme.search.color,this.draw()}recalc(){let t=0|Math.round(this.dom_content.offsetWidth*window.devicePixelRatio),e=0|Math.round(this.dom_content.offsetHeight*window.devicePixelRatio);this.dom_display.width=t,this.dom_display.height=e,this.offscreen=new OffscreenCanvas(t,e);let n=this.offscreen.getContext("2d");this.fontsize=13.5*window.devicePixelRatio,this.tpad=.25*this.fontsize,this.bpad=.05*this.fontsize,this.em=Math.ceil(this.fontsize+this.tpad+this.bpad),n.font=.8*this.fontsize+"px monospace",this.lnwidth=Math.ceil(n.measureText("0").width),n.font=this.fontsize+"px monospace",this.charwidth=n.measureText("0").width,this.hpad=.5*this.charwidth,this.dom_bar_linenumbers.width=this.digits*this.lnwidth+6,this.dom_bar_linenumbers.height=e,this.dom_bar_icon.width=this.lnwidth+4,this.dom_bar_icon.height=e,this.dom_bar_linenumbers.style.width=this.dom_bar_linenumbers.width/window.devicePixelRatio+"px",this.dom_bar_icon.style.width=this.dom_bar_icon.width/window.devicePixelRatio+"px",this.docChanged(),this.devicePixelRatio!==window.devicePixelRatio&&(this.devicePixelRatio=window.devicePixelRatio,this.scrollIntoView())}}function w(t,e){return o(this,arguments,(function*(){var n,r,o,s;const u=(0,h.simplifyPath)((0,h.getProjectPath)(t)),p=l.default.join(u,e);try{for(var f,m=!0,g=i((0,h.recurseDirectory)(p));!(n=(f=yield a(g.next())).done);){s=f.value,m=!1;try{const e=s,n=(0,h.simplifyPath)(e.slice(u.length)),r=(0,c.projectFileID)(t,n),i=d.collection.getEditor(r);null!==i&&(yield yield a([r,i]))}finally{m=!0}}}catch(t){r={error:t}}finally{try{m||n||!(o=g.return)||(yield a(o.call(g)))}finally{if(r)throw r.error}}}))}e.Editor=b,b._modifierKeys=new Set(["Shift","Control","Alt","AltGraph","CapsLock","Fn","FnLock","Hyper","Meta","NumLock","ScrollLock","Super","Symbol","SymbolLock"]),b._cursorKeys=new Set(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Home","End","PageUp","PageDown"]),b._specialKeys=new Set(["Tab","Backspace","Delete","Enter","Escape"]),e.updateTabTitle=function(t,e){if(!t.tab)return;const n=t.tab.querySelector(".name");n&&(n.textContent=e),t.runOption&&(t.runOption.textContent=e,t.runOption.value=e)},e.closeProjectEditorTabsRecursively=function(t,e){var n,a,o,s;return r(this,void 0,void 0,(function*(){try{for(var r,l=!0,c=i(w(t,e));r=yield c.next(),!(n=r.done);){s=r.value,l=!1;try{const[t,e]=s;e.close()}finally{l=!0}}}catch(t){a={error:t}}finally{try{l||n||!(o=c.return)||(yield o.call(c))}finally{if(a)throw a.error}}}))},e.reloadProjectEditorTabsRecursively=function(t,e){var n,a,o,s;return r(this,void 0,void 0,(function*(){try{for(var r,d=!0,p=i(w(t,e));r=yield p.next(),!(n=r.done);){s=r.value,d=!1;try{const[e,n]=s,r=(0,c.projectFileIDToProjAbsPath)(e),i=l.default.join((0,h.getProjectPath)(t),r),a=yield(0,h.readFileContent)(i);if(a instanceof Error){if(["EISDIR","ENONENT"].includes(a.code))continue;(0,u.errorMsgBox)(`Error while reloading editor tab for ${(0,c.fileIDToHumanFriendly)(e)}: ${a.message}`);continue}if(n.editorView.text()===a)continue;n.editorView.setText(a),n.editorView.setClean()}finally{d=!0}}}catch(t){a={error:t}}finally{try{d||n||!(o=p.return)||(yield o.call(p))}finally{if(a)throw a.error}}}))}},8031:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Document=e.Editor=void 0;var r=n(3623);Object.defineProperty(e,"Editor",{enumerable:!0,get:function(){return r.Editor}});var i=n(5852);Object.defineProperty(e,"Document",{enumerable:!0,get:function(){return i.Document}})},6566:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HighlightingIterator=e.Iterator=void 0;const r=n(1643),i=n(6232);class a{constructor(t){this.pos=0,this.row=0,this.col=0,this.offset=0,this.document=t,this.leaf=t.begin}setPosition(t){this.pos=0,this.row=0,this.col=0,this.offset=0;let e=this.document.root;for(;e instanceof r.Interior;)if(t>=this.pos+e.left.size){if(this.pos+=e.left.size,this.row+=e.left.linebreaks,0===e.left.linebreaks){let t=e.left.tabulator,n=e.left.lastwidth;if(t>=0){let e=this.col%r.tabWidth;this.col-=e,t+e>=r.tabWidth&&(this.col+=r.tabWidth)}this.col+=n}else this.col=e.left.lastwidth;e=e.right}else e=e.left;for(this._setleaf(e),this.leaf=e;this.pos<t&&this.advance(););}setCoordinates(t,e){this.pos=0,this.row=0,this.col=0,this.offset=0;let n=this.document.root;for(;n instanceof r.Interior;)if(0===n.left.linebreaks){let i=n.left.tabulator,a=n.left.lastwidth,o=this.col;if(i>=0){let t=this.col%r.tabWidth;o-=t,i+t>=r.tabWidth&&(o+=r.tabWidth)}if(o+=a,t>this.row||t===this.row&&e>=o){this.pos+=n.left.size,this.row+=n.left.linebreaks;let t=n.left.tabulator,e=n.left.lastwidth;if(t>=0){let e=this.col%r.tabWidth;this.col-=e,t+e>=r.tabWidth&&(this.col+=r.tabWidth)}this.col+=e,n=n.right}else n=n.left}else{let r=this.row+n.left.linebreaks;t>r||t===r&&e>=n.left.lastwidth?(this.pos+=n.left.size,this.row=r,this.col=n.left.lastwidth,n=n.right):n=n.left}for(this._setleaf(n),this.leaf=n;;){let n=this.row,i=this.col,a=this.character();if(0===a)break;if(9===a?i=i+r.tabWidth-i%r.tabWidth:10===a?(n++,i=0):i++,n>t||n===t&&i>e)break;if(!this.advance())break}}advance(){if(this.atEnd())return!1;let t=this.leaf.data[this.offset];if(t<32)if(9===t)this.col+=r.tabWidth,this.col-=this.col%r.tabWidth;else{if(10!==t)throw"invalid text character ("+this.pos+"): "+t;this.row++,this.col=0}else this.col++;return this.pos++,this.offset++,this._advanced(t),this.offset===this.leaf.data.length&&this.leaf.next&&(this.leaf=this.leaf.next,this.offset=0),!0}jump(t=null){let e=this.leaf.data.length-this.offset;if(!(e<=0)){if(null===t&&(t=e),t>e)throw"[Document.jump] invalid jump length";this.pos+=t,this.offset+=t,t===e&&this.leaf.next&&(this.leaf=this.leaf.next,this.offset=0)}}back(){0!==this.pos&&(this.pos--,this.offset--,this.offset<0&&(this.leaf=this.leaf.prev,this.offset=this.leaf.size-1))}atEnd(){return this.offset===this.leaf.data.length}character(){return this.offset<this.leaf.data.length?this.leaf.data[this.offset]:0}before(){if(0===this.pos)return 0;if(this.offset>0)return this.leaf.data[this.offset-1];let t=this.leaf.prev;return t.data[t.data.length-1]}_setleaf(t){}_advanced(t){}}e.Iterator=a,e.HighlightingIterator=class extends a{constructor(t,e){super(t),this.state=this.leaf.state,this.onHighlight=e}setPosition(t){let e=this.onHighlight;this.onHighlight=(t,e,n,r)=>{},super.setPosition(t),this.onHighlight=e}setCoordinates(t,e){let n=this.onHighlight;this.onHighlight=(t,e,n,r)=>{},super.setCoordinates(t,e),this.onHighlight=n}_setleaf(t){this.state=t.state}_advanced(t){let e=this.document.language.num_pending[this.state],n=this.document.language.process(this.state,t);this.state=i.Language.state(n);let r=i.Language.pending(n);if(i.Language.again(n)){r<e&&this.onHighlight(e,e-r,i.Language.highlight(n),i.Language.bracket(n)),n=this.document.language.process(this.state,t),this.state=i.Language.state(n);let a=i.Language.pending(n);a<=r&&this.onHighlight(r,r+1-a,i.Language.highlight(n),i.Language.bracket(n))}else r<=e&&this.onHighlight(e,e+1-r,i.Language.highlight(n),i.Language.bracket(n))}}},6232:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Language=void 0;const r=n(5852),i={plain:{comments:{},highlight:{start:"plain start; (+)+[+]+{+} plain start bracket;"}},tscript:{comments:{line:"#",begin:"#*",end:"*#"},highlight:{start:'plain start; (+)+[+]+{+} green start bracket; " red doublequoted; _+A-Z+a-z plain identifier again; 0-9 cyan number; # gray comment;',identifier:"plain start again; _+A-Z+a-z+0-9 plain identifier; keywords blue var function if then else for in do while break continue return not and or xor null true false try catch throw class public protected private static constructor this super namespace use from module include import export const switch case default enum operator ;",doublequoted:'red doublequoted; "+\n red start; \\ magenta doublequoted_escape;',doublequoted_escape:"magenta doublequoted; u magenta doublequoted_escape_u_1;",doublequoted_escape_u_1:"red doublequoted again; 0-9+a-f+A-F magenta doublequoted_escape_u_2;",doublequoted_escape_u_2:"red doublequoted again; 0-9+a-f+A-F magenta doublequoted_escape_u_3;",doublequoted_escape_u_3:"red doublequoted again; 0-9+a-f+A-F magenta doublequoted_escape_u_4;",doublequoted_escape_u_4:"red doublequoted again; 0-9+a-f+A-F magenta doublequoted;",comment:"gray commentline again; * gray commentblock;",commentline:"gray commentline; \n plain start;",commentblock:"gray commentblock; * gray commentblock_star;",commentblock_star:"gray commentblock again; * gray commentblock_star; # gray start;",number:"plain start again; 0-9 cyan number; . cyan number_after_dot; e+E cyan number_after_e;",number_after_dot:"plain start again; 0-9 cyan number_after_dot; e+E cyan number_after_e; f+F+l+L cyan start;",number_after_e:"plain start again; -+0-9 cyan number_after_e_1;",number_after_e_1:"plain start again; 0-9 cyan number_after_e_1;"}},python:{comments:{line:"#"},highlight:{start:"plain start; ' red singlequoted; \" red doublequoted; A-Z+a-z+_ plain identifier again; (+)+[+]+{+} plain start bracket; # gray comment; . cyan dot; 0-9 cyan number;",identifier:"plain start again; A-Z+a-z+_+0-9 plain identifier; # gray comment; keywords blue and as assert break class continue def del elif else except exec False finally for from global if import in is lambda None nonlocal not or pass print raise return True try while with yield ;",singlequoted:"red sq_short again; ' red singlequoted_2;",singlequoted_2:"plain start again; ' red sq_long;",doublequoted:'red dq_short again; " red doublequoted_2;',doublequoted_2:'plain start again; " red dq_long;',sq_short:"red sq_short; \\ magenta sq_short_escape; \n+' red start;",sq_long:"red sq_long; \\ magenta sq_long_escape; ' red sq_long_1;",sq_long_1:"red sq_long; \\ magenta sq_long_escape; ' red sq_long_2;",sq_long_2:"red sq_long; \\ magenta sq_long_escape; ' red start;",dq_short:'red dq_short; \\ magenta dq_short_escape; \n+" red start;',dq_long:'red dq_long; \\ magenta dq_long_escape; " red dq_long_1;',dq_long_1:'red dq_long; \\ magenta dq_long_escape; " red dq_long_2;',dq_long_2:'red dq_long; \\ magenta dq_long_escape; " red start;',sq_short_escape:"magenta sq_short;",sq_long_escape:"magenta sq_long;",dq_short_escape:"magenta dq_short;",dq_long_escape:"magenta dq_long;",dot:"1; plain start again; 0-9 cyan number_after_dot;",number:"plain start again; 0-9 cyan number; . cyan number_after_dot; e+E cyan number_after_e; j+J cyan start;",number_after_dot:"plain start again; 0-9 cyan number_after_dot; e+E cyan number_after_e; j+J cyan start;",number_after_e:"plain start again; - cyan number_after_e_1; 0-9 cyan number_after_e_2;",number_after_e_1:"plain start again; 0-9 cyan number_after_e_2;",number_after_e_2:"plain start again; 0-9 cyan number_after_e_2; j+J cyan start;",comment:"gray comment; \n plain start;"}}};class a{constructor(t){if(this.table=[],this.num_pending=[],!Object.hasOwn(i,t))throw"unknown highlighting language";const e=i[t],n=e.highlight;this.linecomment=e.comments.line?r.Document.str2arr(e.comments.line):null,this.blockcomment_begin=e.comments.begin?r.Document.str2arr(e.comments.begin):null,this.blockcomment_end=e.comments.end?r.Document.str2arr(e.comments.end):null;let o=1;const s={start:0};this.table.push(new Uint32Array(99)),this.num_pending.push(0);for(let t in n)"start"!==t&&(this.table.push(new Uint32Array(99)),this.num_pending.push(0),s[t]=o,o++);for(let t in n){let e=n[t],r=s[t],i=this.table[r],l=0,c=()=>{for(;" "===e[l];)l++;for(const[t,n]of Object.entries(a.scanner_colors))if(e.substring(l,l+t.length)===t)return l+=t.length,n;throw"invalid scanner rule ("+l+"): "+e},d=()=>{for(;" "===e[l];)l++;let t=e[l];for(l++;"_"===e[l]||e[l]>="0"&&e[l]<="9"||e[l]>="A"&&e[l]<="Z"||e[l]>="a"&&e[l]<="z";)t+=e[l],l++;if(Object.hasOwn(s,t))return s[t];throw"invalid scanner rule ("+l+"): "+e},h=()=>{for(;" "===e[l];)l++;if(";"!==e[l])throw"invalid scanner rule ("+l+"): "+e;l++},u=t=>{for(;" "===e[l];)l++;return e.substring(l,l+t.length)===t&&(l+=t.length,!0)},p=()=>{for(;" "===e[l];)l++;let t=new Set;for(;;){let n=e.charCodeAt(l);if(32===n)break;n=this.character2code(n);let r=n;if(l++,"-"===e[l]){if(l++,r=this.character2code(e.charCodeAt(l)),r<=n)throw"invalid scanner rule ("+l+"): "+e;l++}for(let e=n;e<=r;e++)t.add(e);if("+"!==e[l])break;l++}return t},f=0;if(e[0]>="0"&&e[0]<="9"){for(l++;e[l]>="0"&&e[l]<="9";)l++;f=parseInt(e.substring(0,l)),h()}this.num_pending[r]=f;let m=c(),g=d(),y=u("bracket"),v=u("again");h(),i[0]=a.compose(m,y,!1,0,r);let b=a.compose(m,y,v,f,g);for(let t=1;t<99;t++)i[t]=b;for(;l<e.length;){if(u("keywords")){let t=c(),n=this.table.length,s=new Uint32Array(i);for(let t=0;t<99;t++)if((i[t]/a.scanresult_state|0)===r){let e=i[t]+a.scanresult_state*(n-r);i[t]=e,s[t]=e}if(this.table.push(s),this.num_pending.push(0),";"!==e[e.length-1])throw"invalid scanner rule ("+l+"): "+e;let d=e.substring(l,e.length-1).split(" ");const h=new Map;for(let e of d){if(""===e)continue;let n=r,l=i;for(let r=1;r<=e.length;r++){let i=e.substring(0,r),c=0,d=new Uint32Array;h.has(i)?(c=h.get(i),d=this.table[c]):(c=this.table.length,d=new Uint32Array(s),this.table.push(d),this.num_pending.push(r),h.set(i,c));let u=this.character2code(e.charCodeAt(r-1));if(l[u]=l[u]&(a.scanresult_highlight_mask|a.scanresult_bracket_bit|a.scanresult_again_bit)|a.scanresult_pending*r|a.scanresult_state*c,r===e.length)for(let e=1;e<99;e++)if((d[e]/a.scanresult_state|0)<o){let n=d[e]&a.scanresult_highlight_mask;d[e]+=t-n}n=c,l=d}}break}{let t=p(),e=c(),n=d(),r=u("bracket"),o=u("again");h();let s=a.compose(e,r,o,f,n);for(let e of t)i[e]=s}}}}character2code(t){return 0===t?0:9===t?1:10===t?2:t>=32&&t<127?t-29:98}process(t,e){let n=this.character2code(e);return this.table[t][n]}static compose(t,e,n,r,i){return t|(e?a.scanresult_bracket_bit:0)|(n?a.scanresult_again_bit:0)|a.scanresult_pending*r|a.scanresult_state*i}static split(t){return[t&a.scanresult_highlight_mask,0!=(t&a.scanresult_bracket_bit),0!=(t&a.scanresult_again_bit),(t&a.scanresult_pending_mask)/a.scanresult_pending|0,t/a.scanresult_state|0]}static highlight(t){return t&a.scanresult_highlight_mask}static bracket(t){return 0!=(t&a.scanresult_bracket_bit)}static again(t){return 0!=(t&a.scanresult_again_bit)}static pending(t){return(t&a.scanresult_pending_mask)/a.scanresult_pending|0}static state(t){return t/a.scanresult_state|0}}e.Language=a,a.scanresult_highlight_mask=15,a.scanresult_bracket_bit=16,a.scanresult_again_bit=32,a.scanresult_pending_mask=4032,a.scanresult_pending=64,a.scanresult_state=4096,a.scanner_colors={plain:0,black:0,white:0,blue:1,green:2,cyan:3,red:4,magenta:5,brown:6,orange:7,yellow:8,gray:9,grey:9}},6193:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.themes=void 0,e.themes={light:{bars:{linenumbers:{background:"#f7f7f7",color:"#888"},icons:{background:"#f0f0f0",color:"#a00"},separator:"#bbb"},content:{background:"#fff",highlight:["#000","#00d","#0a0","#088","#c00","#a0a","#840","#f80","#dd0","#888"],cursorline:["#ffb","#ffd"],selection:["#ddf","#eee"],bracket:["rgba(0,255,0,0.5)","rgba(255,0,0,0.5)"]},search:{background:"#ddd",separator:"#bbb",fields:"#fff",color:"#000",close:"#f00"}},dark:{bars:{linenumbers:{background:"#222",color:"#aaa"},icons:{background:"#2a2a2a",color:"#f44"},separator:"#444"},content:{background:"#222",highlight:["#fff","#68f","#4f4","#2ff","#f44","#d4f","#c84","#fb4","#ff4","#888"],cursorline:["#444","#333"],selection:["#448","#666"],bracket:["rgba(0,255,0,0.5)","rgba(255,0,0,0.5)"]},search:{background:"#222",separator:"#444",fields:"#000",color:"#fff",close:"#f88"}}}},1643:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Leaf=e.Interior=e.Node=e.tabWidth=void 0;const r=n(6232);e.tabWidth=4;class i{constructor(){this.parent=null,this.height=0,this.size=0,this.linebreaks=0,this.tabulator=0,this.firstwidth=0,this.innerwidth=0,this.lastwidth=0,this.brackets=""}recalc(t){throw"override me in a subclass!"}numberOfLeaves(){throw"override me in a subclass!"}}e.Node=i,i.bracket_l2r={"(":")","[":"]","{":"}"},e.Interior=class extends i{constructor(t,e){super(),this.leaves=0,this.left=t,this.right=e,t.parent=this,e.parent=this}recalc(t){if(this.height=Math.max(this.left.height,this.right.height)+1,this.size=this.left.size+this.right.size,this.linebreaks=this.left.linebreaks+this.right.linebreaks,0===this.left.linebreaks?this.left.tabulator>=0?this.tabulator=this.left.tabulator:this.right.tabulator<0?this.tabulator=-1:this.tabulator=(this.left.size+this.right.tabulator)%e.tabWidth:this.tabulator=this.left.tabulator,this.left.linebreaks>0)this.firstwidth=this.left.firstwidth;else if(this.firstwidth=this.left.firstwidth+this.right.firstwidth,this.right.tabulator>=0){let t=this.left.firstwidth%e.tabWidth;this.firstwidth-=t,t+this.right.tabulator>=e.tabWidth&&(this.firstwidth+=e.tabWidth)}let n=Math.max(this.left.innerwidth,this.right.innerwidth);if(this.left.linebreaks>0&&this.right.linebreaks>0){let t=this.left.lastwidth+this.right.firstwidth;if(this.right.tabulator>=0){let n=this.left.lastwidth%e.tabWidth;t-=n,n+this.right.tabulator>=e.tabWidth&&(t+=e.tabWidth)}this.innerwidth=Math.max(n,t)}else this.innerwidth=n;if(this.right.linebreaks>0)this.lastwidth=this.right.lastwidth;else if(this.lastwidth=this.left.lastwidth+this.right.lastwidth,this.right.tabulator>=0){let t=this.left.lastwidth%e.tabWidth;this.lastwidth-=t,t+this.right.tabulator>=e.tabWidth&&(this.lastwidth+=e.tabWidth)}{let t=this.left.brackets.length,e=Math.min(t,this.right.brackets.length),n=0;for(;n<e&&i.bracket_l2r[this.left.brackets[t-n-1]]===this.right.brackets[n];)n++;this.brackets=this.left.brackets.substring(0,t-n)+this.right.brackets.substring(n)}this.leaves=this.left.numberOfLeaves()+this.right.numberOfLeaves()}numberOfLeaves(){return this.leaves}};class a extends i{constructor(t,e){super(),this.prev=null,this.next=null,this.data=t,this.state=e}recalc(t){this.size=this.data.length,this.tabulator=-1,this.firstwidth=0,this.innerwidth=0,this.lastwidth=0,this.linebreaks=0;let n=this.state,a=0,o=!0,s=new Array;for(let l=0;l<this.size;l++){let c=this.data[l];if(c<32)if(9===c)0===this.linebreaks&&this.tabulator<0&&(this.tabulator=l%e.tabWidth),a+=e.tabWidth,a-=a%e.tabWidth;else{if(10!==c)throw"invalid text character ("+l+"): "+c;o?(this.firstwidth=a,o=!1):this.innerwidth=Math.max(this.innerwidth,a),a=0,this.linebreaks++}else a++;let d=t.process(n,c);for(n=r.Language.state(d);r.Language.again(d);)d=t.process(n,c),n=r.Language.state(d);if(r.Language.bracket(d)){let t=String.fromCharCode(this.data[l]);s.length>0&&i.bracket_l2r[s[s.length-1]]===t?s.pop():s.push(t)}}return o&&(this.firstwidth=a),this.lastwidth=a,this.brackets=s.join(""),n}numberOfLeaves(){return 1}}e.Leaf=a,a.minNodeSize=128,a.bestNodeSize=384,a.maxNodeSize=512},3142:function(t,e,n){"use strict";var r,i,a,o,s,l,c,d,h,u=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),p=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),f=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&u(e,t,n);return p(e,t),e},m=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{l(r.next(t))}catch(t){a(t)}}function s(t){try{l(r.throw(t))}catch(t){a(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}l((r=r.apply(t,e||[])).next())}))},g=this&&this.__classPrivateFieldSet||function(t,e,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(t,n):i?i.value=n:e.set(t,n),n},y=this&&this.__classPrivateFieldGet||function(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)},v=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.EditorCollection=void 0;const b=v(n(9497)),w=f(n(6075)),x=n(5584),k=n(8323),A=n(6042),T=n(9836);e.EditorCollection=class{constructor(t,e,n,c){this.onStateChanged=c,r.add(this),i.set(this,void 0),a.set(this,void 0),o.set(this,void 0),s.set(this,[]),l.set(this,null),g(this,i,t,"f"),g(this,a,e,"f"),g(this,o,n,"f"),(0,A.subscribeOnThemeChange)((()=>{const t=(0,A.getResolvedTheme)();for(const e of y(this,s,"f"))e.editorView.setTheme(t)}))}get editors(){return y(this,s,"f")}getEditor(t){var e;return null!==(e=y(this,s,"f").find((e=>e.filename===t)))&&void 0!==e?e:null}get activeEditor(){return y(this,l,"f")}getSerializedState(){var t;const e=null===(t=y(this,l,"f"))||void 0===t?void 0:t.filename;return{open:y(this,s,"f").map((t=>t.filename)).filter(x.isLoadableFileID),active:void 0!==e&&(0,x.isLoadableFileID)(e)?e:null}}restoreState(t){return m(this,void 0,void 0,(function*(){for(const t of y(this,s,"f"))y(this,r,"m",h).call(this,t);let e=null;for(const n of t.open){const r=yield this.openEditorFromFile(n);r instanceof T.EditorController&&n===t.active&&(e=r)}e&&y(this,r,"m",c).call(this,e)}))}openEditorFromFile(t,e){return m(this,void 0,void 0,(function*(){let n=this.getEditor(t);if(n)y(this,r,"m",c).call(this,n);else if((0,x.fileIDHasNamespace)(t,"localstorage")){const[e,r]=(0,x.splitFileIDAtColon)(t),i=localStorage.getItem("tscript.code."+r);null!==i&&(n=this.openEditorFromData(t,i))}else{const[e,r]=(0,x.projectFileIDSplit)(t),i=(0,k.getProjectPath)(e),a=b.default.join(i,r),o=yield(0,k.readFileContent)(a);if(o instanceof Error)return["EISDIR","ENONENT"].includes(o.code)?null:o;n=this.openEditorFromData(t,o)}return e&&(null==n||n.navigate(e)),n}))}openEditorFromData(t,e){var n;null===(n=this.getEditor(t))||void 0===n||n.close();const i=new T.EditorController({filename:t,text:e,onClosed:()=>{y(this,r,"m",h).call(this,i)},onActivate:()=>{y(this,r,"m",c).call(this,i)},onBeforeFilenameChange:t=>{var e;null===(e=this.getEditor(t))||void 0===e||e.close(),y(this,l,"f")===i&&y(this,r,"m",d).call(this,t)}}),u=w.interpreterSession;return u&&w.shouldLockEditors()&&i.updateInterpreter(u),y(this,s,"f").push(i),y(this,a,"f").appendChild(i.tab),y(this,o,"f").appendChild(i.runOption),y(this,r,"m",c).call(this,i),i}},i=new WeakMap,a=new WeakMap,o=new WeakMap,s=new WeakMap,l=new WeakMap,r=new WeakSet,c=function(t){var e,n;if(t!==y(this,l,"f")){if(null===(e=y(this,l,"f"))||void 0===e||e.tab.classList.remove("active"),g(this,l,t,"f"),t){const e=t.editorView;t.tab.classList.add("active"),y(this,i,"f").replaceChildren(e.dom()),e.focus(),e.updateScrollbars()}else y(this,i,"f").replaceChildren();y(this,r,"m",d).call(this,null!==(n=null==t?void 0:t.filename)&&void 0!==n?n:null),this.onStateChanged()}},d=function(t){if(w.panel_editor){const e=t?(0,x.fileIDToHumanFriendly)(t):null;w.panel_editor.title=e,w.panel_editor.titlebar.innerText=null!==t?"Editor — "+e:"Editor"}},h=function(t){var e,n;t.tab.remove(),t.runOption.remove();const i=y(this,s,"f").indexOf(t);if(-1===i)return!1;y(this,s,"f").splice(i,1);const a=null!==(n=null!==(e=y(this,s,"f").at(i))&&void 0!==e?e:y(this,s,"f").at(-1))&&void 0!==n?n:null;return y(this,r,"m",c).call(this,a),!0}},9429:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e},o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{l(r.next(t))}catch(t){a(t)}}function s(t){try{l(r.throw(t))}catch(t){a(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}l((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.cmd_download=e.cmd_upload=e.cmd_export=e.buttons=void 0;const s=a(n(6075)),l=n(7277),c=n(150),d=n(5584),h=n(3679),u=a(n(6042)),p=n(3034),f=n(8352),m=n(2394);function g(){return o(this,void 0,void 0,(function*(){let t=s.interpreterSession;return t&&!(0,m.interpreterEnded)(t.interpreter)?t:yield s.prepareRun()}))}e.buttons=[{click:function(){(0,p.tabNameDlg)((t=>{if(!t)return!0;const e=null!==localStorage.getItem("tscript.code."+t),n=(0,d.localstorageFileID)(t);return e||s.collection.getEditor(n)?(0,p.confirmFileOverwrite)(t,(()=>{s.collection.openEditorFromData(n,"")})):s.collection.openEditorFromData(n,""),!1}))},icon:h.icons.newDocument,tooltip:"New document",hotkey:"shift-control-n",group:"file"},{click:function(){(0,p.loadFileProjDlg)()},icon:h.icons.openDocument,tooltip:"Open document",hotkey:"control-o",group:"file"},{click:function(){var t;null===(t=s.collection.activeEditor)||void 0===t||t.save()},icon:h.icons.saveDocument,tooltip:"Save document",hotkey:"control-s",group:"file"},{click:function(){const t=s.collection.activeEditor;if(!t)return;const e=(0,d.fileIDToContextDependentFilename)(t.filename);return(0,p.saveAsDialog)(e,(e=>{t.saveAs((0,d.localstorageFileID)(e))}))},icon:h.icons.saveDocumentAs,tooltip:"Save document as ...",hotkey:"shift-control-s",group:"file"},{click:function(){(0,p.gitDlg)()},icon:h.icons.git,tooltip:"GIT",hotkey:"shift-control-g",group:"file"},{click:function(){var t;return o(this,void 0,void 0,(function*(){null===(t=yield g())||void 0===t||t.interpreter.run()}))},icon:h.icons.run,tooltip:"Run/continue program",hotkey:"F7",group:"execution"},{click:function(){var t;const e=null===(t=s.interpreterSession)||void 0===t?void 0:t.interpreter;e&&!(0,m.interpreterEnded)(e)&&e.interrupt()},icon:h.icons.interrupt,tooltip:"Interrupt program",hotkey:"shift-F7",group:"execution"},{click:function(){s.clear()},icon:h.icons.reset,tooltip:"Abort program",hotkey:"F10",group:"execution"},{click:function(){var t;return o(this,void 0,void 0,(function*(){null===(t=yield g())||void 0===t||t.interpreter.step_into()}))},icon:h.icons.stepInto,tooltip:"Run current command, step into function calls",hotkey:"shift-control-F11",group:"debug"},{click:function(){var t;return o(this,void 0,void 0,(function*(){null===(t=yield g())||void 0===t||t.interpreter.step_over()}))},icon:h.icons.stepOver,tooltip:"Run current line of code, do no step into function calls",hotkey:"control-F11",group:"debug"},{click:function(){var t;return o(this,void 0,void 0,(function*(){null===(t=yield g())||void 0===t||t.interpreter.step_out()}))},icon:h.icons.stepOut,tooltip:"Step out of current function",hotkey:"shift-F11",group:"debug"},{click:function(){const t=s.collection.activeEditor;if(!t)return;const e=t.editorView.getCursorPosition().row;t.toggleBreakpoint(e)},icon:h.icons.breakPoint,tooltip:"Toggle breakpoint",hotkey:"F8",group:"debug"}],e.cmd_export=function(){var t,e;return o(this,void 0,void 0,(function*(){const n=yield s.createParseInput();if(!n)return;const[r,i]=n;let a=yield(0,l.parseProgram)(r,p.parseOptions);s.clear();let o=a.program,h=a.errors;if(h&&h.length>0){for(let n=0;n<h.length;n++){let r=h[n];s.addMessage(r.type,c.ErrorHelper.getLocatedErrorMsg(r.type,null!==(t=r.filename)&&void 0!==t?t:void 0,r.line,r.message),null!==(e=r.filename)&&void 0!==e?e:void 0,r.line,r.ch,"error"===r.type?r.href:void 0)}return}if(!o)return void alert("internal error during export");let m=(0,d.fileIDToContextDependentFilename)(r.filename),g="tscript-export";g.endsWith("html")||g.endsWith("HTML")||g.endsWith("htm")||g.endsWith("HTM")||(g+=".html");let y=u.createModal({title:"Export program as webpage",scalesize:[.5,.5],minsize:[400,260],onHelp:t=>(t?f.showdocConfirm:f.showdoc)("#/ide/exportdialog"),buttons:[{text:"Close"}]}),v=u.createElement({parent:y.content,type:"div",text:"status: preparing ...",classname:"ide-export-status",style:{top:"20px"}}),b=u.createElement({parent:y.content,type:"a",properties:{target:"_blank",download:g},text:"download standalone turtle application",classname:"ide-export-download",style:{top:"80px"}}),w=u.createElement({parent:y.content,type:"a",properties:{target:"_blank",download:g},text:"download standalone canvas application",classname:"ide-export-download",style:{top:"140px"}});u.startModal(y);const x={includeSourceResolutions:Object.fromEntries(i.includeSourceResolutions.entries()),includeResolutions:i.includeResolutions,main:i.main};let k=JSON.stringify(x);{let t="defer",e=new XMLHttpRequest;e.open("GET",window.location.href,!0),e.overrideMimeType("text/html"),e.onreadystatechange=function(){if(4===e.readyState){let n=e.responseText;n=n.replace("<title>TScript IDE</title>","<title>"+m+"</title>"),n.includes("<script "+t+' src="main.js">')&&(console.log(n),alert("It seems that the TScript IDE is running in development mode. Expect the exported website to be broken."));let r=n.indexOf("<head>")+6,i=n.substr(0,r),a=n.substr(r),o="window.TScript = {}; window.TScript.code = "+k+"; window.TScript.mode = ",s="; window.TScript.name = "+JSON.stringify(m)+";\n",l=function(t){let e=document.createElement("script");e.innerHTML=o+JSON.stringify(t)+s;let n=e.outerHTML,r=new Blob([i+n+a],{type:"text/html"});return URL.createObjectURL(r)};v.innerHTML="status: ready for download",b.href=l("turtle"),b.style.display="block",b.download=m+".html",w.href=l("canvas"),w.style.display="block",w.download=m+".html"}},e.send()}}))},e.cmd_upload=function(){let t=u.createElement({type:"input",parent:document.body,properties:{type:"file",multiple:"multiple"},events:{change:e=>o(this,void 0,void 0,(function*(){if(e.preventDefault(),t.files)for(let e=0;e<t.files.length;e++){let n=t.files[e],r=yield n.text();r&&(0,m.importData)(r,(0,m.cleanupExternalFilename)(n.name))}}))}});t.click(),t.remove()},e.cmd_download=function(){const t=s.collection.activeEditor;if(!t)return;const e=(0,d.fileIDToContextDependentFilename)(t.filename),n=t.editorView.text(),r=u.createElement({type:"a",parent:document.body,properties:{href:"data:text/plain;charset=utf-8,"+encodeURIComponent(n),download:e+".tscript"}});r.click(),r.remove()}},28:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.createCanvas=e.createTurtle=e.createIDEInterpreter=void 0;const o=n(8706),s=n(8397),l=n(6025),c=n(5939),d=a(n(6042)),h=n(2394);e.createIDEInterpreter=function(t){const e=(0,l.createDefaultServices)();e.documentation_mode=!1,e.alert=t=>new Promise(((e,n)=>{d.msgBox({title:"",prompt:t,buttons:[{text:"Okay",isDefault:!0}],enterConfirms:!0,onClose:()=>(e(null),!1)})})),e.confirm=t=>new Promise(((e,n)=>{let r=!1;d.msgBox({title:"Question",prompt:t,icon:d.msgBoxQuestion,buttons:[{text:"Yes",isDefault:!0,onClick:()=>(r=!0,!1)},{text:"No",isDefault:!1,onClick:()=>(r=!1,!1)}],enterConfirms:!0,onClose:()=>(e(r),!1)})})),e.prompt=t=>new Promise(((e,n)=>{const r=d.createElement({type:"input",classname:"ide-prompt-input",properties:{type:"text"}});let i=null;const a=d.createModal({title:"Input",scalesize:[.2,.15],minsize:[400,250],buttons:[{text:"Okay",isDefault:!0,onClick:()=>(i=r.value,!1)},{text:"Cancel",isDefault:!1,onClick:()=>!1}],enterConfirms:!0,onClose:()=>(e(i),!1)});d.createElement({type:"p",parent:a.content,text:t,style:{"white-space":"pre-wrap"}}),a.content.appendChild(r),d.startModal(a),r.focus()}));const n=new c.Interpreter(t,e);return n.eventnames["canvas.resize"]=!0,n.eventnames["canvas.mousedown"]=!0,n.eventnames["canvas.mouseup"]=!0,n.eventnames["canvas.mousemove"]=!0,n.eventnames["canvas.mouseout"]=!0,n.eventnames["canvas.keydown"]=!0,n.eventnames["canvas.keyup"]=!0,n.eventnames.timer=!0,n.reset(),n},e.createTurtle=function(t,e){const n=document.createElement("canvas");function r(t,e){const r=Math.min(t,e);n.style.width=r+"px",n.style.height=r+"px"}n.className="ide ide-turtle",n.width=600,n.height=600,n.addEventListener("contextmenu",(t=>{t.preventDefault()}));const i=t.getBoundingClientRect();r(i.width,i.height);const a=new ResizeObserver((t=>{const e=t[0].contentBoxSize[0];r(e.inlineSize,e.blockSize)}));a.observe(t),null==e||e.addEventListener("abort",(()=>a.disconnect()));const o=n.getContext("2d");return o.setTransform(1,0,0,1,0,0),o.clearRect(0,0,n.width,n.height),n},e.createCanvas=function(t,e,n){const r=document.createElement("canvas");r.width=e.clientWidth,r.height=e.clientHeight;const i=new ResizeObserver((e=>{const n=e[0].contentBoxSize[0];r.width=n.inlineSize,r.height=n.blockSize;const i=l("canvas.ResizeEvent",{width:n.inlineSize,height:n.blockSize});t.enqueueEvent("canvas.resize",i)}));i.observe(e),null==n||n.addEventListener("abort",(()=>i.disconnect()));const a=r.getContext("2d");function l(e,n){const r=t.program;for(let i=10;i<r.types.length;i++){const a=r.types[i];if(a.displayname===e){const e={type:a,value:{a:[]}},i={type:r.types[s.Typeid.typeid_null],value:{b:null}};for(let t=0;t<a.objectsize;t++)e.value.a.push(i);for(const r in a.members)n.hasOwnProperty(r)&&(e.value.a[a.members[r].id]=o.TScript.json2typed.call(t,n[r]));return e}}throw new Error("[createTypedEvent] unknown type "+e)}return a.setTransform(1,0,0,1,0,0),a.clearRect(0,0,r.width,r.height),a.lineWidth=1,a.fillStyle="#000",a.strokeStyle="#000",a.font="16px Helvetica",a.textAlign="left",a.textBaseline="top",r.addEventListener("contextmenu",(t=>{t.preventDefault()})),r.addEventListener("mousedown",(e=>{if(!u(t))return;const n=l("canvas.MouseButtonEvent",p(e,f(e.button)));t.enqueueEvent("canvas.mousedown",n)})),r.addEventListener("mouseup",(e=>{if(!u(t))return;const n=l("canvas.MouseButtonEvent",p(e,f(e.button)));t.enqueueEvent("canvas.mouseup",n)})),r.addEventListener("mousemove",(e=>{if(!u(t))return;const n=l("canvas.MouseMoveEvent",p(e));t.enqueueEvent("canvas.mousemove",n)})),r.addEventListener("mouseout",(()=>{if(!u(t))return;const e={type:t.program.types[s.Typeid.typeid_null],value:{b:null}};t.enqueueEvent("canvas.mouseout",e)})),e.addEventListener("keydown",(e=>{if(!u(t))return;const n=l("canvas.KeyboardEvent",g(e));t.enqueueEvent("canvas.keydown",n)}),{signal:n}),e.addEventListener("keyup",(e=>{if(!u(t))return;const n=l("canvas.KeyboardEvent",g(e));t.enqueueEvent("canvas.keyup",n)}),{signal:n}),r};const u=t=>t.background&&!(0,h.interpreterEnded)(t);function p(t,e){const n=t.currentTarget.getBoundingClientRect();return{x:t.clientX-n.x,y:t.clientY-n.y,button:e,buttons:m(t.buttons),shift:t.shiftKey,control:t.ctrlKey,alt:t.altKey,meta:t.metaKey}}function f(t){return 0===t?"left":1===t?"middle":"right"}function m(t){const e=[];return 1&t&&e.push("left"),4&t&&e.push("middle"),2&t&&e.push("right"),e}const g=t=>({key:t.key,shift:t.shiftKey,control:t.ctrlKey,alt:t.altKey,meta:t.metaKey})},3034:function(t,e,n){"use strict";var r,i,a,o,s,l=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),c=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),d=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&l(e,t,n);return c(e,t),e},h=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{l(r.next(t))}catch(t){a(t)}}function s(t){try{l(r.throw(t))}catch(t){a(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}l((r=r.apply(t,e||[])).next())}))},u=this&&this.__classPrivateFieldSet||function(t,e,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(t,n):i?i.value=n:e.set(t,n),n},p=this&&this.__classPrivateFieldGet||function(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)};Object.defineProperty(e,"__esModule",{value:!0}),e.gitDlg=e.tabNameDlg=e.deleteFileDlg=e.createFileDlgFileView=e.saveAsDialog=e.loadFileProjDlg=e.fileDlgSize=e.configDlg=e.saveConfig=e.loadConfig=e.confirmFileOverwrite=e.confirmFileDiscard=e.parseOptions=void 0;const f=n(7277),m=n(5584),g=n(3623),y=n(8323),v=d(n(6042)),b=n(6042),w=n(9429),x=d(n(6075)),k=n(3164),A=n(8352),T=n(355);function _(){var t;const n=x.collection.getSerializedState();let r={options:e.parseOptions,hotkeys:[],theme:v.getThemeConfig(),tabs:x.tab_config,open:n.open.filter(m.isLoadableFileID),main:x.getRunSelection(),active:n.active,currentProject:null!==(t=(0,y.getCurrentProject)())&&void 0!==t?t:null};for(let t=0;t<w.buttons.length;t++)r.hotkeys.push(w.buttons[t].hotkey);localStorage.setItem("tscript.ide.config",JSON.stringify(r))}e.parseOptions=f.defaultParseOptions,e.confirmFileDiscard=function(t,e){v.msgBox({prompt:"The document may have unsaved changes.\nDo you want to discard the code?",icon:v.msgBoxQuestion,title:(0,m.fileIDToHumanFriendly)(t),buttons:[{text:"Discard",onClick:e,isDefault:!0},{text:"Cancel"}]})},e.confirmFileOverwrite=function(t,e){v.msgBox({prompt:"A document named "+t+" already exists.\nDo you want to overwrite it?",icon:v.msgBoxQuestion,title:t,buttons:[{text:"Overwrite",onClick:e,isDefault:!0},{text:"Cancel"}]})},e.loadConfig=function(){let t=localStorage.getItem("tscript.ide.config"),n=null;if(t){if(n=JSON.parse(t),n.hasOwnProperty("hotkeys")){let t=Math.min(w.buttons.length,n.hotkeys.length);for(let e=0;e<t;e++)w.buttons[e].hotkey=n.hotkeys[e]}n.hasOwnProperty("options")&&(e.parseOptions=Object.assign(Object.assign({},f.defaultParseOptions),n.options));const r=n.theme;v.setThemeConfig(v.isThemeConfig(r)?r:"default")}return n},e.saveConfig=_,e.configDlg=function(){let t=v.createModal({title:"Configuration",scalesize:[.5,.5],minsize:[370,270],buttons:[{text:"Done",isDefault:!0}],onClose:_}),n=v.createElement({parent:t.content,type:"div"}),r=(v.createElement({parent:n,type:"h3",text:"Configure Hotkeys"}),v.createElement({parent:n,type:"p",text:"Click a button to configure its hotkey."}),new Array),i=v.createElement({parent:n,type:"div",classname:"ide-toolbar"}),a=w.buttons[0].group;for(let t=0;t<w.buttons.length;t++){let e=Object.assign({},w.buttons[t]);e.group!==a&&(v.createElement({type:"div",parent:i,classname:"tgui tgui-control tgui-toolbar-separator"}),a=e.group),e.width=20,e.height=20,e.style={float:"left",height:"22px"},e.hotkey&&(e.tooltip+=" ("+e.hotkey+")"),delete e.hotkey,e.parent=i;{let n=t;e.click=function(){let t=v.createModal({title:"Set hotkey",scalesize:[.3,.3],minsize:[340,220],buttons:[{text:"Cancel"}],onClose:_});v.createIcon({parent:t.content,width:20,height:20,icon:w.buttons[n].icon,style:{position:"absolute",left:"15px",top:"16px"}}),v.createElement({parent:t.content,type:"label",text:w.buttons[n].tooltip,style:{position:"absolute",left:"50px",top:"16px",right:"15px"}}),v.createElement({parent:t.content,type:"label",text:"Current hotkey: "+(w.buttons[n].hotkey?w.buttons[n].hotkey:"<None>"),style:{position:"absolute",left:"50px",top:"46px",right:"15px"}}),v.createElement({parent:t.content,type:"label",text:"Press the hotkey to assign, or press escape to remove the current hotkey",style:{position:"absolute",left:"15px",top:"106px",right:"15px"}}),t.onKeyDownOverride=!0,t.onKeyDown=function(t){t.preventDefault(),t.stopPropagation();let e=t.key;if("Shift"!==e&&"Control"!==e&&"Alt"!==e&&"OS"!==e&&"Meta"!==e)return w.buttons[n].hotkey&&(v.setTooltip(w.buttons[n].control.dom,w.buttons[n].tooltip),v.setTooltip(r[n].dom,w.buttons[n].tooltip),v.releaseHotkey(w.buttons[n].hotkey),delete w.buttons[n].hotkey),"Escape"===e?(v.stopModal(),!1):(t.altKey&&(e="alt-"+e),t.ctrlKey&&(e="control-"+e),t.shiftKey&&(e="shift-"+e),e=v.normalizeHotkey(e),v.hotkey(e)?alert("hotkey "+e+" is already in use"):(w.buttons[n].hotkey=e,v.setHotkey(e,w.buttons[n].click),v.setTooltip(w.buttons[n].control.dom,w.buttons[n].tooltip+" ("+e+")"),v.setTooltip(r[n].dom,w.buttons[n].tooltip+" ("+e+")"),v.stopModal()),!1)},v.startModal(t)}}r.push(v.createButton(e))}{let e=v.createElement({parent:t.content,type:"div"}),n=(v.createElement({parent:e,type:"h3",style:{"margin-top":"20px"},text:"Appearance"}),v.createElement({parent:e,type:"p"}));const r=[{id:"default",display:"System Default"},{id:"light",display:"Light"},{id:"dark",display:"Dark"}];v.createElement({parent:n,type:"label",html:"Theme",properties:{for:"selTheme"},style:{"padding-right":"5px"}});let i=v.createElement({parent:n,type:"select",classname:"tgui-modal-dropdown",id:"selTheme",properties:{size:"1"}});for(let t of r)v.createElement({parent:i,type:"option",properties:{value:t.id},style:{width:"100px"},html:t.display});i.value=v.getThemeConfig(),i.addEventListener("change",(()=>{const t=i.value;v.setThemeConfig(t)}))}{let n=v.createElement({parent:t.content,type:"div"}),r=(v.createElement({parent:n,type:"h3",style:{"margin-top":"20px"},text:"Coding Style"}),v.createElement({parent:n,type:"p"})),i=v.createElement({parent:r,type:"input",id:"chkCodingStyle",properties:{type:"checkbox"},click:function(t){e.parseOptions.checkstyle=i.checked}});v.createElement({parent:r,type:"label",html:"Enable style errors",properties:{for:"chkCodingStyle"},style:{"padding-left":"5px"}}),e.parseOptions.checkstyle&&(i.checked=!0)}v.startModal(t)},e.fileDlgSize={scalesize:[.5,.7],minsize:[440,260]},e.loadFileProjDlg=function(){const t="Load file";let n,r,i;const a={clickConfirmation:function(){s.pressButton(o)}};n=S("",!1,(function(t){return h(this,void 0,void 0,(function*(){let e=x.collection.getEditor((0,m.localstorageFileID)(t));e?e.editorView.focus():yield x.collection.openEditorFromFile((0,m.localstorageFileID)(t))}))}),Object.assign(Object.assign({},a),{switchView:function(){i=r,s.setTitle("Load project"),l()}})),r=function(t){const e=(0,y.listProjects)().then((t=>t.sort())),n=new E({initItem:"New project name",includeInputField:!0,initItemListP:e,onClickDelete:function(){const t=n.getSelectedItem();if(null===t)return;if(!n.getItems().includes(t))return;const e=()=>h(this,void 0,void 0,(function*(){return yield(0,g.closeProjectEditorTabsRecursively)(t,"/"),yield(0,y.deleteProject)(t),n.removeItemFromList(t),n.updateStatusText(),x.filetree.projectName===t&&x.filetree.changeRootDir(null),!1}));let r=!0,i=v.msgBox({title:"Delete project",icon:v.msgBoxExclamation,prompt:'Delete project "'+t+'"\nAre you sure?',buttons:[{text:"Delete",isDefault:!0,onClick:()=>(e().then((t=>{!t&&r&&(0,b.tryStopModal)(i)})),!0)},{text:"Cancel"}],onClose:()=>{r=!1}})},onClickConfirmation:function(){return h(this,void 0,void 0,(function*(){const t=n.getSelectedItem();if(null===t)return!0;try{yield(0,y.tryCreateProject)(t)}catch(t){if(t instanceof y.InvalidProjectName)return v.msgBox({title:"Invalid project name",prompt:t.reason,enterConfirms:!0,buttons:[{text:"Okay",isDefault:!0}]}),!0;throw t}return yield(0,y.setCurrentProject)(t),!1}))},deleteBtnText:"Delete project",inputFieldPlaceholder:"New project",switchBtnText:"Show files",itemTerm:"project"},t);return n.updateStatusText(),n.fullyRendered.then((()=>n.updateStatusText())),n}(Object.assign(Object.assign({},a),{switchView:function(){i=n,s.setTitle(t),l()}})),i=n;const o={text:"Load",isDefault:!0,onClick:function(){return h(this,void 0,void 0,(function*(){return yield i.onClickConfirmation()}))}};let s=v.createModal({title:t,minsize:[...e.fileDlgSize.minsize],scalesize:[...e.fileDlgSize.scalesize],buttons:[o,{text:"Cancel"}],enterConfirms:!0});return v.startModal(s),l(),s;function l(){s.content.replaceChildren(i.element),i.onAttached()}},e.saveAsDialog=function(t,n){const r=S(null!=t?t:"",!0,n,{switchView:null,clickConfirmation:()=>a.pressButton(i)}),i={text:"Save",isDefault:!0,onClick:()=>r.onClickConfirmation()};let a=v.createModal({title:"Save file as ...",minsize:[...e.fileDlgSize.minsize],scalesize:[...e.fileDlgSize.scalesize],buttons:[i,{text:"Cancel"}],enterConfirms:!0});return v.startModal(a),a.content.replaceChildren(r.element),a};class E{constructor(t,e){r.set(this,void 0),i.set(this,void 0),a.set(this,void 0),o.set(this,null),s.set(this,void 0),u(this,r,t,"f"),u(this,i,e,"f");const n=v.createElement({type:"div",style:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:"100%",width:"100%"}});let l,c=v.createElement({parent:n,type:"div",style:{display:"flex","flex-direction":"row","justify-content":"space-between",width:"100%",height:"25px","margin-top":"7px"}}),d=v.createElement({parent:c,type:"button",style:{width:"100px",height:"100%","margin-right":"10px"},text:t.deleteBtnText,click:t.onClickDelete,classname:"tgui-modal-button"});d.disabled=!0,u(this,a,v.createElement({parent:c,type:"label",style:{flex:"1",height:"100%","white-space":"nowrap"},text:"",classname:"tgui-status-box"}),"f"),null!==e.switchView&&v.createElement({parent:c,type:"button",style:{height:"100%",marginLeft:"auto",padding:"0px 10px"},text:t.switchBtnText,click:e.switchView,classname:"tgui-modal-button"}),u(this,s,new Promise((t=>l=t)),"f"),this.fullyRendered=p(this,s,"f").then((()=>{})),t.initItemListP.then((e=>{const r=[...e],a=v.createElement({parent:n,type:"select",properties:{size:Math.max(2,r.length).toString(),multiple:"false"},classname:"tgui-list-box",style:{flex:"auto",margin:"7px 0px",overflow:"scroll"}});let s={value:t.initItem};if(t.includeInputField){const e=v.createElement({parent:n,type:"input",style:{height:"25px",margin:"0 0px 7px 0px"},classname:"tgui-text-box",properties:{type:"text",placeholder:t.inputFieldPlaceholder,value:t.initItem}});e.select(),s=e}for(let t=0;t<r.length;t++){let e=new Option(r[t],r[t]);a.options[t]=e}a.addEventListener("change",(t=>{t.target&&t.target.value&&(s.value=t.target.value)})),a.addEventListener("keydown",(e=>{"Backspace"!==e.key&&"Delete"!==e.key||(e.preventDefault(),e.stopPropagation(),t.onClickDelete())})),a.addEventListener("dblclick",(t=>(t.preventDefault(),t.stopPropagation(),p(this,i,"f").clickConfirmation(),!1))),d.disabled=!1,u(this,o,{list:a,name:s,items:r},"f"),l(p(this,o,"f"))})),this.element=n}onAttached(){p(this,s,"f").then((t=>{t.name instanceof HTMLInputElement&&t.name.isConnected&&t.name.focus()}))}onClickConfirmation(){return h(this,void 0,void 0,(function*(){return yield p(this,r,"f").onClickConfirmation()}))}getSelectedItem(){return null===p(this,o,"f")?null:p(this,o,"f").name.value}removeItemFromList(t){if(null===p(this,o,"f"))return void p(this,s,"f").then((()=>{this.removeItemFromList(t)}));const e=p(this,o,"f").items.indexOf(t);e>=0&&(p(this,o,"f").items.splice(e,1),p(this,o,"f").list.remove(e))}getItems(){var t,e;return null!==(e=null===(t=p(this,o,"f"))||void 0===t?void 0:t.items)&&void 0!==e?e:null}isFullyRendered(){return null!==p(this,o,"f")}updateStatusText(){let t;if(null===p(this,o,"f"))t="Loading...";else{const e=p(this,o,"f").items;t=(e.length>0?e.length:"No")+" "+p(this,r,"f").itemTerm+(1===e.length?"":"s")}p(this,a,"f").innerText=t}}function S(t,e,n,r){let i,a=new Array;for(let t in localStorage)"tscript.code."===t.substring(0,13)&&a.push(t.substring(13));a.sort(),i=new E({initItem:t,includeInputField:e,initItemListP:Promise.resolve(a),onClickDelete:()=>{const t=i.getSelectedItem();null!==t&&function(t){var e;if(null===(e=i.getItems())||void 0===e?void 0:e.includes(t)){let e=()=>{var e;null===(e=x.collection.getEditor((0,m.localstorageFileID)(t)))||void 0===e||e.close(),localStorage.removeItem("tscript.code."+t),i.removeItemFromList(t),o()};I(t,e)}}(t)},onClickConfirmation:function(){return h(this,void 0,void 0,(function*(){let t=i.getSelectedItem();return null===t||""==t||!(e||a.indexOf(t)>=0)||(yield n(t),!1)}))},deleteBtnText:"Delete file",inputFieldPlaceholder:"Filename",switchBtnText:"Show projects",itemTerm:"document"},r);const o=()=>i.updateStatusText();return o(),i.fullyRendered.then(o),i}function I(t,e){v.msgBox({title:"Delete file",icon:v.msgBoxExclamation,prompt:'Delete file "'+t+'"\nAre you sure?',buttons:[{text:"Delete",isDefault:!0,onClick:e},{text:"Cancel"}]})}r=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakMap,s=new WeakMap,e.createFileDlgFileView=S,e.deleteFileDlg=I,e.tabNameDlg=function(t,e="New tab",n=void 0,r=void 0){let i=v.createModal({title:e,scalesize:[0,0],minsize:[330,120],buttons:[{text:"Confirm",isDefault:!0,onClick:function(){var e;return t(null!==(e=null==o?void 0:o.value)&&void 0!==e?e:"")}},{text:"Cancel"}],enterConfirms:!0,contentstyle:{display:"flex","align-items":"center"}});const a={type:"text",placeholder:null!=r?r:"Filename"};void 0!==n&&(a.value=n);const o=v.createElement({parent:i.content,type:"input",style:{width:"100%",height:"25px","margin-vertical":"7px"},classname:"tgui-text-box",properties:a});v.startModal(i),o.focus()},e.gitDlg=function(){x.clear();let t=v.createModal({title:"Git",scalesize:[0,0],minsize:[360,270],buttons:[{text:"Cancel"}],contentstyle:{display:"flex","align-items":"center"}}),e=v.createElement({parent:t.content,type:"div",style:{margin:"auto",width:"100%",display:"flex","flex-direction":"column","align-items":"center"}}),n=v.createElement({parent:e,type:"div",style:{width:"100%","text-align":"center"}}),r=v.createElement({parent:e,type:"div",style:{"align-items":"center","justify-content":"space-evenly",width:"100%",display:"flex"}}),i=v.createElement({parent:e,type:"div",style:{width:"100%","text-align":"center"}});if((0,k.validJWT)(localStorage.getItem("git_token"))){v.createElement({parent:n,type:"p",text:"Currently logged in with "+("hub"==(0,k.getLoginTypeFromToken)((0,k.getRawToken)())?"GitHub":"GitLab")});const a={name:"Custom...",url:"",private:!1};let o=v.createElement({parent:n,type:"select",id:"repoSelector",style:{"min-width":"90%",height:"30px","padding-left":"4px","margin-bottom":"10px"}});o.addEventListener("change",(t=>{t.target.value!==JSON.stringify(a)?l.style.display="none":l.style.display="inline-block"}));let s,l=v.createElement({parent:n,type:"input",id:"customUrlInput",properties:{placeholder:"Enter custom Git url..."},style:{"min-width":"90%",height:"30px","padding-left":"4px","margin-bottom":"10px",display:"inline-block"}});(0,T.getGitRepos)().then((t=>{t.sort(((t,e)=>t.name<e.name?-1:1)),t.unshift(a);for(let e of t){const t=document.createElement("option");t.value=JSON.stringify(e),t.innerHTML=`${e.private?"&#128274;":""} ${e.name}`,o.appendChild(t)}(0,T.getCurrentProjectGitInfo)().then((e=>{if(e){u(!1,[c,s,d]);const n=t.find((t=>t.url.toLowerCase()===e.url.toLowerCase()));n?(o.value=JSON.stringify(n),o.disabled=!0,l.style.display="none"):(o.value=JSON.stringify(a),o.disabled=!0,l.value=e.url,l.disabled=!0)}}))})),(0,T.getCurrentProjectGitInfo)().then((t=>{s=v.createElement({parent:r,type:"button",style:{color:"#fff",margin:"10px, 0px","background-color":"red",padding:"5px 20px",cursor:"pointer",order:"-3"},text:t?"Pull":"Clone",click:()=>{if(u(!0,[c,s,d]),t)p(!0),(0,T.gitPull)().then((()=>{v.stopModal()}));else try{const t=JSON.parse(o.value);if(p(!0),JSON.stringify(t)===JSON.stringify(a)){if(""===l.value)return u(!0,[c]),u(!1,[s,d]),void p(!1);(0,T.gitClone)(l.value).then((()=>{v.stopModal()}))}else(0,T.gitClone)(t.url,t.name).then((()=>{v.stopModal()}))}catch(t){p(!1)}}})}));let c=v.createElement({parent:r,type:"button",properties:{disabled:"true"},style:{padding:"5px 20px",color:"#fff",margin:"10px, 0px","background-color":"green",cursor:"pointer"},text:"Push",click:()=>{u(!0,[c,s,d]),p(!0),function(t){let e=v.createModal({title:"Commit message",scalesize:[0,0],minsize:[400,120],buttons:[{text:"Commit",onClick:()=>{const e=r.value;if(""===e)return!0;(0,T.gitPush)(e).then((()=>{t(!0)}))},isDefault:!0},{text:"Cancel",onClick:()=>t(!0)}],enterConfirms:!0}),n=v.createElement({parent:e.content,type:"div",style:{display:"flex",width:"100%","margin-top":"5px"}}),r=v.createElement({parent:n,type:"input",id:"messageInput",properties:{placeholder:"Enter commit message...",required:"true"},style:{"min-width":"90%",height:"30px","padding-left":"4px","margin-bottom":"10px",display:"inline-block"}});v.startModal(e)}((t=>{t&&v.stopModal()}))}}),d=v.createElement({parent:r,type:"button",style:{padding:"5px 20px",margin:"10px, 0px",color:"#fff","background-color":"red",cursor:"pointer"},text:"Logout",click:()=>{u(!0,[c,s,d]),p(!0),(0,T.gitLogout)().then((t=>{t?(x.addMessage("print","Successfully logged out from git."),v.stopModal()):(x.addMessage("error",`Could not logout from ${"hub"==(0,k.decodeJWT)((0,k.getRawToken)()).data.type?"GitHub":"GitLab"}.`),v.stopModal())}))}}),h=v.createElement({parent:i,type:"p",text:"Loading...",style:{display:"none"}});function u(t,e){for(let n of e)n.disabled=t}function p(t){h.style.display=t?"inline-block":"none"}}else(0,T.gitLogout)(),v.createElement({parent:r,type:"button",style:{color:"#fff","background-color":"#08872B",padding:"5px 20px",cursor:"pointer"},text:"Login w/ GitHub",click:()=>(0,T.startGitLoginFlow)("hub")}),v.createElement({parent:r,type:"button",style:{color:"#fff","background-color":"#554488",padding:"5px 20px",cursor:"pointer","margin-left":"10px"},text:"Login w/ GitLab",click:()=>(0,T.startGitLoginFlow)("lab")});v.createElement({parent:r,type:"button",style:{width:"30px",height:"30px","border-radius":"100px","font-size":"20px",cursor:"pointer","margin-left":"10px"},text:"?",click:()=>(0,A.showdoc)("/git")}),v.startModal(t),(0,T.setGitConfig)()}},9836:function(t,e,n){"use strict";var r,i,a,o,s=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),l=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),c=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&s(e,t,n);return l(e,t),e},d=this&&this.__classPrivateFieldSet||function(t,e,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(t,n):i?i.value=n:e.set(t,n),n},h=this&&this.__classPrivateFieldGet||function(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)};Object.defineProperty(e,"__esModule",{value:!0}),e.EditorController=void 0;const u=n(5584),p=n(8031),f=c(n(6042)),m=n(3034),g=n(5016),y=c(n(6075));e.EditorController=class{constructor({filename:t,text:e,onActivate:n,onClosed:s,onBeforeFilenameChange:l}){r.set(this,new Set),i.set(this,void 0),a.set(this,void 0),o.set(this,void 0),d(this,o,t,"f"),d(this,i,n,"f"),this.close=s,d(this,a,l,"f"),this.tab=f.createElement({type:"div",classname:"file active"}),this.tab.replaceChildren(this.tabLabel=f.createElement({type:"span",classname:"name",text:"",click:()=>n()}),f.createElement({type:"span",classname:"close",text:"×",click:()=>{this.hasUnsavedChanges?(0,m.confirmFileDiscard)(this.filename,(()=>this.close())):this.close()}})),this.runOption=f.createElement({type:"option",properties:{value:t},text:""}),this.updateUITextsForFileID();const c=this.editorView=new p.Editor({language:"tscript",text:null!=e?e:"",readOnly:y.shouldLockEditors()});c.events.barDraw=(t,e)=>{const n=new Array,i=h(this,r,"f");for(let r=t;r<e;r++)i.has(r)?n.push("⏺"):n.push(null);return n},c.events.barClick=t=>this.toggleBreakpoint(t),c.events.changed=t=>{if(t){const{line:e,removed:n,inserted:i}=t,a=h(this,r,"f");for(const t of[...a])t>=e&&a.delete(t),t>=e+n&&a.add(t+i-n);c.draw()}y.clear()}}get filename(){return h(this,o,"f")}get breakpoints(){return h(this,r,"f")}get hasUnsavedChanges(){return this.editorView.isDirty()}navigate(t){var e;h(this,i,"f").call(this),null!=t.character?this.editorView.setCursorPositionByCharacter(t.line,t.character):this.editorView.setCursorPosition(t.line,null!==(e=t.column)&&void 0!==e?e:0),this.editorView.scrollIntoView()}toggleBreakpoint(t){var e;const n=null===(e=y.interpreterSession)||void 0===e?void 0:e.interpreter;if(n){const e=n.toggleBreakpoint(t+1,h(this,o,"f"));if(null===e)return;t=e.line-1,this.editorView.scrollTo(t,0)}h(this,r,"f").delete(t)||h(this,r,"f").add(t),this.editorView.focus(),this.editorView.draw()}updateInterpreter(t){if(!t)return void this.editorView.setReadOnly(!1);this.editorView.setReadOnly(!0);const e=t.interpreter.defineBreakpoints(Array.from(h(this,r,"f"),(t=>t+1)),h(this,o,"f"));if(e){h(this,r,"f").clear();for(const t of e)h(this,r,"f").add(t-1);this.editorView.draw()}}saveAs(t){h(this,a,"f").call(this,t),d(this,o,t,"f"),this.updateUITextsForFileID(),this.runOption.value=t,this.save()}updateUITextsForFileID(){this.tabLabel.innerText=(0,u.fileIDToContextDependentFilename)(h(this,o,"f")),this.runOption.innerText=(0,u.fileIDToHumanFriendly)(h(this,o,"f"))}save(){const[t,e]=(0,u.splitFileIDAtColon)(this.filename);"project"===t?(0,g.saveFileTreeFile)(this.filename,this.editorView.text()):"localstorage"===t?localStorage.setItem("tscript.code."+e,this.editorView.text()):f.errorMsgBox(`Can't save files with FileID namespace "${t}"`),this.editorView.setClean()}},r=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakMap},5016:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e},o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{l(r.next(t))}catch(t){a(t)}}function s(t){try{l(r.throw(t))}catch(t){a(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}l((r=r.apply(t,e||[])).next())}))},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.FileTree=e.fileTreePathToProjectNameFileName=e.saveFileTreeFile=void 0;const l=n(3679),c=a(n(6042)),d=n(8323),h=n(6075),u=n(3034),p=n(6042),f=s(n(9497)),m=n(5584),g=n(3623);function y(t,e=!1){const n=e?t.basename:t.path;return"dir"===t.type?n+"/":n}function v(t,e=!0){e?(0,p.msgBox)({title:"Invalid file name",prompt:`Filenames ${t}`}):(0,p.msgBox)({title:"Invalid directory name",prompt:`Directory names ${t}`})}function b(t){(0,p.msgBox)({title:"File or directory exists already",prompt:`File or directory "${t}" exists already`})}e.saveFileTreeFile=function(t,e){return o(this,void 0,void 0,(function*(){const[n,r]=(0,m.projectFileIDSplit)(t),i=f.default.join((0,d.getProjectPath)(n),r);if(!(yield(0,d.pathExists)(i))){let n=c.createModal({title:"File not present in file tree anymore",scalesize:[0,0],minsize:[400,120],buttons:[{text:"Delete",onClick:()=>{var e;null===(e=h.collection.getEditor(t))||void 0===e||e.close()}},{text:"Save",isDefault:!0,onClick:()=>o(this,void 0,void 0,(function*(){(yield function(t){return o(this,void 0,void 0,(function*(){const e=t.split("/");""===e[0]&&e.shift();const n=(0,d.getCurrentProject)();if(e[0]!==n)return(0,p.msgBox)({title:"File from other project",prompt:`Cannot save this file from project ${e[0]} in currently open project ${n}`}),!1;let r=(0,d.getProjectPath)(n);for(let t=1;t<e.length-1;t++)r=f.default.join(r,e[t]),(yield(0,d.pathExists)(r))||(yield d.projectsFSP.mkdir(r));return!0}))}(i))&&(yield d.projectsFSP.writeFile(i,e),yield h.filetree.refresh())}))},{text:"Cancel"}],enterConfirms:!0,contentstyle:{display:"flex","align-items":"center"}});return c.createText("Irreversibly delete file content or save it again at old location in file tree?",n.content),void c.startModal(n)}yield d.projectsFSP.writeFile(i,e),yield h.filetree.refresh()}))},e.fileTreePathToProjectNameFileName=function(t){const e=(0,d.simplifyPath)(t).split("/").filter((t=>t.length>0));return{project:e[0],filename:e.slice(1).join("/")}},e.FileTree=class{constructor(){this.dir=null,this.openedProject=null,this.selectedPath=null,this.refreshDoneProm=Promise.resolve(),this.info=(t,e)=>o(this,void 0,void 0,(function*(){if(null===this.dir)return{children:[],ids:[]};if(null===t){const t={type:"dir",basename:"",path:"/",parent:null};return this.path2FileTreeNode[t.path]=t,yield this.info(t,t.path)}let e=this.pathToNodeInfo(t.path);if(null!==e)return e;const n=[];if("dir"===t.type){const e=(0,d.simplifyPath)(`${this.dir}/${t.path}`),r=yield d.projectsFSP.readdir(e);for(const i of r){const r=(0,d.simplifyPath)(`${e}/${i}`),a=(0,d.simplifyPath)(`${t.path}/${i}`);if("/.git"===a)continue;const o={type:(yield d.projectsFSP.stat(r)).type,path:a,basename:i,parent:t};this.path2FileTreeNode[o.path]=o,n.push([o,r])}}const r=(t,e)=>t<e?-1:t==e?0:1;return n.sort((([t],[e])=>"dir"===t.type?"dir"===e.type?r(t.path,e.path):-1:"dir"===e.type?1:r(t.path,e.path))),e={element:c.createElement({type:"div",text:y(t,!0),style:{minWidth:"8px",width:"fit-content",minHeight:"var(--general-page-style--line-height)"}}),children:n.map((([t])=>t)),ids:n.map((([t,e])=>e)),opened:null!==t.parent&&null===t.parent.parent},this.path2NodeInfo[t.path]=e,e})),this.onNodeDblClick=(t,e,n)=>o(this,void 0,void 0,(function*(){if(this.selectPath(e.path),"file"===e.type){const t=(0,m.projectFileID)(this.openedProject,(0,d.simplifyPath)(e.path)),n=yield h.collection.openEditorFromFile(t);if(n instanceof Error||null===n)return void(0,p.errorMsgBox)(`Could not open file: ${null===n?"Doesn't exists":n.message}`)}})),this.onNodeClick=(t,e,n)=>{this.selectedPath===e.path?this.selectPath(null):this.selectPath(e.path)},this.panel=c.createPanel({name:"file_tree",title:"Files (No project selected)",state:"icon",fallbackState:"left",icon:l.icons.fileTree});const t=c.createElement({type:"div",style:{width:"100%",height:"25px"},parent:this.panel.content});c.createElement({type:"hr",classname:"file-tree",parent:this.panel.content});const e=c.createButton({click:this.handleCreate.bind(this),parent:t,text:"New"}),n=c.createButton({click:this.handleRename.bind(this),parent:t,text:"Rename"}),r=c.createButton({click:this.handleDelete.bind(this),parent:t,text:"Delete"}),i=c.createButton({click:this.handleCreateDir.bind(this),parent:t,text:"New Dir"}),a=c.createButton({click:this.handleCloseProject.bind(this),parent:t,text:"Close Project"});this.buttons=[e.dom,n.dom,r.dom,i.dom,a.dom],this.setButtonsDisabled(!0);const s=c.createElement({type:"div",style:{overflowY:"hidden",overflowX:"hidden",height:"calc(100% - 30px)"},parent:this.panel.content});this.treeControl=new c.TreeControl({parent:s,info:this.info.bind(this),cursorStyle:"pointer",nodeEventHandlers:{dblclick:this.onNodeDblClick.bind(this),click:this.onNodeClick.bind(this)}}),this.path2NodeInfo={},this.path2FileTreeNode={},(0,d.addListenerOnChangeProject)((t=>{this.changeRootDir(null!=t?t:null)})),this.panel.content.setAttribute("tabindex","0"),this.panel.content.addEventListener("keydown",(t=>o(this,void 0,void 0,(function*(){"Backspace"!==t.key&&"Delete"!==t.key||(t.preventDefault(),t.stopPropagation(),yield this.handleDelete())}))))}init(){return this.chainToPromise((()=>o(this,void 0,void 0,(function*(){yield this.refreshMux(!0)}))))}changeRootDir(t){const e=null===t?null:(0,d.getProjectPath)(t);return this.chainToPromise((()=>o(this,void 0,void 0,(function*(){return this.dir=e,this.openedProject=t,yield this.refreshMux(!0)}))))}refresh(){return this.refreshMux(!1)}refreshMux(t=!1){const e=()=>(this.setButtonsDisabled(!0),this.path2NodeInfo={},this.path2FileTreeNode={},new Promise((t=>{this.treeControl.update(void 0,(()=>o(this,void 0,void 0,(function*(){this.selectedPath&&null===this.pathToNodeInfo(this.selectedPath)?this.selectPath(null):this.selectPath(this.selectedPath),null!==this.projectName&&this.setButtonsDisabled(!1),t(void 0)}))))})));return t?e():this.chainToPromise(e)}setButtonsDisabled(t){for(const e of this.buttons)e.disabled=t}addSampleContent(){return o(this,void 0,void 0,(function*(){return this.chainToPromise((()=>o(this,void 0,void 0,(function*(){try{yield(0,d.deleteProject)("tmp")}catch(t){if(!(t instanceof d.ProjectNotFoundError))throw t}const t=(0,d.getProjectPath)("tmp");if(!(yield(0,d.tryCreateProject)("tmp")))throw"Sample project should not exist right now";yield d.projectsFSP.writeFile(f.default.join(t,"root"),'include "sub/file";\nprint("Hello");'),yield d.projectsFSP.mkdir(f.default.join(t,"sub")),yield d.projectsFSP.writeFile(f.default.join(t,"sub/file"),'include "../sub2/file2";\ninclude "ssub/sfile";\nprint("Hello file");'),yield d.projectsFSP.mkdir(f.default.join(t,"sub2")),yield d.projectsFSP.writeFile(f.default.join(t,"sub2/file2"),'include "/sub/ssub/sfile";\nprint("Hello file2");'),yield d.projectsFSP.mkdir(f.default.join(t,"sub/ssub")),yield d.projectsFSP.writeFile(f.default.join(t,"sub/ssub/sfile"),'include "../../root";\nprint("Hello sfile");')}))))}))}pathToNodeInfo(t){var e;return null!==(e=this.path2NodeInfo[t])&&void 0!==e?e:null}pathToFileTreeNode(t){var e;return null!==(e=this.path2FileTreeNode[t])&&void 0!==e?e:null}selectPath(t){var e,n,r,i;this.selectedPath&&(null===(n=null===(e=this.pathToNodeInfo(this.selectedPath))||void 0===e?void 0:e.element)||void 0===n||n.classList.remove("file-tree-selected")),this.selectedPath=t,this.selectedPath&&(null===(i=null===(r=this.pathToNodeInfo(this.selectedPath))||void 0===r?void 0:r.element)||void 0===i||i.classList.add("file-tree-selected"))}toAbs(t){if(null===this.dir)throw"root directory is not set";return(0,d.simplifyPath)(this.dir+"/"+t)}handleDelete(){return o(this,void 0,void 0,(function*(){if(null===this.openedProject||null===this.selectedPath)return;const t=this.openedProject,e=this.toAbs(this.selectedPath),n=this.selectedPath;(0,u.deleteFileDlg)(this.selectedPath,(()=>o(this,void 0,void 0,(function*(){var r;switch(this.pathToFileTreeNode(n).type){case"dir":yield(0,g.closeProjectEditorTabsRecursively)(t,n),yield(0,d.rmdirRecursive)(e);break;case"file":null===(r=h.collection.getEditor((0,m.projectFileID)(t,n)))||void 0===r||r.close(),yield d.projectsFSP.unlink(e)}return this.chainToPromise((()=>o(this,void 0,void 0,(function*(){this.selectPath(null),yield this.refreshMux(!0)})))),!1}))))}))}handleCreate(){(0,u.tabNameDlg)((t=>o(this,void 0,void 0,(function*(){const e=(0,d.isInvalidBasename)(t);if(void 0!==e)return v(e),!0;let n="/";null!==this.selectedPath&&(n="file"===this.pathToFileTreeNode(this.selectedPath).type?f.default.dirname(this.selectedPath):this.selectedPath);const r=f.default.join(n,t),i=this.toAbs(r);return(yield(0,d.pathExists)(i))?(b(r),!0):(yield d.projectsFSP.writeFile(i,""),yield this.refresh(),!1)}))),"New file")}handleCreateDir(){(0,u.tabNameDlg)((t=>o(this,void 0,void 0,(function*(){const e=(0,d.isInvalidBasename)(t);if(void 0!==e)return v(e,!1),!0;let n="/";null!==this.selectedPath&&(n="file"===this.pathToFileTreeNode(this.selectedPath).type?f.default.dirname(this.selectedPath):this.selectedPath);const r=f.default.join(n,t),i=this.toAbs(r);return(yield(0,d.pathExists)(i))?(b(r),!0):(yield d.projectsFSP.mkdir(i),yield this.refresh(),!1)}))),"New directory",void 0,"Directory name")}handleRename(){return o(this,void 0,void 0,(function*(){if(null===this.selectedPath)return;const t=this.openedProject;null!==t&&(0,u.tabNameDlg)((e=>o(this,void 0,void 0,(function*(){if(null===this.selectedPath)return!1;const n=(0,d.isInvalidBasename)(e);if(void 0!==n)return v(n),!0;const r=f.default.join(f.default.dirname(this.selectedPath),e),i=this.toAbs(r);return(yield(0,d.pathExists)(i))?(b(r),!0):(function(t,e,n){const r=h.collection.editors;for(const a of r){const r=a.filename;if(!(0,m.fileIDHasNamespace)(r,"project"))continue;const[o,s]=(0,m.projectFileIDSplit)(r);if(o===t)if(s===e)i(a,(0,m.projectFileID)(t,n));else{if(!s.startsWith(e+"/"))continue;{const r=f.default.join(n,s.slice(e.length));i(a,(0,m.projectFileID)(t,r))}}}return;function i(t,e){const n=t.editorView.text();t.close(),h.collection.openEditorFromData(e,n)}}(t,(0,d.simplifyPath)(this.selectedPath),(0,d.simplifyPath)(r)),yield d.projectsFSP.rename(this.toAbs(this.selectedPath),i),this.chainToPromise((()=>o(this,void 0,void 0,(function*(){yield this.refreshMux(!0),this.selectPath(r)})))),!1)}))),"Rename into...",this.pathToFileTreeNode(this.selectedPath).basename)}))}handleCloseProject(){(0,d.setCurrentProject)(void 0)}chainToPromise(t){return this.refreshDoneProm=this.refreshDoneProm.then(t).catch((t=>{const e=t instanceof Error?t.message:""+t;(0,p.errorMsgBox)(`Error in file tree: ${e}`)}))}get projectName(){return this.openedProject}}},6075:function(t,e,n){"use strict";t=n.nmd(t);var r,i,a,o=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),l=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&o(e,t,n);return s(e,t),e},c=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{l(r.next(t))}catch(t){a(t)}}function s(t){try{l(r.throw(t))}catch(t){a(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}l((r=r.apply(t,e||[])).next())}))},d=this&&this.__classPrivateFieldGet||function(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)},h=this&&this.__classPrivateFieldSet||function(t,e,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(t,n):i?i.value=n:e.set(t,n),n},u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.getRunSelection=e.create=e.shouldLockEditors=e.InterpreterSession=e.prepareRun=e.createParseInput=e.clear=e.addMessage=e.tab_config=e.filetree=e.runselector=e.interpreterSession=e.programtree=e.stacktree=e.panel_editor=e.editor_title=e.collection=void 0;const p=n(150),f=n(7277),m=n(5584),g=n(1536),y=n(3679),v=l(n(6042)),b=n(8568),w=n(3142),x=n(9429),k=n(28),A=n(5016),T=n(8323),_=u(n(9497)),E=n(3034),S=n(8301),I=n(8352),P=n(1885),q=n(9836);let C,j;e.editor_title=null,e.panel_editor=null;let z,D,O,M=!1;e.stacktree=null,e.programtree=null,e.interpreterSession=null;let B=null,F=null,R=null;function L(t,n,r,i,a,o){let s=v.createElement({type:"tr",parent:C,classname:"ide",style:{"vertical-align":"top"}}),l=v.createElement({type:"th",parent:s,classname:"ide",style:{width:"20px"}}),c=v.createElement({type:"span",parent:l,style:{width:"20px",color:{print:"#00f",warning:"#f80",error:"#f00"}[t]},html:o?"ℹ":"•"});o&&(c.style.cursor="pointer",c.addEventListener("click",(function(t){return(0,I.showdoc)(o),!1})));let d=v.createElement({type:"td",parent:s,classname:"ide"}),h=n.split("\n");for(let n=0;n<h.length;n++){let o=h[n],s=v.createElement({type:"div",parent:d,classname:"ide ide-message"+("print"!==t?" ide-errormessage":""),text:o});r&&null!=i&&(0,m.isLoadableFileID)(r)&&s.addEventListener("click",(t=>{t.preventDefault(),e.collection.openEditorFromFile(r,{line:i-1,character:a})}))}return j.scrollTop=j.scrollHeight,"error"===t&&(M=!0,K()),{symbol:l,content:d}}function N(){null===e.interpreterSession||void 0===e.interpreterSession||e.interpreterSession.destroy(),e.interpreterSession=null,C.replaceChildren(),M=!1,K({interpreterChanged:!0})}function H(){return c(this,void 0,void 0,(function*(){const t=X();if((0,m.fileIDHasNamespace)(t,"project")){const[n,r]=(0,m.projectFileIDSplit)(t);return function(t,n){return c(this,void 0,void 0,(function*(){const r=[],i=new Map,a=(0,T.getProjectPath)(t);class o{constructor(t,e){this.filename=t,this.source=e}resolveIncludeToFileID(t){return o.resolveIncludeToFileID(this.filename,t)}resolveInclude(t){return o.getParseInput(t)}static getParseInput(t){return c(this,void 0,void 0,(function*(){const n=(0,m.projectFileIDToProjAbsPath)(t),r=e.collection.getEditor(t);if(r){const e=r.editorView.text();return i.set((0,m.fileIDChangeNamespace)(t,"string"),e),new o(t,e)}let s;try{s=yield T.projectsFSP.readFile(_.default.join(a,n),{encoding:"utf8"})}catch(t){if(t instanceof Error&&"code"in t&&("ENOENT"===t.code||"EISDIR"===t.code))return null;throw t}return void 0===s?null:(i.set((0,m.fileIDChangeNamespace)(t,"string"),s),new o(t,s))}))}static resolveIncludeToFileID(e,n){const i=null===e?null:(0,m.projectFileIDToProjAbsPath)(e),a=null===i?"/":_.default.dirname(i);let o;try{o=_.default.normalize(_.default.resolve(a,n))}catch(t){return null}o=(0,T.simplifyPath)(o);const s=`${t}${o}`;if(null!==e){const t=[(0,m.fileIDChangeNamespace)(e,"string"),n,(0,m.stringFileID)(s)];r.some((e=>e.every(((e,n)=>e===t[n]))))||r.push(t)}return(0,m.projectFileID)(t,o)}}const s=o.resolveIncludeToFileID(null,n);if(null===s)return null;const l=yield o.getParseInput(s);return null===l?null:[l,{includeResolutions:r,includeSourceResolutions:i,main:(0,m.fileIDChangeNamespace)(s,"string")}]}))}(n,r)}if((0,m.fileIDHasNamespace)(t,"localstorage"))return function(t){return c(this,void 0,void 0,(function*(){const n=new Map,r=[];class i{constructor(t,e){this.filename=t,this.source=e}resolveIncludeToFileID(t){return r.push([(0,m.fileIDChangeNamespace)(this.filename,"string"),t,(0,m.stringFileID)(t)]),(0,m.localstorageFileID)(t)}resolveInclude(t){return c(this,void 0,void 0,(function*(){return i.getParseInput(t)}))}static getParseInput(t){var r,a;const o=(0,m.splitFileIDAtColon)(t)[1],s=null!==(a=null===(r=e.collection.getEditor(t))||void 0===r?void 0:r.editorView.text())&&void 0!==a?a:localStorage.getItem(`tscript.code.${o}`);return null===s?null:(n.set((0,m.fileIDChangeNamespace)(t,"string"),s),new i(t,s))}}const a=(0,m.localstorageFileID)(t),o=i.getParseInput(a);return null===o?null:[o,{includeSourceResolutions:n,includeResolutions:r,main:(0,m.fileIDChangeNamespace)(a,"string")}]}))}((0,m.localStorageFileIDToFilename)(t));throw new Error("Not implemented")}))}e.tab_config={align:"horizontal"},e.addMessage=L,e.clear=N,e.createParseInput=H;let U=null;e.prepareRun=function(){return c(this,void 0,void 0,(function*(){return null!=U?U:U=function(){var t,n,r;return c(this,void 0,void 0,(function*(){const i=null===(t=yield H())||void 0===t?void 0:t[0];if(!i)return null;const{program:a,errors:o}=yield(0,f.parseProgram)(i,E.parseOptions);N();for(const t of o)L(t.type,p.ErrorHelper.getLocatedErrorMsg(t.type,null!==(n=t.filename)&&void 0!==n?n:void 0,t.line,t.message),null!==(r=t.filename)&&void 0!==r?r:void 0,t.line,t.ch,"error"===t.type?t.href:void 0);return a?(e.interpreterSession=new W(a,O,D),K({interpreterChanged:!0}),e.interpreterSession):null}))}().finally((()=>{U=null}))}))};class W{constructor(t,e,n){r.set(this,new AbortController),i.set(this,void 0),a.set(this,void 0);const o=(0,k.createIDEInterpreter)(t);this.interpreter=o,o.service.print=t=>{if(t.length>1e3){const e=L("print","[truncated long message; click the symbol to copy the full message to the clipboard]\n"+t.substr(0,1e3)+" …");e.content.classList.add("ide-truncation"),e.symbol.innerHTML="&#x1f4cb;",e.symbol.style.cursor="copy",e.symbol.addEventListener("click",(()=>{(0,g.toClipboard)(t)}))}else L("print",t);o.flush()},o.service.message=(t,e,n,r,i)=>{L("error",t,e,n,r,i)},o.service.statechanged=()=>{K()},h(this,a,(0,k.createTurtle)(e,d(this,r,"f").signal),"f"),e.replaceChildren(d(this,a,"f")),o.service.turtle.dom=d(this,a,"f"),h(this,i,(0,k.createCanvas)(o,n,d(this,r,"f").signal),"f"),n.replaceChildren(d(this,i,"f")),o.service.canvas.dom=d(this,i,"f")}destroy(){d(this,r,"f").abort(),this.interpreter.stopthread(),d(this,a,"f").remove(),d(this,i,"f").remove()}}e.InterpreterSession=W,r=new WeakMap,i=new WeakMap,a=new WeakMap,e.shouldLockEditors=(t=J)=>"running"===t||"stepping"===t||"waiting"===t;const G=t=>"stepping"===t||"error"===t,Q=t=>"running"===t||"waiting"===t,Y={unchecked:"program has not been checked",running:"program is running",stepping:"program is in stepping mode",waiting:"program is waiting",finished:"program has finished",error:"an error has ocurred"};let J="unchecked";function K(t){var n;const r=J,i=J=function(){const t=null===e.interpreterSession||void 0===e.interpreterSession?void 0:e.interpreterSession.interpreter;if(t){const e=t.status;switch(e){case"running":return t.background?"running":"stepping";case"dialog":return"waiting";default:return e}}return M?"error":"unchecked"}();if(G(i)){e.stacktree.update(P.stackinfo),e.programtree.update(S.programinfo);const t=null===e.interpreterSession||void 0===e.interpreterSession?void 0:e.interpreterSession.interpreter.stack;if(t&&t.length>0){const n=t[t.length-1],r=n.pe[n.pe.length-1];r.where&&null!==r.where.filename&&(0,m.isLoadableFileID)(r.where.filename)&&e.collection.openEditorFromFile(r.where.filename,{line:r.where.line-1,character:r.where.ch})}}else if(G(r)){const t=()=>({children:[],ids:[]});e.stacktree.update(t),e.programtree.update(t)}const a=(0,e.shouldLockEditors)(i);if((null==t?void 0:t.interpreterChanged)||a!==(0,e.shouldLockEditors)(r)){const t=a?e.interpreterSession:null;for(const n of e.collection.editors)n.updateInterpreter(t)}r!==i&&(z.setText(Y[i]),z.setClassName("ide-state-"+i),Q(i)?Q(r)||D.focus():"finished"!==i&&"unchecked"!==i||null===(n=e.collection.activeEditor)||void 0===n||n.editorView.focus())}function X(){return e.runselector.value}e.create=function(n,r){var i,a,o;let s=(0,E.loadConfig)();r||(r={"export-button":!0,"documentation-button":!0}),v.releaseAllHotkeys(),B=v.createElement({type:"div",parent:n,classname:"ide ide-main"}),v.setHotkeyElement(B),F=v.createElement({type:"div",parent:B,classname:"ide ide-toolbar"}),x.buttons.push({click:x.cmd_upload,icon:y.icons.uploadDocument,tooltip:"Upload document",hotkey:null,group:"export"}),x.buttons.push({click:x.cmd_download,icon:y.icons.downloadDocument,tooltip:"Download document",hotkey:null,group:"export"}),r["export-button"]&&x.buttons.push({click:x.cmd_export,icon:y.icons.export,tooltip:"Export program as webpage",group:"export"}),x.buttons.push({click:function(){return(0,E.configDlg)(),!1},icon:y.icons.config,tooltip:"Configuration",hotkey:"control-p",group:"config"});let l=x.buttons[0].group;for(let t=0;t<x.buttons.length;t++){let n=Object.assign({},x.buttons[t]);n.group!==l&&(v.createElement({type:"div",parent:F,classname:"tgui tgui-control tgui-toolbar-separator"}),l=n.group),n.style={float:"left",height:"22px"},n.hotkey&&(n.tooltip+=" ("+n.hotkey+")"),n.parent=F,x.buttons[t].control=v.createButton(n),4===t&&(e.runselector=v.createElement({type:"select",parent:F,classname:"tgui tgui-control",style:{float:"left","min-width":"100px",height:"22px","padding-left":"4px"}}))}v.createElement({type:"div",parent:F,classname:"tgui tgui-control tgui-toolbar-separator"}),z=v.createLabel({parent:F,text:Y[J],className:"ide-state-"+J,style:{float:"left",width:"calc(min(250px, max(20px, 50vw - 270px)))",height:"22px","white-space":"nowrap",overflow:"hidden",direction:"rtl","text-overflow":"ellipsis clip","text-align":"center"}}),v.createElement({type:"div",parent:F,classname:"tgui tgui-control tgui-toolbar-separator"}),v.createButton({click:function(){for(let t=0;t<v.panels.length;t++){let e=v.panels[t];"editor"===e.name||"messages"===e.name?e.dock("left"):e.dock("right")}return v.savePanelData(),!1},width:20,height:20,icon:y.icons.restorePanels,parent:F,style:{float:"left"},tooltip:"Restore panels"}),v.createElement({type:"div",parent:F,classname:"tgui tgui-control tgui-toolbar-separator"}),R=v.createElement({type:"div",parent:F,classname:"tgui",style:{float:"left",width:"fit-content",height:"100%",border:"none",margin:"3px"}}),v.createElement({type:"div",parent:F,classname:"tgui tgui-control tgui-toolbar-separator"}),r["documentation-button"]&&(v.createButton({click:()=>(0,I.showdoc)(""),text:"Documentation",parent:F,style:{position:"absolute",height:"22px",right:"0px"}}),v.setHotkey("F1",(function(){var t;const n=null===(t=e.collection.activeEditor)||void 0===t?void 0:t.editorView;if(!n)return;let r=n.selection();if(r||(n.selectWordAtCursor(),r=n.selection()),!r)return;r=r.slice(0,30);const i=r.match(/[a-z]+/gi);(0,I.showdocConfirm)(void 0,null==i?void 0:i.join(" "))})));let d=v.createElement({type:"div",parent:B,classname:"ide ide-panel-area"});if(v.preparePanels(d,R),e.panel_editor=v.createPanel({name:"tab_editor",title:"Editor",state:"left",fallbackState:"icon",icon:y.icons.editor}),e.panel_editor.content.addEventListener("contextmenu",(function(t){return t.preventDefault(),!1})),s&&s.hasOwnProperty("tabs"))for(let t in s.tabs)e.tab_config[t]=s.tabs[t];let h=v.createElement({type:"div",parent:e.panel_editor.content,classname:"tabs-container "+e.tab_config.align});const u=v.createElement({type:"div",parent:h,classname:"tabs"});v.createElement({type:"div",parent:u,classname:"switch",text:"⇌",click:function(t){h.classList.toggle("horizontal"),h.classList.toggle("vertical"),e.tab_config.align="horizontal"===e.tab_config.align?"vertical":"horizontal",(0,E.saveConfig)()}});const p=v.createElement({type:"div",parent:h,classname:"editorcontainer"});let f=!1;e.collection=new w.EditorCollection(p,u,e.runselector,(function(){f||(f=!0,setTimeout((()=>{f=!1,(0,E.saveConfig)()}),500))})),e.collection.restoreState({open:null!==(i=null==s?void 0:s.open)&&void 0!==i?i:[],active:null!==(a=null==s?void 0:s.active)&&void 0!==a?a:null}).then((()=>c(this,void 0,void 0,(function*(){if(s&&s.hasOwnProperty("main")&&(e.runselector.value=s.main),!e.collection.activeEditor){const t=(0,m.localstorageFileID)("Main");(yield e.collection.openEditorFromFile(t))instanceof q.EditorController||e.collection.openEditorFromData(t,"")}}))));let g=v.createPanel({name:"messages",title:"Messages",state:"left",dockedheight:200,icon:y.icons.messages});j=v.createElement({type:"div",parent:g.content,classname:"ide ide-messages"}),C=v.createElement({type:"table",parent:j,classname:"ide",style:{width:"100%"}});let k=v.createPanel({name:"stack",title:"Stack",state:"icon",fallbackState:"right",icon:y.icons.stackView});e.stacktree=new v.TreeControl({parent:k.content});let _=v.createPanel({name:"program",title:"Program",state:"icon",fallbackState:"right",icon:y.icons.programView});e.programtree=new v.TreeControl({parent:_.content,nodeclick:function(t,n,r){return c(this,void 0,void 0,(function*(){n.where&&(yield e.collection.openEditorFromFile(n.where.filename,{line:n.where.line-1,character:n.where.ch}))}))}});let S=v.createPanel({name:"turtle",title:"Turtle",state:"right",fallbackState:"float",icon:y.icons.turtle});O=S.content,O.style.alignContent="center",O.style.textAlign="center";let P=v.createPanel({name:"canvas",title:"Canvas",state:"icon",fallbackState:"right",icon:y.icons.canvas});P.content.tabIndex=-1,P.size=[0,0],D=P.content;let M=v.createPanel({name:"tutorial",title:"Tutorial",state:"icon",fallbackState:"right",dockedheight:400,icon:y.icons.tutorial}),N=v.createElement({type:"div",parent:M.content,classname:"ide ide-tutorial"});b.tutorial.init(N,(()=>{var t,n;return null!==(n=null===(t=e.collection.activeEditor)||void 0===t?void 0:t.editorView.text())&&void 0!==n?n:""}),(function(){C.innerHTML=""}),(function(t){L("error",t)})),(0,T.setCurrentProject)(null!==(o=null==s?void 0:s.currentProject)&&void 0!==o?o:void 0),(e.filetree=new A.FileTree).init(),v.arrangePanels(),window.TScriptIDE={tgui:v,ide:t}},e.getRunSelection=X},8301:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.programinfo=void 0;const o=n(6075),s=n(8706),l=a(n(6042)),c=n(2394);e.programinfo=function(t,e){let n={children:[],ids:[]};const r=null===o.interpreterSession||void 0===o.interpreterSession?void 0:o.interpreterSession.interpreter;if(!r)return n;if(0===r.stack.length)return n;let i=r.stack[r.stack.length-1],a=i.pe[i.pe.length-1],d=new Set;for(let t=0;t<i.pe.length;t++)d.add(i.pe[t]);if(null===t)n.children.push(r.program),n.ids.push("");else{n.opened=!0;let r=t;for("expression"===r.petype&&(r=r.sub);"group"===r.petype;)r=r.sub;n.element=document.createElement("div");let i="",o="";i+=r.petype,r.name&&(i+=" "+r.name);let h=String(r.petype);if("global scope"===h||"scope"===h||"namespace"===h)for(let t=0;t<r.commands.length;t++)r.commands[t].hasOwnProperty("builtin")&&r.commands[t].builtin||"breakpoint"!==r.commands[t].petype&&(n.children.push(r.commands[t]),n.ids.push(e+"/"+n.children.length));else if("conditional statement"===h)n.children.push(r.condition),n.ids.push(e+"/"+n.children.length),n.children.push(r.then_part),n.ids.push(e+"/"+n.children.length),r.else_part&&(n.children.push(r.else_part),n.ids.push(e+"/"+n.children.length));else if("for-loop"===h)n.children.push(r.iterable),n.ids.push(e+"/"+n.children.length),n.children.push(r.body),n.ids.push(e+"/"+n.children.length);else if("do-while-loop"===h||"while-do-loop"===h)n.children.push(r.condition),n.ids.push(e+"/"+n.children.length),n.children.push(r.body),n.ids.push(e+"/"+n.children.length);else if("break"===h);else if("continue"===h);else if("return"===h)r.argument&&(n.children.push(r.argument),n.ids.push(e+"/"+n.children.length));else if("variable declaration"===h)for(let t=0;t<r.vars.length;t++)n.children.push(r.vars[t]),n.ids.push(e+"/"+n.children.length);else if("variable"===h||"attribute"===h)r.initializer&&(n.children.push(r.initializer),n.ids.push(e+"/"+n.children.length));else if("function"===h||"method"===h){for(let t=0;t<r.params.length;t++){let i=r.names[r.params[t].name];i&&(n.children.push(i),n.ids.push(e+"/"+n.children.length))}for(let t=0;t<r.commands.length;t++)"breakpoint"!==r.commands[t].petype&&(n.children.push(r.commands[t]),n.ids.push(e+"/"+n.children.length))}else if("type"===h){n.children.push(r.class_constructor),n.ids.push(e+"/"+n.children.length);for(let t in r.members)r.members.hasOwnProperty(t)&&(n.children.push(r.members[t]),n.ids.push(e+"/"+n.children.length));for(let t in r.staticmembers)r.staticmembers.hasOwnProperty(t)&&(n.children.push(r.staticmembers[t]),n.ids.push(e+"/"+n.children.length))}else if("constant"===h)i=s.TScript.previewValue(r.typedvalue),o=r.typedvalue.type.id<c.type2css.length?c.type2css[r.typedvalue.type.id]:"ide-userclass";else if("name"===h);else if("this"===h);else if("closure"===h){n.children.push(r.func),n.ids.push(e+"/"+n.children.length);for(let t=0;t<r.func.closureparams.length;t++)n.children.push(r.func.closureparams[t].initializer),n.ids.push(e+"/"+n.children.length)}else if("array"===h)for(let t=0;t<r.elements.length;t++)n.children.push(r.elements[t]),n.ids.push(e+"/"+n.children.length);else if("dictionary"===h)for(let t=0;t<r.values.length;t++)n.children.push(r.values[t]),n.ids.push(e+"/"+n.children.length);else if("function call"===h){n.children.push(r.base),n.ids.push(e+"/"+n.children.length);for(let t=0;t<r.arguments.length;t++)n.children.push(r.arguments[t]),n.ids.push(e+"/"+n.children.length)}else if("named argument"===h)i=r.name,r.argument&&(n.children.push(r.argument),n.ids.push(e+"/"+n.children.length));else if("item access"===h)n.children.push(r.base),n.ids.push(e+"/"+n.children.length),n.children.push(r.argument),n.ids.push(e+"/"+n.children.length);else if("access of member "===h.substr(0,17))n.children.push(r.object),n.ids.push(e+"/"+n.children.length);else if("assignment "===h.substr(0,11))n.children.push(r.lhs),n.ids.push(e+"/"+n.children.length),n.children.push(r.rhs),n.ids.push(e+"/"+n.children.length);else if("left-unary operator "===h.substr(0,20))n.children.push(r.argument),n.ids.push(e+"/"+n.children.length);else if("binary operator "===h.substr(0,16))n.children.push(r.lhs),n.ids.push(e+"/"+n.children.length),n.children.push(r.rhs),n.ids.push(e+"/"+n.children.length);else if("try-catch"===h)n.children.push(r.try_part),n.ids.push(e+"/"+n.children.length),n.children.push(r.catch_part),n.ids.push(e+"/"+n.children.length);else if("try"===h)n.children.push(r.command),n.ids.push(e+"/"+n.children.length);else if("catch"===h)n.children.push(r.command),n.ids.push(e+"/"+n.children.length);else if("throw"===h)n.children.push(r.argument),n.ids.push(e+"/"+n.children.length);else if("use"===h);else if("no-operation"!==h)throw"breakpoint"===h?"[programinfo] internal error; breakpoints should not be listed":"[programinfo] petype '"+h+"' not covered";d.has(r)&&(r===a?(o+=" ide-program-current",n.visible=!0):o+=" ide-program-ancestor"),l.createElement({type:"span",parent:n.element,classname:o,text:i}),r.where&&l.createElement({type:"span",parent:n.element,text:" ("+r.where.line+":"+r.where.ch+")",classname:"ide-index"})}return n}},8352:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.showdocConfirm=e.showdoc=void 0;const o=a(n(6042));let s=null;function l(t=""){s&&(s.close(),s=null),t.startsWith("#/")&&(t=t.slice(1)),c("?doc="+t)}function c(t){s&&(s.close(),s=null),s=window.open(t,"TScript documentation")}e.showdoc=l,e.showdocConfirm=function(t,e){let n=o.createModal({title:"Open documentation",scalesize:[.2,.15],minsize:[300,150],buttons:[{text:"Open tab",onClick:()=>{e?c("?doc=search&q="+encodeURIComponent(e)):l(t)},isDefault:!0},{text:"Cancel"}]});o.createElement({parent:n.content,type:"div",style:{"margin-top":"10px"},text:"Open the documentation in another tab?"}),(t||e)&&o.createElement({parent:n.content,type:"div",style:{"margin-top":"10px"},text:e?'Search for "'+e+'"?':'Go to "'+t+'"?'}),o.startModal(n)}},1885:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e},o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{l(r.next(t))}catch(t){a(t)}}function s(t){try{l(r.throw(t))}catch(t){a(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}l((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.stackinfo=void 0;const s=n(6075),l=n(8706),c=n(8397),d=a(n(6042)),h=n(2394);e.stackinfo=function(t,e){let n={children:[],ids:[]};const r=null===s.interpreterSession||void 0===s.interpreterSession?void 0:s.interpreterSession.interpreter;if(!r)return n;if(null===t)for(let t=r.stack.length-1;t>=0;t--)n.children.push({nodetype:"frame",index:t,frame:r.stack[t]}),n.ids.push("/"+t);else{if(!t.hasOwnProperty("nodetype"))throw"[stacktree.update] missing value.nodetype";if("frame"===t.nodetype){n.opened=!0;let r=t.frame.pe[0];n.element=document.createElement("span"),d.createElement({type:"span",parent:n.element,text:"["+t.index+"] ",classname:"ide-index"}),d.createText(r.petype+" "+l.TScript.displayname(r),n.element);let i=t.frame.pe[t.frame.pe.length-1];if(i.hasOwnProperty("where")){let t=i.where;t.line,t.ch,d.createElement({type:"span",parent:n.element,text:" ("+t.line+":"+t.ch+")",classname:"ide-index"}),n.element.addEventListener("click",(e=>o(this,void 0,void 0,(function*(){e.preventDefault(),yield s.collection.openEditorFromFile(t.filename,{line:t.line-1,character:t.ch})}))))}t.frame.object&&(n.children.push({nodetype:"typedvalue",index:"this",typedvalue:t.frame.object}),n.ids.push(e+"/this"));for(let i=0;i<t.frame.variables.length;i++)t.frame.variables[i]&&r.variables[i]&&(n.children.push({nodetype:"typedvalue",index:l.TScript.displayname(r.variables[i]),typedvalue:t.frame.variables[i]}),n.ids.push(e+"/"+r.variables[i].name));t.frame.temporaries.length>0&&(n.children.push({nodetype:"temporaries",index:"temporaries",frame:t.frame}),n.ids.push(e+"/<temporaries>"))}else if("typedvalue"===t.nodetype){n.opened=!1,n.element=document.createElement("span");let r=n.opened?t.typedvalue.type.name:l.TScript.previewValue(t.typedvalue);if(t.typedvalue.type.id===c.Typeid.typeid_array){for(let r=0;r<t.typedvalue.value.b.length;r++)n.children.push({nodetype:"typedvalue",index:r,typedvalue:t.typedvalue.value.b[r]}),n.ids.push(e+"/"+r);r="Array("+n.children.length+") "+r}else if(t.typedvalue.type.id===c.Typeid.typeid_dictionary){for(let r in t.typedvalue.value.b)t.typedvalue.value.b.hasOwnProperty(r)&&(n.children.push({nodetype:"typedvalue",index:r,typedvalue:t.typedvalue.value.b[r]}),n.ids.push(e+"/"+r));r="Dictionary("+n.children.length+") "+r}else if(t.typedvalue.type.id===c.Typeid.typeid_function){if(t.typedvalue.value.b.hasOwnProperty("object")&&(n.children.push({nodetype:"typedvalue",index:"this",typedvalue:t.typedvalue.value.b.object}),n.ids.push(e+"/this")),t.typedvalue.value.b.hasOwnProperty("enclosed"))for(let r=0;r<t.typedvalue.value.b.enclosed.length;r++)n.children.push({nodetype:"typedvalue",index:t.typedvalue.value.b.func.closureparams[r].name,typedvalue:t.typedvalue.value.b.enclosed[r]}),n.ids.push(e+"/"+t.typedvalue.value.b.func.closureparams[r].name)}else if(t.typedvalue.type.id>=c.Typeid.typeid_class){let r=t.typedvalue.type,i=[];for(;r;)i.unshift(r),r=r.superclass;for(let a=0;a<i.length;a++)if(r=i[a],r.variables)for(let i=0;i<r.variables.length;i++)n.children.push({nodetype:"typedvalue",index:r.variables[i].name,typedvalue:t.typedvalue.value.a[r.variables[i].id]}),n.ids.push(e+"/"+r.variables[i].name)}d.createElement({type:"span",parent:n.element,text:t.index+": ",classname:"ide-index"}),d.createElement({type:"span",parent:n.element,classname:t.typedvalue.type.id<h.type2css.length?h.type2css[t.typedvalue.type.id]:"ide-userclass",text:r})}else{if("temporaries"!==t.nodetype)throw"[stacktree.update] unknown nodetype: "+t.nodetype;{n.opened=!0,n.element=d.createElement({type:"span",parent:n.element,text:"[temporaries]"});let r=0;for(let i=0;i<t.frame.temporaries.length;i++)t.frame.temporaries[i]&&t.frame.temporaries[i].hasOwnProperty("type")&&t.frame.temporaries[i].hasOwnProperty("value")&&(n.children.push({nodetype:"typedvalue",index:i,typedvalue:t.frame.temporaries[i]}),n.ids.push(e+"/"+r),r++)}}}return n}},2394:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.importData=e.cleanupExternalFilename=e.interpreterEnded=e.type2css=void 0;const o=a(n(6075)),s=n(5584),l=n(3034);e.type2css=["ide-keyword","ide-keyword","ide-integer","ide-real","ide-string","ide-collection","ide-collection","ide-builtin","ide-builtin","ide-builtin","ide-builtin"],e.interpreterEnded=t=>"finished"===t.status||"error"===t.status,e.cleanupExternalFilename=t=>t.split("/").at(-1).replace(/\.tscript$/i,""),e.importData=function(t,e){if(e){const n=null!==localStorage.getItem("tscript.code."+e),r=(0,s.localstorageFileID)(e);if(!n&&!o.collection.getEditor(r))return void o.collection.openEditorFromData(r,t)}return(0,l.saveAsDialog)(null!=e?e:null,(e=>{o.collection.openEditorFromData((0,s.localstorageFileID)(e),t)}))}},355:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e},o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{l(r.next(t))}catch(t){a(t)}}function s(t){try{l(r.throw(t))}catch(t){a(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}l((r=r.apply(t,e||[])).next())}))},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.gitLogout=e.getGitRepos=e.getCurrentProjectGitInfo=e.gitPush=e.gitPull=e.gitClone=e.setGitConfig=e.startGitLoginFlow=void 0;const l=n(2907),c=n(3164),d=a(n(764)),h=n(8323),u=s(n(246)),p=n(6075),f=n(3623);function m(){return o(this,void 0,void 0,(function*(){const t=(0,h.getCurrentProject)();if(t){let e,n=yield d.getConfig({fs:h.projectsFS,dir:(0,h.getProjectPath)(t),path:"remote.origin.url"});return n&&(e={name:"",url:n,private:null}),e}}))}e.startGitLoginFlow=function(t){return o(this,void 0,void 0,(function*(){switch(t){case"hub":sessionStorage.setItem("git_auth_type","hub"),window.location.href=`https://github.com/login/oauth/authorize?client_id=${l.client_id_github}&scope=repo&redirect_uri=${l.frontend_url}`;break;case"lab":sessionStorage.setItem("git_auth_type","lab"),window.location.href=`https://gitlab.ruhr-uni-bochum.de/oauth/authorize?client_id=${l.app_id_gitlab}&redirect_uri=${l.frontend_url}&response_type=code&scope=api+write_repository`}}))},e.setGitConfig=function(){return o(this,void 0,void 0,(function*(){const t=(0,h.getProjectPath)((0,h.getCurrentProject)()||"/");try{(yield m())&&(yield d.setConfig({fs:h.projectsFS,dir:t,path:"user.name",value:"TScript"}))}catch(t){}}))},e.gitClone=function(t,e){return o(this,void 0,void 0,(function*(){if(!(0,h.getCurrentProject)())try{const n=t.split("/"),r=n[n.length-1];(yield(0,h.tryCreateProject)(e||r))?yield(0,h.setCurrentProject)(e||r):(0,p.addMessage)("error","Could not clone repository.")}catch(t){return console.error(t),t instanceof h.InvalidProjectName?(0,p.addMessage)("error","Could not clone repository, a project with the same name already exists."):t instanceof h.ProjectNotFoundError?(0,p.addMessage)("error","Could not clone repository, error creating a new project."):(console.log(t),(0,p.addMessage)("error","Could not clone repository.")),!1}const n=(0,h.getCurrentProject)()||"";if(""===n)return(0,p.addMessage)("error","No project selected."),!1;const r=(0,h.getProjectPath)(n);try{const e=(0,c.decodeJWT)((0,c.getRawToken)()).data;return yield d.clone({fs:h.projectsFS,http:u.default,dir:r,url:t,depth:1,corsProxy:l.proxy_server_url,remote:"origin",singleBranch:!0,onAuth:()=>({username:"hub"===e.type?e.info.access_token:"",password:"lab"===e.type?e.info.access_token:""}),onAuthFailure:()=>{(0,p.addMessage)("error","Not authorized to clone, make sure that you have full read access to this repository.")}}),p.filetree.refresh(),yield(0,f.reloadProjectEditorTabsRecursively)(n,"/"),!0}catch(t){return(0,p.addMessage)("error","Could not clone remote repository."),console.log(t),!1}}))},e.gitPull=function(){return o(this,void 0,void 0,(function*(){const t=(0,h.getCurrentProject)()||"/",e=(0,h.getProjectPath)(t);try{yield d.stash({fs:h.projectsFS,dir:e})}catch(t){}try{const t=(0,c.decodeJWT)((0,c.getRawToken)()).data;yield d.pull({fs:h.projectsFS,http:u.default,dir:e,onAuth:()=>({username:"hub"===t.type?t.info.access_token:"",password:"lab"===t.type?t.info.access_token:""}),onAuthFailure:()=>{(0,p.addMessage)("error","Not authorized to pull, make sure that you have full read access to this repository.")},singleBranch:!0,author:{name:"TScript"},fastForward:!0})}catch(t){return(0,p.addMessage)("error","Could not pull from remote repository."),console.log(t),!1}try{return yield d.checkout({fs:h.projectsFS,dir:e,force:!0}),p.filetree.refresh(),yield(0,f.reloadProjectEditorTabsRecursively)(t,"/"),!0}catch(t){return!1}}))},e.gitPush=function(t){return o(this,void 0,void 0,(function*(){const e=(0,h.getProjectPath)((0,h.getCurrentProject)()||"/");try{const n=(0,c.decodeJWT)((0,c.getRawToken)()).data;let r=d.statusMatrix({fs:h.projectsFS,dir:e});return(yield r).some((t=>t[1]!==t[2]||t[2]!==t[3]))?(r.then((t=>{Promise.all(t.map((([t,n,r])=>{r?d.add({fs:h.projectsFS,dir:e,filepath:t}):d.remove({fs:h.projectsFS,dir:e,filepath:t})})))})),yield d.commit({fs:h.projectsFS,dir:e,author:{name:"TScript"},message:t}),!!(yield d.push({fs:h.projectsFS,http:u.default,dir:e,onAuth:()=>({username:"hub"===n.type?n.info.access_token:"",password:"lab"===n.type?n.info.access_token:""}),onAuthFailure:()=>{(0,p.addMessage)("error","Not authorized to push, make sure that you have full write access to this repository.")},force:!0})).ok):((0,p.addMessage)("print","No changes to push."),!0)}catch(t){return console.log(t),(0,p.addMessage)("error","Could not push to remote repository."),!1}}))},e.getCurrentProjectGitInfo=m,e.getGitRepos=function(){return o(this,void 0,void 0,(function*(){const t=sessionStorage.getItem("repos");if(t)return JSON.parse(t);try{const t=(0,c.decodeJWT)((0,c.getRawToken)());if(t){let e;if("lab"==t.data.type?e=yield fetch(`${l.server_url}/repos?token=${t.data.info.access_token}&type=lab`,{method:"get"}):"hub"==t.data.type&&(e=yield fetch(`${l.server_url}/repos?token=${t.data.info.access_token}&type=hub`,{method:"get"})),e.ok){const t=yield e.json();return sessionStorage.setItem("repos",JSON.stringify(t)),t}return[]}return(0,p.addMessage)("error","Not authorized to get repository list."),[]}catch(t){return(0,p.addMessage)("error","Failed to get the user's repositories."),[]}}))},e.gitLogout=function(){return o(this,void 0,void 0,(function*(){try{const t=localStorage.getItem("git_token");if(t){let e,n=(0,c.decodeJWT)(t);return"lab"==n.data.type?e=yield fetch(`${l.server_url}/auth-token?token=${n.data.info.access_token}&client_id=${l.app_id_gitlab}&type=lab`,{method:"delete"}):"hub"==n.data.type&&(e=yield fetch(`${l.server_url}/auth-token?token=${n.data.info.access_token}&client_id=${l.client_id_github}&type=hub`,{method:"delete"})),200==e.status&&(localStorage.removeItem("git_token"),sessionStorage.removeItem("repos"),!0)}}catch(t){return!1}return!1}))}},3164:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validJWT=e.getLoginTypeFromToken=e.getRawToken=e.decodeJWT=void 0;const r=n(9607);function i(t){if(!a(t))throw"InvalidToken";return JSON.parse(JSON.stringify((0,r.jwtDecode)(t)))}function a(t){if(!t)return!1;try{const e=JSON.parse(JSON.stringify((0,r.jwtDecode)(t)));return!(!e.exp||e.exp<Math.floor(Date.now()/1e3)||!e.iat||!e.data.info.access_token)}catch(t){return!1}}e.decodeJWT=i,e.getRawToken=function(){try{const t=localStorage.getItem("git_token");return a(t)?String(t):""}catch(t){return""}},e.getLoginTypeFromToken=function(t){return i(t).data.type},e.validJWT=a},3679:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.icons=void 0,e.icons={window:{width:20,height:20,innerSVG:'<rect x="2.5" y="2.5" width="15" height="15" class="icon-panel-back"/><rect x="2.5" y="2.5" width="15" height="3" class="icon-panel-title"/><rect x="2.5" y="2.5" width="15" height="15" class="icon-border"/>'},dockLeft:{width:18,height:18,innerSVG:'<rect x="2.5" y="2.5" width="13" height="13" style="stroke: #666; fill: none"/><rect x="2.5" y="2.5" width="7" height="13" class="icon-panel-back"/><rect x="2.5" y="2.5" width="7" height="3" class="icon-panel-title"/><rect x="2.5" y="2.5" width="7" height="13" class="icon-border"/>'},dockRight:{width:18,height:18,innerSVG:'<rect x="2.5" y="2.5" width="13" height="13" style="stroke: #666; fill: none"/><rect x="8.5" y="2.5" width="7" height="13" class="icon-panel-back"/><rect x="8.5" y="2.5" width="7" height="3" class="icon-panel-title"/><rect x="8.5" y="2.5" width="7" height="13" class="icon-border"/>'},maximize:{width:18,height:18,innerSVG:'<rect x="2.5" y="2.5" width="13" height="13" class="icon-panel-back"/><rect x="2.5" y="2.5" width="13" height="3" class="icon-panel-title"/><rect x="2.5" y="2.5" width="13" height="13" class="icon-border"/>'},float:{width:18,height:18,innerSVG:'<rect x="2.5" y="2.5" width="13" height="13" style="stroke: #666; fill: none"/><rect x="4.5" y="5.5" width="9" height="8" class="icon-panel-back"/><rect x="4.5" y="5.5" width="9" height="3" class="icon-panel-title"/><rect x="4.5" y="5.5" width="9" height="8" class="icon-border"/>'},minimize:{width:18,height:18,innerSVG:'<line x1="3" y1="14.5" x2="15" y2="14.5" class="icon-border" style="stroke-width: 2.5"/>'},help:{width:18,height:18,innerSVG:'<path d="M 5,6 A 4,4 0 0 1 10.53,2.3 A 4,4 0 0 1 11.83,8.83 L 9 11.5 L 9 13" class="icon-border" style="stroke-width: 2"/><line x1="9" y1="15" x2="9" y2="17" class="icon-border" style="stroke-width: 2"/>'},close:{width:18,height:18,innerSVG:'<line x1="4" y1="4" x2="14" y2="14" class="icon-border" style="stroke-width: 2"/><line x1="4" y1="14" x2="14" y2="4" class="icon-border" style="stroke-width: 2"/>'},msgBoxQuestion:{width:40,height:40,innerSVG:'<circle cx="20" cy="20" r="18.5" style="stroke-width: 2; stroke: #04d; fill: #16f"/><path d="M 13,15 A 7,7 0 0 1 22.68,8.53 A 7,7 0 0 1 24.95,19.95 L 20 25 L 20 28" style="stroke-width: 2; stroke: #fff; fill: none"/><line x1="20" y1="31" x2="20" y2="34" style="stroke-width: 2; stroke: #fff; fill: none"/>'},msgBoxExclamation:{width:40,height:40,innerSVG:'<polygon points="19,2 21,2 38,36 37,38 3,38 2,36" style="stroke-width: 2; stroke: #a91; fill: #ec2"/><line x1="20" y1="10" x2="20" y2="28" style="stroke-width: 2; stroke: #000; fill: none"/><line x1="20" y1="31" x2="20" y2="34" style="stroke-width: 2; stroke: #000; fill: none"/>'},newDocument:{width:20,height:20,innerSVG:'<polygon points="4.5,7.5 8.5,3.5 14.5,3.5 14.5,16.5 4.5,16.5" style="stroke: #333; fill: #fff"/><polyline points="4.5,7.5 8.5,7.5 8.5,3.5" style="stroke: #333; fill: none"/><circle cx="14" cy="14" r="4.75" style="stroke: #030; fill: #0a0"/><line x1="14" y1="17" x2="14" y2="11" style="stroke-width: 2; stroke: #fff; fill: none"/><line x1="11" y1="14" x2="17" y2="14" style="stroke-width: 2; stroke: #fff; fill: none"/>'},openDocument:{width:20,height:20,innerSVG:'<polygon points="2.5,4.5 7.5,4.5 9.5,6.5 15.5,6.5 15.5,15.5 2.5,15.5" style="fill: #ec5; stroke: #330"/><polygon points="5.5,8.5 17.5,8.5 15.5,15.5 3.5,15.5" style="fill: #fd6; stroke: #330"/>'},saveDocument:{width:20,height:20,innerSVG:'<polygon points="3.5,3.5 16.5,3.5 16.5,16.5 5.5,16.5 3.5,14.5" style="stroke: #139; fill: #36d"/><rect x="7" y="11" width="6" height="5" style="stroke: none; fill: #eef"/><rect x="8" y="12" width="2" height="3" style="stroke: none; fill: #36d"/><rect x="6" y="4" width="8" height="5" style="stroke: none; fill: #fff"/>'},git:{width:20,height:20,innerSVG:'<defs><clipPath id="a"><path d="M0 0.024h19.976V20H0Zm0 0"/></clipPath></defs><g clip-path="url(#a)"><path style="stroke:none;fill-rule:nonzero;fill:#f03c2e;fill-opacity:1" d="M19.599 9.123 10.878 0.402a1.289 1.289 0 0 0 -1.82 0l-1.81 1.811L9.544 4.51a1.533 1.533 0 0 1 1.572 0.366 1.533 1.533 0 0 1 0.363 1.582l2.214 2.214a1.533 1.533 0 0 1 1.582 0.363 1.53 1.53 0 0 1 0 2.164 1.533 1.533 0 0 1 -2.167 0 1.533 1.533 0 0 1 -0.332 -1.666L10.712 7.47v5.434a1.53 1.53 0 0 1 0.404 2.454 1.53 1.53 0 0 1 -2.164 0 1.53 1.53 0 0 1 0 -2.164 1.556 1.556 0 0 1 0.501 -0.334V7.376a1.533 1.533 0 0 1 -0.83 -2.008L6.359 3.102 0.376 9.082a1.289 1.289 0 0 0 0 1.82l8.722 8.722a1.289 1.289 0 0 0 1.82 0l8.681 -8.681a1.289 1.289 0 0 0 0 -1.82"/></g>'},saveDocumentAs:{width:20,height:20,innerSVG:'<polygon points="3.5,3.5 16.5,3.5 16.5,16.5 5.5,16.5 3.5,14.5" style="stroke: #139; fill: #36d"/><rect x="7" y="11" width="6" height="5" style="stroke: none; fill: #eef"/><rect x="8" y="12" width="2" height="3" style="stroke: none; fill: #36d"/><rect x="6" y="4" width="8" height="5" style="stroke: none; fill: #fff"/><line x1="8" y1="8" x2="18" y2="18" style="stroke-width: 3; stroke: #0005; fill: none"/><polygon points="8,6 11,7 9,9" style="stroke: none; fill: #fc9"/><polygon points="8,6 9.5,6.5 8.5,7.5" style="stroke: none; fill: #000"/><line x1="10" y1="8" x2="18" y2="16" style="stroke-width: 3; stroke: #000; fill: none"/><line x1="10" y1="8" x2="18" y2="16" style="stroke-width: 2; stroke: #dd0; fill: none"/><polygon points="8,6 9.5,6.5 8.5,7.5" style="stroke: none; fill: #000"/><path d="M 19.06,14.94 A 1.5,1.5 0 0 1 19.06,17.06 A 1.5,1.5 0 0 1 16.94,17.06" style="stroke: none; fill: #000"/><circle cx="18" cy="16" r="1" style="stroke: none; fill: #f33"/>'},run:{width:20,height:20,innerSVG:'<polygon points="5,5 15,10 5,15" class="icon-green-fill"/>'},interrupt:{width:20,height:20,innerSVG:'<rect x="5" y="5" width="4" height="10" class="icon-red-fill"/><rect x="11" y="5" width="4" height="10" class="icon-red-fill"/>'},reset:{width:20,height:20,innerSVG:'<rect x="5" y="5" width="10" height="10" class="icon-red-fill"/>'},stepInto:{width:20,height:20,innerSVG:'<rect x="10" y="3" width="7" height="2" class="icon-neutral-fill"/><rect x="13" y="6" width="4" height="2" class="icon-neutral-fill"/><rect x="13" y="9" width="4" height="2" class="icon-neutral-fill"/><rect x="13" y="12" width="4" height="2" class="icon-neutral-fill"/><rect x="10" y="15" width="7" height="2" class="icon-neutral-fill"/><polyline points="8,4 3,4 3,10 6,10" class="icon-blue-line"/><polygon points="5,7 5,13 9.5,10" class="icon-blue-fill"/>'},stepOver:{width:20,height:20,innerSVG:'<rect x="10" y="3" width="7" height="2" class="icon-neutral-fill"/><rect x="13" y="6" width="4" height="2" class="icon-neutral-fill"/><rect x="13" y="9" width="4" height="2" class="icon-neutral-fill"/><rect x="13" y="12" width="4" height="2" class="icon-neutral-fill"/><rect x="10" y="15" width="7" height="2" class="icon-neutral-fill"/><polyline points="8,4 3,4 3,16 6,16" class="icon-blue-line"/><polygon points="5,13 5,19 9.5,16" class="icon-blue-fill"/>'},stepOut:{width:20,height:20,innerSVG:'<rect x="10" y="3" width="7" height="2" class="icon-neutral-fill"/><rect x="13" y="6" width="4" height="2" class="icon-neutral-fill"/><rect x="13" y="9" width="4" height="2" class="icon-neutral-fill"/><rect x="13" y="12" width="4" height="2" class="icon-neutral-fill"/><rect x="10" y="15" width="7" height="2" class="icon-neutral-fill"/><polyline points="11,10 3,10 3,16 6,16" class="icon-blue-line"/><polygon points="5,13 5,19 9.5,16" class="icon-blue-fill"/>'},breakPoint:{width:20,height:20,innerSVG:'<circle cx="10" cy="10" r="3.9" class="icon-red-fill"/>'},search:{width:20,height:20,innerSVG:'<path d="M 11.54,11.54 A 5,5 0 0 1 4.46,4.46 A 5,5 0 0 1 11.54,11.54 L 17 17" class="icon-neutral-line" style="stroke-width: 1.5"/>'},uploadDocument:{width:20,height:20,innerSVG:'<g transform="scale(0.7 0.7) translate(0 7)"><polygon points="2.5,4.5 7.5,4.5 9.5,6.5 15.5,6.5 15.5,15.5 2.5,15.5" style="fill: #ec5; stroke: #330"/><polygon points="5.5,8.5 17.5,8.5 15.5,15.5 3.5,15.5" style="fill: #fd6; stroke: #330"/></g><polygon points="14,15 14,7 12,7 16,1 20,7 18,7 18,15" style="stroke: #111; fill: #fff"/>'},downloadDocument:{width:20,height:20,innerSVG:'<g transform="scale(0.7 0.7) translate(0 7)"><polygon points="3.5,3.5 16.5,3.5 16.5,16.5 5.5,16.5 3.5,14.5" style="stroke: #139; fill: #36d"/><rect x="7" y="11" width="6" height="5" style="stroke: none; fill: #eef"/><rect x="8" y="12" width="2" height="3" style="stroke: none; fill: #36d"/><rect x="6" y="4" width="8" height="5" style="stroke: none; fill: #fff"/></g><polygon points="14,1 14,9 12,9 16,15 20,9 18,9 18,1" style="stroke: #111; fill: #fff"/>'},export:{width:20,height:20,innerSVG:'<polygon points="3,7 10,7 10,3 17,10 10,17 10,13 3,13" class="icon-green-frame"/>'},config:{width:20,height:20,innerSVG:'<circle cx="10" cy="10" r="2" class="icon-neutral-fill"/><circle cx="10" cy="10" r="5.7" class="icon-neutral-line" style="stroke-width: 2"/><line x1="15.8" y1="11.55" x2="19.08" y2="12.43" class="icon-neutral-line" style="stroke-width: 2"/><line x1="14.24" y1="14.24" x2="16.65" y2="16.65" class="icon-neutral-line" style="stroke-width: 2"/><line x1="11.55" y1="15.8" x2="12.43" y2="19.08" class="icon-neutral-line" style="stroke-width: 2"/><line x1="8.45" y1="15.8" x2="7.57" y2="19.08" class="icon-neutral-line" style="stroke-width: 2"/><line x1="5.76" y1="14.24" x2="3.35" y2="16.65" class="icon-neutral-line" style="stroke-width: 2"/><line x1="4.2" y1="11.55" x2="0.92" y2="12.43" class="icon-neutral-line" style="stroke-width: 2"/><line x1="4.2" y1="8.45" x2="0.92" y2="7.57" class="icon-neutral-line" style="stroke-width: 2"/><line x1="5.76" y1="5.76" x2="3.35" y2="3.35" class="icon-neutral-line" style="stroke-width: 2"/><line x1="8.45" y1="4.2" x2="7.57" y2="0.92" class="icon-neutral-line" style="stroke-width: 2"/><line x1="11.55" y1="4.2" x2="12.43" y2="0.92" class="icon-neutral-line" style="stroke-width: 2"/><line x1="14.24" y1="5.76" x2="16.65" y2="3.35" class="icon-neutral-line" style="stroke-width: 2"/><line x1="15.8" y1="8.45" x2="19.08" y2="7.57" class="icon-neutral-line" style="stroke-width: 2"/>'},restorePanels:{width:20,height:20,innerSVG:'<rect x="2.5" y="2.5" width="15" height="15" style="stroke: #aaa; fill: #fff"/><rect x="11" y="3" width="1" height="14" style="stroke: none; fill: #ccc"/><rect x="3" y="3" width="14" height="1" style="stroke: none; fill: #77f"/><rect x="3" y="12" width="8" height="1" style="stroke: none; fill: #77f"/><path d="M 6.67,7.67 A 4,4 0 0 1 13.39,9.57 A 4,4 0 0 1 8.26,14.3" style="stroke: #222; stroke-width: 1.7; fill: none"/><polygon points="5,5 5,10 10,10" style="stroke: none; fill: #222"/>'},editor:{width:20,height:20,innerSVG:'<polygon points="4.5,7.5 8.5,3.5 14.5,3.5 14.5,16.5 4.5,16.5" style="stroke: #333; fill: #fff"/><polyline points="4.5,7.5 8.5,7.5 8.5,3.5" style="stroke: #333; fill: none"/><rect x="10" y="5" width="3" height="1" style="stroke: none; fill: #777"/><rect x="10" y="7" width="2" height="1" style="stroke: none; fill: #777"/><rect x="7" y="9" width="4" height="1" style="stroke: none; fill: #777"/><rect x="6" y="11" width="7" height="1" style="stroke: none; fill: #777"/><rect x="9" y="13" width="4" height="1" style="stroke: none; fill: #777"/>'},messages:{width:20,height:20,innerSVG:'<path d="M 4.87,13 A 7,6 0 0 1 12.68,3.15 A 7,6 0 0 1 7.97,14.36 L 4.5 17 Z" style="stroke: #222; fill: #fff"/><rect x="8" y="6" width="3" height="1" style="stroke: none; fill: #777"/><rect x="6" y="8" width="2" height="1" style="stroke: none; fill: #777"/><rect x="9" y="8" width="5" height="1" style="stroke: none; fill: #777"/><rect x="7" y="10" width="4" height="1" style="stroke: none; fill: #777"/>'},stackView:{width:20,height:20,innerSVG:'<polygon points="4,5.5 10,8.5 16,5.5 10,2.5" style="stroke: none; fill: #fff"/><polygon points="4,5.5 4,14.5 10,17.5 10,8.5" style="stroke: none; fill: #bbb"/><polygon points="10,17.5 16,14.5 16,5.5 10,8.5" style="stroke: none; fill: #999"/><polyline points="3,8.5 10,11.5 17,8.5" style="stroke-width: 0.6; stroke: #222; fill: none"/><polyline points="3,11.5 10,14.5 17,11.5" style="stroke-width: 0.6; stroke: #222; fill: none"/><polyline points="3,14.5 10,17.5 17,14.5" style="stroke-width: 0.6; stroke: #222; fill: none"/><polygon points="3.5,5.3 3.5,5.7 10,8.5 16.5,5.7 16.5,5.3 10,2.5" style="stroke-width: 0.6; stroke: #222; fill: none"/>'},programView:{width:20,height:20,innerSVG:'<polygon points="3,2 13,2 13,5 15,5 15,8 17,8 17,12 13,12 13,14 15,14 15,18 5,18 5,15 3,15 3,11 7,11 7,9 5,9 5,6 3,6" style="stroke:none; fill: #eeeeeec0"/><rect x="4" y="3" width="8" height="2" style="stroke:none; fill: #000"/><rect x="6" y="6" width="8" height="2" style="stroke:none; fill: #000"/><rect x="8" y="9" width="8" height="2" style="stroke:none; fill: #000"/><rect x="4" y="12" width="8" height="2" style="stroke:none; fill: #000"/><rect x="6" y="15" width="8" height="2" style="stroke:none; fill: #000"/>'},turtle:{width:20,height:20,innerSVG:'<path d="M 11.5,5 A 2,2.5 0 0 1 7.5,5 A 2,2.5 0 0 1 11.5,5 Z" style="stroke: #070; fill: #2c3"/><polyline points="3.5,6 9.5,11 15.5,6" style="stroke-width: 1.6; stroke: #070; fill: none"/><polyline points="4.5,17 9.5,10 14.5,17" style="stroke-width: 1.6; stroke: #070; fill: none"/><line x1="9.5" y1="17" x2="8.5" y2="19" style="stroke-width: 1.3; stroke: #070; fill: none"/><path d="M 13.5,11.5 A 4,5 0 0 1 5.5,11.5 A 4,5 0 0 1 13.5,11.5 Z" style="stroke: #070; fill: #2c3"/><path d="M 11.15,6.75 A 4,5 0 0 1 12.04,13.74 A 4,5 0 0 1 6.45,14.85" style="stroke: #0709; fill: none"/>'},canvas:{width:20,height:20,innerSVG:'<rect x="3" y="2" width="14" height="16" style="stroke: none; fill: #333"/><rect x="4" y="3" width="12" height="14" style="stroke: none; fill: #fff"/><rect x="5.5" y="5.5" width="6" height="6" style="stroke: #00cc; fill: #00c8"/><circle cx="11" cy="11" r="3.5" style="stroke: #c00c; fill: #c008"/>'},tutorial:{width:20,height:20,innerSVG:'<path d="M 5 20 L 9 2 L 11 2 L 15 20" style="stroke-width: 3; stroke: #666; fill: none"/><polyline points="5,20 9,2 11,2 15,20" style="stroke-width: 2; stroke: #db7; fill: none"/><rect x="1.5" y="2.5" width="17" height="12" style="stroke: none; fill: #666"/><rect x="2" y="3" width="16" height="11" style="stroke: none; fill: #db7"/><rect x="3" y="4" width="14" height="9" style="stroke: none; fill: #000"/><polyline points="5,6 7,8 5,10" style="stroke: #fff; fill: none"/>'},fileTree:{width:20,height:20,innerSVG:'<polygon points="6,1.375 9.75,1.375 11.25,2.875 15.75,2.875 15.75,9.625 6,9.625" style="fill: #ec5; stroke: #330"/><polyline points="4.5,12.625 4.5,15.625" style="stroke-width: 1.5; fill: #fff; stroke: #000"/><polyline points="10,9.625 10,15.625" style="stroke-width: 1.5; fill: #fff; stroke: #000"/><polyline points="15.5,12.625 15.5,15.625" style="stroke-width: 1.5; fill: #fff; stroke: #000"/><polyline points="4.5,12.625 15.5,12.625" style="stroke-width: 1.5; fill: #fff; stroke: #000"/><polygon points="3.25,15.625 5.75,15.625 5.75,19 3.25,19" style="stroke-width: 0.5; fill: #fff; stroke: #000"/><polygon points="8.75,15.625 11.25,15.625 11.25,19 8.75,19" style="stroke-width: 0.5; fill: #fff; stroke: #000"/><polygon points="14.25,15.625 16.75,15.625 16.75,19 14.25,19" style="stroke-width: 0.5; fill: #fff; stroke: #000"/>'}}},7744:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e},o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{l(r.next(t))}catch(t){a(t)}}function s(t){try{l(r.throw(t))}catch(t){a(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}l((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const s=n(6694),l=a(n(6075)),c=n(2394),d=n(7994),h=n(1586),u=n(6664);n(3976),n(5994),n(1018),n(582),n(7366),n(1100),n(2575),n(6439),n(2434),n(6085),n(7462);const p=n(2907),f=n(3164),m=n(355);window.addEventListener("load",(()=>o(void 0,void 0,void 0,(function*(){const t=document.getElementById("ide-container");t.replaceChildren();const e=window.TScript;if("object"==typeof e)return void(0,u.showStandalonePage)(t,e);let n=new URL(location.href);const r=function(t){if("?doc"===t.search){const e=t.hash.slice(1),n=new URLSearchParams(e.startsWith("search/")?{doc:"search",q:e.slice(7).split("/").join(" ")}:{doc:e});return new URL("?"+n.toString(),location.href)}if("?run"===t.search){const e=new URLSearchParams({load:decodeURI(t.hash.slice(1))});return new URL("?"+e.toString(),location.href)}return null}(n);r&&((0,d.replaceUrl)(r),n=r);const i=n.searchParams.get("code"),a=sessionStorage.getItem("git_auth_type");if(i&&a){let t;if("hub"==a){(0,d.replaceUrl)(n.href.split("?")[0]);try{t=yield fetch(`${p.server_url}/auth-token-exchange?client_id=${p.client_id_github}&code=${i}&type=hub`,{method:"get"})}catch(t){alert("Error trying to login with GitHub.")}}else if("lab"==a){(0,d.replaceUrl)(n.href.split("?")[0]);try{t=yield fetch(`${p.server_url}/auth-token-exchange?client_id=${p.app_id_gitlab}&code=${i}&type=lab`,{method:"get"})}catch(t){alert("Error trying to login with GitLab.")}}t&&(t.text().then((t=>{(0,f.validJWT)(t)&&(localStorage.setItem("git_token",t),(0,m.getGitRepos)())})),sessionStorage.removeItem("git_auth_type"))}yield(0,d.initializeNavigation)(n,t,(t=>t.searchParams.has("doc")?y:g))}))));class g{constructor(t,e){l.create(t);const n=e.searchParams.get("load");n&&function(t){o(this,void 0,void 0,(function*(){try{const e=new URL(t),n=yield fetch(t),r=yield n.text();(0,c.importData)(r,(0,c.cleanupExternalFilename)(e.pathname))}catch(t){t&&"object"==typeof t||"string"==typeof t?alert("The program could not be loaded:\n"+t.toString()):alert("The program could not be loaded.")}}))}(n)}checkUnsavedChanges(){return l.collection.editors.some((t=>t.hasUnsavedChanges))}}class y{constructor(t,e){s.doc.create(t),this.showPage(e.searchParams)}navigate(t){return!!t.searchParams.has("doc")&&(this.showPage(t.searchParams),!0)}showPage(t){var e,n;const r=null!==(e=t.get("doc"))&&void 0!==e?e:"";if(r.startsWith("search/")){const t=r.slice(7).split("/"),e=new URLSearchParams({doc:"search",q:t.join(" ")});(0,d.replaceUrl)("?"+e.toString()),s.doc.setpath("search/"+t.join("/"))}else if("search"===r){const e=null!==(n=t.get("q"))&&void 0!==n?n:"",r=h.searchengine.tokenize(e);s.doc.setpath("search/"+r.join("/"))}else s.doc.setpath(r)}}},7994:(t,e)=>{"use strict";let n,r;function i(t){if(!r||t.origin!==location.origin)return!1;const e=r(t);return!!(n&&n.constructor===e&&n.navigate&&n.navigate(t))}function a(t,e=!0){if(i(t=new URL(t,location.href)))try{return history.pushState(null,"",t),!0}catch(t){}return e&&(location.href=t.toString()),!1}Object.defineProperty(e,"__esModule",{value:!0}),e.replaceUrl=e.navigate=e.initializeNavigation=void 0,e.initializeNavigation=function(t,e,o){if(r)return;const s=o(t);s&&(n=new s(e,t),r=o,window.addEventListener("popstate",(()=>{i(new URL(location.href))||location.reload()})),document.addEventListener("click",(t=>{t.target instanceof HTMLAnchorElement&&a(t.target.href,!1)&&t.preventDefault()})),n.checkUnsavedChanges&&window.addEventListener("beforeunload",(t=>{var e;(null===(e=null==n?void 0:n.checkUnsavedChanges)||void 0===e?void 0:e.call(n))&&(t.preventDefault(),t.returnValue="")})))},e.navigate=a,e.replaceUrl=function(t,e=!0){try{history.replaceState(null,"",t)}catch(n){e&&location.replace(t)}}},8323:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{l(r.next(t))}catch(t){a(t)}}function s(t){try{l(r.throw(t))}catch(t){a(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}l((r=r.apply(t,e||[])).next())}))},i=this&&this.__await||function(t){return this instanceof i?(this.v=t,this):new i(t)},a=this&&this.__asyncValues||function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t="function"==typeof __values?__values(t):t[Symbol.iterator](),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise((function(r,i){!function(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)}(r,i,(e=t[n](e)).done,e.value)}))}}},o=this&&this.__asyncDelegator||function(t){var e,n;return e={},r("next"),r("throw",(function(t){throw t})),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,a){e[r]=t[r]?function(e){return(n=!n)?{value:i(t[r](e)),done:"return"===r}:a?a(e):e}:a}},s=this&&this.__asyncGenerator||function(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,a=n.apply(t,e||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(t){a[t]&&(r[t]=function(e){return new Promise((function(n,r){o.push([t,e,n,r])>1||l(t,e)}))})}function l(t,e){try{(n=a[t](e)).value instanceof i?Promise.resolve(n.value.v).then(c,d):h(o[0][2],n)}catch(t){h(o[0][3],t)}var n}function c(t){l("next",t)}function d(t){l("throw",t)}function h(t,e){t(e),o.shift(),o.length&&l(o[0][0],o[0][1])}},l=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.readFileContent=e.recurseDirectory=e.listProjects=e.getProjectPath=e.removeListenerOnChangeProject=e.addListenerOnChangeProject=e.tryRenameProject=e.deleteProject=e.InvalidProjectName=e.ProjectNotFoundError=e.isInvalidBasename=e.tryCreateProject=e.setCurrentProject=e.simplifyPath=e.getCurrentProject=e.pathExists=e.rmdirRecursive=e.projectsFSP=e.projectsFS=void 0;const c=l(n(9914)),d=l(n(9497)),h=n(3034),u=n(6075);function p(t){return r(this,void 0,void 0,(function*(){for(const n of yield e.projectsFSP.readdir(t)){const r=`${t}/${n}`;(yield e.projectsFSP.lstat(r)).isDirectory()?yield p(r):yield e.projectsFSP.unlink(r)}yield e.projectsFSP.rmdir(t)}))}function f(t){return r(this,void 0,void 0,(function*(){try{yield e.projectsFSP.lstat(t)}catch(t){if("ENOENT"===t.code)return!1;throw t}return!0}))}let m;e.projectsFS=new c.default("projects"),e.projectsFSP=e.projectsFS.promises,e.rmdirRecursive=p,e.pathExists=f;const g=new Map;function y(){return m}function v(t){return r(this,void 0,void 0,(function*(){if(t===m)return;if(void 0!==t&&!(yield f(A(t))))throw new w(t);const e=m;m=t;for(const n of g.keys())n(t,e);u.filetree.panel.titlebar.textContent=`Files (${t?"Selected project: "+t:"No project selected"})`}))}function b(t){return t.includes("/")?'may not contain "/"':"."===t?'may not be "."':".."===t?'may not be ".."':""===t?"may not be empty":void 0}e.getCurrentProject=y,e.simplifyPath=function(t){return t.replaceAll(/\/+/g,"/").replace(/\/$/,"")},e.setCurrentProject=v,e.tryCreateProject=function(t){return r(this,void 0,void 0,(function*(){const n=b(t);if(void 0!==n)throw new x(t,`Project names ${n}`);try{return yield e.projectsFSP.mkdir(A(t)),!0}catch(t){if("EEXIST"===t.code)return!1;throw t}}))},e.isInvalidBasename=b;class w extends Error{constructor(t){super(`Project ${t} could not be found`)}}e.ProjectNotFoundError=w;class x extends Error{constructor(t,e){super(`Invalid project name "${t}"`),this.reason=e}}function k(t){g.set(t,!0)}function A(t){return d.default.join("/",t)}e.InvalidProjectName=x,e.deleteProject=function(t){return r(this,void 0,void 0,(function*(){y()===t&&(yield v(void 0));try{yield p(A(t))}catch(e){if("ENOENT"===e.code)throw new w(t);throw e}}))},e.tryRenameProject=function(t,n){return r(this,void 0,void 0,(function*(){if(t===n)return!0;if(yield f(A(n)))return!1;try{yield e.projectsFSP.rename(A(t),A(n))}catch(e){throw"ENOENT"===e.code?new w(t):e}return yield v(n),!0}))},e.addListenerOnChangeProject=k,e.removeListenerOnChangeProject=function(t){g.delete(t)},e.getProjectPath=A,e.listProjects=function(){return r(this,void 0,void 0,(function*(){return yield e.projectsFSP.readdir("/")}))},Promise.resolve().then((()=>{k((()=>{(0,h.saveConfig)()}))})),e.recurseDirectory=function t(n){return s(this,arguments,(function*(){for(const r of yield i(e.projectsFSP.readdir(n))){const s=d.default.join(n,r);"dir"===(yield i(e.projectsFSP.stat(s))).type?yield i(yield*o(a(t(s)))):yield yield i(s)}}))};class T extends Error{constructor(t){super(`Can't open "${t}: is a directory"`),this.code="EISDIR"}}e.readFileContent=function(t){return r(this,void 0,void 0,(function*(){try{const n=yield e.projectsFSP.readFile(t,{encoding:"utf8"});if(void 0===n)throw new T(t);return n.toString()}catch(t){return t instanceof Error?t:new Error(""+t)}}))}},1586:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.searchengine=void 0,e.searchengine=function(){let t={};function e(t,e){let n=new Array;for(let e=0;e<=t.length;e++)n.push(e);for(let r=1;r<=e.length;r++){let i=[r];for(let a=1;a<=t.length;a++)i.push(Math.min(Math.min(n[a-1]+(t[a-1]==e[r-1]?0:1),n[a]+1),i[a-1]+.5));n=i}return n.pop()}function n(t,e,n,r){let i=Math.min(1,1/(r+3))*t/(t+8*e);return n*i*i}return t.config={maxreldist:.3,minwordlength:2},t.doclength={},t.dictionary={},t.tokenize=function(e){let n=e.toLowerCase().match(/[a-z0-9äöüß-]+\w+/g);if(!n)return[];let r=new Array;for(let e=0;e<n.length;e++){let i=n[e];i.length<t.config.minwordlength||r.push(i)}return r},t.clear=function(){t.doclength={},t.dictionary={}},t.add=function(e,n){if(t.doclength.hasOwnProperty(e))throw"[searchengine] document ID is already in use";let r=t.tokenize(n);t.doclength[e]=r.length;for(let n=0;n<r.length;n++){let i=r[n];t.dictionary.hasOwnProperty(i)||(t.dictionary[i]={docs:{},numdocs:0});let a=t.dictionary[i];a.docs.hasOwnProperty(e)||(a.numdocs++,a.docs[e]=0),a.docs[e]++}},t.find=function(r,i=10){if("string"==typeof r&&(r=t.tokenize(r)),0==r.length)return[];let a={};for(let i=0;i<r.length;i++){let o=r[i];for(let r in t.dictionary){if(!t.dictionary.hasOwnProperty(r))continue;let i=Math.floor(t.config.maxreldist*r.length),s=e(r,o);if(s>i)continue;let l=t.dictionary[r],c=l.numdocs;for(let t in l.docs){if(!l.docs.hasOwnProperty(t))continue;a.hasOwnProperty(t)||(a[t]={id:t,score:0,matches:{}});let e=n(r.length,s,l.docs[t],c);a[t].score+=e,a[t].matches.hasOwnProperty(r)||(a[t].matches[r]=0),a[t].matches[r]+=e}}}let o=new Array;for(let e in a){if(!a.hasOwnProperty(e))continue;let n=a[e];n.score=Math.log(n.score)/Math.log(t.doclength[e]),o.push(n)}return o.sort((function(t,e){return e.score-t.score})),o.slice(0,i)},t}()},6664:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{l(r.next(t))}catch(t){a(t)}}function s(t){try{l(r.throw(t))}catch(t){a(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}l((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.showStandalonePage=void 0;const i=n(7277),a=n(5584),o=n(28);e.showStandalonePage=function(t,e){return r(this,void 0,void 0,(function*(){const{includeSourceResolutions:n,includeResolutions:s}=e.code;class l{constructor(t,e){this.filename=t,this.source=e}resolveIncludeToFileID(t){const e=s.find((e=>e[0]===this.filename&&e[1]===t));return void 0===e?(console.error(`Unexpectedly could not resolve include in ${(0,a.fileIDToHumanFriendly)(this.filename)} operand "${t}" to fileID`),null):e[2]}resolveInclude(t){return r(this,void 0,void 0,(function*(){return l.getParseInput(t)}))}static getParseInput(t){return new l(t,n[t])}}const c=l.getParseInput(e.code.main);if(!c)return void console.error("Could not get parse input of main file");const{program:d,errors:h}=yield(0,i.parseProgram)(c);if(null==d)return void console.error("Could not parse program",h);const u=(0,o.createIDEInterpreter)(d);switch(e.mode){case"canvas":{const e=(0,o.createCanvas)(u,t);u.service.canvas.dom=e,t.replaceChildren(e),t.tabIndex=-1,t.focus();break}case"turtle":{const e=(0,o.createTurtle)(t);t.style.alignContent="center",t.style.textAlign="center",u.service.turtle.dom=e,t.replaceChildren(e);break}}u.run()}))}},3279:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.normalizeHotkey=e.setHotkeyElement=e.hotkey=e.releaseAllHotkeys=e.releaseHotkey=e.setHotkey=void 0;const r=n(6393);let i={},a=null;function o(t){let e=t.lastIndexOf("-")+1,n=t.substr(e);return 1==n.length?t.substr(0,e)+n.toLowerCase():t}e.setHotkey=function(t,e){if(t){if(t=o(t),i.hasOwnProperty(t))throw"[tgui.setHotkey] hotkey conflict; key '"+t+"' is already taken";i[t]=e}},e.releaseHotkey=function(t){t&&delete i[o(t)]},e.releaseAllHotkeys=function(){i={}},e.hotkey=function(t){return i.hasOwnProperty(o(t))},e.setHotkeyElement=function(t){a=t},e.normalizeHotkey=o,document.addEventListener("keydown",(function(t){var e,n;if(r.modal.length>0){let n=r.modal[r.modal.length-1];if(!n.onKeyDownOverride){if("Escape"==t.key)return n.handleClose(t);if("F1"==t.key)return null===(e=n.handleHelp)||void 0===e?void 0:e.call(n,t);if("Enter"==t.key&&n.hasOwnProperty("enterConfirms")&&n.enterConfirms)return n.handleDefault(t)}if(n.hasOwnProperty("onKeyDown"))return n.onKeyDown(t),!1}else{if(a&&(0==(n=a.getBoundingClientRect()).width||0==n.height||n.top>=(window.innerHeight||document.documentElement.clientHeight)||n.bottom<0||n.left>=(window.innerWidth||document.documentElement.clientWidth)||n.right<0))return!0;let e=t.key;t.altKey&&(e="alt-"+e),t.ctrlKey&&(e="control-"+e),t.shiftKey&&(e="shift-"+e),e=o(e),i.hasOwnProperty(e)&&(i[e](t),t.preventDefault(),t.stopPropagation())}return!0}))},6042:function(t,e,n){"use strict";var r,i,a,o,s=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),l=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||s(e,t,n)},c=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{l(r.next(t))}catch(t){a(t)}}function s(t){try{l(r.throw(t))}catch(t){a(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}l((r=r.apply(t,e||[])).next())}))},d=this&&this.__classPrivateFieldGet||function(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)},h=this&&this.__classPrivateFieldSet||function(t,e,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(t,n):i?i.value=n:e.set(t,n),n},u=this&&this.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};Object.defineProperty(e,"__esModule",{value:!0}),e.separator=e.setTooltip=e.clearElement=e.TreeControl=e.createButton=e.createIcon=e.createLabel=e.createText=e.createElement=void 0;const p=n(3279),f=n(6393);function m(t){return g(document.createElement(t.type),t)}function g(t,e){if(e.classname&&t.setAttribute("class",e.classname),e.hasOwnProperty("id")&&(t.id=e.id),e.hasOwnProperty("properties"))for(let n in e.properties)e.properties.hasOwnProperty(n)&&(t[n]=e.properties[n]);if(e.hasOwnProperty("style"))for(let n in e.style)e.style.hasOwnProperty(n)&&(t.style[n]=e.style[n]);if(e.hasOwnProperty("text")&&t.appendChild(document.createTextNode(e.text)),e.hasOwnProperty("html")&&(t.innerHTML+=e.html),e.hasOwnProperty("tooltip")?w(t,e.tooltip):e.hasOwnProperty("tooltip-right")&&w(t,e["tooltip-right"],"right"),e.hasOwnProperty("click")&&(t.addEventListener("click",e.click),t.style.cursor="pointer"),e.hasOwnProperty("dblclick")&&t.addEventListener("dblclick",e.dblclick),e.hasOwnProperty("events"))for(let n in e.events)e.events.hasOwnProperty(n)&&t.addEventListener(n,e.events[n]);return e.hasOwnProperty("tabindex")&&(t.tabIndex=e.tabindex),e.parent&&e.parent.appendChild(t),t}l(n(3279),e),l(n(6393),e),l(n(6730),e),l(n(6906),e),e.createElement=m,e.createText=function(t,e=null){let n=document.createTextNode(t);return e&&e.appendChild(n),n};const y="tgui tgui-control tgui-label ";function v(t){let e={display:"block",width:t.width+"px",height:t.height+"px"};t.hasOwnProperty("style")&&Object.assign(e,t.style);let n=function(t){let e=document.createElementNS("http://www.w3.org/2000/svg","svg");return e.setAttribute("width",t.width+"px"),e.setAttribute("height",t.height+"px"),e.innerHTML=t.innerSVG,e}(t.icon);return g(n,{parent:t.parent,style:e,classname:t.hasOwnProperty("classname")?t.classname:"tgui"}),n}function b(t){t.innerHTML=""}function w(t,e="",n="left"){let r=t.getElementsByClassName("tgui-tooltip");for(let e=0;e<r.length;e++)t.removeChild(r[e]);m({type:"div",parent:t,text:e,classname:"tgui tgui-tooltip tgui-tooltip-"+n})}e.createLabel=function(t){const{text:e="",className:n=""}=t,r=u(t,["text","className"]),i=m(Object.assign(Object.assign({},r),{type:"span",classname:y+n})),a=document.createTextNode(e);return i.replaceChildren(a),{dom:i,setText(t){a.data=t},setClassName(t){i.className=y+t}}},e.createIcon=v,e.createButton=function(t){let e=m(Object.assign(Object.assign({},t),{type:"button",classname:"tgui tgui-control tgui-button"+(t.text?"-text":"-icon")+(t.classname?" "+t.classname:"")}));if(t.icon)v({parent:e,icon:t.icon,width:t.width,height:t.height});else if(!t.text)throw"[tgui.createButton] either .text or .icon are required";return(0,p.setHotkey)(t.hotkey,t.click),{dom:e}},e.TreeControl=class{constructor(t){r.add(this),i.set(this,null),a.set(this,null);let e=m(Object.assign(Object.assign({},t),{type:"div",classname:"tgui tgui-control tgui-tree"})),n={value:null,id:"",open:!0,expanded:!1,main:e,childrows:[],toggle:null,element:null,children:[]};this.description=t,this.dom=e,this.root=n,this.numberOfNodes=0,this.element2state={},this.id2state={},this.id2open={},this.info=t.info,this.visible=null}update(t=this.info,e){t&&(d(this,i,"f")?h(this,a,[t,e],"f"):h(this,i,(()=>c(this,void 0,void 0,(function*(){try{yield d(this,r,"m",o).call(this,t)}finally{try{yield null==e?void 0:e()}finally{h(this,i,null,"f");const t=d(this,a,"f");t&&(h(this,a,null,"f"),this.update(...t))}}})))(),"f"))}value(t){if(!this.element2state.hasOwnProperty(t.id))throw"[tgui TreeControl.get] unknown element";return this.element2state[t.id].value}updateLookup(t){t.element&&(this.element2state[t.element.id]=t),t.id&&(this.id2state[t.id]=t);for(let e=0;e<t.children.length;e++)this.updateLookup(t.children[e])}createChildNodes(t,e){var n;return c(this,void 0,void 0,(function*(){for(let r=0;r<e.children.length;r++){let i=e.children[r],a=e.ids[r],o=yield this.createInternalTree(i,a);if(t.children.push(o),null===t.value)t.main.appendChild(o.main);else{let e=m({type:"tr",parent:null!==(n=t.main)&&void 0!==n?n:void 0,classname:"tgui"});m({type:"td",parent:e,classname:"tgui tgui-tree-cell-toggle"}),m({type:"td",parent:e,classname:"tgui tgui-tree-cell-content"}).appendChild(o.main),t.childrows.push(e)}}t.expanded=!0}))}createInternalTree(t,e){var n,r;return c(this,void 0,void 0,(function*(){console.assert(this.info);const i=yield this.info(t,e);let a;a=i instanceof Promise?yield i:i;const o={value:t,id:e,open:null===t||(this.id2open.hasOwnProperty(e)?this.id2open[e]:!!a.opened),expanded:!1,main:null===t?this.dom:m({type:"table",classname:"tgui tgui-tree-main"}),childrows:[],toggle:null===t?null:m({type:"div",classname:"tgui tgui-tree-toggle"}),element:null===t?null:null!==(n=a.element)&&void 0!==n?n:null,children:[]};if(null!==t){let t=m({type:"tr",parent:null!==(r=o.main)&&void 0!==r?r:void 0,classname:"tgui"}),e=m({type:"td",parent:t,classname:"tgui tgui-tree-cell-toggle"}),n=m({type:"td",parent:t,classname:"tgui tgui-tree-cell-content"});e.appendChild(o.toggle),console.assert(o.element),n.appendChild(o.element),o.element.id="tgui.id."+(Math.random()+1),o.element.className="tgui tgui-tree-element";let i=a.children.length>0?o.open?"▾":"▸":"▫";o.toggle.innerHTML=i,a.children.length>0&&(e.style.cursor="pointer",e.addEventListener("click",(t=>c(this,void 0,void 0,(function*(){let t=e.parentNode.children[1].children[0],n=this.element2state[t.id];if(n.open)for(let t=0;t<n.childrows.length;t++)n.childrows[t].className="tgui tgui-hidden";else{if(!n.expanded){let t=yield this.info(n.value,n.id);yield this.createChildNodes(n,t),this.updateLookup(n)}for(let t=0;t<n.childrows.length;t++)n.childrows[t].className="tgui"}n.open=!n.open,this.id2open[n.id]=n.open;let r=n.open?"▾":"▸";n.toggle.innerHTML=r})))));const s=t=>e=>c(this,void 0,void 0,(function*(){let r=n.children[0],i=this.element2state[r.id];yield t(e,i.value,i.id)}));if(this.description.nodeclick&&(n.style.cursor="pointer",n.addEventListener("click",s(this.description.nodeclick))),this.description.nodeEventHandlers)for(const t in this.description.nodeEventHandlers)n.addEventListener(t,s(this.description.nodeEventHandlers[t]));this.description.cursorStyle&&(n.style.cursor=this.description.cursorStyle)}return a.visible&&(this.visible=this.numberOfNodes),this.numberOfNodes++,o.open&&(yield this.createChildNodes(o,a),o.expanded=!0),o}))}},i=new WeakMap,a=new WeakMap,r=new WeakSet,o=function(t){return c(this,void 0,void 0,(function*(){if(this.info=t,this.visible=null,this.numberOfNodes=0,b(this.dom),this.root=yield this.createInternalTree(null,""),this.element2state={},this.id2state={},this.updateLookup(this.root),null!==this.visible){yield Promise.resolve();let t=this.dom.clientHeight,e=this.dom.scrollHeight*this.visible/this.numberOfNodes;(e<this.dom.scrollTop+.1*t||e>=this.dom.scrollTop+.9*t)&&(e-=.666*t,e<0&&(e=0),this.dom.scrollTop=e)}}))},e.clearElement=b,e.setTooltip=w,e.separator=m({type:"div",id:"tgui-separator",classname:"tgui tgui-separator",click:function(t){return!1},tabindex:-1}),e.separator.addEventListener("focusin",(t=>{var e;return null===(e=f.modal[f.modal.length-1])||void 0===e||e.focusControl.focus(),!1}))},6393:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.errorMsgBox=e.tryStopModal=e.stopModal=e.startModal=e.msgBoxExclamation=e.msgBoxQuestion=e.msgBox=e.createModal=e.modal=void 0;const r=n(6042),i=n(3679);e.modal=new Array;class a extends Error{constructor(t){super(`Button "${t.text}" is not a button on this modal`)}}function o(t){let e=Object.assign({},t),n=function(t,n){if(t&&(t.preventDefault(),t.stopPropagation()),n&&n.onClick){let t=n.onClick();t instanceof Promise?t.then((t=>{t||h(e)})):t||h(e)}else h(e);return!1};e.onHelp?e.handleHelp=function(t){return t&&(t.preventDefault(),t.stopPropagation()),e.onHelp(t instanceof KeyboardEvent),!1}:e.handleHelp=null;let o=(0,r.createElement)({type:"div",classname:"tgui tgui-modal",style:{background:"#eee",overflow:"hidden",display:"block",zIndex:"100",position:"absolute",left:"0",right:"0",top:"0",bottom:"0",margin:"auto",width:"calc(min(max("+e.minsize[0]+"px, "+100*e.scalesize[0]+"%), 100%))",height:"calc(min(max("+e.minsize[1]+"px, "+100*e.scalesize[1]+"%), 100%))"}});e.dom=o,o.addEventListener("keydown",(function(t){if(9===t.keyCode){let r="button, [href], input, select, textarea";var n=Array(...e.dom.querySelectorAll(r));if(0===(n=n.filter((t=>-1!==t.tabIndex))).length)e.focusControl.focus(),t.preventDefault();else{let e=n.indexOf(document.activeElement),r=n.length;-1==e||!t.shiftKey&&e==r-1?(n[0].focus(),t.preventDefault()):t.shiftKey&&0===e&&(n[r-1].focus(),t.preventDefault())}}})),e.handleClose=t=>n(t,null);const{titlebar:s,setTitle:l}=function(t,e,n,a){let o=(0,r.createElement)({parent:t,type:"div",style:{position:"absolute",width:"100%",left:"0",height:"24px",top:"0"},classname:"tgui-modal-titlebar"}),s=(0,r.createElement)({parent:o,type:"span",text:e,classname:"tgui-modal-titlebar-title",style:{height:"20px","line-height":"20px"}});return null!==a&&(0,r.createButton)({parent:o,click:function(){a(null)},width:20,height:20,icon:i.icons.help,classname:"tgui-panel-dockbutton","tooltip-right":"Help"}),(0,r.createButton)({parent:o,click:function(){return n(null)},width:20,height:20,icon:i.icons.close,classname:"tgui-panel-dockbutton","tooltip-right":"Close"}),{titlebar:o,setTitle:t=>s.innerText=t}}(o,e.title,e.handleClose,e.handleHelp);e.titlebar=s,e.setTitle=l;let c={height:e.hasOwnProperty("buttons")?"calc(100% - 63px)":"calc(100% - 24px)"};if(e.hasOwnProperty("contentstyle")&&Object.assign(c,e.contentstyle),e.content=(0,r.createElement)({type:"div",parent:o,classname:"tgui tgui-modal-content",style:c,tabindex:-1}),e.focusControl=e.content,e.hasOwnProperty("buttons")){e.div_buttons=(0,r.createElement)({parent:e.dom,type:"div",classname:"tgui tgui-modal-buttonbar"});for(let t of e.buttons){let i=e=>n(e,t);t.isDefault&&(e.handleDefault=i);let a=(0,r.createElement)({parent:e.div_buttons,type:"button",style:{width:"100px",height:"100%","margin-right":"10px"},text:t.text,classname:t.isDefault?"tgui-modal-default-button":"tgui-modal-button",click:i});t.isDefault&&(e.focusControl=a)}}return e.pressButton=e=>{var r;if(!(null===(r=t.buttons)||void 0===r?void 0:r.includes(e)))throw new a(e);n(null,e)},e}function s(t){t=Object.assign({buttons:[{text:"Okay",isDefault:!0}]},t);let e=o(Object.assign({scalesize:[.2,.15],minsize:[300,150]},t)),n=t.icon;return n&&(0,r.createIcon)({parent:e.content,icon:n,width:40,height:40,classname:"tgui-panel-titlebar-icon",style:{margin:"13px",float:"left","background-clip":"content-box"}}),(0,r.createElement)({parent:e.content,type:"div",style:{"margin-top":"13px","white-space":"pre-wrap"},text:t.prompt}),l(e),e}function l(t){var n,i;0==e.modal.length?document.body.appendChild(r.separator):e.modal[e.modal.length-1].dom.style.zIndex=0,t.prevActiveElement=document.activeElement,null===(i=null===(n=document.activeElement)||void 0===n?void 0:n.blur)||void 0===i||i.call(n),document.body.appendChild(t.dom),e.modal.push(t),t.focusControl.focus()}e.createModal=o,e.msgBox=s,e.msgBoxQuestion=i.icons.msgBoxQuestion,e.msgBoxExclamation=i.icons.msgBoxExclamation,e.startModal=l;const c="[tgui.stopModal] no modal dialog to close";function d(t){if(0==e.modal.length)throw c;if(void 0===t||t===e.modal[e.modal.length-1]){let t=e.modal.pop();document.body.removeChild(t.dom),null!==t.prevActiveElement&&t.prevActiveElement.focus()}else{let n=e.modal.findIndex((e=>e===t));if(-1==n)throw"[tgui.stopModal] not a modal dialog";e.modal[n+1].prevActiveElement=e.modal[n].prevActiveElement,e.modal.splice(n,1),document.body.removeChild(t.dom)}0==e.modal.length?document.body.removeChild(r.separator):e.modal[e.modal.length-1].dom.style.zIndex=100}function h(t){var n;if(void 0===t&&void 0===(t=e.modal.at(-1)))throw c;return!e.modal.includes(t)||!(null===(n=t.onClose)||void 0===n?void 0:n.call(t))&&(d(t),!0)}e.stopModal=d,e.tryStopModal=h,e.errorMsgBox=function(t){s({title:"Error",prompt:t})}},6730:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.forceArrange=e.arrangePanels=e.preparePanels=e.savePanelData=e.getPanel=e.removePanel=e.createPanel=e.panels=void 0;const r=n(3679),i=n(6042);let a=n(8496);e.panels=[];let o=[],s=[],l=[],c=null,d=1,h=-1,u=null,p=null,f=0,m=0;function g(){let t={};for(let n=0;n<e.panels.length;n++){let r=e.panels[n],i={};i.state=r.state,i.fallbackState=r.fallbackState,i.pos=r.pos,i.size=r.size,i.floatingpos=r.floatingpos,i.floatingsize=r.floatingsize,i.dockedheight=r.dockedheight,t[r.name]=i}localStorage.setItem("tgui.panels",JSON.stringify(t))}function y(t,e,n,r){if(0==t.length)return;const i=100;let a=0;for(let e=0;e<t.length;e++){let n=t[e];a+=Math.max(i,n.dockedheight)}let o=a-i*t.length,s=r-i*t.length,l=0;for(let r=0;r<t.length;r++){let a=t[r],c=a.dockedheight-i,d=0==o?Math.round(s/t.length):Math.round(s*c/o);d<0&&(d=0);let h=i+d;a.dom.style.left=e+"px",a.dom.style.top=l+"px",a.dom.style.width=n+"px",a.dom.style.height=h+"px",a.pos=[e,l],a.size[0]==n&&a.size[1]==h||(a.size=[n,h],a.dockedheight=h,a.onResize(n,Math.max(0,h-22))),a.onArrange(),l+=h}}function v(){if(!u)return;let t=u.clientWidth,e=u.clientHeight;f=t,m=e;let n=Math.round(.6*t),r=t-n;if(c){let n=c,r=[t,e],i=r[0]!=n.size[0]||r[1]!=n.size[1];n.pos=[0,0],i&&(n.size=r,n.dom.style.width=r[0]+"px",n.dom.style.height=r[1]+"px",n.onResize(n.size[0],Math.max(0,n.size[1]-22))),n.onArrange()}for(let n=0;n<l.length;n++){let r=l[n],i=r.floatingpos[0],a=r.floatingpos[1],o=r.floatingsize[0],s=r.floatingsize[1];o>=t?(i=0,o=t):i+o>=t&&(i=t-o),s>=e?(a=0,s=e):a+s>=e&&(a=e-s),i==r.pos[0]&&a==r.pos[1]||(r.dom.style.left=i+"px",r.dom.style.top=a+"px",r.pos=[i,a],r.floatingpos=r.pos),o==r.size[0]&&s==r.size[1]||(r.size=[o,s],r.floatingsize=r.size,r.dom.style.width=o+"px",r.dom.style.height=s+"px",r.onResize(o,Math.max(0,s-22))),r.onArrange()}y(o,0,s.length>0?n:t,e),y(s,o.length>0?n:0,o.length>0?r:t,e),g()}e.createPanel=function(t){let n=function(t){let e=localStorage.getItem("tgui.panels");if(e){let n=JSON.parse(e);if(n.hasOwnProperty(t))return n[t]}return null}(t.name);n?(t.pos=n.pos,t.size=n.size,t.floatingpos=n.floatingpos,t.floatingsize=n.floatingsize,t.dockedheight=n.dockedheight,t.state=n.state,t.fallbackState=n.fallbackState):(t.hasOwnProperty("floatingpos")||(t.floatingpos=[100+20*e.panels.length,100+10*e.panels.length]),t.hasOwnProperty("floatingsize")||(t.floatingsize=[400,250]),t.hasOwnProperty("dockedheight")||(t.dockedheight=200),t.hasOwnProperty("state")||(t.state="float"),t.hasOwnProperty("fallbackState")||(t.fallbackState="float"),t.pos=t.floatingpos,t.size=t.floatingsize,!t.hasOwnProperty("dockedheight")||"left"!=t.state&&"right"!=t.state||(t.size[1]=t.dockedheight));let f=Object.assign({},t);f.state="disabled";let m=(0,i.createElement)({type:"div",classname:"tgui-panel-container"});f.dom=m,f.onClose?(f.panelID=h,h--):(f.panelID=d,d++),f.hasOwnProperty("icon")||(f.icon=r.icons.window),e.panels.push(f),f.titlebar_container=(0,i.createElement)({type:"div",parent:m,classname:"tgui tgui-panel-titlebar"}),f.titlebar_icon=(0,i.createIcon)({parent:f.titlebar_container,icon:f.icon,width:20,height:20,classname:"tgui-panel-titlebar-icon",style:{left:"1px",top:"1px",cursor:"pointer"}}),f.titlebar_icon.addEventListener("dblclick",(function(t){return f.dock("icon"),!1})),f.titlebar=(0,i.createElement)({type:"label",dblclick:function(t){return f.dock("max"==f.state?f.fallbackState:"max"),!1},parent:f.titlebar_container,text:f.title,classname:"tgui-panel-titlebar-title",style:{height:"20px","line-height":"20px"}}),f.onClose&&(f.button_close=(0,i.createButton)({click:function(t){return f.onClose(),!1},width:20,height:20,icon:r.icons.close,parent:f.titlebar_container,classname:"tgui-panel-dockbutton","tooltip-right":"Close"})),f.button_left=(0,i.createButton)({click:function(){return f.dock("left"),!1},width:20,height:20,icon:r.icons.dockLeft,parent:f.titlebar_container,classname:"tgui-panel-dockbutton","tooltip-right":"Dock left"}),f.button_right=(0,i.createButton)({click:function(){return f.dock("right"),!1},width:20,height:20,icon:r.icons.dockRight,parent:f.titlebar_container,classname:"tgui-panel-dockbutton","tooltip-right":"Dock right"}),f.button_max=(0,i.createButton)({click:function(){return f.dock("max"),!1},width:20,height:20,icon:r.icons.maximize,parent:f.titlebar_container,classname:"tgui-panel-dockbutton","tooltip-right":"Maximize"}),f.button_float=(0,i.createButton)({click:function(){return f.dock("float"),!1},width:20,height:20,icon:r.icons.float,parent:f.titlebar_container,classname:"tgui-panel-dockbutton","tooltip-right":"Floating"}),f.button_icon=(0,i.createButton)({click:function(t){return f.dock("icon"),!1},width:20,height:20,icon:r.icons.minimize,parent:f.titlebar_container,classname:"tgui-panel-dockbutton","tooltip-right":"Minimize"}),f.content=(0,i.createElement)({type:"div",parent:m,classname:"tgui tgui-panel-content"}),f.icon=(0,i.createButton)({click:function(){return f.dock(f.fallbackState),!1},width:20,height:20,icon:f.icon,tooltip:f.title,style:{margin:"0 0 0 1px",padding:"0",width:"22px",height:"22px"}});let v=f.icon.dom;f.hasOwnProperty("onResize")||(f.onResize=function(t,e){}),f.hasOwnProperty("onArrange")||(f.onArrange=function(){});var b=function(t){"float"==f.state&&u.lastChild!==m&&u.appendChild(m)};return m.addEventListener("focusin",b),m.addEventListener("mousedown",b),f.dock=function(t,e=!1){if(!e){if(t==this.state)return;a(m).unset(),m.style.zIndex="0",v.parentNode&&v.parentNode.removeChild(v),m.parentNode&&m.parentNode.removeChild(m),"left"==this.state&&o.splice(o.indexOf(this),1),"right"==this.state&&s.splice(s.indexOf(this),1),"float"==this.state&&l.splice(l.indexOf(this),1),c==this&&(c=null),m.classList.remove("tgui-panel-float")}if("left"==t){u.appendChild(m),m.style.position="absolute",m.style.left="0",m.style.top="0",m.style.width="60%",m.style.height="100%",m.style.zIndex="0",this.fallbackState=t,o.push(this),o.sort((function(t,e){return t.panelID-e.panelID}));let e=this;a(m).resizable({edges:{bottom:!0},restrictEdges:{outer:"parent",endOnly:!1},restrictSize:{min:{height:100}},inertia:!1,onmove:function(t){if(o[o.length-1]==e)return;f.dockedheight=t.rect.height;let n=u.clientWidth,r=u.clientHeight,i=Math.round(.6*n);y(o,0,i,r),g()}})}else if("right"==t){u.appendChild(m),m.style.position="absolute",m.style.left="60%",m.style.top="0",m.style.width="40%",m.style.height="100%",m.style.zIndex="0",this.fallbackState=t,s.push(this),s.sort((function(t,e){return t.panelID-e.panelID}));let e=this;a(m).resizable({edges:{bottom:!0},restrictEdges:{outer:"parent",endOnly:!1},restrictSize:{min:{height:100}},inertia:!1,onmove:function(t){if(s[s.length-1]==e)return;f.dockedheight=t.rect.height;let n=u.clientWidth,r=u.clientHeight,i=Math.round(.6*n);y(s,i,n-i,r),g()}})}else if("max"==t)c&&c.dock(c.fallbackState),u.appendChild(m),m.style.position="absolute",m.style.left="0",m.style.top="0",m.style.width="100%",m.style.height="100%",m.style.zIndex="2",c=this;else if("float"==t){u.appendChild(m),m.style.position="absolute",m.style.left=this.pos[0]+"px",m.style.top=this.pos[1]+"px",m.style.width=this.size[0]+"px",m.style.height=this.size[1]+"px",m.style.zIndex="1",this.fallbackState=t,l.push(this),m.classList.add("tgui-panel-float");var n=function(t){if("float"==f.state){let e=f.pos[0]+t.dx,n=f.pos[1]+t.dy;m.style.left=e+"px",m.style.top=n+"px",f.pos=[e,n],f.floatingpos=[e,n]}};a(m).draggable({inertia:!1,allowFrom:".tgui-panel-titlebar-title",restrict:{restriction:"parent",endOnly:!1,elementRect:{top:0,left:0,bottom:1,right:1}},autoScroll:!1,onmove:n,onend:n}).resizable({edges:{right:!0,bottom:!0},restrictEdges:{outer:"parent",endOnly:!1},restrictSize:{min:{width:250,height:100}},inertia:!1,onmove:function(t){let e=t.rect.width,n=t.rect.height;m.style.width=e+"px",m.style.height=n+"px",f.size=[e,n],"float"==f.state?f.floatingsize=[e,n]:"left"!=f.state&&"right"!=f.state||(f.dockedheight=n),f.onResize(e,Math.max(0,n-22))}})}else if("icon"==t)"disabled"!=f.state&&(f.fallbackState=f.state),p.appendChild(f.icon.dom);else if("disabled"!=t)throw"[createPanel] invalid state: "+t;f.state=t,w(),e&&f.onResize(f.size[0],Math.max(0,f.size[1]-22))},"disabled"!=t.state&&f.dock(t.state,!0),f},e.removePanel=function(t){const n=e.panels.find((e=>e.panelID==t));n&&(a(n).unset(),u.removeChild(n.dom),e.panels=e.panels.filter((e=>e.panelID!=t)),o=o.filter((e=>e.panelID!=t)),s=s.filter((e=>e.panelID!=t)),l=l.filter((e=>e.panelID!=t)),(null==c?void 0:c.panelID)==t&&(c=null),v())},e.getPanel=function(t){return e.panels.find((e=>e.panelID==t))},e.savePanelData=g,e.preparePanels=function(t,e){u=t,p=e};let b=(new Date).getTime();function w(){(new Date).getTime()<b||(b=(new Date).getTime()+200,window.setTimeout((function(){b-=200,v()}),200))}e.arrangePanels=w,window.addEventListener("resize",w),window.setTimeout((function t(){if(u){let t=u.clientWidth,e=u.clientHeight;0!=t&&0!=e&&(t==f&&e==m||w())}window.setTimeout(t,200)}),1e3),e.forceArrange=function(){f=0,m=0}},6906:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setThemeConfig=e.subscribeOnThemeChange=e.getResolvedTheme=e.getThemeConfig=e.isThemeConfig=void 0,e.isThemeConfig=t=>["light","dark","default"].includes(t);let n="light";e.getThemeConfig=()=>n;let r="light";e.getResolvedTheme=()=>r;const i=new Set;e.subscribeOnThemeChange=function(t){return i.add(t),()=>i.delete(t)};const a=window.matchMedia("(prefers-color-scheme: dark)");e.setThemeConfig=function(t){n=t,function(){const t="default"===(e=n)?a.matches?"dark":"light":e;var e;if(r!==t){document.body.classList.remove(`${r}-theme`),"light"!==t&&document.body.classList.add(`${t}-theme`),r=t;for(const t of i)t()}}()}},8568:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.tutorial=void 0;const o=a(n(6042)),s=n(6519),l=n(8197),c=n(6694),d=n(8031);e.tutorial=function(){let t={};function e(){let e=JSON.stringify(t.state);localStorage.setItem("tscript.tutorial",e)}function n(e){let n=0;for(let r=0;r<t.data[e].sections.length&&(n=r,!t.data[e].sections[r].correct&&!t.data[e].sections[r].tests||t.state.completed[e+":"+r]);r++);return n}function r(i=null){let a=t.dom.scrollTop;if(t.state.unit<0){t.dom.innerHTML="",o.createElement({type:"h1",parent:t.dom,text:"Table of Contents"});let l=o.createElement({type:"ol",parent:t.dom});for(let h=0;h<t.data.length;h++){let u="",p=0,f=0;for(let g=0;g<t.data[h].sections.length;g++)t.state.completed[h+":"+g]?f++:(t.data[h].sections[g].correct||t.data[h].sections[g].tests)&&p++;f>0&&(u=p>0?" (started)":" (completed)");let m=t.data[h].title;o.createElement({type:"li",parent:l,classname:"tutorial-toc",text:m+u,click:function(i){t.state.unit=h,t.state.section=n(h),e(),r()}})}Object.keys(t.state.completed).length>0&&o.createElement({type:"button",classname:"tgui-modal-default-button tutorial-reset-button",parent:t.dom,text:"reset progress",click:function(n){o.msgBox({title:"Reset Progress",prompt:"Resetting marks all programming tasks in the tutorial as unsolved.\nAre you sure?",buttons:[{text:"Yes",onClick:n=>{t.state.completed={},e(),r()}},{text:"No"}]})}})}else{function y(t,e){t&&(t=function(t){let e=t.split("\n"),n="",r=1e6;for(let t=0;t<e.length;t++){let i=e[t];if(r>=1e6){for(let t=0;t<i.length;t++)if(" \t\r".indexOf(i[t])<0){n=i.substr(0,t),r=t;break}}else for(let t=0;t<i.length&&!(t>=r);t++)if(n[t]!=i[t]){r=t,n=n.substr(0,r);break}}let i="";for(let t=0;t<e.length;t++){let r=e[t];0==t&&r.length<=n.length||(r.length>n.length&&(i+=r.substr(n.length)),i+="\n")}for(;"\n"==i[0];)i=i.slice(1,i.length-1);for(;i.endsWith("\n\n");)i=i.slice(0,i.length-1);return i}(t),o.createElement({type:"button",classname:"tgui-modal-default-button tutorial-nav-button",parent:e,text:"reference solution",style:{width:"160px"},click:function(t){return function(e){let n=o.createModal({title:"reference solution",scalesize:[.6,.6],minsize:[400,250],buttons:[{text:"Close"}]});new d.Editor({language:"tscript",text:t,parent:n.content,readOnly:!0}),o.startModal(n)}}(t)}))}t.dom.innerHTML="",o.createElement({type:"button",classname:"tgui-modal-default-button tutorial-home-button",parent:t.dom,text:"table of contents",click:function(n){t.state.unit=-1,t.state.section=null,e(),r()}}),o.createElement({type:"h1",parent:t.dom,text:t.data[t.state.unit].title});for(let x=0;x<=t.state.section;x++){let k=t.data[t.state.unit].sections[x].content;k=c.doc.prepare(k,!0),o.createElement({type:"div",parent:t.dom,html:k}),x<t.state.section&&y(t.data[t.state.unit].sections[x].correct,t.dom)}let v=o.createElement({type:"div",parent:t.dom}),b=o.createElement({type:"div",classname:"tutorial-nav",parent:t.dom}),w=t.data[t.state.unit].sections[t.state.section];w.correct||w.test?(o.createElement({type:"button",classname:"tgui-modal-default-button tutorial-nav-button",parent:b,text:"solve task",click:function(i){t.clearErrorMessage(),s.evaluation.evaluate(w,t.getCode(),(function(i){i.error?(v.innerHTML="",o.createElement({type:"div",parent:v,classname:"tutorial-error",text:i.error,click:function(t){let e=o.createModal({title:"error details",scalesize:[.6,.6],minsize:[300,300],buttons:[{text:"Close"}]});i.details?e.content.innerHTML="<h1>"+i.error+"</h1><p>The following table lists events generated  by your code and by the reference solution, up to the first (essential) difference. That difference highlights the problem with your solution.</p>"+i.details:e.content.innerHTML="<h1>"+i.error+"</h1><p>Sorry, there are no further details available for this error.</p>",o.startModal(e)}})):(o.msgBox({title:"Success",prompt:"Congrats!\nYou have solved the task.",enterConfirms:!0}),t.state.completed[t.state.unit+":"+t.state.section]=!0,t.state.section+1==t.data[t.state.unit].sections.length?(t.state.unit++,t.state.section=n(t.state.unit)):t.state.section++,e(),r(50))}))}}),o.createElement({type:"button",classname:"tgui-modal-default-button tutorial-nav-button",parent:b,text:"skip task",click:function(i){t.state.section+1==t.data[t.state.unit].sections.length?(t.state.unit++,t.state.section=n(t.state.unit)):t.state.section++,e(),r(50)}}),y(w.correct,b)):(t.state.unit+1<t.data.length||t.state.section+1<t.data[t.state.unit].sections.length)&&o.createElement({type:"button",classname:"tgui-modal-default-button tutorial-nav-button",parent:b,text:"continue",click:function(i){t.state.section+1==t.data[t.state.unit].sections.length?(t.state.unit++,t.state.section=n(t.state.unit)):t.state.section++,e(),r()}})}t.dom.scrollTo({top:null===i?0:a+i,behavior:"smooth"})}return t.data=l.tutorialData,t.state={unit:0,section:0,completed:{}},t.dom=null,t.getCode=null,t.clearErrorMessage=null,t.showErrorMessage=null,t.init=function(n,i,a,o){t.dom=n,t.getCode=i,t.clearErrorMessage=a,t.showErrorMessage=o;let s=localStorage.getItem("tscript.tutorial");s?t.state=JSON.parse(s):e(),r()},t}()},58:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AssertionError=void 0;class n extends Error{constructor(t){super(),this.message=t,this.name="Assertion Error"}}e.AssertionError=n},150:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.errors=e.ErrorHelper=void 0;const r=n(5584),i=n(58),a=n(8467);class o{static errorTemplate(t){let n=t.split("/");o.assert(""===n[0],"[errorTemplate] invalid path: "+t);let r=e.errors;for(let e=1;e<n.length;e++)o.assert(r.hasOwnProperty(n[e]),"[errorTemplate] invalid path: "+t),r=r[n[e]];return new String(r)}static composeError(t,e){let n=o.errorTemplate(t).split("$$");o.assert(n.length===e.length+1);let r=n[0];for(let t=0;t<e.length;t++)r+=e[t]+n[t+1];return r}static getLocatedErrorMsg(t,e,n,i){const a=void 0!==e&&(0,r.fileIDToContextDependentFilename)(e);return t+(a?` in file '${a}'`:"")+(n?` in line ${n}`:"")+`: ${i}`}static getError(t,e=void 0,n=void 0,r=void 0,i=void 0,s=void 0){void 0===n&&(n=new Array),void 0===e&&(e=[]);let l=o.composeError(t,e),c="#/errors"+t,d=null,h=null,u=null;"string"==typeof r&&(d=r),"number"==typeof i&&(h=i),"number"==typeof s&&(u=s);for(let t=n.length-1;t>=0;t--){let e=n[t];for(let t=e.pe.length-1;t>=0;t--){let n=e.pe[t];if(n&&n.where){d=n.where.filename,h=n.where.line,u=n.where.ch;break}}if(null!==h)break}return new a.RuntimeError(l,null!=d?d:void 0,h,u,c)}static error(t,e=void 0,n=void 0){throw o.getError(t,e,n)}static ex2string(t){if(void 0===t)return"undefined";if(null===t)return"null";if("object"==typeof t){if(t.hasOwnProperty("message"))return t.message;if(t.hasOwnProperty("name"))return t.name}return String(t)}static assert(t,e=void 0){if(e=void 0===e?"TScript internal assertion failed":"TScript internal assertion failed; "+e,!t)throw new i.AssertionError(e)}}e.ErrorHelper=o,e.errors={syntax:{"se-1":"syntax error in floating point literal","se-2":"syntax error in string literal; closing double quotes '\"' expected before end-of-line","se-3":"syntax error in string literal; invalid Unicode escape sequence","se-4":"syntax error in string literal; invalid escape sequence '\\$$'","se-5":"syntax error; invalid character '$$'","se-6":"syntax error; 'super' cannot be used outside of a class declaration","se-7":"syntax error; 'super' cannot be used in a class without super class","se-8":"syntax error in super reference; dot '.' expected after 'super'","se-9":"syntax error in super reference; identifier expected after dot '.'","se-10":"syntax error in $$; name expected","se-13":"error in $$; $$ '$$' requires a 'this' object and hence cannot be accessed from a static context","se-14":"syntax error in argument list; positional argument follows named argument","se-15":"syntax error in argument list; expected comma ',' or closing parenthesis ')'","se-16":"error in function call; attempt to call a value of type '$$'; 'function' or 'type' expected","se-21":"operators are not allowed on the left-hand side of an assignment","se-22":"syntax error in expression; missing closing parenthesis ')'","se-23":"syntax error in integer literal: maximal value of 2147483647 exceeded","se-24":"syntax error in array; comma ',' or closing bracket ']' expected","se-25":"syntax error in array; unexpected end-of-file","se-26":"syntax error in dictionary; duplicate key '$$'","se-27":"syntax error in dictionary; comma ',' or closing brace '}' expected","se-28":"syntax error in dictionary key; string constant or identifier expected","se-29":"syntax error in dictionary; colon ':' expected","se-30":"syntax error in dictionary; unexpected end-of-file","se-31":"syntax error in closure parameter declaration; comma ',' or closing bracket ']' expected","se-32":"syntax error in closure parameter declaration; identifier expected as the parameter name","se-33":"syntax error in parameter declaration; identifier expected as the parameter name","se-35":"syntax error in anonymous function; opening bracket '[' or opening parenthesis '(' expected","se-36":"syntax error in $$; opening parenthesis '(' expected","se-37":"syntax error in parameter declaration; comma ',' or closing parenthesis ')' expected","se-38":"error in parameter declaration; default value must be a constant","se-40":"syntax error in $$; opening brace '{' expected","se-41":"syntax error in expression; unexpected keyword '$$', expression expected","se-42":"syntax error in expression; unexpected token '$$', expression expected","se-43":"syntax error in member access: identifier expected after the dot '.'","se-44":"syntax error in item access: closing bracket ']' expected","se-47":"syntax error; 'this' cannot be used in this context","se-48":"syntax error in assignment; semicolon ';' expected","se-49":"syntax error in expression; operator or semicolon ';' expected","se-50":"syntax error in variable declaration; identifier expected as the variable name","se-51":"syntax error in variable declaration; expected initializer '=', comma ',' or semicolon ';'","se-51b":"syntax error in variable declaration; expected comma ',' or semicolon ';'","se-52":"syntax error in function declaration; identifier expected as the function name","se-53":"syntax error in constructor declaration; 'super' expected after colon ':'","se-54":"syntax error in class declaration; identifier expected as the class name","se-55":"syntax error in access modifier: colon ':' expected after '$$'","se-56":"syntax error in class declaration; member declaration without access modifier","se-57":"syntax error in class declaration; attribute initializer must be a constant","se-58":"error in class declaration; the super class has a private constructor, therefore it cannot be sub-classed","se-59":"error in class declaration; constructor cannot be static","se-59b":"error in class declaration; the constructor was already declared","se-60":"error in class declaration; class declaration cannot be static","se-61":"error in class declaration; use directive cannot be static","se-62":"syntax error in class declaration; member declaration, use directive, or access modifier expected","se-63":"syntax error in namespace declaration; a namespace may be declared only at global scope or within another namespace","se-64":"syntax error in namespace declaration; identifier expected as the namespace name","se-65":"syntax error in use directive: keyword 'use' expected","se-66":"syntax error in use directive; 'namespace' and 'as' cannot be combined","se-67":"syntax error in use directive; identifier expected after 'as'","se-68":"syntax error in use directive; comma ',' or semicolon ';' expected","se-69":"syntax error in conditional statement: 'then' expected","se-70":"syntax error in for-loop: identifier expected as the loop variable","se-71":"syntax error in for-loop: 'in' expected","se-72":"syntax error in for-loop: keyword 'do' expected","se-73":"syntax error in for-loop; 'in' or 'do' expected","se-74":"syntax error in do-while-loop: 'while' expected","se-75":"syntax error in do-while-loop: semicolon ';' expected","se-76":"syntax error in while-do-loop: 'do' expected","se-77":"syntax error; 'break' statement must not appear outside a loop body","se-78":"syntax error; 'continue' statement must not appear outside a loop body","se-79":"syntax error in return; a constructor does not return a value","se-80":"syntax error in return; the program does not return a value","se-81":"syntax error in return; semicolon ';' expected","se-81b":"syntax error in break; semicolon ';' expected","se-81c":"syntax error in continue; semicolon ';' expected","se-82":"syntax error in try-catch statement: 'catch' expected","se-84":"syntax error in try-catch statement: 'var' expected after 'catch'","se-85":"syntax error in try-catch statement: identifier expected after 'var'","se-86":"syntax error in try-catch statement: 'do' expected after exception","se-87":"syntax error in throw; semicolon ';' expected","se-88":"syntax error; unexpected closing brace '}'","se-89":"syntax error; unexpected keyword '$$', statement expected","se-90":"syntax error; unexpected token '$$', statement expected","se-91":"syntax error in include; string literal expected","se-92":"syntax error in include; semicolon ';' expected"},"argument-mismatch":{"am-1":"argument type mismatch; parameter '$$' of '$$' must be a $$; found '$$'","am-2":"cannot logically negate type '$$'","am-3":"cannot apply unary plus to type '$$'","am-4":"cannot arithmetically negate type '$$'","am-5":"cannot add '$$' and '$$'","am-6":"cannot subtract '$$' from '$$'","am-7":"cannot multiply '$$' with '$$'","am-8":"cannot divide '$$' by '$$'","am-9":"cannot compute the remainder '$$' by '$$'","am-10":"cannot compute power of '$$' by '$$'","am-11":"arguments of operator : must be integers","am-12":"cannot apply logic operator '$$' to '$$' and '$$'","am-13":"cannot convert infinity or not-a-number to integer","am-14":"failed to parse string into an integer","am-15":"division by zero","am-16":"cannot order type '$$'","am-16b":"cannot order types '$$' and '$$'","am-17":"cannot construct an array of negative size","am-18":"parameter 'position' of 'Array.insert' is out of range; position is $$, array size is $$","am-18b":"'Array.pop' cannot be applied to an empty array","am-19":"the 'comparator' function passed to 'Array.sort' must return a numeric value, found '$$'","am-20":"invalid string index '$$' of type '$$', 'Integer' or 'Range' expected","am-21":"string index '$$' out of range; index must not be negative","am-22":"string index '$$' out of range; must be less than the string size of $$","am-23":"array index '$$' out of range; index must not be negative","am-24":"array index '$$' out of range; must be less than array size of $$","am-25":"invalid array index '$$' of type '$$', 'integer' expected","am-26":"invalid array index '$$' of type '$$', 'integer' or 'range' expected","am-27":"dictionary index '$$' is not a key of the dictionary","am-28":"invalid dictionary index of type '$$', 'string' expected","am-29":"range index '$$' out of range; must be non-negative and less than the range size of $$","am-30":"invalid range index '$$' of type '$$', 'Integer' or 'Range' expected","am-31":"attempt to access an item of type '$$'; string, array, dictionary, or range expected","am-31b":"attempt to access an item of type '$$'; string, array, or dictionary expected","am-32":"cannot assign to $$","am-33":"condition in conditional statement is not boolean but rather of type '$$'","am-34":"attempt to loop over the non-iterable type '$$', 'Range' or 'Array' expected","am-35":"error in for-loop; '$$' does not refer to a variable, but to a $$","am-36":"condition in do-while-loop is not boolean but rather of type '$$'","am-37":"condition in while-do-loop is not boolean but rather of type '$$'","am-38":"loading the value failed, key '$$' does not exist","am-39":"saving the value failed","am-40":"invalid event name '$$'","am-41":"argument handler passed to setEventHandler must be a function with exactly one parameter","am-42":"deepcopy failed due to $$","am-43":"infinite recursion due to recursive data structure","am-44":"channel arrays have different sizes","am-44b":"sample frequency out of range","am-44c":"number of sound channels out of range","am-45":"$$ exceeded allowed range $$","am-46":"invalid resource string","am-47":"wrong array size","am-48":"file '$$' not found","am-49":"radius cannot be negative","am-50":"failed to initialize value from uninitialized counterpart"},name:{"ne-1":"error in function call; named parameter '$$' is already specified in call to function '$$'","ne-2":"error in function call; named parameter '$$' not found in function '$$'","ne-3":"error in function call; too many arguments for call to function '$$'","ne-4":"error in function call; parameter number $$ is missing when calling function '$$'","ne-5":"error in $$; '$$' is not defined","ne-6":"error in $$; cannot access variable '$$', which is declared in a different class","ne-7":"error in $$; cannot access variable '$$', which is declared in a scope with different lifetime","ne-8":"error in $$; '$$' cannot be accessed because it is a private member of type '$$'","ne-10":"name '$$' does not refer to a variable, function, or type","ne-11":"a name referring to a namespace is not allowed in this context","ne-12":"type '$$' does not have a public static member '$$'","ne-13":"type '$$' does not have a public member '$$'","ne-14":"declaration of variable '$$' conflicts with previous declaration; double use of the same name","ne-15":"declaration of function '$$' conflicts with previous declaration; double use of the same name","ne-16":"declaration of parameter '$$' conflicts with previous declaration; double use of the same name","ne-17":"declaration of closure parameter '$$' conflicts with previous declaration; double use of the same name","ne-18":"declaration of class '$$' conflicts with previous declaration; double use of the same name","ne-19":"declaration of namespace '$$' conflicts with previous declaration; double use of the same name","ne-21":"error in constructor declaration; super constructor call without a super class","ne-22":"error in super class declaration; '$$' does not refer to a type","ne-23":"error in use directive; '$$' is not a namespace","ne-24":"use of identifier '$$' conflicts with previous declaration; double use of the same name","ne-25":"error in constructor call; the constructor of type '$$' is declared $$","ne-26":"error in super class declaration; class '$$' inherits itself","ne-28":"failed to statically resolve loop variable name","ne-29":"variable '$$' was used before it was initialized","ne-30":"cannot access non-static member '$$' without an object"},logic:{"le-1":"too much recursion","le-2":"enterEventMode failed; the program is already in event mode","le-3":"quitEventMode failed; the program is not in event mode"},user:{"ue-1":"assertion failed; $$","ue-2":"runtime error; $$","ue-3":"uncaught exception; $$"},style:{"ste-1":"coding style violation; invalid line indentation","ste-2":"coding style violation; inconsistent block indentation","ste-3":"coding style violation; the $$ name '$$' should start with a lowercase letter or with an underscore","ste-4":"coding style violation; the class name '$$' should start with a capital letter"},internal:{"ie-1":"internal parser error; $$","ie-2":"internal interpreter error; $$"}}},8467:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RuntimeError=void 0;class n extends Error{constructor(t,e,n,r,i){super(),this.message=t,this.name="Runtime Error",this.filename=null!=e?e:null,this.line=null!=n?n:null,this.ch=null!=r?r:null,this.href=null!=i?i:""}}e.RuntimeError=n},374:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.asConstant=void 0;const r=n(9641),i=n(3163),a=n(697),o=n(8397),s=n(3852);e.asConstant=function t(e,n){if("constant"===e.petype)return e;if("array"===e.petype){let a=new Array;for(let r=0;r<e.elements.length;r++){let i=t(e.elements[r],n);if(null===i)return null;a.push(i.typedvalue)}return{petype:"constant",where:e.where,typedvalue:{type:(0,s.get_program)(e).types[o.Typeid.typeid_array],value:{b:a}},step:i.constantstep,sim:r.simfalse}}if("dictionary"===e.petype){let a={};for(let r=0;r<e.keys.length;r++){let i=t(e.values[r],n);if(null===i)return null;a["#"+e.keys[r]]=i.typedvalue}return{petype:"constant",where:e.where,typedvalue:{type:(0,s.get_program)(e).types[o.Typeid.typeid_dictionary],value:{b:a}},step:i.constantstep,sim:r.simfalse}}if("left-unary operator "===e.petype.substring(0,20)){let o=t(e.argument,n);if(null===o)return null;let s=e.petype.substring(20);return{petype:"constant",where:e.where,typedvalue:a.left_unary_operator_impl[s].call(n,o.typedvalue),step:i.constantstep,sim:r.simfalse}}if("binary operator "===e.petype.substring(0,16)){let o=t(e.lhs,n);if(null===o)return null;let s=t(e.rhs,n);if(null===s)return null;let l=e.petype.substring(16);return{petype:"constant",where:e.where,typedvalue:a.binary_operator_impl[l].call(n,o.typedvalue,s.typedvalue),step:i.constantstep,sim:r.simfalse}}return null}},7976:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.data2arraybuffer=e.checkURI=void 0,e.checkURI=function(t){if("data:"!=t.substring(0,5))return null;let e=t.split(",");if(2!=e.length)return null;let n=e[0].substring(5).split(";");return n.length>1&&(n.length>2||"base64"!=n[1])?null:n[0]},e.data2arraybuffer=function(t){if("data:"!=t.substring(0,5))throw"invalid data URI";let e=t.split(",");if(2!=e.length)throw"invalid data URI";let n=e[0].substring(5).split(";");if(n.length>1&&(n.length>2||"base64"!=n[1]))throw"invalid data URI";let r=n[0],i=atob(e[1]),a=new ArrayBuffer(i.length),o=new Uint8Array(a);for(let t=0;t<i.length;t++)o[t]=i.charCodeAt(t);return[a,r]}},3852:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.get_context=e.get_type=e.get_function=e.get_program=void 0,e.get_program=function(t){for(;t.parent;)t=t.parent;return t},e.get_function=function(t){for(;;){if("function"===t.petype||"method"===t.petype)return t;if("type"===t.petype)return null;if(!t.parent)return t;t=t.parent}},e.get_type=function(t){for(;t;){if("type"===t.petype)return t;t=t.parent}return null},e.get_context=function(t){for(;;){if("function"===t.petype||"method"===t.petype||"type"===t.petype||!t.parent)return t;t=t.parent}}},8449:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.recApply=void 0;const r=n(8397);e.recApply=function(t,e,n){return function t(i,a){if(i.type.id===r.Typeid.typeid_array){if(a.has(i))throw"recursive data structure";let e=new Set(a);e.add(i);let r=Array();for(let n=0;n<i.value.b.length;n++){let a=t.call(this,i.value.b[n],e);r.push(a)}return n.call(this,r)}if(i.type.id===r.Typeid.typeid_dictionary){if(a.has(i))throw"recursive data structure";let e=new Set(a);e.add(i);let r={};for(let n in i.value.b){if(!i.value.b.hasOwnProperty(n))continue;let a=t.call(this,i.value.b[n],e);r[n]=a}return n.call(this,r)}return e.call(this,i)}.call(this,t,new Set)}},9641:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.callsim=e.simtrue=e.simfalse=void 0,e.simfalse=()=>!1,e.simtrue=()=>!0,e.callsim=function(){let t=this.stack[this.stack.length-1],e=t.pe[t.pe.length-1];return t.ip[t.ip.length-1]===e.arguments.length+1}},3163:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.callstep=e.constructorstep=e.scopestep=e.constantstep=void 0;const r=n(150),i=n(8706),a=n(8397),o=n(6853);e.constantstep=function(){let t=this.stack[this.stack.length-1],e=t.pe[t.pe.length-1];return t.temporaries.push(o.copyconstant.call(this,e.typedvalue)),t.pe.pop(),t.ip.pop(),!1},e.scopestep=function(){let t=this.stack[this.stack.length-1],e=t.pe[t.pe.length-1],n=t.ip[t.ip.length-1];return n<e.commands.length?(e.commands[n].declaration||(t.pe.push(e.commands[n]),t.ip.push(-1)),!1):(t.pe.pop(),t.ip.pop(),"function"===e.petype?(this.stack.pop(),this.stack[this.stack.length-1].temporaries.push({type:this.program.types[a.Typeid.typeid_null],value:{b:null}}),!1):"global scope"===e.petype&&(this.stack.pop(),!1))},e.constructorstep=function(){let t=this.stack[this.stack.length-1],e=t.pe[t.pe.length-1],n=t.ip[t.ip.length-1];return 0===n?(e.hasOwnProperty("supercall")&&(t.pe.push(e.supercall),t.ip.push(-1)),!1):n<e.commands.length+1?(e.commands[n-1].declaration||(t.pe.push(e.commands[n-1]),t.ip.push(-1)),!1):(t.pe.pop(),t.ip.pop(),this.stack.pop(),!1)},e.callstep=function(){let t=this.stack[this.stack.length-1],e=t.pe[t.pe.length-1],n=t.ip[t.ip.length-1],s=e.arguments.length;if(0===n)return t.pe.push(e.base),t.ip.push(-1),!1;if(n<=s)return t.pe.push(e.arguments[n-1]),t.ip.push(-1),!1;if(n===s+1){let n=new Array(s);for(let e=0;e<s;e++)n[s-1-e]=t.temporaries.pop();let l=t.temporaries.pop(),c=null,d=null;if(i.TScript.isDerivedFrom(l.type,a.Typeid.typeid_function))d=l.value.b.func,l.value.b.hasOwnProperty("object")&&(c=l.value.b.object);else if(i.TScript.isDerivedFrom(l.type,a.Typeid.typeid_type))if(r.ErrorHelper.assert(l.value.b.hasOwnProperty("class_constructor"),"[callstep] internal error; type does not have a constructor"),d=l.value.b.class_constructor,"super call"===e.petype)c=t.object;else{let e=l.value.b;if(r.ErrorHelper.assert("type"===e.petype,"[callstep] cannot find class of constructor"),c={type:e,value:{}},e.objectsize>0){c.value.a=[];let t={type:this.program.types[a.Typeid.typeid_null],value:{b:null}};for(let n=0;n<e.objectsize;n++)c.value.a.push(t)}let n=e;for(;n&&n.variables;){for(let t=0;t<n.variables.length;t++)n.variables[t].hasOwnProperty("initializer")&&(c.value.a[n.variables[t].id]=o.copyconstant.call(this,n.variables[t].initializer.typedvalue));n=n.superclass}t.temporaries.push(c)}else r.ErrorHelper.error("/syntax/se-16",[i.TScript.displayname(l.type)],this.stack);let h=d.params.length,u=new Array(h);for(let t=0;t<s;t++)if("named argument"===e.arguments[t].petype){let a=e.arguments[t].name,o=!1;for(let e=0;e<h;e++)if(d.params[e].hasOwnProperty("name")&&d.params[e].name===a){void 0!==u[e]&&r.ErrorHelper.error("/name/ne-1",[a,i.TScript.displayname(d)],this.stack),u[e]=n[t],o=!0;break}o||r.ErrorHelper.error("/name/ne-2",[a,i.TScript.displayname(d)],this.stack)}else t<u.length?u[t]=n[t]:r.ErrorHelper.error("/name/ne-3",[i.TScript.displayname(d)],this.stack);for(let t=0;t<h;t++)void 0===u[t]&&(d.params[t].hasOwnProperty("defaultvalue")?u[t]=o.copyconstant.call(this,d.params[t].defaultvalue):r.ErrorHelper.error("/name/ne-4",[t+1,i.TScript.displayname(d)],this.stack));l.value.b.hasOwnProperty("enclosed")&&(u=l.value.b.enclosed.concat(u));{let t={pe:[d],ip:[-1],temporaries:[],variables:u,object:null,enclosed:null};c&&(t.object=c),l.value.b.hasOwnProperty("enclosed")&&(t.enclosed=l.value.b.enclosed),this.stack.push(t),this.stack.length>=this.maxStackSize&&r.ErrorHelper.error("/logic/le-1",[],this.stack)}return!0}return t.pe.pop(),t.ip.pop(),!1}},8397:(t,e)=>{"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.Typeid=void 0,(n=e.Typeid||(e.Typeid={}))[n.typeid_null=0]="typeid_null",n[n.typeid_boolean=1]="typeid_boolean",n[n.typeid_integer=2]="typeid_integer",n[n.typeid_real=3]="typeid_real",n[n.typeid_string=4]="typeid_string",n[n.typeid_array=5]="typeid_array",n[n.typeid_dictionary=6]="typeid_dictionary",n[n.typeid_function=7]="typeid_function",n[n.typeid_range=8]="typeid_range",n[n.typeid_type=9]="typeid_type",n[n.typeid_class=10]="typeid_class"},8706:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TScript=void 0;const r=n(150),i=n(8449),a=n(8397),o=n(5939);class s{static displayname(t){return t.hasOwnProperty("displayname")?t.displayname:t.hasOwnProperty("name")?t.name:""}static isDerivedFrom(t,e){if("number"==typeof e)for(;t;){if(t.id===e)return!0;t=t.superclass}else if("string"==typeof e)for(;t;){if(s.displayname(t)===e)return!0;t=t.superclass}return!1}static isNumeric(t){for(;t;){if(s.isDerivedFrom(t,a.Typeid.typeid_integer)||s.isDerivedFrom(t,a.Typeid.typeid_real))return!0;t=t.superclass}return!1}static toString(t){try{return i.recApply.call(this,t,(function(t){if(s.isDerivedFrom(t.type,a.Typeid.typeid_null))return"null";if(s.isDerivedFrom(t.type,a.Typeid.typeid_boolean))return t.value.b?"true":"false";if(s.isDerivedFrom(t.type,a.Typeid.typeid_integer))return t.value.b.toString();if(s.isDerivedFrom(t.type,a.Typeid.typeid_real))return t.value.b.toString();if(s.isDerivedFrom(t.type,a.Typeid.typeid_string))return t.value.b;if(s.isDerivedFrom(t.type,a.Typeid.typeid_function)){let e="<Function";return t.value.b.func.displayname?e+=" "+t.value.b.func.displayname:t.value.b.func.name?e+=" "+t.value.b.func.name:t.value.b.func.where&&(e+=" anonymous "+t.value.b.func.where.line+":"+t.value.b.func.where.ch),e+=">",e}return s.isDerivedFrom(t.type,a.Typeid.typeid_range)?t.value.b.begin.toString()+":"+t.value.b.end.toString():s.isDerivedFrom(t.type,a.Typeid.typeid_type)?"<Type "+s.displayname(t.value.b)+">":"<"+s.displayname(t.type)+">"}),(function(t){if(Array.isArray(t)){let e="[";for(let n=0;n<t.length;n++)(n+=0)&&(e+=","),e+=t[n];return e+="]",e}if("object"==typeof t&&t.constructor===Object){let e="{",n=!0;for(let r in t)t.hasOwnProperty(r)&&(n?n=!1:e+=",",e+=r.substring(1)+":"+t[r]);return e+="}",e}r.ErrorHelper.assert(!1,"[TScript.toString] internal error")}))}catch(t){if("recursive data structure"!==t)throw t;this.error("/argument-mismatch/am-43")}}static isInt32(t){return Number.isInteger(t)&&t>=-2147483648&&t<=2147483647}static mul32(t,e){let n=65535&t;return((t-n)*e|0)+n*e|0}static mod(t,e){if(0===e)return this.error("/argument-mismatch/am-15"),0;{let n=t-e*Math.floor(t/e);return n<0&&(n+=Math.abs(e)),n}}static jsObject2typed(t,e){switch(typeof e){case"boolean":return{type:t.types[a.Typeid.typeid_boolean],value:{b:e}};case"number":return e%1==0&&e>=-2147483648&&e<=2147483647?{type:t.types[a.Typeid.typeid_integer],value:{b:e}}:{type:t.types[a.Typeid.typeid_real],value:{b:e}};case"object":if(null===e)return{type:t.types[a.Typeid.typeid_null],value:{b:null}};if(Array.isArray(e))return{type:t.types[a.Typeid.typeid_array],value:{b:e.map((e=>s.jsObject2typed(t,e)))}};break;case"string":return{type:t.types[a.Typeid.typeid_string],value:{b:e}};case"undefined":return{type:t.types[a.Typeid.typeid_null],value:{b:null}}}throw"value could not be converted."}static json2typed(t){let e;e=this instanceof o.Interpreter?this.program:this;let n=typeof t;if(null===t)return{type:e.types[a.Typeid.typeid_null],value:{b:t}};if("boolean"===n)return{type:e.types[a.Typeid.typeid_boolean],value:{b:t}};if("number"===n)return s.isInt32(t)?{type:e.types[a.Typeid.typeid_integer],value:{b:t}}:{type:e.types[a.Typeid.typeid_real],value:{b:t}};if("string"===n)return{type:e.types[a.Typeid.typeid_string],value:{b:t}};if(Array.isArray(t)){let n=Array();for(let r=0;r<t.length;r++)n.push(s.json2typed.call(e,t[r]));return{type:e.types[a.Typeid.typeid_array],value:{b:n}}}if("object"===n&&t.constructor===Object){let n={};for(let r in t)t.hasOwnProperty(r)&&(n["#"+r]=s.json2typed.call(e,t[r]));return{type:e.types[a.Typeid.typeid_dictionary],value:{b:n}}}throw new Error("[json2typed] invalid argument")}static typed2json(t){return i.recApply.call(this,t,(function(t){return r.ErrorHelper.assert(t.type.id===a.Typeid.typeid_null||t.type.id===a.Typeid.typeid_boolean||t.type.id===a.Typeid.typeid_integer||t.type.id===a.Typeid.typeid_real||t.type.id===a.Typeid.typeid_string,"[typed2json] invalid argument"),t.value.b}),(function(t){if(Array.isArray(t))return t;{let e={};for(let n in t)t.hasOwnProperty(n)&&(e[n.substring(1)]=t[n]);return e}}))}static equal(t,e){let n=function(t,e,r){if(t===e)return!0;if(t.type===e.type&&t.value===e.value)return!0;if(s.isDerivedFrom(t.type,a.Typeid.typeid_null)&&s.isDerivedFrom(e.type,a.Typeid.typeid_null))return!0;if(s.isDerivedFrom(t.type,a.Typeid.typeid_boolean)&&s.isDerivedFrom(e.type,a.Typeid.typeid_boolean))return t.value.b===e.value.b;if(s.isNumeric(t.type)&&s.isNumeric(e.type))return isNaN(t.value.b)&&isNaN(e.value.b)||t.value.b===e.value.b;if(s.isDerivedFrom(t.type,a.Typeid.typeid_string)&&s.isDerivedFrom(e.type,a.Typeid.typeid_string))return t.value.b===e.value.b;if(s.isDerivedFrom(t.type,a.Typeid.typeid_array)&&s.isDerivedFrom(e.type,a.Typeid.typeid_array)){if(t.value.b.length!==e.value.b.length)return!1;if(r.has(t))throw"recursive data structure";if(r.has(e))throw"recursive data structure";let i=new Set(r);i.add(t),i.add(e);for(let r=0;r<t.value.b.length;r++)if(!n.call(this,t.value.b[r],e.value.b[r],i))return!1;return!0}if(s.isDerivedFrom(t.type,a.Typeid.typeid_dictionary)&&s.isDerivedFrom(e.type,a.Typeid.typeid_dictionary)){if(r.has(t))throw"recursive data structure";if(r.has(e))throw"recursive data structure";let i=new Set(r);i.add(t),i.add(e);for(let n in t.value.b)if(t.value.b.hasOwnProperty(n)&&!e.value.b.hasOwnProperty(n))return!1;for(let r in e.value.b)if(e.value.b.hasOwnProperty(r)){if(!t.value.b.hasOwnProperty(r))return!1;if(!n.call(this,t.value.b[r],e.value.b[r],i))return!1}return!0}if(s.isDerivedFrom(t.type,a.Typeid.typeid_function)&&s.isDerivedFrom(e.type,a.Typeid.typeid_function)){if(t.value.b.func!==e.value.b.func)return!1;if(t.value.b.hasOwnProperty("object")&&t.value.b.object!==e.value.b.object)return!1;if(t.value.b.hasOwnProperty("enclosed")){if(r.has(t))throw"recursive data structure";if(r.has(e))throw"recursive data structure";let i=new Set(r);i.add(t),i.add(e);for(let r in e.value.b.enclosed)if(e.value.b.enclosed.hasOwnProperty(r)&&!n.call(this,t.value.b.enclosed[r],e.value.b.enclosed[r],i))return!1}return!0}return s.isDerivedFrom(t.type,a.Typeid.typeid_range)&&s.isDerivedFrom(e.type,a.Typeid.typeid_range)?t.value.b.begin===e.value.b.begin&&t.value.b.end===e.value.b.end:s.isDerivedFrom(t.type,a.Typeid.typeid_type)&&s.isDerivedFrom(e.type,a.Typeid.typeid_type)?t.value.b.id===e.value.b.id:t===e};try{return n.call(this,t,e,new Set)}catch(t){if("recursive data structure"!==t)throw t;this.error("/argument-mismatch/am-43")}}static order(t,e){try{return function t(e,n,r){if(e===n)return 0;if(s.isDerivedFrom(e.type,a.Typeid.typeid_null)&&s.isDerivedFrom(n.type,a.Typeid.typeid_null))return 0;if(s.isNumeric(e.type)&&s.isNumeric(n.type))return e.value.b<=n.value.b?e.value.b<n.value.b?-1:0:1;if(s.isDerivedFrom(e.type,a.Typeid.typeid_string)&&s.isDerivedFrom(n.type,a.Typeid.typeid_string))return e.value.b<=n.value.b?e.value.b<n.value.b?-1:0:1;if(s.isDerivedFrom(e.type,a.Typeid.typeid_array)&&s.isDerivedFrom(n.type,a.Typeid.typeid_array)){if(r.has(e))throw"recursive data structure";if(r.has(n))throw"recursive data structure";let i=new Set(r);i.add(e),i.add(n);let a=Math.min(e.value.b.length,n.value.b.length);for(let r=0;r<a;r++){let a=t.call(this,e.value.b[r],n.value.b[r],i);if(0!==a)return a}return e.value.b.length>a?1:n.value.b.length>a?-1:0}e.type.id===n.type.id?this.error("/argument-mismatch/am-16",[s.displayname(e.type)]):this.error("/argument-mismatch/am-16b",[s.displayname(e.type),s.displayname(n.type)])}.call(this,t,e,new Set)}catch(t){if("recursive data structure"!==t)throw t;this.error("/argument-mismatch/am-43")}}static previewValue(t,e=1){if(void 0===e&&(e=1),!t||!t.hasOwnProperty("type")||!t.hasOwnProperty("value")||void 0===t.value.a&&void 0===t.value.b)return"[no value]";if(t.type.id===a.Typeid.typeid_null)return"null";if(t.type.id===a.Typeid.typeid_boolean)return t.value.b?"true":"false";if(t.type.id===a.Typeid.typeid_integer)return t.value.b.toString();if(t.type.id===a.Typeid.typeid_real){let e=t.value.b.toString();return e.indexOf(".")<0&&e.indexOf("e")<0&&e.indexOf("E")<0&&(e+=".0"),e}if(t.type.id===a.Typeid.typeid_string)return'"'+t.value.b+'"';if(t.type.id===a.Typeid.typeid_array){if(0===e)return"[…]";let n="[",r=Math.min(t.value.b.length,3);for(let e=0;e<r;e++)(e+=0)&&(n+=","),n+=s.previewValue.call(this,t.value.b[e],0);return t.value.b.length>r&&(n+=",…"),n+="]",n}if(t.type.id===a.Typeid.typeid_dictionary){if(0===e)return"{…}";let n="{",r=0;for(let e in t.value.b)if(t.value.b.hasOwnProperty(e)){if(3===r){n+=",…";break}r>0&&(n+=","),n+=e.substring(1)+":"+s.previewValue.call(this,t.value.b[e],0),r++}return n+="}",n}if(t.type.id===a.Typeid.typeid_function){let e="<Function ";return t.value.b.hasOwnProperty("object")&&(r.ErrorHelper.assert("type"===t.value.b.func.parent.petype,"[previewValue] invalid method object"),e+=s.displayname(t.value.b.func.parent)+"."),t.value.b.func.displayname?e+=t.value.b.func.displayname:t.value.b.func.name?e+=t.value.b.func.name:(e+="anonymous",t.value.b.func.where&&(e+=" "+t.value.b.func.where.line+":"+t.value.b.func.where.ch)),e+=">",e}if(t.type.id===a.Typeid.typeid_range)return t.value.b.begin.toString()+":"+t.value.b.end.toString();if(t.type.id===a.Typeid.typeid_type)return"<Type "+s.displayname(t.value.b)+">";{let n="<"+s.displayname(t.type);if(0===e)return n+">";let r=0,i=t.type;for(;i&&i.variables;){for(let e=0;e<i.variables.length;e++){if(3===r){n+=" …";break}n+=" "+s.displayname(i.variables[e])+"="+s.previewValue(t.value.a[i.variables[e].id],0),r++}i=i.superclass}return n+=">",n}}}e.TScript=s},6025:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createDefaultServices=e.fakeLocalStorage=void 0;let n="undefined"==typeof window?void 0:window.AudioContext||window.webkitAudioContext;e.fakeLocalStorage={map:new Map,keys:function(){let t,e=new Array,n=this.map.keys();for(;!(t=n.next()).done;)e.push(t.value);return e},setItem:function(t,e){this.map.set(t,e)},getItem:function(t){let e=this.map.get(t);return void 0===e?null:e}},e.createDefaultServices=function(){return{turtle:{x:0,y:0,angle:0,down:!0,rgb:"rgb(0,0,0)",reset:function(t,e,n,r){this.turtle.x=t,this.turtle.y=e,this.turtle.angle=n,this.turtle.down=r,this.turtle.rgb="rgb(0,0,0)"},move:function(t){let e=Math.PI/180*this.turtle.angle,n=Math.sin(e),r=Math.cos(e),i=this.turtle.x+t*n,a=this.turtle.y+t*r;if(this.turtle.down&&this.turtle.dom){let t=this.turtle.dom.getContext("2d");t.lineWidth=1,t.strokeStyle=this.turtle.rgb,t.beginPath(),t.moveTo(300+3*this.turtle.x,300-3*this.turtle.y),t.lineTo(300+3*i,300-3*a),t.stroke()}this.turtle.x=i,this.turtle.y=a},turn:function(t){this.turtle.angle=(this.turtle.angle+t)%360},color:function(t,e,n){t<0?t=0:t>1&&(t=1),e<0?e=0:e>1&&(e=1),n<0?n=0:n>1&&(n=1),this.turtle.rgb="rgb("+Math.round(255*t)+","+Math.round(255*e)+","+Math.round(255*n)+")"},pen:function(t){this.turtle.down=t}},canvas:{target:null,font_size:16,setDrawingTarget:function(t){this.canvas.target=t},width:function(){return(this.canvas.target?this.canvas.target:this.canvas.dom)?(this.canvas.target?this.canvas.target:this.canvas.dom).width:0},height:function(){return(this.canvas.target?this.canvas.target:this.canvas.dom)?(this.canvas.target?this.canvas.target:this.canvas.dom).height:0},setLineWidth:function(t){let e=this.canvas.target?this.canvas.target:this.canvas.dom;e&&e.getContext&&(e.getContext("2d").lineWidth=t)},setLineColor:function(t,e,n,r){let i=this.canvas.target?this.canvas.target:this.canvas.dom;if(!i||!i.getContext)return;let a=i.getContext("2d"),o=Math.min(1,Math.max(0,t)),s=Math.min(1,Math.max(0,e)),l=Math.min(1,Math.max(0,n)),c=Math.min(1,Math.max(0,r));a.strokeStyle="rgba("+Math.round(255*o)+","+Math.round(255*s)+","+Math.round(255*l)+","+c+")"},setFillColor:function(t,e,n,r){let i=this.canvas.target?this.canvas.target:this.canvas.dom;if(!i||!i.getContext)return;let a=i.getContext("2d"),o=Math.min(1,Math.max(0,t)),s=Math.min(1,Math.max(0,e)),l=Math.min(1,Math.max(0,n)),c=Math.min(1,Math.max(0,r));a.fillStyle="rgba("+Math.round(255*o)+","+Math.round(255*s)+","+Math.round(255*l)+","+c+")"},setOpacity:function(t){let e=this.canvas.target?this.canvas.target:this.canvas.dom;e&&e.getContext&&(e.getContext("2d").globalAlpha=t)},setFont:function(t,e){let n=this.canvas.target?this.canvas.target:this.canvas.dom;n&&n.getContext&&(n.getContext("2d").font=e+"px "+t,this.canvas.font_size=e)},setTextAlign:function(t){let e=this.canvas.target?this.canvas.target:this.canvas.dom;e&&e.getContext&&(e.getContext("2d").textAlign=t)},clear:function(){let t=this.canvas.target?this.canvas.target:this.canvas.dom;if(!t||!t.getContext)return;let e=t.getContext("2d");e.setTransform(1,0,0,1,0,0),e.fillRect(0,0,(this.canvas.target?this.canvas.target:this.canvas.dom).width,(this.canvas.target?this.canvas.target:this.canvas.dom).height)},line:function(t,e,n,r){let i=this.canvas.target?this.canvas.target:this.canvas.dom;if(!i||!i.getContext)return;let a=i.getContext("2d");a.beginPath(),a.moveTo(t,e),a.lineTo(n,r),a.stroke()},rect:function(t,e,n,r){let i=this.canvas.target?this.canvas.target:this.canvas.dom;if(!i||!i.getContext)return;let a=i.getContext("2d");a.beginPath(),a.rect(t,e,n,r),a.stroke()},fillRect:function(t,e,n,r){let i=this.canvas.target?this.canvas.target:this.canvas.dom;i&&i.getContext&&i.getContext("2d").fillRect(t,e,n,r)},frameRect:function(t,e,n,r){let i=this.canvas.target?this.canvas.target:this.canvas.dom;if(!i||!i.getContext)return;let a=i.getContext("2d");a.beginPath(),a.rect(t,e,n,r),a.fill(),a.stroke()},circle:function(t,e,n){let r=this.canvas.target?this.canvas.target:this.canvas.dom;if(!r||!r.getContext)return;let i=r.getContext("2d");i.beginPath(),i.arc(t,e,n,0,2*Math.PI,!1),i.stroke()},fillCircle:function(t,e,n){let r=this.canvas.target?this.canvas.target:this.canvas.dom;if(!r||!r.getContext)return;let i=r.getContext("2d");i.beginPath(),i.arc(t,e,n,0,2*Math.PI,!1),i.fill()},frameCircle:function(t,e,n){let r=this.canvas.target?this.canvas.target:this.canvas.dom;if(!r||!r.getContext)return;let i=r.getContext("2d");i.beginPath(),i.arc(t,e,n,0,2*Math.PI,!1),i.fill(),i.stroke()},curve:function(t,e){let n=this.canvas.target?this.canvas.target:this.canvas.dom;if(!n||!n.getContext)return;let r=n.getContext("2d");r.beginPath();let i=t.length;if(i>0){let e=t[0];r.moveTo(e[0],e[1]);for(let e=1;e<i;e++){let n=t[e];r.lineTo(n[0],n[1])}}e&&r.closePath(),r.stroke()},fillArea:function(t){let e=this.canvas.target?this.canvas.target:this.canvas.dom;if(!e||!e.getContext)return;let n=e.getContext("2d");n.beginPath();let r=t.length;if(r>0){let e=t[0];n.moveTo(e[0],e[1]);for(let e=1;e<r;e++){let r=t[e];n.lineTo(r[0],r[1])}}n.closePath(),n.fill()},frameArea:function(t){let e=this.canvas.target?this.canvas.target:this.canvas.dom;if(!e||!e.getContext)return;let n=e.getContext("2d");n.beginPath();let r=t.length;if(r>0){let e=t[0];n.moveTo(e[0],e[1]);for(let e=1;e<r;e++){let r=t[e];n.lineTo(r[0],r[1])}}n.closePath(),n.fill(),n.stroke()},text:function(t,e,n){let r=this.canvas.target?this.canvas.target:this.canvas.dom;if(!r||!r.getContext)return;let i=r.getContext("2d");i.textBaseline="top";let a=n.split("\n");for(let n=0;n<a.length;n++)i.fillText(a[n],t,e),e+=this.canvas.font_size},getPixel:function(t,e){let n=this.canvas.target?this.canvas.target:this.canvas.dom;return n&&n.getContext?n.getContext("2d").getImageData(0|t,0|e,1,1).data:[0,0,0,0]},setPixel:function(t,e,n){let r=this.canvas.target?this.canvas.target:this.canvas.dom;if(!r||!r.getContext)return;let i=r.getContext("2d"),a=i.getImageData(0|t,0|e,1,1),o=a.data;o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],i.putImageData(a,0|t,0|e)},paintImage:function(t,e,n){let r=this.canvas.target?this.canvas.target:this.canvas.dom;if(!r||!r.getContext)return;let i=r.getContext("2d");n||(n=this.canvas.dom),n&&0!==n.width&&0!==n.height&&i.drawImage(n,t,e)},paintImageSection:function(t,e,n,r,i,a,o,s,l){let c=this.canvas.target?this.canvas.target:this.canvas.dom;if(!c||!c.getContext)return;let d=c.getContext("2d");i||(i=this.canvas.dom),i&&0!==i.width&&0!==i.height&&d.drawImage(i,a,o,s,l,t,e,n,r)},reset:function(){let t=this.canvas.target?this.canvas.target:this.canvas.dom;t&&t.getContext&&t.getContext("2d").setTransform(1,0,0,1,0,0)},shift:function(t,e){let n=this.canvas.target?this.canvas.target:this.canvas.dom;n&&n.getContext&&n.getContext("2d").translate(t,e)},scale:function(t){let e=this.canvas.target?this.canvas.target:this.canvas.dom;e&&e.getContext&&e.getContext("2d").scale(t,t)},rotate:function(t){let e=this.canvas.target?this.canvas.target:this.canvas.dom;e&&e.getContext&&e.getContext("2d").rotate(t)},transform:function(t,e){let n=this.canvas.target?this.canvas.target:this.canvas.dom;n&&n.getContext&&n.getContext("2d").transform(t[0][0],t[1][0],t[0][1],t[1][1],e[0],e[1])}},audioContext:void 0===n?void 0:new n,localStorage:"undefined"==typeof window||void 0===window.localStorage?e.fakeLocalStorage:window.localStorage,startup:function(){this.canvas.dom&&this.canvas.dom.getContext&&(this.canvas.dom.getContext("2d").globalAlpha=1),void 0!==n&&(this.audioContext=new n)},shutdown:function(){this.audioContext&&(this.audioContext.close(),this.audioContext=null)}}}},5939:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Interpreter=void 0;const r=n(150),i=n(8467),a=n(8706),o=n(8397);e.Interpreter=class{constructor(t,e,n={}){var r;this.program=t,this.service=e,this.thread=!1,this.stop=!1,this.background=!1,this.halt=null,this.status="running",this.dialogResult=null,this.stack=[],this.stepcounter=0,this.waittime=0,this.eventqueue=[],this.eventhandler={},this.eventnames={},this.eventmode=!1,this.hook=null,this.timerEventEnqueued=!1,this.maxStackSize=null!==(r=n.maxStackSize)&&void 0!==r?r:1e4,this.thread=!0,setTimeout(this.chunk.bind(this),1)}chunk(){if(this.stop)return this.thread=!1,this.stop=!1,void(this.service.shutdown&&this.service.shutdown());if("waiting"===this.status&&(new Date).getTime()>=this.waittime&&(this.status="running",this.service.statechanged&&this.service.statechanged(!1)),"dialog"===this.status&&this.dialogResult){let t=this.stack[this.stack.length-1];t.temporaries[t.temporaries.length-1]=this.dialogResult,this.dialogResult=null,this.status="running",this.service.statechanged&&this.service.statechanged(!1)}if("running"===this.status){let t=(new Date).getTime();for(;this.background&&(new Date).getTime()-t<14&&"running"===this.status;)this.exec_step.bind(this)(),this.halt&&this.halt.call(this)&&(this.halt=null,this.background=!1,this.service.statechanged&&this.service.statechanged(!0));this.background&&!this.timerEventEnqueued&&(this.timerEventEnqueued=this.enqueueEvent("timer",{type:this.program.types[o.Typeid.typeid_null],value:{b:null}}))}"finished"!==this.status&&setTimeout(this.chunk.bind(this),1)}flush(){"running"===this.status&&(this.status="waiting",this.waittime=(new Date).getTime())}reset(){this.halt=null,this.background=!1,this.stack=[{pe:[this.program],ip:[0],temporaries:[],variables:[],object:null,enclosed:null}],this.service.startup&&this.service.startup(),this.status="running",this.service.statechanged&&this.service.statechanged(!1)}run(){"running"!==this.status&&"waiting"!==this.status||(this.background=!0,this.service.statechanged&&this.service.statechanged(!1))}interrupt(){this.halt=null,this.background=!1,this.service.statechanged&&this.service.statechanged(!0)}wait(t){return"running"===this.status&&(this.waittime=(new Date).getTime()+t,this.status="waiting",this.service.statechanged&&this.service.statechanged(!1),!0)}progress(){let t=this.stack.length;for(;this.stack.length>0;){let t=this.stack[this.stack.length-1];if(0!==t.ip.length){t.ip[t.ip.length-1]++;break}if(r.ErrorHelper.assert(0===t.temporaries.length,"[Interpreter.progress] temporaries stack is not empty at the end of the function scope"),this.stack.pop(),0===this.stack.length)break;this.stack[this.stack.length-1].temporaries.push({type:this.program.types[o.Typeid.typeid_null],value:{b:null}})}return t-this.stack.length}exec_step(){var t,e,n;if("waiting"===this.status&&(new Date).getTime()>=this.waittime&&(this.status="running",this.service.statechanged&&this.service.statechanged(!1)),"running"===this.status){if(0===this.stack.length)return this.status="finished",this.service.statechanged&&this.service.statechanged(!0),void(this.service.shutdown&&this.service.shutdown());if(this.hook)try{this.hook.call(this)}catch(t){console.log("[Interpreter] ignoring exception thrown by the hook")}try{let t=this.stack[this.stack.length-1],e=t.pe[t.pe.length-1];for(;this.stack.length>0&&("running"===this.status||"waiting"===this.status)&&(e.step.call(this)&&this.stepcounter++,this.progress.call(this),0!==this.stack.length)&&(t=this.stack[this.stack.length-1],e=t.pe[t.pe.length-1],!e.sim.call(this)););}catch(i){const a=this.stack[this.stack.length-1],o=a.pe[a.pe.length-1];if("Runtime Error"===i.name||"Parse Error"===i.name){if(this.halt=null,this.background=!1,this.service.message){const a=(null===(t=null==o?void 0:o.where)||void 0===t?void 0:t.filename)||i.filename,s=(null===(e=null==o?void 0:o.where)||void 0===e?void 0:e.line)||i.line,l=(null===(n=null==o?void 0:o.where)||void 0===n?void 0:n.ch)||i.ch;this.service.message(r.ErrorHelper.getLocatedErrorMsg("runtime error",a,s,i.message),a,s,l,i.href)}this.status="error",this.service.statechanged&&this.service.statechanged(!0),this.service.shutdown&&this.service.shutdown()}else{console.log("internal runtime error!",i);let t=r.ErrorHelper.composeError("/internal/ie-2",[r.ErrorHelper.ex2string(i)]);this.service.message&&this.service.message(t,void 0,void 0,void 0,"#/errors/internal/ie-2"),this.halt=null,this.background=!1,this.status="error",this.service.statechanged&&this.service.statechanged(!0),this.service.shutdown&&this.service.shutdown()}}}}step_into(){this.background||"running"!==this.status||(this.halt=function(){return!0},this.background=!0)}step_over(){if(this.background||"running"!==this.status)return;let t=this.stack.length;if(0===t)return this.halt=function(){return!0},void(this.background=!0);let e=this.stack[t-1],n=e.pe[e.pe.length-1],r=n.where?n.where.line:-1;this.halt=function(t,n){return function(){if(this.stack.length<t)return!0;if(this.stack.length===t){let t=e.pe[e.pe.length-1];if((t.where?t.where.line:-1)!==n)return!0}return!1}}(t,r),this.background=!0}step_out(){if(this.background||"running"!==this.status)return;let t=this.stack.length;this.halt=0===t?function(){return!0}:function(t){return function(){return this.stack.length<t}}(t),this.background=!0}stopthread(){this.stop=!0}enqueueEvent(t,e){return this.eventmode&&this.eventqueue.push({type:t,event:e}),this.eventmode}setEventHandler(t,e){if(e.type.id===o.Typeid.typeid_null)delete this.eventhandler[t];else{if(!a.TScript.isDerivedFrom(e.type,o.Typeid.typeid_function))throw new i.RuntimeError("[Interpreter.setEventHandler] invalid argument");if(1!==e.value.b.func.params.length)throw new i.RuntimeError("[Interpreter.setEventHandler] handler must be a function with exactly one parameter");this.eventhandler[t]=e.value.b}}defineBreakpoints(t,e){let n=new Set,r=!1;const i=this.program.breakpoints[e];if(!i)return null;for(let e of t)if(i.hasOwnProperty(e))n.add(e);else for(r=!0;e<=this.program.lines;){if(i.hasOwnProperty(e)){n.add(e);break}e++}for(const t of Object.values(i))n.has(t.line)?t.set():t.clear();return r?n:null}toggleBreakpoint(t,e){const n=this.program.breakpoints[e];if(!n)return null;for(;t<=this.program.lines;t++){const e=n[t];if(e)return e.toggle(),{line:t,active:e.active()}}return null}error(t,e){r.ErrorHelper.error(t,e,this.stack)}assert(t,e){r.ErrorHelper.assert(t,e)}}},6853:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.create_breakpoint=e.copyconstant=e.deepcopy=void 0;const r=n(8397);e.deepcopy=function t(e,n){if(void 0===n&&(n={}),Array.isArray(e)){let r=new Array;for(let i=0;i<e.length;i++)r.push(t(e[i],n));return r}if("object"==typeof e&&null!==e){let r={};for(let i in e)e.hasOwnProperty(i)&&(n.hasOwnProperty(i)||(r[i]=t(e[i],n)));return r}return e},e.copyconstant=function t(e){if(e.type.id===r.Typeid.typeid_array){let n=new Array;for(let r=0;r<e.value.b.length;r++)n.push(t.call(this,e.value.b[r]));return{type:this.program.types[r.Typeid.typeid_array],value:{b:n}}}if(e.type.id===r.Typeid.typeid_dictionary){let n={};for(let r in e.value.b)e.value.b.hasOwnProperty(r)&&(n[r]=t.call(this,e.value.b[r]));return{type:this.program.types[r.Typeid.typeid_dictionary],value:{b:n}}}return e},e.create_breakpoint=function(t,e){let n=!1;return{petype:"breakpoint",parent:t,line:e.line,where:e.get(),active:()=>n,set(){n=!0},clear(){n=!1},toggle(){n=!n},step(){let t=this.stack[this.stack.length-1];return n&&(this.interrupt(),this.service.breakpoint&&this.service.breakpoint()),t.pe.pop(),t.ip.pop(),!1},sim:()=>n}}},5584:(t,e)=>{"use strict";function n(t,e){return t.startsWith(e)}function r(t){const e=t.split(":",1)[0];return[e,t.slice(e.length+1)]}function i(t){return a(t)[1]}function a(t){const[e,n]=r(t),i=n.split("/",1)[0];return[i,n.slice(i.length)]}Object.defineProperty(e,"__esModule",{value:!0}),e.fileIDChangeNamespace=e.projectFileIDSplit=e.localStorageFileIDToFilename=e.projectFileIDToProjAbsPath=e.splitFileIDAtColon=e.fileIDHasNamespace=e.fileIDToHumanFriendly=e.fileIDToContextDependentFilename=e.projectFileID=e.stringFileID=e.localstorageFileID=e.isLoadableFileID=e.loadableFileIDNamespaces=e.fileIDNamespaces=void 0,e.fileIDNamespaces=["project","localstorage","string"],e.loadableFileIDNamespaces=["project","localstorage"],e.isLoadableFileID=function(t){return e.loadableFileIDNamespaces.some((e=>n(t,e)))},e.localstorageFileID=function(t){return`localstorage:${t}`},e.stringFileID=function(t){return`string:${t}`},e.projectFileID=function(t,e){return`project:${t}${e}`},e.fileIDToContextDependentFilename=function(t){const[e,n]=r(t);switch(e){case"localstorage":case"string":return n;case"project":return i(t)}},e.fileIDToHumanFriendly=function(t){const[e,n]=r(t);switch(e){case"localstorage":return n;case"project":const[e,r]=a(t);return`${r} (${e})`;case"string":return`${n} (no file)`}},e.fileIDHasNamespace=n,e.splitFileIDAtColon=r,e.projectFileIDToProjAbsPath=i,e.localStorageFileIDToFilename=function(t){return r(t)[1]},e.projectFileIDSplit=a,e.fileIDChangeNamespace=function(t,e){const[n,i]=r(t);return`${e}:${i}`}},7277:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{l(r.next(t))}catch(t){a(t)}}function s(t){try{l(r.throw(t))}catch(t){a(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}l((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.createEmptyProgram=e.parseProgram=e.parseProgramFromString=e.defaultParseOptions=void 0;const i=n(150),a=n(6853),o=n(4041),s=n(6056),l=n(4168),c=n(6293),d=n(8784),h=n(3163),u=n(9641),p=n(3680),f=n(3350),m=n(5584);function g(t,n=e.defaultParseOptions){const h=new Set,u=[],m=(0,e.createEmptyProgram)(),g=y(m,u);function v(t,e=null,r=null){for(g.setSource(t,e,r);g.good();){let t=(0,f.parse_include)(g,m,n);if(null!==t)g.set(t.position),g.error("/argument-mismatch/am-48",[t.filename]);else{let t=(0,p.parse_statement_or_declaration)(g,m,n);m.commands.push(t),m.children.push(t)}}}function b(t){return r(this,void 0,void 0,(function*(){for(h.add(t.filename),g.setSource(t.source,null,t.filename);g.good();){const e=(0,f.parse_include)(g,m,n);if(null===e){let t=(0,p.parse_statement_or_declaration)(g,m,n);m.commands.push(t),m.children.push(t);continue}const r=t.resolveIncludeToFileID(e.filename);if(null===r)return g.set(e.position),void g.error("/argument-mismatch/am-48",[e.filename]);if(h.has(r))continue;const i=yield t.resolveInclude(r);if(null===i)return g.set(e.position),void g.error("/argument-mismatch/am-48",[e.filename]);let a={source:g.source,pos:g.pos,line:g.line,filename:g.filename,ch:g.ch,indent:g.indent.slice()};yield b(i),g.source=a.source,g.pos=a.pos,g.line=a.line,g.filename=a.filename,g.ch=a.ch,g.indent=a.indent}}))}try{v(o.core.source,o.core.impl),v(l.lib_math.source,l.lib_math.impl),v(c.lib_turtle.source,c.lib_turtle.impl),v(s.lib_canvas.source,s.lib_canvas.impl),v(d.lib_audio.source,d.lib_audio.impl),m.where=g.get()}catch(t){return k(t),x()}if("function"==typeof t.resolveInclude)return(()=>r(this,void 0,void 0,(function*(){try{yield b(t),w()}catch(t){k(t)}return x()})))();try{v(t.source,null,t.filename),w()}catch(t){k(t)}return x();function w(){if(m.lines=g.line,g.skip(),!m.breakpoints[t.filename].hasOwnProperty(g.line)){let e=(0,a.create_breakpoint)(m,g);m.breakpoints[t.filename][g.line]=e,m.commands.push(e)}!function(t,e){let n="pass"+e,r="pass"+e+"Back",i=new Set;!function e(a){if(!i.has(a)){if(i.add(a),a.hasOwnProperty("petype")&&a.hasOwnProperty(n)){let e=t.get();a.hasOwnProperty("where")&&t.set(a.where),a[n](t),delete a[n],t.set(e)}if(a.hasOwnProperty("children"))for(let t of a.children)e(t);if(a.hasOwnProperty("petype")&&a.hasOwnProperty(r)){let e=t.get();a.hasOwnProperty("where")&&t.set(a.where),a[r](t),delete a[r],t.set(e)}}}(t.program)}(g,"Resolve")}function x(){return u.length>0?{program:null,errors:u}:{program:m,errors:[]}}function k(t){"Parse Error"!==t.name&&u.push({type:"error",href:"#/errors/internal/ie-1",message:i.ErrorHelper.composeError("/internal/ie-1",[i.ErrorHelper.ex2string(t)])})}}e.defaultParseOptions={checkstyle:!1},e.parseProgramFromString=function(t,e){return g({filename:(0,m.stringFileID)("main"),source:t},e)},e.parseProgram=g,e.createEmptyProgram=()=>({petype:"global scope",children:[],parent:null,commands:[],types:[],names:{},variables:[],breakpoints:{},lines:0,step:h.scopestep,sim:u.simfalse});const y=(t,e)=>({program:t,source:"",pos:0,line:1,filename:null,ch:0,totalpos:0,indent:[0],impl:null,builtin(){return null!==this.impl},setSource(t,e=null,n=null){this.source=t,this.impl=e,this.filename=n,null!=n&&(this.program.breakpoints[n]={}),this.pos=0,this.line=1,this.ch=0,this.skip()},good(){return this.pos<this.source.length&&0===e.length},bad(){return!this.good()},eof(){return this.pos>=this.source.length},error(t,n){void 0===n&&(n=[]);let r=i.ErrorHelper.composeError(t,n),a={type:"error",filename:this.filename,line:this.line,ch:this.ch,message:r,href:"#/errors"+t,name:"Parse Error"};throw e.push(a),a},warning(t){e.push({type:"warning",filename:this.filename,line:this.line,message:t})},current(){return this.pos>=this.source.length?"":this.source[this.pos]},lookahead(t){return this.pos+t>=this.source.length?"":this.source[this.pos+t]},next(){return this.lookahead(1)},get(){return{pos:this.pos,line:this.line,ch:this.ch,totalpos:this.totalpos,filename:this.filename}},set(t){this.pos=t.pos,this.line=t.line,this.ch=t.ch,this.totalpos=t.totalpos,this.filename=t.filename},indentation(){let t=0;for(let e=this.pos-this.ch;e<this.pos;e++){let n=this.source[e];if(" "===n)t++;else{if("\t"!==n)break;t+=4,t-=t%4}}return t},advance(t){void 0===t&&(t=1),this.pos+t>this.source.length&&(t=this.source.length-this.pos);for(let e=0;e<t;e++)"\n"===this.current()&&(this.line++,this.ch=0),this.pos++,this.ch++,this.totalpos++},skip(){for(;this.good();){let t=this.current();if("#"!==t){if(" "!==t&&" "!==t&&"\t"!==t&&"\r"!==t&&"\n"!==t)break;"\n"===t?(this.line++,this.ch=0):this.ch++,this.pos++,this.totalpos++}else if(this.pos++,this.ch++,this.totalpos++,"*"===this.current()){this.pos++,this.ch++,this.totalpos++;let t=!1;for(;this.good();)if("\n"!==this.current()){if(t&&"#"===this.current()){this.pos++,this.ch++,this.totalpos++;break}t="*"===this.current(),this.pos++,this.ch++}else this.pos++,this.line++,this.ch=0,this.totalpos++,t=!1}else for(;this.good()&&"\n"!==this.current();)this.pos++,this.ch++,this.totalpos++}}})},4641:(t,e)=>{"use strict";function n(t){return Object.hasOwn(r.keywords,t)}Object.defineProperty(e,"__esModule",{value:!0}),e.Lexer=e.isKeyword=void 0,e.isKeyword=n;class r{static get_token(t,e,i=void 0){let a=!!(i=void 0!==i&&i)&&t.get();t.skip(),r.before_token=t.get();let o=t.line;if(t.eof())return{type:"end-of-file",value:"",code:"",line:o};let s,l=t.indentation(),c=t.current();if(c>="A"&&c<="Z"||c>="a"&&c<="z"||"_"===c){let e=t.pos;for(t.advance();t.good();){let e=t.current();if(!(e>="A"&&e<="Z"||e>="a"&&e<="z"||e>="0"&&e<="9"||"_"===e))break;t.advance()}let r=t.source.substring(e,t.pos);s=n(r)?{type:"keyword",value:r,code:r,line:o}:{type:"identifier",value:r,code:r,line:o}}else if(c>="0"&&c<="9"){let e=t.pos,n="0123456789",r="integer";for(;!t.eof()&&n.indexOf(t.current())>=0;)t.advance();if(!t.eof()){if("."===t.current())for(r="real",t.advance(),(t.eof()||t.current()<"0"||t.current()>"9")&&t.error("/syntax/se-1");!t.eof()&&t.current()>="0"&&t.current()<="9";)t.advance();if("e"===t.current()||"E"===t.current())for(r="real",t.advance(),"+"!==t.current()&&"-"!==t.current()||t.advance(),(t.current()<"0"||t.current()>"9")&&t.error("/syntax/se-1");!t.eof()&&t.current()>="0"&&t.current()<="9";)t.advance()}let i=t.source.substring(e,t.pos);s={type:r,value:parseFloat(i),code:i,line:o}}else if('"'===c){let e=t.pos,n="",r="";for(t.advance();;){t.good()||t.error("/syntax/se-2");let i=t.current();if("\\"===i){t.advance();let e=t.current();if(t.advance(),"\\"===e)e="\\";else if('"'===e)e='"';else if("r"===e)e="\r";else if("n"===e)e="\n";else if("t"===e)e="\t";else if("f"===e)e="\f";else if("b"===e)e="\b";else if("/"===e)e="/";else if("u"===e){const n="0123456789abcdefABCDEF";let r="";for(let e=0;e<4;e++)n.indexOf(t.current())<0&&t.error("/syntax/se-3"),r+=t.current(),t.advance();e=String.fromCharCode(parseInt(r,16))}else t.error("/syntax/se-4",[e]);r+=e}else if("\r"===i||"\n"===i)t.error("/syntax/se-2");else{if('"'===i){t.advance(),n=t.source.substring(e,t.pos);break}r+=i,t.advance()}}s={type:"string",value:r,code:n,line:o}}else{let e;if(t.advance(),r.operators.indexOf(c)>=0&&(e=c,"/"===t.current()&&"/"===c&&(t.advance(),e+="/"),"="===t.current()&&":"!==c&&(t.advance(),e+="=")),e&&"!"!==e)s={type:"operator",value:e,code:e,line:o};else{let e;r.groupings.indexOf(c)>=0?e="grouping":r.delimiters.indexOf(c)>=0?e="delimiter":t.error("/syntax/se-5",[c]),s={type:e,value:c,code:c,line:o}}}if(a?t.set(a):t.skip(),e.checkstyle&&!t.builtin()&&("keyword"!==s.type||"public"!==s.value&&"protected"!==s.value&&"private"!==s.value))if("operator"===s.type&&":"===s.value);else{let e=t.indent[t.indent.length-1];e<0&&o!==-1-e?(l<=t.indent[t.indent.length-2]&&"}"!==t.current()&&t.error("/style/ste-1"),t.indent[t.indent.length-1]=l):l<e&&"}"!==t.current()&&t.error("/style/ste-1")}return s}}e.Lexer=r,r.keywords={var:!0,function:!0,if:!0,then:!0,else:!0,for:!0,do:!0,while:!0,break:!0,continue:!0,return:!0,not:!0,and:!0,or:!0,xor:!0,null:!0,true:!0,false:!0,try:!0,catch:!0,throw:!0,class:!0,public:!0,protected:!0,private:!0,static:!0,constructor:!0,this:!0,super:!0,namespace:!0,use:!0,from:!0,module:!0,include:!0,import:!0,export:!0,const:!0,switch:!0,case:!0,default:!0,enum:!0,operator:!0},r.operators="=<>!^+-*/%:",r.groupings="()[]{}",r.delimiters=",;."},7606:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parse_assignment_or_expression=void 0;const r=n(4641),i=n(697),a=n(9641),o=n(7939),s=n(5105);e.parse_assignment_or_expression=function(t,e,n){let l=t.get(),c=(0,o.parse_expression)(t,e,n),d=r.Lexer.get_token(t,n);if("operator"===d.type&&i.assignments.hasOwnProperty(d.value)){t.set(l);let i=(0,s.parse_lhs)(t,e,n);l=t.get();let c=r.Lexer.get_token(t,n),h=(0,o.parse_expression)(t,e,n);return d=r.Lexer.get_token(t,n),"delimiter"===d.type&&";"===d.value||(t.set(r.Lexer.before_token),t.error("/syntax/se-48")),{petype:"assignment "+c.value,children:[i,h],where:l,parent:e,operator:c.value,lhs:i,rhs:h,step:function(){let t=this.stack[this.stack.length-1],e=t.pe[t.pe.length-1],n=t.ip[t.ip.length-1];return 0===n?(t.pe.push(e.rhs),t.ip.push(-1),!1):1===n?(t.temporaries.push(e.operator),t.pe.push(e.lhs),t.ip.push(-1),!1):(t.pe.pop(),t.ip.pop(),!1)},sim:a.simfalse}}if("delimiter"===d.type&&";"===d.value)return{petype:"expression",children:[c],where:l,parent:e,sub:c,step:function(){let t=this.stack[this.stack.length-1],e=t.pe[t.pe.length-1];return 0===t.ip[t.ip.length-1]?(t.pe.push(e.sub),t.ip.push(-1),!1):(t.temporaries.pop(),t.pe.pop(),t.ip.pop(),!1)},sim:a.simfalse};t.set(r.Lexer.before_token),t.error("/syntax/se-49")}},3509:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parse_break=void 0;const r=n(150),i=n(4641),a=n(9641);e.parse_break=function(t,e,n){let o=t.get(),s=i.Lexer.get_token(t,n);r.ErrorHelper.assert("keyword"===s.type&&"break"===s.value,"[parse_break] internal error");let l=e;for(;l&&("function"!==l.petype&&"method"!==l.petype&&"global scope"!==l.petype||t.error("/syntax/se-77"),!(l.petype.indexOf("loop")>=0));)l=l.parent;return s=i.Lexer.get_token(t,n),"delimiter"===s.type&&";"===s.value||(t.set(i.Lexer.before_token),t.error("/syntax/se-81b")),{petype:"break",where:o,parent:e,step:function(){let t=this.stack[this.stack.length-1];for(;t.pe.length>0;){t.ip.pop();let e=t.pe.pop();if(e.petype.indexOf("loop")>=0)return t.pe.push(e),t.ip.push(-3),!0}r.ErrorHelper.assert(!1,"internal error in break: no enclosing loop context found")},sim:a.simtrue}}},7464:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parse_call=void 0;const r=n(150),i=n(4641),a=n(3852),o=n(8706),s=n(9641),l=n(3163),c=n(8397),d=n(7939);e.parse_call=function(t,e,n,h){let u=t.get(),p=i.Lexer.get_token(t,h);r.ErrorHelper.assert("("===p.value,"[parse_call] internal error");let f=new Array;if(p=i.Lexer.get_token(t,h,!0),"grouping"===p.type&&")"===p.value)i.Lexer.get_token(t,h);else{let n=!1;for(;;){let r=t.get(),a=!1,o=i.Lexer.get_token(t,h);if("identifier"===o.type){let e=i.Lexer.get_token(t,h);"operator"===e.type&&"="===e.value?a=!0:t.set(r)}else t.set(r);n&&!a&&t.error("/syntax/se-14"),a&&(n=!0);let l=(0,d.parse_expression)(t,e,h);if(a){let t={petype:"named argument",children:[l],where:r,parent:e,name:o.value,argument:l,step:function(){let t=this.stack[this.stack.length-1],e=t.pe[t.pe.length-1];return 0===t.ip[t.ip.length-1]?(t.pe.push(e.argument),t.ip.push(-1),!1):(t.pe.pop(),t.ip.pop(),!1)},sim:s.simfalse};f.push(t)}else f.push(l);if(p=i.Lexer.get_token(t,h),"grouping"===p.type&&")"===p.value)break;","!==p.value&&(t.set(i.Lexer.before_token),t.error("/syntax/se-15"))}}return{petype:"function call",children:[n].concat(f),where:u,parent:e,base:n,arguments:f,step:l.callstep,sim:s.callsim,passResolveBack:function(t){if("constant"===n.petype){let s=null;if(o.TScript.isDerivedFrom(n.typedvalue.type,c.Typeid.typeid_function))s=n.typedvalue.value.b.func;else if(o.TScript.isDerivedFrom(n.typedvalue.type,c.Typeid.typeid_type)){let l=n.typedvalue.value.b;if(r.ErrorHelper.assert(l.class_constructor,"[parse_call] internal error; missing constructor"),"public"!==l.class_constructor.access){let n=(0,a.get_type)(e),r=!1;"private"===l.class_constructor.access?null!==n&&n.id===l.id||(r=!0):"protected"===l.class_constructor.access&&null!==n&&o.TScript.isDerivedFrom(n,l.id)||(r=!0),r&&(t.set(i.Lexer.before_token),t.error("/name/ne-25",[o.TScript.displayname(l),l.class_constructor.access]))}s=n.typedvalue.value.b.class_constructor}else t.error("/syntax/se-16",[n.typedvalue.type]);let l=f.length,d=s.params.length,h=new Array;for(let t=0;t<d;t++)h.push(!1);for(let e=0;e<l;e++)if("named argument"===f[e].petype){let n=f[e].name,r=!1;for(let e=0;e<d;e++)if(s.params[e].hasOwnProperty("name")&&s.params[e].name===n){h[e]&&t.error("/name/ne-1",[n,o.TScript.displayname(s)]),h[e]=!0,r=!0;break}r||t.error("/name/ne-2",[n,o.TScript.displayname(s)])}else e<h.length?h[e]=f[e]:t.error("/name/ne-3",[o.TScript.displayname(s)]);for(let e=0;e<d;e++)h[e]||s.params[e].hasOwnProperty("defaultvalue")||t.error("/name/ne-4",[e+1+" ("+o.TScript.displayname(s.params[e])+")",o.TScript.displayname(s)])}}}}},5616:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parse_class=void 0;const r=n(150),i=n(4641),a=n(3852),o=n(3163),s=n(8397),l=n(3163),c=n(9641),d=n(5727),h=n(5281),u=n(6201),p=n(7939),f=n(9084);e.parse_class=function t(e,n,m){let g=e.get(),y=i.Lexer.get_token(e,m);r.ErrorHelper.assert("keyword"===y.type&&"class"===y.value,"[parse_class] internal error"),y=i.Lexer.get_token(e,m),"identifier"!==y.type&&e.error("/syntax/se-54");let v=y.value;n.names.hasOwnProperty(v)&&(e.set(i.Lexer.before_token),e.error("/name/ne-18",[v])),m.checkstyle&&!e.builtin()&&(v[0]<"A"||v[0]>"Z")&&(e.set(i.Lexer.before_token),e.error("/style/ste-4",[v]));let b={petype:"type",children:new Array,where:g,parent:n,objectsize:0,variables:new Array,staticvariables:new Array,members:{},staticmembers:{},name:v,names:{},step:function(){let t=this.stack[this.stack.length-1],e=t.pe[t.pe.length-1],n=t.ip[t.ip.length-1],r=Object.keys(e.staticmembers);if(!(n<r.length))return t.pe.pop(),t.ip.pop(),!1;{let i=e.staticmembers[r[n]];if("type"===i.petype||"variable"===i.petype)return t.pe.push(i),t.ip.push(-1),!1}},sim:c.simfalse,passResolveBack:function(t){for(let e in b.members){let n=b.members[e];"attribute"==n.petype&&n.hasOwnProperty("initializer")&&("name"===n.initializer.petype&&n.initializer.reference&&(n.initializer=n.initializer.reference),"constant"!==n.initializer.petype&&(t.set(n.where),t.error("/syntax/se-57")))}for(let e in b.staticmembers){let n=b.staticmembers[e];"variable"==n.petype&&n.hasOwnProperty("initializer")&&("name"===n.initializer.petype&&n.initializer.reference&&(n.initializer=n.initializer.reference),"constant"!==n.initializer.petype&&(t.set(n.where),t.error("/syntax/se-57")))}}};n.names[v]=b;let w=(0,a.get_program)(n),x=w.types.length;if(b.id=x,w.types.push(b),y=i.Lexer.get_token(e,m),"operator"===y.type&&":"===y.value){let t=(0,p.parse_expression)(e,n,m);(0,p.is_name)(t)&&!t.super||e.error("/syntax/se-10",["super class definition"]);let r=t.where;b.children.unshift(t);let d=null==t?void 0:t.passResolveBack;t.passResolveBack=function(e){d&&d(e),b.children.shift(),"name"!==t.petype&&"constant"!==t.petype||!t.reference||(t=t.reference),"type"!==t.petype&&e.error("/name/ne-22",[t.name]),b.superclass=t,b.children.unshift(b.superclass);let i=b.superclass;for(;i;)i===b&&e.error("/name/ne-26",[t.name]),i=null==i?void 0:i.superclass;b.superclass.class_constructor&&"private"===b.superclass.class_constructor.access&&e.error("/syntax/se-58");let h=b.superclass.objectsize;b.objectsize+=h;for(let t in b.members){let e=b.members[t];"attribute"==e.petype&&(e.id+=h)}if(b.class_constructor.hasOwnProperty("defaultconstructor")){let t={petype:"constant",where:r,typedvalue:{type:(0,a.get_program)(n).types[s.Typeid.typeid_type],value:{b:b.superclass}},step:o.constantstep,sim:c.simfalse};b.class_constructor.supercall={petype:"super call",parent:b.class_constructor,base:t,arguments:new Array,step:l.callstep,sim:c.callsim}}},y=i.Lexer.get_token(e,m)}"grouping"===y.type&&"{"===y.value||(e.set(i.Lexer.before_token),e.error("/syntax/se-40",["class declaration"])),e.indent.push(-1-y.line);let k=null;for(;;){if(y=i.Lexer.get_token(e,m,!0),"grouping"===y.type&&"}"===y.value){if(e.indent.pop(),m.checkstyle&&!e.builtin()){let t=e.indentation(),n=e.indent[e.indent.length-1];n>=0&&n!==t&&e.error("/style/ste-2")}i.Lexer.get_token(e,m);break}if("keyword"===y.type&&("public"===y.value||"protected"===y.value||"private"===y.value)){k=y.value,i.Lexer.get_token(e,m),y=i.Lexer.get_token(e,m),"operator"===y.type&&":"===y.value||(e.set(i.Lexer.before_token),e.error("/syntax/se-55",[k]));continue}let r=!1;if("keyword"===y.type&&"static"===y.value&&(r=!0,i.Lexer.get_token(e,m),y=i.Lexer.get_token(e,m,!0)),"keyword"===y.type&&"var"===y.value){null===k&&e.error("/syntax/se-56");let t=(0,u.parse_var)(e,b,m,r?(0,a.get_program)(n):b);for(let e=0;e<t.vars.length;e++){let n=t.vars[e];b.children.push(n),n.access=k,r?(n.displayname=v+"."+n.name,b.staticmembers[n.name]=n,b.staticvariables.push(n)):(n.petype="attribute",b.members[n.name]=n)}}else if("keyword"===y.type&&"function"===y.value){null===k&&e.error("/syntax/se-56");let t=(0,d.parse_function)(e,b,m,r?"function":"method");b.children.push(t),r&&(t.displayname=v+"."+t.name),t.access=k,r?b.staticmembers[t.name]=t:b.members[t.name]=t}else if("keyword"===y.type&&"constructor"===y.value){b.hasOwnProperty("class_constructor")&&e.error("/syntax/se-59b"),null===k&&e.error("/syntax/se-56"),r&&e.error("/syntax/se-59");let t=(0,f.parse_constructor)(e,b,m);b.children.push(t),t.access=k,b.class_constructor=t}else if("keyword"===y.type&&"class"===y.value){null===k&&e.error("/syntax/se-56"),r&&e.error("/syntax/se-60");let n=t(e,b,m);b.children.push(n),n.displayname=v+"."+n.name,n.access=k,b.staticmembers[n.name]=n}else"keyword"!==y.type||"use"!==y.value&&"from"!==y.value?e.error("/syntax/se-62"):(r&&e.error("/syntax/se-61"),(0,h.parse_use)(e,b,m))}return b.hasOwnProperty("class_constructor")||(b.class_constructor={defaultconstructor:!0,petype:"method",where:b.where,access:"public",declaration:!0,parent:b,commands:new Array,variables:new Array,name:"constructor",names:{},params:new Array,step:l.constructorstep,sim:c.simfalse},b.children.push(b.class_constructor)),b}},9084:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parse_constructor=void 0;const r=n(150),i=n(4641),a=n(3852),o=n(8397),s=n(7464),l=n(3163),c=n(9641),d=n(7939),h=n(3680);e.parse_constructor=function(t,e,n){var u;r.ErrorHelper.assert("type"===e.petype,"[parse_constructor] internal error; parent is expected to be a type");let p=t.get(),f=i.Lexer.get_token(t,n);r.ErrorHelper.assert("keyword"===f.type&&"constructor"===f.value,"[parse_constructor] internal error");let m={petype:"method",children:new Array,where:p,declaration:!0,parent:e,commands:new Array,variables:new Array,name:"constructor",names:{},params:new Array,step:l.constructorstep,sim:c.simfalse};for(f=i.Lexer.get_token(t,n),"grouping"===f.type&&"("===f.value||(t.set(i.Lexer.before_token),t.error("/syntax/se-36",["constructor declaration"]));;){let e=i.Lexer.get_token(t,n,!0);if("grouping"===e.type&&")"===e.value){i.Lexer.get_token(t,n);break}0!==m.params.length&&("delimiter"===e.type&&","===e.value||t.error("/syntax/se-37"),i.Lexer.get_token(t,n));let r=t.get();e=i.Lexer.get_token(t,n),"identifier"!==e.type&&(t.set(i.Lexer.before_token),t.error("/syntax/se-33"));let a=e.value,o=m.variables.length,s={petype:"variable",where:r,parent:m,name:a,id:o,scope:"local"};m.children.push(s);let l={name:a};if(e=i.Lexer.get_token(t,n,!0),"operator"===e.type&&"="===e.value){i.Lexer.get_token(t,n),l.defaultvalue=(0,d.parse_expression)(t,m,n),m.children.push(l.defaultvalue);let e=null===(u=l.defaultvalue)||void 0===u?void 0:u.passResolveBack;l.defaultvalue.passResolveBack=function(t){e&&e(t),"constant"!==l.defaultvalue.petype&&(t.set(l.defaultvalue.where),t.error("/syntax/se-38")),l.defaultvalue=l.defaultvalue.typedvalue}}m.names.hasOwnProperty(a)&&(t.set(r),t.error("/name/ne-16",[a])),m.names[a]=s,m.variables[o]=s,m.params.push(l)}if(f=i.Lexer.get_token(t,n),":"===f.value){f=i.Lexer.get_token(t,n),"keyword"===f.type&&"super"===f.value||(t.set(i.Lexer.before_token),t.error("/syntax/se-53"));let r={petype:"constant",where:t.get(),typedvalue:{type:(0,a.get_program)(e).types[o.Typeid.typeid_type],value:{b:null}},step:l.constantstep,sim:c.simfalse};m.passResolve=function(t){e.superclass||t.error("/name/ne-21"),r.typedvalue.value.b=e.superclass};{let e=t.get(),r=i.Lexer.get_token(t,n);t.set(e),"("!==r.value&&t.error("/syntax/se-36",["constructor super call"])}m.supercall=(0,s.parse_call)(t,m,r,n),m.supercall.petype="super call",m.children.push(m.supercall),f=i.Lexer.get_token(t,n)}for("grouping"===f.type&&"{"===f.value||(t.set(i.Lexer.before_token),t.error("/syntax/se-40",["constructor declaration"])),t.indent.push(-1-f.line);;){if(f=i.Lexer.get_token(t,n,!0),"grouping"===f.type&&"}"===f.value){if(t.indent.pop(),n.checkstyle&&!t.builtin()){let e=t.indentation(),n=t.indent[t.indent.length-1];n>=0&&n!==e&&t.error("/style/ste-2")}i.Lexer.get_token(t,n);break}let e=(0,h.parse_statement_or_declaration)(t,m,n);m.commands.push(e),m.children.push(e)}if(0===m.commands.length&&t.impl){let e=new Array,n=m;for(;n.parent;)e.unshift(n.name),n=n.parent;let r=t.impl;for(let t=0;t<e.length;t++){if(!r.hasOwnProperty(e[t])){r=null;break}r=r[e[t]]}if(r)if("function"==typeof r)m.step=function(){let t=this.stack[this.stack.length-1],e=t.pe[t.pe.length-1],n=t.variables;return t.object&&n.unshift(t.object),e.body.apply(this,n),this.stack.pop(),!1},m.sim=c.simfalse,m.body=r;else{if(!r.hasOwnProperty("step"))throw"[parse_constructor] invalid built-in function";m.step=r.step,m.sim=r.hasOwnProperty("sim")?r.sim:c.simfalse}}return m}},6976:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parse_continue=void 0;const r=n(150),i=n(4641),a=n(9641);e.parse_continue=function(t,e,n){let o=t.get(),s=i.Lexer.get_token(t,n);r.ErrorHelper.assert("keyword"===s.type&&"continue"===s.value,"[parse_continue] internal error");let l=e;for(;l&&("function"!==l.petype&&"method"!==l.petype&&"global scope"!==l.petype||t.error("/syntax/se-78"),!(l.petype.indexOf("loop")>=0));)l=l.parent;return s=i.Lexer.get_token(t,n),"delimiter"===s.type&&";"===s.value||(t.set(i.Lexer.before_token),t.error("/syntax/se-81c")),{petype:"continue",where:o,parent:e,step:function(){let t=this.stack[this.stack.length-1];for(;t.pe.length>0;){t.ip.pop();let e=t.pe.pop();if(e.petype.indexOf("loop")>=0)return t.pe.push(e),t.ip.push(-2),!0}r.ErrorHelper.assert(!1,"internal error in continue: no enclosing loop context found")},sim:a.simtrue}}},112:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parse_declaration=void 0;const r=n(697),i=n(5616),a=n(5727),o=n(9881),s=n(5281),l=n(6201);e.parse_declaration=function(t,e,n){let c=(0,r.peek_keyword)(t);return"var"===c?(0,l.parse_var)(t,e,n):"function"===c?(0,a.parse_function)(t,e,n):"class"===c?(0,i.parse_class)(t,e,n):"namespace"===c?(0,o.parse_namespace)(t,e,n):"use"===c||"from"===c?(0,s.parse_use)(t,e,n):null}},3775:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parse_dowhile=void 0;const r=n(150),i=n(4641),a=n(8706),o=n(8397),s=n(7939),l=n(1920);e.parse_dowhile=function(t,e,n){let c=t.get(),d=i.Lexer.get_token(t,n);r.ErrorHelper.assert("keyword"===d.type&&"do"===d.value,"[parse_dowhile] internal error");let h={petype:"do-while-loop",children:new Array,where:c,parent:e,step:function(){let e=this.stack[this.stack.length-1],n=e.pe[e.pe.length-1],r=e.ip[e.ip.length-1];if(-2===r)return e.pe.pop(),e.ip.pop(),!1;if(-1===r)return!1;if(0===r)return e.pe.push(n.body),e.ip.push(-1),!1;if(1===r)return e.pe.push(n.condition),e.ip.push(-1),!1;if(2===r){let n=e.temporaries.pop();return a.TScript.isDerivedFrom(n.type,o.Typeid.typeid_boolean)||t.error("/argument-mismatch/am-36",[a.TScript.displayname(n.type)]),n.value.b?(e.ip.pop(),e.ip.push(-1)):(e.pe.pop(),e.ip.pop()),!0}},sim:function(){let t=this.stack[this.stack.length-1];return 2===t.ip[t.ip.length-1]}};return h.body=(0,l.parse_statement)(t,h,n),h.children.push(h.body),d=i.Lexer.get_token(t,n),"keyword"===d.type&&"while"===d.value||(t.set(i.Lexer.before_token),t.error("/syntax/se-74")),h.condition=(0,s.parse_expression)(t,e,n),h.children.push(h.condition),d=i.Lexer.get_token(t,n),"delimiter"===d.type&&";"===d.value||(t.set(i.Lexer.before_token),t.error("/syntax/se-75")),h}},7939:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.is_name=e.parse_expression=void 0;const r=n(150),i=n(4641),a=n(697),o=n(374),s=n(3163),l=n(3852),c=n(8706),d=n(9641),h=n(8397),u=n(7464),p=n(3680),f=n(2392);e.parse_expression=function t(e,n,m,g=!1,y=!1){let v=new Array;for(;;){let b=e.get(),w=i.Lexer.get_token(e,m);for(;("operator"===w.type||"keyword"===w.type)&&a.left_unary_operator_impl.hasOwnProperty(w.value);)g&&e.error("/syntax/se-21"),v.push({operator:w.value,unary:!0,precedence:a.left_unary_operator_precedence[w.value],where:b}),b=e.get(),w=i.Lexer.get_token(e,m);let x={parent:n,where:b};if("grouping"===w.type&&"("===w.value){x.petype="group",x.sub=t(e,n,m),x.children=[x.sub];let r=i.Lexer.get_token(e,m);"grouping"===r.type&&")"===r.value||(e.set(i.Lexer.before_token),e.error("/syntax/se-22")),x.step=function(){let t=this.stack[this.stack.length-1],e=t.ip[t.ip.length-1],n=t.pe[t.pe.length-1];return 0===e?(t.pe.push(n.sub),t.ip.push(-1),!1):(t.pe.pop(),t.ip.pop(),!1)},x.sim=d.simfalse}else if("keyword"===w.type&&"null"===w.value)x.petype="constant",x.typedvalue={type:(0,l.get_program)(n).types[h.Typeid.typeid_null],value:{b:null}},x.step=s.constantstep,x.sim=d.simfalse;else if("keyword"!==w.type||"true"!==w.value&&"false"!==w.value)if("integer"===w.type){let t=w.value;t>2147483647&&(e.set(i.Lexer.before_token),e.error("/syntax/se-23")),t|=0,x.petype="constant",x.typedvalue={type:(0,l.get_program)(n).types[h.Typeid.typeid_integer],value:{b:t}},x.step=s.constantstep,x.sim=d.simfalse}else if("real"===w.type){let t=w.value;x.petype="constant",x.typedvalue={type:(0,l.get_program)(n).types[h.Typeid.typeid_real],value:{b:t}},x.step=s.constantstep,x.sim=d.simfalse}else if("string"===w.type){let t=w.value;for(;w=i.Lexer.get_token(e,m,!0),"string"===w.type;)w=i.Lexer.get_token(e,m),t+=w.value;x.petype="constant",x.typedvalue={type:(0,l.get_program)(n).types[h.Typeid.typeid_string],value:{b:t}},x.step=s.constantstep,x.sim=d.simfalse}else if("["===w.value){x.petype="array",x.children=new Array,x.elements=new Array,x.step=function(){let t=this.stack[this.stack.length-1],e=t.pe[t.pe.length-1],n=t.ip[t.ip.length-1];if(n<e.elements.length)return t.pe.push(e.elements[n]),t.ip.push(-1),!1;{let n=new Array(e.elements.length);for(let r=0;r<e.elements.length;r++)n[e.elements.length-1-r]=t.temporaries.pop();return t.temporaries.push({type:this.program.types[h.Typeid.typeid_array],value:{b:n}}),t.pe.pop(),t.ip.pop(),!0}},x.sim=function(){let t=this.stack[this.stack.length-1],e=t.pe[t.pe.length-1];return t.ip[t.ip.length-1]>=e.elements.length};let r=!0;for(;!e.eof();){let a=i.Lexer.get_token(e,m,!0);if("grouping"===a.type&&"]"===a.value){i.Lexer.get_token(e,m);break}if(r)r=!1;else if("delimiter"===a.type&&","===a.value||e.error("/syntax/se-24"),i.Lexer.get_token(e,m),a=i.Lexer.get_token(e,m,!0),"grouping"===a.type&&"]"===a.value){i.Lexer.get_token(e,m);break}let o=t(e,n,m);x.elements.push(o),x.children.push(o)}e.eof()&&e.error("/syntax/se-25"),x.passResolveBack=function(t){return function(e){let n=(0,o.asConstant)(t,e);null!==n&&n!==t&&(t.petype="constant",t.typedvalue=n.typedvalue,t.step=s.constantstep,t.sim=d.simfalse)}}(x)}else if("{"===w.value){x.petype="dictionary",x.children=new Array,x.keys=new Array,x.values=new Array,x.step=function(){let t=this.stack[this.stack.length-1],e=t.pe[t.pe.length-1],n=t.ip[t.ip.length-1],i=e.keys.length;if(n<i)return t.pe.push(e.values[n]),t.ip.push(-1),!1;{let n={};for(let a=0;a<i;a++){let o=e.keys[a],s=t.temporaries[t.temporaries.length-i+a];r.ErrorHelper.assert(!n.hasOwnProperty("#"+o),"internal error; duplicate key in dictionary"),n["#"+o]=s}return t.temporaries=t.temporaries.slice(0,t.temporaries.length-i),t.temporaries.push({type:this.program.types[h.Typeid.typeid_dictionary],value:{b:n}}),t.pe.pop(),t.ip.pop(),!0}},x.sim=function(){let t=this.stack[this.stack.length-1],e=t.pe[t.pe.length-1];return t.ip[t.ip.length-1]>=e.keys.length};let a=!0,l={};for(;!e.eof();){let r=i.Lexer.get_token(e,m,!0);if("grouping"===r.type&&"}"===r.value){i.Lexer.get_token(e,m);break}if(a)a=!1;else if("delimiter"===r.type&&","===r.value||e.error("/syntax/se-27"),i.Lexer.get_token(e,m),r=i.Lexer.get_token(e,m,!0),"grouping"===r.type&&"}"===r.value){i.Lexer.get_token(e,m);break}r=i.Lexer.get_token(e,m),"string"!==r.type&&"identifier"!==r.type&&(e.set(i.Lexer.before_token),e.error("/syntax/se-28")),l.hasOwnProperty("#"+r.value)&&(e.set(i.Lexer.before_token),e.error("/syntax/se-26",[r.value])),l["#"+r.value]=!0,x.keys.push(r.value),r=i.Lexer.get_token(e,m),"operator"===r.type&&":"===r.value||(e.set(i.Lexer.before_token),e.error("/syntax/se-29"));let o=t(e,n,m);x.values.push(o),x.children.push(o)}e.eof()&&e.error("/syntax/se-30"),x.passResolveBack=function(t){return function(e){let n=(0,o.asConstant)(t,e);null!==n&&n!==t&&(t.petype="constant",t.typedvalue=n.typedvalue,t.step=s.constantstep,t.sim=d.simfalse)}}(x)}else if("identifier"===w.type||"keyword"===w.type&&"super"===w.value)x.petype="name",x.name=w.value,"keyword"==w.type&&"super"==w.value&&(w=i.Lexer.get_token(e,m),"delimiter"===w.type&&"."===w.value||(e.set(i.Lexer.before_token),e.error("/syntax/se-8")),w=i.Lexer.get_token(e,m),"identifier"!==w.type&&(e.set(i.Lexer.before_token),e.error("/syntax/se-9")),x.name=w.value,x.super=!0),x.passResolve=function(t){return function(e){if(t.hasOwnProperty("super")){let n=(0,l.get_type)(t.parent);null===n&&e.error("/syntax/se-6"),n.hasOwnProperty("superclass")||e.error("/syntax/se-7"),t.reference=(0,f.resolve_name)(e,t.name,n.superclass,"expression").names[t.name],t.reference.hasOwnProperty("access")&&"private"===t.reference.access&&e.error("/name/ne-8",["name lookup",t.name,c.TScript.displayname(t.reference)])}else t.reference=(0,f.resolve_name)(e,t.name,t.parent,"expression").names[t.name];if("attribute"===t.reference.petype||"method"===t.reference.petype){let n=(0,l.get_type)(t.parent),i=(0,l.get_type)(t.reference);r.ErrorHelper.assert(n&&c.TScript.isDerivedFrom(n,i.id));let a=(0,l.get_function)(t.parent);a&&"method"!==a.petype&&e.error("/syntax/se-13",["expression",t.reference.petype,t.name])}"variable"===t.reference.petype||"attribute"===t.reference.petype?(t.scope=t.reference.scope,t.id=t.reference.id,t.step=function(){let t=this.stack[this.stack.length-1],e=t.pe[t.pe.length-1],n=(t.ip[t.ip.length-1],null);return"global"===e.scope?n=this.stack[0].variables[e.id]:"local"===e.scope?n=t.variables[e.id]:"object"===e.scope?n=t.object.value.a[e.id]:r.ErrorHelper.assert(!1,"unknown scope: "+e.scope),n&&(null==n?void 0:n.type)&&(null==n?void 0:n.value)?t.temporaries.push(n):this.error("/name/ne-29",[c.TScript.displayname(e)]),t.pe.pop(),t.ip.pop(),!1},t.sim=d.simfalse):"function"===t.reference.petype?(t.petype="constant",t.typedvalue={type:(0,l.get_program)(t.parent).types[h.Typeid.typeid_function],value:{b:{func:t.reference}}},t.step=s.constantstep,t.sim=d.simfalse):"method"===t.reference.petype?(t.scope=t.reference.scope,t.id=t.reference.id,t.step=function(){let t=this.stack[this.stack.length-1],e=t.pe[t.pe.length-1],n=(t.ip[t.ip.length-1],{type:this.program.types[h.Typeid.typeid_function],value:{b:{func:e.reference,object:t.object}}});return t.temporaries.push(n),t.pe.pop(),t.ip.pop(),!1},t.sim=d.simfalse):"type"===t.reference.petype?(t.petype="constant",t.typedvalue={type:(0,l.get_program)(t.parent).types[h.Typeid.typeid_type],value:{b:t.reference}},t.step=s.constantstep,t.sim=d.simfalse):"namespace"===t.reference.petype&&y||(t.petype="non-value name")}}(x),x.passResolveBack=function(t){return function(e){"non-value name"==t.petype&&(e.set(t.where),"namespace"===t.reference.petype?e.error("/name/ne-11"):e.error("/name/ne-10",[t.name]));let n=(0,o.asConstant)(t,e);null!==n&&n!==t&&(t.petype="constant",t.typedvalue=n.typedvalue,t.step=s.constantstep,t.sim=d.simfalse)}}(x);else if("keyword"===w.type&&"this"===w.value){let t=(0,l.get_function)(n);if("method"===t.petype){let e=t.parent;r.ErrorHelper.assert("type"===e.petype,"cannot find class around this"),x.petype="this",x.step=function(){let t=this.stack[this.stack.length-1];return t.temporaries.push(t.object),t.pe.pop(),t.ip.pop(),!1},x.sim=d.simfalse}else"function"!==t.petype||t.hasOwnProperty("name")||"(anonymous)"!==t.displayname?(e.set(i.Lexer.before_token),e.error("/syntax/se-47")):(x.petype="this",x.step=function(){let e=this.stack[this.stack.length-1],n={type:this.program.types[h.Typeid.typeid_function],value:{b:{func:t}}};return e.enclosed&&(n.value.b.enclosed=e.enclosed),e.temporaries.push(n),e.pe.pop(),e.ip.pop(),!1},x.sim=d.simfalse)}else if("keyword"===w.type&&"function"===w.value){let r={petype:"function",children:new Array,parent:n,where:b,displayname:"(anonymous)",commands:new Array,variables:new Array,names:{},closureparams:new Array,params:new Array,step:s.scopestep,sim:d.simfalse};if(w=i.Lexer.get_token(e,m),"grouping"===w.type&&"["===w.value){for(;;){let a=e.get(),o=i.Lexer.get_token(e,m);if("grouping"===o.type&&"]"===o.value)break;0!==r.closureparams.length&&("delimiter"===o.type&&","===o.value||e.error("/syntax/se-31"),a=e.get(),o=i.Lexer.get_token(e,m)),"identifier"!==o.type&&(e.set(i.Lexer.before_token),e.error("/syntax/se-32"));let s=o.value;r.names.hasOwnProperty(s)&&(e.set(i.Lexer.before_token),e.error("/name/ne-17",[s]));let l=r.variables.length,c={petype:"variable",children:new Array,where:a,parent:x,name:s,id:l,scope:"local"};r.children.push(c),o=i.Lexer.get_token(e,m,!0),"operator"===o.type&&"="===o.value?i.Lexer.get_token(e,m):("delimiter"===o.type&&","===o.value||"grouping"===o.type&&"]"===o.value||(e.set(i.Lexer.before_token),e.error("/syntax/se-31")),e.set(a));let d=t(e,n,m);r.children.push(d);let h={name:s,initializer:d};r.names[s]=c,r.variables[l]=c,r.closureparams.push(h)}w=i.Lexer.get_token(e,m)}else"grouping"===w.type&&"("===w.value||(e.set(i.Lexer.before_token),e.error("/syntax/se-35"));for("grouping"===w.type&&"("===w.value||(e.set(i.Lexer.before_token),e.error("/syntax/se-36",["anonymous function"]));;){let a=i.Lexer.get_token(e,m,!0);if("grouping"===a.type&&")"===a.value){i.Lexer.get_token(e,m);break}0!==r.params.length&&("delimiter"===a.type&&","===a.value||(e.set(i.Lexer.before_token),e.error("/syntax/se-37")),i.Lexer.get_token(e,m));let o=e.get();a=i.Lexer.get_token(e,m),"identifier"!==a.type&&(e.set(i.Lexer.before_token),e.error("/syntax/se-33"));let s=a.value,l=r.variables.length,c={petype:"variable",where:o,parent:r,name:s,id:l,scope:"local"};r.children.push(c);let d={name:s};if(a=i.Lexer.get_token(e,m,!0),"operator"===a.type&&"="===a.value){i.Lexer.get_token(e,m);let a=t(e,n,m);"constant"!==a.petype&&e.error("/syntax/se-38"),d.defaultvalue=a.typedvalue,r.children.push(d.defaultvalue)}r.names.hasOwnProperty(s)&&(e.set(o),e.error("/name/ne-16",[s])),r.names[s]=c,r.variables[l]=c,r.params.push(d)}for(w=i.Lexer.get_token(e,m),"grouping"===w.type&&"{"===w.value||(e.set(i.Lexer.before_token),e.error("/syntax/se-40",["anonymous function"])),e.indent.push(-1-w.line);;){if(w=i.Lexer.get_token(e,m,!0),"grouping"===w.type&&"}"===w.value){if(e.indent.pop(),m.checkstyle&&!e.builtin()){let t=e.indentation(),n=e.indent[e.indent.length-1];n>=0&&n>t&&e.error("/style/ste-2")}i.Lexer.get_token(e,m);break}let t=(0,p.parse_statement_or_declaration)(e,r,m);r.commands.push(t),r.children.push(t)}x.petype="closure",x.children=[r],x.func=r,x.step=function(){let t=this.stack[this.stack.length-1],e=t.pe[t.pe.length-1],n=t.ip[t.ip.length-1],r=e.func.closureparams.length;if(n<r)return t.pe.push(e.func.closureparams[n].initializer),t.ip.push(-1),!1;{let n=t.temporaries.slice(t.temporaries.length-r);return t.temporaries.splice(t.temporaries.length-r,r),t.temporaries.push({type:this.program.types[h.Typeid.typeid_function],value:{b:{func:e.func,enclosed:n}}}),t.pe.pop(),t.ip.pop(),!1}},x.sim=d.simfalse}else"keyword"===w.type?(e.set(b),e.error("/syntax/se-41",[w.value])):(e.set(b),e.error("/syntax/se-42",[w.value]));else x.petype="constant",x.typedvalue={type:(0,l.get_program)(n).types[h.Typeid.typeid_boolean],value:{b:"true"===w.value}},x.step=s.constantstep,x.sim=d.simfalse;for(;!e.eof();){let a=e.get();if(w=i.Lexer.get_token(e,m,!0),"delimiter"===w.type&&"."===w.value){i.Lexer.get_token(e,m);let t=i.Lexer.get_token(e,m);"identifier"!==t.type&&(e.set(i.Lexer.before_token),e.error("/syntax/se-43"));let o={petype:"access of member "+t.value,children:[x],where:a,parent:n,object:x,member:t.value,step:function(){let t=this.stack[this.stack.length-1],n=t.pe[t.pe.length-1];if(0===t.ip[t.ip.length-1])return t.pe.push(n.object),t.ip.push(-1),!1;{let i=t.temporaries.pop(),a=null;if(c.TScript.isDerivedFrom(i.type,h.Typeid.typeid_type)){let t=i.value.b,r=t;for(;r;){if(r.staticmembers.hasOwnProperty(n.member)&&"public"===r.staticmembers[n.member].access){a=r.staticmembers[n.member];break}r=r.superclass}null===a&&e.error("/name/ne-12",[c.TScript.displayname(t),n.member])}else{let t=i.type,r=t;for(;r;){if(r.members.hasOwnProperty(n.member)&&"public"===r.members[n.member].access){a=r.members[n.member];break}if(r.staticmembers.hasOwnProperty(n.member)&&"public"===r.staticmembers[n.member].access){a=r.staticmembers[n.member];break}r=r.superclass}null===a&&e.error("/name/ne-13",[c.TScript.displayname(t),n.member])}if("method"===a.petype)t.temporaries.push({type:this.program.types[h.Typeid.typeid_function],value:{b:{func:a,object:i}}});else if("attribute"===a.petype)t.temporaries.push(i.value.a[a.id]);else if("function"===a.petype)t.temporaries.push({type:this.program.types[h.Typeid.typeid_function],value:{b:{func:a}}});else if("variable"===a.petype){let e=this.stack[0].variables[a.id];e&&(null==e?void 0:e.type)&&(null==e?void 0:e.value)?t.temporaries.push(e):this.error("/name/ne-29",[c.TScript.displayname(a)])}else"type"===a.petype?t.temporaries.push({type:this.program.types[h.Typeid.typeid_type],value:{b:a}}):r.ErrorHelper.assert(!1,"[member access] internal error; unknown member type "+a.petype);return t.pe.pop(),t.ip.pop(),!0}},sim:function(){let t=this.stack[this.stack.length-1];return 0!==t.ip[t.ip.length-1]},passResolve:function(t){var e;if(o.object.hasOwnProperty("passResolve")&&(o.object.passResolve(t),delete o.object.passResolve),(null===(e=o.object)||void 0===e?void 0:e.reference)&&("type"==o.object.reference.petype||"namespace"==o.object.reference.petype)){let e=o.object.reference.names[o.member];if(e)if("private"===e.access||"protected"===e.access){let e=o.object.reference;t.error("/name/ne-12",[c.TScript.displayname(e),o.member])}else o.petype="name",o.reference=e,o.name=o.member,delete o.member,delete o.object,o.children=new Array,"variable"===e.petype&&e.where.hasOwnProperty("pos")&&o.where.totalpos<e.where.totalpos&&t.error("/name/ne-5",["expression",o.name]),"variable"===e.petype?(o.scope=e.scope,o.id=e.id,o.step=function(){let t=this.stack[this.stack.length-1],e=t.pe[t.pe.length-1];return t.ip[t.ip.length-1],"global"===e.scope?t.temporaries.push(this.stack[0].variables[e.id]):"local"===e.scope?t.temporaries.push(t.variables[e.id]):"object"===e.scope?t.temporaries.push(t.object.value.a[e.id]):r.ErrorHelper.assert(!1,"unknown scope: "+e.scope),t.pe.pop(),t.ip.pop(),!1},o.sim=d.simfalse):"function"===e.petype?(o.petype="constant",o.typedvalue={type:(0,l.get_program)(n).types[h.Typeid.typeid_function],value:{b:{func:e}}},o.step=s.constantstep,o.sim=d.simfalse):"type"===e.petype?(o.petype="constant",o.typedvalue={type:(0,l.get_program)(n).types[h.Typeid.typeid_type],value:{b:e}},o.step=s.constantstep,o.sim=d.simfalse):"namespace"===e.petype&&y||("attribute"===e.petype||"method"===e.petype?t.error("/name/ne-30",[o.name]):o.petype="non-value name");else t.error("/name/ne-5",["expression",o.member])}},passResolveBack:function(t){"non-value name"==o.petype&&(t.set(o.where),t.error("/name/ne-10",[o.name]))}};x.parent=o,x=o}else if("grouping"===w.type&&"("===w.value){let t=(0,u.parse_call)(e,n,x,m);x.parent=t,x=t}else{if("grouping"!==w.type||"["!==w.value)break;{i.Lexer.get_token(e,m);let r=t(e,n,m),o=i.Lexer.get_token(e,m);"grouping"===o.type&&"]"===o.value||(e.set(i.Lexer.before_token),e.error("/syntax/se-44"));let s={petype:"item access",children:[x,r],where:a,parent:n,base:x,argument:r,step:function(){let t=this.stack[this.stack.length-1],n=t.pe[t.pe.length-1],r=t.ip[t.ip.length-1];if(0===r)return t.pe.push(n.base),t.ip.push(-1),!1;if(1===r)return t.pe.push(n.argument),t.ip.push(-1),!1;if(2===r){let n=t.temporaries.pop(),r=t.temporaries.pop();if(c.TScript.isDerivedFrom(r.type,h.Typeid.typeid_string))if(c.TScript.isDerivedFrom(n.type,h.Typeid.typeid_integer)){n.value.b<0?e.error("/argument-mismatch/am-21",[c.TScript.toString.call(this,n)]):n.value.b>=r.value.b.length&&e.error("/argument-mismatch/am-22",[c.TScript.toString.call(this,n),r.value.b.length]);let i=r.value.b.charCodeAt(n.value.b),a={type:this.program.types[h.Typeid.typeid_integer],value:{b:i}};t.temporaries.push(a)}else if(c.TScript.isDerivedFrom(n.type,h.Typeid.typeid_range)){let e=n.value.b.begin,i=n.value.b.end;e<0&&(e=0),i>r.value.b.length&&(i=r.value.b.length);let a=e<i?r.value.b.substring(e,i):"",o={type:this.program.types[h.Typeid.typeid_string],value:{b:a}};t.temporaries.push(o)}else e.error("/argument-mismatch/am-20",[c.TScript.toString.call(this,n),c.TScript.displayname(n.type)]);else if(c.TScript.isDerivedFrom(r.type,h.Typeid.typeid_array))if(c.TScript.isDerivedFrom(n.type,h.Typeid.typeid_integer))n.value.b<0?e.error("/argument-mismatch/am-23",[c.TScript.toString.call(this,n)]):n.value.b>=r.value.b.length?e.error("/argument-mismatch/am-24",[c.TScript.toString.call(this,n),r.value.b.length]):t.temporaries.push(r.value.b[n.value.b]);else if(c.TScript.isDerivedFrom(n.type,h.Typeid.typeid_range)){let e=n.value.b.begin,i=n.value.b.end;e<0&&(e=0),i>r.value.b.length&&(i=r.value.b.length);let a=new Array;for(let t=e;t<i;t++)a.push(r.value.b[t]);let o={type:this.program.types[h.Typeid.typeid_array],value:{b:a}};t.temporaries.push(o)}else e.error("/argument-mismatch/am-26",[c.TScript.toString.call(this,n),c.TScript.displayname(n.type)]);else if(c.TScript.isDerivedFrom(r.type,h.Typeid.typeid_dictionary))c.TScript.isDerivedFrom(n.type,h.Typeid.typeid_string)?r.value.b.hasOwnProperty("#"+n.value.b)?t.temporaries.push(r.value.b["#"+n.value.b]):e.error("/argument-mismatch/am-27",[n.value.b]):e.error("/argument-mismatch/am-28",[c.TScript.displayname(n.type)]);else if(c.TScript.isDerivedFrom(r.type,h.Typeid.typeid_range))if(c.TScript.isDerivedFrom(n.type,h.Typeid.typeid_integer)){let i=Math.max(0,r.value.b.end-r.value.b.begin);(n.value.b<0||n.value.b>=i)&&e.error("/argument-mismatch/am-29",[c.TScript.toString.call(this,n),i]);let a={type:this.program.types[h.Typeid.typeid_integer],value:{b:r.value.b.begin+n.value.b}};t.temporaries.push(a)}else if(c.TScript.isDerivedFrom(n.type,h.Typeid.typeid_range)){let e=Math.max(0,r.value.b.end-r.value.b.begin),i=n.value.b.begin,a=n.value.b.end;i<0&&(i=0),a>e&&(a=e);let o={type:this.program.types[h.Typeid.typeid_range],value:{b:{begin:r.value.b.begin+i,end:r.value.b.begin+a}}};t.temporaries.push(o)}else e.error("/argument-mismatch/am-30",[c.TScript.toString.call(this,n),c.TScript.displayname(n.type)]);else e.error("/argument-mismatch/am-31",[c.TScript.displayname(r.type)]);return!0}return t.pe.pop(),t.ip.pop(),!1},sim:function(){let t=this.stack[this.stack.length-1];return 2===t.ip[t.ip.length-1]}};x.parent=s,x=s}}}if(v.push(x),w=i.Lexer.get_token(e,m,!0),"operator"!==w.type&&"keyword"!==w.type||!a.binary_operator_impl.hasOwnProperty(w.value))break;g&&e.error("/syntax/se-21"),v.push({operator:w.value,unary:!1,precedence:a.binary_operator_precedence[w.value],where:b}),i.Lexer.get_token(e,m)}let b=function(t){r.ErrorHelper.assert(t>=0&&t<v.length,"[processBinary] index out of range"),r.ErrorHelper.assert(v[t].hasOwnProperty("precedence")&&!v[t].unary,"[processBinary] binary operator expected"),r.ErrorHelper.assert(a.binary_operator_impl.hasOwnProperty(v[t].operator),"[processBinary] cannot find binary operator "+v[t].operator),r.ErrorHelper.assert(t>0&&v.length>t+1,"[processBinary] corrupted stack"),r.ErrorHelper.assert(!v[t-1].hasOwnProperty("precedence"),"[processBinary] corrupted stack"),r.ErrorHelper.assert(!v[t+1].hasOwnProperty("precedence"),"[processBinary] corrupted stack");let e={petype:"binary operator "+v[t].operator,children:[v[t-1],v[t+1]],where:v[t].where,parent:n,operator:v[t].operator,lhs:v[t-1],rhs:v[t+1],step:function(){let t=this.stack[this.stack.length-1],e=t.pe[t.pe.length-1],n=t.ip[t.ip.length-1];if(0===n)return t.pe.push(e.lhs),t.ip.push(-1),!1;if(1===n)return t.pe.push(e.rhs),t.ip.push(-1),!1;{let n=t.temporaries.pop(),r=t.temporaries.pop(),i=a.binary_operator_impl[e.operator].call(this,r,n);return t.temporaries.push(i),t.pe.pop(),t.ip.pop(),!0}},sim:function(){let t=this.stack[this.stack.length-1];return t.ip[t.ip.length-1]>1},passResolveBack:function(t){let n=(0,o.asConstant)(e,t);null!==n&&n!==e&&(e.petype="constant",e.typedvalue=n.typedvalue,e.step=s.constantstep,e.sim=d.simfalse)}};v[t-1].parent=e,v[t+1].parent=e,v.splice(t-1,3,e)},w=function(t,e){if(r.ErrorHelper.assert(t<v.length,"[reduce] invalid position"),v[t].hasOwnProperty("precedence")&&(r.ErrorHelper.assert(v[t].unary,"[reduce] unary operator expected"),w(t+1,v[t].precedence),r.ErrorHelper.assert(!v[t+1].hasOwnProperty("precedence"),"[reduce] corrupted stack"),function(t){r.ErrorHelper.assert(t>=0&&t<v.length,"[processUnary] index out of range"),r.ErrorHelper.assert(v[t].hasOwnProperty("precedence")&&v[t].unary,"[processUnary] unary operator expected"),r.ErrorHelper.assert(a.left_unary_operator_impl.hasOwnProperty(v[t].operator),"[processUnary] cannot find left-unary operator "+v[t].operator),r.ErrorHelper.assert(v.length>t+1,"[processUnary] corrupted stack"),r.ErrorHelper.assert(!v[t+1].hasOwnProperty("precedence"),"[processUnary] corrupted stack");let e={petype:"left-unary operator "+v[t].operator,children:[v[t+1]],where:v[t].where,parent:n,operator:v[t].operator,argument:v[t+1],step:function(){let t=this.stack[this.stack.length-1],e=t.pe[t.pe.length-1];if(0===t.ip[t.ip.length-1])return t.pe.push(e.argument),t.ip.push(-1),!1;{let n=t.temporaries.pop();return t.temporaries.push(a.left_unary_operator_impl[e.operator].call(this,n)),t.pe.pop(),t.ip.pop(),!0}},sim:function(){let t=this.stack[this.stack.length-1];return 0!==t.ip[t.ip.length-1]},passResolveBack:function(t){let n=(0,o.asConstant)(e,t);null!==n&&n!==e&&(e.petype="constant",e.typedvalue=n.typedvalue,e.step=s.constantstep,e.sim=d.simfalse)}};v[t+1].parent=e,v.splice(t,2,e)}(t),r.ErrorHelper.assert(!v[t].hasOwnProperty("precedence"),"[reduce] corrupted stack")),!(e<=0))for(;w(t,e-1),!(t+1>=v.length||(r.ErrorHelper.assert(v[t+1].hasOwnProperty("precedence")&&!v[t+1].unary&&v[t+1].precedence>=e,"[reduce] operator mismatch"),v[t+1].precedence>e));)r.ErrorHelper.assert(t+2<v.length,"[reduce] invalid RHS position"),w(t+2,e-1),b(t+1),r.ErrorHelper.assert(!v[t].hasOwnProperty("precedence"),"[reduce] corrupted stack")};return w(0,10),r.ErrorHelper.assert(1===v.length,"[parse_expression] stack was not reduced"),g&&("group"===v[0].petype&&e.error("/argument-mismatch/am-32",["expression in parentheses"]),"constant"===v[0].petype&&e.error("/argument-mismatch/am-32",["a constant"]),"function"===v[0].petype&&e.error("/argument-mismatch/am-32",["a function"]),"function call"===v[0].petype&&e.error("/argument-mismatch/am-32",["the result of a function call"])),v[0]},e.is_name=function(t){for(;"access of member "==t.petype.substr(0,17);)t=t.object;return"name"==t.petype}},2392:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.resolve_names=e.resolve_namespace_name=e.resolve_name=void 0;const r=n(8706),i=n(150),a=n(3852);e.resolve_name=function(t,e,n,o){let s="/name/ne-5",l=[o,e],c=n;for(;c;){if(c.hasOwnProperty("names")&&c.names.hasOwnProperty(e)){let r=c.names[e];if("variable"===r.petype||"function"===r.petype||"attribute"===r.petype||"method"===r.petype){let s=(0,a.get_context)(c);"variable"!==r.petype&&"global scope"===s.petype?i.ErrorHelper.assert("function"===r.petype):("variable"!==r.petype||"global scope"!==c.petype&&"namespace"!==c.petype)&&("type"===s.petype?"attribute"!==r.petype&&"method"!==r.petype||(0,a.get_type)(n)!==s&&t.error("/name/ne-6",[o,e]):(i.ErrorHelper.assert("variable"===r.petype||"function"===r.petype),"variable"===r.petype&&(0,a.get_function)(n)!==s&&t.error("/name/ne-7",[o,e])))}if("variable"!==r.petype||"type"===r.parent.petype||!r.hasOwnProperty("where")||r.where.totalpos<t.totalpos)return c}if("type"===c.petype){let t=c.superclass;for(;t;){if(t.names.hasOwnProperty(e)){if("private"!==t.names[e].access)return t;s="/name/ne-8",l=[o,e,r.TScript.displayname(t)]}t=t.superclass}}if(!c.hasOwnProperty("parent"))break;c=c.parent}t.error(s,l)},e.resolve_namespace_name=function(t,e){for(;e;){if(e.hasOwnProperty("names")&&e.names.hasOwnProperty(t)){let n=e.names[t];return"namespace"===n.petype?n:null}if(!e.hasOwnProperty("parent"))return null;e=e.parent}},e.resolve_names=function t(e,n){if(e.hasOwnProperty("resolve")){var r=n.get();n.set(e.where),e.resolve(n),delete e.resolve,n.set(r)}if(e.hasOwnProperty("commands"))for(let r of e.commands)t(r,n);if("type"==e.type){for(let r in e.members)t(e.members[r],n);for(let r in e.staticmembers)t(e.staticmembers[r],n)}}},4697:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parse_for=void 0;const r=n(150),i=n(4641),a=n(3852),o=n(8706),s=n(8397),l=n(7939),c=n(1920);e.parse_for=function(t,e,n){let d=t.get(),h=i.Lexer.get_token(t,n);r.ErrorHelper.assert("keyword"===h.type&&"for"===h.value,"[parse_for] internal error");let u={petype:"for-loop",children:new Array,where:d,parent:e,names:{},step:function(){let e=this.stack[this.stack.length-1],n=e.pe[e.pe.length-1],i=e.ip[e.ip.length-1];if(-2===i)return e.temporaries.pop(),e.temporaries.pop(),e.pe.pop(),e.ip.pop(),!1;if(-1===i)return e.ip[e.ip.length-1]=3,!1;if(0===i)return e.pe.push(n.iterable),e.ip.push(-1),!1;if(1===i){let n=e.temporaries.pop(),r=o.TScript.isDerivedFrom(n.type,s.Typeid.typeid_range)?{rangemarker:null,begin:n.value.b.begin,end:n.value.b.end,length:Math.max(0,n.value.b.end-n.value.b.begin)}:new Array;if(o.TScript.isDerivedFrom(n.type,s.Typeid.typeid_array))for(let t=0;t<n.value.b.length;t++)r.push(n.value.b[t]);else o.TScript.isDerivedFrom(n.type,s.Typeid.typeid_range)||t.error("/argument-mismatch/am-34",[o.TScript.displayname(n.type)]);return e.temporaries.push(r),e.temporaries.push(0),!1}if(2===i){let t=e.temporaries[e.temporaries.length-2],i=e.temporaries[e.temporaries.length-1];if(i>=t.length)e.temporaries.pop(),e.temporaries.pop(),e.pe.pop(),e.ip.pop();else if(n.hasOwnProperty("var_id")){let a=t.hasOwnProperty("rangemarker")?{type:this.program.types[s.Typeid.typeid_integer],value:{b:t.begin+i|0}}:t[i];"global"===n.var_scope?this.stack[0].variables[n.var_id]=a:"local"===n.var_scope?e.variables[n.var_id]=a:"object"===n.var_scope?e.object.value.a[n.var_id]=a:r.ErrorHelper.assert(!1,"unknown scope: "+n.var_scope)}return!0}return 3===i?(e.pe.push(n.body),e.ip.push(-1),!1):4===i?(e.temporaries[e.temporaries.length-1]++,e.ip[e.ip.length-1]=1,!1):void 0},sim:function(){let t=this.stack[this.stack.length-1];return 2===t.ip[t.ip.length-1]}};if(d=t.get(),h=i.Lexer.get_token(t,n,!0),"keyword"===h.type&&"var"===h.value){i.Lexer.get_token(t,n),h=i.Lexer.get_token(t,n),"identifier"!==h.type&&(t.set(i.Lexer.before_token),t.error("/syntax/se-70"));let r=(0,a.get_function)(e),o=r.variables.length,s={petype:"variable",where:d,parent:u,name:h.value,id:o,scope:"local"};r.variables.push(s),u.names[h.value]=s,u.var_id=o,u.var_scope="local",u.children.push(s),h=i.Lexer.get_token(t,n),"identifier"===h.type&&"in"===h.value||(t.set(i.Lexer.before_token),t.error("/syntax/se-71")),u.iterable=(0,l.parse_expression)(t,e,n),u.children.push(u.iterable),h=i.Lexer.get_token(t,n),"keyword"===h.type&&"do"===h.value||(t.set(i.Lexer.before_token),t.error("/syntax/se-72"))}else{t.set(d);let r=(0,l.parse_expression)(t,u,n);if(h=i.Lexer.get_token(t,n),"identifier"===h.type&&"in"===h.value){(0,l.is_name)(r)||t.error("/syntax/se-10",["for-loop"]),u.children.unshift(r);let a=null==r?void 0:r.passResolveBack;u.passResolveBack=function(t){a&&a(t),u.children.shift(),"name"!==r.petype&&"constant"!==r.petype&&t.error("/name/ne-28"),r.reference&&(r=r.reference),"variable"!==r.petype&&"attribute"!==r.petype&&t.error("/argument-mismatch/am-35",[r.name,r.petype]),u.var_id=r.id,u.var_scope=r.scope},u.iterable=(0,l.parse_expression)(t,e,n),u.children.push(u.iterable),h=i.Lexer.get_token(t,n),"keyword"===h.type&&"do"===h.value||(t.set(i.Lexer.before_token),t.error("/syntax/se-72"))}else"keyword"===h.type&&"do"===h.value?(u.iterable=r,u.children.push(u.iterable)):(t.set(i.Lexer.before_token),t.error("/syntax/se-73"))}return u.body=(0,c.parse_statement)(t,u,n),u.children.push(u.body),u}},5727:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parse_function=void 0;const r=n(150),i=n(4641),a=n(3163),o=n(9641),s=n(7939),l=n(3680);e.parse_function=function(t,e,n,c=void 0){var d;void 0===c&&(c="function");let h=t.get(),u=i.Lexer.get_token(t,n);r.ErrorHelper.assert("keyword"===u.type&&"function"===u.value,"[parse_function] internal error"),u=i.Lexer.get_token(t,n),"identifier"!==u.type&&(t.set(i.Lexer.before_token),t.error("/syntax/se-52"));let p=u.value;e.names.hasOwnProperty(p)&&(t.set(i.Lexer.before_token),t.error("/name/ne-15",[p])),n.checkstyle&&!t.builtin()&&p[0]>="A"&&p[0]<="Z"&&(t.set(i.Lexer.before_token),t.error("/style/ste-3",["function",p]));let f={petype:c,children:new Array,where:h,declaration:!0,parent:e,commands:new Array,variables:new Array,name:p,names:{},params:new Array,step:a.scopestep,sim:o.simfalse};for(e.names[p]=f,u=i.Lexer.get_token(t,n),"grouping"===u.type&&"("===u.value||(t.set(i.Lexer.before_token),t.error("/syntax/se-36",["function declaration"]));;){let e=i.Lexer.get_token(t,n,!0);if("grouping"===e.type&&")"===e.value){i.Lexer.get_token(t,n);break}0!==f.params.length&&("delimiter"===e.type&&","===e.value||t.error("/syntax/se-37"),i.Lexer.get_token(t,n));let r=t.get();e=i.Lexer.get_token(t,n),"identifier"!==e.type&&(t.set(i.Lexer.before_token),t.error("/syntax/se-33"));let a=e.value,o=f.variables.length,l={petype:"variable",where:r,parent:f,name:a,id:o,scope:"local"};f.children.push(l);let c={name:a};if(e=i.Lexer.get_token(t,n,!0),"operator"===e.type&&"="===e.value){i.Lexer.get_token(t,n),c.defaultvalue=(0,s.parse_expression)(t,f,n),f.children.push(c.defaultvalue);let e=null===(d=c.defaultvalue)||void 0===d?void 0:d.passResolveBack;c.defaultvalue.passResolveBack=function(t){e&&e(t),"constant"!==c.defaultvalue.petype&&(t.set(c.defaultvalue.where),t.error("/syntax/se-38")),c.defaultvalue=c.defaultvalue.typedvalue}}f.names.hasOwnProperty(a)&&(t.set(i.Lexer.before_token),t.error("/name/ne-16",[a])),f.names[a]=l,f.variables[o]=l,f.params.push(c)}for(u=i.Lexer.get_token(t,n),"grouping"===u.type&&"{"===u.value||(t.set(i.Lexer.before_token),t.error("/syntax/se-40",["function declaration"])),t.indent.push(-1-u.line);;){if(u=i.Lexer.get_token(t,n,!0),"grouping"===u.type&&"}"===u.value){if(t.indent.pop(),n.checkstyle&&!t.builtin()){let e=t.indentation(),n=t.indent[t.indent.length-1];n>=0&&n!==e&&t.error("/style/ste-2")}i.Lexer.get_token(t,n);break}let e=(0,l.parse_statement_or_declaration)(t,f,n);f.commands.push(e),f.children.push(e)}if(0===f.commands.length&&t.impl){let e=new Array,n=f;for(;n.parent;)e.unshift(n.name),n=n.parent;let r=t.impl;for(let t=0;t<e.length;t++){if(!r.hasOwnProperty(e[t])){r=null;break}r=r[e[t]]}if(r)if("function"==typeof r)f.step=function(){let t=this.stack[this.stack.length-1],e=t.pe[t.pe.length-1],n=t.variables;t.object&&n.unshift(t.object);let r=e.body.apply(this,n);return 0===this.stack.length||(this.stack.pop(),t=this.stack[this.stack.length-1],t.temporaries.push(r)),!1},f.sim=o.simfalse,f.body=r;else{if(!r.hasOwnProperty("step"))throw"[parse_function] invalid built-in function";f.step=r.step,f.sim=r.hasOwnProperty("sim")?r.sim:o.simfalse}}return f}},463:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parse_ifthenelse=void 0;const r=n(150),i=n(4641),a=n(697),o=n(8706),s=n(9641),l=n(8397),c=n(7939),d=n(1920);e.parse_ifthenelse=function(t,e,n){let h=t.get(),u=i.Lexer.get_token(t,n);r.ErrorHelper.assert("keyword"===u.type&&"if"===u.value,"[parse_ifthenelse] internal error");let p={petype:"conditional statement",children:new Array,where:h,parent:e,step:function(){let e=this.stack[this.stack.length-1],n=e.pe[e.pe.length-1],r=e.ip[e.ip.length-1];if(0===r)return e.pe.push(n.condition),e.ip.push(-1),!1;if(1===r){let r=e.temporaries.pop();return o.TScript.isDerivedFrom(r.type,l.Typeid.typeid_boolean)||t.error("/argument-mismatch/am-33",[o.TScript.displayname(r.type)]),r.value.b?(e.pe.push(n.then_part),e.ip.push(-1)):n.hasOwnProperty("else_part")?(e.pe.push(n.else_part),e.ip.push(-1)):(e.pe.pop(),e.ip.pop()),!1}return e.pe.pop(),e.ip.pop(),!1},sim:s.simfalse};return p.condition=(0,c.parse_expression)(t,e,n),p.children.push(p.condition),u=i.Lexer.get_token(t,n),"keyword"===u.type&&"then"===u.value||(t.set(i.Lexer.before_token),t.error("/syntax/se-69")),p.then_part=(0,d.parse_statement)(t,e,n),p.children.push(p.then_part),"else"===(0,a.peek_keyword)(t)&&(u=i.Lexer.get_token(t,n),r.ErrorHelper.assert("keyword"===u.type&&"else"===u.value,"[parse_ifthenelse] internal error"),p.else_part=(0,d.parse_statement)(t,e,n),p.children.push(p.else_part)),p}},3350:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parse_include=void 0;const r=n(150),i=n(4641),a=n(697);e.parse_include=function(t,e,n){if("include"!==(0,a.peek_keyword)(t))return null;let o=i.Lexer.get_token(t,n);r.ErrorHelper.assert("keyword"===o.type&&"include"===o.value,"[parse_include] internal error"),o=i.Lexer.get_token(t,n),"string"!==o.type&&(t.set(i.Lexer.before_token),t.error("/syntax/se-91"));const s=o.value;return o=i.Lexer.get_token(t,n),"delimiter"===o.type&&";"===o.value||(t.set(i.Lexer.before_token),t.error("/syntax/se-92")),{filename:s,position:i.Lexer.before_token}}},5105:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parse_lhs=void 0;const r=n(150),i=n(697),a=n(8706),o=n(9641),s=n(8397),l=n(7939);e.parse_lhs=function(t,e,n){let c=(0,l.parse_expression)(t,e,n,!0),d=c.passResolveBack;return c.passResolveBack=function(t){d&&d(t),"name"===c.petype?("variable"!==c.reference.petype&&"attribute"!==c.reference.petype&&t.error("/argument-mismatch/am-32",["name of type '"+c.reference.petype+"'"]),c.step=function(){let t=this.stack[this.stack.length-1],e=t.pe[t.pe.length-1],n=(t.ip[t.ip.length-1],t.temporaries.pop()),o=t.temporaries.pop(),s=null;"global"===e.scope?s=this.stack[0].variables:"local"===e.scope?s=t.variables:"object"===e.scope?s=t.object.value.a:r.ErrorHelper.assert(!1,"unknown scope type "+e.scope);let l=e.id,c=s[l];if(c&&(null==c?void 0:c.type)&&(null==c?void 0:c.value)||this.error("/name/ne-29",[a.TScript.displayname(e)]),"="!==n){let t=n.substring(0,n.length-1);o=i.binary_operator_impl[t].call(this,s[l],o)}return s[l]={type:o.type,value:o.value},t.pe.pop(),t.ip.pop(),!0},c.sim=o.simtrue):"item access"===c.petype?(c.step=function(){let e=this.stack[this.stack.length-1],n=e.pe[e.pe.length-1],r=e.ip[e.ip.length-1];if(0===r)return e.pe.push(n.base),e.ip.push(-1),!1;if(1===r)return e.pe.push(n.argument),e.ip.push(-1),!1;{let n,r=e.temporaries.pop(),o=e.temporaries.pop(),l=e.temporaries.pop(),c=e.temporaries.pop();if(a.TScript.isDerivedFrom(o.type,s.Typeid.typeid_string)?t.error("/argument-mismatch/am-32",["a substring"]):a.TScript.isDerivedFrom(o.type,s.Typeid.typeid_array)?a.TScript.isDerivedFrom(r.type,s.Typeid.typeid_integer)?(r.value.b<0?t.error("/argument-mismatch/am-23",[a.TScript.toString.call(this,r)]):r.value.b>=o.value.b.length&&t.error("/argument-mismatch/am-24",[a.TScript.toString.call(this,r),o.value.b.length]),n=r.value.b):t.error("/argument-mismatch/am-25",[a.TScript.toString.call(this,r),a.TScript.displayname(r.type)]):a.TScript.isDerivedFrom(o.type,s.Typeid.typeid_dictionary)?(a.TScript.isDerivedFrom(r.type,s.Typeid.typeid_string)||t.error("/argument-mismatch/am-28",[a.TScript.displayname(r.type)]),n="#"+r.value.b):t.error("/argument-mismatch/am-31b",[o.type]),"="!==l){let e=l.substring(0,l.length-1);a.TScript.isDerivedFrom(o.type,s.Typeid.typeid_dictionary)&&(o.value.b.hasOwnProperty(n)||t.error("/argument-mismatch/am-27",[r.value.b])),c=i.binary_operator_impl[e].call(this,o.value.b[n],c)}return o.value.b[n]={type:c.type,value:c.value},e.pe.pop(),e.ip.pop(),!0}},c.sim=function(){let t=this.stack[this.stack.length-1];return t.ip[t.ip.length-1]>1}):"access of member "===c.petype.substring(0,17)?(c.step=function(){let e=this.stack[this.stack.length-1],n=e.pe[e.pe.length-1];if(0===e.ip[e.ip.length-1])return e.pe.push(n.object),e.ip.push(-1),!1;{let o=e.temporaries.pop(),l=e.temporaries.pop(),c=e.temporaries.pop(),d=null;if(a.TScript.isDerivedFrom(o.type,s.Typeid.typeid_type)){let e=o.value.b,r=e;for(;r;){if(r.staticmembers.hasOwnProperty(n.member)&&"public"===r.staticmembers[n.member].access){d=r.staticmembers[n.member];break}r=r.superclass}null===d&&t.error("/name/ne-12",[a.TScript.displayname(e),n.member])}else{let e=o.type,r=e;for(;r;){if(r.members.hasOwnProperty(n.member)&&"public"===r.members[n.member].access){d=r.members[n.member];break}if(r.staticmembers.hasOwnProperty(n.member)&&"public"===r.staticmembers[n.member].access){d=r.staticmembers[n.member];break}r=r.superclass}null===d&&t.error("/name/ne-13",[a.TScript.displayname(e),n.member])}let h=null,u=null;"method"===d.petype?t.error("/argument-mismatch/am-32",["a method"]):"attribute"===d.petype?(h=o.value.a,u=d.id):"function"===d.petype?t.error("/argument-mismatch/am-32",["a static method"]):"variable"===d.petype?(h=this.stack[0].variables,u=d.id):"type"===d.petype?t.error("/argument-mismatch/am-32",["a class"]):r.ErrorHelper.assert(!1,"[member access] internal error; unknown member type "+d.petype);let p=h[u];if(p&&(null==p?void 0:p.type)&&(null==p?void 0:p.value)||this.error("/name/ne-29",[a.TScript.displayname(d)]),"="!==l){let t=l.substring(0,l.length-1);c=i.binary_operator_impl[t].call(this,h[u],c)}return h[u]={type:c.type,value:c.value},e.pe.pop(),e.ip.pop(),!0}},c.sim=function(){let t=this.stack[this.stack.length-1];return 0!==t.ip[t.ip.length-1]}):t.error("/argument-mismatch/am-32",[c.petype])},c}},9881:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parse_namespace=void 0;const r=n(150),i=n(4641),a=n(3163),o=n(9641),s=n(3680);e.parse_namespace=function(t,e,n){let l=t.get(),c=i.Lexer.get_token(t,n);r.ErrorHelper.assert("keyword"===c.type&&"namespace"===c.value,"[parse_namespace] internal error"),"global scope"!==e.petype&&"namespace"!==e.petype&&(t.set(i.Lexer.before_token),t.error("/syntax/se-63"));let d="";{let t=e;for(;"namespace"===t.petype;)d=t.name+"."+d,t=t.parent}c=i.Lexer.get_token(t,n),"identifier"!==c.type&&(t.set(i.Lexer.before_token),t.error("/syntax/se-64"));let h=c.value;n.checkstyle&&!t.builtin()&&h[0]>="A"&&h[0]<="Z"&&(t.set(i.Lexer.before_token),t.error("/style/ste-3",["namespace",h]));let u=null;e.names.hasOwnProperty(h)?(u=e.names[h],"namespace"!==u.petype&&(t.set(i.Lexer.before_token),t.error("/name/ne-19",[h]))):(u={petype:"namespace",children:new Array,parent:e,name:h,displayname:d+h,names:{},declaration:!0},e.names[h]=u);let p={petype:"namespace",children:new Array,where:l,parent:e,names:u.names,commands:new Array,name:h,displayname:d+h,step:a.scopestep,sim:o.simfalse};for(c=i.Lexer.get_token(t,n),"grouping"===c.type&&"{"===c.value||(t.set(i.Lexer.before_token),t.error("/syntax/se-40",["namespace declaration"])),t.indent.push(-1-c.line);;){if(c=i.Lexer.get_token(t,n,!0),"grouping"===c.type&&"}"===c.value){if(t.indent.pop(),n.checkstyle&&!t.builtin()){let e=t.indentation(),n=t.indent[t.indent.length-1];n>=0&&n!==e&&t.error("/style/ste-2")}i.Lexer.get_token(t,n);break}let e=(0,s.parse_statement_or_declaration)(t,p,n);e.hasOwnProperty("name")&&(e.displayname=d+h+"."+e.name),p.commands.push(e),p.children.push(e),u.children.push(e)}return p}},4216:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parse_return=void 0;const r=n(150),i=n(4641),a=n(3852),o=n(8397),s=n(7939);e.parse_return=function(t,e,n){let l=t.get(),c=i.Lexer.get_token(t,n);r.ErrorHelper.assert("keyword"===c.type&&"return"===c.value,"[parse_return] internal error");let d={petype:"return",where:l,parent:e,step:function(){let t=this.stack[this.stack.length-1],e=t.pe[t.pe.length-1];if(0===t.ip[t.ip.length-1])return e.hasOwnProperty("argument")?(t.pe.push(e.argument),t.ip.push(-1)):t.temporaries.push({type:this.program.types[o.Typeid.typeid_null],value:{b:null}}),!1;{let e=t.temporaries.pop();return this.stack.pop(),this.stack.length>0&&this.stack[this.stack.length-1].temporaries.push(e),!0}},sim:function(){let t=this.stack[this.stack.length-1];return 0!==t.ip[t.ip.length-1]}};if(c=i.Lexer.get_token(t,n,!0),"delimiter"!==c.type||";"!==c.value){d.argument=(0,s.parse_expression)(t,e,n);let r=(0,a.get_function)(e);"constructor"===r.name&&t.error("/syntax/se-79"),"global scope"!==r.petype&&"namespace"!==r.petype||t.error("/syntax/se-80"),d.children=[d.argument]}return c=i.Lexer.get_token(t,n),"delimiter"===c.type&&";"===c.value||(t.set(i.Lexer.before_token),t.error("/syntax/se-81")),d}},1920:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parse_statement=void 0;const r=n(4641),i=n(697),a=n(3163),o=n(9641),s=n(7606),l=n(3509),c=n(6976),d=n(3775),h=n(4697),u=n(463),p=n(4216),f=n(3680),m=n(4088),g=n(5679),y=n(9022);e.parse_statement=function(t,e,n,v=!1){let b=(0,i.peek_keyword)(t);if("if"===b)return(0,u.parse_ifthenelse)(t,e,n);if("for"===b)return(0,h.parse_for)(t,e,n);if("do"===b)return(0,d.parse_dowhile)(t,e,n);if("while"===b)return(0,y.parse_whiledo)(t,e,n);if("break"===b)return(0,l.parse_break)(t,e,n);if("continue"===b)return(0,c.parse_continue)(t,e,n);if("return"===b)return(0,p.parse_return)(t,e,n);if("try"===b)return(0,g.parse_trycatch)(t,e,n);if("throw"===b)return(0,m.parse_throw)(t,e,n);{let i=t.get(),l=r.Lexer.get_token(t,n,!0);if("identifier"===l.type)return(0,s.parse_assignment_or_expression)(t,e,n);if("keyword"===l.type&&("null"===l.value||"true"===l.value||"false"===l.value||"not"===l.value||"this"===l.value||"super"===l.value)||"grouping"===l.type&&("("===l.value||"["===l.value)||"operator"===l.type&&("+"===l.value||"-"===l.value)||"integer"===l.type||"real"===l.type||"string"===l.type)return(0,s.parse_assignment_or_expression)(t,e,n);if("delimiter"===l.type&&";"===l.value)return r.Lexer.get_token(t,n),{petype:"no-operation",where:i,step:function(){let t=this.stack[this.stack.length-1];return t.pe.pop(),t.ip.pop(),!1},sim:o.simfalse};if("grouping"===l.type&&"{"===l.value){r.Lexer.get_token(t,n),t.indent.push(-1-l.line);let s={petype:"scope",children:new Array,where:i,parent:e,commands:new Array,names:{},step:a.scopestep,sim:o.simfalse};for(;;){if(l=r.Lexer.get_token(t,n,!0),"grouping"===l.type&&"}"===l.value){if(t.indent.pop(),n.checkstyle&&!t.builtin()){let e=t.indentation(),n=t.indent[t.indent.length-1];n>=0&&n!==e&&t.error("/style/ste-2")}r.Lexer.get_token(t,n);break}let e=(0,f.parse_statement_or_declaration)(t,s,n);s.commands.push(e),s.children.push(e)}return s}"grouping"===l.type&&"}"===l.value?t.error("/syntax/se-88"):"keyword"===l.type?t.error("/syntax/se-89",[l.value]):t.error("/syntax/se-90",[l.value])}}},3680:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parse_statement_or_declaration=void 0;const r=n(6853),i=n(112),a=n(1920);e.parse_statement_or_declaration=function(t,e,n){function o(t){if(Array.isArray(t))for(let e=0;e<t.length;e++)o(t[e]);else if(null!==t&&"object"==typeof t&&t.constructor===Object){if(t.hasOwnProperty("builtin")&&t.builtin)return;t.hasOwnProperty("petype")&&(t.hasOwnProperty("where")&&delete t.where,t.builtin=!0);for(let e in t)t.hasOwnProperty(e)&&"parent"!==e&&o(t[e])}}if(!t.builtin()&&t.filename){t.skip();const n=t.program.breakpoints[t.filename];if(!n.hasOwnProperty(t.line)){let i=(0,r.create_breakpoint)(e,t);n[t.line]=i,e.commands.push(i)}}let s=(0,i.parse_declaration)(t,e,n);return null!==s?(t.builtin()&&o(s),s):(s=(0,a.parse_statement)(t,e,n),t.builtin()&&o(s),s)}},4088:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parse_throw=void 0;const r=n(150),i=n(4641),a=n(8706),o=n(7939);e.parse_throw=function(t,e,n){let s=t.get(),l=i.Lexer.get_token(t,n);r.ErrorHelper.assert("keyword"===l.type&&"throw"===l.value,"[parse_throw] internal error");let c={petype:"throw",where:s,parent:e,step:function(){let e=this.stack[this.stack.length-1],n=e.pe[e.pe.length-1];if(0===e.ip[e.ip.length-1])return e.pe.push(n.argument),e.ip.push(-1),!1;{let n=e.temporaries.pop(),i=0,o=0;for(;;){let e=this.stack[this.stack.length-i-1];if("try"===e.pe[e.pe.length-1-o].petype)break;o++,o>=e.pe.length&&(o=0,i++,i>=this.stack.length&&t.error("/user/ue-3",[a.TScript.toString(n)]))}this.stack.splice(this.stack.length-i,i);let s=this.stack[this.stack.length-1];for(r.ErrorHelper.assert(o<=s.pe.length-2,"[throw] corrupted stack"),s.pe.splice(s.pe.length-o-1,o+1),s.ip.splice(s.ip.length-o-2,o+2,1);s.temporaries.length>0&&!s.temporaries[s.temporaries.length-1].hasOwnProperty("try marker");)s.temporaries.pop();return s.temporaries.push(n),!0}},sim:function(){let t=this.stack[this.stack.length-1];return 0!==t.ip[t.ip.length-1]}};return c.argument=(0,o.parse_expression)(t,e,n),c.children=[c.argument],l=i.Lexer.get_token(t,n),"delimiter"===l.type&&";"===l.value||(t.set(i.Lexer.before_token),t.error("/syntax/se-87")),c}},5679:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parse_trycatch=void 0;const r=n(150),i=n(4641),a=n(3852),o=n(9641),s=n(1920);e.parse_trycatch=function(t,e,n){let l=t.get(),c=i.Lexer.get_token(t,n);r.ErrorHelper.assert("keyword"===c.type&&"try"===c.value,"[parse_trycatch] internal error");let d={petype:"try-catch",where:l,parent:e,step:function(){let t=this.stack[this.stack.length-1],e=t.pe[t.pe.length-1],n=t.ip[t.ip.length-1];return 0===n?(t.temporaries.push({"try marker":!0}),t.pe.push(e.try_part),t.ip.push(-1),!1):2===n?(t.pe.push(e.catch_part),t.ip.push(-1),!1):(t.pe.pop(),t.ip.pop(),t.temporaries.pop(),!1)},sim:o.simfalse};d.try_part={petype:"try",parent:e,where:l,step:function(){let t=this.stack[this.stack.length-1],e=t.pe[t.pe.length-1];return 0===t.ip[t.ip.length-1]?(t.pe.push(e.command),t.ip.push(-1),!1):(t.pe.pop(),t.ip.pop(),!1)},sim:o.simfalse},d.try_part.command=(0,s.parse_statement)(t,e,n),d.try_part.children=[d.try_part.command];let h=t.get();c=i.Lexer.get_token(t,n),"keyword"===c.type&&"catch"===c.value||(t.set(i.Lexer.before_token),t.error("/syntax/se-82")),c=i.Lexer.get_token(t,n),"keyword"===c.type&&"var"===c.value||(t.set(i.Lexer.before_token),t.error("/syntax/se-84"));let u=t.get();c=i.Lexer.get_token(t,n),"identifier"!==c.type&&(t.set(u),t.error("/syntax/se-85"));let p=c.value;c=i.Lexer.get_token(t,n),"keyword"===c.type&&"do"===c.value||(t.set(i.Lexer.before_token),t.error("/syntax/se-86")),d.catch_part={petype:"catch",parent:e,where:h,names:{},step:function(){let t=this.stack[this.stack.length-1],e=t.pe[t.pe.length-1];return 0===t.ip[t.ip.length-1]?(t.variables[e.var_id]=t.temporaries.pop(),t.pe.push(e.command),t.ip.push(-1),!1):(t.pe.pop(),t.ip.pop(),!1)},sim:o.simfalse},d.children=[d.try_part,d.catch_part];let f=(0,a.get_function)(e),m=f.variables.length,g={petype:"variable",where:u,parent:d.catch_part,name:p,id:m,scope:"local"};return f.variables.push(g),d.catch_part.names[p]=g,d.catch_part.var_id=m,d.catch_part.command=(0,s.parse_statement)(t,d.catch_part,n),d.catch_part.children=[g,d.catch_part.command],d}},5281:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parse_use=void 0;const r=n(150),i=n(4641),a=n(697),o=n(7939);e.parse_use=function(t,e,n){let s=t.get(),l=i.Lexer.get_token(t,n);r.ErrorHelper.assert("keyword"===l.type&&("use"===l.value||"from"===l.value),"[parse_use] internal error");let c={petype:"use",children:new Array,where:s,parent:e,declaration:!0,names:new Map},d=e;if("from"===l.value){let r=t.get();d=(0,o.parse_expression)(t,e,n,!1,!0),(0,o.is_name)(d)&&!d.super||(t.set(r),t.error("/syntax/se-10",["use directive"])),c.from=d,c.children.push(d),l=i.Lexer.get_token(t,n),"keyword"===l.type&&"use"===l.value||(t.set(i.Lexer.before_token),t.error("/syntax/se-65"))}for(;;){let r="namespace"===(0,a.peek_keyword)(t);r&&i.Lexer.get_token(t,n);let s=t.get(),d=(0,o.parse_expression)(t,e,n,!1,!0);if((0,o.is_name)(d)&&!d.super||(t.set(s),t.error("/syntax/se-10",["use directive"])),c.children.push(d),l=i.Lexer.get_token(t,n),"identifier"===l.type&&"as"===l.value){r&&t.error("/syntax/se-66"),l=i.Lexer.get_token(t,n),"identifier"!==l.type&&(t.set(i.Lexer.before_token),t.error("/syntax/se-67"));let e=l.value;c.names.set(d,e),l=i.Lexer.get_token(t,n)}else c.names.set(d,r);if("delimiter"===l.type&&";"===l.value)break;"delimiter"===l.type&&","===l.value||(t.set(i.Lexer.before_token),t.error("/syntax/se-68"))}return c.passResolve=function(t){if(c.from){c.from.passResolve(t),c.from.passResolveBack(t),delete c.from.passResolve,delete c.from.passResolveBack,"name"!==c.from.petype&&"constant"!==c.from.petype||!c.from.reference||(c.from=c.from.reference);for(let[t,e]of c.names.entries())t.parent=c.from}},c.passResolveBack=function(t){c.from?c.from:c.parent;for(let[n,r]of c.names.entries())if("name"!==n.petype&&"constant"!==n.petype||(n=n.reference),!0===r){"namespace"!==n.petype&&t.error("/name/ne-23",[n.name]);for(let r in n.names)n.names.hasOwnProperty(r)&&(e.names.hasOwnProperty(r)?e.names[r]!==n.names[r]&&t.error("/name/ne-24",[r]):e.names[r]=n.names[r])}else!1===r&&(r=n.name),e.names.hasOwnProperty(r)?e.names[r]!==n&&t.error("/name/ne-24",[r]):e.names[r]=n;delete c.names},c}},6201:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parse_var=void 0;const r=n(150),i=n(4641),a=n(3852),o=n(9641),s=n(8397),l=n(7939);e.parse_var=function(t,e,n,c=void 0){c=void 0!==c?c:(0,a.get_function)(e);let d=t.get(),h=i.Lexer.get_token(t,n);r.ErrorHelper.assert("keyword"===h.type&&"var"===h.value,"[parse_var] internal error");let u={petype:"variable declaration",children:new Array,where:d,parent:e,vars:new Array,step:function(){let t=this.stack[this.stack.length-1],e=t.pe[t.pe.length-1],n=t.ip[t.ip.length-1];return n<e.vars.length?(t.pe.push(e.vars[n]),t.ip.push(-1),!1):(t.pe.pop(),t.ip.pop(),!1)},sim:o.simfalse};for(;;){let a=t.get();h=i.Lexer.get_token(t,n),"identifier"!==h.type&&t.error("/syntax/se-50"),e.names.hasOwnProperty(h.value)&&t.error("/name/ne-14",[h.value]),n.checkstyle&&!t.builtin()&&h.value[0]>="A"&&h.value[0]<="Z"&&(t.set(i.Lexer.before_token),t.error("/style/ste-3",["variable",h.value]));let o="type"===c.petype?c.objectsize:c.variables.length,d={petype:"variable",where:a,parent:e,name:h.value,id:o,step:function(){let t=this.stack[this.stack.length-1],e=t.pe[t.pe.length-1],n=t.ip[t.ip.length-1];return 0===n?e.hasOwnProperty("initializer")?(t.pe.push(e.initializer),t.ip.push(-1),!1):(t.temporaries.push({type:this.program.types[s.Typeid.typeid_null],value:{b:null}}),!0):1===n?(t.variables[e.id]=t.temporaries.pop(),!1):(t.pe.pop(),t.ip.pop(),!1)},sim:function(){let t=this.stack[this.stack.length-1];return 0===t.ip[t.ip.length-1]&&!t.pe[t.pe.length-1].hasOwnProperty("initializer")}};if("global scope"===c.petype?d.scope="global":"function"===c.petype||"method"===c.petype?d.scope="local":"type"===c.petype?d.scope="object":r.ErrorHelper.assert(!1,"unknown variable scope"),h=i.Lexer.get_token(t,n),"operator"===h.type&&"="===h.value&&(d.initializer=(0,l.parse_expression)(t,e,n),d.children=[d.initializer],h=i.Lexer.get_token(t,n)),c.variables.push(d),e.names[d.name]=d,u.vars.push(d),u.children.push(d),"type"===c.petype&&e.objectsize++,"delimiter"===h.type&&";"===h.value)break;"delimiter"===h.type&&","===h.value||(t.set(i.Lexer.before_token),t.error(d.initializer?"/syntax/se-51b":"/syntax/se-51"))}return u}},9022:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parse_whiledo=void 0;const r=n(150),i=n(4641),a=n(8706),o=n(8397),s=n(7939),l=n(1920);e.parse_whiledo=function(t,e,n){let c=t.get(),d=i.Lexer.get_token(t,n);r.ErrorHelper.assert("keyword"===d.type&&"while"===d.value,"[parse_whiledo] internal error");let h={petype:"while-do-loop",where:c,parent:e,step:function(){let e=this.stack[this.stack.length-1],n=e.pe[e.pe.length-1],r=e.ip[e.ip.length-1];if(-2===r)return e.pe.pop(),e.ip.pop(),!1;if(-1===r)return!1;if(0===r)return e.pe.push(n.condition),e.ip.push(-1),!1;if(1===r){let r=e.temporaries.pop();return a.TScript.isDerivedFrom(r.type,o.Typeid.typeid_boolean)||t.error("/argument-mismatch/am-37",[a.TScript.displayname(r.type)]),r.value.b?(e.pe.push(n.body),e.ip.push(-1)):(e.pe.pop(),e.ip.pop()),!0}return 2===r?(e.ip.pop(),e.ip.push(-1),!1):void 0},sim:function(){let t=this.stack[this.stack.length-1];return 1===t.ip[t.ip.length-1]}};return h.condition=(0,s.parse_expression)(t,e,n),d=i.Lexer.get_token(t,n),"keyword"===d.type&&"do"===d.value||(t.set(i.Lexer.before_token),t.error("/syntax/se-76")),h.body=(0,l.parse_statement)(t,h,n),h.children=[h.condition,h.body],h}},697:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.peek_keyword=e.binary_operator_impl=e.left_unary_operator_impl=e.binary_operator_precedence=e.left_unary_operator_precedence=e.assignments=void 0;const r=n(8706),i=n(8397),a=n(4641);e.assignments={"=":!0,"+=":!0,"-=":!0,"*=":!0,"/=":!0,"//=":!0,"%=":!0,"^=":!0},e.left_unary_operator_precedence={"+":2,"-":2,not:7},e.binary_operator_precedence={"+":4,"-":4,"*":3,"/":3,"//":3,"%":3,"^":1,":":5,"==":6,"!=":6,"<":6,"<=":6,">":6,">=":6,and:8,or:9,xor:9},e.left_unary_operator_impl={not:function(t){return r.TScript.isDerivedFrom(t.type,i.Typeid.typeid_boolean)?{type:this.program.types[i.Typeid.typeid_boolean],value:{b:!t.value.b}}:r.TScript.isDerivedFrom(t.type,i.Typeid.typeid_integer)?{type:this.program.types[i.Typeid.typeid_integer],value:{b:~t.value.b}}:void this.error("/argument-mismatch/am-2",[r.TScript.displayname(t.type)])},"+":function(t){return r.TScript.isDerivedFrom(t.type,i.Typeid.typeid_integer)?{type:this.program.types[i.Typeid.typeid_integer],value:{b:t.value.b}}:r.TScript.isDerivedFrom(t.type,i.Typeid.typeid_real)?{type:this.program.types[i.Typeid.typeid_real],value:{b:t.value.b}}:void this.error("/argument-mismatch/am-3",[r.TScript.displayname(t.type)])},"-":function(t){return r.TScript.isDerivedFrom(t.type,i.Typeid.typeid_integer)?{type:this.program.types[i.Typeid.typeid_integer],value:{b:0|-t.value.b}}:r.TScript.isDerivedFrom(t.type,i.Typeid.typeid_real)?{type:this.program.types[i.Typeid.typeid_real],value:{b:-t.value.b}}:void this.error("/argument-mismatch/am-4",[r.TScript.displayname(t.type)])}},e.binary_operator_impl={"+":function(t,e){return r.TScript.isDerivedFrom(t.type,i.Typeid.typeid_integer)&&r.TScript.isDerivedFrom(e.type,i.Typeid.typeid_integer)?{type:this.program.types[i.Typeid.typeid_integer],value:{b:t.value.b+e.value.b|0}}:r.TScript.isNumeric(t.type)&&r.TScript.isNumeric(e.type)?{type:this.program.types[i.Typeid.typeid_real],value:{b:t.value.b+e.value.b}}:r.TScript.isDerivedFrom(t.type,i.Typeid.typeid_string)||r.TScript.isDerivedFrom(e.type,i.Typeid.typeid_string)?{type:this.program.types[i.Typeid.typeid_string],value:{b:r.TScript.toString.call(this,t)+r.TScript.toString.call(this,e)}}:void this.error("/argument-mismatch/am-5",[r.TScript.displayname(t.type),r.TScript.displayname(e.type)])},"-":function(t,e){return r.TScript.isDerivedFrom(t.type,i.Typeid.typeid_integer)&&r.TScript.isDerivedFrom(e.type,i.Typeid.typeid_integer)?{type:this.program.types[i.Typeid.typeid_integer],value:{b:t.value.b-e.value.b|0}}:r.TScript.isNumeric(t.type)&&r.TScript.isNumeric(e.type)?{type:this.program.types[i.Typeid.typeid_real],value:{b:t.value.b-e.value.b}}:void this.error("/argument-mismatch/am-6",[r.TScript.displayname(e.type),r.TScript.displayname(t.type)])},"*":function(t,e){return r.TScript.isDerivedFrom(t.type,i.Typeid.typeid_integer)&&r.TScript.isDerivedFrom(e.type,i.Typeid.typeid_integer)?{type:this.program.types[i.Typeid.typeid_integer],value:{b:r.TScript.mul32(t.value.b,e.value.b)}}:r.TScript.isNumeric(t.type)&&r.TScript.isNumeric(e.type)?{type:this.program.types[i.Typeid.typeid_real],value:{b:t.value.b*e.value.b}}:void this.error("/argument-mismatch/am-7",[r.TScript.displayname(t.type),r.TScript.displayname(e.type)])},"/":function(t,e){if(r.TScript.isNumeric(t.type)&&r.TScript.isNumeric(e.type))return{type:this.program.types[i.Typeid.typeid_real],value:{b:t.value.b/e.value.b}};this.error("/argument-mismatch/am-8",[r.TScript.displayname(t.type),r.TScript.displayname(e.type)])},"//":function(t,e){if(r.TScript.isNumeric(t.type)&&r.TScript.isNumeric(e.type)){if(r.TScript.isDerivedFrom(t.type,i.Typeid.typeid_integer)&&r.TScript.isDerivedFrom(e.type,i.Typeid.typeid_integer)){let n=r.TScript.mod.call(this,t.value.b,e.value.b),a=Math.round((t.value.b-n)/e.value.b);return{type:this.program.types[i.Typeid.typeid_integer],value:{b:0|a}}}{let n=t.value.b-e.value.b*Math.floor(t.value.b/e.value.b);n<0&&(n+=Math.abs(e.value.b));let r=0===e.value.b?t.value.b/e.value.b:Math.round((t.value.b-n)/e.value.b);return{type:this.program.types[i.Typeid.typeid_real],value:{b:r}}}}this.error("/argument-mismatch/am-8",[r.TScript.displayname(t.type),r.TScript.displayname(e.type)])},"%":function(t,e){if(r.TScript.isNumeric(t.type)&&r.TScript.isNumeric(e.type))return r.TScript.isDerivedFrom(t.type,i.Typeid.typeid_integer)&&r.TScript.isDerivedFrom(e.type,i.Typeid.typeid_integer)?{type:this.program.types[i.Typeid.typeid_integer],value:{b:0|Math.round(r.TScript.mod.call(this,t.value.b,e.value.b))}}:{type:this.program.types[i.Typeid.typeid_real],value:{b:r.TScript.mod.call(this,t.value.b,e.value.b)}};this.error("/argument-mismatch/am-9",[r.TScript.displayname(t.type),r.TScript.displayname(e.type)])},"^":function(t,e){if(r.TScript.isNumeric(t.type)&&r.TScript.isNumeric(e.type)){if(r.TScript.isDerivedFrom(t.type,i.Typeid.typeid_integer)&&r.TScript.isDerivedFrom(e.type,i.Typeid.typeid_integer)&&e.value.b>=0){let n=1,a=t.value.b;for(let t=0;t<32;t++)1<<t&e.value.b&&(n=r.TScript.mul32(n,a)),a=r.TScript.mul32(a,a);return{type:this.program.types[i.Typeid.typeid_integer],value:{b:n}}}return{type:this.program.types[i.Typeid.typeid_real],value:{b:Math.pow(t.value.b,e.value.b)}}}this.error("/argument-mismatch/am-10",[r.TScript.displayname(t.type),r.TScript.displayname(e.type)])},":":function(t,e){return r.TScript.isDerivedFrom(t.type,i.Typeid.typeid_integer)||r.TScript.isDerivedFrom(t.type,i.Typeid.typeid_real)&&r.TScript.isInt32(t.value.b)||this.error("/argument-mismatch/am-11"),r.TScript.isDerivedFrom(e.type,i.Typeid.typeid_integer)||r.TScript.isDerivedFrom(e.type,i.Typeid.typeid_real)&&r.TScript.isInt32(e.value.b)||this.error("/argument-mismatch/am-11"),{type:this.program.types[i.Typeid.typeid_range],value:{b:{begin:0|t.value.b,end:0|e.value.b}}}},"==":function(t,e){return{type:this.program.types[i.Typeid.typeid_boolean],value:{b:r.TScript.equal.call(this,t,e)}}},"!=":function(t,e){return{type:this.program.types[i.Typeid.typeid_boolean],value:{b:!r.TScript.equal.call(this,t,e)}}},"<":function(t,e){return{type:this.program.types[i.Typeid.typeid_boolean],value:{b:r.TScript.order.call(this,t,e)<0}}},"<=":function(t,e){return{type:this.program.types[i.Typeid.typeid_boolean],value:{b:r.TScript.order.call(this,t,e)<=0}}},">":function(t,e){return{type:this.program.types[i.Typeid.typeid_boolean],value:{b:r.TScript.order.call(this,t,e)>0}}},">=":function(t,e){return{type:this.program.types[i.Typeid.typeid_boolean],value:{b:r.TScript.order.call(this,t,e)>=0}}},and:function(t,e){return r.TScript.isDerivedFrom(t.type,i.Typeid.typeid_boolean)&&r.TScript.isDerivedFrom(e.type,i.Typeid.typeid_boolean)?{type:this.program.types[i.Typeid.typeid_boolean],value:{b:t.value.b&&e.value.b}}:r.TScript.isDerivedFrom(t.type,i.Typeid.typeid_integer)&&r.TScript.isDerivedFrom(e.type,i.Typeid.typeid_integer)?{type:this.program.types[i.Typeid.typeid_integer],value:{b:t.value.b&e.value.b}}:void this.error("/argument-mismatch/am-12",["and",r.TScript.displayname(t.type),r.TScript.displayname(e.type)])},or:function(t,e){return r.TScript.isDerivedFrom(t.type,i.Typeid.typeid_boolean)&&r.TScript.isDerivedFrom(e.type,i.Typeid.typeid_boolean)?{type:this.program.types[i.Typeid.typeid_boolean],value:{b:t.value.b||e.value.b}}:r.TScript.isDerivedFrom(t.type,i.Typeid.typeid_integer)&&r.TScript.isDerivedFrom(e.type,i.Typeid.typeid_integer)?{type:this.program.types[i.Typeid.typeid_integer],value:{b:t.value.b|e.value.b}}:void this.error("/argument-mismatch/am-12",["or",r.TScript.displayname(t.type),r.TScript.displayname(e.type)])},xor:function(t,e){return r.TScript.isDerivedFrom(t.type,i.Typeid.typeid_boolean)&&r.TScript.isDerivedFrom(e.type,i.Typeid.typeid_boolean)?{type:this.program.types[i.Typeid.typeid_boolean],value:{b:t.value.b!==e.value.b}}:r.TScript.isDerivedFrom(t.type,i.Typeid.typeid_integer)&&r.TScript.isDerivedFrom(e.type,i.Typeid.typeid_integer)?{type:this.program.types[i.Typeid.typeid_integer],value:{b:t.value.b^e.value.b}}:void this.error("/argument-mismatch/am-12",["xor",r.TScript.displayname(t.type),r.TScript.displayname(e.type)])}},e.peek_keyword=function(t){let e=t.get();if(t.skip(),t.eof())return"";let n=t.current();if(n>="A"&&n<="Z"||n>="a"&&n<="z"||"_"===n){let n=t.pos;for(t.advance();t.good();){let e=t.current();if(!(e>="A"&&e<="Z"||e>="a"&&e<="z"||e>="0"&&e<="9"||"_"===e))break;t.advance()}let r=t.source.substring(n,t.pos);return t.set(e),(0,a.isKeyword)(r)?r:""}return t.set(e),""}},4041:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.core=void 0;const r=n(150),i=n(8706),a=n(8397),o=n(101),s=n(9641),l=n(8020);e.core={source:l.tscript_core,impl:{Null:{constructor:function(t){t.value.b=null}},Boolean:{constructor:function(t,e){void 0===e.value.b&&this.error("/argument-mismatch/am-50"),i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_boolean)||this.error("/argument-mismatch/am-1",["value","Boolean.constructor","boolean",i.TScript.displayname(e.type)]),t.value.b=e.value.b}},Integer:{constructor:function(t,e){if(void 0===e.value.b&&this.error("/argument-mismatch/am-50"),i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_boolean))t.value.b=e.value.b?1:0;else if(i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_integer))t.value.b=e.value.b;else if(i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_real))Number.isFinite(e.value.b)||this.error("/argument-mismatch/am-13"),t.value.b=0|Math.floor(e.value.b);else if(i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_string)){let n=e.value.b.trim(),r=1;0===n.length&&this.error("/argument-mismatch/am-14"),"-"===n[0]?(r=-1,n=n.substr(1)):"+"===n[0]&&(n=n.substr(1)),(0===n.length||"0123456789.".indexOf(n[0])<0)&&this.error("/argument-mismatch/am-14"),r*=Number(n),Number.isFinite(r)||this.error("/argument-mismatch/am-13"),t.value.b=0|Math.floor(r)}else this.error("/argument-mismatch/am-1",["value","Integer.constructor","boolean, integer, real, or string",i.TScript.displayname(e.type)])}},Real:{constructor:function(t,e){if(void 0===e.value.b&&this.error("/argument-mismatch/am-50"),i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_boolean))t.value.b=e.value.b?1:0;else if(i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_integer)||i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_real))t.value.b=e.value.b;else if(i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_string)){let n=e.value.b.trim(),r=0,i=!1,a=1;for(;r<n.length&&("-"==n[r]||"+"==n[r]||" "==n[r]);)"-"==n[r]&&(a*=-1),r++;let o=r;for((o>=n.length||n[o]<"0"||n[o]>"9")&&(i=!0);o<n.length&&n[o]>="0"&&n[o]<="9";)o++;if(o<n.length&&"."===n[o])for(o++,(o>=n.length||n[o]<"0"||n[o]>"9")&&(i=!0);o<n.length&&n[o]>="0"&&n[o]<="9";)o++;if(o<n.length&&("e"===n[o]||"E"===n[o]))for(o++,"+"!==n[o]&&"-"!==n[o]||o++,(o>=n.length||n[o]<"0"||n[o]>"9")&&(i=!0);o<n.length&&n[o]>="0"&&n[o]<="9";)o++;o<n.length&&(i=!0),t.value.b=i?NaN:a*Number(n.substring(r))}else t.value.b=NaN},isFinite:function(t){return{type:this.program.types[a.Typeid.typeid_boolean],value:{b:Number.isFinite(t.value.b)}}},isInfinite:function(t){return{type:this.program.types[a.Typeid.typeid_boolean],value:{b:t.value.b===Number.POSITIVE_INFINITY||t.value.b===Number.NEGATIVE_INFINITY}}},isNan:function(t){return{type:this.program.types[a.Typeid.typeid_boolean],value:{b:Number.isNaN(t.value.b)}}},inf:function(t,e){return{type:this.program.types[a.Typeid.typeid_real],value:{b:1/0}}},nan:function(t,e){return{type:this.program.types[a.Typeid.typeid_real],value:{b:NaN}}}},String:{constructor:function(t,e){void 0===e.value.b&&this.error("/argument-mismatch/am-50"),t.value.b=i.TScript.toString.call(this,e)},size:function(t){return{type:this.program.types[a.Typeid.typeid_integer],value:{b:t.value.b.length}}},find:function(t,e,n,r){let o;return i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_string)||this.error("/argument-mismatch/am-1",["searchterm","String.find","string",i.TScript.displayname(e.type)]),i.TScript.isDerivedFrom(n.type,a.Typeid.typeid_integer)||this.error("/argument-mismatch/am-1",["start","String.find","integer",i.TScript.displayname(n.type)]),i.TScript.isDerivedFrom(r.type,a.Typeid.typeid_boolean)||this.error("/argument-mismatch/am-1",["backward","String.find","boolean",i.TScript.displayname(r.type)]),o=r.value.b?t.value.b.lastIndexOf(e.value.b,n.value.b):t.value.b.indexOf(e.value.b,n.value.b),-1===o?{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}:{type:this.program.types[a.Typeid.typeid_integer],value:{b:o}}},split:function(t,e){i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_string)||this.error("/argument-mismatch/am-1",["separator","String.split","string",i.TScript.displayname(e.type)]);let n=t.value.b.split(e.value.b),r=new Array;for(let t=0;t<n.length;t++)r.push({type:this.program.types[a.Typeid.typeid_string],value:{b:n[t]}});return{type:this.program.types[a.Typeid.typeid_array],value:{b:r}}},fromUnicode:function(t){let e="";if(i.TScript.isDerivedFrom(t.type,a.Typeid.typeid_integer))e+=String.fromCharCode(t.value.b);else if(i.TScript.isDerivedFrom(t.type,a.Typeid.typeid_array))for(let n=0;n<t.value.b.length;n++){let r=t.value.b[n];i.TScript.isDerivedFrom(r.type,a.Typeid.typeid_integer)||this.error("/argument-mismatch/am-1",["characters","String.fromUnicode","integer or an array of integers","array containing '"+i.TScript.displayname(r.type)+"'"]),e+=String.fromCharCode(r.value.b)}else this.error("/argument-mismatch/am-1",["characters","String.fromUnicode","integer or an array of integers",i.TScript.displayname(t.type)]);return{type:this.program.types[a.Typeid.typeid_string],value:{b:e}}},join:function(t,e){i.TScript.isDerivedFrom(t.type,a.Typeid.typeid_array)||this.error("/argument-mismatch/am-1",["array","String.join","array",i.TScript.displayname(t.type)]);let n=i.TScript.toString.call(this,e),r=new Array;for(let e of t.value.b)r.push(i.TScript.toString.call(this,e));return{type:this.program.types[a.Typeid.typeid_string],value:{b:r.join(n)}}},toLowerCase:function(t){return{type:this.program.types[a.Typeid.typeid_string],value:{b:t.value.b.toLowerCase()}}},toUpperCase:function(t){return{type:this.program.types[a.Typeid.typeid_string],value:{b:t.value.b.toUpperCase()}}},replace:function(t,e,n){return i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_string)||this.error("/argument-mismatch/am-1",["pattern","String.replace","string",i.TScript.displayname(e.type)]),i.TScript.isDerivedFrom(n.type,a.Typeid.typeid_string)||this.error("/argument-mismatch/am-1",["replacement","String.replace","string",i.TScript.displayname(n.type)]),{type:this.program.types[a.Typeid.typeid_string],value:{b:t.value.b.replaceAll(e.value.b,n.value.b)}}}},Array:{constructor:function(t,e,n){if(i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_integer)){e.value.b<0&&this.error("/argument-mismatch/am-17");let r=new Array;for(let t=0;t<e.value.b;t++)r.push(n);t.value.b=r}else if(i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_array))void 0===e.value.b&&this.error("/argument-mismatch/am-50"),t.value.b=e.value.b.slice();else if(i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_range)){t.value.b=[];for(let n=e.value.b.begin;n<e.value.b.end;n++)t.value.b.push({type:this.program.types[a.Typeid.typeid_integer],value:{b:n}})}else this.error("/argument-mismatch/am-1",["size_or_other","Array.constructor","integer, an array, or a range",i.TScript.displayname(e.type)])},size:function(t){return{type:this.program.types[a.Typeid.typeid_integer],value:{b:t.value.b.length}}},slice:function(t,e,n){return i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_integer)||this.error("/argument-mismatch/am-1",["start","Array.slice","integer",i.TScript.displayname(e.type)]),i.TScript.isDerivedFrom(n.type,a.Typeid.typeid_integer)||this.error("/argument-mismatch/am-1",["end","Array.slice","integer",i.TScript.displayname(n.type)]),{type:this.program.types[a.Typeid.typeid_array],value:{b:t.value.b.slice(e.value.b,n.value.b)}}},push:function(t,e){return t.value.b.push(e),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},pop:function(t){return 0===t.value.b.length&&this.error("/argument-mismatch/am-18b"),t.value.b.pop()},insert:function(t,e,n){i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_integer)||this.error("/argument-mismatch/am-1",["position","Array.insert","integer",i.TScript.displayname(e.type)]);let r=e.value.b;return(r<0||r>t.value.b.length)&&this.error("/argument-mismatch/am-18",[r,t.value.b.length]),t.value.b.splice(e.value.b,0,n),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},remove:function(t,e){let n,r;return i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_range)?(n=e.value.b.begin,r=e.value.b.end):i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_integer)?(n=e.value.b,r=e.value.b+1):this.error("/argument-mismatch/am-1",["range","Array.remove","range or an integer",i.TScript.displayname(e.type)]),n<0&&(n=0),r>t.value.b.length&&(r=t.value.b.length),t.value.b.splice(n,r-n),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},sort:{step(){let t=this.stack[this.stack.length-1],e=(t.pe[t.pe.length-1],t.ip[t.ip.length-1]);if(0!==e){if(1===e){let e=t.temporaries[t.temporaries.length-1],n=t.variables[0].value.b,r=[e.src[e.lb],e.src[e.rb]];n.hasOwnProperty("enclosed")&&(r=n.enclosed.concat(r));let i={pe:[n.func],ip:[-1],temporaries:[],variables:r,object:null,enclosed:null};return n.hasOwnProperty("object")&&(i.object=n.object),n.hasOwnProperty("enclosed")&&(i.enclosed=n.enclosed),this.stack.push(i),this.stack.length>=this.maxStackSize&&this.error("/logic/le-1"),!1}if(2===e){let e=t.temporaries.pop();i.TScript.isNumeric(e.type)||this.error("/argument-mismatch/am-19",[i.TScript.displayname(e.type)]);let n=t.temporaries[t.temporaries.length-1];if(e.value.b<=0){if(n.dst.push(n.src[n.lb]),n.lb++,n.lb===n.le)for(;n.rb<n.re;)n.dst.push(n.src[n.rb]),n.rb++}else if(n.dst.push(n.src[n.rb]),n.rb++,n.rb===n.re)for(;n.lb<n.le;)n.dst.push(n.src[n.lb]),n.lb++;if(n.lb===n.le)if(n.src.length-n.re<=n.chunksize){for(;n.re<n.src.length;)n.dst.push(n.src[n.re]),n.re++;if(n.chunksize*=2,n.lb=0,n.le=n.chunksize,n.rb=n.chunksize,n.re=Math.min(2*n.chunksize,n.src.length),n.src=n.dst,n.dst=[],n.chunksize>=n.src.length)return!1}else n.lb=n.dst.length,n.le=n.lb+n.chunksize,n.rb=n.le,n.re=Math.min(n.rb+n.chunksize,n.src.length);return t.ip[t.ip.length-1]=0,!1}{let e=t.temporaries[t.temporaries.length-1];return t.object.value.b=e.src,t.temporaries.pop(),r.ErrorHelper.assert(0===t.temporaries.length,"non-empty temporaries stack in return from Array.sort"),this.stack.pop(),this.stack[this.stack.length-1].temporaries.push({type:this.program.types[a.Typeid.typeid_null],value:{b:null}}),!1}}if(t.object.value.b.length<=1)return this.stack.pop(),this.stack[this.stack.length-1].temporaries.push({type:this.program.types[a.Typeid.typeid_null],value:{b:null}}),!1;if(i.TScript.isDerivedFrom(t.variables[0].type,a.Typeid.typeid_null)){let e=this;return t.object.value.b.sort((function(t,n){return i.TScript.order.call(e,t,n)})),this.stack.pop(),this.stack[this.stack.length-1].temporaries.push({type:this.program.types[a.Typeid.typeid_null],value:{b:null}}),!1}if(i.TScript.isDerivedFrom(t.variables[0].type,a.Typeid.typeid_function)&&2===t.variables[0].value.b.func.params.length){let e={src:t.object.value.b,dst:[],chunksize:1,lb:0,le:1,rb:1,re:2};return t.temporaries.push(e),!1}this.error("/argument-mismatch/am-1",["comparator","Array.sort","function of two arguments",i.TScript.displayname(t.variables[0].type)])},sim:s.simfalse},keys:function(t){return{type:this.program.types[a.Typeid.typeid_range],value:{b:{begin:0,end:t.value.b.length}}}},values:function(t){return t},concat:function(t,e){i.TScript.isDerivedFrom(t.type,a.Typeid.typeid_array)||this.error("/argument-mismatch/am-1",["first","Array.concat","array",i.TScript.displayname(t.type)]),i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_array)||this.error("/argument-mismatch/am-1",["second","Array.concat","array",i.TScript.displayname(e.type)]);let n=new Array;for(let e=0;e<t.value.b.length;e++)n.push(t.value.b[e]);for(let t=0;t<e.value.b.length;t++)n.push(e.value.b[t]);return{type:this.program.types[a.Typeid.typeid_array],value:{b:n}}}},Dictionary:{constructor:function(t,e){i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_null)?t.value.b={}:i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_dictionary)?(void 0===e.value.b&&this.error("/argument-mismatch/am-50"),t.value.b=Object.assign({},e.value.b)):this.error("/argument-mismatch/am-1",["other","Dictionary.constructor","null or a dictionary",i.TScript.displayname(e.type)])},size:function(t){return{type:this.program.types[a.Typeid.typeid_integer],value:{b:Object.keys(t.value.b).length}}},has:function(t,e){i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_string)||this.error("/argument-mismatch/am-1",["key","Dictionary.has","string",i.TScript.displayname(e.type)]);let n=t.value.b.hasOwnProperty("#"+e.value.b);return{type:this.program.types[a.Typeid.typeid_boolean],value:{b:n}}},remove:function(t,e){return i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_string)||this.error("/argument-mismatch/am-1",["key","Dictionary.remove","string",i.TScript.displayname(e.type)]),delete t.value.b["#"+e.value.b],{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},keys:function(t){let e=new Array;for(let n in t.value.b)t.value.b.hasOwnProperty(n)&&e.push({type:this.program.types[a.Typeid.typeid_string],value:{b:n.substring(1)}});return{type:this.program.types[a.Typeid.typeid_array],value:{b:e}}},values:function(t){let e=new Array;for(let n in t.value.b)t.value.b.hasOwnProperty(n)&&e.push(t.value.b[n]);return{type:this.program.types[a.Typeid.typeid_array],value:{b:e}}},merge:function(t,e){i.TScript.isDerivedFrom(t.type,a.Typeid.typeid_dictionary)||this.error("/argument-mismatch/am-1",["first","Dictionary.merge","dictionary",i.TScript.displayname(t.type)]),i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_dictionary)||this.error("/argument-mismatch/am-1",["second","Dictionary.merge","dictionary",i.TScript.displayname(e.type)]);let n={};for(let e in t.value.b)t.value.b.hasOwnProperty(e)&&(n[e]=t.value.b[e]);for(let t in e.value.b)e.value.b.hasOwnProperty(t)&&(n[t]=e.value.b[t]);return{type:this.program.types[a.Typeid.typeid_dictionary],value:{b:n}}}},Function:{constructor:function(t,e){i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_function)||this.error("/argument-mismatch/am-1",["value","Function.constructor","function",i.TScript.displayname(e.type)]),void 0===e.value.b&&this.error("/argument-mismatch/am-50"),t.value.b=e.value.b}},Range:{constructor:function(t,e,n){i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_integer)||i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_real)&&i.TScript.isInt32(e.value.b)||this.error("/argument-mismatch/am-1",["begin","Range.constructor","integer",i.TScript.displayname(e.type)]),i.TScript.isDerivedFrom(n.type,a.Typeid.typeid_integer)||i.TScript.isDerivedFrom(n.type,a.Typeid.typeid_real)&&i.TScript.isInt32(n.value.b)||this.error("/argument-mismatch/am-1",["end","Range.constructor","integer",i.TScript.displayname(n.type)]),t.value.b={begin:e.value.b,end:n.value.b},i.TScript.isInt32(t.value.b.end-t.value.b.begin)||this.error("/argument-mismatch/am-45",["Arguments","of Integers"])},size:function(t){return{type:this.program.types[a.Typeid.typeid_real],value:{b:Math.max(0,t.value.b.end-t.value.b.begin)}}},begin:function(t){return{type:this.program.types[a.Typeid.typeid_integer],value:{b:t.value.b.begin}}},end:function(t){return{type:this.program.types[a.Typeid.typeid_integer],value:{b:t.value.b.end}}}},Type:{constructor:function(t,e){t.value.b=e.type},superclass:function(t){return i.TScript.isDerivedFrom(t.type,a.Typeid.typeid_type)||this.error("/argument-mismatch/am-1",["type","Type.superclass","type",i.TScript.displayname(t.type)]),t.value.b.hasOwnProperty("superclass")?{type:this.program.types[a.Typeid.typeid_type],value:{b:t.value.b.superclass}}:{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},isOfType:function(t,e){i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_type)||this.error("/argument-mismatch/am-1",["type","Type.isOfType","type",i.TScript.displayname(e.type)]);let n=!1,r=t.type,o=e.value.b;for(;;){if(r===o){n=!0;break}if(!r.hasOwnProperty("superclass"))break;r=r.superclass}return{type:this.program.types[a.Typeid.typeid_boolean],value:{b:n}}},isDerivedFrom:function(t,e){i.TScript.isDerivedFrom(t.type,a.Typeid.typeid_type)||this.error("/argument-mismatch/am-1",["subclass","Type.isDerivedFrom","type",i.TScript.displayname(t.type)]),i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_type)||this.error("/argument-mismatch/am-1",["superclass","Type.isDerivedFrom","type",i.TScript.displayname(e.type)]);let n=!1,r=t.value.b,o=e.value.b;for(;;){if(r===o){n=!0;break}if(!r.hasOwnProperty("superclass"))break;r=r.superclass}return{type:this.program.types[a.Typeid.typeid_boolean],value:{b:n}}}},terminate:function(){this.status="finished",this.service.statechanged&&this.service.statechanged(!0)},assert:function(t,e){return i.TScript.isDerivedFrom(t.type,a.Typeid.typeid_boolean)||this.error("/argument-mismatch/am-1",["condition","assert","boolean",i.TScript.displayname(t.type)]),i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_string)||this.error("/argument-mismatch/am-1",["message","assert","string",i.TScript.displayname(e.type)]),t.value.b||this.error("/user/ue-1",[e.value.b]),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},error:function(t){i.TScript.isDerivedFrom(t.type,a.Typeid.typeid_string)||this.error("/argument-mismatch/am-1",["message","error","string",i.TScript.displayname(t.type)]),this.error("/user/ue-2",[t.value.b])},same:function(t,e){let n=t===e;return t.type.id==a.Typeid.typeid_array||t.type.id==a.Typeid.typeid_dictionary?n=t.value.b===e.value.b:t.type.id>=a.Typeid.typeid_class&&(n=t.value.a===e.value.a),{type:this.program.types[a.Typeid.typeid_boolean],value:{b:n}}},version:function(){let t={"#type":{type:this.program.types[a.Typeid.typeid_string],value:{b:o.Version.type}},"#major":{type:this.program.types[a.Typeid.typeid_integer],value:{b:o.Version.major}},"#minor":{type:this.program.types[a.Typeid.typeid_integer],value:{b:o.Version.minor}},"#patch":{type:this.program.types[a.Typeid.typeid_integer],value:{b:o.Version.patch}},"#day":{type:this.program.types[a.Typeid.typeid_integer],value:{b:o.Version.day}},"#month":{type:this.program.types[a.Typeid.typeid_integer],value:{b:o.Version.month}},"#year":{type:this.program.types[a.Typeid.typeid_integer],value:{b:o.Version.year}},"#full":{type:this.program.types[a.Typeid.typeid_string],value:{b:o.Version.full()}}};return{type:this.program.types[a.Typeid.typeid_dictionary],value:{b:t}}},print:function(t){let e=i.TScript.toString.call(this,t);return this.service.print&&this.service.print(e),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},alert:function(t){var e,n;let r=i.TScript.toString.call(this,t);return!this.service.documentation_mode&&this.service.alert&&(this.status="dialog",null===(n=(e=this.service).statechanged)||void 0===n||n.call(e,!1),this.dialogResult=null,this.service.alert(r).then((()=>{this.dialogResult={type:this.program.types[a.Typeid.typeid_null],value:{b:null}}}))),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},confirm:function(t){var e,n;let r=i.TScript.toString.call(this,t);return!this.service.documentation_mode&&this.service.confirm&&(this.status="dialog",null===(n=(e=this.service).statechanged)||void 0===n||n.call(e,!1),this.dialogResult=null,this.service.confirm(r).then((t=>{this.dialogResult={type:this.program.types[a.Typeid.typeid_boolean],value:{b:t}}}))),{type:this.program.types[a.Typeid.typeid_boolean],value:{b:!1}}},prompt:function(t){var e,n;let r=i.TScript.toString.call(this,t);return!this.service.documentation_mode&&this.service.prompt&&(this.status="dialog",null===(n=(e=this.service).statechanged)||void 0===n||n.call(e,!1),this.dialogResult=null,this.service.prompt(r).then((t=>{this.dialogResult=null===t?{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}:{type:this.program.types[a.Typeid.typeid_string],value:{b:t}}}))),{type:this.program.types[a.Typeid.typeid_string],value:{b:""}}},wait:function(t){return i.TScript.isNumeric(t.type)||this.error("/argument-mismatch/am-1",["milliseconds","wait","numeric argument",i.TScript.displayname(t.type)]),this.service.documentation_mode||this.wait(t.value.b),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},time:function(){return{type:this.program.types[a.Typeid.typeid_real],value:{b:(new Date).getTime()}}},localtime:function(){let t=new Date;return{type:this.program.types[a.Typeid.typeid_real],value:{b:t.getTime()-6e4*t.getTimezoneOffset()}}},exists:function(t){i.TScript.isDerivedFrom(t.type,a.Typeid.typeid_string)||this.error("/argument-mismatch/am-1",["key","exists","string",i.TScript.displayname(t.type)]);let e=null!==this.service.localStorage.getItem("tscript.data."+t.value.b);return{type:this.program.types[a.Typeid.typeid_boolean],value:{b:e}}},load:function(t){i.TScript.isDerivedFrom(t.type,a.Typeid.typeid_string)||this.error("/argument-mismatch/am-1",["key","load","string",i.TScript.displayname(t.type)]);let e=this.service.localStorage.getItem("tscript.data."+t.value.b);null===e&&this.error("/argument-mismatch/am-38",[t.value.b]);let n=JSON.parse(e);return i.TScript.json2typed.call(this,n)},save:function(t,e){i.TScript.isDerivedFrom(t.type,a.Typeid.typeid_string)||this.error("/argument-mismatch/am-1",["key","save","string",i.TScript.displayname(t.type)]);try{let n=i.TScript.typed2json.call(this,e),r=JSON.stringify(n);return this.service.localStorage.setItem("tscript.data."+t.value.b,r),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}}catch(t){this.error("/argument-mismatch/am-39")}},listKeys:function(){return i.TScript.jsObject2typed(this.program,Object.keys(this.service.localStorage).filter((t=>t.startsWith("tscript.data."))).map((t=>t.substr(13))))},deepcopy:function(t){try{return function t(e,n){if(e.type.id<a.Typeid.typeid_array)return e;if(e.type.id===a.Typeid.typeid_array){if(n.has(e))throw"recursive data structure";let r=new Set(n);r.add(e);let i=new Array;for(let n=0;n<e.value.b.length;n++){let a=t.call(this,e.value.b[n],r);i.push(a)}return{type:this.program.types[a.Typeid.typeid_array],value:{b:i}}}if(e.type.id===a.Typeid.typeid_dictionary){if(n.has(e))throw"recursive data structure";let r=new Set(n);r.add(e);let i={};for(let n in e.value.b){if(!e.value.b.hasOwnProperty(n))continue;let a=t.call(this,e.value.b[n],r);i[n]=a}return{type:this.program.types[a.Typeid.typeid_dictionary],value:{b:i}}}if(e.type.id===a.Typeid.typeid_function){if(e.value.b.func.hasOwnProperty("closureparams"))throw"a lambda function in the data structure";return e}if(e.type.id===a.Typeid.typeid_range)return e;if(e.type.id===a.Typeid.typeid_type)return e;throw"an object in the data structure"}.call(this,t,new Set)}catch(t){this.error("/argument-mismatch/am-42",[t])}},setEventHandler:function(t,e){i.TScript.isDerivedFrom(t.type,a.Typeid.typeid_string)||this.error("/argument-mismatch/am-1",["event","setEventHandler","string",i.TScript.displayname(t.type)]);let n=t.value.b;return this.service.documentation_mode||this.eventnames.hasOwnProperty(n)||this.error("/argument-mismatch/am-40",[n]),e.type.id===a.Typeid.typeid_null||i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_function)||this.error("/argument-mismatch/am-1",["handler","setEventHandler","Null or Function",i.TScript.displayname(e.type)]),e.value.b&&1!==e.value.b.func.params.length&&this.error("/argument-mismatch/am-41"),this.setEventHandler(n,e),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},enterEventMode:{step:function(){return this.service.documentation_mode?(this.status="finished",!1):(this.eventmode&&this.error("/logic/le-2"),this.eventmode=!0,this.stack[this.stack.length-1].pe.push({step(){let t=this.stack[this.stack.length-1];if(!this.eventmode)return this.stack.pop(),this.stack[this.stack.length-1].temporaries.push(this.eventmodeReturnValue),!0;if(t.ip[t.ip.length-1]--,t.temporaries=[],0===this.eventqueue.length)this.service.documentation_mode||this.wait(10);else{let t=this.eventqueue[0].type,e=this.eventqueue[0].event;if(this.eventqueue.splice(0,1),"timer"===t&&(this.timerEventEnqueued=!1),"quit"===t)this.status="finished",this.service.statechanged&&this.service.statechanged(!0);else if(this.eventhandler.hasOwnProperty(t)){let n=this.eventhandler[t],r=new Array(1);r[0]=e,n.hasOwnProperty("enclosed")&&(r=n.enclosed.concat(r));let i={pe:[n.func],ip:[-1],temporaries:[],variables:r,object:null,enclosed:null};n.hasOwnProperty("object")&&(i.object=n.object),n.hasOwnProperty("enclosed")&&(i.enclosed=n.enclosed),this.stack.push(i),this.stack.length>=this.maxStackSize&&this.error("/logic/le-1")}}return!0},sim:s.simtrue}),!1)},sim:s.simfalse},quitEventMode(t){return this.eventmode||this.error("/logic/le-3"),this.eventmode=!1,this.eventmodeReturnValue=t,{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}}}}},8020:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tscript_core=void 0,e.tscript_core='\nclass Null\n{\npublic:\n\tconstructor() { }\n}\n\nclass Boolean\n{\npublic:\n\tconstructor(value) { }\n}\n\nclass Integer\n{\npublic:\n\tconstructor(value) { }\n}\n\nclass Real\n{\npublic:\n\tconstructor(value) { }\n\tfunction isFinite() { }\n\tfunction isInfinite() { }\n\tfunction isNan() { }\n\tstatic function inf() { }\n\tstatic function nan() { }\n}\n\nclass String\n{\npublic:\n\tconstructor(value) { }\n\tfunction size() { }\n\tfunction find(searchterm, start = 0, backward = false) { }\n\tfunction split(separator) { }\n\tfunction toLowerCase() { }\n\tfunction toUpperCase() { }\n\tfunction replace(pattern, replacement) { }\n\tstatic function fromUnicode(characters) { }\n\tstatic function join(array, separator = "") { }\n}\n\nclass Array\n{\npublic:\n\tconstructor(size_or_other, value = null) { }\n\tfunction size() { }\n\tfunction push(item) { }\n\tfunction pop() { }\n\tfunction insert(position, item) { }\n\tfunction remove(range) { }\n\tfunction slice(start, end) { }\n\tfunction sort(comparator = null) { }\n\tfunction keys() { }\n\tfunction values() { }\n\tstatic function concat(first, second) { }\n}\n\nclass Dictionary\n{\npublic:\n\tconstructor(other) { }\n\tfunction size() { }\n\tfunction has(key) { }\n\tfunction remove(key) { }\n\tfunction keys() { }\n\tfunction values() { }\n\tstatic function merge(first, second) { }\n}\n\nclass Function\n{\npublic:\n\tconstructor(value) { }\n}\n\nclass Range\n{\npublic:\n\tconstructor(begin, end) { }\n\tfunction size() { }\n\tfunction begin() { }\n\tfunction end() { }\n}\n\nclass Type\n{\npublic:\n\tconstructor(value) { }\n\tstatic function superclass(type) { }\n\tstatic function isOfType(value, type) { }\n\tstatic function isDerivedFrom(subclass, superclass) { }\n}\n\nfunction terminate() { }\nfunction assert(condition, message = "") { }\nfunction error(message) { }\nfunction same(first, second) { }\nfunction version() { }\nfunction print(text) { }\nfunction alert(text) { }\nfunction confirm(text) { }\nfunction prompt(text) { }\nfunction wait(milliseconds) { }\nfunction time() { }\nfunction localtime() { }\nfunction setEventHandler(event, handler) { }\nfunction enterEventMode() { }\nfunction quitEventMode(result = null) { }\nfunction exists(key) { }\nfunction load(key) { }\nfunction save(key, value) { }\nfunction listKeys(){}\nfunction deepcopy(value) { }\n'},8784:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.lib_audio=void 0;const r=n(150),i=n(8706),a=n(8397),o=n(7976),s=n(1169);e.lib_audio={source:s.tscript_audio,impl:{audio:{Sound:{constructor:function(t,e,n){if(i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_array)){if(i.TScript.isDerivedFrom(n.type,a.Typeid.typeid_integer)||r.ErrorHelper.error("/argument-mismatch/am-1",["sampleRate","audio.Sound.constructor","integer",i.TScript.displayname(n.type)],this.stack),c.call(this,e),!d.call(this))return;let o;try{if(n.value.b<8e3||n.value.b>96e3)throw 1;o=this.service.audioContext.createBuffer(e.value.b.length,e.value.b[0].value.b.length,n.value.b)}catch(t){r.ErrorHelper.error("/argument-mismatch/am-44b",[],this.stack)}for(let t=0;t<e.value.b.length;t++)l(e.value.b[t],o.getChannelData(t));t.value.b={buffer:o,soundloop:null}}else if(i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_string)){if(!d.call(this))return;try{let[n,i]=(0,o.data2arraybuffer)(e.value.b);t.value.b={buffer:null,soundloop:null},"audio/"!=i.substring(0,6)&&r.ErrorHelper.error("/argument-mismatch/am-46",[],this.stack),this.service.audioContext.decodeAudioData(n,(e=>{t.value.b={buffer:e,soundloop:null}}))}catch(t){r.ErrorHelper.error("/argument-mismatch/am-46",[],this.stack)}}else r.ErrorHelper.error("/argument-mismatch/am-1",["buffer","audio.Sound.constructor","array or string",i.TScript.displayname(e.type)],this.stack)},play:function(t){if(d.call(this)&&t.value.b){let e=this.service.audioContext,n=function(){if(t.value.b.buffer){let n=e.createBufferSource();n.buffer=t.value.b.buffer,n.connect(e.destination),n.start()}else window.setTimeout(n,5)};n()}return{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},startLoop:function(t){if(d.call(this)&&t.value.b&&!t.value.b.soundloop){let e=this.service.audioContext,n=function(){if(t.value.b.buffer){let n=e.createBufferSource();n.buffer=t.value.b.buffer,n.connect(e.destination),n.loop=!0,n.start(),t.value.b.soundloop=n}else window.setTimeout(n,5)};n()}return{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},stopLoop:function(t){return d.call(this)&&t.value.b&&t.value.b.soundloop&&(t.value.b.soundloop.stop(),t.value.b.soundloop=null),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},looping:function(t){let e=d.call(this)&&t.value.b&&t.value.b.soundloop;return{type:this.program.types[a.Typeid.typeid_boolean],value:{b:e}}}}}}};let l=function(t,e){for(let r=0;r<e.length;r++)e[r]=(-1,(n=t.value.b[r].value.b)>1?1:n<-1?-1:n);var n},c=function(t){t.value.b.length<1&&r.ErrorHelper.error("/argument-mismatch/am-44c",[],this.stack);let e=null;for(let n=0;n<t.value.b.length;n++){let o=t.value.b[n];i.TScript.isDerivedFrom(o.type,a.Typeid.typeid_array)||r.ErrorHelper.error("/argument-mismatch/am-1",["buffer","audio.Sound.constructor","array",i.TScript.displayname(o.type)],this.stack),null===e?e=o.value.b.length:e!==o.value.b.length&&r.ErrorHelper.error("/argument-mismatch/am-44",[],this.stack);for(let t=0;t<o.value.b.length;t++)i.TScript.isDerivedFrom(o.value.b[t].type,a.Typeid.typeid_integer)||i.TScript.isDerivedFrom(o.value.b[t].type,a.Typeid.typeid_real)||r.ErrorHelper.error("/argument-mismatch/am-1",["buffers["+n+"]["+t+"]","audio.Sound.constructor","numeric argument",i.TScript.displayname(o.value.b[t].type)],this.stack)}};function d(){return void 0!==this.service.audioContext&&null!==this.service.audioContext}},1169:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tscript_audio=void 0,e.tscript_audio="\nnamespace audio{\n\tclass Sound\n\t{\n\t\tpublic:\n\t\tconstructor(buffers, sampleRate = null){}\n\t\tfunction play(){}\n\t\tfunction startLoop(){}\n\t\tfunction stopLoop(){}\n\t\tfunction looping(){}\n\t}\n}\n"},6056:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.lib_canvas=void 0;const r=n(150),i=n(8706),a=n(8397),o=n(7976),s=n(4057);e.lib_canvas={source:s.tscipt_canvas,impl:{canvas:{setDrawingTarget:function(t){return t.type.id===a.Typeid.typeid_null?this.service.canvas.setDrawingTarget.call(this.service,null):i.TScript.isDerivedFrom(t.type,this.program.names.canvas.names.Bitmap.id)?this.service.canvas.setDrawingTarget.call(this.service,t.value.b):r.ErrorHelper.error("/argument-mismatch/am-1",["bitmap","canvas.setDrawingTarget","Bitmap or null",i.TScript.displayname(t.type)],this.stack),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},width:function(){let t=this.service.canvas.width.call(this.service);return{type:this.program.types[a.Typeid.typeid_integer],value:{b:t}}},height:function(){let t=this.service.canvas.height.call(this.service);return{type:this.program.types[a.Typeid.typeid_integer],value:{b:t}}},setLineWidth:function(t){return i.TScript.isNumeric(t.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["width","canvas.setLineWidth","numeric argument",i.TScript.displayname(t.type)],this.stack),t.value.b<=0&&r.ErrorHelper.error("/user/ue-2",["error in canvas.setLineWidth; width must be positive"],this.stack),this.service.canvas.setLineWidth.call(this.service,t.value.b),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},setLineColor:function(t,e,n,o){return i.TScript.isNumeric(t.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["red","canvas.setLineColor","numeric argument",i.TScript.displayname(t.type)],this.stack),i.TScript.isNumeric(e.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["green","canvas.setLineColor","numeric argument",i.TScript.displayname(e.type)],this.stack),i.TScript.isNumeric(n.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["blue","canvas.setLineColor","numeric argument",i.TScript.displayname(n.type)],this.stack),i.TScript.isNumeric(o.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["alpha","canvas.setLineColor","numeric argument",i.TScript.displayname(o.type)],this.stack),this.service.canvas.setLineColor.call(this.service,t.value.b,e.value.b,n.value.b,o.value.b),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},setFillColor:function(t,e,n,o){return i.TScript.isNumeric(t.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["red","canvas.setFillColor","numeric argument",i.TScript.displayname(t.type)],this.stack),i.TScript.isNumeric(e.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["green","canvas.setFillColor","numeric argument",i.TScript.displayname(e.type)],this.stack),i.TScript.isNumeric(n.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["blue","canvas.setFillColor","numeric argument",i.TScript.displayname(n.type)],this.stack),i.TScript.isNumeric(o.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["alpha","canvas.setFillColor","numeric argument",i.TScript.displayname(o.type)],this.stack),this.service.canvas.setFillColor.call(this.service,t.value.b,e.value.b,n.value.b,o.value.b),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},setOpacity:function(t){return i.TScript.isNumeric(t.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["alpha","canvas.setOpacity","numeric argument",i.TScript.displayname(t.type)],this.stack),(t.value.b<0||t.value.b>1)&&r.ErrorHelper.error("/user/ue-2",["error in canvas.setOpacity; alpha must be from the interval [0, 1]"],this.stack),this.service.canvas.setOpacity.call(this.service,t.value.b),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},setFont:function(t,e){return i.TScript.isDerivedFrom(t.type,a.Typeid.typeid_string)||r.ErrorHelper.error("/argument-mismatch/am-1",["fontface","canvas.setFont","string",i.TScript.displayname(t.type)],this.stack),i.TScript.isNumeric(e.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["fontsize","canvas.setFont","numeric argument",i.TScript.displayname(e.type)],this.stack),e.value.b<=0&&r.ErrorHelper.error("/user/ue-2",["error in canvas.setFont; fontsize must be positive"],this.stack),this.service.canvas.setFont.call(this.service,t.value.b,e.value.b),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},setTextAlign:function(t){i.TScript.isDerivedFrom(t.type,a.Typeid.typeid_string)||r.ErrorHelper.error("/argument-mismatch/am-1",["alignment","canvas.setTextAlign","string",i.TScript.displayname(t.type)],this.stack);let e=t.value.b;return"left"!==e&&"center"!==e&&"right"!==e&&r.ErrorHelper.error("/user/ue-2",["error in canvas.setTextAlign; invalid alignment value"],this.stack),this.service.canvas.setTextAlign.call(this.service,t.value.b),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},clear:function(){return this.service.canvas.clear.call(this.service),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},line:function(t,e,n,o){return i.TScript.isNumeric(t.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["x1","canvas.line","numeric argument",i.TScript.displayname(t.type)],this.stack),i.TScript.isNumeric(e.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["y1","canvas.line","numeric argument",i.TScript.displayname(e.type)],this.stack),i.TScript.isNumeric(n.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["x2","canvas.line","numeric argument",i.TScript.displayname(n.type)],this.stack),i.TScript.isNumeric(o.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["y2","canvas.line","numeric argument",i.TScript.displayname(o.type)],this.stack),this.service.canvas.line.call(this.service,t.value.b,e.value.b,n.value.b,o.value.b),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},rect:function(t,e,n,o){return i.TScript.isNumeric(t.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["left","canvas.rect","numeric argument",i.TScript.displayname(t.type)],this.stack),i.TScript.isNumeric(e.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["top","canvas.rect","numeric argument",i.TScript.displayname(e.type)],this.stack),i.TScript.isNumeric(n.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["width","canvas.rect","numeric argument",i.TScript.displayname(n.type)],this.stack),i.TScript.isNumeric(o.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["height","canvas.rect","numeric argument",i.TScript.displayname(o.type)],this.stack),this.service.canvas.rect.call(this.service,t.value.b,e.value.b,n.value.b,o.value.b),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},fillRect:function(t,e,n,o){return i.TScript.isNumeric(t.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["left","canvas.fillRect","numeric argument",i.TScript.displayname(t.type)],this.stack),i.TScript.isNumeric(e.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["top","canvas.fillRect","numeric argument",i.TScript.displayname(e.type)],this.stack),i.TScript.isNumeric(n.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["width","canvas.fillRect","numeric argument",i.TScript.displayname(n.type)],this.stack),i.TScript.isNumeric(o.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["height","canvas.fillRect","numeric argument",i.TScript.displayname(o.type)],this.stack),this.service.canvas.fillRect.call(this.service,t.value.b,e.value.b,n.value.b,o.value.b),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},frameRect:function(t,e,n,o){return i.TScript.isNumeric(t.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["left","canvas.frameRect","numeric argument",i.TScript.displayname(t.type)],this.stack),i.TScript.isNumeric(e.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["top","canvas.frameRect","numeric argument",i.TScript.displayname(e.type)],this.stack),i.TScript.isNumeric(n.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["width","canvas.frameRect","numeric argument",i.TScript.displayname(n.type)],this.stack),i.TScript.isNumeric(o.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["height","canvas.frameRect","numeric argument",i.TScript.displayname(o.type)],this.stack),this.service.canvas.frameRect.call(this.service,t.value.b,e.value.b,n.value.b,o.value.b),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},circle:function(t,e,n){return i.TScript.isNumeric(t.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["x","canvas.circle","numeric argument",i.TScript.displayname(t.type)],this.stack),i.TScript.isNumeric(e.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["y","canvas.circle","numeric argument",i.TScript.displayname(e.type)],this.stack),i.TScript.isNumeric(n.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["radius","canvas.circle","numeric argument",i.TScript.displayname(n.type)],this.stack),n.value.b<0&&r.ErrorHelper.error("/argument-mismatch/am-49",[],this.stack),this.service.canvas.circle.call(this.service,t.value.b,e.value.b,n.value.b),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},fillCircle:function(t,e,n){return i.TScript.isNumeric(t.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["x","canvas.fillCircle","numeric argument",i.TScript.displayname(t.type)],this.stack),i.TScript.isNumeric(e.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["y","canvas.fillCircle","numeric argument",i.TScript.displayname(e.type)],this.stack),i.TScript.isNumeric(n.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["radius","canvas.fillCircle","numeric argument",i.TScript.displayname(n.type)],this.stack),n.value.b<0&&r.ErrorHelper.error("/argument-mismatch/am-49",[],this.stack),this.service.canvas.fillCircle.call(this.service,t.value.b,e.value.b,n.value.b),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},frameCircle:function(t,e,n){return i.TScript.isNumeric(t.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["x","canvas.frameCircle","numeric argument",i.TScript.displayname(t.type)],this.stack),i.TScript.isNumeric(e.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["y","canvas.frameCircle","numeric argument",i.TScript.displayname(e.type)],this.stack),i.TScript.isNumeric(n.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["radius","canvas.frameCircle","numeric argument",i.TScript.displayname(n.type)],this.stack),n.value.b<0&&r.ErrorHelper.error("/argument-mismatch/am-49",[],this.stack),this.service.canvas.frameCircle.call(this.service,t.value.b,e.value.b,n.value.b),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},curve:function(t,e){i.TScript.isDerivedFrom(t.type,a.Typeid.typeid_array)||r.ErrorHelper.error("/argument-mismatch/am-1",["points","canvas.curve","array",i.TScript.displayname(t.type)],this.stack),i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_boolean)||r.ErrorHelper.error("/argument-mismatch/am-1",["closed","canvas.curve","boolean",i.TScript.displayname(e.type)],this.stack);let n=new Array;for(let e=0;e<t.value.b.length;e++){let o=t.value.b[e];i.TScript.isDerivedFrom(o.type,a.Typeid.typeid_array)||r.ErrorHelper.error("/argument-mismatch/am-1",["points["+e+"]","canvas.curve","array",i.TScript.displayname(o.type)],this.stack),2!==o.value.b.length&&r.ErrorHelper.error("/user/ue-2",["error in canvas.curve; point["+e+"] must be an array of size two."],this.stack);let s=o.value.b[0],l=o.value.b[1];i.TScript.isNumeric(s.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["points["+e+"][0]","canvas.curve","numeric argument",i.TScript.displayname(s.type)],this.stack),i.TScript.isNumeric(l.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["points["+e+"][1]","canvas.curve","numeric argument",i.TScript.displayname(l.type)],this.stack),n.push([s.value.b,l.value.b])}return this.service.canvas.curve.call(this.service,n,e.value.b),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},fillArea:function(t){i.TScript.isDerivedFrom(t.type,a.Typeid.typeid_array)||r.ErrorHelper.error("/argument-mismatch/am-1",["points","canvas.fillArea","array",i.TScript.displayname(t.type)],this.stack);let e=new Array;for(let n=0;n<t.value.b.length;n++){let o=t.value.b[n];i.TScript.isDerivedFrom(o.type,a.Typeid.typeid_array)||r.ErrorHelper.error("/argument-mismatch/am-1",["points["+n+"]","canvas.fillArea","array",i.TScript.displayname(o.type)],this.stack),2!==o.value.b.length&&r.ErrorHelper.error("/user/ue-2",["error in canvas.fillArea; point["+n+"] must be an array of size two."],this.stack);let s=o.value.b[0],l=o.value.b[1];i.TScript.isNumeric(s.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["points["+n+"][0]","canvas.fillArea","numeric argument",i.TScript.displayname(s.type)],this.stack),i.TScript.isNumeric(l.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["points["+n+"][1]","canvas.fillArea","numeric argument",i.TScript.displayname(l.type)],this.stack),e.push([s.value.b,l.value.b])}return this.service.canvas.fillArea.call(this.service,e),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},frameArea:function(t){i.TScript.isDerivedFrom(t.type,a.Typeid.typeid_array)||r.ErrorHelper.error("/argument-mismatch/am-1",["points","canvas.frameArea","array",i.TScript.displayname(t.type)],this.stack);let e=new Array;for(let n=0;n<t.value.b.length;n++){let o=t.value.b[n];i.TScript.isDerivedFrom(o.type,a.Typeid.typeid_array)||r.ErrorHelper.error("/argument-mismatch/am-1",["points["+n+"]","canvas.frameArea","array",i.TScript.displayname(o.type)],this.stack),2!==o.value.b.length&&r.ErrorHelper.error("/user/ue-2",["error in canvas.frameArea; point["+n+"] must be an array of size two."],this.stack);let s=o.value.b[0],l=o.value.b[1];i.TScript.isNumeric(s.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["points["+n+"][0]","canvas.frameArea","numeric argument",i.TScript.displayname(s.type)],this.stack),i.TScript.isNumeric(l.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["points["+n+"][1]","canvas.frameArea","numeric argument",i.TScript.displayname(l.type)],this.stack),e.push([s.value.b,l.value.b])}return this.service.canvas.frameArea.call(this.service,e),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},text:function(t,e,n){return i.TScript.isNumeric(t.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["x","canvas.text","numeric argument",i.TScript.displayname(t.type)],this.stack),i.TScript.isNumeric(e.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["y","canvas.text","numeric argument",i.TScript.displayname(e.type)],this.stack),this.service.canvas.text.call(this.service,t.value.b,e.value.b,i.TScript.toString(n)),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},reset:function(){return this.service.canvas.reset.call(this.service),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},shift:function(t,e){return i.TScript.isNumeric(t.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["dx","canvas.shift","numeric argument",i.TScript.displayname(t.type)],this.stack),i.TScript.isNumeric(e.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["dy","canvas.shift","numeric argument",i.TScript.displayname(e.type)],this.stack),this.service.canvas.shift.call(this.service,t.value.b,e.value.b),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},scale:function(t){return i.TScript.isNumeric(t.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["factor","canvas.scale","numeric argument",i.TScript.displayname(t.type)],this.stack),this.service.canvas.scale.call(this.service,t.value.b),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},rotate:function(t){return i.TScript.isNumeric(t.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["angle","canvas.rotate","numeric argument",i.TScript.displayname(t.type)],this.stack),this.service.canvas.rotate.call(this.service,t.value.b),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},transform:function(t,e){return i.TScript.isDerivedFrom(t.type,a.Typeid.typeid_array)||r.ErrorHelper.error("/argument-mismatch/am-1",["A","canvas.transform","array",i.TScript.displayname(t.type)],this.stack),i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_array)||r.ErrorHelper.error("/argument-mismatch/am-1",["b","canvas.transform","array",i.TScript.displayname(e.type)],this.stack),2!==t.value.b.length&&r.ErrorHelper.error("/user/ue-2",["error in canvas.transform; A must be an array of size two."],this.stack),i.TScript.isDerivedFrom(t.value.b[0].type,a.Typeid.typeid_array)||r.ErrorHelper.error("/argument-mismatch/am-1",["A[0]","canvas.transform","array",i.TScript.displayname(t.value.b[0].type)],this.stack),i.TScript.isDerivedFrom(t.value.b[1].type,a.Typeid.typeid_array)||r.ErrorHelper.error("/argument-mismatch/am-1",["A[0]","canvas.transform","array",i.TScript.displayname(t.value.b[1].type)],this.stack),2!==t.value.b[0].value.b.length&&r.ErrorHelper.error("/user/ue-2",["error in canvas.transform; A[0] must be an array of size two."],this.stack),2!==t.value.b[1].value.b.length&&r.ErrorHelper.error("/user/ue-2",["error in canvas.transform; A[1] must be an array of size two."],this.stack),i.TScript.isNumeric(t.value.b[0].value.b[0].type)||r.ErrorHelper.error("/argument-mismatch/am-1",["A[0][0]","canvas.transform","numeric argument",i.TScript.displayname(t.value.b[0].value.b[0].type)],this.stack),i.TScript.isNumeric(t.value.b[0].value.b[1].type)||r.ErrorHelper.error("/argument-mismatch/am-1",["A[0][1]","canvas.transform","numeric argument",i.TScript.displayname(t.value.b[0].value.b[1].type)],this.stack),i.TScript.isNumeric(t.value.b[1].value.b[0].type)||r.ErrorHelper.error("/argument-mismatch/am-1",["A[1][0]","canvas.transform","numeric argument",i.TScript.displayname(t.value.b[1].value.b[0].type)],this.stack),i.TScript.isNumeric(t.value.b[1].value.b[1].type)||r.ErrorHelper.error("/argument-mismatch/am-1",["A[1][1]","canvas.transform","numeric argument",i.TScript.displayname(t.value.b[1].value.b[1].type)],this.stack),2!==e.value.b.length&&r.ErrorHelper.error("/user/ue-2",["error in canvas.transform; b must be an array of size two."],this.stack),i.TScript.isNumeric(e.value.b[0].type)||r.ErrorHelper.error("/argument-mismatch/am-1",["b[0]","canvas.transform","numeric argument",i.TScript.displayname(e.value.b[0].type)],this.stack),i.TScript.isNumeric(e.value.b[1].type)||r.ErrorHelper.error("/argument-mismatch/am-1",["b[1]","canvas.transform","numeric argument",i.TScript.displayname(e.value.b[1].type)],this.stack),this.service.canvas.transform.call(this.service,[[t.value.b[0].value.b[0].value.b,t.value.b[0].value.b[1].value.b],[t.value.b[1].value.b[0].value.b,t.value.b[1].value.b[1].value.b]],[e.value.b[0].value.b,e.value.b[1].value.b]),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},paintImage:function(t,e,n){return i.TScript.isNumeric(t.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["x","canvas.paintImage","numeric argument",i.TScript.displayname(t.type)],this.stack),i.TScript.isNumeric(e.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["y","canvas.paintImage","numeric argument",i.TScript.displayname(e.type)],this.stack),n.type.id===a.Typeid.typeid_null||i.TScript.isDerivedFrom(n.type,this.program.names.canvas.names.Bitmap.id)||r.ErrorHelper.error("/argument-mismatch/am-1",["source","canvas.paintImage","canvas.Bitmap or null",i.TScript.displayname(e.type)],this.stack),this.service.canvas.paintImage.call(this.service,t.value.b,e.value.b,n.value.b),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},paintImageSection:function(t,e,n,o,s,l,c,d,h){return i.TScript.isNumeric(t.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["dx","canvas.paintImageSection","numeric argument",i.TScript.displayname(t.type)],this.stack),i.TScript.isNumeric(e.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["dy","canvas.paintImageSection","numeric argument",i.TScript.displayname(e.type)],this.stack),i.TScript.isNumeric(n.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["dw","canvas.paintImageSection","numeric argument",i.TScript.displayname(n.type)],this.stack),i.TScript.isNumeric(o.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["dh","canvas.paintImageSection","numeric argument",i.TScript.displayname(o.type)],this.stack),s.type.id===a.Typeid.typeid_null||i.TScript.isDerivedFrom(s.type,this.program.names.canvas.names.Bitmap.id)||r.ErrorHelper.error("/argument-mismatch/am-1",["source","canvas.paintImageSection","canvas.Bitmap or null",i.TScript.displayname(s.type)],this.stack),i.TScript.isNumeric(l.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["sx","canvas.paintImageSection","numeric argument",i.TScript.displayname(l.type)],this.stack),i.TScript.isNumeric(c.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["sy","canvas.paintImageSection","numeric argument",i.TScript.displayname(c.type)],this.stack),i.TScript.isNumeric(d.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["sw","canvas.paintImageSection","numeric argument",i.TScript.displayname(d.type)],this.stack),i.TScript.isNumeric(h.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["sh","canvas.paintImageSection","numeric argument",i.TScript.displayname(h.type)],this.stack),this.service.canvas.paintImageSection.call(this.service,t.value.b,e.value.b,n.value.b,o.value.b,s.value.b,l.value.b,c.value.b,d.value.b,h.value.b),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},getPixel:function(t,e){i.TScript.isNumeric(t.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["x","canvas.getPixel","numeric argument",i.TScript.displayname(t.type)],this.stack),i.TScript.isNumeric(e.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["y","canvas.getPixel","numeric argument",i.TScript.displayname(e.type)],this.stack);let n=this.service.canvas.getPixel.call(this.service,t.value.b,e.value.b),o=new Array;for(let t=0;t<4;t++)o.push({type:this.program.types[a.Typeid.typeid_integer],value:{b:n[t]}});return{type:this.program.types[a.Typeid.typeid_array],value:{b:o}}},setPixel:function(t,e,n){i.TScript.isNumeric(t.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["x","canvas.setPixel","numeric argument",i.TScript.displayname(t.type)],this.stack),i.TScript.isNumeric(e.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["y","canvas.setPixel","numeric argument",i.TScript.displayname(e.type)],this.stack),i.TScript.isDerivedFrom(n.type,a.Typeid.typeid_array)||r.ErrorHelper.error("/argument-mismatch/am-1",["data","canvas.setPixel","array",i.TScript.displayname(n.type)],this.stack);let o=new Array;4!=n.value.b.length&&r.ErrorHelper.error("/argument-mismatch/am-47",[],this.stack);for(let t=0;t<4;t++)i.TScript.isDerivedFrom(n.value.b[t].type,a.Typeid.typeid_integer)||r.ErrorHelper.error("/argument-mismatch/am-1",["data["+t+"]","canvas.setPixel","integer",i.TScript.displayname(n.value.b[t].type)],this.stack),o.push(n.value.b[t].value.b);return this.service.canvas.setPixel.call(this.service,t.value.b,e.value.b,o),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},Bitmap:{constructor:function(t,e,n){if(i.TScript.isNumeric(e.type)){i.TScript.isNumeric(n.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["height","canvas.Bitmap.constructor","numeric argument",i.TScript.displayname(n.type)],this.stack),(e.value.b<0||n.value.b<0)&&r.ErrorHelper.error("/user/ue-2",["error in canvas.Bitmap.constructor; width and height must not be negative"],this.stack);let a=document.createElement("canvas");a.width=0|e.value.b,a.height=0|n.value.b,t.value.b=a}else if(i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_string)){let n=(0,o.checkURI)(e.value.b);null!==n&&"image/"==n.substring(0,6)||r.ErrorHelper.error("/user/am-46",[],this.stack);let i=document.createElement("canvas"),a=i.getContext("2d"),s=new Image;s.onload=function(){i.width=s.width,i.height=s.height,null==a||a.drawImage(s,0,0)},s.src=e.value.b,t.value.b=i,this.status="waiting",this.waittime=(new Date).getTime()}else r.ErrorHelper.error("/argument-mismatch/am-1",["resourceOrWidth","canvas.Bitmap.constructor","numeric argument or string",i.TScript.displayname(e.type)],this.stack)},width:function(t){let e=t.value.b.width;return{type:this.program.types[a.Typeid.typeid_integer],value:{b:e}}},height:function(t){let e=t.value.b.height;return{type:this.program.types[a.Typeid.typeid_integer],value:{b:e}}}}}}}},4057:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tscipt_canvas=void 0,e.tscipt_canvas="\nnamespace canvas {\n\tfunction width() { }\n\tfunction height() { }\n\tfunction setLineWidth(width) { }\n\tfunction setLineColor(red, green, blue, alpha = 1.0) { }\n\tfunction setFillColor(red, green, blue, alpha = 1.0) { }\n\tfunction setFont(fontface, fontsize) { }\n\tfunction setTextAlign(alignment) { }\n\tfunction clear() { }\n\tfunction line(x1, y1, x2, y2) { }\n\tfunction rect(left, top, width, height) { }\n\tfunction fillRect(left, top, width, height) { }\n\tfunction frameRect(left, top, width, height) { }\n\tfunction circle(x, y, radius) { }\n\tfunction fillCircle(x, y, radius) { }\n\tfunction frameCircle(x, y, radius) { }\n\tfunction curve(points, close = false) { }\n\tfunction fillArea(points) { }\n\tfunction frameArea(points) { }\n\tfunction text(x, y, str) { }\n\tfunction reset() { }\n\tfunction shift(dx, dy) { }\n\tfunction scale(factor) { }\n\tfunction rotate(angle) { }\n\tfunction transform(A, b) { }\n\tfunction setDrawingTarget(bitmap = null) { }\n\tfunction setOpacity(alpha) { }\n\tfunction paintImage(x, y, source) { }\n\tfunction paintImageSection(dx, dy, dw, dh, source, sx, sy, sw, sh) { }\n\tfunction getPixel(x, y) { }\n\tfunction setPixel(x, y, data) { }\n\tclass Bitmap\n\t{\n\tpublic:\n\t\tconstructor(resourceOrWidth, height = null) { }\n\t\tfunction width() { }\n\t\tfunction height() { }\n\t}\n\tclass ResizeEvent\n\t{\n\tpublic:\n\t\tvar width;\n\t\tvar height;\n\t}\n\tclass MouseMoveEvent\n\t{\n\tpublic:\n\t\tvar x;\n\t\tvar y;\n\t\tvar buttons;\n\t\tvar shift;\n\t\tvar control;\n\t\tvar alt;\n\t\tvar meta;\n\t}\n\tclass MouseButtonEvent\n\t{\n\tpublic:\n\t\tvar x;\n\t\tvar y;\n\t\tvar button;\n\t\tvar buttons;\n\t\tvar shift;\n\t\tvar control;\n\t\tvar alt;\n\t\tvar meta;\n\t}\n\tclass KeyboardEvent\n\t{\n\tpublic:\n\t\tvar key;\n\t\tvar shift;\n\t\tvar control;\n\t\tvar alt;\n\t\tvar meta;\n\t}\n}\n"},4168:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.lib_math=void 0;const r=n(8706),i=n(8397),a=n(7915);e.lib_math={source:a.tscript_math,impl:{math:{pi:function(t){return{type:this.program.types[i.Typeid.typeid_real],value:{b:3.141592653589793}}},e:function(t){return{type:this.program.types[i.Typeid.typeid_real],value:{b:2.718281828459045}}},abs:function(t){return r.TScript.isDerivedFrom(t.type,i.Typeid.typeid_integer)?{type:this.program.types[i.Typeid.typeid_integer],value:{b:0|Math.abs(t.value.b)}}:r.TScript.isDerivedFrom(t.type,i.Typeid.typeid_real)?{type:this.program.types[i.Typeid.typeid_real],value:{b:Math.abs(t.value.b)}}:void this.error("/argument-mismatch/am-1",["x","math.abs","numeric argument",r.TScript.displayname(t.type)],this.stack)},sqrt:function(t){if(r.TScript.isNumeric(t.type))return{type:this.program.types[i.Typeid.typeid_real],value:{b:Math.sqrt(t.value.b)}};this.error("/argument-mismatch/am-1",["x","math.sqrt","numeric argument",r.TScript.displayname(t.type)],this.stack)},cbrt:function(t){if(r.TScript.isNumeric(t.type))return{type:this.program.types[i.Typeid.typeid_real],value:{b:Math.cbrt(t.value.b)}};this.error("/argument-mismatch/am-1",["x","math.cbrt","numeric argument",r.TScript.displayname(t.type)],this.stack)},floor:function(t){if(r.TScript.isNumeric(t.type))return{type:this.program.types[i.Typeid.typeid_real],value:{b:Math.floor(t.value.b)}};this.error("/argument-mismatch/am-1",["x","math.floor","numeric argument",r.TScript.displayname(t.type)],this.stack)},round:function(t){if(r.TScript.isNumeric(t.type))return{type:this.program.types[i.Typeid.typeid_real],value:{b:Math.round(t.value.b)}};this.error("/argument-mismatch/am-1",["x","math.round","numeric argument",r.TScript.displayname(t.type)],this.stack)},ceil:function(t){if(r.TScript.isNumeric(t.type))return{type:this.program.types[i.Typeid.typeid_real],value:{b:Math.ceil(t.value.b)}};this.error("/argument-mismatch/am-1",["x","math.ceil","numeric argument",r.TScript.displayname(t.type)],this.stack)},sin:function(t){if(r.TScript.isNumeric(t.type))return{type:this.program.types[i.Typeid.typeid_real],value:{b:Math.sin(t.value.b)}};this.error("/argument-mismatch/am-1",["x","math.sin","numeric argument",r.TScript.displayname(t.type)],this.stack)},cos:function(t){if(r.TScript.isNumeric(t.type))return{type:this.program.types[i.Typeid.typeid_real],value:{b:Math.cos(t.value.b)}};this.error("/argument-mismatch/am-1",["x","math.cos","numeric argument",r.TScript.displayname(t.type)],this.stack)},tan:function(t){if(r.TScript.isNumeric(t.type))return{type:this.program.types[i.Typeid.typeid_real],value:{b:Math.tan(t.value.b)}};this.error("/argument-mismatch/am-1",["x","math.tan","numeric argument",r.TScript.displayname(t.type)],this.stack)},sinh:function(t){if(r.TScript.isNumeric(t.type))return{type:this.program.types[i.Typeid.typeid_real],value:{b:Math.sinh(t.value.b)}};this.error("/argument-mismatch/am-1",["x","math.sinh","numeric argument",r.TScript.displayname(t.type)],this.stack)},cosh:function(t){if(r.TScript.isNumeric(t.type))return{type:this.program.types[i.Typeid.typeid_real],value:{b:Math.cosh(t.value.b)}};this.error("/argument-mismatch/am-1",["x","math.cosh","numeric argument",r.TScript.displayname(t.type)],this.stack)},tanh:function(t){if(r.TScript.isNumeric(t.type))return{type:this.program.types[i.Typeid.typeid_real],value:{b:Math.tanh(t.value.b)}};this.error("/argument-mismatch/am-1",["x","math.tanh","numeric argument",r.TScript.displayname(t.type)],this.stack)},asin:function(t){if(r.TScript.isNumeric(t.type))return{type:this.program.types[i.Typeid.typeid_real],value:{b:Math.asin(t.value.b)}};this.error("/argument-mismatch/am-1",["x","math.asin","numeric argument",r.TScript.displayname(t.type)],this.stack)},acos:function(t){if(r.TScript.isNumeric(t.type))return{type:this.program.types[i.Typeid.typeid_real],value:{b:Math.acos(t.value.b)}};this.error("/argument-mismatch/am-1",["x","math.acos","numeric argument",r.TScript.displayname(t.type)],this.stack)},atan:function(t){if(r.TScript.isNumeric(t.type))return{type:this.program.types[i.Typeid.typeid_real],value:{b:Math.atan(t.value.b)}};this.error("/argument-mismatch/am-1",["x","math.atan","numeric argument",r.TScript.displayname(t.type)],this.stack)},atan2:function(t,e){return r.TScript.isNumeric(t.type)||this.error("/argument-mismatch/am-1",["x","math.atan2","numeric argument",r.TScript.displayname(e.type)],this.stack),r.TScript.isNumeric(e.type)||this.error("/argument-mismatch/am-1",["x","math.atan2","numeric argument",r.TScript.displayname(t.type)],this.stack),{type:this.program.types[i.Typeid.typeid_real],value:{b:Math.atan2(t.value.b,e.value.b)}}},asinh:function(t){if(r.TScript.isNumeric(t.type))return{type:this.program.types[i.Typeid.typeid_real],value:{b:Math.asinh(t.value.b)}};this.error("/argument-mismatch/am-1",["x","math.asinh","numeric argument",r.TScript.displayname(t.type)],this.stack)},acosh:function(t){if(r.TScript.isNumeric(t.type))return{type:this.program.types[i.Typeid.typeid_real],value:{b:Math.acosh(t.value.b)}};this.error("/argument-mismatch/am-1",["x","math.acosh","numeric argument",r.TScript.displayname(t.type)],this.stack)},atanh:function(t){if(r.TScript.isNumeric(t.type))return{type:this.program.types[i.Typeid.typeid_real],value:{b:Math.atanh(t.value.b)}};this.error("/argument-mismatch/am-1",["x","math.atanh","numeric argument",r.TScript.displayname(t.type)],this.stack)},exp:function(t){if(r.TScript.isNumeric(t.type))return{type:this.program.types[i.Typeid.typeid_real],value:{b:Math.exp(t.value.b)}};this.error("/argument-mismatch/am-1",["x","math.exp","numeric argument",r.TScript.displayname(t.type)],this.stack)},log:function(t){if(r.TScript.isNumeric(t.type))return{type:this.program.types[i.Typeid.typeid_real],value:{b:Math.log(t.value.b)}};this.error("/argument-mismatch/am-1",["x","math.log","numeric argument",r.TScript.displayname(t.type)],this.stack)},log2:function(t){if(r.TScript.isNumeric(t.type))return{type:this.program.types[i.Typeid.typeid_real],value:{b:Math.log2(t.value.b)}};this.error("/argument-mismatch/am-1",["x","math.log2","numeric argument",r.TScript.displayname(t.type)],this.stack)},log10:function(t){if(r.TScript.isNumeric(t.type))return{type:this.program.types[i.Typeid.typeid_real],value:{b:Math.log10(t.value.b)}};this.error("/argument-mismatch/am-1",["x","math.log10","numeric argument",r.TScript.displayname(t.type)],this.stack)},pow:function(t,e){return r.TScript.isNumeric(t.type)||this.error("/argument-mismatch/am-1",["base","math.pow","numeric argument",r.TScript.displayname(t.type)],this.stack),r.TScript.isNumeric(e.type)||this.error("/argument-mismatch/am-1",["exponent","math.pow","numeric argument",r.TScript.displayname(e.type)],this.stack),{type:this.program.types[i.Typeid.typeid_real],value:{b:Math.pow(t.value.b,e.value.b)}}},sign:function(t){if(r.TScript.isNumeric(t.type))return{type:this.program.types[r.TScript.isDerivedFrom(t.type,i.Typeid.typeid_integer)?i.Typeid.typeid_integer:i.Typeid.typeid_real],value:{b:Math.sign(t.value.b)}};this.error("/argument-mismatch/am-1",["x","math.sign","numeric argument",r.TScript.displayname(t.type)],this.stack)},min:function(t,e){return r.TScript.order.call(this,t,e)<=0?t:e},max:function(t,e){return r.TScript.order.call(this,t,e)>=0?t:e},random:function(){return{type:this.program.types[i.Typeid.typeid_real],value:{b:Math.random()}}}}}}},7915:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tscript_math=void 0,e.tscript_math="\nnamespace math\n{\n\tfunction pi() { }\n\tfunction e() { }\n\tfunction abs(x) { }\n\tfunction sqrt(x) { }\n\tfunction cbrt(x) { }\n\tfunction floor(x) { }\n\tfunction round(x) { }\n\tfunction ceil(x) { }\n\tfunction sin(x) { }\n\tfunction cos(x) { }\n\tfunction tan(x) { }\n\tfunction sinh(x) { }\n\tfunction cosh(x) { }\n\tfunction tanh(x) { }\n\tfunction asin(x) { }\n\tfunction acos(x) { }\n\tfunction atan(x) { }\n\tfunction atan2(y, x) { }\n\tfunction asinh(x) { }\n\tfunction acosh(x) { }\n\tfunction atanh(x) { }\n\tfunction exp(x) { }\n\tfunction log(x) { }\n\tfunction log2(x) { }\n\tfunction log10(x) { }\n\tfunction pow(base, exponent) { }\n\tfunction sign(x) { }\n\tfunction min(a, b) { }\n\tfunction max(a, b) { }\n\tfunction random() { }\n}\n"},6293:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.lib_turtle=void 0;const r=n(150),i=n(8706),a=n(8397),o=n(502);e.lib_turtle={source:o.tscript_turle,impl:{turtle:{reset:function(t,e,n,o){return i.TScript.isNumeric(t.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["x","turtle.reset","numeric argument",i.TScript.displayname(t.type)],this.stack),i.TScript.isNumeric(e.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["y","turtle.reset","numeric argument",i.TScript.displayname(e.type)],this.stack),i.TScript.isNumeric(n.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["degrees","turtle.reset","numeric argument",i.TScript.displayname(n.type)],this.stack),i.TScript.isDerivedFrom(o.type,a.Typeid.typeid_boolean)||r.ErrorHelper.error("/argument-mismatch/am-1",["down","turtle.reset","boolean",i.TScript.displayname(o.type)],this.stack),this.service.turtle&&this.service.turtle.reset.call(this.service,t.value.b,e.value.b,n.value.b,o.value.b),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},move:function(t){return i.TScript.isNumeric(t.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["distance","turtle.move","numeric argument",i.TScript.displayname(t.type)],this.stack),this.service.turtle&&this.service.turtle.move.call(this.service,t.value.b),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},turn:function(t){return i.TScript.isNumeric(t.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["degrees","turtle.turn","numeric argument",i.TScript.displayname(t.type)],this.stack),this.service.turtle&&this.service.turtle.turn.call(this.service,t.value.b),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},color:function(t,e,n){return i.TScript.isNumeric(t.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["red","turtle.color","numeric argument",i.TScript.displayname(t.type)],this.stack),i.TScript.isNumeric(e.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["green","turtle.color","numeric argument",i.TScript.displayname(e.type)],this.stack),i.TScript.isNumeric(n.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["blue","turtle.color","numeric argument",i.TScript.displayname(n.type)],this.stack),this.service.turtle&&this.service.turtle.color.call(this.service,t.value.b,e.value.b,n.value.b),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},pen:function(t){return i.TScript.isDerivedFrom(t.type,a.Typeid.typeid_boolean)||r.ErrorHelper.error("/argument-mismatch/am-1",["down","turtle.pen","boolean",i.TScript.displayname(t.type)],this.stack),this.service.turtle&&this.service.turtle.pen.call(this.service,t.value.b),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}}}}}},502:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tscript_turle=void 0,e.tscript_turle="\nnamespace turtle {\n\tfunction reset(x = 0, y = 0, degrees = 0, down = true) { }\n\tfunction move(distance) { }\n\tfunction turn(degrees) { }\n\tfunction color(red, green, blue) { }\n\tfunction pen(down) { }\n}\n"},101:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Version=void 0;const i=r(n(4147));e.Version={type:null,major:i.default.version.split(".")[0],minor:i.default.version.split(".")[1],patch:i.default.version.split(".")[2],day:18,month:2,year:2025,full:function(){let t="TScript version "+this.major+"."+this.minor+"."+this.patch;return this.type&&(t+=" "+this.type),t+=" - released "+this.day+"."+this.month+"."+this.year+" - (C) Tobias Glasmachers 2018-"+this.year,t}}},3370:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tutorial_anonymousfunc=void 0,e.tutorial_anonymousfunc={id:"anonymousfunc",title:"Anonymous Functions",sections:[{content:'\n\t\t\t<p>\n\t\t\tAn anonymous function, also called a lambda function, is a function\n\t\t\twithout a name. It is a value of type Function. We have already seen\n\t\t\tthat it is possible to assign functions to variables. That\'s what we\n\t\t\tmostly do with anonymous functions. We can also use anonymous functions\n\t\t\tas a return value from a function, or pass them as a parameter into\n\t\t\tanother function. An anonymous function is created as follows:\n\t\t\t<tscript>\n\t\t\t\tvar square = function(x)\n\t\t\t\t{\n\t\t\t\t\treturn x^2;\n\t\t\t\t};\n\t\t\t</tscript>\n\t\t\tThe variable <code>square</code> now contains a function with a single\n\t\t\tparameter, which returns the square of its parameter value. Note that we\n\t\t\tcould have achieved a very similar effect by declaring a named function:\n\t\t\t<tscript>\n\t\t\t\tfunction square(x)\n\t\t\t\t{\n\t\t\t\t\treturn x^2;\n\t\t\t\t}\n\t\t\t</tscript>\n\t\t\tHowever, we will see that anonymous function can have advantages over\n\t\t\tnamed functions, and that they are capable of doing things regular\n\t\t\tfunctions cannot do.\n\t\t\t</p>\n\n\t\t\t<h2>Event Handling</h2>\n\t\t\t<p>\n\t\t\tAnonymous function are well suited for being passed into other\n\t\t\tfunctions, mostly because of improved code locality. This means that\n\t\t\tthe function appears in the code exactly where it is used. Event\n\t\t\thandling is one prominent example. Consider the following click handler:\n\t\t\t<tscript>\n\t\t\t\tfunction drawDot(event)\n\t\t\t\t{\n\t\t\t\t\tcanvas.setFillColor(0, 0, 0);\n\t\t\t\t\tcanvas.fillCircle(event.x, event.y, 5);\n\t\t\t\t}\n\n\t\t\t\t# ...lots of other code...\n\n\t\t\t\tsetEventHandler("canvas.mousedown", drawDot);\n\t\t\t\tenterEventMode();\n\t\t\t</tscript>\n\t\t\tIf the comment is replaced with hundreds of lines of code then it\n\t\t\tbecomes hard to judge the effect of the call to\n\t\t\t<code>setEventHandler</code>, simply because we first need to locate the\n\t\t\tfunction <code>drawDot</code>. Of course, we could (manually) try to\n\t\t\tmake sure that the function is close, but code may evolve in\n\t\t\tunpredictable ways. So, that\'s not always realistic, in particular with\n\t\t\tmany programmers in a team. When passing an anonymous function directly\n\t\t\tas a parameter, the problem disappears automatically:\n\t\t\t<tscript>\n\t\t\t\tsetEventHandler("canvas.mousedown", function(event)\n\t\t\t\t{\n\t\t\t\t\tcanvas.setFillColor(0, 0, 0);\n\t\t\t\t\tcanvas.fillCircle(event.x, event.y, 5);\n\t\t\t\t});\n\t\t\t\tenterEventMode();\n\t\t\t</tscript>\n\t\t\tThere are of course applications other than event handling where it can\n\t\t\tmake sense to pass a function as a parameter into another function. All\n\t\t\tof these cases profit the same way from the ability to pass the function\n\t\t\tdirectly as a value, instead of referencing it by name.\n\t\t\t</p>\n\n\t\t\t<h2>Enclosing Variables</h2>\n\t\t\t<p>\n\t\t\tA very important property of anonymous functions is that they can be\n\t\t\tparameterized. We are able to dynamically create new functions, which\n\t\t\tare parameterized by variables. This is analogous to parametric families\n\t\t\tof functions in mathematics. Think of the family of (affine) linear\n\t\t\tfunctions of the form f(x) = m·x + b. They have a variable, <i>x</i>,\n\t\t\tand two parameters <i>m</i> and <i>b</i>. An attempt to resemble the\n\t\t\tsame concept in code could look like this:\n\t\t\t<tscript>\n\t\t\t\tvar m, b;\n\t\t\t\tvar linear_func = function(x)\n\t\t\t\t{\n\t\t\t\t\treturn m * x + b;\n\t\t\t\t};\n\t\t\t</tscript>\n\t\t\tThat works to some extent, but it has two drawbacks:\n\t\t\t<ul>\n\t\t\t\t<li>If we return <code>linear_func</code> from a function then the\n\t\t\t\t\tvariables <code>m</code> and <code>b</code> are out of scope.\n\t\t\t\t\tTherefore, the construction only works if <code>m</code> and\n\t\t\t\t\t<code>b</code> are global variables.</li>\n\t\t\t\t<li>We cannot really create multiple instances of the function,\n\t\t\t\t\tsince there is only one instance of the variables holding the\n\t\t\t\t\tparameters.</li>\n\t\t\t</ul>\n\t\t\tBoth problems can be solved by turning the function into a class, with\n\t\t\tobjects holding the parameters, like this:\n\t\t\t<tscript>\n\t\t\t\tclass LinearFunction\n\t\t\t\t{\n\t\t\t\tpublic:\n\t\t\t\t\tconstructor(slope, offset)\n\t\t\t\t\t{\n\t\t\t\t\t\tm = slope;\n\t\t\t\t\t\tb = offset;\n\t\t\t\t\t}\n\t\t\t\t\tfunction eval(x)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn m * x + b;\n\t\t\t\t\t}\n\t\t\t\tprivate:\n\t\t\t\t\tvar m, b;\n\t\t\t\t}\n\t\t\t</tscript>\n\t\t\tIt is used as follows:\n\t\t\t<tscript>\n\t\t\tvar linear_func = LinearFunction(7, 2);   # function f(x) = 7·x+2\n\t\t\tprint(linear_func.eval(5));     # computes 7*5+2, hence prints 37\n\t\t\t</tscript>\n\t\t\tImportantly, we can now create multiple instances of linear functions\n\t\t\twith different (and actually independent) parameters, simply by creating\n\t\t\tmultiple objects.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tThe solution is fine as long as calling the <code>eval</code> method\n\t\t\tworks in the corresponding context. However, think of sorting an array\n\t\t\taccording to a custom criterion, passed as an argument to\n\t\t\t<code>Array.sort(compare)</code>. Then <code>compare</code> needs to be\n\t\t\ta proper function, not an object with an <code>eval</code> method. If\n\t\t\tsuch a comparison function shall depend on parameters, how to resolve\n\t\t\tthe situation?\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tAn anonymous function can do exactly that. Besides not having a name, an\n\t\t\tanonymous function can hold parameter values, just like an object holds\n\t\t\tattributes. These attributes are declared in square brackets:\n\t\t\t<tscript>\n\t\t\t\tvar m=7, b=2;\n\t\t\t\tvar linear_func = function[m, b](x)\n\t\t\t\t{\n\t\t\t\t\treturn m*x + b;\n\t\t\t\t};\n\t\t\t</tscript>\n\t\t\tWe say that the variables <code>m</code> and <code>b</code> are\n\t\t\t<i>enclosed</i> in the function. What really happens is that the\n\t\t\tvariables are <i>copied</i> into the function. The best way to think\n\t\t\tabout it is that there are attributes of the same names inside of the\n\t\t\tfunction, so the names <code>m</code> and <code>b</code> inside of the\n\t\t\tfunction refer to the attributes, not to the variables outside of the\n\t\t\tfunction (as it may seem). This also means that if the values of the\n\t\t\tvariables change to <code>m=3</code> and <code>b=1</code> later on then\n\t\t\t<code>linear_func</code> still represents the function f(x) = 7·x + 2,\n\t\t\tnot f(x) = 3·x + 1.\n\t\t\tOne more difference to the class approach is that the values of the\n\t\t\tattributes enclosed in an anonymous function cannot be modified after\n\t\t\tinitialization.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tThe notation of enclosing variables is really only syntactic sugar for\n\t\t\tan actual attribute declaration with initialization. In fact, the\n\t\t\tfollowing works:\n\t\t\t<tscript>\n\t\t\t\tvar a=4;\n\t\t\t\tvar linear_func = function[m=a+1, b=a^2](x)\n\t\t\t\t{\n\t\t\t\t\treturn m*x + b;\n\t\t\t\t};\n\t\t\t</tscript>\n\t\t\tHere it is apparent that it is not the variable <code>a</code> which is\n\t\t\tenclosed, but that two attributes <code>m</code> and <code>b</code> are\n\t\t\tcreated and initialized to arbitrary values. In that sense,\n\t\t\t<code>function[m, b](x)</code> is short syntax for\n\t\t\t<code>function[m=m, b=b](x)</code>, which means that <code>m</code> and\n\t\t\t<code>b</code> are attributes, which happen to get initialized to the\n\t\t\tvalues of the variables of the same names from the outside scope.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tAs indicated before, <code>linear_func</code> can be called like a\n\t\t\tnormal function:\n\t\t\t<tscript>\n\t\t\t\tvar linear_func = function[m=7, b=2](x)\n\t\t\t\t{\n\t\t\t\t\treturn m*x + b;\n\t\t\t\t};\n\t\t\t\tprint(linear_func(5));   # prints 37   (= 7*5+2)\n\t\t\t</tscript>\n\t\t\t</p>\n\n\t\t\t<div class="tutorial-exercise">\n\t\t\t<p>\n\t\t\tCreate an empty array <code>var functions = [];</code>. Run through a\n\t\t\tfor-loop over the range <code>0:10</code> and inside of the loop body,\n\t\t\tadd an anonymous function to the array representing the mathematical\n\t\t\tfunction f(x) = m·x + 10, where <i>m</i> is the loop counter. In other\n\t\t\twords, the array shall contain 10 functions, representing the\n\t\t\tmathematical function 0·x + 10, 1·x + 10, 2·x + 10, ..., 9·x + 10.\n\t\t\t</p>\n\t\t\t</div>\n\t\t\t',correct:"\n\t\t\tvar functions = [];\n\t\t\tfor var m in 0:10 do\n\t\t\t{\n\t\t\t\tfunctions.push(function[m](x)\n\t\t\t\t{\n\t\t\t\t\treturn m*x + 10;\n\t\t\t\t});\n\t\t\t}",tests:[{type:"js",code:'let program = parse(code).program;\n\t\t\t\t\tif (! program) return "Failed to parse the program code.";\n\t\t\t\t\tif (! hasStructure(program, "loop;")) return "Use a loop to solve the problem!";\n\t\t\t\t\tif (isRecursive(program)) return "Please don\'t use recursion.";'},{type:"call",code:"functions[0](2);"},{type:"call",code:"functions[1](5);"},{type:"code",code:"for var f in functions do for var x in 3:5 do print(f(x));"}]},{content:"\n\t\t\t<p>\n\t\t\tWhat we have effectively done in the exercise is to create 10 different\n\t\t\tfunctions, although the keyword <code>function</code> appears only once\n\t\t\tin the code. In that sense, the ability to create parameterized\n\t\t\tfunctions greatly extends the scope of the data type <code>Type</code>,\n\t\t\tsince with anonymous functions, there is a potentially indefinite number\n\t\t\tof function values in a program. More and more values of type function\n\t\t\tcan come into existence, for example in a loop, or when reacting to an\n\t\t\tevent at the discretion of the user.\n\t\t\t</p>\n\n\t\t\t<h2>Wrap-up</h2>\n\t\t\t<p>\n\t\t\tWe have seen anonymous functions and their applications. One application\n\t\t\tis avoiding indirection or removing the need to refer to a function by\n\t\t\tname, since it can be passed into or returned from a function directly\n\t\t\tas a value. This generally improves code locality.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tThe other capability of anonymous functions is that they can be\n\t\t\tparameterized. This means that an anonymous function can have\n\t\t\tattributes that work pretty much like private attributes of an object.\n\t\t\tThis way, an arbitrary number of function instances can be created.\n\t\t\t</p>\n\t\t\t"}]}},8319:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tutorial_arrays=void 0,e.tutorial_arrays={id:"arrays",title:"Arrays",sections:[{content:'\n\t\t\t<p>\n\t\t\tSay, we want to write an application for managing data. We don\'t\n\t\t\tnecessarily talk about internet-scale data here &mdash; just any\n\t\t\tscalable task for which the amount of data is not fixed a priori, so the\n\t\t\tsize of our data may change over time. Let\'s pick a simple example: a\n\t\t\tshopping list. The list shall contain any number of items, which will\n\t\t\tsimply be strings for now. We need a list of scalable size containing\n\t\t\tstrings, so that we can add any number of items at need.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tWe have learned that values like strings can be stored in variables.\n\t\t\tHence, we could start out like this:\n\t\t\t<tscript>\n\t\t\t\tvar item1 = "milk";\n\t\t\t\tvar item2 = "bread";\n\t\t\t\tvar item3 = "butter";\n\t\t\t\tvar item4 = "chocolate";\n\t\t\t\tvar item5 = "juice";\n\t\t\t\t# ...\n\t\t\t</tscript>\n\t\t\tThe problem with this approach is that whenever we want to add a new\n\t\t\titem, we need to change the program. We could have equally well used a\n\t\t\tspreadsheet for storing the data, in contrast to writing a program.\n\t\t\tWhat we aim for is that the program is written once, and\n\t\t\t<i>at runtime</i> we are able to add any number of values. Basically,\n\t\t\twe don\'t want to create a specific spreadsheet, but rather a program\n\t\t\tthat can work with any spreadsheet. With out current approach, that\n\t\t\twould entail defining a very large number of variables:\n\t\t\t<tscript>\n\t\t\t\t# ...\n\t\t\t\tvar item997;\n\t\t\t\tvar item998;\n\t\t\t\tvar item999\n\t\t\t\tvar item1000;\n\t\t\t</tscript>\n\t\t\tMost of them would be empty (e.g., <code>null</code>), since luckily,\n\t\t\tshopping lists tend to much shorter than 1000 entries. On the other\n\t\t\thand, if we ever need a longer shopping list then we are out of luck.\n\t\t\tAnd we did not even start to think about tasks like finding an empty\n\t\t\tvariable to store the next item, displaying the list, and so on.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tThis problem obviously asks for a different approach. Instead of\n\t\t\tdefining a large number of variables, one for each string, it would be\n\t\t\tmuch nicer to define a single variable for the whole list. That variable\n\t\t\twould need the ability to store many strings, in fact an arbitrary\n\t\t\tnumber of them. That\'s exactly what a <i>container</i> does. In TScript,\n\t\t\tthere are two types of containers: arrays and dictionaries.\n\t\t\t</p>\n\n\t\t\t<h2>Storing Multiple Values</h2>\n\t\t\t<p>\n\t\t\tYou can imagine an array as a list of data values. The list can have any\n\t\t\tlength: it can be empty (store no value), a single value, ten or a\n\t\t\tmillion values. To create an array we use square brackets and separate\n\t\t\tvalues with commas:\n\t\t\t<tscript>\n\t\t\t\tvar a1 = [2, 3, 5, 7, 11, 13];          # array of numbers\n\t\t\t\tvar a2 = ["h", "e", "l", "l", "o"];     # array of strings\n\t\t\t\tvar a3 = [1, print, "string", false];   # array containing mixed data\n\t\t\t\tvar a4 = [1, [2, 3], 4];                # nested arrays\n\t\t\t\tvar a5 = [];                            # empty array\n\t\t\t</tscript>\n\t\t\tThe values stored in the array can be anything, including other arrays.\n\t\t\t<p>\n\t\t\t</p>\n\t\t\tEvery entry of the list can be accessed by its position, or index, as\n\t\t\tstorage positions in the array are enumerated. The first index of an\n\t\t\tarray is always at 0, therefore an array of size n has the indices 0 to\n\t\t\tn-1. This is exactly the range <code>0:n</code>, and that\'s no\n\t\t\tcoincidence. To access values from the array, we simply call the array\n\t\t\tby name and the index of the storage location we\'d like to get or set\n\t\t\tthe value from. We are even able to access sub-arrays of consecutive\n\t\t\tstorage locations by specifying a range of indices. Accessing entries\n\t\t\tof the above arrays works as follows:\n\t\t\t<tscript>\n\t\t\t\tprint(a1[2]);     # prints 5\n\t\t\t\tprint(a2[1:3]);   # prints [e,l]\n\t\t\t\ta3[3] = true;     # changes a3 to [1, print, "string", true]\n\t\t\t</tscript>\n\t\t\tIf we access an array inside of an array, we can access its items just \n\t\t\tas we access values from a standalone array:\n\t\t\t<tscript>\n\t\t\t\tprint(a4[1][0]);   # prints 2\n\t\t\t</tscript>\n\t\t\tLet\'s look at the last example more closely. The following happens:\n\t\t\t<ol>\n\t\t\t<li>The variable name <code>a4</code> is encountered. It is found to\n\t\t\t\tcontain an array as a value. The array holds three values: the\n\t\t\t\tinteger 1, another array, and the integer 4.</ul>\n\t\t\t<li>The item access operator <code>[1]</code> is found. It tells TScript\n\t\t\t\tthat we refer to item number 1. Since we start counting from 0,\n\t\t\t\tthat\'s the second item: the array <code>[2, 3]</code>.\n\t\t\t<li>The second item access operator <code>[0]</code> tells TScript that\n\t\t\t\twe refer to item number 0 of the latter array. That\'s the integer 2.\n\t\t\t<li>The integer 2 is passed to the <code>print</code> function, which\n\t\t\t\toutputs it as a message.</li>\n\t\t\t</ol>\n\t\t\tAccessing an invalid index results in an error message.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tWith arrays in place, the data management of our shopping list simplifies\n\t\t\tconsiderably.\n\t\t\t</p>\n\t\t\t<div class="tutorial-exercise">\n\t\t\tCreate a variable <code>shoppinglist</code> containing an array of the\n\t\t\titems <i>milk</i>, <i>bread</i>, <i>butter</i>, <i>chocolate</i>, and\n\t\t\t<i>juice</i>.\n\t\t\t</div>\n\t\t\t',correct:'\n\t\t\t\tvar shoppinglist = ["milk", "bread", "butter", "chocolate", "juice"];\n\t\t\t',tests:[{type:"code",code:"print(shoppinglist);"}]},{content:'\n\t\t\tIn a realistic application, the list will initially be an empty array.\n\t\t\tNow we can think about operations like adding new items, searching for\n\t\t\titems, deleting items, and printing out the whole list.\n\t\t\t</p>\n\n\t\t\t<h3>Loops over Arrays</h3>\n\t\t\t<p>\n\t\t\tIn many tasks, we need to do something with every item in the array. For\n\t\t\tour shopping list, we want to display the whole list. For simplicity, we\n\t\t\twill print out each item as a message. This is a repetitive operation,\n\t\t\tso we will use a loop. How often should the loop body run? To answer\n\t\t\tthat question, we need to know the number of items in the array. It can\n\t\t\tbe obtained with <code>shoppinglist.size()</code>. Then, looping over\n\t\t\tthe list and printing out all items works as follows:\n\t\t\t<tscript>\n\t\t\t\tfor var i in 0:shoppinglist.size() do\n\t\t\t\t{\n\t\t\t\t\tprint(shoppinglist[i]);\n\t\t\t\t}\n\t\t\t</tscript>\n\t\t\tNote how we created a range dynamically at runtime from the array size.\n\t\t\tIf should be said that there is a simpler way to output the array:\n\t\t\t<tscript>\n\t\t\t\tprint(shoppinglist);\n\t\t\t</tscript>\n\t\t\tGive it a try!\n\t\t\tThe <code>print</code> function has no problem with outputting an array\n\t\t\tas a whole. However, the output is much less readable, in particular if\n\t\t\tthe list grows large. Furthermore, imagine drawing the items onto a\n\t\t\tbeautifully designed canvas interface - then we need a loop in any case.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tSay, we just ran out of butter. However, we are unsure &mdash; is butter\n\t\t\talready on the list or not? Since we have only five items right now,\n\t\t\tthat\'s easy enough to decide manually. However, if the list gets long\n\t\t\tthen we should better automate the task.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tSo consider the task of checking whether an item is already on the list\n\t\t\tor not. Let\'s write a function for the job. For the case that there is\n\t\t\tmore than one list in our program (groceries, christmas presents, ...),\n\t\t\twe will provide the array and the item we are looking for as parameters:\n\t\t\t<code>function findItem(list, item)</code>. The function shall return\n\t\t\tthe index at which the item was found, or <code>null</code> if it is not\n\t\t\tfound in the array. The value <code>null</code> then means: the item is\n\t\t\tfound at "no index".\n\t\t\t</p>\n\t\t\t<div class="tutorial-exercise">\n\t\t\t<p>\n\t\t\tImplement the above described function <code>findItem</code>. The main\n\t\t\ttool is a loop over all items of the list. Within the loop, the current\n\t\t\titem must be compared with the query item. If they are equal, then the\n\t\t\tcurrent index is returned. If the loop exists normally, then the item\n\t\t\twas not found. In this case the function returns <code>null</code>.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tTest the function with the above shopping list, by printing its return\n\t\t\tvalue for various test cases. For example,\n\t\t\t<code>findItem(shoppinglist, "butter")</code> should return 2, while\n\t\t\t<code>findItem(shoppinglist, "cookies")</code> should return\n\t\t\t<code>null</code>, since cookies are not on the list.\n\t\t\t</p>\n\t\t\t</div>\n\t\t\t',correct:"\n\t\t\tfunction findItem(list, item)\n\t\t\t{\n\t\t\t\tfor var i in 0:list.size() do\n\t\t\t\t{\n\t\t\t\t\tif list[i] == item then return i;\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\t",tests:[{type:"call",code:'findItem(["coffee", "tea"], "coffee");'},{type:"call",code:'findItem(["coffee", "tea"], "tea");'},{type:"call",code:'findItem(["coffee", "tea"], "water");'}]},{content:'\n\t\t\t<p>\n\t\t\tIn many cases, we do not need the index, but only the items in the array,\n\t\t\tone after the other. For example, that\'s the case when printing the list.\n\t\t\tWith a for-loop, that\'s an extremely simple task, since arrays and\n\t\t\tfor-loops are best friends. Instead of iterating over the range of\n\t\t\tindices, the loop can iterate directly over the array. This means that\n\t\t\tthe loop counter is no longer an index, but rather an array element.\n\t\t\tThe following loop also prints the shopping list:\n\t\t\t<tscript>\n\t\t\t\tfor var item in shoppinglist do\n\t\t\t\t{\n\t\t\t\t\tprint(item);\n\t\t\t\t}\n\t\t\t</tscript>\n\t\t\tHere is the first version once again for comparison:\n\t\t\t<tscript>\n\t\t\t\tfor var i in 0:shoppinglist.size() do\n\t\t\t\t{\n\t\t\t\t\tprint(shoppinglist[i]);\n\t\t\t\t}\n\t\t\t</tscript>\n\t\t\tLet\'s discuss the differences in detail:\n\t\t\t<ul>\n\t\t\t\t<li>The names of the loop counters are different (<code>item</code>\n\t\t\t\t\tversus <code>i</code>). This is just a question of style. It is\n\t\t\t\t\tof no significance to the computer.</li>\n\t\t\t\t<li>The new version loops over the array, the old version over a\n\t\t\t\t\trange, which happens to be constructed from the array size,\n\t\t\t\t\tso that both loops perform the same number of iterations.</li>\n\t\t\t\t<li>In the new version, the loop variable holds items, while it\n\t\t\t\t\tholds indices in the old version. This is why an item is very\n\t\t\t\t\teasily accessed as <code>item</code> in the new version, and\n\t\t\t\t\ta bit more cumbersome as <code>shoppinglist[i]</code> in the\n\t\t\t\t\told version.</li>\n\t\t\t</ul>\n\t\t\tLike a range contains numbers, an array contains items. The for-loop can\n\t\t\titerate over both types of objects. In each iteration, the loop counter\n\t\t\ttakes on a value from the range or array, and in the next iteration the\n\t\t\tnext value, and so on, until reaching the end. Indeed, for the purpose of\n\t\t\tlooping, a range like <code>5:10</code> and the corresponding array\n\t\t\t<code>[5,6,7,8,9]</code> of indices are equivalent.\n\t\t\t</p>\n\n\t\t\t<h3>Manipulating Arrays</h3>\n\t\t\t<p>\n\t\t\tWe know how to create an array with defined content and access its\n\t\t\titems. However, more often than not, we need the ability to change an\n\t\t\texisting array at runtime. For example, we may want to add a new item to\n\t\t\tour shopping list and delete another one. These manipulations are\n\t\t\tperformed by various functions.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tA quite common case is to add elements one by one to an array. Then the\n\t\t\t<code>push</code>-method is a suitable solution. It appends a given\n\t\t\tvalue to the array it is called upon. Example:\n\t\t\t<tscript>\n\t\t\t\tshoppinglist.push("cookies");\n\t\t\t</tscript>\n\t\t\tReverse, the <code>pop</code>-method removes the last item and returns\n\t\t\tits value:\n\t\t\t<tscript>\n\t\t\t\tvar removedItem = shoppinglist.pop();\n\t\t\t</tscript>\n\t\t\tNow the cookies have disappeared from the list (sorry, no free cookies\n\t\t\tin this tutorial), and the variable <code>removedItem</code> contains\n\t\t\tthe string <code>"cookies"</code> as its value.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tSometimes we need to insert or remove an element at a specific position\n\t\t\tother than then end. This is achieved with <code>insert</code> and\n\t\t\t<code>remove</code> instead of <code>push</code> and <code>pop</code>.\n\t\t\tIn addition to the value, they allow to specify a position (index) where\n\t\t\tthe insertion or removal is supposed to happen. In contrast to\n\t\t\t<code>pop</code>, <code>remove</code> does not return the element.\n\t\t\tLet\'s look at some examples:\n\t\t\t<tscript>\n\t\t\t\tvar a = [];           # current array: []\n\t\t\t\ta.push("a");          # current array: ["a"]\n\t\t\t\ta.insert(0, true);    # current array: [true, "a"]\n\t\t\t\ta.insert(2, false);   # current array: [true, "a", false]\n\t\t\t\ta.push(7);            # current array: [true, "a", false, 7]\n\t\t\t\tprint(a.pop());       # current array: [true, "a", false]; prints 7\n\t\t\t\ta.remove(1);          # current array: [true, false]\n\t\t\t\ta[0] = 10;            # current array: [10, false]\n\t\t\t</tscript>\n\t\t\t</p>\n\t\t\t<div class="tutorial-exercise">\n\t\t\t<p>\n\t\t\tCreate an empty array and fill it in a loop using <code>push</code>\n\t\t\twith the numbers from 0 to 10 (including 0 and 10). Print the array\n\t\t\tafter each insertion.\n\t\t\t</p>\n\t\t\t</div>\n\t\t\t',correct:"\n\t\t\tvar a = [];\n\n\t\t\tfor var i in 0:11 do {\n\t\t\t\ta.push(i);\n\t\t\t\tprint(a);\n\t\t\t}\n\t\t\t",tests:[{type:"js",code:'let program = parse(code).program;\n\t\t\t\t\tif (! program) return "Failed to parse the program code.";\n\t\t\t\t\tif (hasStructure(program, "{ call(print); call(print); }")) return "You do not need to use more than one print command.";\n\t\t\t\t\tif (isRecursive(program)) return "Please don\'t use recursion.";'},{type:"code",code:""}]},{content:'\n\t\t\t<div class="tutorial-exercise">\n\t\t\t<p>\n\t\t\tCreate an empty array and fill it with a loop with <code>push</code>\n\t\t\twith the number from 0 to 10 (including 0 and 10). Print the array after\n\t\t\teach insertion. This is the same as before.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tNow let\'s make things a bit more tricky. Use a second loop to insert the\n\t\t\tsame numbers from top to bottom at every second position of the array.\n\t\t\tPrint the array after each insertion. The final array shall look like\n\t\t\tthis:\n\t\t\t<code>[0,10,1,9,2,8,3,7,4,6,5,5,6,4,7,3,8,2,9,1,10,0]</code>.\n\t\t\t</p>\n\t\t\t</div>\n\t\t\t',correct:"\n\t\t\tvar a = [];\n\n\t\t\tfor var i in 0:11 do {\n\t\t\t\ta.push(i);\n\t\t\t\tprint(a);\n\t\t\t}\n\n\t\t\tfor var i in 0:a.size() do {\n\t\t\t\ta.insert(2*i+1, 10-i);\n\t\t\t\tprint(a);\n\t\t\t}\n\t\t\t",tests:[{type:"js",code:'let program = parse(code).program;\n\t\t\t\t\tif (! program) return "Failed to parse the program code.";\n\t\t\t\t\tif (hasStructure(program, "{ call(print); call(print); call(print);}")) return "You do not need to use more than two print commands.";\n\t\t\t\t\tif (isRecursive(program)) return "Please don\'t use recursion.";'},{type:"code",code:""}]},{content:'\n\t\t\t<p>\n\t\t\tLet\'s apply the newly gained knowledge to our shopping list. We would\n\t\t\tlike to implement two more functions: one for adding an item while\n\t\t\tavoiding a duplicate, and one for removing a given item, specified by\n\t\t\tname. Using the above function <code>findItem</code>, that\'s really\n\t\t\teasy:\n\t\t\t<tscript>\n\t\t\tfunction addItem(list, item)\n\t\t\t{\n\t\t\t\tvar index = findItem(list, item);\n\t\t\t\tif index == null then list.push(item);\n\t\t\t}\n\n\t\t\tfunction removeItem(list, item)\n\t\t\t{\n\t\t\t\tvar index = findItem(list, item);\n\t\t\t\tif index != null then list.remove(index);\n\t\t\t}\n\t\t\t</tscript>\n\t\t\tThis is also a good example of the proper use of functions. The shared\n\t\t\tfunctionality of locating an item by name is provided by the function\n\t\t\t<code>findItem</code>, which is then used multiple times in the program.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tLet\'s try it out:\n\t\t\t<tscript>\n\t\t\tfunction printList(list)\n\t\t\t{\n\t\t\t\tfor var item in list do print(item);\n\t\t\t}\n\n\t\t\tfunction findItem(list, item)\n\t\t\t{\n\t\t\t\tfor var i in 0:list.size() do\n\t\t\t\t{\n\t\t\t\t\tif list[i] == item then return i;\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tfunction addItem(list, item)\n\t\t\t{\n\t\t\t\tvar index = findItem(list, item);\n\t\t\t\tif index == null then list.push(item);\n\t\t\t}\n\n\t\t\tfunction removeItem(list, item)\n\t\t\t{\n\t\t\t\tvar index = findItem(list, item);\n\t\t\t\tif index != null then list.remove(index);\n\t\t\t}\n\n\t\t\tvar shoppinglist = [];\n\t\t\taddItem(shoppinglist, "milk");\n\t\t\taddItem(shoppinglist, "bread");\n\t\t\taddItem(shoppinglist, "butter");\n\t\t\taddItem(shoppinglist, "chocolate");\n\t\t\taddItem(shoppinglist, "juice");\n\t\t\tprintList(shoppinglist);\n\t\t\taddItem(shoppinglist, "butter");    # duplicate!\n\t\t\tprintList(shoppinglist);            # same as before\n\t\t\tremoveItem(shoppinglist, "eggs");   # not found, no effect\n\t\t\tprintList(shoppinglist);            # still the same\n\t\t\t</tscript>\n\t\t\tThis is not (yet) a full-blown shopping list with graphical user\n\t\t\tinterface, but it is a good start. Feel free to replace the\n\t\t\t<code>printList</code> function with a version that draws the items onto\n\t\t\tthe canvas. You may prepare controls for adding and removing items,\n\t\t\talthough right now we do not yet have the tools to make them\n\t\t\toperational.\n\t\t\t</p>\n\n\t\t\t<h2>Further Array Operations</h2>\n\t\t\t<p>\n\t\t\tArrays provide two further notable operations. The first one is the sort\n\t\t\tfunction, which sorts the items in ascending order:\n\t\t\t<tscript>\n\t\t\t\tvar a = [5, 3, 4, 2, 3];\n\t\t\t\ta.sort();\n\t\t\t\tprint(a);   # prints [2,3,3,4,5]\n\t\t\t</tscript>\n\t\t\tThe second one is the function <code>Array.concat</code>, which\n\t\t\tconcatenates two arrays (as sequences) and returns a new sequence:\n\t\t\t<tscript>\n\t\t\t\tvar a = [1,2];\n\t\t\t\tvar b = [3,4,5];\n\t\t\t\tvar c = Array.concat(a, b);\n\t\t\t\tprint(c);   # prints [1,2,3,4,5]\n\t\t\t</tscript>\n\t\t\t</p>\n\n\t\t\t<h2>Multi-dimensional Grids</h2>\n\t\t\t<p>\n\t\t\tArrays represent a sequence of items in a defined order. However, quite\n\t\t\toften, items are ordered by more than one axis. For example, the fields\n\t\t\tof a chessboard form a two-dimensional structure, and we need two\n\t\t\tcoordinates, or indices, to refer to a specific field. So, in order to\n\t\t\trepresent pieces on a chessboard, do we need a different container?\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tNo, arrays are perfectly fine for this case. What we need is a\n\t\t\ttwo-dimensional array. The simplest way to create one is to form an\n\t\t\tarray of rows, with each row being an array of pieces\n\t\t\t(or <code>null</code> if the field is empty). A miniature 3x3 chessboard\n\t\t\tstate may look as follows:\n\t\t\t<tscript>\n\t\t\tvar board = [\n\t\t\t\t[null        , "white king", "white pawn"],\n\t\t\t\t[null        , "black pawn", null        ],\n\t\t\t\t["black king", null        , null        ]\n\t\t\t];\n\t\t\t</tscript>\n\t\t\tThe beauty of this approach is that we can access the items easily using\n\t\t\ttwo coordinates. To print the item in row zero and column two (the white\n\t\t\tpawn), we simple do\n\t\t\t<tscript>\n\t\t\tprint(board[0][2]);\n\t\t\t</tscript>\n\t\t\tThe same approach generalizes to three-dimensional grids and higher up,\n\t\t\tbut two-dimensional arrays are the most common case.\n\t\t\t</p>\n\n\t\t\t<h2>Wrap-up</h2>\n\t\t\t<p>\n\t\t\tArrays are containers: they are values which can reference any number of\n\t\t\tother values. In effect, this means that a variable which references a\n\t\t\tsingle value, if that value is an array, can implicitly reference any\n\t\t\tnumber of values. This gives us the power to write programs that work\n\t\t\twith any amount of data, always with the same code. We no longer need to\n\t\t\tworry about how much data we may need to handle. Of course, handling\n\t\t\tmore data needs more time, but still the same code works no matter how\n\t\t\tmuch data we have.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tArrays are extremely common in programming. They are involved in the\n\t\t\tmajority of cases where data is involved. Important operations on arrays\n\t\t\tare insertion (in particular at the end), removal, reading and\n\t\t\toverwriting values, and last but not least iterating over all items with\n\t\t\ta for-loop.\n\t\t\t</p>\n\t\t\t'}]}},9867:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tutorial_calculations=void 0,e.tutorial_calculations={id:"calculations",title:"Calculations",sections:[{content:'\n\t\t\t<p>\n\t\t\tWe have used strings (text) and numbers for various purposes.\n\t\t\tOf course, numbers become far more useful if we can perform\n\t\t\tcalculations with them. After all, we are aiming to program a\n\t\t\tcomputer, so let\'s make it compute something.\n\t\t\t</p>\n\t\t\t<h3>Operators</h3>\n\t\t\t<p>\n\t\t\tPerforming calculations is simple and intuitive. We can simply\n\t\t\twrite them out:\n\t\t\t<tscript>\n\t\t\tprint(20 + 15);   # prints 35\n\t\t\tprint(6 * 7);     # prints 42\n\t\t\t</tscript>\n\t\t\tTScript uses the following operators to express arithmetic\n\t\t\toperations:\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t<table class="nicetable">\n\t\t\t<tr><th>operator</th><th>meaning</th></tr>\n\t\t\t<tr><td>+</td><td>addition</td></tr>\n\t\t\t<tr><td>-</td><td>subtraction</td></tr>\n\t\t\t<tr><td>*</td><td>multiplication</td></tr>\n\t\t\t<tr><td>/</td><td>division</td></tr>\n\t\t\t<tr><td>//</td><td>integer division</td></tr>\n\t\t\t<tr><td>%</td><td>modulo (remainder of the integer division)</td></tr>\n\t\t\t<tr><td>^</td><td>power</td></tr>\n\t\t\t</table>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tLet\'s look at further examples:\n\t\t\t<tscript>\n\t\t\tprint(100 - 1);   # prints 99\n\t\t\tprint(23 / 7);    # prints 3.2857142857142856\n\t\t\tprint(23 // 5);   # prints 3\n\t\t\tprint(23 % 5);    # prints 2 (remainder of 23 // 3)\n\t\t\tprint(7^2);       # prints 49\n\t\t\t</tscript>\n\t\t\t</p>\n\t\t\t<h3>Notation</h3>\n\t\t\t<p>\n\t\t\tOf course, numbers don\'t need to be integers. We can use a sign, a\n\t\t\tdecimal point, and even an exponent to denote numbers in scientific\n\t\t\tnotation:\n\t\t\t<tscript>\n\t\t\tvar my_pi = 3.14159;      # decimal point\n\t\t\tvar minus_2 = -2;         # negative number\n\t\t\tvar h = 6.62607015e-34;   # Planck\'s constant\n\t\t\t</tscript>\n\t\t\t</p>\n\t\t\t<h3>Adding strings</h3>\n\t\t\t<p>\n\t\t\tIn contrast to numbers, dividing two strings does not make any sense\n\t\t\tand hence results in an error message. However, strings can be added,\n\t\t\tresulting in concatenation. Moreover, arbitrary values can be added\n\t\t\tto strings, as follows:\n\t\t\t<tscript>\n\t\t\tvar side = 5;\n\t\t\tprint("The side length of the square is " + side + ".");\n\t\t\t</tscript>\n\t\t\t</p>\n\t\t\t<h3>Calculations with Variables</h3>\n\t\t\t<p>\n\t\t\tLike most things in programming, calculations are much more powerful\n\t\t\twhen involving variables. Consider the following program:\n\t\t\t<tscript>\n\t\t\tvar side = 5;\n\t\t\tvar circumfence = 4 * side;\n\t\t\tvar area = side^2;\n\t\t\tprint("The side length of the square is " + side + ".");\n\t\t\tprint("The circumfence of the square is " + circumfence + ".");\n\t\t\tprint("The area of the square is " + area + ".");\n\t\t\t</tscript>\n\t\t\tWhy should we do that? What is wrong with the following?\n\t\t\t<tscript>\n\t\t\tprint("The side length of the square is 5.");\n\t\t\tprint("The circumfence of the square is 20.");\n\t\t\tprint("The area of the square is 25.");\n\t\t\t</tscript>\n\t\t\tWell, what if we ever need to change the side length? Changing only a\n\t\t\tsingle variable, it is ensured that all three measures of size of a\n\t\t\tsquare are kept consistent. Also, pre-calculating values is often bad\n\t\t\tstyle. This is because round-off artifacts can accumulate, while the\n\t\t\tcomputer\'s internal calculations tend to be more precise than what\n\t\t\tprogrammers do manually (or with a calculator).\n\t\t\t</p>\n\t\t\t<h3>Mathematical Constants and Functions</h3>\n\t\t\t<p>\n\t\t\tReconsider the problem of drawing a yellow sun on blue background onto\n\t\t\tthe canvas. As a bonus requirement, we want the sun to be horizontally\n\t\t\tcentered on the canvas. We start as follows:\n\t\t\t<tscript>\n\t\t\tvar center = canvas.width() / 2;    # horizontal center\n\t\t\tcanvas.setFillColor(0.5, 0.5, 1);   # light blue\n\t\t\tcanvas.clear();                     # fill the entire canvas\n\t\t\tcanvas.setFillColor(1, 1, 0);       # yellow\n\t\t\tcanvas.fillCircle(center, 100, 40); # ball (the sun)\n\t\t\t</tscript>\n\t\t\tLet\'s add a few rays to our sun. How to do that? Well, just draw a few\n\t\t\tyellow lines, right? But to which coordinates? We will use the\n\t\t\tmathematical functions <i>sin</i> and <i>cos</i> to calculate\n\t\t\tcoordinates. To this end, note that for mathematical functions, angles\n\t\t\tare always specified in <i>radians</i> (in contrast to degrees used by\n\t\t\tthe turtle). Casting a ray in a given angle <code>alpha</code>\n\t\t\thence works as follows:\n\t\t\t<tscript>\n\t\t\tvar alpha = 10;                             # ray direction (angle in degrees)\n\t\t\tvar length = 90;                            # ray length from the center\n\t\t\tvar radians = alpha / 180 * math.pi();      # turn alpha into radians\n\t\t\tvar x = length * math.cos(radians);         # position relative ...\n\t\t\tvar y = length * math.sin(radians);         # ... to the center\n\t\t\tcanvas.setLineColor(1, 1, 0);               # yellow\n\t\t\tcanvas.setLineWidth(3);                     # a bit wider\n\t\t\tcanvas.line(center, 100, center+x, 100+y);  # draw the ray!\n\t\t\t</tscript>\n\t\t\tThat\'s quite some calculations.\n\t\t\tGive it a try, and play around with the angle. Combining variables\n\t\t\tand calculations is a powerful technique. For now, in order to obtain\n\t\t\tadditional rays, we would need to copy and paste the program a number\n\t\t\tof times, paying attention not to declare variables multiple times.\n\t\t\tWe will get to know a better solution soon.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tIn the above code, we have used <code>math.pi();</code>\n\t\t\tto obtain a (rather) precise representation of the mathematical\n\t\t\tconstant&nbsp;&#x3C0;. This is analogous to calling\n\t\t\t<code>canvas.width()</code>. Open the documentation and\n\t\t\tsearch for "math functions" in order to get an overview of the\n\t\t\tavailable functions. Besides trigonometric functions there are various\n\t\t\troots and other powers, logarithms, absolute value, rounding, sign, and\n\t\t\ta few more.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t<div class="tutorial-exercise">\n\t\t\tIt is time to do your own calculation. We will combine it with a bit\n\t\t\tof geometry using the turtle. Draw a right-angled triangle as follows:\n\t\t\t<tscript do-not-run>\n\t\t\tturtle.move(60);\n\t\t\tturtle.turn(90);\n\t\t\tturtle.move(60);\n\t\t\tturtle.turn(135);\n\t\t\tvar len;\n\t\t\tturtle.move(len);\n\t\t\t</tscript>\n\t\t\tOf course, the variable needs to be initialized with an appropriate\n\t\t\tdistance for the turtle to travel which is the length of the Hypotenuse.\n\t\t\tThis amounts to applying Pythagoras. Hint: The function\n\t\t\t<code>math.sqrt(x);</code> computes the square root of\n\t\t\tits parameter.\n\t\t\t</div>\n\t\t\t</p>\n\t\t\t',correct:"\n\t\t\tturtle.move(60);\n\t\t\tturtle.turn(90);\n\t\t\tturtle.move(60);\n\t\t\tturtle.turn(135);\n\t\t\tvar len = math.sqrt(60^2 + 60^2);\n\t\t\tturtle.move(len);\n\t\t\t"},{content:"\n            <h2>Composite Assignment Operators</h2>\n            <p>\n            In many situation we do not really need complex calculations, but instead\n            we wish to apply a single algebraic operation to modify an existing\n            value. For example, given a variable <i>n</i>, we may wish to increment\n            its variable. This can be achieved with an assignment of the pretty\n            trivial calculation <i>n+1</i> on the right-hand side:\n            <tscript do-not-run>\n            n = n + 1;\n            </tscript>\n            This situation is so common that there is a special shorthand notation,\n            known as composite assignment:\n            <tscript do-not-run>\n            n += 1;\n            </tscript>\n            The same works for other operators. For example, the value can be\n            doubled:\n            <tscript do-not-run>\n            n *= 2;\n            </tscript>\n            This is really nothing but syntactic sugar for the longer form\n            <code>n = n * 2;</code>. However, once you get used to it,\n            it is not only shorter, but it actually improves readability of code.\n            </p>\n\n            <h2>Wrap-Up</h2>\n            <p>\n\t\t\tYou can now use TScript as an extended calculator. Calculations can\n\t\t\tinvolve numbers and variables. Beyond the elementary arithmetic\n\t\t\toperators, TScript offers a range of built-in mathematical functions.\n            </p>\n            "}]}},5385:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tutorial_datatypes=void 0,e.tutorial_datatypes={id:"datatypes",title:"Simple Data Types",sections:[{content:'\n\t\t\t<p>\n\t\t\tWe have already encountered values of different types: numbers\n\t\t\tand strings. We have also had a glimpse at the values\n\t\t\t<code>true</code> and <code>false</code>.\n\t\t\tFurthermore, when printing an uninitialized variable, you may\n\t\t\thave stumbled across the value <code>null</code>:\n\t\t\t<tscript>\n\t\t\tvar animal;\n\t\t\tprint(animal);   # prints "null"\n\t\t\t</tscript>\n\t\t\tThis is a special value indicating that the variable contains\n\t\t\t"no actual value", or "nothing of interest". That\'s the case as\n\t\t\tlong as nothing was assigned to it.\n\t\t\t</p>\n\t\t\t<h2>List of Data Types</h2>\n\t\t\t<p>\n\t\t\tFor a programming language it is important that these values are\n\t\t\tof different types, called <i>data types</i>. The type of a value\n\t\t\tdecides on which operations can be applied to it. For example,\n\t\t\tnumbers can be multiplied and strings can be concatenated (with\n\t\t\tthe plus-operator). That sounds trivial, but we will see that it\n\t\t\timplies a few minor quirks.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tThe values we have seen so far are of the following types:\n\t\t\t</p>\n\t\t\t<table class="nicetable">\n\t\t\t<tr><th>data type</th><th>values</th><th>meaning</th></tr>\n\t\t\t<tr><td>Null</td><td><code>null</code></td><td>no (meaningful) value</td></tr>\n\t\t\t<tr><td>Boolean</td><td><code>true</code>, <code>false</code></td><td>truth or logic value</td></tr>\n\t\t\t<tr><td>Integer</td><td><code>0</code>, <code>23</code>, <code>-1000</code></td><td>integral number</td></tr>\n\t\t\t<tr><td>Real</td><td><code>2.0</code>, <code>3.14159</code></td><td>decimal number</td></tr>\n\t\t\t<tr><td>String</td><td><code>""</code>, <code>"Hello World!"</code></tscript></td><td>arbitrary text (can be empty)</td></tr>\n\t\t\t</table>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tEach data type comes with a range of values it can represent.\n\t\t\tThe data types <code>Null</code> and\n\t\t\t<code>Boolean</code> are particularly simple; they\n\t\t\thave only one and two values, respectively.\n\t\t\t</p>\n\t\t\t<h2>Two Types of Numbers</h2>\n\t\t\t<p>\n\t\t\tIn a computer, the range and the precision of\n\t\t\tnumbers is limited, but for now this is a rather irrelevant\n\t\t\ttechnicality. If you are interested, open the documentation and\n\t\t\tsearch for "type integer" and "type real". As a rule of thumb,\n\t\t\tuse integers for counting and indexing, and real numbers for\n\t\t\tcalculations. While most of that will happen automatically, it\n\t\t\tis sometimes useful to be aware of the concept that every value\n\t\t\thas a data type, and that different types support different\n\t\t\toperations.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tOne example of such a situation is integer overflow. Integers\n\t\t\tare limited to the range -2<sup>31</sup> to +2<sup>31</sup>-1.\n\t\t\tWhile that range is large enough for most purposes, it is not\n\t\t\tinfinite. When exceeding the range, very unintuitive things\n\t\t\thappen, known as integer overflow:\n\t\t\t<tscript>\n\t\t\tprint(2000^3);     # prints -589934592\n\t\t\t</tscript>\n\t\t\tReal numbers have a significantly larger range, so with reals\n\t\t\tthe same calculation succeeds:\n\t\t\t<tscript>\n\t\t\tprint(2000.0^3);   # prints 8000000000\n\t\t\t</tscript>\n\t\t\tHere we have used a seemingly superfluous decimal point. The point does\n\t\t\tnot change the value of the number, but it forces the computer to\n\t\t\tinterpret it as a value of type <code>Real</code>.\n\t\t\t</p>\n\t\t\t<h2>Character Escaping</h2>\n            <p>\n            To store text we use type <code>String</code>. A string\n            is a sequence of characters of any size. A string is enclosed in double\n            quotation marks, which signal this specific data type. It is possible\n            to store any kind of character inside of a string. However, how to store\n            a double quotation mark in a string? The naive attempt of doing so would\n            look as follows:\n            </p>\n            <pre class="code">print("She shouted "Don\'t do that!" and left.");</pre>\n            <p>\n            However, the string ends after the second word. That\'s because TScript\n            has a strict syntax, and no chance to understand that we meant two double\n            quotes to delimit the string, while the other two are supposed to be\n            part of the string content. In this sense, the double quotation mark is a\n            "forbidden" character.\n            </p><p>\n            In order\n            to enable double quotes as well as several special characters (like\n            newline) inside of strings, a mechanism called <i>escaping</i> is\n            employed. It defines that the backslash character <code></code>\n            when used inside of a string has a special meaning, which depends on the\n            following character(s). The backslash plus the following characters taken\n            together is called an <i>escape sequence</i>. The most important escape\n            sequences are as follows:\n            </p>\n\t\t\t<table class="nicetable">\n\t\t\t<tr><th>escape sequence</th><th>meaning</th></tr>\n\t\t\t<tr><td><code>\\"</code></td><td><code>"</code></td></tr>\n\t\t\t<tr><td><code>\\\\</code></td><td><code>\\</code></td></tr>\n\t\t\t<tr><td><code>\\n</code></td><td>newline</td></tr>\n\t\t\t<tr><td><code>\\r</code></td><td>carriage return</td></tr>\n\t\t\t<tr><td><code>\\t</code></td><td>horizontal tabulator</td></tr>\n\t\t\t</table>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tWith the help of escape characters, we can complete the example:\n\t\t\t<tscript>\n\t\t\tprint("She shouted \\"Don\'t do that!\\" and left.");\n\t\t\t</tscript>\n\t\t\tFor a complete list of escape sequences, open the documentation and\n\t\t\tsearch for "string literal escape double quotes".\n\t\t\t</p>\n\t\t\t<h2>Further Data Types</h2>\n\t\t\t<p>\n\t\t\tAs we move on, we will discover five more built-in data types of\n\t\t\tTScript, as well as <i>classes</i>, which are user-defined data types.\n\t\t\tFor the moment, we will focus on strings and numbers, and in the\n\t\t\tfollowing units we will get to know more about truth values.\n\t\t\t</p>\n\t\t\t'}]}},4121:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tutorial_dictionaries=void 0,e.tutorial_dictionaries={id:"dictionaries",title:"Dictionaries",sections:[{content:'\n\t\t\t<p>\n\t\t\tAnother form of container is the dictionary. Just like an array, it can\n\t\t\thold any number of items. There is a single major difference: items are\n\t\t\tnot indexed with numbers in a range from 0 to the array size, but rather\n\t\t\twith strings. This seemingly small difference has far-reaching\n\t\t\tconsequences, and that\'s why arrays and dictionaries are quite\n\t\t\tdifferent.\n\t\t\t</p>\n\n\t\t\t<h2>Creating Dictionaries</h2>\n\t\t\t<p>\n\t\t\tLet\'s start by looking at an example where it makes sense to "index"\n\t\t\tdata with strings. Classic examples are a phone book, or more generally,\n\t\t\tan address book. Let\'s start with the simplest case: phone numbers only.\n\t\t\tWe way wish to represent the following data:\n\t\t\t<table class="nicetable">\n\t\t\t\t<tr><th>Name</th><th>Phone Number</th></tr>\n\t\t\t\t<tr><td>Alice</td><td>1234567</td></tr>\n\t\t\t\t<tr><td>Bob</td><td>55667788</td></tr>\n\t\t\t\t<tr><td>Charlie</td><td>9876543</td></tr>\n\t\t\t</table>\n\t\t\tHow to do that? We could use two arrays:\n\t\t\t<tscript>\n\t\t\t\tvar names = ["Alice", "Bob", "Charlie"];\n\t\t\t\tvar numbers = [1234567, 55667788, 9876543];\n\t\t\t</tscript>\n\t\t\tThat works, but it is far from ideal, for various reasons:\n\t\t\t<ul>\n\t\t\t\t<li>There is no formal mechanism in the language which tells us that\n\t\t\t\t\tthe two arrays belong together. The concept is not necessarily\n\t\t\t\t\treadable for a new programmer.</li>\n\t\t\t\t<li>We need to take care to keep the arrays consistent. For example,\n\t\t\t\t\twhen deleting a name, we also need to delete the corresponding\n\t\t\t\t\tnumber &mdash; otherwise we will be in deep trouble.</li>\n\t\t\t</ul>\n\t\t\tIt would be much nicer to have the corresponding information "name" and\n\t\t\t"phone number" bound together. In this simple case, that goal can be\n\t\t\tachieved by treating names as indices and phone numbers as values of a\n\t\t\tdictionary:\n\t\t\t<tscript>\n\t\t\t\tvar phonebook = {"Alice": 1234567, "Bob": 55667788, "Charlie": 9876543};\n\t\t\t</tscript>\n\t\t\tThis is roughly analogous to an array definition. Let\'s highlight\n\t\t\tsimilarities and differences:\n\t\t\t<ul>\n\t\t\t\t<li>A dictionary is enclosed in curly braces, while an array is\n\t\t\t\t\tenclosed in square brackets.</li>\n\t\t\t\t<li>In both bases, items are separated with commas.</li>\n\t\t\t\t<li>For dictionaries, items are always specified as pairs. We often\n\t\t\t\t\tcall them key-value-pairs. The key (or index) is a string,\n\t\t\t\t\tfollowed by a colon, followed by an arbitrary value. There is\n\t\t\t\t\tno restriction for dictionaries to contain only integers as\n\t\t\t\t\tvalues, as in the example above. They can hold any type of data,\n\t\t\t\t\tincluding arrays and dictionaries.</li>\n\t\t\t\t<li>Just like integer indices into an array, the keys of a\n\t\t\t\t\tdictionary must be unambiguous. However, since keys are not\n\t\t\t\t\timplicitly enumerated, this is up to the programmer.</li>\n\t\t\t\t<li>In an array, when inserting an item in the front, all indices\n\t\t\t\t\tchange. In a dictionary nothing like that can happen, since the\n\t\t\t\t\tkeys are explicit.</li>\n\t\t\t</ul>\n\t\t\tAlthough keys are strings, we can write them as identifiers (without\n\t\t\tdouble quotes) as long as there is no ambiguity:\n\t\t\t<tscript>\n\t\t\t\tvar phonebook = {Alice: 1234567, Bob: 55667788, Charlie: 9876543};\n\t\t\t</tscript>\n\t\t\tItems are accessed the same way as with arrays, but using strings as\n\t\t\tkeys:\n\t\t\t<tscript>\n\t\t\t\tprint(phonebook["Alice"]);     # prints 1234567\n\t\t\t\tphonebook["Bob"] = 88776655;   # store Bob\'s new number\n\t\t\t</tscript>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tContainers (arrays and dictionaries) can be nested. This is a powerful\n\t\t\tconcept for defining nearly arbitrarily complex data structures. Let\'s\n\t\t\tlook at an example:\n\t\t\t<tscript>\n\t\t\t\tvar data = {\n\t\t\t\t\t\tplayers: [\n\t\t\t\t\t\t\t{name: "Tom", console: "PC"},\n\t\t\t\t\t\t\t{name: "Tim", console: "PS"}\n\t\t\t\t\t\t]\n\t\t\t\t\t};\n\t\t\t\tprint(data["players"][0]["console"]);   # prints PC\n\t\t\t</tscript>\n\t\t\t</p>\n\t\t\tNotice how three item access operators are chained in the print\n\t\t\tstatement to access the value <code>"PC"</code>.\n\t\t\t</p>\n\n\t\t\t<h2>Iterating over Dictionaries</h2>\n\t\t\t<p>\n\t\t\tWhen trying to output the phone book, we encounter the major consequence\n\t\t\tof keys being arbitrary strings, in contrast to a range of indices:\n\t\t\tvalues in a dictionary are not ordered. As a programmer, we should think\n\t\t\tof dictionaries as "associative" containers, not as "sequence"\n\t\t\tcontainers. In arrays, the order (or sequence) of elements often has a\n\t\t\tmeaning. For arrays, it makes sense to sort its items by some rule, say,\n\t\t\tto sort numbers in ascending order. For dictionaries, such an operation\n\t\t\tdoes not make any sense. That\'s not because strings cannot be ordered\n\t\t\t(they can, using the lexicographic order by default), but rather because\n\t\t\tthat\'s not how dictionaries work.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tAs a consequence, when iterating over a dictionary, we should not assume\n\t\t\tthat the items appear in a specific order. In TScript, items usually\n\t\t\tappear in the same order in which they were added to the dictionary.\n\t\t\tThat\'s generally different from the lexicographic order of the keys.\n\t\t\tAlso, we cannot iterate over a dictionary using a range. That\'s because\n\t\t\tthe concept of "item number 5" does not exist in a dictionary. Luckily,\n\t\t\tthe dictionary is able to provide all of its items as an array, and we\n\t\t\talready know how to iterate over an array:\n\t\t\t<tscript>\n\t\t\t\tfor var key in phonebook.keys() do\n\t\t\t\t{\n\t\t\t\t\tvar value = phonebook[key];\n\t\t\t\t\tprint("name: " + key + " - phone number: " + value);\n\t\t\t\t}\n\t\t\t</tscript>\n\t\t\tNote how we use a for-loop over the array <code>phonebook.keys()</code>\n\t\t\tto obtain the keys (names) one by one, and how we can use the square\n\t\t\tbracket (item access) operator inside of the loop to access the\n\t\t\tcorresponding values (phone numbers).\n\t\t\t</p>\n\n\t\t\t<h2>Manipulating Dictionaries</h2>\n\t\t\t<p>\n\t\t\tJust like arrays, dictionaries support operations for inserting and\n\t\t\tdeleting entries, or more specifically, key-value-pairs. Insertion\n\t\t\tworks exactly the same as overwriting a key:\n\t\t\t<tscript>\n\t\t\t\tphonebook["Doris"] = 24680;\n\t\t\t</tscript>\n\t\t\tIf Doris is already known then her number of overwritten, otherwise a\n\t\t\tnew entry is added. We can think of this operation as the instruction to\n\t\t\tthe dictionary to associate the value <code>24680</code> with the key\n\t\t\t<code>"Doris"</code>. Deletion works analogous to arrays:\n\t\t\t<tscript>\n\t\t\t\tphonebook.remove("Doris");\n\t\t\t</tscript>\n\t\t\t</p>\n\n\t\t\t<h2>Further Dictionary Operations</h2>\n\t\t\t<p>\n\t\t\tJust like an array, we can ask a dictionary for its size. That\'s\n\t\t\tgenerally not very useful, since its keys are not defined by a range. In\n\t\t\tcontrast, a very useful operation is to ask the dictionary whether it\n\t\t\tcontains a given key or not:\n\t\t\t<tscript>\n\t\t\t\tvar name = "Eric";\n\t\t\t\tif phonebook.has(name)\n\t\t\t\tthen print(name + "\'s phone number is " + phonebook[name]);\n\t\t\t\telse print("Sorry, I don\'t know " + name + "\'s number.");\n\t\t\t</tscript>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tThere is a <code>Dictionary.merge</code> function, which works similar\n\t\t\tto <code>Array.concat</code>. If a key is present in both dictionaries\n\t\t\tto be merged, then the second value overwrites the first one.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tWe have seen that a dictionary can provide all of its keys as an array\n\t\t\twith the keys function:\n\t\t\t<tscript>\n\t\t\t\tprint(phonebook.keys());   # prints [Alice,Bob,Charlie]\n\t\t\t</tscript>\n\t\t\tIt can equally well return its values as an array:\n\t\t\t<tscript>\n\t\t\t\tprint(phonebook.values());   # prints [1234567,55667788,9876543]\n\t\t\t</tscript>\n\t\t\tThis can simpliy loop iterating over the values in cases where the keys\n\t\t\tare not needed.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t<div class="tutorial-exercise">\n\t\t\t<p>\n\t\t\tWrite a <code>function histogram(array)</code>, which takes an array\n\t\t\tof strings as input and returns a histogram: for each string it counts\n\t\t\tthe number of occurrences. It returns the histogram as a dictionary\n\t\t\twith the string as the key and the frequency as the value. For example,\n\t\t\tcalling the function with the array <code>["foo", "bar", "foo"]</code>\n\t\t\tshall yield the return value <code>{"foo": 2, "bar": 1}</code>.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tSolution strategy: Start with an empty dictionary. Loop over the array.\n\t\t\tInside of the loop, check whether the current string is already known as\n\t\t\ta key in the dictionary. If yes, then increment its count by one. If no,\n\t\t\tthen add the key with a count of one. Finally, return the dictionary.\n\t\t\t</p>\n\t\t\t</div>\n\t\t\t',correct:"\n\t\t\tfunction histogram(array)\n\t\t\t{\n\t\t\t\tvar d = {};\n\t\t\t\tfor var s in array do\n\t\t\t\t{\n\t\t\t\t\tif d.has(s)\n\t\t\t\t\tthen d[s] += 1;\n\t\t\t\t\telse d[s] = 1;\n\t\t\t\t}\n\t\t\t\treturn d;\n\t\t\t}\n\t\t\t",tests:[{type:"js",code:'let program = parse(code).program;\n\t\t\t\t\tif (! program) return "Failed to parse the program code.";\n\t\t\t\t\tif (isRecursive(program)) return "Please don\'t use recursion.";'},{type:"call",code:'histogram(["foo", "bar", "foo"]);'},{type:"call",code:'histogram(["foo", "bar", "foo", "foo", "blabla", "test", "test"]);'}]},{content:"\n\t\t\t<h2>Wrap-up</h2>\n\t\t\t<p>\n\t\t\tDictionaries, like arrays, can reference as many values as necessary.\n\t\t\tThey use strings as keys, and their items are not enumerated or ordered.\n\t\t\tWe can think of them as an association of keys with values.\n\t\t\t</p>\n\t\t\t"}]}},313:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tutorial_dowhile=void 0,e.tutorial_dowhile={id:"dowhile",title:"Loops with Conditions",sections:[{content:"\n\t\t\t<p>\n\t\t\tA for-loop executes a piece of code multiple times, for a pre-defined\n\t\t\tnumber of iterations. However, what if we don't know beforehand how many\n\t\t\titerations we need? Consider the problem of printing out the first 100\n\t\t\tprime numbers: 2, 3, 5, 7, 11, 13, 17, 19, ...\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tHow do we do that? We may loop over all numbers starting at 2. For each\n\t\t\tnumber we check whether it is prime or not. If it is prime then we print\n\t\t\tit and increment a counter. For the sake of simplicity, let's assume that\n\t\t\twe have a check for a number being prime or not readily at our disposal.\n\t\t\tWhen the counter reaches 100 then we stop. However, how many loop\n\t\t\titerations do we need?\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tWe can pick a \"large enough\" number:\n\t\t\t<tscript>\n\t\t\tvar counter = 0;\n\t\t\tfor var n in 2:1000000 do\n\t\t\t{\n\t\t\t\tif isPrime(n) and counter < 100 then\n\t\t\t\t{\n\t\t\t\t\tprint(n);\n\t\t\t\t\tcounter += 1;\n\t\t\t\t}\n\t\t\t}\n\t\t\t</tscript>\n\t\t\t(The code won't run, since the imagined\n\t\t\t<code>isPrime</code> check does not exist.)\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tLooping until <i>n = 1000000</i> is surely enough for the task. However,\n\t\t\tcan we get away with 10000? Maybe 1000? 500? Even less? What if the\n\t\t\tnumber of primes to output is flexible? Can we come up with a good value\n\t\t\tthat just works, without earning a diploma in number theory first?\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tLooping for too long is wasteful. On the other hand, in general for a\n\t\t\tmore demanding task it may be hard enough to come up with any number of\n\t\t\titerations that's surely large enough. Quite obviously, this task needs a\n\t\t\tdifferent approach: we would like to run the loop until a condition is\n\t\t\tmet. In this case, the loop shall stop when the counter reaches 100, no\n\t\t\tmatter how many iterations it takes.\n\t\t\t</p>\n\t\t\t<h2>While-Loops</h2>\n\t\t\t<p>\n\t\t\tTScript offers two types of loops of this kind: The do-while-loop and the\n\t\t\twhile-do-loop. We will call them while-loops when the difference does not\n\t\t\tmatter. Both of these loops run <i>while</i> a condition is fulfilled.\n\t\t\tThey make solving our problem quite straightforward:\n\t\t\t<tscript>\n\t\t\tvar counter = 0, n = 2;\n\t\t\twhile counter < 100 do\n\t\t\t{\n\t\t\t\tif isPrime(n) then\n\t\t\t\t{\n\t\t\t\t\tprint(n);\n\t\t\t\t\tcounter += 1;\n\t\t\t\t}\n\t\t\t\tn += 1;\n\t\t\t}\n\t\t\t</tscript>\n\t\t\tWhile-loops do not use loop counters, since there is no range involved.\n\t\t\tThis brings the minor downside that we need to maintain and increment\n\t\t\t<i>n</i> ourselves. However, aside from that, the loop is greatly\n\t\t\timproved, since it runs exactly as often as it needs to. The need to\n\t\t\testimate a suitable number of iterations beforehand is gone.\n\t\t\t</p>\n\t\t\t<h2>Pre- and Post-Checked Loops</h2>\n\t\t\t<p>\n\t\t\tThe above loop is a while-do-loop, simply because the keyword\n\t\t\t<code>while</code> precedes the keyword\n\t\t\t<code>do</code>. We can turn the loop around:\n\t\t\t<tscript>\n\t\t\tvar counter = 0, n = 2;\n\t\t\tdo\n\t\t\t{\n\t\t\t\tif isPrime(n) then\n\t\t\t\t{\n\t\t\t\t\tprint(n);\n\t\t\t\t\tcounter += 1;\n\t\t\t\t}\n\t\t\t\tn += 1;\n\t\t\t}\n\t\t\twhile counter < 100;\n\t\t\t</tscript>\n\t\t\tThis is a do-while-loop. In this case, both of them do the job just fine.\n\t\t\tThe only difference between the two loops is that the while-do-loop\n\t\t\tchecks the condition <i>before</i> it executes the loop body, while the\n\t\t\tdo-while-loop checks the condition <i>after</i> it executes the loop\n\t\t\tbody. This is intuitive, since in the first case the condition is denoted\n\t\t\tbefore the loop body, and in the second case it appears after the loop\n\t\t\tbody. Therefore, the loops are known as <i>pre-checked</i> and\n\t\t\t<i>post-checked</i> loops.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tThe only difference between the two loop types is that a post-checked\n\t\t\tloop executes the loop body at least once, while a pre-checked loop has\n\t\t\the ability to skip the loop body entirely if the condition is false\n\t\t\talready initially. What sounds like nit-picking at first is a quite\n\t\t\tcommon requirement in practice, where pre-checked loops are much more\n\t\t\tcommon than their post-checked counterparts.\n\t\t\t</p>\n\t\t\t<div class=\"tutorial-exercise\">\n\t\t\t<p>\n\t\t\tWrite a while-do-loop yourself. The loop shall output all square numbers\n\t\t\tof at most three digits (starting at 1), i.e., all square numbers smaller\n\t\t\tthan 1000. Use only a single print statement inside of the loop.\n\t\t\t</p>\n\t\t\t</div>\n\t\t\t",correct:"\n\t\t\t\tvar n = 1;\n\t\t\t\twhile (n^2 < 1000) do {\n\t\t\t\t\tprint(n^2);\n\t\t\t\t\tn += 1;\n\t\t\t\t}\n\t\t\t\t",tests:[{type:"code",code:"print(i);"},{type:"js",code:'\n\t\t\t\t\t\tlet program = parse(code).program;\n\t\t\t\t\t\tif (! program) return "Failed to parse the program code.";\n\t\t\t\t\t\tif (hasStructure(program, "{ call(print); call(print); }")) return "Use only a single print command!";\n\t\t\t\t\t\tif (! hasStructure(program, "loop;")) return "Use a loop to solve the problem!";\n\t\t\t\t\t\tif (! hasStructure(program, "\'while-do-loop\';")) return "Use a do while-loop to solve the problem!";\n\t\t\t\t\t\tif (! hasStructure(program, "loop { call(print); }")) return "Use a print statement inside of the loop body to solve the problem!";\n\t\t\t\t\t\tif (isRecursive(program)) return "Please don\'t use recursion.";\n\t\t\t\t\t\t'}]},{content:'\n\t\t\t<h2>Break and continue</h2>\n\t\t\t<p>\n\t\t\tWhile-loops have greatly extended our flexibility of stopping a loop at\n\t\t\tneed. However, in some cases we need even more flexibility: we may wish\n\t\t\tto stop the loop when we are in the middle of the loop body.\n\t\t\tConceptually, such a situation may look as follows:\n\t\t\t<tscript>\n\t\t\tvar n = 0;\n\t\t\twhile n < 100 do\n\t\t\t{\n\t\t\t\t# several\n\t\t\t\t# commands\n\t\t\t\t# here ...\n\t\t\t\tif (n^2+1) % 17 == 5 then\n\t\t\t\t{\n\t\t\t\t\tbreak;   # stop the loop immediately\n\t\t\t\t}\n\t\t\t\t# ... several\n\t\t\t\t# commands\n\t\t\t\t# here\n\t\t\t\tn += 1;\n\t\t\t}\n\t\t\t</tscript>\n\t\t\tThe <code>break</code> command stops the loop immediately.\n\t\t\tIt does not even wait for the current loop iteration to finish, but\n\t\t\tinstead directly jumps to the next instruction after the loop. This\n\t\t\tallows us to write something that looks suspiciously similar to a great\n\t\t\tdanger, namely an infinite loop that never stops:\n\t\t\t<tscript do-not-run>\n\t\t\tvar n = 0;\n\t\t\twhile true do\n\t\t\t{\n\t\t\t\t# several\n\t\t\t\t# commands\n\t\t\t\t# here ...\n\t\t\t\tif (n^2+1) % 17 == 5 then\n\t\t\t\t{\n\t\t\t\t\tbreak;   # stop the loop immediately\n\t\t\t\t}\n\t\t\t\t# ... several\n\t\t\t\t# commands\n\t\t\t\t# here\n\t\t\t\tn += 1;\n\t\t\t}\n\t\t\t</tscript>\n\t\t\tThe construction <code>while true do</code> taken by itself\n\t\t\tis an infinite loop, since the condition is fixed to being fulfilled.\n\t\t\tAfter all, it is not even a proper condition, but a hard-coded outcome\n\t\t\tthereof. We could equally well write\n\t\t\t<code>while 0 == 0 do</code>. This loop would be a clear\n\t\t\tbug in the program, since it never completes. Unless... yes, unless a\n\t\t\t<code>break</code> statement comes to the rescue.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tA related control-flow statement is the keyword\n\t\t\t<code>continue</code>. Like <code>break</code>\n\t\t\tit leaves the loop body immediately. However, it does not leave the loop,\n\t\t\tbut instead it jumps straight to the condition, and in case that the\n\t\t\tcondition holds, to the next loop iteration. In effect, it allows us to\n\t\t\t<i>skip</i> the remainder of the loop body. To see both keywords in\n\t\t\teffect, we can rewrite the prime number example as follows:\n\t\t\t<tscript do-not-run>\n\t\t\tvar counter = 0, n = 2;\n\t\t\twhile true do\n\t\t\t{\n\t\t\t\tif not isPrime(n) then continue;\n\t\t\t\tprint(n);\n\t\t\t\tcounter += 1;\n\t\t\t\tif counter == 100 then break;\n\t\t\t}\n\t\t\t</tscript>\n\t\t\t</p>\n\t\t\t<div class="tutorial-exercise">\n\t\t\tWrite a (conceptually) infinite loop containing a break statement.\n\t\t\tInside of its loop body, it shall use <code>prompt</code> to\n\t\t\tobtain a value from the user. If the user cancels the dialog (the value\n\t\t\tis <code>null</code>) then it should ask again, until a\n\t\t\tstring is provided. This string shall be printed and the loop shall stop.\n\t\t\t</div>\n\t\t\t',correct:'\n\t\t\t\twhile true do\n\t\t\t\t{\n\t\t\t\t\tvar v = prompt("Please enter something!");\n\t\t\t\t\tif v == null then continue;\n\t\t\t\t\tprint(v);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t',tests:[{type:"code",code:"",input:["Hello"]},{type:"code",code:"",input:[null,"World"]},{type:"code",code:"",input:[null,null,null,null,null,"Test"]},{type:"js",code:'let program = parse(code).program;\n\t\t\t\t\tif (! program) return "Failed to parse the program code.";\n\t\t\t\t\tif (! hasStructure(program, "loop;")) return "Use a loop to solve the problem!";\n\t\t\t\t\tif (!hasStructure(program, "loop { condition; }")) return "There needs to be a condition to break the loop at the right time!";\n\t\t\t\t\tif (isRecursive(program)) return "Please don\'t use recursion.";'}]},{content:'\n\t\t\t<p>\n\t\t\t<code>break</code> and <code>continue</code>\n\t\t\talso work with for-loops. They behave the exact same way. In particular,\n\t\t\tcontinuing a for-loop means to start the next loop iteration, and that\n\t\t\tinvolved incrementing the loop counter. Note that executing\n\t\t\t<code>continue</code> in the last iteration of a for-loop is\n\t\t\tequivalent to executing <code>break</code>, since there is\n\t\t\tnot next iteration. The same holds for a while-loop when the condition is\n\t\t\tno longer fulfilled.\n\t\t\t</p>\n\n\t\t\t<h2>Equivalence of loops</h2>\n\t\t\t<p>\n\t\t\tIn general it is possible to write every <i>for</i>-loop as a\n\t\t\t<i>while</i>-loop. Vice versa only <i>while</i>-loops where the number of\n\t\t\tloop iterations is known a-priori can be written as a <i>for</i>-loop.\n\t\t\tThe easiest way to make that happen is to use a variable as a loop\n\t\t\tcounter, similar to <i>n</i> in the prime number examples. Give it a try!\n\t\t\t</p>\n\t\t\t<div class="tutorial-exercise">\n\t\t\tWrite a while-do-loop that is equivalent to the following for-loop:\n\t\t\t<tscript>\n\t\t\t\tfor var i in 5:10 do print(i);\n\t\t\t</tscript>\n\t\t\tIn other words, write a while-do-loop with a single print statement in\n\t\t\tits loop body, which prints the numbers 5, 6, 7, 8, and 9.\n\t\t\t</div>\n\t\t\t',correct:"\n\t\t\t\tvar i = 5;\n\t\t\t\twhile i < 10 do\n\t\t\t\t{\n\t\t\t\t\tprint(i);\n\t\t\t\t\ti += 1;\n\t\t\t\t}\n\t\t\t",tests:[{type:"code",code:"print(i);"},{type:"js",code:'let program = parse(code).program;\n\t\t\t\t\tif (! program) return "Failed to parse the program code.";\n\t\t\t\t\tif (hasStructure(program, "{ call(print); call(print); }")) return "Use only a single print command!";\n\t\t\t\t\tif (! hasStructure(program, "loop;")) return "Use a loop to solve the problem!";\n\t\t\t\t\tif (! hasStructure(program, "\'while-do-loop\';")) return "Use a while-do-loop to solve the problem!";\n\t\t\t\t\tif (!hasStructure(program, "loop { call(print); }")) return "Use a print statement inside of the loop!";\n\t\t\t\t\tif (isRecursive(program)) return "Please don\'t use recursion.";'}]},{content:"\n\t\t\t<p>\n\t\t\tThe above exercise shows that in principle we could drop for-loops\n\t\t\tentirely and solve all problems with while-loops. However, practically\n\t\t\tspeaking that would be a bad idea. It is easy to see that for the task\n\t\t\tof printing the numbers in the range 5:10, the for-loop is superior in\n\t\t\tabout every possible evaluation category. In general, when given a\n\t\t\tchoice, you should always use the tool that's most appropriate and most\n\t\t\tnatural for the task as hand. As a rule of thumb, in most cases, a\n\t\t\tfor-loop is the right tool for the job. However, some loops are much\n\t\t\teasier to formulate in terms of a condition, and then a while-loop should\n\t\t\tbe picked.\n\t\t\t</p>\n\n\t\t\t<h2>Wrap-up</h2>\n\t\t\t<p>\n\t\t\tIn this section you have learned about loops which use a condition\n\t\t\tinstead of a pre-defined range to decide when to stop. They are mostly\n\t\t\tused if the number of loop iterations is not known prior to execution,\n\t\t\tor if one likes to create an infinite loop that is terminated with the\n\t\t\t<code>break;</code>-statement. In many cases you are free\n\t\t\tto choose if you'd like to use a <i>for</i>-loop, a <i>while-do</i>-loop,\n\t\t\tor a <i>do-while</i>-loop, but often one kind of loop has advantages over\n\t\t\tthe others, like having a set count of iterations. Always try to pick the\n\t\t\ttool that's most appropriate for the task.\n\t\t\t</p>\n\t\t\t"}]}},4500:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tutorial_events=void 0,e.tutorial_events={id:"events",title:"Event Handling",sections:[{content:'\n\t\t\t<p>\n\t\t\tUntil now, our programs consist of a number of commands executed in\n\t\t\tsequence. We know how alter the program flow using control structures\n\t\t\tlike loops and conditional statements, and how to redirect it into\n\t\t\tfunctions, acting as sub-programs. However, this paradigm assumes that\n\t\t\tthe whole program runs immediately when started all the way to the end.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tThat is often what we want, but not always. When our goal is to\n\t\t\timplement a graphical application interacting with the user, we would\n\t\t\tlike to be able to react to user input, like a key press of a mouse\n\t\t\tclick. Our programs (sub-programs) shall run <i>in response to such\n\t\t\tevents</i>. The ability to do that would put us into the position to\n\t\t\timplement a proper Graphical User Interface (GUI). In a more general\n\t\t\tsetting, when not restricted by the sandboxed TScript (browser)\n\t\t\tenvironment, we may also wish to react to other events, like incoming\n\t\t\tnetwork traffic or the completion of an asynchronous disk or memory\n\t\t\ttransfer process.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tEvery TScript program is always in one out of two modes: either in its\n\t\t\tnormal mode, where commands are executed one after the other until the\n\t\t\tprogram halts, or in <i>event mode</i>. Being in event mode means that\n\t\t\tthe program waits for events (like mouse clicks) and then processes\n\t\t\tthese events. Processing simply means that a function is called. In\n\t\t\tother words, we can put a TScript program into a waiting mode in which\n\t\t\tit waits for events to occur, and when an event happens then TScript\n\t\t\tnotifies our program of the event by calling a function, which allows us\n\t\t\tto execute arbitrary code in response to the event.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tThe following three functions are relevant for event handling:\n\t\t\t<ul>\n\t\t\t\t<li>The function <code>setEventHandler(name, handler)</code> tells\n\t\t\t\t\tTScript that we are interested in handling a specific event.\n\t\t\t\t\tEvents have names (strings), like <code>timer</code> and\n\t\t\t\t\t<code>canvas.mousedown</code>. The second argument is a function\n\t\t\t\t\tthat will be called each time an event of the given type occurs.\n\t\t\t\t\t</li>\n\t\t\t\t<li>The function <code>enterEventMode()</code> puts the program into\n\t\t\t\t\tevent handling mode. It does not return immediately, but instead\n\t\t\t\t\tit blocks the program flow. From then on, the program reacts to\n\t\t\t\t\tevents and calls the handler functions defined by means of\n\t\t\t\t\t<code>setEventHandler</code>.</li>\n\t\t\t\t<li>The function <code>quitEventMode(value = null)</code> stops the\n\t\t\t\t\tevent mode. Since the only code that runs in event mode are\n\t\t\t\t\tevent handlers (and functions called from there), this function\n\t\t\t\t\tmust be called in response to an event. For example, one may\n\t\t\t\t\tdecide to quit event mode when the user presses the escape key\n\t\t\t\t\ton the keyboard. Calling this function makes the main program\n\t\t\t\t\treturn from the call to <code>enterEventMode</code>, and\n\t\t\t\t\tcontinue from there. The optional parameter of\n\t\t\t\t\t<code>quitEventMode</code> becomes the return value of\n\t\t\t\t\t<code>enterEventMode</code>.</li>\n\t\t\t</ul>\n\t\t\tTo illustrate the process better, let us look at an example:\n\t\t\t<tscript>\n\t\t\t\tfunction onClick(event)\n\t\t\t\t{\n\t\t\t\t\tprint("Mouse click at canvas position " + event.x + "," + event.y);\n\t\t\t\t}\n\t\t\t\tfunction onKey(event)\n\t\t\t\t{\n\t\t\t\t\tif event.key == "Escape" then quitEventMode();\n\t\t\t\t}\n\t\t\t\tsetEventHandler("canvas.mousedown", onClick);\n\t\t\t\tsetEventHandler("canvas.keydown", onKey);\n\t\t\t\tenterEventMode();\n\t\t\t</tscript>\n\t\t\tGive it a try! Click the canvas at a few times at different positions\n\t\t\tand then press the Escape key to stop the program.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tNotice how the control flow of the program works:\n\t\t\t<ul>\n\t\t\t\t<li>In the main program, two functions are defined (but not called).\n\t\t\t\t\tThen we tell TScript that we want to use them as event handlers\n\t\t\t\t\tfor the events <code>"canvas.mousedown"</code> and\n\t\t\t\t\t<code>"canvas.keydown"</code>. These events are "mouse button is\n\t\t\t\t\tpressed down" and "keyboard key is pressed down".</li>\n\t\t\t\t<li>Next, the call to <code>enterEventMode()</code> takes place. It\n\t\t\t\t\tis the last command in the program, but the program does not\n\t\t\t\t\tstop yet. In a sense, the contrary is the case: it has just\n\t\t\t\t\tstared. This is because the function does not return, but\n\t\t\t\t\tinstead puts the program into event mode. That mode lasts\n\t\t\t\t\tpotentially indefinitely.</li>\n\t\t\t\t<li>Whenever a mouse click is registered on the canvas, the function\n\t\t\t\t\t<code>onClick</code> is executed. This can happen any number of\n\t\t\t\t\ttimes, depending on the actions of the user.</li>\n\t\t\t\t<li>Whenever a keyboard button is pressed (while the canvas holds\n\t\t\t\t\tthe keyboard focus, which can be enabled by clicking the canvas),\n\t\t\t\t\tthe function <code>onKey</code> is executed. Also this can\n\t\t\t\t\thappen any number of times, depending on the actions of the\n\t\t\t\t\tuser.</li>\n\t\t\t\t<li>In the last case, if the key is the escape key then the function\n\t\t\t\t\t<code>quitEventMode</code> is called. This stops event handling\n\t\t\t\t\t(after the handler returns) and hence makes the call to\n\t\t\t\t\t<code>enterEventMode()</code> above return.</li>\n\t\t\t</ul>\n\t\t\tNote that the function names <code>onClick</code> and <code>onKey</code>\n\t\t\tare not relevant. In principle, we could rename them as we wish.\n\t\t\tHowever, naming them according to the event they process is usually a\n\t\t\thelpful convention.\n\t\t\t</p>\n\n\t\t\t<h2>Event Names</h2>\n\t\t\t<p>\n\t\t\tWe did not discuss where the event names like\n\t\t\t<code>"canvas.mousedown"</code> come from. They are defined by TScript.\n\t\t\tIn order to use events, we need to know these names. There is a timer\n\t\t\tevent, which is evoked up to 60 times per second. Its name is\n\t\t\tsimply <code>"timer"</code>. All other available events belong to the\n\t\t\tcanvas. A list of these events can be found in the\n\t\t\t<a target="_blank" href="?doc=/library/canvas">canvas documentation</a>.\n\t\t\tIn the documentation, scroll down all the way till the section\n\t\t\t"Managing Events". There is a table that lists all event names.\n\t\t\t</p>\n\n\t\t\t<h2>The Event Parameter</h2>\n\t\t\t<p>\n\t\t\tThe same table also lists the event types. Each event is described by a\n\t\t\tparameter. Therefore, in TScript, each and every event handler function\n\t\t\ttakes exactly one parameter, which is conventionally called\n\t\t\t<code>event</code>. In most cases, this event is an object. Below the\n\t\t\ttable, the documentation provides further details on the classes\n\t\t\tdescribing the various mouse and keyboard events.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tYou may also wish to try a few of the example programs from the\n\t\t\tdocumentation. That\'s a good way of getting to know events better. Also,\n\t\t\tthe keyboard handers are well suited for teaching you the names of the\n\t\t\tkeys of your keyboard.\n\t\t\t</p>\n\n\t\t\t<div class="tutorial-exercise">\n\t\t\t<p>\n\t\t\tSet an event handler for the <code>"canvas.keydown"</code> event. In the\n\t\t\tevent handler, print <code>Hello World!</code> if the user presses the\n\t\t\tspace bar, and stop the event loop if the user presses the escape key.\n\t\t\tTo this end, evaluate <code>event.key</code> to obtain the name of the\n\t\t\tpressed key.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t<b>Note:</b> When testing your program, first click the canvas with the\n\t\t\tmouse. This way you ensure that it holds the keyboard focus and is hence\n\t\t\treceiving keyboard events.\n\t\t\t</div>\n\t\t\t',correct:'\n\t\t\tfunction onKey(event)\n\t\t\t{\n\t\t\t\tif event.key == " " then print("Hello World!");\n\t\t\t\tif event.key == "Escape" then quitEventMode();\n\t\t\t}\n\t\t\tsetEventHandler("canvas.keydown", onKey);\n\t\t\tenterEventMode();\n\t\t\t',tests:[{type:"code",code:"",input:[{type:"canvas.keydown",classname:"canvas.KeyboardEvent",event:{key:"h",shift:!1,control:!1,alt:!1,meta:!1}},{type:"canvas.keydown",classname:"canvas.KeyboardEvent",event:{key:" ",shift:!1,control:!1,alt:!1,meta:!1}},{type:"canvas.keydown",classname:"canvas.KeyboardEvent",event:{key:" ",shift:!1,control:!1,alt:!1,meta:!1}},{type:"canvas.keydown",classname:"canvas.KeyboardEvent",event:{key:"z",shift:!1,control:!1,alt:!1,meta:!1}},{type:"canvas.keydown",classname:"canvas.KeyboardEvent",event:{key:" ",shift:!1,control:!1,alt:!1,meta:!1}},{type:"canvas.keydown",classname:"canvas.KeyboardEvent",event:{key:"Escape",shift:!1,control:!1,alt:!1,meta:!1}},{type:"canvas.keydown",classname:"canvas.KeyboardEvent",event:{key:" ",shift:!1,control:!1,alt:!1,meta:!1}}]}]},{content:'\n\t\t\t<h2>Timer Events</h2>\n\t\t\t<p>\n\t\t\tThe timer event was mentioned before. For example, it can be used to\n\t\t\trun animations. The following program uses a timer event to move a red\n\t\t\tcall across the canvas:\n\t\t\t<tscript>\n\t\t\tvar position = -20;\n\t\t\tfunction onTick(event)\n\t\t\t{\n\t\t\t\tcanvas.setFillColor(1, 1, 1);\n\t\t\t\tcanvas.clear();\n\t\t\t\tcanvas.setFillColor(1, 0, 0);\n\t\t\t\tcanvas.fillCircle(position, position, 20);\n\t\t\t\tposition += 1;   # speed: 1 unit per 1/60 second\n\t\t\t\tif position > canvas.width()+20 or position > canvas.height()+20\n\t\t\t\tthen quitEventMode();\n\t\t\t}\n\t\t\tsetEventHandler("timer", onTick);\n\t\t\tenterEventMode();\n\t\t\t</tscript>\n\t\t\tThe ball should slowly move down diagonally. We can make it move faster\n\t\t\tby changing the speed in the program.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tThe handler <code>onTick</code> does not make any use of its parameter\n\t\t\t<code>event</code>. Indeed, for timer events, the parameter is simply\n\t\t\tthe value <code>null</code>, and hence pretty much useless.\n\t\t\t</p>\n\n\t\t\t<h2>Keyboard Events</h2>\n\t\t\t<p>\n\t\t\tWe have already seen that key presses cause the event\n\t\t\t<code>"canvas.keydown"</code>. Using these events to do something\n\t\t\tnon-trivial like entering a text into a text editor is a lot of work.\n\t\t\tAlso, not all keyboards (in all countries) have the same keys, and it\n\t\t\tis questionable whether one should rely on the existence of specific\n\t\t\tkeys. Finally, TScript does not provide a translation from keys to\n\t\t\tcharacters, which can be a complicated process (think of so-called\n\t\t\t<a target="_blank" href="https://en.wikipedia.org/wiki/Dead_key">"dead" keys</a>).\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tIn this sense, TScript keyboard events are quite limited. They are not\n\t\t\tintended for complex text operations, but rather for simple uses, as\n\t\t\tcommonly encountered in games.\n\t\t\t</p>\n\n\t\t\t<h3>Advanced Use</h3>\n\t\t\t<p>\n\t\t\tNext to <code>"canvas.keydown"</code>, there is a corresponding event\n\t\t\t<code>"canvas.keyup"</code>. With both events in place, we can track\n\t\t\tthe state of the keyboard. For example, in game, we may wish to control\n\t\t\ta character or object with the keys w, a, s, and d. To this end, we need\n\t\t\tto keep track of which of these keys are currently pressed, and which\n\t\t\tones are not.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tWe should <i>not</i> be tempted to perform the movement in the key\n\t\t\thandler! That would only move the character on each key press, which\n\t\t\tforces the user to press the key repeatedly. Instead, the correct\n\t\t\ttechnique is to maintain the state of each key in a variable, and to\n\t\t\tperform the corresponding movement with fixed speed. We have seen a\n\t\t\tfixed-speed movement before, namely using a handler for the\n\t\t\t<code>"timer"</code> event. The following example demonstrates how to\n\t\t\telegantly combine timer and keyboard handlers for controlling a simple\n\t\t\tagent (the already familiar red ball).\n\t\t\t<tscript>\n\t\t\tvar x = 100, y = 100;\n\t\t\tvar key = {w: false, a: false, s: false, d: false};\n\t\t\tfunction onTick(event)\n\t\t\t{\n\t\t\t\tcanvas.setFillColor(1, 1, 1);\n\t\t\t\tcanvas.clear();\n\t\t\t\tcanvas.setFillColor(1, 0, 0);\n\t\t\t\tcanvas.fillCircle(position, position, 20);\n\t\t\t\tif key["w"] then y -= 1;\n\t\t\t\tif key["a"] then x -= 1;\n\t\t\t\tif key["s"] then y += 1;\n\t\t\t\tif key["d"] then x += 1;\n\t\t\t}\n\t\t\tfunction onKeyDown(event)\n\t\t\t{\n\t\t\t\tif event.key == "Escape" then quitEventMode();\n\t\t\t\tif key.has(event.key) then key[event.key] = true;\n\t\t\t}\n\t\t\tfunction onKeyUp(event)\n\t\t\t{\n\t\t\t\tif key.has(event.key) then key[event.key] = false;\n\t\t\t}\n\t\t\tsetEventHandler("canvas.keydown", onKeyDown);\n\t\t\tsetEventHandler("canvas.keyup",   onKeyUp);\n\t\t\tsetEventHandler("timer", onTick);\n\t\t\tenterEventMode();\n\t\t\t</tscript>\n\t\t\tYou should see a red ball, standing still. If you press w, a, s or d\n\t\t\tthen the ball starts moving. Try pressing multiple keys at once.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tThis pattern generally works well for games. Most of the work is done in\n\t\t\tthe timer event, namely moving all thing that move (character, monsters,\n\t\t\tballs, whatever), taking the keyboard state into account.\n\t\t\t</p>\n\n\t\t\t<h2>Mouse Events</h2>\n\t\t\t<p>\n\t\t\tThe world of mouse events is more rich that that of keyboard events, for\n\t\t\tthe simple reason that the mouse has a position. Similar to a keydown\n\t\t\tevent, the mousedown event knows which button caused the event. However,\n\t\t\tthat button is not a keyboard key, but a mouse button. In addition to\n\t\t\tthat information, it also knows at which coordinates the button was\n\t\t\tpressed. Like with the keyboard, there is a corresponding event called\n\t\t\t<code>"canvas.mouseup"</code> which signals that the mouse button was\n\t\t\treleased.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tA second reason why mouse input differs from keyboard input is that mouse\n\t\t\tmovement can be of interest of its own, independent of mouse button\n\t\t\tpresses. Therefore, <code>"canvas.mousemove"</code> events occur in fast\n\t\t\tsuccession while the mouse is moved across the canvas. Finally, the\n\t\t\t<code>"canvas.mousemove"</code> event is fired when the mouse leaves the\n\t\t\tcanvas. As soon as the mouse enters the canvas again, further\n\t\t\t<code>"canvas.mousemove"</code> events are triggered.\n\t\t\tThe event object of mouseout is simply <code>null</code>, like for the\n\t\t\ttimer. All other mouse events carry the current mouse position, which is\n\t\t\tavailable as <code>event.x</code> and <code>event.y</code>.\n\t\t\t</p>\n\n\t\t\t<h3>Advanced Use</h3>\n\t\t\t<p>\n\t\t\tWe can use mouse events to display and handle proper controls, like\n\t\t\tbuttons. A good button should indicate that the mouse is hovering over\n\t\t\tthe control, and it should also indicate visually that the button is\n\t\t\tcurrently pressed. This is typically achieved with a combination of\n\t\t\tbackground and border colors. The following program demonstrates the\n\t\t\tworking principle. Note the color changes when hovering the mouse over\n\t\t\tthe button and when actually pressing the button.\n\t\t\t<tscript>\n\t\t\tfunction onButton()\n\t\t\t{\n\t\t\t\tprint("The button was pressed!");\n\t\t\t}\n\n\t\t\tvar pressed = false;\n\t\t\tfunction drawButton(hover)\n\t\t\t{\n\t\t\t\tcanvas.setLineWidth(2);\n\t\t\t\tif pressed then\n\t\t\t\t{\n\t\t\t\t\tcanvas.setLineColor(0, 0, 0);\n\t\t\t\t\tcanvas.setFillColor(1, 0.5, 0);\n\t\t\t\t}\n\t\t\t\telse if hover then\n\t\t\t\t{\n\t\t\t\t\tcanvas.setLineColor(0.6, 0.6, 0.6);\n\t\t\t\t\tcanvas.setFillColor(0, 0, 0.5);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tcanvas.setLineColor(0.8, 0.8, 0.8);\n\t\t\t\t\tcanvas.setFillColor(0.2, 0.2, 1);\n\t\t\t\t}\n\t\t\t\tcanvas.frameRect(100, 100, 100, 30);\n\t\t\t\tcanvas.setFont("Helvetica", 14);\n\t\t\t\tcanvas.setTextAlign("center");\n\t\t\t\tcanvas.setFillColor(1, 1, 1);\n\t\t\t\tcanvas.text(150, 110, "Do it!");\n\t\t\t}\n\t\t\tfunction inside(event)\n\t\t\t{\n\t\t\t\treturn event.x > 100 and event.x < 200\n\t\t\t\t   and event.y > 100 and event.y < 130;\n\t\t\t}\n\t\t\tfunction onMouseDown(event)\n\t\t\t{\n\t\t\t\tpressed = true;\n\t\t\t\tif inside(event) then\n\t\t\t\t{\n\t\t\t\t\tdrawButton(true);\n\t\t\t\t\tonButton();\n\t\t\t\t}\n\t\t\t}\n\t\t\tfunction onMouseUp(event)\n\t\t\t{\n\t\t\t\tpressed = false;\n\t\t\t\tdrawButton(inside(event));\n\t\t\t}\n\t\t\tfunction onMouseMove(event)\n\t\t\t{\n\t\t\t\tdrawButton(inside(event));\n\t\t\t}\n\t\t\tfunction onMouseOut(event)\n\t\t\t{\n\t\t\t\tpressed = false;\n\t\t\t}\n\t\t\tsetEventHandler("canvas.mousedown", onMouseDown);\n\t\t\tsetEventHandler("canvas.mouseup",   onMouseUp);\n\t\t\tsetEventHandler("canvas.mousemove", onMouseMove);\n\t\t\tsetEventHandler("canvas.mouseout",  onMouseOut);\n\t\t\tdrawButton(false);\n\t\t\tenterEventMode();\n\t\t\t</tscript>\n\t\t\tPutting everything together, in principle, it is possible to implement a\n\t\t\twhole graphical user interface (GUI) framework with different types of\n\t\t\tcontrols, like checkboxes, sliders, scroll bars, and more. On the other\n\t\t\thand, we could rightfully ask whether that job has not been done yet by\n\t\t\tothers. Since we are working in the browser, and browsers apparently\n\t\t\tprovide such controls, the need to re-invent the wheel feels wrong.\n\t\t\tAgain, here we see that the TScript canvas is not designed for complex\n\t\t\tGUIs, but rather for learning the basics of programming. It is well\n\t\t\tsuited for simple games and drawing applications, which get along with\n\t\t\t"raw" events like mouse movements and clicks.\n\t\t\t</p>\n\n\t\t\t<div class="tutorial-exercise">\n\t\t\t<p>\n\t\t\tWrite a program that draws a trace of the mouse on the canvas.\n\t\t\tWhenever the mouse enters the canvas, a trace begins. The program\n\t\t\tshall simply connect consecutive mouse positions by drawing a line.\n\t\t\tFor the first mouse move event or if the mouse just entered the\n\t\t\tcanvas, no line in drawn. Pressing a mouse button shall stop the\n\t\t\tprogram.\n\t\t\t</p>\n\t\t\t</div>\n\t\t\t',correct:'\n\t\t\tvar x = null, y = null;\n\t\t\tfunction onMove(event)\n\t\t\t{\n\t\t\t\tif x != null then canvas.line(x, y, event.x, event.y);\n\t\t\t\tx = event.x;\n\t\t\t\ty = event.y;\n\t\t\t}\n\t\t\tfunction onOut(event)\n\t\t\t{\n\t\t\t\tx = null;\n\t\t\t\ty = null;\n\t\t\t}\n\t\t\tsetEventHandler("canvas.mousemove", onMove);\n\t\t\tsetEventHandler("canvas.mouseout", onOut);\n\t\t\tsetEventHandler("canvas.mousedown", quitEventMode);\n\t\t\tenterEventMode();\n\t\t\t',tests:[{type:"code",code:"",input:[{type:"canvas.mousemove",classname:"canvas.MouseMoveEvent",event:{x:100,y:100,buttons:[],shift:!1,control:!1,alt:!1,meta:!1}},{type:"canvas.mousemove",classname:"canvas.MouseMoveEvent",event:{x:120,y:100,buttons:[],shift:!1,control:!1,alt:!1,meta:!1}},{type:"canvas.mousemove",classname:"canvas.MouseMoveEvent",event:{x:130,y:110,buttons:[],shift:!1,control:!1,alt:!1,meta:!1}},{type:"canvas.mouseout",classname:"Null"},{type:"canvas.mousemove",classname:"canvas.MouseMoveEvent",event:{x:100,y:200,buttons:[],shift:!1,control:!1,alt:!1,meta:!1}},{type:"canvas.mousemove",classname:"canvas.MouseMoveEvent",event:{x:120,y:200,buttons:[],shift:!1,control:!1,alt:!1,meta:!1}},{type:"canvas.mousemove",classname:"canvas.MouseMoveEvent",event:{x:130,y:210,buttons:[],shift:!1,control:!1,alt:!1,meta:!1}},{type:"canvas.mousedown",classname:"canvas.MouseButtonEvent",event:{x:10,y:10,button:"left",buttons:["left"],shift:!1,control:!1,alt:!1,meta:!1}}]}]},{content:"\n\t\t\t<h2>Resizing</h2>\n\t\t\t<p>\n\t\t\tThere is one further event provided by the canvas, namely the resize\n\t\t\tevent. It is invoked whenever the canvas changes size, i.e., when the\n\t\t\tcanvas panel is put into full size mode, when the browser size changes,\n\t\t\tand so on. The usual way to handle this event is to redraw the whole\n\t\t\tapplication.\n\t\t\t</p>\n\n\t\t\t<h2>Wrap-up</h2>\n\t\t\t<p>\n\t\t\tWe have learned the basics of event-based programming. We know how to\n\t\t\tput TScript into event-handling mode, and how to return to normal code\n\t\t\texecution. We have worked with mouse, keyboard, and timer events.\n\t\t\tCombined with canvas drawing, this gives us all essential tools for\n\t\t\tbuilding simple games with TScript.\n\t\t\t</p>\n\t\t\t"}]}},6469:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tutorial_forloop=void 0,e.tutorial_forloop={id:"forloop",title:"For-Loops",sections:[{content:"\n\t\t\t<p>\n\t\t\tThe ability to execute any number of commands on the press of a\n\t\t\tbutton is already of great help when automating tasks. However, in\n\t\t\tprogramming, many high-level tasks are solved by <i>repeated</i>\n\t\t\texecution of the same command, or of the same (or a similar)\n\t\t\tsequence of commands. In these cases, we don't want to press the\n\t\t\t\"run\"-button many times, but just once.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tAs a concrete example, think of the task of drawing a square\n\t\t\twith the turtle. We need to move some distance, turn by 90\n\t\t\tdegrees, move the same distance, turn by 90 degrees again, move,\n\t\t\tturn, and finally move. Adding one more turn command does not\n\t\t\thurt though, and therefore we can solve the problem of drawing a\n\t\t\tsquare of side length <i>20</i> by repeating the following two\n\t\t\tcommands four times:\n\t\t\t<tscript>\n\t\t\t\tturtle.move(20);\n\t\t\t\tturtle.turn(90);\n\t\t\t</tscript>\n\t\t\tObviously, we don't want to trigger the execution of these two\n\t\t\tlines four times (aside from the problem that the turtle is\n\t\t\treset each time the program starts).\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tTo solve that problem, all we need to do is to copy the above\n\t\t\tcode four times. That works, but it is considered a poor\n\t\t\tsolution. To see why that is, consider the problem of drawing a\n\t\t\tregular polygon with 10 instead of 4 sides. Then the following\n\t\t\tcode needs to be repeated 10 times:\n\t\t\t<tscript>\n\t\t\t\tturtle.move(20);\n\t\t\t\tturtle.turn(36);\n\t\t\t</tscript>\n\t\t\tThat's where copy&amp;paste starts to be cumbersome, and also\n\t\t\terror prone. Wouldn't it be nicer if we could repeat the\n\t\t\t<i>same</i> commands multiple times instead?\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tThat's exactly what a loop does: it executes code multiple\n\t\t\ttimes. The simplest type of loop is the so-called \"for\"-loop.\n\t\t\tIn most programming languages it starts with the keyword\n\t\t\t<code>for</code>. It allows us to solve the problem\n\t\t\tof drawing a square as follows:\n\t\t\t<tscript>\n\t\t\t\tfor 0:4 do\n\t\t\t\t{\n\t\t\t\t\tturtle.move(20);\n\t\t\t\t\tturtle.turn(90);\n\t\t\t\t}\n\t\t\t</tscript>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tA loop can run for multiple <i>iterations</i>. The number of\n\t\t\tloop iterations is defined in terms of the <i>range</i>\n\t\t\t<code>0:4</code>. It tells TScript to count from 0\n\t\t\tto 4 by starting from 0 and stopping at 4. Each time it did not\n\t\t\tarrive at 4, the <i>loop body</i> inside of the curly braces is\n\t\t\texecuted. That's one iteration. There are four iterations in\n\t\t\ttotal, namely for the loop counter values 0, 1, 2 and 3.\n\t\t\tCounters starting from zero instead of one are very common in\n\t\t\tprogramming, so let's get used to them.\n\t\t\t</p>\n\t\t\t<div class=\"tutorial-exercise\">\n\t\t\tWrite a program printing out the already familiar greeting\n\t\t\t<code>Hello&nbsp;World!</code> 10 times, but using\n\t\t\tonly a single <code>print</code> command inside of\n\t\t\ta for-loop.\n\t\t\t</div>\n\t\t\t",correct:'\n\t\t\tfor 0:10 do\n\t\t\t{\n\t\t\t\tprint("Hello World!");\n\t\t\t}\n\t\t\t',tests:[{type:"code",code:""},{type:"js",code:'\n\t\t\t\t\t\tlet program = parse(code).program;\n\t\t\t\t\t\tif (! program) return "Failed to parse the program code.";\n\t\t\t\t\t\tif (hasStructure(program, "{ call(print); call(print); }")) return "Use only a single print command!";\n\t\t\t\t\t\tif (! hasStructure(program, "loop;")) return "Use a loop to solve the problem!";\n\t\t\t\t\t\tif (! hasStructure(program, "\'for-loop\';")) return "Use a for-loop to solve the problem!";\n\t\t\t\t\t\tif (! hasStructure(program, "loop { call(print); }")) return "Use a print statement inside of the loop body to solve the problem!";\n\t\t\t\t\t\tif (isRecursive(program)) return "Please don\'t use recursion.";\n\t\t\t\t\t'}]},{content:"\n\t\t\t<h2>Loop Counters</h2>\n\t\t\t<p>\n\t\t\tIn many cases we do not want to execute the same code multiple times,\n\t\t\tbut rather slightly vary what we do in each iteration, based on the\n\t\t\titeration count. To do so we need to keep track of how many times we\n\t\t\tran the code already. Say, we want to output the digits 0 to 9. This is\n\t\t\ta perfect situation for a variable, which simply counts the number of\n\t\t\titerations. In each iteration we output its value:\n\t\t\t<tscript>\n\t\t\tvar counter = 0;\n\t\t\tfor 0:10 do\n\t\t\t{\n\t\t\t\tprint(counter);\n\t\t\t\tcounter = counter + 1;\n\t\t\t}\n\t\t\t</tscript>\n\t\t\tImportantly, the last line of the loop body is not an equation! It is\n\t\t\tan assignment. The effect of the assignment is that the number stored\n\t\t\tin the variable <code>counter</code> is incremented.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tThis situation is so frequent that the for-loop brings built-in support\n\t\t\tfor it. Instead of just telling the for-loop its range we extend the\n\t\t\tsyntax with a variable in which the loop count will be saved. If we\n\t\t\tuse the variable inside of the for-loop it tells us the current status:\n\t\t\t<tscript>\n\t\t\tvar counter;\n\t\t\tfor counter in 0:10 do\n\t\t\t{\n\t\t\t\tprint(counter);\n\t\t\t}\n\t\t\t</tscript>\n\t\t\tNote that we do no longer need to initialize the variable, and we also\n\t\t\tdo not need to increment it. This is because in each iteration, the\n\t\t\tfor-loop assigns the current element of the range to the variable\n\t\t\tcounter. The for-loop allows for an even more compact syntax:\n\t\t\t<tscript>\n\t\t\tfor var counter in 0:10 do\n\t\t\t{\n\t\t\t\tprint(counter);\n\t\t\t}\n\t\t\t</tscript>\n\t\t\tNow even the variable declaration is part of the loop. This has the side\n\t\t\teffect that the variable is only available inside of the loop. However,\n\t\t\tin most cases that's exactly what we need.\n\t\t\t</p>\n\t\t\t<div class=\"tutorial-exercise\">\n\t\t\tUse TScript's ability to perform calculations together with a for-loop\n\t\t\tto output the square numbers 1, 4, 9, 16, 25, 36, 49, 64, 81, 100. The\n\t\t\tprogram shall use a for-loop and only a single print command inside of\n\t\t\tthe loop body.\n\t\t\t</div>\n\t\t\t",correct:"\n\t\t\tfor var k in 0:10 do\n\t\t\t{\n\t\t\t\tvar n = k + 1;\n\t\t\t\tvar square = n * n;   # n^2 also works fine\n\t\t\t\tprint(square);\n\t\t\t}\n\t\t\t",tests:[{type:"code",code:""},{type:"js",code:'\n\t\t\t\t\t\tlet program = parse(code).program;\n\t\t\t\t\t\tif (! program) return "Failed to parse the program code.";\n\t\t\t\t\t\tif (hasStructure(program, "{ call(print); call(print); }")) return "Use only a single print command!";\n\t\t\t\t\t\tif (! hasStructure(program, "loop;")) return "Use a loop to solve the problem!";\n\t\t\t\t\t\tif (! hasStructure(program, "\'for-loop\';")) return "Use a for-loop to solve the problem!";\n\t\t\t\t\t\tif (! hasStructure(program, "loop { call(print); }")) return "Use a print statement inside of the loop body to solve the problem!";\n\t\t\t\t\t\tif (isRecursive(program)) return "Please don\'t use recursion.";\n\t\t\t\t\t'}]},{content:'\n\t\t\tAnother example application is to print a multiplication table for a specific number.\n\t\t\t<tscript>\n\t\t\tfor var i in 1:10 do\n\t\t\t{\n\t\t\t\tprint(3*i);\n\t\t\t}\n\t\t\t</tscript>\n\t\t\tThis will output the multiplication table of the number 3. We can see\n\t\t\tthat the range the loop runs through is not bound to start at 0. It is\n\t\t\tperfectly possible to start and end at any number you want, as long as\n\t\t\tit is an integer. Recall the rule of thumb that integers are used for\n\t\t\tcounting &mdash; and that\'s what a for-loop counter does.\n\t\t\t</p>\n\t\t\t<div class="tutorial-exercise">\n\t\t\tTo try this for yourself write a for-loop which prints a multiplication\n\t\t\ttable for the number 5, starting at 2 and ending at 8. Notice that our\n\t\t\tmultiplication table for 3 starts at 1 and ends with 9.\n\t\t\t</div>\n\t\t\t',correct:"\n\t\t\t\tfor var i in 2:9 do\n\t\t\t\t{\n\t\t\t\t\tprint(5*i);\n\t\t\t\t}\n\t\t\t\t",tests:[{type:"code",code:""},{type:"js",code:'let program = parse(code).program;\n\t\t\t\t\tif (! program) return "Failed to parse the program code.";\n\t\t\t\t\tif (hasStructure(program, "{ call(print); call(print); }")) return "Use only a single print command!";\n\t\t\t\t\tif (! hasStructure(program, "loop;")) return "Use a loop to solve the problem!";\n\t\t\t\t\tif (! hasStructure(program, "\'for-loop\';")) return "Use a for-loop to solve the problem!";\n\t\t\t\t\tif (! hasStructure(program, "loop { call(print); }")) return "Use a print statement inside of the loop body to solve the problem!";\n\t\t\t\t\tif (isRecursive(program)) return "Please don\'t use recursion.";'}]},{content:"\n\t\t\t<h2>Ranges</h2>\n\t\t\t<p>\n\t\t\tTo specify how many iterations a for-loop should perform, we used a new\n\t\t\tdata type called <code>Range</code>. The syntax to create a\n\t\t\trange is <code>a:b</code>, where a and b are integers. The\n\t\t\tfirst integer has to be smaller than the second one, otherwise the\n\t\t\tconstructed range is empty. Examples:\n\t\t\t<tscript>\n\t\t\t\tvar r1 = 0:10;          # range including 0,1,2,3,4,5,6,7,8,9\n\t\t\t\tvar r2 = 20:10;         # empty range\n\t\t\t\tvar a = 5, b = 7;\n\t\t\t\tvar r3 = a:b;           # range including 5 and 6\n\t\t\t</tscript>\n\t\t\tAs we can see, ranges can be stored in variables, and they can even be\n\t\t\tprinted. They are values, just like numbers and strings. In other words,\n\t\t\twe have just extended our collection of data types by a new member, the\n\t\t\trange.\n\t\t\t</p>\n\n\t\t\t<h2>Loops for Graphics</h2>\n\t\t\t<p>\n\t\t\tWe have started this section with the example of drawing a square and a\n\t\t\t10-sided regular shape with the turtle. This works as follows:\n\t\t\t<tscript>\n\t\t\t\tfor 0:10 do\n\t\t\t\t{\n\t\t\t\t\tturtle.move(20);\n\t\t\t\t\tturtle.turn(36);\n\t\t\t\t}\n\t\t\t</tscript>\n\t\t\tWith a slight variation, we can make the lines cross, resulting in a\n\t\t\tstar:\n\t\t\t<tscript>\n\t\t\t\tfor 0:10 do\n\t\t\t\t{\n\t\t\t\t\tturtle.move(70);\n\t\t\t\t\tturtle.turn(180 - 36);\n\t\t\t\t}\n\t\t\t</tscript>\n\t\t\tGenerally speaking, graphics often consists of many similar\n\t\t\telements, e.g., many parallel lines forming a grid. Let's try this out!\n\t\t\t</p>\n\t\t\t<div class=\"tutorial-exercise\">\n\t\t\tDraw a grid of 10x10 cells on the canvas. Draw only the lines separating\n\t\t\tthe cells. That's 11 horizontal lines and 11 vertical lines. The grid\n\t\t\tshall cover the coordinate range from 100 to 200 in horizontal and\n\t\t\tvertical direction. Use one or two loops, and exactly two\n\t\t\t<code>canvas.line</code> commands for drawing.\n\t\t\t</div>\n\t\t\t",correct:"\n\t\t\t\tfor var i in 0:11 do\n\t\t\t\t{\n\t\t\t\t\tvar c = 100 + 10*i;\n\t\t\t\t\tcanvas.line(c, 100, c, 200);\n\t\t\t\t\tcanvas.line(100, c, 200, c);\n\t\t\t\t}\n\t\t\t\t",tests:[{type:"code",code:""},{type:"js",code:'let program = parse(code).program;\n\t\t\t\t\tif (! program) return "Failed to parse the program code.";\n\t\t\t\t\tif (hasStructure(program, "{ call(line); call(line); call(line); }")) return "Use only two line commands!";\n\t\t\t\t\tif (! hasStructure(program, "loop;")) return "Use a loop to solve the problem!";\n\t\t\t\t\tif (! hasStructure(program, "\'for-loop\';")) return "Use a for-loop to solve the problem!";\n\t\t\t\t\tif (isRecursive(program)) return "Please don\'t use recursion.";'}]},{content:"\n\t\t\t<h3>Sunlight Rays</h3>\n\t\t\t<p>\n\t\t\tWe are now in the position to finish our earlier example of drawing a\n\t\t\tyellow sun onto a blue sky background.\n\t\t\t<tscript>\n\t\t\tvar center = canvas.width() / 2;    # horizontal center\n\t\t\tcanvas.setFillColor(0.5, 0.5, 1);   # light blue\n\t\t\tcanvas.clear();                     # fill the entire canvas\n\t\t\tcanvas.setFillColor(1, 1, 0);       # yellow\n\t\t\tcanvas.setLineColor(1, 1, 0);       # yellow\n\t\t\tcanvas.setLineWidth(3);             # a bit wider\n\t\t\tcanvas.fillCircle(center, 100, 40); # ball (the sun)\n\t\t\tvar length = 90;                    # ray length from the center\n\t\t\tfor var i in 0:18 do\n\t\t\t{\n\t\t\t\tvar alpha = 20*i+15;                        # ray direction (angle in degrees)\n\t\t\t\tvar radians = alpha / 180 * math.pi();      # turn alpha into radians\n\t\t\t\tvar x = length * math.cos(radians);         # position relative ...\n\t\t\t\tvar y = length * math.sin(radians);         # ... to the center\n\t\t\t\tcanvas.line(center, 100, center+x, 100+y);  # draw the ray\n\t\t\t}\n\t\t\t</tscript>\n\t\t\tTry it out and enjoy the sunshine!\n\t\t\t</p>\n\n\t\t\t<h3>Simple Animations</h3>\n\t\t\t<p>\n\t\t\tLoops put us into the position not only to do many (similar) things\n\t\t\tvery quickly, but also to do them in a timed fashion. To this end, we\n\t\t\twill use the <code>wait</code> command, which delays program execution\n\t\t\tfor a given number of milliseconds. Now think of a loop body that draws\n\t\t\tan image, then waits for a brief moment. The next iteration draws a new\n\t\t\tslightly different image, waits again, and so on. What we get is an\n\t\t\tanimation, maybe a full-blown movie. Of course, we will use a loop for\n\t\t\tdrawing the images. In our example, the image will be quite simple,\n\t\t\tconsisting of two colored balls:\n\t\t\t<tscript>\n\t\t\tfor var t in 0:500 do\n\t\t\t{\n\t\t\t\tcanvas.setFillColor(1, 1, 1);\n\t\t\t\tcanvas.clear();\n\t\t\t\tcanvas.setFillColor(0, 0, 1);\n\t\t\t\tcanvas.fillCircle(200, t, 40);\n\t\t\t\tcanvas.setFillColor(1, 0, 1);\n\t\t\t\tcanvas.fillCircle(t, 0.5*t+90, 25);\n\t\t\t\twait(10);\n\t\t\t}\n\t\t\t</tscript>\n\t\t\tYou should see a big blue and a smaller pink ball moving across the\n\t\t\tcanvas. Feel free to play around with the animation! Can you apply a\n\t\t\tdifferent calculation to make the pink ball move around in circles?\n\t\t\t</p>\n\n\t\t\t<h2>Wrap-up</h2>\n\t\t\t<p>\n\t\t\tYou have learned how to repeat commands multiple times in a for-loop.\n\t\t\tThis is a powerful technique. It is used in programming all the time for\n\t\t\tsolving repetitive problems. Such problems are ubiquitous, not only in\n\t\t\tcanvas drawing: think of performing some operation for an entity in a\n\t\t\tdata base, like sending a bill to a customer. Sending <i>all</i> pending\n\t\t\tbills to the corresponding customers is a composite operation which can\n\t\t\tbe solved using a loop over bills.\n\t\t\t</p>\n\t\t\t"}]}},2203:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tutorial_functions=void 0,e.tutorial_functions={id:"functions",title:"Functions",sections:[{content:"\n\t\t\t<p>\n\t\t\tIn mathematics, a function can represent an arbitrary calculation. More\n\t\t\tconcretely, it is the function rule that expresses the calculation, while\n\t\t\tthe function also has a name. Giving it a name makes it easy to refer to\n\t\t\tthe function rule, and hence it makes the calculation easily reusable.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tIn programming, the concept of a function is similar, but more general.\n\t\t\tIt represents a reuable piece of program code, or program, for short.\n\t\t\tThe code may perform a mathematical calculation, and hence represent a\n\t\t\tmathematical function. It may equally well go beyond a calculation and\n\t\t\tinstead perform a complex drawing operation on the canvas, involving\n\t\t\tloop and conditional statements. We have actually already encountered a\n\t\t\tfew functions provided by TScript: <code>print</code> and\n\t\t\t<code>alert</code>, mathematical functions like <code>math.sin</code>\n\t\t\tand <code>math.sqrt</code>, as well as the various turtle and canvas\n\t\t\tcommands. By writing functions ourselves, we can define our own commands,\n\t\t\twhich are composed of elementary commands provided by the programming\n\t\t\tlanguage.\n\t\t\t</p>\n\n\t\t\t<h2>Mathematical Functions</h2>\n\t\t\t<p>\n\t\t\tLet's start with a mathematical function like\n\t\t\t<i>f(x) = x<sup>2</sup> + 3x + 2</i>. This function has a name\n\t\t\t(it is called <i>f</i>) and a function rule or expression\n\t\t\t<i>x<sup>2</sup> + 3x + 2</i> representing a calculation. We already know\n\t\t\thow to perform the calculation programmatically:\n\t\t\t<code>x^2 + 3*x + 2</code>. Binding the calculation to the name <i>f</i>\n\t\t\tworks as follows:\n\t\t\t<tscript>\n\t\t\tfunction f(x)\n\t\t\t{\n\t\t\t\treturn x^2 + 3*x + 2;\n\t\t\t}\n\t\t\t</tscript>\n\t\t\tThis is a bit more text than in the mathematical definition, but it is\n\t\t\tstill rather close. We see two new keywords: <code>function</code> and\n\t\t\t<code>return</code>.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tBefore we dive into the details, let's give it a try. Copy the above code\n\t\t\tover into the editor and print a few values, like <i>f(0)</i>,\n\t\t\t<i>f(5)</i>, <i>f(-1)</i> and <i>f(0.5)</i> using <code>print</code>:\n\t\t\t<tscript>\n\t\t\t\tprint(f(5));\n\t\t\t</tscript>\n\t\t\tYou should see the correct result, namely\n\t\t\t<i>f(5) = 5<sup>2</sup> + 3·5 + 2 = 42</i>.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tLet's have a closer look at what just happened:\n\t\t\t<ol>\n\t\t\t<li>First, we have <i>declared</i> a new function with the name\n\t\t\t\t<code>f</code>. This is conceptually similar to declaring a variable.\n\t\t\t\tNo calculation is done at this point. We have only defined a function\n\t\t\t\trule and made it known to TScript under a name.</li>\n\t\t\t<li>Inside of the <code>print</code> statement, the function is\n\t\t\t\t<i>called</i> or <i>invoked</i>. Similar to control structures like\n\t\t\t\tloops and conditional statements, this has the effect that the\n\t\t\t\tprogram continues at a different position, namely inside of the\n\t\t\t\tfunction body.</li>\n\t\t\t<li>Before the function body starts to execute, the function's parameters\n\t\t\t\tare initialized. Our function has a single parameter called <i>x</i>.\n\t\t\t\tTechnically speaking, <code>x</code> is nothing but a variable. Since\n\t\t\t\twe have called the function as <code>f(5)</code>, the variable is\n\t\t\t\tinitialized to the value <i>5</i>. The effect is the same as if we\n\t\t\t\twould write <code>var x = 5;</code> &mdash; with the decisive\n\t\t\t\tdifference that we gain a lot of flexibility, since we can easily\n\t\t\t\tcall the function multiple times with different parameter values.\n\t\t\t\t</li>\n\t\t\t<li>It is finally time for the program inside of the function to execute.\n\t\t\t\tThe program consists of a single command, which is a\n\t\t\t\t<code>return</code> statement. It tells the computer two things: it\n\t\t\t\tshall return from the function, and it shall return a specific value\n\t\t\t\tto the caller. This return value can be a simple value like\n\t\t\t\t<code>42</code>, <code>\"Hello World!\"</code> or <code>true</code>, or\n\t\t\t\tit can be the result or a calculation, as it is the case here.</li>\n\t\t\t<li>The function is left and the control flow is returned to the point\n\t\t\t\tfrom where the function was invoked. The result of calling the\n\t\t\t\tfunction is the value returned by the function. We can think of this\n\t\t\t\tprocess as replacing the function call <code>f(5)</code> with the\n\t\t\t\treturned value, in this case <i>42</i>. This is no magic, but exactly\n\t\t\t\twhat we would expect from a mathematical function, so that we can\n\t\t\t\tperform further calculations from there onwards, like in\n\t\t\t\t<i>f(5) + 7</i>, which would yield <i>49</i>.</li>\n\t\t\t<li>This value is then passed on to the <code>print</code> function as a\n\t\t\t\tparameter. The mechanisms is exactly the same as when calling our own\n\t\t\t\tfunction <code>f</code>. Of course, <code>print</code> is not a\n\t\t\t\tmathematical function which takes one or multiple arguments and\n\t\t\t\treturns the result of a calculation. It is a function as used in\n\t\t\t\tprogramming most of the time, namely an arbitrary piece of program.\n\t\t\t\tIt outputs the value as a message in the message area and then\n\t\t\t\treturns to the caller.</li>\n\t\t\t</ol>\n\t\t\tIn effect, the effect of calling a function is the same a copying the\n\t\t\tcode inside of the function body to the location where the function was\n\t\t\tcalled. That may look like this:\n\t\t\t<tscript>\n\t\t\tvar x = 5;\n\t\t\tprint(x^2 + 3*x + 2);\n\t\t\t</tscript>\n\t\t\tLike in math, the benefit of using a function is that we no not need to\n\t\t\twrite out the formula each time we want to perform the calculation. This\n\t\t\tmakes the code inside of the function <i>reusable</i>. Importantly, we\n\t\t\tcan turn this argument around: whenever we aim to reuse a piece of code,\n\t\t\twe can simply turn it into a function and invoke that function from\n\t\t\tmultiple locations in our program.\n\t\t\t</p>\n\t\t\t<div class=\"tutorial-exercise\">\n\t\t\t<p>\n\t\t\tCreate a function <code>cube(x)</code>. The function shall implement the\n\t\t\tmathematical function rule <i>cube(x) = x<sup>3</sup></i>.\n\t\t\t</div>\n\t\t\t",correct:"\n\t\t\t\tfunction cube(x)\n\t\t\t\t{\n\t\t\t\t\treturn x^3;\n\t\t\t\t}\n\t\t\t\t",tests:[{type:"call",code:"cube(0);"},{type:"call",code:"cube(1);"},{type:"call",code:"cube(5);"},{type:"call",code:"cube(-2.5);"}]},{content:'\n\t\t\t<h2>Functions as Sub-Programs</h2>\n\t\t\t<p>\n\t\t\tMost functions in programming go considerably beyond calculations.\n\t\t\tHowever, we will stay within the math domain for another moment. In the\n\t\t\tprevious unit we had used a hypothetical test <code>isPrime(n)</code> for\n\t\t\ta number being prime or not. We are now in the position to implement such\n\t\t\ta test.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tFirst of all, a positive integer <i>n</i> is prime if it is divisible by\n\t\t\texactly two numbers, namely by 1 and by itself. The outcome of the test\n\t\t\tis either that the number is prime or not. How do we return that\n\t\t\tinformation from a function? Recall that we would like to use the result\n\t\t\tin a condition: <code>if isPrime(n) then [...]</code>, and that a\n\t\t\tcondition results in a boolean value. In other words, the answer to the\n\t\t\tquestion <code>isPrime(11)</code> should be <code>true</code>, while the\n\t\t\tanswer to the question <code>isPrime(12)</code> must be <code>false</code>.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tLet\'s implement this into a function. A pretty naive implementation is to\n\t\t\ttry out all numbers in the range <code>2:n</code> and check whether\n\t\t\t<i>n</i> is divisible by one of them. If that\'s the case then <i>n</i> is\n\t\t\tnot prime. This translates into the following program code:\n\t\t\t<tscript>\n\t\t\tfunction isPrime(n)\n\t\t\t{\n\t\t\t\tfor var k in 2:n do\n\t\t\t\t{\n\t\t\t\t\tif n % k == 0        # test whether n is a multiple of k\n\t\t\t\t\tthen return false;   # if so, then n is not prime\n\t\t\t\t}\n\t\t\t\treturn true;             # n passed all tests and it hence prime\n\t\t\t}\n\t\t\t</tscript>\n\t\t\tWith this function in place we can finally see out loop from the previous\n\t\t\tsection in action:\n\t\t\t<tscript>\n\t\t\tvar counter = 0, n = 2;\n\t\t\twhile counter < 100 do\n\t\t\t{\n\t\t\t\tif isPrime(n) then\n\t\t\t\t{\n\t\t\t\t\tprint(n);\n\t\t\t\t\tcounter += 1;\n\t\t\t\t}\n\t\t\t\tn += 1;\n\t\t\t}\n\t\t\t</tscript>\n\t\t\tRunning this code prints the first 100 primes.\n\t\t\t</p>\n\n\t\t\t<h3>Drawing</h3>\n\t\t\t<p>\n\t\t\tIn a sense, the <code>isPrime</code> function is still quite similar to\n\t\t\tour initial mathematical function example, in the sense that it takes a\n\t\t\tsingle argument and returns a value based on a calculation. The main\n\t\t\tdifference is that the calculation is more complicated, involving\n\t\t\tmultiple commands and a loop. Let\'s make the concept even more general\n\t\t\tand move on to function that do not perform calculations. Say, we want to\n\t\t\timplement a function that draws a regular polygon with the turtle. Such a\n\t\t\tpolygon has two parameters: the number of edges, and the length of each\n\t\t\tedge. For example, we may draw a regular triangle, a square, or a\n\t\t\thexagon, all with the same function. Its <i>signature</i> shall look like\n\t\t\tthis: <code>function polygon(sides, length)</code>. It can then be called\n\t\t\tto draw a large triangle <code>polygon(3, 80);</code>, a tiny square\n\t\t\t<code>polygon(4, 6);</code> or a polygon with 100 edges, which is so\n\t\t\tround that it looks like a sphere: <code>polygon(100, 3);</code>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tWhat needs to be done to implement such a function? Inside of the\n\t\t\tfunction, we need to draw <code>sides</code> lines using the already\n\t\t\tfamiliar <code>turtle.move</code> function. Afterwards we need to turn.\n\t\t\tAfter <code>sides</code> turns we shall have performed a full rotation of\n\t\t\t3606deg;. In other words, we need a loop with with following commands\n\t\t\tinside:\n\t\t\t<tscript>\n\t\t\tfunction polygon(sides, length)\n\t\t\t{\n\t\t\t\tfor 0:sides do\n\t\t\t\t{\n\t\t\t\t\tturtle.move(length);\n\t\t\t\t\tturtle.turn(360 / sides);\n\t\t\t\t}\n\t\t\t}\n\t\t\t</tscript>\n\t\t\tCalling this function results in triangles, squares, hexagons and even\n\t\t\t(approximate) circles being drawn. Give it a try!\n\t\t\t</p>\n\t\t\t<h3>Missing Return Values</h3>\n\t\t\t<p>\n\t\t\tThe <code>polygon</code> function does not contain a <code>return</code>\n\t\t\tstatement. The statement is not needed, for two reasons: First of all,\n\t\t\tthe function does not need to return a value. Second, the function\n\t\t\treturns at the end of its function body. If we would like it to return\n\t\t\tearly then we can use a <code>return</code> command <i>without</i> a\n\t\t\tvalue. It leaves the function body immediately, just like a\n\t\t\t<code>break</code> command aborts a loop. However, what happens if we\n\t\t\tmaybe forgot that the <code>polygon</code> function does not return a\n\t\t\tvalue, and we try to use that value anyway? For example, we could output\n\t\t\tthat non-existing value using <code>print</code>:\n\t\t\t<tscript>\n\t\t\t\tprint(polygon(3, 80));\n\t\t\t</tscript>\n\t\t\tWe should see the message <i>null</i>. That makes sense, since we\n\t\t\tintroduced the special value <code>null</code> with the meaning\n\t\t\t"no defined value". A function that does not return anything or even\n\t\t\tlacks a return statement entirely implicitly returns <code>null</code>.\n\t\t\tIn other words, we could always add the command\n\t\t\t<tscript>\n\t\t\t\treturn null;\n\t\t\t</tscript>\n\t\t\tat the end of each function without changing its behavior.\n\t\t\t</p>\n\t\t\t<h3>Drawing Bugs</h3>\n\t\t\t<p>\n\t\t\tThe same concept can be applied to the canvas. Consider the following\n\t\t\tcode for drawing a little bug at position (x, y):\n\t\t\t<tscript>\n\t\t\t\tvar x=100, y=100;\n\t\t\t\tcanvas.setLineColor(0.3, 0.2, 0.1);\n\t\t\t\tcanvas.line(x-15, y, x+15, y);\n\t\t\t\tcanvas.line(x-14, y-8, x+14, y+8);\n\t\t\t\tcanvas.line(x-14, y+8, x+14, y-8);\n\t\t\t\tcanvas.setFillColor(0.5, 0.4, 0.3);\n\t\t\t\tcanvas.fillCircle(x, y, 10);\n\t\t\t\tcanvas.fillCircle(x, y-10, 7);\n\t\t\t</tscript>\n\t\t\tIf we want to draw 10 bugs then we can simply add a loop around the code:\n\t\t\t<tscript>\n\t\t\t\tfor var k in 0:10 do\n\t\t\t\t{\n\t\t\t\t\tvar x=100+40*k, y=100;\n\t\t\t\t\tcanvas.setLineColor(0.3, 0.2, 0.1);\n\t\t\t\t\tcanvas.line(x-15, y, x+15, y);\n\t\t\t\t\tcanvas.line(x-14, y-8, x+14, y+8);\n\t\t\t\t\tcanvas.line(x-14, y+8, x+14, y-8);\n\t\t\t\t\tcanvas.setFillColor(0.5, 0.4, 0.3);\n\t\t\t\t\tcanvas.fillCircle(x, y, 10);\n\t\t\t\t\tcanvas.fillCircle(x, y-10, 7);\n\t\t\t\t}\n\t\t\t</tscript>\n\t\t\tHowever, what if we want three bugs to be at arbitrary positions, say,\n\t\t\t(100, 100), (200, 30), and (240, 170)? At this point we should move\n\t\t\tthe code for drawing the bug into a function, which can then be called\n\t\t\tthree times with different parameter values. Moreover, when we need to\n\t\t\tdraw a fourth bug later on in the same program then we can conveniently\n\t\t\tcall the function again, without copying the actual drawing code. Hence,\n\t\t\twe gain a lot of flexibility over the loop approach.\n\t\t\t</p>\n\t\t\t<div class="tutorial-exercise">\n\t\t\tImplement the function <code>bug(x, y)</code>, which draws the bug at the\n\t\t\tgiven (arbitrary) position (x, y). You can copy the above drawing code\n\t\t\tinto the function body.\n\t\t\t</div>\n\t\t\t',correct:"\n\t\t\t\tfunction bug(x, y)\n\t\t\t\t{\n\t\t\t\t\tcanvas.setLineColor(0.3, 0.2, 0.1);\n\t\t\t\t\tcanvas.line(x-15, y, x+15, y);\n\t\t\t\t\tcanvas.line(x-14, y-8, x+14, y+8);\n\t\t\t\t\tcanvas.line(x-14, y+8, x+14, y-8);\n\t\t\t\t\tcanvas.setFillColor(0.5, 0.4, 0.3);\n\t\t\t\t\tcanvas.fillCircle(x, y, 10);\n\t\t\t\t\tcanvas.fillCircle(x, y-10, 7);\n\t\t\t\t}\n\t\t\t\t",tests:[{type:"call",code:"bug(0, 0);"},{type:"call",code:"bug(100, 100);"},{type:"call",code:"bug(120, 180);"}]},{content:"\n\t\t\t<p>\n\t\t\tThe above <code>bug</code> function is a prototypical example of a\n\t\t\tfunction in programming. Its characterizing property is not that it\n\t\t\tperforms a calculation, but rather that it performs a well-defined and\n\t\t\treusable sub-task. When drawing a scene with multiple bugs, or when\n\t\t\tcreating an animation with multiple stages, then we can reuse the same\n\t\t\tcode over and over. At some point we may wish to add more flexibility,\n\t\t\tlike the ability to define a heading direction or different colors. This\n\t\t\tcan be achieved by adding more parameters to the function. Let's turn it\n\t\t\tinto a super bug function!\n\n\t\t\t<h2>Optional Parameters and Default Values</h2>\n\t\t\t<p>\n\t\t\tThe following extended bug-drawing function uses the canvas functions\n\t\t\t<code>canvas.shift</code> and <code>canvas.rotate</code> to draw a bug in\n\t\t\tan arbitrary position and orientation. It also allows us to specify the\n\t\t\tcolors of body and legs in terms of RGB-values:\n\t\t\t<tscript>\n\t\t\t\tfunction bug(x, y, angle, body_r, body_g, body_b, leg_r, leg_g, leg_b)\n\t\t\t\t{\n\t\t\t\t\tcanvas.shift(x, y);                            # translate canvas\n\t\t\t\t\tcanvas.rotate(angle);                          # rotate canvas\n\t\t\t\t\tcanvas.setLineColor(leg_r, leg_g, leg_b);      # leg color\n\t\t\t\t\tcanvas.line(-15, 0, 15, 0);\n\t\t\t\t\tcanvas.line(-14, -8, 14, 8);\n\t\t\t\t\tcanvas.line(-14, 8, 14, -8);\n\t\t\t\t\tcanvas.setFillColor(body_r, body_g, body_b);   # body color\n\t\t\t\t\tcanvas.fillCircle(0, 0, 10);\n\t\t\t\t\tcanvas.fillCircle(0, -10, 7);\n\t\t\t\t\tcanvas.rotate(-angle);                         # transform coordinates\n\t\t\t\t\tcanvas.shift(-x, -y);                          # back to original\n\t\t\t\t}\n\t\t\t</tscript>\n\t\t\tThis function adds a lot of flexibility, however, at the price of being\n\t\t\tcumbersome to invoke. The following two calls draw our original bug at\n\t\t\tposition (100, 100) and a ladybug-like red bug with black legs oriented\n\t\t\ttowards the right at position (200, 0):\n\t\t\t<tscript>\n\t\t\t\tbug(100, 100, 0, 0.5,0.4,0.3, 0.3,0.2,0.1);\n\t\t\t\tbug(200, 100, math.pi()/2, 1,0,0, 0,0,0);\n\t\t\t</tscript>\n\t\t\tThe apparent problem with this approach is that there are too many\n\t\t\tparameters to make sense of. When revisiting such code after half a year\n\t\t\tor even after a few days, we will have forgotten which numbers mean what.\n\t\t\tAt which position do we find the angle? Which parameters belong together\n\t\t\tto form a single color? Looking only at the function calls, who is to say\n\t\t\tthat these are specifying colors at all? There are two remedies to this:\n\t\t\tusing data structures (e.g., for encoding a position or a color), and\n\t\t\tdefault parameters. We will look into data structures in the next unit.\n\t\t\tFor now, we will make our lives easier by making rarely used parameters\n\t\t\toptional. This works by defining <i>default values</i> for parameter\n\t\t\tvalues, as follows:\n\t\t\t<tscript>\n\t\t\t\tfunction bug(x, y, angle=0, body_r=0.5, body_g=0.4, body_b=0.3, leg_r=0.3, leg_g=0.2, leg_b=0.1)\n\t\t\t\t{\n\t\t\t\t\tcanvas.shift(x, y);                            # translate canvas\n\t\t\t\t\tcanvas.rotate(angle);                          # rotate canvas\n\t\t\t\t\tcanvas.setLineColor(leg_r, leg_g, leg_b);      # leg color\n\t\t\t\t\tcanvas.line(-15, 0, 15, 0);\n\t\t\t\t\tcanvas.line(-14, -8, 14, 8);\n\t\t\t\t\tcanvas.line(-14, 8, 14, -8);\n\t\t\t\t\tcanvas.setFillColor(body_r, body_g, body_b);   # body color\n\t\t\t\t\tcanvas.fillCircle(0, 0, 10);\n\t\t\t\t\tcanvas.fillCircle(0, -10, 7);\n\t\t\t\t\tcanvas.rotate(-angle);                         # transform coordinates\n\t\t\t\t\tcanvas.shift(-x, -y);                          # back to original\n\t\t\t\t}\n\t\t\t</tscript>\n\t\t\tCopy this code into the editor before you proceed.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tA parameter with a default value does not need to be specified when\n\t\t\tcalling the function. Since the position (x, y) does not have default\n\t\t\tvalues, these parameters must always be specified. This allows us to\n\t\t\tinvoke the function as follows:\n\t\t\t<tscript>\n\t\t\t\tbug(100, 100);                              # \"default\" bug\n\t\t\t\tbug(150, 100, math.pi()/2);                 # rotated bug\n\t\t\t\tbug(200, 100, math.pi()/2, 1,0,0);          # in red\n\t\t\t\tbug(250, 100, math.pi()/2, 1,0,0, 1,0,1);   # in red with pink legs\n\t\t\t</tscript>\n\t\t\tThis is nice! If we don't want to then we don't need to override the\n\t\t\tdefaults, but we do have the option to change then when we need to.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tWhat if we want the last bug, but in its default orientation? Can we\n\t\t\tsimply drop the third parameters from the call, i.e., do the following?\n\t\t\t<tscript>\n\t\t\t\tbug(250, 100, 1,0,0, 1,0,1);\n\t\t\t</tscript>\n\t\t\tYes sure, but the result may be a surprise: we have drawn a blue bug with\n\t\t\tgreen legs, and it does not point upwards! That's because the parameters\n\t\t\tare <i>interpreted</i> in order: our grouping with spaces is ignored, the\n\t\t\tfirst <i>1</i> becomes the angle (in radians), the numbers 0,0,1 specify\n\t\t\tthe body color (blue), and the remaining value 0,1 are the red and green\n\t\t\tcomponents of the leg color. Only the last parameter <code>leg_b</code>\n\t\t\tgets its default value of 0.1 assigned.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tTo solve this problem, TScript allows to specify which values belong to\n\t\t\twhich parameters. For example, we can draw a default bug any only change\n\t\t\tthe leg color to pink, as follows:\n\t\t\t<tscript>\n\t\t\t\tbug(100, 100, leg_r=1, leg_g=0, leg_b=1);\n\t\t\t</tscript>\n\t\t\tIn a function call, there are two types of parameters: values, and\n\t\t\tname=value pairs. The former are called <i>positional</i> parameters, the\n\t\t\tlatter are <i>named</i> parameters. This way, we are able to specify\n\t\t\texactly where we want to deviate from the defaults. Also, this greatly\n\t\t\timproves readability, since now it is clear that the numbers 1,0,1\n\t\t\tspecify the leg color, and we will be able to understand this function\n\t\t\tcall even after years.\n\t\t\t</p>\n\t\t\t<div class=\"tutorial-exercise\">\n\t\t\tCall the bug function using named parameters to draw the following three\n\t\t\tbugs:\n\t\t\t<ul>\n\t\t\t<li>a bug with red body (color 1,0,0) at position (100, 100),</li>\n\t\t\t<li>a bug with red legs (color 1,0,0) at position (200, 100),</li>\n\t\t\t<li>a default bug facing downwards at position (300, 100).</li>\n\t\t\t</ul>\n\t\t\t</div>\n\t\t\t",correct:"\n\t\t\tfunction bug(x, y, angle=0, body_r=0.5, body_g=0.4, body_b=0.3, leg_r=0.3, leg_g=0.2, leg_b=0.1)\n\t\t\t{\n\t\t\t\tcanvas.shift(x, y);                            # translate canvas\n\t\t\t\tcanvas.rotate(angle);                          # rotate canvas\n\t\t\t\tcanvas.setLineColor(leg_r, leg_g, leg_b);      # leg color\n\t\t\t\tcanvas.line(-15, 0, 15, 0);\n\t\t\t\tcanvas.line(-14, -8, 14, 8);\n\t\t\t\tcanvas.line(-14, 8, 14, -8);\n\t\t\t\tcanvas.setFillColor(body_r, body_g, body_b);   # body color\n\t\t\t\tcanvas.fillCircle(0, 0, 10);\n\t\t\t\tcanvas.fillCircle(0, -10, 7);\n\t\t\t\tcanvas.rotate(-angle);                         # transform coordinates\n\t\t\t\tcanvas.shift(-x, -y);                          # back to original\n\t\t\t}\n\n\t\t\tbug(100, 100, body_r=1, body_g=0, body_b=0);\n\t\t\tbug(200, 100, leg_r=1, leg_g=0, leg_b=0);\n\t\t\tbug(300, 100, angle=math.pi());\n\t\t\t","ignore-color":!1},{content:"\n\t\t\t<h2>Wrap-up</h2>\n\t\t\t<p>\n\t\t\tYou have learned about the concept of a function in programming. Some\n\t\t\tfunctions perform calculations, similar to their counterparts in\n\t\t\tmathematics. The general concepts of a function in programming entails\n\t\t\tthe creation of user-defined commands. These are sub-programs. They\n\t\t\tstructure the code into meaningful units, they avoid the need for code\n\t\t\tduplication, and instead allow for code reuse.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tYou know the syntax of a function, and you know how to return a value\n\t\t\tfrom a function. You can also flexibly pass values into a function using\n\t\t\tparameters. Rarely used parameters can be skipped if a default value is\n\t\t\tspecified, and such values can be specified by name in the function call.\n\t\t\t</p>\n\t\t\t"}]}},8386:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tutorial_functiontype=void 0,e.tutorial_functiontype={id:"functiontype",title:"Function and Type",sections:[{content:'\n\t\t\t<p>\n\t\t\tWe have seen many different types of values, and in an earlier unit on\n\t\t\tdata types we got a first overview. Since then we added ranges, and much\n\t\t\tmore importantly, arrays, dictionaries and classes. However, two types\n\t\t\tof values are still missing: functions and types.\n\t\t\t</p>\n\n\t\t\t<h2>Functions</h2>\n\t\t\t<p>\n\t\t\tWe have used functions like <code>print</code> as values before, for\n\t\t\texample as an item in an array:\n\t\t\t<tscript>\n\t\t\t\tvar a = [42, "Hello", true, print, null];\n\t\t\t</tscript>\n\t\t\tHowever, we did not investigate systematically what it means to use a\n\t\t\tfunction name as a value. First of all, we need to get the difference\n\t\t\tbetween a function itself and a function call clear:\n\t\t\t<tscript>\n\t\t\t\tvar a = print;    # no output, print is not executed\n\t\t\t\tprint("Hello");   # prints the message "Hello"\n\t\t\t\ta("World");       # prints the message "World"\n\t\t\t</tscript>\n\t\t\tA function name is just that: a name. It is a reference to the function.\n\t\t\tRecall that this is exactly analogous to math notation. Consider the\n\t\t\tfunction <i>f(x) = x<sup>2</sup></i>. Then <i>f</i> is the function\n\t\t\titself, not a specific value. It has a function rule and a graph (a\n\t\t\tparabola). In contrast, <i>f(4)</i> is a number, namely the value 16.\n\t\t\tA function and a number are quite different things.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tThe concept transfers to programming:\n\t\t\t<tscript>\n\t\t\t\tfunction f(x) { return x^2; }\n\t\t\t\tvar g = f;\n\t\t\t\tvar h = f(4);\n\t\t\t\tprint(g);       # prints <Function f>\n\t\t\t\tprint(h);       # prints 16\n\t\t\t</tscript>\n\t\t\tThe variable <code>g</code> refers to the function itself. It holds a\n\t\t\treference to the function <i>f</i> as a value. In other words, each\n\t\t\tfunction is a valid value. Each value has a data type, and functions are\n\t\t\tno exception. In TScript, this type is simply called\n\t\t\t<code>Function</code>.\n\t\t\t</p>\n\n\t\t\t<h3>Using Functions</h3>\n\t\t\t<p>\n\t\t\tThe only meaningful operation supported by a function is to call it. To\n\t\t\tthis end, it does not matter whether the function is called by its name\n\t\t\tor by any other reference, stored in a variable. There is rarely a need\n\t\t\tto store a function reference in a variable. However, it can be\n\t\t\ttremendously useful to pass a function as a parameter into another\n\t\t\tfunction, or to return it from a function. A good example is array\n\t\t\tsorting. We have seen that the built-in <code>sort</code> function sorts\n\t\t\tan array in ascending order:\n\t\t\t<tscript>\n\t\t\t\tvar a = [3, 2, 1, 2];\n\t\t\t\ta.sort();\n\t\t\t\tprint(a);       # prints [1,2,2,3]\n\t\t\t</tscript>\n\t\t\tNow, what if we want the numbers in descending order instead? It turns\n\t\t\tout that the sort function does not really care. It can sort with\n\t\t\trespect to all kinds of sorting criteria, which can be specified in the\n\t\t\tform of a function. That comparison function takes two array items as\n\t\t\tparameters and returns a number. If the number is zero then the two\n\t\t\tvalues are considered equal. If it is negative then the first item is\n\t\t\tto be sorted <i>before</i> the second, and a positive return value\n\t\t\tindicates that the first value belongs <i>after</i> the first one. If we\n\t\t\tpass such a comparison function to <code>sort</code> as a parameter,\n\t\t\tthen <code>sort</code> will call our function repeatedly with various\n\t\t\tpairs of items until it has figured out the correct order. Let\'s sort\n\t\t\tthe array in descending order:\n\t\t\t<tscript>\n\t\t\t\tfunction myOrder(x, y)\n\t\t\t\t{\n\t\t\t\t\tif x == y then return 0;\n\t\t\t\t\telse if x < y then return 1;\n\t\t\t\t\telse return -1;\n\t\t\t\t}\n\t\t\t\tvar a = [3, 2, 1, 2];\n\t\t\t\ta.sort(myOrder);\n\t\t\t\tprint(a);       # prints [3,2,2,1]\n\t\t\t</tscript>\n\t\t\tSince only the sign of the return value matters, the comparison function\n\t\t\tcan be simplified as follows:\n\t\t\t<tscript>\n\t\t\t\tfunction myOrder(x, y)\n\t\t\t\t{ return y - x; }\n\t\t\t</tscript>\n\t\t\tJust go through a few examples (plug in some values for <code>x</code>\n\t\t\tand <code>y</code>) to convince yourself that the two versions represent\n\t\t\tthe same order.\n\t\t\t</p>\n\t\t\t<div class="tutorial-exercise">\n\t\t\t<p>\n\t\t\tWrite a comparison function <code>function compare(x, y)</code> that\n\t\t\tsorts an array of integers such that uneven numbers are sorted to the\n\t\t\tfront and even numbers to the back. Within these two blocks, numbers\n\t\t\tshall be sorted in ascending order.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tHint: test the function by sorting an array. For example, the following\n\t\t\ttest program\n\t\t\t<tscript>\n\t\t\t\tvar a = [1,2,3,4,5,6];\n\t\t\t\ta.sort(compare);\n\t\t\t\tprint(a);\n\t\t\t</tscript>\n\t\t\tshould print the array <code>[1,3,5,2,4,6]</code>.\n\t\t\t</p>\n\t\t\t</div>\n\t\t\t',correct:"\n\t\t\tfunction compare(x, y)\n\t\t\t{\n\t\t\t\tvar x_even = (x % 2) == 0;\n\t\t\t\tvar y_even = (y % 2) == 0;\n\t\t\t\tif x_even != y_even then\n\t\t\t\t{\n\t\t\t\t\tif x_even then return +1; else return -1;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\treturn x - y;\n\t\t\t\t}\n\t\t\t}\n\t\t\t",tests:[{type:"call",code:"[1,2,3,4,5,6,7,8].sort(compare);"},{type:"call",code:"[8,7,6,5,4,3,2,1,6,5,4,1].sort(compare);"}]},{content:'\n\n\t\t\t<h2>Types</h2>\n\t\t\t<p>\n\t\t\tThe last datatype we are missing is <code>Type</code>. It is a type\n\t\t\trepresenting a type... what? Let\'s better get this clear before we get\n\t\t\tlost in an self-referential cycle.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tWe already know the following types:\n\t\t\t<code>Null</code>,\n\t\t\t<code>Boolean</code>,\n\t\t\t<code>Integer</code>,\n\t\t\t<code>Real</code>,\n\t\t\t<code>String</code>,\n\t\t\t<code>Range</code>,\n\t\t\t<code>Array</code>,\n\t\t\t<code>Dictionary</code>,\n\t\t\t<code>Function</code>,\n\t\t\tas well as classes. All of the above are types. Still they can be\n\t\t\tassigned to variables:\n\t\t\t<tscript>\n\t\t\t\tvar t = Integer;\n\t\t\t\tprint(t);         # prints <Type Integer>\n\t\t\t</tscript>\n\t\t\tThis means that they must also be values. That\'s indeed the case, and\n\t\t\tthe datatype of these values is called <code>Type</code>. This has the\n\t\t\tsomewhat odd consequence that <code>Type</code> is also a value, and the\n\t\t\tdatatype of that value is again <code>Type</code>. That\'s\n\t\t\tself-referential indeed, but it does still make sense.\n\t\t\t</p>\n\n\t\t\t<h3>Using Types</h3>\n\t\t\t<p>\n\t\t\tThat\'s all nice and good, but why is it useful? We are yet to see an\n\t\t\tapplication of types. The main use case is to branch based on the type\n\t\t\tof a value, say, a parameter. Consider the following function:\n\t\t\t<tscript>\n\t\t\t\tfunction myPrint(s)\n\t\t\t\t{\n\t\t\t\t\tif Type(s) == String then print("\\"" + s + "\\"");\n\t\t\t\t\telse print(s);\n\t\t\t\t}\n\t\t\t</tscript>\n\t\t\tJust like the built-in function <code>print</code>, it prints out a\n\t\t\tvalue as a message in the message area. The only difference is that if\n\t\t\tthe value is a string then the message is enclosed in double quotes.\n\t\t\tGive it a try!\n\t\t\t<tscript>\n\t\t\t\tprint(42);           # prints 42\n\t\t\t\tmyPrint(42);         # prints 42\n\t\t\t\tprint("test");       # prints test\n\t\t\t\tmyPrint("test");     # prints "test"\n\t\t\t</tscript>\n\t\t\tThe trick here is that the constructor <code>Type(s)</code> constructs\n\t\t\tthe type of its parameter as a value. If <code>s</code> is a string then\n\t\t\t<code>Type(s)</code> is the value <code>String</code> (of type\n\t\t\t<code>Type</code>), and hence the comparison yields true and the\n\t\t\tthen-part is executed. Otherwise the comparison results in false and the\n\t\t\telse-part executes.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tA common use case is to check whether a parameter passed to a function\n\t\t\tis of the expected type. The following function creates an array by\n\t\t\trepeating the elements of a given array n times:\n\t\t\t<tscript>\n\t\t\t\tfunction repeat(array, n)\n\t\t\t\t{\n\t\t\t\t\tvar long = [];\n\t\t\t\t\tfor 0:n do long = Array.concat(long, array);\n\t\t\t\t\treturn long;\n\t\t\t\t}\n\t\t\t</tscript>\n\t\t\tHowever, what happens if we accidentally mess up the order of the\n\t\t\targuments and call the function as follows?\n\t\t\t<tscript>\n\t\t\t\tvar a = repeat(5, [1,2,3]);\n\t\t\t</tscript>\n\t\t\tIf you try it out, then you will encounter an error message inside of\n\t\t\tthe function, telling us that the operands of operator <code>:</code>\n\t\t\tmust be integers. We knew that already, right? The colon operator\n\t\t\tconstructs a range, and a range requires integers. So at first glance,\n\t\t\tthe function <code>repeat</code> seems to be buggy. However, that\'s not\n\t\t\tthe case, we have just used it wrong.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tThe problem here is that the error message does not point us at the real\n\t\t\tissue. Type checking to the rescue:\n\t\t\t<tscript>\n\t\t\t\tfunction repeat(array, n)\n\t\t\t\t{\n\t\t\t\t\tif Type(array) != Array then error("The first parameter of repeat must be an array.");\n\t\t\t\t\tif Type(n) != Integer then error("The second parameter of repeat must be an integer.");\n\t\t\t\t\tif n < 0 then error("The second parameter of repeat must be non-negative.");\n\t\t\t\t\tvar long = [];\n\t\t\t\t\tfor 0:n do long = Array.concat(long, array);\n\t\t\t\t\treturn long;\n\t\t\t\t}\n\t\t\t</tscript>\n\t\t\tThe build-in function <code>error</code> raises an error, just like the\n\t\t\tones you surely encountered when following the tutorial and trying your\n\t\t\tluck on programming yourself. The difference is that now the error\n\t\t\tmessage is meaningful, we immediately notice that we messed up the order\n\t\t\tof the arguments, and hence proceed like this:\n\t\t\t<tscript>\n\t\t\t\tvar a = repeat([1,2,3], 5);\n\t\t\t\tprint(a);     # prints [1,2,3,1,2,3,1,2,3,1,2,3,1,2,3]\n\t\t\t</tscript>\n\t\t\t</p>\n\n\t\t\t<h2>Wrap-Up</h2>\n\t\t\t<p>\n\t\t\tWe have learned that two concepts we used for long, namely functions and\n\t\t\tdata types, are both values. These values have types by themselves,\n\t\t\tcalled <code>Function</code> and <code>Type</code>. Treating functions\n\t\t\tas values enables us to pass them into other functions, which adds a lot\n\t\t\tof flexibility (as we have seen for the example of sorting). The main\n\t\t\tuse case for treating types as values is for type checking, usually for\n\t\t\tfunction parameters.\n\t\t\t</p>\n\t\t\t'}]}},3620:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tutorial_game=void 0,e.tutorial_game={id:"game",title:"Create a Game",sections:[{content:'\n\t\t\t\t<p>\n\t\t\t\tWe conclude the tutorial creating a proper game, step by step.\n\t\t\t\tWe will split the overall task into a sequence of sub-tasks of\n\t\t\t\tmanageable complexity. For each step, we will discuss how it should be\n\t\t\t\tsolved, and then you can try by yourself. If you\'re stuck, you can\n\t\t\t\talways look up the reference solution and see how it works. The game we\n\t\t\t\thave chosen is a simple Minesweeper clone. You can find everything game\n\t\t\t\trelated\n\t\t\t\t<a target="blank" href="https://en.wikipedia.org/wiki/Minesweeper_(video_game)">here</a>.\n\t\t\t\t</p>\n\n\t\t\t\t<h2>Task Decomposition</h2>\n\t\t\t\t<p>\n\t\t\t\tWriting a whole game is a big, big task. Splitting the task into\n\t\t\t\tmanageable chunks is key to success. A good general guideline is to\n\t\t\t\tstart with sub-tasks that do not depend on anything else. For example,\n\t\t\t\tstarting with the mouse click handler is not a good idea, since it will\n\t\t\t\tdepend on other more elementary tasks like checking for mines and\n\t\t\t\tdrawing tiles. We will be stuck with the handler until the elementary\n\t\t\t\ttasks are completed. Instead, we should aim for the most elementary\n\t\t\t\ttask.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\tWhen writing a program, an important step that needs to be done early on\n\t\t\t\tis to create variables defining the state of the application. The logic\n\t\t\t\tis similar to how we argued in object oriented programming: the game has\n\t\t\t\ta state (attributes of a class), and we define operations thereon\n\t\t\t\t(public methods of a class). This does not mean that we need to design\n\t\t\t\tthe game within a class, but we apparently could. In any case, splitting\n\t\t\t\tthe problem into state (data) and operations on that state is a useful\n\t\t\t\tconcept.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\tIn case of Minesweeper, we need to keep track of which tiles are mines,\n\t\t\t\twhich ones were already uncovered, and which ones where marked with a\n\t\t\t\tflag. That information needs to be accessible to the machine and to the\n\t\t\t\tuser. For the user, we will visualize the field on the canvas. For the\n\t\t\t\tmachine, we need a representation in terms of variables.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\tThe machine representation of the field will be a two-dimensional array,\n\t\t\t\twith each item representing one tile. Each tile has a number of\n\t\t\t\tproperties: Is it a mine? Is it uncovered? Is it marked with a flag? In\n\t\t\t\tother words, tiles are represented by heterogeneous data with a fixed\n\t\t\t\tdata layout. This calls for objects.\n\t\t\t\t</p>\n\n\t\t\t\t<h2>Tiles</h2>\n\t\t\t\t<p>\n\t\t\t\tA good first task is to create a data structure <code>class Tile</code>\n\t\t\t\tfor a single tile. We need it nearly everywhere down the road, even for\n\t\t\t\tdefining the state of the game. Also, the task does not have any\n\t\t\t\tdependencies. So let\'s start with this one.\n\t\t\t\t</p>\n\n\t\t\t\t<div class="tutorial-exercise">\n\t\t\t\t<p>\n\t\t\t\tCreate a class called Tile with three public attributes called\n\t\t\t\t<code>mine</code>, <code>uncovered</code>, and <code>flag</code>.\n\t\t\t\tDefault them to <code>false</code>.\n\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t',correct:"\n\t\t\t\tclass Tile {\n\t\t\t\tpublic:\n\t\t\t\t\tvar mine = false;        # is there a mine in this tile?\n\t\t\t\t\tvar uncovered = false;   # was this tile uncovered by the player?\n\t\t\t\t\tvar flag = false;        # did the player place a flag here?\n\t\t\t\t}\n\t\t\t\t",tests:[{type:"code",code:"\n\t\t\t\t\t\tvar t = Tile();\n\t\t\t\t\t\tprint(t.mine);\n\t\t\t\t\t"},{type:"code",code:"\n\t\t\t\t\t\tvar t = Tile();\n\t\t\t\t\t\tprint(t.uncovered);\n\t\t\t\t\t"},{type:"code",code:"\n\t\t\t\t\t\tvar t = Tile();\n\t\t\t\t\t\tprint(t.flag);\n\t\t\t\t\t"},{type:"code",code:"\n\t\t\t\t\t\tvar t = Tile();\n\t\t\t\t\t\tt.mine = true;\n\t\t\t\t\t\tprint(t.mine);\n\t\t\t\t\t"}]},{content:'\n\t\t\t\t<p>\n\t\t\t\tBefore we move on, save the program. Don\'t forget to save again after\n\t\t\t\teach step. Otherwise, if something goes wrong (accidentally closing\n\t\t\t\tthe browser, zombie invasion, whatever) you need to start over. Of\n\t\t\t\tcourse, you can always continue from the last reference solution, but it\n\t\t\t\tis much nicer to complete the game yourself.\n\t\t\t\t</p>\n\n\t\t\t\t<h2>Create the Field</h2>\n\t\t\t\t<p>\n\t\t\t\tThe next task is to create the two-dimensional array defining the field.\n\t\t\t\tBesides the array, we will afford a few redundant variables for quick\n\t\t\t\taccess to important properties. The dimensions of the grid of tiles and\n\t\t\t\tthe number of mines placed therein define the difficulty of the game.\n\t\t\t\tFurthermore, we will keep track of the number of remaining non-mine\n\t\t\t\tfields to uncover. As soon as this number drops to zero, we know that\n\t\t\t\tthe game is won.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\tFor simplicity, we abstain from encapsulating the whole game in a class.\n\t\t\t\tInstead, we use global variables for the game state and function for\n\t\t\t\toperations thereon.\n\t\t\t\t</p>\n\n\t\t\t\t<div class="tutorial-exercise">\n\t\t\t\t<p>\n\t\t\t\tAdd the variables <code>sizeX</code>, <code>sizeY</code>,\n\t\t\t\t<code>mines</code>, and <code>todo</code> to your program. They will\n\t\t\t\trepresent the dimensions, the number of mines, and the number of\n\t\t\t\tremaining non-mine tiles to uncover before winning the game. Also create\n\t\t\t\ta variable called <code>field</code>.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\tNow define a <code>function create(sx, sy, m)</code>, which creates a\n\t\t\t\tfield of size sx × sy with m mines. Its job is to initialize the\n\t\t\t\tabove variables, just like a constructor initializes the attributes of\n\t\t\t\tan object. It shall set the dimensions and the number of mines to the\n\t\t\t\tvalues of its parameters, compute the value of <code>todo</code> (the\n\t\t\t\ttotal number of tiles minus the number of mines), and create the\n\t\t\t\ttwo-dimensional array of tiles of size <code>sizeX</code> times\n\t\t\t\t<code>sizeY</code>.\n\t\t\t\t</p>\n\t\t\t\t<p>To initialize <code>field</code>, start with an empty array. Run a\n\t\t\t\tfor-loop from 0 to sizeY. In every iteration, create a\n\t\t\t\tvariable <code>row</code> as an empty array. Run through a for loop from\n\t\t\t\t0 to sizeX and push a newly created Tile into <code>row</code>.\n\t\t\t\tAfterwards push the <code>row</code> into the field array.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\tFor now, we leave the field in an inconsistent state, since we do not\n\t\t\t\t(yet) place any mines therein. Don\'t worry, that\'s an independent\n\t\t\t\tsub-task that can be taken care of later.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\tFinally, call the function to create a field of size 16x16 with 40\n\t\t\t\tmines. This setup is the default for a "medium size" game.\n\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t',correct:"\n\t\t\t\tclass Tile {\n\t\t\t\tpublic:\n\t\t\t\t\tvar mine = false;        # is there a mine in this tile?\n\t\t\t\t\tvar uncovered = false;   # was this tile uncovered by the player?\n\t\t\t\t\tvar flag = false;        # did the player place a flag here?\n\t\t\t\t}\n\n\t\t\t\tvar sizeX, sizeY, mines, todo;\n\t\t\t\tvar field;\n\n\t\t\t\tfunction create(sx, sy, m)\n\t\t\t\t{\n\t\t\t\t\tsizeX = sx;\n\t\t\t\t\tsizeY = sy;\n\t\t\t\t\tmines = m;\n\t\t\t\t\ttodo = sx * sy - mines;\n\t\t\t\t\tfield = [];\n\t\t\t\t\tfor var y in 0:sizeY do\n\t\t\t\t\t{\t\n\t\t\t\t\t\tvar row = [];\n\t\t\t\t\t\tfor var x in 0:sizeX do row.push(Tile());\n\t\t\t\t\t\tfield.push(row);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tcreate(16, 16, 40);\n\t\t\t\t",tests:[{type:"code",code:"\n\t\t\t\t\t\tprint(sizeX);\n\t\t\t\t\t"},{type:"code",code:"\n\t\t\t\t\t\tprint(sizeY);\n\t\t\t\t\t"},{type:"code",code:"\n\t\t\t\t\t\tprint(mines);\n\t\t\t\t\t"},{type:"code",code:"\n\t\t\t\t\t\tprint(todo);\n\t\t\t\t\t"},{type:"code",code:"\n\t\t\t\t\t\tprint(field);\n\t\t\t\t\t"},{type:"code",code:"\n\t\t\t\t\t\tcreate(9, 9, 10);\n\t\t\t\t\t\tprint(sizeX);\n\t\t\t\t\t\tprint(sizeY);\n\t\t\t\t\t\tprint(mines);\n\t\t\t\t\t\tprint(todo);\n\t\t\t\t\t\tprint(field);\n\t\t\t\t\t"}]},{content:'\n\t\t\t\t<p>\n\t\t\t\tThe next step is to distribute the mines. We want them to be distributed\n\t\t\t\tuniformly at random. To this end, we need a loop. For each mine, we\n\t\t\t\tcreate random tile coordinates as follows:\n\t\t\t\t<tscript>\n\t\t\t\t\tvar x = Integer(math.random() * sizeX);\n\t\t\t\t\tvar y = Integer(math.random() * sizeY);\n\t\t\t\t</tscript>\n\t\t\t\tExplanation: <code>math.random()</code> returns a random number between\n\t\t\t\t0 (included) and 1 (excluded). Multiplying by the size and rounding down\n\t\t\t\tby converting it to an integer yields a uniform distribution on the\n\t\t\t\tranges <code>0:sizeX</code> and <code>0:sizeY</code>.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\tHowever, what if there is already a mine on that tile? Then the simplest\n\t\t\t\tstrategy is to retry until we find an empty field. This means that we\n\t\t\t\tneed to be prepared for running the loop for more iterations than there\n\t\t\t\tare mines.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\tA good strategy is to use a while-loop. In each iteration, we draw\n\t\t\t\trandom tile coordinates. If the tile does not contain a mine then we\n\t\t\t\tplace the mine and decrease the mine counter <code>m</code> by one.\n\t\t\t\tThe loop stops as soon as the counter reaches zero.\n\t\t\t\t</p>\n\n\t\t\t\t<div class="tutorial-exercise">\n\t\t\t\t<p>\n\t\t\t\tExtend the create function so that it places the mines randomly into the\n\t\t\t\tfield.\n\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t',correct:"\n\t\t\t\tclass Tile {\n\t\t\t\tpublic:\n\t\t\t\t\tvar mine = false;        # is there a mine in this tile?\n\t\t\t\t\tvar uncovered = false;   # was this tile uncovered by the player?\n\t\t\t\t\tvar flag = false;        # did the player place a flag here?\n\t\t\t\t}\n\n\t\t\t\tvar sizeX, sizeY, mines, todo;\n\t\t\t\tvar field;\n\n\t\t\t\tfunction create(sx, sy, m)\n\t\t\t\t{\n\t\t\t\t\tsizeX = sx;\n\t\t\t\t\tsizeY = sy;\n\t\t\t\t\tmines = m;\n\t\t\t\t\ttodo = sx * sy - mines;\n\t\t\t\t\tfield = [];\n\t\t\t\t\tfor var y in 0:sizeY do\n\t\t\t\t\t{\t\n\t\t\t\t\t\tvar row = [];\n\t\t\t\t\t\tfor var x in 0:sizeX do row.push(Tile());\n\t\t\t\t\t\tfield.push(row);\n\t\t\t\t\t}\n\t\t\t\t\twhile m > 0 do\n\t\t\t\t\t{\n\t\t\t\t\t\tvar x = Integer(math.random() * sizeX);\n\t\t\t\t\t\tvar y = Integer(math.random() * sizeY);\n\t\t\t\t\t\tif not field[y][x].mine then\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfield[y][x].mine = true;\n\t\t\t\t\t\t\tm -= 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tcreate(16, 16, 40);\n\t\t\t\t",tests:[{type:"code",code:"\n\t\t\t\t\t\tvar total = 0;\n\t\t\t\t\t\tfor var y in 0:sizeY do\n\t\t\t\t\t\t\tfor var x in 0:sizeX do\n\t\t\t\t\t\t\t\tif field[y][x].mine then total += 1;\n\t\t\t\t\t\tprint(total);\n\t\t\t\t\t"}]},{content:'\n\t\t\t\t<h2>Draw the Field</h2>\n\t\t\t\t<p>\n\t\t\t\tNow that we have a state, we can proceed by defining operations on that\n\t\t\t\tstate. A good candidate for a first operation is drawing the field. Once\n\t\t\t\twe are able to do that, the data structures and also the remaining\n\t\t\t\toperations will become much easier to grasp, and also easier to debug.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\tThere are two possible drawing strategies: draw the whole field each\n\t\t\t\ttime something changes, or redraw only the tiles that changed. Both\n\t\t\t\tstrategies are feasible. The first one is simpler, while the second one\n\t\t\t\tis obviously more efficient. We will opt for the second, since in this\n\t\t\t\tcase, it is simple enough to do.\n\t\t\t\t</p>\n\n\t\t\t\t<h3>Draw a Single Tile</h3>\n\t\t\t\t<p>\n\t\t\t\tThe primitive operation of interest is drawing a single tile. Once we\n\t\t\t\thave that, drawing the whole field simply amounts to calling that\n\t\t\t\toperation in a loop over all tiles. It also enables us to redraw parts\n\t\t\t\tof the field as we see fit. This task will be accomplished by\n\t\t\t\t<code>function drawTile(x, y)</code>.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\tWe would like to draw the field so as to use as much of the canvas as\n\t\t\t\tpossible. On the other hand, each tile should cover a square area, and\n\t\t\t\tthe side length of that area should be an integer. With these\n\t\t\t\tprerequisites in place, the maximal side length of a tile is computed as\n\t\t\t\tfollows:\n\t\t\t\t<tscript>\n\t\t\t\tvar tilesize = math.min(canvas.width() // sizeX, canvas.height() // sizeY);\n\t\t\t\t</tscript>\n\t\t\t\tWe will use this variable in our drawing function.\n\t\t\t\t</p>\n\n\t\t\t\t<div class="tutorial-exercise">\n\t\t\t\t<p>\n\t\t\t\tImplement the <code>function drawTile(x, y)</code>. Its job is to draw\n\t\t\t\tthe tile <code>field[y][x]</code>. The top-left corner of the tile shall\n\t\t\t\tbe the canvas pixel with coordinates\n\t\t\t\t<code>tilesize * x, sizesize * y</code>.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\tIn this exercise we only draw the tile outline. Depending on whether the\n\t\t\t\ttile is covered or not, we draw it with a different color. Covered tiles\n\t\t\t\tshall have a dark gray background with RGB color (0.5, 0.5, 0.5), while\n\t\t\t\tuncovered tiles shall be filled with a lighter gray background with RGB\n\t\t\t\tcolor (0.7, 0.7, 0.7). All tiles shall have a mid-gray (0.6, 0.6, 0.6)\n\t\t\t\tborder, taking up 10% of the tile size. Set the line width to\n\t\t\t\t<code>tilesize / 10</code>, set the colors appropriately depending on\n\t\t\t\twhether the tiles is uncovered or not, and draw the tile with the\n\t\t\t\tfunction <code>canvas.frameRect</code>.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\tTest your function as follows: set the state of a single tile to true or\n\t\t\t\tfalse and then call <code>drawTile</code> for that particular tile.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\tNote that we are not done yet, since we also need to draw mines, flags,\n\t\t\t\tand colored numbers. We\'ll add that functionality later.\n\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t',correct:"\n\t\t\t\tclass Tile {\n\t\t\t\tpublic:\n\t\t\t\t\tvar mine = false;        # is there a mine in this tile?\n\t\t\t\t\tvar uncovered = false;   # was this tile uncovered by the player?\n\t\t\t\t\tvar flag = false;        # did the player place a flag here?\n\t\t\t\t}\n\n\t\t\t\tvar sizeX, sizeY, mines, todo;\n\t\t\t\tvar field;\n\n\t\t\t\tfunction create(sx, sy, m)\n\t\t\t\t{\n\t\t\t\t\tsizeX = sx;\n\t\t\t\t\tsizeY = sy;\n\t\t\t\t\tmines = m;\n\t\t\t\t\ttodo = sx * sy - mines;\n\t\t\t\t\tfield = [];\n\t\t\t\t\tfor var y in 0:sizeY do\n\t\t\t\t\t{\t\n\t\t\t\t\t\tvar row = [];\n\t\t\t\t\t\tfor var x in 0:sizeX do row.push(Tile());\n\t\t\t\t\t\tfield.push(row);\n\t\t\t\t\t}\n\t\t\t\t\twhile m > 0 do\n\t\t\t\t\t{\n\t\t\t\t\t\tvar x = Integer(math.random() * sizeX);\n\t\t\t\t\t\tvar y = Integer(math.random() * sizeY);\n\t\t\t\t\t\tif not field[y][x].mine then\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfield[y][x].mine = true;\n\t\t\t\t\t\t\tm -= 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tcreate(16, 16, 40);\n\n\t\t\t\tvar tilesize = math.min(canvas.width() // sizeX, canvas.height() // sizeY);\n\n\t\t\t\tfunction drawTile(x, y)\n\t\t\t\t{\n\t\t\t\t\tvar f = field[y][x];\n\t\t\t\t\tif f.uncovered then canvas.setFillColor(0.7, 0.7, 0.7); else canvas.setFillColor(0.5, 0.5, 0.5);\n\t\t\t\t\tcanvas.setLineColor(0.6, 0.6, 0.6);\n\t\t\t\t\tcanvas.setLineWidth(tilesize / 10);\n\t\t\t\t\tcanvas.frameRect(x*tilesize, y*tilesize, tilesize, tilesize);\n\t\t\t\t}\n\t\t\t\t",tests:[{type:"code",code:"drawTile(10, 5);"},{type:"code",code:"field[5][10].uncovered = true; drawTile(10, 5);"},{type:"code",code:"drawTile(3, 11);"},{type:"code",code:"field[11][3].uncovered = true; drawTile(3, 11);"}]},{content:'\n\t\t\t\t<p>\n\t\t\t\tIt is relatively easy to extend this function so that it also draws\n\t\t\t\tuncovered mines (you see one only when you loose) and flags:\n\t\t\t\t<tscript>\n\t\t\t\t# draw a single tile\n\t\t\t\tfunction drawTile(x, y)\n\t\t\t\t{\n\t\t\t\t\tvar f = field[y][x];\n\n\t\t\t\t\t# draw background and frame\n\t\t\t\t\tif f.uncovered then canvas.setFillColor(0.7, 0.7, 0.7); else canvas.setFillColor(0.5, 0.5, 0.5);\n\t\t\t\t\tcanvas.setLineColor(0.6, 0.6, 0.6);\n\t\t\t\t\tcanvas.setLineWidth(tilesize / 10);\n\t\t\t\t\tcanvas.frameRect(x*tilesize, y*tilesize, tilesize, tilesize);\n\n\t\t\t\t\tif f.uncovered then\n\t\t\t\t\t{\n\t\t\t\t\t\tif f.mine then\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t# draw mine\n\t\t\t\t\t\t\tcanvas.setFillColor(0, 0, 0);\n\t\t\t\t\t\t\tcanvas.fillCircle((x+0.5)*tilesize, (y+0.5)*tilesize, 0.3*tilesize);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t# TODO: draw colored number\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if f.flag then\n\t\t\t\t\t{\n\t\t\t\t\t\t# draw flag\n\t\t\t\t\t\tcanvas.setFillColor(1, 0, 0);\n\t\t\t\t\t\tcanvas.fillArea([[(x+0.7)*tilesize, (y+0.2)*tilesize], [(x+0.2)*tilesize, (y+0.3)*tilesize], [(x+0.7)*tilesize, (y+0.4)*tilesize]]);\n\t\t\t\t\t\tcanvas.fillRect((x+0.7)*tilesize, (y+0.2)*tilesize, 0.05*tilesize, 0.6*tilesize);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t</tscript>\n\t\t\t\tTo realize proper drawing at all scales we use make extensive use of the\n\t\t\t\tvariable <code>tilesize</code> in all coordinate calculations.\n\t\t\t\tIncorporate this function into your program. Test the function by\n\t\t\t\tsetting various attributes of the field (uncover, mine, and flag).\n\t\t\t\t</p>\n\n\t\t\t\t<h3>Drawing the whole field</h3>\n\t\t\t\t<p>\n\t\t\t\tWith that functionality in place, it is easy to implement the\n\t\t\t\t<code>function draw()</code>, which draws the whole field. It simply\n\t\t\t\tloops over all rows, within each row over each tile, and calls\n\t\t\t\t<code>drawTile</code> with the appropriate parameters.\n\t\t\t\t</p>\n\n\t\t\t\t<div class="tutorial-exercise">\n\t\t\t\t<p>\n\t\t\t\tImplement <code>function draw()</code> as described above. Call it to\n\t\t\t\tdraw the initial state of the field. You should see a 16×16 field of\n\t\t\t\tcovered tiles.\n\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t',correct:"\n\t\t\t\tclass Tile {\n\t\t\t\tpublic:\n\t\t\t\t\tvar mine = false;        # is there a mine in this tile?\n\t\t\t\t\tvar uncovered = false;   # was this tile uncovered by the player?\n\t\t\t\t\tvar flag = false;        # did the player place a flag here?\n\t\t\t\t}\n\n\t\t\t\tvar sizeX, sizeY, mines, todo;\n\t\t\t\tvar field;\n\n\t\t\t\tfunction create(sx, sy, m)\n\t\t\t\t{\n\t\t\t\t\tsizeX = sx;\n\t\t\t\t\tsizeY = sy;\n\t\t\t\t\tmines = m;\n\t\t\t\t\ttodo = sx * sy - mines;\n\t\t\t\t\tfield = [];\n\t\t\t\t\tfor var y in 0:sizeY do\n\t\t\t\t\t{\t\n\t\t\t\t\t\tvar row = [];\n\t\t\t\t\t\tfor var x in 0:sizeX do row.push(Tile());\n\t\t\t\t\t\tfield.push(row);\n\t\t\t\t\t}\n\t\t\t\t\twhile m > 0 do\n\t\t\t\t\t{\n\t\t\t\t\t\tvar x = Integer(math.random() * sizeX);\n\t\t\t\t\t\tvar y = Integer(math.random() * sizeY);\n\t\t\t\t\t\tif not field[y][x].mine then\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfield[y][x].mine = true;\n\t\t\t\t\t\t\tm -= 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tcreate(16, 16, 40);\n\n\t\t\t\tvar tilesize = math.min(canvas.width() // sizeX, canvas.height() // sizeY);\n\n\t\t\t\t# draw a single tile\n\t\t\t\tfunction drawTile(x, y)\n\t\t\t\t{\n\t\t\t\t\tvar f = field[y][x];\n\n\t\t\t\t\t# draw background and frame\n\t\t\t\t\tif f.uncovered then canvas.setFillColor(0.7, 0.7, 0.7); else canvas.setFillColor(0.5, 0.5, 0.5);\n\t\t\t\t\tcanvas.setLineColor(0.6, 0.6, 0.6);\n\t\t\t\t\tcanvas.setLineWidth(tilesize / 10);\n\t\t\t\t\tcanvas.frameRect(x*tilesize, y*tilesize, tilesize, tilesize);\n\n\t\t\t\t\tif f.uncovered then\n\t\t\t\t\t{\n\t\t\t\t\t\tif f.mine then\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t# draw mine\n\t\t\t\t\t\t\tcanvas.setFillColor(0, 0, 0);\n\t\t\t\t\t\t\tcanvas.fillCircle((x+0.5)*tilesize, (y+0.5)*tilesize, 0.3*tilesize);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t# TODO: draw colored number\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if f.flag then\n\t\t\t\t\t{\n\t\t\t\t\t\t# draw flag\n\t\t\t\t\t\tcanvas.setFillColor(1, 0, 0);\n\t\t\t\t\t\tcanvas.fillArea([[(x+0.7)*tilesize, (y+0.2)*tilesize], [(x+0.2)*tilesize, (y+0.3)*tilesize], [(x+0.7)*tilesize, (y+0.4)*tilesize]]);\n\t\t\t\t\t\tcanvas.fillRect((x+0.7)*tilesize, (y+0.2)*tilesize, 0.05*tilesize, 0.6*tilesize);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfunction draw()\n\t\t\t\t{\n\t\t\t\t\tfor var y in 0:sizeY do\n\t\t\t\t\t\tfor var x in 0:sizeX do\n\t\t\t\t\t\t\tdrawTile(x, y);\n\t\t\t\t}\n\t\t\t\tdraw();\n\t\t\t\t"},{content:'\n\t\t\t\t<h3>Counting</h3>\n\t\t\t\t<p>\n\t\t\t\tA central functionality is still missing: for a covered field, we need\n\t\t\t\tto know the number of mines in the 3×3 neighborhood. Counting the mines\n\t\t\t\tin the neighborhood is another small sub-task that deserves its own\n\t\t\t\tfunction.\n\t\t\t\t</p>\n\n\t\t\t\t<div class="tutorial-exercise">\n\t\t\t\t<p>\n\t\t\t\tImplement the <code>function neighbors(x, y)</code>. It returns the\n\t\t\t\tnumber of mines in the 3×3 neighborhood of the tile. Of course, it\n\t\t\t\tneeds to gracefully handle tiles at the boundary of the field.\n\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t',correct:"\n\t\t\t\tclass Tile {\n\t\t\t\tpublic:\n\t\t\t\t\tvar mine = false;        # is there a mine in this tile?\n\t\t\t\t\tvar uncovered = false;   # was this tile uncovered by the player?\n\t\t\t\t\tvar flag = false;        # did the player place a flag here?\n\t\t\t\t}\n\n\t\t\t\tvar sizeX, sizeY, mines, todo;\n\t\t\t\tvar field;\n\n\t\t\t\tfunction create(sx, sy, m)\n\t\t\t\t{\n\t\t\t\t\tsizeX = sx;\n\t\t\t\t\tsizeY = sy;\n\t\t\t\t\tmines = m;\n\t\t\t\t\ttodo = sx * sy - mines;\n\t\t\t\t\tfield = [];\n\t\t\t\t\tfor var y in 0:sizeY do\n\t\t\t\t\t{\t\n\t\t\t\t\t\tvar row = [];\n\t\t\t\t\t\tfor var x in 0:sizeX do row.push(Tile());\n\t\t\t\t\t\tfield.push(row);\n\t\t\t\t\t}\n\t\t\t\t\twhile m > 0 do\n\t\t\t\t\t{\n\t\t\t\t\t\tvar x = Integer(math.random() * sizeX);\n\t\t\t\t\t\tvar y = Integer(math.random() * sizeY);\n\t\t\t\t\t\tif not field[y][x].mine then\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfield[y][x].mine = true;\n\t\t\t\t\t\t\tm -= 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tcreate(16, 16, 40);\n\n\t\t\t\tvar tilesize = math.min(canvas.width() // sizeX, canvas.height() // sizeY);\n\n\t\t\t\t# draw a single tile\n\t\t\t\tfunction drawTile(x, y)\n\t\t\t\t{\n\t\t\t\t\tvar f = field[y][x];\n\n\t\t\t\t\t# draw background and frame\n\t\t\t\t\tif f.uncovered then canvas.setFillColor(0.7, 0.7, 0.7); else canvas.setFillColor(0.5, 0.5, 0.5);\n\t\t\t\t\tcanvas.setLineColor(0.6, 0.6, 0.6);\n\t\t\t\t\tcanvas.setLineWidth(tilesize / 10);\n\t\t\t\t\tcanvas.frameRect(x*tilesize, y*tilesize, tilesize, tilesize);\n\n\t\t\t\t\tif f.uncovered then\n\t\t\t\t\t{\n\t\t\t\t\t\tif f.mine then\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t# draw mine\n\t\t\t\t\t\t\tcanvas.setFillColor(0, 0, 0);\n\t\t\t\t\t\t\tcanvas.fillCircle((x+0.5)*tilesize, (y+0.5)*tilesize, 0.3*tilesize);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t# TODO: draw colored number\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if f.flag then\n\t\t\t\t\t{\n\t\t\t\t\t\t# draw flag\n\t\t\t\t\t\tcanvas.setFillColor(1, 0, 0);\n\t\t\t\t\t\tcanvas.fillArea([[(x+0.7)*tilesize, (y+0.2)*tilesize], [(x+0.2)*tilesize, (y+0.3)*tilesize], [(x+0.7)*tilesize, (y+0.4)*tilesize]]);\n\t\t\t\t\t\tcanvas.fillRect((x+0.7)*tilesize, (y+0.2)*tilesize, 0.05*tilesize, 0.6*tilesize);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfunction draw()\n\t\t\t\t{\n\t\t\t\t\tfor var y in 0:sizeY do\n\t\t\t\t\t\tfor var x in 0:sizeX do\n\t\t\t\t\t\t\tdrawTile(x, y);\n\t\t\t\t}\n\t\t\t\tdraw();\n\n\t\t\t\t# number of mines in the 3x3 neighborhood of a tile\n\t\t\t\tfunction neighbors(x, y)\n\t\t\t\t{\n\t\t\t\t\tvar num = 0;\n\t\t\t\t\tfor var v in -1:2 do\n\t\t\t\t\t{\n\t\t\t\t\t\tif y+v < 0 or y+v >= sizeY then continue;\n\t\t\t\t\t\tfor var u in -1:2 do\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif x+u < 0 or x+u >= sizeX then continue;\n\t\t\t\t\t\t\tif field[y+v][x+u].mine then num += 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn num;\n\t\t\t\t}\n\t\t\t\t",tests:[{type:"code",code:"\n\t\t\t\t\t\tfield[4][2].mine = false;\n\t\t\t\t\t\tfield[4][3].mine = true;\n\t\t\t\t\t\tfield[4][4].mine = false;\n\t\t\t\t\t\tfield[5][2].mine = false;\n\t\t\t\t\t\tfield[5][3].mine = false;\n\t\t\t\t\t\tfield[5][4].mine = false;\n\t\t\t\t\t\tfield[6][2].mine = false;\n\t\t\t\t\t\tfield[6][3].mine = false;\n\t\t\t\t\t\tfield[6][4].mine = false;\n\t\t\t\t\t\tprint(neighbors(3, 5));\n\t\t\t\t\t\t"},{type:"code",code:"\n\t\t\t\t\t\tfield[4][2].mine = false;\n\t\t\t\t\t\tfield[4][3].mine = false;\n\t\t\t\t\t\tfield[4][4].mine = true;\n\t\t\t\t\t\tfield[5][2].mine = false;\n\t\t\t\t\t\tfield[5][3].mine = false;\n\t\t\t\t\t\tfield[5][4].mine = false;\n\t\t\t\t\t\tfield[6][2].mine = false;\n\t\t\t\t\t\tfield[6][3].mine = false;\n\t\t\t\t\t\tfield[6][4].mine = false;\n\t\t\t\t\t\tprint(neighbors(3, 5));\n\t\t\t\t\t\t"},{type:"code",code:"\n\t\t\t\t\t\tfield[4][2].mine = false;\n\t\t\t\t\t\tfield[4][3].mine = false;\n\t\t\t\t\t\tfield[4][4].mine = false;\n\t\t\t\t\t\tfield[5][2].mine = false;\n\t\t\t\t\t\tfield[5][3].mine = false;\n\t\t\t\t\t\tfield[5][4].mine = true;\n\t\t\t\t\t\tfield[6][2].mine = false;\n\t\t\t\t\t\tfield[6][3].mine = false;\n\t\t\t\t\t\tfield[6][4].mine = true;\n\t\t\t\t\t\tprint(neighbors(3, 5));\n\t\t\t\t\t\t"},{type:"code",code:"\n\t\t\t\t\t\tfield[4][2].mine = false;\n\t\t\t\t\t\tfield[4][3].mine = true;\n\t\t\t\t\t\tfield[4][4].mine = false;\n\t\t\t\t\t\tfield[5][2].mine = true;\n\t\t\t\t\t\tfield[5][3].mine = false;\n\t\t\t\t\t\tfield[5][4].mine = true;\n\t\t\t\t\t\tfield[6][2].mine = true;\n\t\t\t\t\t\tfield[6][3].mine = false;\n\t\t\t\t\t\tfield[6][4].mine = false;\n\t\t\t\t\t\tprint(neighbors(3, 5));\n\t\t\t\t\t\t"},{type:"code",code:"\n\t\t\t\t\t\tfield[4][2].mine = true;\n\t\t\t\t\t\tfield[4][3].mine = true;\n\t\t\t\t\t\tfield[4][4].mine = true;\n\t\t\t\t\t\tfield[5][2].mine = true;\n\t\t\t\t\t\tfield[5][3].mine = false;\n\t\t\t\t\t\tfield[5][4].mine = true;\n\t\t\t\t\t\tfield[6][2].mine = true;\n\t\t\t\t\t\tfield[6][3].mine = true;\n\t\t\t\t\t\tfield[6][4].mine = true;\n\t\t\t\t\t\tprint(neighbors(3, 5));\n\t\t\t\t\t\t"},{type:"code",code:"\n\t\t\t\t\t\tfield[4][2].mine = true;\n\t\t\t\t\t\tfield[4][3].mine = true;\n\t\t\t\t\t\tfield[4][4].mine = false;\n\t\t\t\t\t\tfield[5][2].mine = true;\n\t\t\t\t\t\tfield[5][3].mine = false;\n\t\t\t\t\t\tfield[5][4].mine = true;\n\t\t\t\t\t\tfield[6][2].mine = true;\n\t\t\t\t\t\tfield[6][3].mine = false;\n\t\t\t\t\t\tfield[6][4].mine = true;\n\t\t\t\t\t\tprint(neighbors(3, 5));\n\t\t\t\t\t\t"}]},{content:'\n\t\t\t\t<p>\n\t\t\t\tWith the ability to count mines in the neighborhood, it is time to\n\t\t\t\tcomplete the <code>drawTile</code> function. In case of no neighboring\n\t\t\t\tmines there is nothing to do. Otherwise a colored digit is to be\n\t\t\t\tcentered into the tile. Instead of going through nine different cases\n\t\t\t\t(0 to 8 mines), we define RGB colors as follows:\n\t\t\t\t<tscript>\n\t\t\t\tvar rgb = [\n\t\t\t\t\t\tnull,\n\t\t\t\t\t\t[0,0,1],\n\t\t\t\t\t\t[0,0.5,0],\n\t\t\t\t\t\t[1,0,0],\n\t\t\t\t\t\t[0,0,0.5],\n\t\t\t\t\t\t[0.5,0,0],\n\t\t\t\t\t\t[0,0.5,0.5],\n\t\t\t\t\t\t[0,0,0],\n\t\t\t\t\t\t[0.4,0.4,0.4]\n\t\t\t\t\t];\n\t\t\t\t</tscript>\n\t\t\t\tEach RGB color is an array of three numbers. For 1 to 8 mines, it can be\n\t\t\t\taccessed as <code>rgb[num]</code>, where <code>num</code> is the number\n\t\t\t\tof mines in the neighborhood. Add this variable to the program. Then\n\t\t\t\treplace the line\n\t\t\t\t<tscript>\n\t\t\t\t# TODO: draw colored number\n\t\t\t\t</tscript>\n\t\t\t\twith the following code snippet:\n\t\t\t\t</p>\n\t\t\t\t<tscript>\n\t\t\t\tvar num = neighbors(x, y);\n\t\t\t\tif num > 0 then\n\t\t\t\t{\n\t\t\t\t\t# draw colored number\n\t\t\t\t\tcanvas.setFillColor(rgb[num][0], rgb[num][1], rgb[num][2]);\n\t\t\t\t\tcanvas.setTextAlign("center");\n\t\t\t\t\tcanvas.setFont("Helvetica", 0.6*tilesize);\n\t\t\t\t\tcanvas.text((x+0.5)*tilesize, (y+0.25)*tilesize, num);\n\t\t\t\t}\n\t\t\t\t</tscript>\n\t\t\t\tWhen manually uncovering a few tiles and then calling <code>draw();</code>\n\t\t\t\tyou should see colored numbers appearing.\n\n\t\t\t\t<h2>Handling Events</h2>\n\t\t\t\t<p>\n\t\t\t\tUsually in games, we\'d redraw the canvas every frame. With our\n\t\t\t\tminesweeper game it is sufficient to just redraw the tiles that change.\n\t\t\t\tChange happens in response to clicks: the left mouse button uncovers a\n\t\t\t\ttile, while the right mouse button toggles the flag.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\tWe start by creating the <code>function uncover(x, y)</code>. It shall\n\t\t\t\tbe called when the user clicks a covered tile without a flag. If the\n\t\t\t\ttile is already uncovered or if it contains a flag then the function\n\t\t\t\treturns immediately. Otherwise it sets the flag <code>uncovered</code>\n\t\t\t\tto <code>true</code> and calls <code>drawTile(x, y)</code> to update the\n\t\t\t\tdisplay.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\tIf the tile is a mine then the player looses the game. The function\n\t\t\t\tshall quit event mode and output the message\n\t\t\t\t<code>"Baaaam! Better luck next time!"</code> as an alert.\n\t\t\t\tOtherwise we decrement the variable <code>todo</code>. If it reaches\n\t\t\t\tzero then the player wins the game. This is signaled with the alert\n\t\t\t\t<code>"Congratulations! You cleared the field."</code> and stopping\n\t\t\t\tevent mode.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\tIn the main program, add the following lines to handle events:\n\t\t\t\t<tscript>\n\t\t\t\tsetEventHandler("canvas.keydown", function(event)\n\t\t\t\t{\n\t\t\t\t\tif event.key == "Escape" then quitEventMode();\n\t\t\t\t});\n\t\t\t\tsetEventHandler("canvas.mousedown", function(event)\n\t\t\t\t{\n\t\t\t\t\tif event.x >= sizeX * tilesize or event.y >= sizeY * tilesize then return;\n\t\t\t\t\tif event.button == "left" then uncover(event.x // tilesize, event.y // tilesize);\n\t\t\t\t});\n\t\t\t\tenterEventMode();\n\t\t\t\t</tscript>\n\t\t\t\tThe key handler allows us to stop the program at any time.\n\t\t\t\tThe click handler calls our function if the mouse is over a tile.\n\t\t\t\tRecall that the variable <code>win</code> will contain the parameter\n\t\t\t\tpassed to <code>quitEventMode</code>. We handle the result by raising a\n\t\t\t\tcorresponding alert.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\tWe will eventually have to check whether the uncovered tile has any\n\t\t\t\tmines as neighbors. If not, all neighboring tiles shall be uncovered.\n\t\t\t\tWe will leave that for the next step.\n\t\t\t\t</p>\n\t\t\t\t<div class="tutorial-exercise">\n\t\t\t\t<p>\n\t\t\t\tImplement the <code>function uncover(x, y)</code> as described above.\n\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t',correct:'\n\t\t\t\tclass Tile {\n\t\t\t\tpublic:\n\t\t\t\t\tvar mine = false;        # is there a mine in this tile?\n\t\t\t\t\tvar uncovered = false;   # was this tile uncovered by the player?\n\t\t\t\t\tvar flag = false;        # did the player place a flag here?\n\t\t\t\t}\n\n\t\t\t\tvar sizeX, sizeY, mines, todo;\n\t\t\t\tvar field;\n\n\t\t\t\tvar rgb = [\n\t\t\t\t\t\tnull,\n\t\t\t\t\t\t[0,0,1],\n\t\t\t\t\t\t[0,0.5,0],\n\t\t\t\t\t\t[1,0,0],\n\t\t\t\t\t\t[0,0,0.5],\n\t\t\t\t\t\t[0.5,0,0],\n\t\t\t\t\t\t[0,0.5,0.5],\n\t\t\t\t\t\t[0,0,0],\n\t\t\t\t\t\t[0.4,0.4,0.4]\n\t\t\t\t\t];\n\n\t\t\t\tfunction create(sx, sy, m)\n\t\t\t\t{\n\t\t\t\t\tsizeX = sx;\n\t\t\t\t\tsizeY = sy;\n\t\t\t\t\tmines = m;\n\t\t\t\t\ttodo = sx * sy - mines;\n\t\t\t\t\tfield = [];\n\t\t\t\t\tfor var y in 0:sizeY do\n\t\t\t\t\t{\t\n\t\t\t\t\t\tvar row = [];\n\t\t\t\t\t\tfor var x in 0:sizeX do row.push(Tile());\n\t\t\t\t\t\tfield.push(row);\n\t\t\t\t\t}\n\t\t\t\t\twhile m > 0 do\n\t\t\t\t\t{\n\t\t\t\t\t\tvar x = Integer(math.random() * sizeX);\n\t\t\t\t\t\tvar y = Integer(math.random() * sizeY);\n\t\t\t\t\t\tif not field[y][x].mine then\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfield[y][x].mine = true;\n\t\t\t\t\t\t\tm -= 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tcreate(16, 16, 40);\n\n\t\t\t\tvar tilesize = math.min(canvas.width() // sizeX, canvas.height() // sizeY);\n\n\t\t\t\t# draw a single tile\n\t\t\t\tfunction drawTile(x, y)\n\t\t\t\t{\n\t\t\t\t\tvar f = field[y][x];\n\n\t\t\t\t\t# draw background and frame\n\t\t\t\t\tif f.uncovered then canvas.setFillColor(0.7, 0.7, 0.7); else canvas.setFillColor(0.5, 0.5, 0.5);\n\t\t\t\t\tcanvas.setLineColor(0.6, 0.6, 0.6);\n\t\t\t\t\tcanvas.setLineWidth(tilesize / 10);\n\t\t\t\t\tcanvas.frameRect(x*tilesize, y*tilesize, tilesize, tilesize);\n\n\t\t\t\t\tif f.uncovered then\n\t\t\t\t\t{\n\t\t\t\t\t\tif f.mine then\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t# draw mine\n\t\t\t\t\t\t\tcanvas.setFillColor(0, 0, 0);\n\t\t\t\t\t\t\tcanvas.fillCircle((x+0.5)*tilesize, (y+0.5)*tilesize, 0.3*tilesize);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar num = neighbors(x, y);\n\t\t\t\t\t\t\tif num > 0 then\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t# draw colored number\n\t\t\t\t\t\t\t\tcanvas.setFillColor(rgb[num][0], rgb[num][1], rgb[num][2]);\n\t\t\t\t\t\t\t\tcanvas.setTextAlign("center");\n\t\t\t\t\t\t\t\tcanvas.setFont("Helvetica", 0.6*tilesize);\n\t\t\t\t\t\t\t\tcanvas.text((x+0.5)*tilesize, (y+0.25)*tilesize, num);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if f.flag then\n\t\t\t\t\t{\n\t\t\t\t\t\t# draw flag\n\t\t\t\t\t\tcanvas.setFillColor(1, 0, 0);\n\t\t\t\t\t\tcanvas.fillArea([[(x+0.7)*tilesize, (y+0.2)*tilesize], [(x+0.2)*tilesize, (y+0.3)*tilesize], [(x+0.7)*tilesize, (y+0.4)*tilesize]]);\n\t\t\t\t\t\tcanvas.fillRect((x+0.7)*tilesize, (y+0.2)*tilesize, 0.05*tilesize, 0.6*tilesize);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfunction draw()\n\t\t\t\t{\n\t\t\t\t\tfor var y in 0:sizeY do\n\t\t\t\t\t\tfor var x in 0:sizeX do\n\t\t\t\t\t\t\tdrawTile(x, y);\n\t\t\t\t}\n\t\t\t\tdraw();\n\n\t\t\t\tfunction neighbors(x, y)\n\t\t\t\t{\n\t\t\t\t\tvar counter = 0;\n\t\t\t\t\tfor var a in -1:2 do\n\t\t\t\t\t{\n\t\t\t\t\t\tif y+a < 0 or y+a >= sizeY then continue;\n\t\t\t\t\t\tfor var b in -1:2 do\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif x+b < 0 or x+b >= sizeX then continue;\n\t\t\t\t\t\t\tif field[y+a][x+b].mine then counter += 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn counter;\n\t\t\t\t}\n\n\t\t\t\tfunction uncover(x, y)\n\t\t\t\t{\n\t\t\t\t\tif field[y][x].uncovered or field[y][x].flag then return;\n\t\t\t\t\tfield[y][x].uncovered = true;\n\t\t\t\t\tdrawTile(x, y);\n\t\t\t\t\tif field[y][x].mine then\n\t\t\t\t\t{\n\t\t\t\t\t\tquitEventMode();\n\t\t\t\t\t\talert("Baaaam! Better luck next time!");\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\ttodo -= 1;\n\t\t\t\t\t\tif todo == 0 then\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tquitEventMode();\n\t\t\t\t\t\t\talert("Congratulations! You cleared the field.");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tsetEventHandler("canvas.keydown", function(event)\n\t\t\t\t{\n\t\t\t\t\tif event.key == "Escape" then quitEventMode();\n\t\t\t\t});\n\t\t\t\tsetEventHandler("canvas.mousedown", function(event)\n\t\t\t\t{\n\t\t\t\t\tif event.x >= sizeX * tilesize or event.y >= sizeY * tilesize then return;\n\t\t\t\t\tif event.button == "left" then uncover(event.x // tilesize, event.y // tilesize);\n\t\t\t\t});\n\t\t\t\tenterEventMode();\n\t\t\t',tests:[{type:"code",input:[{type:"canvas.keydown",classname:"canvas.KeyboardEvent",event:{key:"Escape",shift:!1,control:!1,alt:!1,meta:!1}}],code:"\n\t\t\t\t\t\tfield[0][0].mine = false;\n\t\t\t\t\t\tfield[0][1].mine = true;\n\t\t\t\t\t\tfield[1][0].mine = false;\n\t\t\t\t\t\tfield[1][1].mine = true;\n\t\t\t\t\t\tuncover(0, 0);\n\t\t\t\t\t\tuncover(1, 1);\n\t\t\t\t\t"},{type:"code",input:[{type:"canvas.keydown",classname:"canvas.KeyboardEvent",event:{key:"Escape",shift:!1,control:!1,alt:!1,meta:!1}}],code:"\n\t\t\t\t\t\tfield[0][0].mine = false;\n\t\t\t\t\t\tfield[0][0].flag = true;\n\t\t\t\t\t\tfield[1][1].mine = true;\n\t\t\t\t\t\tuncover(0, 0);\n\t\t\t\t\t\tuncover(1, 1);\n\t\t\t\t\t"}]},{content:'\n\t\t\t\t<p>\n\t\t\t\tThe game is already playable, although it is quite tough. As a first\n\t\t\t\timprovement, we should allow the user to toggle flags. To this end,\n\t\t\t\twe extend the click handler as follows:\n\t\t\t\t<tscript>\n\t\t\t\tsetEventHandler("canvas.mousedown", function(event)\n\t\t\t\t{\n\t\t\t\t\tif event.x >= sizeX * tilesize or event.y >= sizeY * tilesize then return;\n\t\t\t\t\tif event.button == "left" then uncover(event.x // tilesize, event.y // tilesize);\n\t\t\t\t\telse if event.button == "right" then toggle(event.x // tilesize, event.y // tilesize);\n\t\t\t\t});\n\t\t\t\t</tscript>\n\n\t\t\t\t<div class="tutorial-exercise">\n\t\t\t\t<p>\n\t\t\t\tImplement the <code>function toggle(x, y)</code>. When called on a\n\t\t\t\tuncovered field it does nothing. Otherwise it toggles the flag, i.e.,\n\t\t\t\tit adds the flag if there was none, and it removes the flag otherwise.\n\t\t\t\tOf course, it calls <code>drawTile(x, y);</code> when it is done.\n\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t',correct:'\n\t\t\t\tclass Tile {\n\t\t\t\tpublic:\n\t\t\t\t\tvar mine = false;        # is there a mine in this tile?\n\t\t\t\t\tvar uncovered = false;   # was this tile uncovered by the player?\n\t\t\t\t\tvar flag = false;        # did the player place a flag here?\n\t\t\t\t}\n\n\t\t\t\tvar sizeX, sizeY, mines, todo;\n\t\t\t\tvar field;\n\n\t\t\t\tvar rgb = [\n\t\t\t\t\t\tnull,\n\t\t\t\t\t\t[0,0,1],\n\t\t\t\t\t\t[0,0.5,0],\n\t\t\t\t\t\t[1,0,0],\n\t\t\t\t\t\t[0,0,0.5],\n\t\t\t\t\t\t[0.5,0,0],\n\t\t\t\t\t\t[0,0.5,0.5],\n\t\t\t\t\t\t[0,0,0],\n\t\t\t\t\t\t[0.4,0.4,0.4]\n\t\t\t\t\t];\n\n\t\t\t\tfunction create(sx, sy, m)\n\t\t\t\t{\n\t\t\t\t\tsizeX = sx;\n\t\t\t\t\tsizeY = sy;\n\t\t\t\t\tmines = m;\n\t\t\t\t\ttodo = sx * sy - mines;\n\t\t\t\t\tfield = [];\n\t\t\t\t\tfor var y in 0:sizeY do\n\t\t\t\t\t{\t\n\t\t\t\t\t\tvar row = [];\n\t\t\t\t\t\tfor var x in 0:sizeX do row.push(Tile());\n\t\t\t\t\t\tfield.push(row);\n\t\t\t\t\t}\n\t\t\t\t\twhile m > 0 do\n\t\t\t\t\t{\n\t\t\t\t\t\tvar x = Integer(math.random() * sizeX);\n\t\t\t\t\t\tvar y = Integer(math.random() * sizeY);\n\t\t\t\t\t\tif not field[y][x].mine then\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfield[y][x].mine = true;\n\t\t\t\t\t\t\tm -= 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tcreate(16, 16, 40);\n\n\t\t\t\tvar tilesize = math.min(canvas.width() // sizeX, canvas.height() // sizeY);\n\n\t\t\t\t# draw a single tile\n\t\t\t\tfunction drawTile(x, y)\n\t\t\t\t{\n\t\t\t\t\tvar f = field[y][x];\n\n\t\t\t\t\t# draw background and frame\n\t\t\t\t\tif f.uncovered then canvas.setFillColor(0.7, 0.7, 0.7); else canvas.setFillColor(0.5, 0.5, 0.5);\n\t\t\t\t\tcanvas.setLineColor(0.6, 0.6, 0.6);\n\t\t\t\t\tcanvas.setLineWidth(tilesize / 10);\n\t\t\t\t\tcanvas.frameRect(x*tilesize, y*tilesize, tilesize, tilesize);\n\n\t\t\t\t\tif f.uncovered then\n\t\t\t\t\t{\n\t\t\t\t\t\tif f.mine then\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t# draw mine\n\t\t\t\t\t\t\tcanvas.setFillColor(0, 0, 0);\n\t\t\t\t\t\t\tcanvas.fillCircle((x+0.5)*tilesize, (y+0.5)*tilesize, 0.3*tilesize);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar num = neighbors(x, y);\n\t\t\t\t\t\t\tif num > 0 then\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t# draw colored number\n\t\t\t\t\t\t\t\tcanvas.setFillColor(rgb[num][0], rgb[num][1], rgb[num][2]);\n\t\t\t\t\t\t\t\tcanvas.setTextAlign("center");\n\t\t\t\t\t\t\t\tcanvas.setFont("Helvetica", 0.6*tilesize);\n\t\t\t\t\t\t\t\tcanvas.text((x+0.5)*tilesize, (y+0.25)*tilesize, num);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if f.flag then\n\t\t\t\t\t{\n\t\t\t\t\t\t# draw flag\n\t\t\t\t\t\tcanvas.setFillColor(1, 0, 0);\n\t\t\t\t\t\tcanvas.fillArea([[(x+0.7)*tilesize, (y+0.2)*tilesize], [(x+0.2)*tilesize, (y+0.3)*tilesize], [(x+0.7)*tilesize, (y+0.4)*tilesize]]);\n\t\t\t\t\t\tcanvas.fillRect((x+0.7)*tilesize, (y+0.2)*tilesize, 0.05*tilesize, 0.6*tilesize);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfunction draw()\n\t\t\t\t{\n\t\t\t\t\tfor var y in 0:sizeY do\n\t\t\t\t\t\tfor var x in 0:sizeX do\n\t\t\t\t\t\t\tdrawTile(x, y);\n\t\t\t\t}\n\t\t\t\tdraw();\n\n\t\t\t\tfunction neighbors(x, y)\n\t\t\t\t{\n\t\t\t\t\tvar counter = 0;\n\t\t\t\t\tfor var a in -1:2 do\n\t\t\t\t\t{\n\t\t\t\t\t\tif y+a < 0 or y+a >= sizeY then continue;\n\t\t\t\t\t\tfor var b in -1:2 do\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif x+b < 0 or x+b >= sizeX then continue;\n\t\t\t\t\t\t\tif field[y+a][x+b].mine then counter += 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn counter;\n\t\t\t\t}\n\n\t\t\t\tfunction uncover(x, y)\n\t\t\t\t{\n\t\t\t\t\tif field[y][x].uncovered or field[y][x].flag then return;\n\t\t\t\t\tfield[y][x].uncovered = true;\n\t\t\t\t\tdrawTile(x, y);\n\t\t\t\t\tif field[y][x].mine then\n\t\t\t\t\t{\n\t\t\t\t\t\tquitEventMode();\n\t\t\t\t\t\talert("Baaaam! Better luck next time!");\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\ttodo -= 1;\n\t\t\t\t\t\tif todo == 0 then\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tquitEventMode();\n\t\t\t\t\t\t\talert("Congratulations! You cleared the field.");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfunction toggle(x, y)\n\t\t\t\t{\n\t\t\t\t\tif field[y][x].uncovered then return;\n\t\t\t\t\tfield[y][x].flag = not field[y][x].flag;\n\t\t\t\t\tdrawTile(x, y);\n\t\t\t\t}\n\n\t\t\t\tsetEventHandler("canvas.keydown", function(event)\n\t\t\t\t{\n\t\t\t\t\tif event.key == "Escape" then quitEventMode();\n\t\t\t\t});\n\t\t\t\tsetEventHandler("canvas.mousedown", function(event)\n\t\t\t\t{\n\t\t\t\t\tif event.x >= sizeX * tilesize or event.y >= sizeY * tilesize then return;\n\t\t\t\t\tif event.button == "left" then uncover(event.x // tilesize, event.y // tilesize);\n\t\t\t\t\telse if event.button == "right" then toggle(event.x // tilesize, event.y // tilesize);\n\t\t\t\t});\n\t\t\t\tenterEventMode();\n\t\t\t',tests:[{type:"code",input:[{type:"canvas.keydown",classname:"canvas.KeyboardEvent",event:{key:"Escape",shift:!1,control:!1,alt:!1,meta:!1}}],code:"\n\t\t\t\t\t\tfield[0][0].mine = false;\n\t\t\t\t\t\tfield[0][1].mine = true;\n\t\t\t\t\t\tfield[1][0].mine = false;\n\t\t\t\t\t\tfield[1][1].mine = true;\n\t\t\t\t\t\tuncover(0, 0);\n\t\t\t\t\t\tuncover(1, 1);\n\t\t\t\t\t"},{type:"code",input:[{type:"canvas.keydown",classname:"canvas.KeyboardEvent",event:{key:"Escape",shift:!1,control:!1,alt:!1,meta:!1}}],code:"\n\t\t\t\t\t\ttoggle(6, 4);\n\t\t\t\t\t\ttoggle(6, 4);\n\t\t\t\t\t\ttoggle(6, 4);\n\t\t\t\t\t"}]},{content:"\n\t\t\t\t<h2>Uncovering Areas</h2>\n\t\t\t\t<p>\n\t\t\t\tOne annoyance with the current implementation is that areas around tiles\n\t\t\t\twithout neighboring mines are not uncovered automatically, which results\n\t\t\t\tin excessive trivial clicking. Let's automate that task!\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\tHow to achieve that? The solution is surprisingly simple. Whenever we\n\t\t\t\tencounter a field without neighboring mines, we can automatically\n\t\t\t\tuncover all neighboring tiles. This amounts to <i>recursively</i>\n\t\t\t\tcalling <code>uncover</code> from within that function.\n\t\t\t\t</p>\n\n\t\t\t\t<div class=\"tutorial-exercise\">\n\t\t\t\t<p>\n\t\t\t\tExtend the function <code>uncover</code> to recursively uncover whole\n\t\t\t\tares. Don't forget to take care of the boundaries of the field.\n\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t",correct:'\n\t\t\t\tclass Tile {\n\t\t\t\tpublic:\n\t\t\t\t\tvar mine = false;        # is there a mine in this tile?\n\t\t\t\t\tvar uncovered = false;   # was this tile uncovered by the player?\n\t\t\t\t\tvar flag = false;        # did the player place a flag here?\n\t\t\t\t}\n\n\t\t\t\tvar sizeX, sizeY, mines, todo;\n\t\t\t\tvar field;\n\n\t\t\t\tvar rgb = [\n\t\t\t\t\t\tnull,\n\t\t\t\t\t\t[0,0,1],\n\t\t\t\t\t\t[0,0.5,0],\n\t\t\t\t\t\t[1,0,0],\n\t\t\t\t\t\t[0,0,0.5],\n\t\t\t\t\t\t[0.5,0,0],\n\t\t\t\t\t\t[0,0.5,0.5],\n\t\t\t\t\t\t[0,0,0],\n\t\t\t\t\t\t[0.4,0.4,0.4]\n\t\t\t\t\t];\n\n\t\t\t\tfunction create(sx, sy, m)\n\t\t\t\t{\n\t\t\t\t\tsizeX = sx;\n\t\t\t\t\tsizeY = sy;\n\t\t\t\t\tmines = m;\n\t\t\t\t\ttodo = sx * sy - mines;\n\t\t\t\t\tfield = [];\n\t\t\t\t\tfor var y in 0:sizeY do\n\t\t\t\t\t{\t\n\t\t\t\t\t\tvar row = [];\n\t\t\t\t\t\tfor var x in 0:sizeX do row.push(Tile());\n\t\t\t\t\t\tfield.push(row);\n\t\t\t\t\t}\n\t\t\t\t\twhile m > 0 do\n\t\t\t\t\t{\n\t\t\t\t\t\tvar x = Integer(math.random() * sizeX);\n\t\t\t\t\t\tvar y = Integer(math.random() * sizeY);\n\t\t\t\t\t\tif not field[y][x].mine then\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfield[y][x].mine = true;\n\t\t\t\t\t\t\tm -= 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tcreate(16, 16, 40);\n\n\t\t\t\tvar tilesize = math.min(canvas.width() // sizeX, canvas.height() // sizeY);\n\n\t\t\t\t# draw a single tile\n\t\t\t\tfunction drawTile(x, y)\n\t\t\t\t{\n\t\t\t\t\tvar f = field[y][x];\n\n\t\t\t\t\t# draw background and frame\n\t\t\t\t\tif f.uncovered then canvas.setFillColor(0.7, 0.7, 0.7); else canvas.setFillColor(0.5, 0.5, 0.5);\n\t\t\t\t\tcanvas.setLineColor(0.6, 0.6, 0.6);\n\t\t\t\t\tcanvas.setLineWidth(tilesize / 10);\n\t\t\t\t\tcanvas.frameRect(x*tilesize, y*tilesize, tilesize, tilesize);\n\n\t\t\t\t\tif f.uncovered then\n\t\t\t\t\t{\n\t\t\t\t\t\tif f.mine then\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t# draw mine\n\t\t\t\t\t\t\tcanvas.setFillColor(0, 0, 0);\n\t\t\t\t\t\t\tcanvas.fillCircle((x+0.5)*tilesize, (y+0.5)*tilesize, 0.3*tilesize);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar num = neighbors(x, y);\n\t\t\t\t\t\t\tif num > 0 then\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t# draw colored number\n\t\t\t\t\t\t\t\tcanvas.setFillColor(rgb[num][0], rgb[num][1], rgb[num][2]);\n\t\t\t\t\t\t\t\tcanvas.setTextAlign("center");\n\t\t\t\t\t\t\t\tcanvas.setFont("Helvetica", 0.6*tilesize);\n\t\t\t\t\t\t\t\tcanvas.text((x+0.5)*tilesize, (y+0.25)*tilesize, num);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if f.flag then\n\t\t\t\t\t{\n\t\t\t\t\t\t# draw flag\n\t\t\t\t\t\tcanvas.setFillColor(1, 0, 0);\n\t\t\t\t\t\tcanvas.fillArea([[(x+0.7)*tilesize, (y+0.2)*tilesize], [(x+0.2)*tilesize, (y+0.3)*tilesize], [(x+0.7)*tilesize, (y+0.4)*tilesize]]);\n\t\t\t\t\t\tcanvas.fillRect((x+0.7)*tilesize, (y+0.2)*tilesize, 0.05*tilesize, 0.6*tilesize);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfunction draw()\n\t\t\t\t{\n\t\t\t\t\tfor var y in 0:sizeY do\n\t\t\t\t\t\tfor var x in 0:sizeX do\n\t\t\t\t\t\t\tdrawTile(x, y);\n\t\t\t\t}\n\t\t\t\tdraw();\n\n\t\t\t\tfunction neighbors(x, y)\n\t\t\t\t{\n\t\t\t\t\tvar counter = 0;\n\t\t\t\t\tfor var a in -1:2 do\n\t\t\t\t\t{\n\t\t\t\t\t\tif y+a < 0 or y+a >= sizeY then continue;\n\t\t\t\t\t\tfor var b in -1:2 do\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif x+b < 0 or x+b >= sizeX then continue;\n\t\t\t\t\t\t\tif field[y+a][x+b].mine then counter += 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn counter;\n\t\t\t\t}\n\n\t\t\t\tfunction uncover(x, y)\n\t\t\t\t{\n\t\t\t\t\tif field[y][x].uncovered or field[y][x].flag then return;\n\t\t\t\t\tfield[y][x].uncovered = true;\n\t\t\t\t\tdrawTile(x, y);\n\t\t\t\t\tif field[y][x].mine then\n\t\t\t\t\t{\n\t\t\t\t\t\tquitEventMode();\n\t\t\t\t\t\talert("Baaaam! Better luck next time!");\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\ttodo -= 1;\n\t\t\t\t\t\tif todo == 0 then\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tquitEventMode();\n\t\t\t\t\t\t\talert("Congratulations! You cleared the field.");\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif neighbors(x, y) == 0 then\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfor var a in -1:2 do\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif y+a < 0 or y+a >= sizeY then continue;\n\t\t\t\t\t\t\t\tfor var b in -1:2 do\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tif x+b < 0 or x+b >= sizeX then continue;\n\t\t\t\t\t\t\t\t\tuncover(x+b, y+a);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfunction toggle(x, y)\n\t\t\t\t{\n\t\t\t\t\tif field[y][x].uncovered then return;\n\t\t\t\t\tfield[y][x].flag = not field[y][x].flag;\n\t\t\t\t\tdrawTile(x, y);\n\t\t\t\t}\n\n\t\t\t\tsetEventHandler("canvas.keydown", function(event)\n\t\t\t\t{\n\t\t\t\t\tif event.key == "Escape" then quitEventMode();\n\t\t\t\t});\n\t\t\t\tsetEventHandler("canvas.mousedown", function(event)\n\t\t\t\t{\n\t\t\t\t\tif event.x >= sizeX * tilesize or event.y >= sizeY * tilesize then return;\n\t\t\t\t\tif event.button == "left" then uncover(event.x // tilesize, event.y // tilesize);\n\t\t\t\t\telse if event.button == "right" then toggle(event.x // tilesize, event.y // tilesize);\n\t\t\t\t});\n\t\t\t\tenterEventMode();\n\t\t\t',tests:[{type:"code",input:[{type:"canvas.keydown",classname:"canvas.KeyboardEvent",event:{key:"Escape",shift:!1,control:!1,alt:!1,meta:!1}}],code:"\n\t\t\t\t\t\tfield[0][0].mine = false;\n\t\t\t\t\t\tfield[0][1].mine = false;\n\t\t\t\t\t\tfield[0][2].mine = false;\n\t\t\t\t\t\tfield[0][3].mine = true;\n\t\t\t\t\t\tfield[1][0].mine = false;\n\t\t\t\t\t\tfield[1][1].mine = false;\n\t\t\t\t\t\tfield[1][2].mine = false;\n\t\t\t\t\t\tfield[1][3].mine = true;\n\t\t\t\t\t\tfield[2][0].mine = false;\n\t\t\t\t\t\tfield[2][1].mine = false;\n\t\t\t\t\t\tfield[2][2].mine = true;\n\t\t\t\t\t\tfield[2][3].mine = false;\n\t\t\t\t\t\tfield[3][0].mine = true;\n\t\t\t\t\t\tfield[3][1].mine = false;\n\t\t\t\t\t\tfield[3][2].mine = false;\n\t\t\t\t\t\tfield[3][3].mine = false;\n\t\t\t\t\t\tuncover(0, 0);\n\t\t\t\t\t"}]},{content:'\n\t\t\t\t<h2>Final Steps</h2>\n\t\t\t\t<p>\n\t\t\t\tWe are only two small steps away from completing the project.\n\t\t\t\t</p>\n\n\t\t\t\t<h3>Initialization</h3>\n\t\t\t\t<p>\n\t\t\t\tCurrently, the player can only guess in the initial move. We should\n\t\t\t\tbreak the symmetry by uncovering a tile without neighbors, which results\n\t\t\t\tin a whole area being uncovered. All we need to do is to search for a\n\t\t\t\tfree tile. The process should be as follows: Add a while-loop, draw\n\t\t\t\trandom coordinates, check the number of neighbors, and if the number is\n\t\t\t\tzero then uncover the field and stop the loop.\n\t\t\t\t</p>\n\n\t\t\t\t<h3>Resizing</h3>\n\t\t\t\t<p>\n\t\t\t\tFinally, let\'s make the game resilient to resizing of the canvas. That\'s\n\t\t\t\teasy: handle the <code>"canvas.resize"</code> event. In the event\n\t\t\t\thandler, first re-compute the variable <code>tilesize</code> and then\n\t\t\t\tcall <code>draw()</code>.\n\t\t\t\t</p>\n\n\t\t\t\t<h2>Wrap-Up</h2>\n\t\t\t\t<p>\n\t\t\t\tWhen that\'s done, we should have arrived at a fully functional\n\t\t\t\tminesweeper game! :) Here is the full code:\n\t\t\t\t</p>\n\t\t\t\t<pre>\nclass Tile {\npublic:\n\tvar mine = false;        # is there a mine in this tile?\n\tvar uncovered = false;   # was this tile uncovered by the player?\n\tvar flag = false;        # did the player place a flag here?\n}\n\nvar sizeX, sizeY, mines, todo;\nvar field;\n\nvar rgb = [\n\t\tnull,\n\t\t[0,0,1],\n\t\t[0,0.5,0],\n\t\t[1,0,0],\n\t\t[0,0,0.5],\n\t\t[0.5,0,0],\n\t\t[0,0.5,0.5],\n\t\t[0,0,0],\n\t\t[0.4,0.4,0.4]\n\t];\n\nfunction create(sx, sy, m)\n{\n\tsizeX = sx;\n\tsizeY = sy;\n\tmines = m;\n\ttodo = sx * sy - mines;\n\tfield = [];\n\tfor var y in 0:sizeY do\n\t{\t\n\t\tvar row = [];\n\t\tfor var x in 0:sizeX do row.push(Tile());\n\t\tfield.push(row);\n\t}\n\twhile m > 0 do\n\t{\n\t\tvar x = Integer(math.random() * sizeX);\n\t\tvar y = Integer(math.random() * sizeY);\n\t\tif not field[y][x].mine then\n\t\t{\n\t\t\tfield[y][x].mine = true;\n\t\t\tm -= 1;\n\t\t}\n\t}\n}\n\ncreate(16, 16, 40);\n\nvar tilesize = math.min(canvas.width() // sizeX, canvas.height() // sizeY);\n\n# draw a single tile\nfunction drawTile(x, y)\n{\n\tvar f = field[y][x];\n\n\t# draw background and frame\n\tif f.uncovered then canvas.setFillColor(0.7, 0.7, 0.7); else canvas.setFillColor(0.5, 0.5, 0.5);\n\tcanvas.setLineColor(0.6, 0.6, 0.6);\n\tcanvas.setLineWidth(tilesize / 10);\n\tcanvas.frameRect(x*tilesize, y*tilesize, tilesize, tilesize);\n\n\tif f.uncovered then\n\t{\n\t\tif f.mine then\n\t\t{\n\t\t\t# draw mine\n\t\t\tcanvas.setFillColor(0, 0, 0);\n\t\t\tcanvas.fillCircle((x+0.5)*tilesize, (y+0.5)*tilesize, 0.3*tilesize);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvar num = neighbors(x, y);\n\t\t\tif num > 0 then\n\t\t\t{\n\t\t\t\t# draw colored number\n\t\t\t\tcanvas.setFillColor(rgb[num][0], rgb[num][1], rgb[num][2]);\n\t\t\t\tcanvas.setTextAlign("center");\n\t\t\t\tcanvas.setFont("Helvetica", 0.6*tilesize);\n\t\t\t\tcanvas.text((x+0.5)*tilesize, (y+0.25)*tilesize, num);\n\t\t\t}\n\t\t}\n\t}\n\telse if f.flag then\n\t{\n\t\t# draw flag\n\t\tcanvas.setFillColor(1, 0, 0);\n\t\tcanvas.fillArea([[(x+0.7)*tilesize, (y+0.2)*tilesize], [(x+0.2)*tilesize, (y+0.3)*tilesize], [(x+0.7)*tilesize, (y+0.4)*tilesize]]);\n\t\tcanvas.fillRect((x+0.7)*tilesize, (y+0.2)*tilesize, 0.05*tilesize, 0.6*tilesize);\n\t}\n}\n\nfunction draw()\n{\n\tfor var y in 0:sizeY do\n\t\tfor var x in 0:sizeX do\n\t\t\tdrawTile(x, y);\n}\ndraw();\n\nfunction neighbors(x, y)\n{\n\tvar counter = 0;\n\tfor var a in -1:2 do\n\t{\n\t\tif y+a < 0 or y+a >= sizeY then continue;\n\t\tfor var b in -1:2 do\n\t\t{\n\t\t\tif x+b < 0 or x+b >= sizeX then continue;\n\t\t\tif field[y+a][x+b].mine then counter += 1;\n\t\t}\n\t}\n\treturn counter;\n}\n\nfunction uncover(x, y)\n{\n\tif field[y][x].uncovered or field[y][x].flag then return;\n\tfield[y][x].uncovered = true;\n\tdrawTile(x, y);\n\tif field[y][x].mine then\n\t{\n\t\tquitEventMode();\n\t\talert("Baaaam! Better luck next time!");\n\t}\n\telse\n\t{\n\t\ttodo -= 1;\n\t\tif todo == 0 then\n\t\t{\n\t\t\tquitEventMode();\n\t\t\talert("Congratulations! You cleared the field.");\n\t\t}\n\t\tif neighbors(x, y) == 0 then\n\t\t{\n\t\t\tfor var a in -1:2 do\n\t\t\t{\n\t\t\t\tif y+a < 0 or y+a >= sizeY then continue;\n\t\t\t\tfor var b in -1:2 do\n\t\t\t\t{\n\t\t\t\t\tif x+b < 0 or x+b >= sizeX then continue;\n\t\t\t\t\tuncover(x+b, y+a);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction toggle(x, y)\n{\n\tif field[y][x].uncovered then return;\n\tfield[y][x].flag = not field[y][x].flag;\n\tdrawTile(x, y);\n}\n\nwhile true do\n{\n\tvar x = Integer(math.random() * sizeX);\n\tvar y = Integer(math.random() * sizeY);\n\tif neighbors(x, y) == 0 then\n\t{\n\t\tuncover(x, y);\n\t\tbreak;\n\t}\n}\n\nsetEventHandler("canvas.keydown", function(event)\n{\n\tif event.key == "Escape" then quitEventMode();\n});\nsetEventHandler("canvas.mousedown", function(event)\n{\n\tif event.x >= sizeX * tilesize or event.y >= sizeY * tilesize then return;\n\tif event.button == "left" then uncover(event.x // tilesize, event.y // tilesize);\n\telse if event.button == "right" then toggle(event.x // tilesize, event.y // tilesize);\n});\nsetEventHandler("canvas.resize", function(event)\n{\n\ttilesize = math.min(canvas.width() // sizeX, canvas.height() // sizeY);\n\tdraw();\n});\nenterEventMode();\n\t\t\t\t</pre>\n\t\t\t\t<p>\n\t\t\t\tEnjoy!\n\t\t\t\t</p>\n\t\t\t'}]}},8866:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tutorial_graphics=void 0,e.tutorial_graphics={id:"graphics",title:"Simple Graphics",sections:[{content:'\n\t\t\t<p>\n\t\t\tOur first two commands, <code>print</code> and <code\n\t\t\tclass="code">alert</code>, output text. However, modern computers\n\t\t\tinteract with users primarily through graphical interfaces, not through\n\t\t\tconsoles and message areas. TScript offers the possibility to render\n\t\t\tsimple graphical output. There are two different ways to do so - Turtle\n\t\t\tand Canvas Graphics. The output is drawn to specific panels called\n\t\t\t"Turtle" and "Canvas". They can be toggled with the corresponding\n\t\t\tbuttons in the toolbar of the IDE.\n\t\t\t</p>\n\t\t\t'},{content:'\n\t\t\t<h2>Turtle Graphics</h2>\n\t\t\t<p>\n\t\t\tA simple way to create graphical output is with the so called Turtle\n\t\t\tGraphics. Imagine a little artificial turtle, which you can steer\n\t\t\tprogrammatically, running over its panel while drawing with an\n\t\t\tattached pencil. In essence, the turtle is controlled with only two\n\t\t\tcommands: <code>turtle.move</code> and\n\t\t\t<code>turtle.turn</code>. The move command makes the\n\t\t\tturtle move straight for a given distance, while the turn command\n\t\t\tmakes it rotate in place by an angle specified in degrees\n\t\t\t(in contrast to radians). Let\'s try it out:\n\t\t\t<tscript>\n\t\t\tturtle.move(50);\n\t\t\tturtle.turn(45);\n\t\t\tturtle.move(30);\n\t\t\t</tscript>\n\t\t\tCopy the commands over into the editor and run the program. You\n\t\t\tshould see a line with a kink on the turtle panel. If you cannot see\n\t\t\tthe figure then you need to activate the turtle panel by pressing the\n\t\t\tcorresponding toolbar button. The following just happened:\n\t\t\t<ul>\n\t\t\t<li>The imagined turtle robot started in the middle of the gray area,\n\t\t\t\theading upwards.</li>\n\t\t\t<li>It was instructed to move 50 units straight ahead. While doing so,\n\t\t\t\tit was drawing a black line onto the gray background with its\n\t\t\t\tattached pen.</li>\n\t\t\t<li>After stopping, it turned 45 degrees to the right. Afterwards,\n\t\t\t\tit was heading diagonally towards the top right. Since it turned\n\t\t\t\tin place, this operation did not draw anything new.</li>\n\t\t\t<li>The turtle moved diagonally into its current direction for 30\n\t\t\t\tunits, drawing a second line. Naturally, the second line started\n\t\t\t\twhere the first one ended.</li>\n\t\t\t</ul>\n\t\t\tSince the turtle can move quite fast, we only see the end result, as\n\t\t\tif it had been created in a single step. However, that is not the case.\n\t\t\t</p><p>\n\t\t\tThe move and turn commands can be combined freely, and with arbitrary\n\t\t\tnumbers. In particular, negative numbers are fine. Since the turn\n\t\t\tcommand makes the turtle rotate by a number of degrees to the right,\n\t\t\t<code>turtle.turn(-90)</code> makes it turn by 90 degrees\n\t\t\t<i>to the left</i>, due to the negative sign of the parameter.\n\t\t\tLikewise, <code>turtle.move(-20)</code> makes the\n\t\t\tturtle move backward.\n\t\t\t</p><p>\n\t\t\tTo make things a bit more interesting, the turtle can move its pen up\n\t\t\tand down, and it can change its color. Lifting the pen works with the\n\t\t\tcommand\n\t\t\t<tscript>\n\t\t\tturtle.pen(false);\n\t\t\t</tscript>\n\t\t\twhile\n\t\t\t<tscript>\n\t\t\tturtle.pen(true);\n\t\t\t</tscript>\n\t\t\tlowers the pen. We will encounter the keywords\n\t\t\t<code>true</code> and <code>false</code>\n\t\t\tagain in later units. Moving around with lifted pen changes the position\n\t\t\tof the turtle robot without drawing lines. The color is changed as\n\t\t\tfollows:\n\t\t\t<tscript>\n\t\t\tturtle.color(1, 0, 0);    # red\n\t\t\tturtle.move(20);\n\t\t\tturtle.color(0, 1, 0);    # green\n\t\t\tturtle.move(20);\n\t\t\tturtle.color(0, 0, 1);    # blue\n\t\t\tturtle.move(20);\n\t\t\tturtle.color(1, 0.5, 0);  # orange\n\t\t\tturtle.move(20);\n\t\t\tturtle.color(0, 0, 0);    # black\n\t\t\tturtle.move(20);\n\t\t\t</tscript>\n\t\t\tAgain, copy the program over to the editor and see the effect. In a\n\t\t\tcomputer, colors are frequently encoded with the\n\t\t\t<a target="_blank" href="https://en.wikipedia.org/wiki/RGB_color_model">red-green-blue (RGB) color model</a>.\n\t\t\tEach color is additively composed of the three base colors red, green,\n\t\t\tand blue, which can be fully on (value 1) or fully off (value 0), or\n\t\t\ttake any gradual value in between. Turning everything off yields black,\n\t\t\twhite is all-on, and setting the three color channels to the same value\n\t\t\tresults in shades of gray. Combining red with blue gives violet, and so\n\t\t\ton. The only counter-intuitive combination it that adding red and green\n\t\t\tgives yellow, and the same is required for mixing orange and brown.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t<div class="tutorial-exercise">\n\t\t\tTry out the turtle graphics by yourself. Draw a square using the\n\t\t\tmove and turn commands. Use a side length of 50 and an angle of\n\t\t\t90&deg;.\n\t\t\t</div>\n\t\t\t</p>\n\t\t\t',correct:"\n\t\t\t\tturtle.move(50);\n\t\t\t\tturtle.turn(90);\n\t\t\t\tturtle.move(50);\n\t\t\t\tturtle.turn(90);\n\t\t\t\tturtle.move(50);\n\t\t\t\tturtle.turn(90);\n\t\t\t\tturtle.move(50);\n\t\t\t\t","ignore-order":!0,tests:[{type:"code",code:""}]},{content:'\n\t\t\t<h2>Canvas Graphics</h2>\n\t\t\t<p>\n\t\t\tTurtle graphics is extremely restricted. It is apparently unsuitable for\n\t\t\tcreating complex user interfaces, or actually anything beyond simple\n\t\t\tline drawings. Its main use is in teaching programming concepts. More\n\t\t\tserious drawing capabilities are offered by canvas graphics.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tThe canvas is a two-dimensional area, on which we can draw arbitrary\n\t\t\tshapes, curves, and text. This is sufficient, in principle, for\n\t\t\tdisplaying all kinds of controls, like buttons, sliders, check boxes,\n\t\t\tand so on. It is also what allows us to create simple games. It could\n\t\t\tin principle be used even for displaying complex three-dimensional\n\t\t\tgraphics, however, TScript is not the right programming language for\n\t\t\tthat purpose.\n\t\t\t</p>\n\t\t\t<h3>Drawing Shapes</h3>\n\t\t\t<p>\n\t\t\tOn the canvas we can draw <i>lines</i> (and curves), <i>shapes</i>\n\t\t\t(filled areas), and a combination of both (filled areas with a\n\t\t\tframe-like boundary). Finally, it has special means to draw text.\n\t\t\tEverything that is drawn is specified in terms of coordinates. The\n\t\t\ttop left corner of the canvas has coordinates (0, 0). The first\n\t\t\tcoordinate is the number of pixels we move to the right, the second\n\t\t\tcoordinate is the number of pixels we move down. Hence, coordinates\n\t\t\t(x, y) specify a point nearly as we are used to from mathematical\n\t\t\tconventions, with the twist that the vertical axis points downwards.\n\t\t\tThis is a common convention in computer graphics.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tLet\'s look at an example. The following program draws a line, a\n\t\t\trectangle, a circle, and a text:\n\t\t\t<tscript>\n\t\t\tcanvas.line(50, 50, 150, 150);         # x1, y1, x2, y2\n\t\t\tcanvas.fillRect(100, 30, 100, 50);     # left, top, width, height\n\t\t\tcanvas.circle(50, 100, 25);            # x, y, radius\n\t\t\tcanvas.text(50, 150, "Hello World");   # x, y, text\n\t\t\t</tscript>\n\t\t\tCopy the program into the editor and run it! If you cannot see the\n\t\t\tcanvas output then most probably the canvas panel is hidden. Bring\n\t\t\tit to the front with the corresponding toolbar button and run the\n\t\t\tprogram again.\n\t\t\t</p><p>\n\t\t\tNotice that the rectangle is filled, while the circle is not.\n\t\t\tMake sure that you understand the effect of each number. Simply mess\n\t\t\taround with the numbers, run the program again, and observe the\n\t\t\tchanges.\n\t\t\t</p>\n\t\t\t<h3>Styling</h3>\n\t\t\t<p>\n\t\t\tUntil now, everything was drawn with default styles, which amounts\n\t\t\tto drawing in black with a line width of one. The following drawing\n\t\t\tstyles can be customized:\n\t\t\t<ul>\n\t\t\t<li>The canvas maintains two colors, one for lines and one for filling\n\t\t\t\tin areas. Somewhat counter-intuitively, the fill color is also used\n\t\t\t\tfor drawing text. The colors can be changed with\n\t\t\t\t<code>canvas.setLineColor(red, green, blue);</code>\n\t\t\t\tand <code>canvas.setFillColor(red, green, blue);</code>.</li>\n\t\t\t<li>All lines are drawn with a specified width (in pixels), which can\n\t\t\t\tbe set with <code>canvas.setLineWidth(width);</code>.</li>\n\t\t\t<li>The function <code>canvas.setFont(font, size);</code>\n\t\t\t\tsets the font name and the font size for subsequent text output.\n\t\t\t\tExample: <code>canvas.setFont("Helvetica", 36);</code></li>\n\t\t\t<li>By default, text is left-aligned. This can be changed with\n\t\t\t\t<code>canvas.setTextAlign(alignment);</code>. Possible\n\t\t\t\talignments are "left", "center", and "right".</li>\n\t\t\t</ul>\n\t\t\tOf course, in all functions above, the placeholders (like "red",\n\t\t\t"green", "blue", "width" and "alignment") must be replaced with actual\n\t\t\tvalues.\n\t\t\t</p>\n\t\t\t<h3>Shapes with Frames</h3>\n\t\t\t<p>\n\t\t\tThe following program draws three styled rectangles:\n\t\t\t<tscript>\n\t\t\tcanvas.setLineColor(1, 0, 0);         # red\n\t\t\tcanvas.setFillColor(0.7, 0.7, 0.7);   # light gray\n\t\t\tcanvas.setLineWidth(10);              # quite bold\n\t\t\tcanvas.rect(50, 50, 70, 100);         # outline only\n\t\t\tcanvas.fillRect(150, 50, 70, 100);    # area only\n\t\t\tcanvas.frameRect(250, 50, 70, 100);   # area with outline\n\t\t\t</tscript>\n\t\t\tSeveral further canvas drawing commands are available in three\n\t\t\tvariants, namely for drawing curves or outlines, filled shapes, and\n\t\t\tframed shapes.\n\t\t\t</p>\n\t\t\t<h3>Canvas Size</h3>\n\t\t\t<p>\n\t\t\tSince devices and screen resolutions differ, and more so window sizes,\n\t\t\talso the size of the canvas is subject to change. Therefore, at any\n\t\t\ttime, the current width and height of the canvas can be determined\n\t\t\twith the functions <code>canvas.width()</code> and\n\t\t\t<code>canvas.height()</code>. They are similar to the\n\t\t\t<code>print</code> command, however, they do not take an\n\t\t\targument but instead <i>return</i> (i.e., represent) a value. This\n\t\t\tvalue can be used to fill, say, the top 100 pixels of the canvas over\n\t\t\tthe full width with a light green background:\n\t\t\t<tscript>\n\t\t\tcanvas.setFillColor(0.7, 1, 0.7);\n\t\t\tcanvas.fillRect(0, 0, canvas.width(), 100);\n\t\t\t</tscript>\n\t\t\tMore flexible options become available in a future unit of this\n\t\t\ttutorial when we will have a detailed look at performing calculations.\n\t\t\t</p>\n\t\t\t<h3>Further Reading</h3>\n\t\t\t<p>\n\t\t\tThe canvas offers a wide variety of functions. For some of these we need\n\t\t\tadvanced concepts covered in later units of this tutorial. Anyway, this\n\t\t\tis a good opportunity for exploring the TScript documentation. Simply\n\t\t\thit the button "Documentation" in the very right of the toolbar. Then\n\t\t\tsearch for "canvas", or for any other topic.\n\t\t\t</p>\n\t\t\t<h3>Experimentation!</h3>\n\t\t\t<p>\n\t\t\tThe best way to explore the power of canvas graphics is to give it a\n\t\t\ttry! You may experiment with the following tasks:\n\t\t\t<ul>\n\t\t\t<li>Create a "child drawing", with a meadow, a blue sky, a yellow sun,\n\t\t\t\ta house, and a tree. If you feel keen about it, try to add a\n\t\t\t\trainbow. To that end, draw a 360&deg; rainbow from full circles\n\t\t\t\tand then paint over the parts you don\'t need.</li>\n\t\t\t<li>Draw a window or dialog with border, title bar, some text, and an\n\t\t\t\tokay button. It is understood that for now the button will not be\n\t\t\t\tfunctional.</li>\n\t\t\t</ul>\n\t\t\t</p>\n\n\t\t\t<h2>Wrap-Up</h2>\n\t\t\t<p>\n\t\t\tYou have now learned about basic types of graphical output. Turtle\n\t\t\tgraphics is extremely limited, but also very restricted in scope. In\n\t\t\tcontrast, canvas graphics offers sufficiently powerful capabilities to\n\t\t\tcreate little animations and games. The best way to learn how to use\n\t\t\tTScript graphics is to just play around with everything and see what\n\t\t\thappens. You might want to try out various commands you can find in the\n\t\t\tdocumentation.\n\t\t\t</p>\n\t\t\t'}]}},948:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tutorial_helloworld=void 0,e.tutorial_helloworld={id:"helloworld",title:"The First Program",sections:[{content:'\n\t\t\t<p>\n\t\t\tProgramming means to give commands to the computer. These\n\t\t\tcommands, taken together, are the program, or code. Running the\n\t\t\tprogram means to make the computer execute the commands. The\n\t\t\tnice thing about programming is that once the program is\n\t\t\twritten, it can be executed any number of times without further\n\t\t\t(human) effort. Therefore, programming means task automation.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tWhich tasks can be automated depends on the interface between\n\t\t\tthe computer and the world. A screen allows the computer to\n\t\t\toutput text, graphics, and videos. We\'ll start with the simplest\n\t\t\tof all outputs: a line of text.\n\t\t\t</p>\n\n\t\t\t<h2>Hello World</h2>\n\t\t\t<p>\n\t\t\tA good old tradition of computer science is that the first\n\t\t\tprogram a programmer writes in a new programming language simply\n\t\t\toutputs the greeting\n\t\t\t</p>\n\t\t\t<div style="font-size: 150%; text-align: center; padding: 1em; border: 1px solid #000;">\n\t\t\t\tHello World!\n\t\t\t</div>\n\t\t\t<p>\n\t\t\tSo, let\'s start writing our first program!\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tThe program will consist only of a single command. In TScript\n\t\t\t(and many other languages), a line of text can be produced with\n\t\t\tthe <code>print</code> command. In a programming\n\t\t\tlanguage, all commands follow a very strict syntax. The syntax\n\t\t\trules of a programming language are similar to the grammar rules\n\t\t\tof a spoken language. The syntax of the print-command is as\n\t\t\tfollows:\n\t\t\t<tscript>\n\t\t\t\tprint("Hello World!");\n\t\t\t</tscript>\n\t\t\tWith the parentheses and double quotes, this may be a bit more\n\t\t\tthan expected, so let\'s dissect the syntax:\n\t\t\t<ul>\n\t\t\t<li>The command outputs everything inside of the parentheses.</li>\n\t\t\t<li>The double quotes tell the computer to treat\n\t\t\t\t<code>Hello World!</code> as text data, in\n\t\t\t\tcontrast to further commands, numbers, calculations and the\n\t\t\t\tlike. In programming, such values are called <i>strings</i>.\n\t\t\t\t</li>\n\t\t\t<li>The semicolon at the very end is a command delimiter. Each\n\t\t\t\tand every command ends with a semicolon.</li>\n\t\t\t</ul>\n\t\t\t</p>\n\t\t\t<div class="tutorial-exercise">\n\t\t\t<p>\n\t\t\tNow go ahead and type the above command into the editor. Refuse\n\t\t\tthe temptation to copy&amp;paste. Rather type it carefully\n\t\t\tyourself, so you are forced to pay attention to the details like\n\t\t\tparentheses, double quotes, and the semicolon. Congratulations!\n\t\t\tYou are just about to write your first program!\n\t\t\t</p>\n\t\t\t</div>\n\t\t\t<p>\n\t\t\tThe program can be run (or executed) by pressing F7, or by\n\t\t\tpressing the "Run" button with the green triangle ("play"\n\t\t\tsymbol) in the toolbar. Doing so should produce the greeting\n\t\t\t<code>Hello World!</code> as a line in the message\n\t\t\tarea.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tIf you made a mistake, usually a typo, then running the program\n\t\t\tfails. In this case you get an error message. If you did not get\n\t\t\tan error message then try removing a parenthesis, a double quote\n\t\t\tor the semicolon. Now, running the program will result in an\n\t\t\terror message. That\'s what we meant before when stating that\n\t\t\teach command follows a strict syntax.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tFor the purpose of this tutorial, use F7 or the "Run" button for\n\t\t\tcode testing. Once you are done, press the "solve task" button\n\t\t\tbelow. It will give you feedback on your code. If a test fails,\n\t\t\tthen the error message can be clicked for further details. If\n\t\t\tyou have solved the task correctly and completely, then it moves\n\t\t\ton to the next section of the tutorial. You can also skip the\n\t\t\tprogramming task by clicking the "skip task" button, or you can\n\t\t\tcheat and take a glimpse at the reference solution.\n\t\t\t</p>\n\t\t\t',correct:'print("Hello World!");',tests:[{type:"code",code:""}]},{content:'\n\t\t\t<h3>A Note on Reference Solutions</h3>\n\t\t\t<p>\n\t\t\tIn programming, there is rarely only one solution leading to the\n\t\t\tgoal. Therefore, in particular for more complex tasks, your\n\t\t\tsolution may deviate quite widely from the given reference solution.\n\t\t\tThat\'s not a problem at all! View the provided reference solution\n\t\t\tas <i>one</i> possible solution, not as the only way to go about\n\t\t\ta task. By reading reference solutions, you may however learn about\n\t\t\tbattle-proven "standard" ways of solving certain problems.\n\t\t\t</p>\n\n\t\t\t<h3>Whitespace and Comments</h3>\n\t\t\t<p>\n\t\t\tIn TScript and most other languages (with Python being a notable\n\t\t\texception), we can insert whitespace like spaces, tabulators and\n\t\t\teven newlines everywhere in between the elements of the program.\n\t\t\tFurthermore, we can add comments. Comments are ignored by the\n\t\t\tcomputer. They are intended to be read by humans, like ourselves\n\t\t\tand by our colleagues. A (line) comment starts with a rhombus\n\t\t\t(aka hashtag) and extends to the end of the line. Taken together,\n\t\t\tthis means that our first program could equally well look like this:\n\t\t\t<tscript>\n\t\t\t\t# Here comes a greeting:\n\t\t\t\tprint(              # print command\n\t\t\t\t\t"Hello World!"  # the actual greeting text as a string\n\t\t\t\t) ;\n\t\t\t</tscript>\n\t\t\t</p>\n\n\t\t\t<h2>Variation</h2>\n\t\t\t<p>\n\t\t\tThe print command is a bit boring. Who needs a computer for\n\t\t\tprinting messages to a message area?\n\t\t\t</p>\n\t\t\t<div class="tutorial-exercise">\n\t\t\t<p>Let\'s do something visually more appealing: we output the\n\t\t\tgreeting in a message box. That\'s done with the\n\t\t\t<code>alert</code> command. It has the same syntax as\n\t\t\tthe print command. Replace print with alert and see what happens.\n\t\t\t</p>\n\t\t\t</div>\n\t\t\t',correct:'alert("Hello World!");',tests:[{type:"code",code:""}]},{content:"\n\t\t\t<h2>Wrap-up</h2>\n\t\t\t<p>\n\t\t\tYou have just written your first program. Nothing\n\t\t\tfancy, just a short greeting. You could have achieved that\n\t\t\teasier by typing the greeting yourself instead of letting the\n\t\t\tprogram do the job, right? However, now the task is automated\n\t\t\tand you can run the program as often as you wish, at the press\n\t\t\tof a button!\n\t\t\t</p>\n\t\t\t"}]}},4602:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tutorial_ifelse=void 0,e.tutorial_ifelse={id:"ifelse",title:"Conditions in Programming",sections:[{content:'\n\t\t\t<p>\n\t\t\tA very common requirement in programming is to flexibly turn parts of\n\t\t\tthe code on or off, or to execute either one or the other part depending\n\t\t\ton a condition. Let\'s look at an example, the infamous FizzBuzz task.\n\t\t\tThe task is to output a range of numbers, say, <code\n\t\t\tclass="code">1:101</code>. However, if the number in question is a\n\t\t\tmultiple of 3 then "Fizz" should be printed instead of the number.\n\t\t\tAccordingly, "Buzz" shall be printed instead of numbers which are a\n\t\t\tmultiple of 5. Numbers which are a multiple of 3 and 5 at the same time\n\t\t\tshall be replaced with "FizzBuzz".\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tIt seems quite obvious that this task asks for a for-loop:\n\t\t\t<tscript>\n\t\t\tfor var n in 1:101 do\n\t\t\t{\n\t\t\t\tprint(n);\n\t\t\t}\n\t\t\t</tscript>\n\t\t\tHowever, until now all numbers are printed. What we need in addition is\n\t\t\ta way to distinguish and detect different cases, and to react\n\t\t\taccordingly. We will go for four different <i>branches</i> in our loop\n\t\t\tbody, doing the following:\n\t\t\t<ul>\n\t\t\t<li>print the number <i>n</i>,</li>\n\t\t\t<li>print "Fizz",</li>\n\t\t\t<li>print "Buzz",</li>\n\t\t\t<li>print "FizzBuzz".</li>\n\t\t\t</ul>\n\t\t\t</p>\n\t\t\t<h3>Fizz Only</h3>\n\t\t\t<p>\n\t\t\tFor the start, let\'s simplify the task a bit: we drop "Buzz" altogether,\n\t\t\tand "FizzBuzz" with it. Only two cases remain: the number is either a\n\t\t\tmultiple of 3 or not. This property can be tested with a condition\n\t\t\tinvolving the modulo operator, which computes the remainder of an\n\t\t\tinteger division: <i>n</i> is a multiple of 3 if and only if it is\n\t\t\tdivisible by 3, and that\'s the case if and only if the remainder of the\n\t\t\tdivision of <i>n</i> by 3 is 0. This condition is expressed as\n\t\t\t<code>n % 3 == 0</code>. The following happens:\n\t\t\t<ul>\n\t\t\t<li><i>n</i> is divided by 3 and the remainder of the integer\n\t\t\t\tdivision is obtained.</li>\n\t\t\t<li>The remainder is <i>compared</i> with 0 for equality. If\n\t\t\t\tit is equal then the comparison takes the value\n\t\t\t\t<code>true</code>, otherwise it results in\n\t\t\t\tthe value <code>false</code>.\n\t\t\t</ul>\n\t\t\tA comparison for equality always involves the operator <code\n\t\t\tclass="code">==</code>. This is different from the operator <code\n\t\t\tclass="code">=</code>, which triggers an assignment. The available\n\t\t\tcomparison operators are listed in the following table:\n\t\t\t</p>\n\t\t\t<table class="nicetable">\n\t\t\t<tr><th>operator</th><th>meaning</th></tr>\n\t\t\t<tr><td>==</td><td>is equal</td></tr>\n\t\t\t<tr><td>!=</td><td>is not equal</td></tr>\n\t\t\t<tr><td>&lt;</td><td>strictly less than</td></tr>\n\t\t\t<tr><td>&lt;=</td><td>less than or equal</td></tr>\n\t\t\t<tr><td>&gt;</td><td>strictly greater than</td></tr>\n\t\t\t<tr><td>&gt;=</td><td>greater than or equal</td></tr>\n\t\t\t</table>\n\t\t\t<p>\n\t\t\tThe lion\'s share of truth values created in a program is\n\t\t\tnever stored in a variable or printed out. Instead, these\n\t\t\tvalues enter a conditional statement, or\n\t\t\t<code>if</code>-<code>then</code>-<code>else</code>\n\t\t\tconstruct. This is exactly the branching tool we need to\n\t\t\tsolve our problem:\n\t\t\t<tscript>\n\t\t\tfor var n in 1:101 do\n\t\t\t{\n\t\t\t\tif n % 3 == 0\n\t\t\t\tthen print("Fizz");\n\t\t\t\telse print(n);\n\t\t\t}\n\t\t\t</tscript>\n\t\t\tWhen running this code we obtain 100 messages. Every third message reads\n\t\t\t"Fizz", while all others contain numbers. Problem solved!\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tAt a second glance, for understanding the construction we do not\n\t\t\tneed to know much about truth values. It is often more intuitive to\n\t\t\tthink of the condition itself and the object of interest, and to leave\n\t\t\tthe rest to common sense.\n\t\t\t</p>\n\t\t\t<h3>FizzBuzz</h3>\n\t\t\t<p>\n\t\t\tThere are many ways to extend our program to the general FizzBuzz case.\n\t\t\tIf you are interested in possible solutions then please consult the\n\t\t\tinternet search engine of your choice. Here, the focus is on how to\n\t\t\thandle more than two cases in general. This works as follows:\n\t\t\t<tscript>\n\t\t\tfor var n in 1:101 do\n\t\t\t{\n\t\t\t\tif n % 15 == 0 then print("FizzBuzz");\n\t\t\t\telse if n % 3 == 0 then print("Fizz");\n\t\t\t\telse if n % 5 == 0 then print("Buzz");\n\t\t\t\telse print(n);\n\t\t\t}\n\t\t\t</tscript>\n\t\t\tThe first condition of <i>n</i> being divisible by 15 happens to be\n\t\t\tmathematically equivalent to it being divisible by 3 and by 5 at the same\n\t\t\ttime. However, this may not be obvious to someone else reading our code.\n\t\t\tWe should consider adding a comment, or even better, expressing the idea\n\t\t\tmore directly:\n\t\t\t<tscript>\n\t\t\tfor var n in 1:101 do\n\t\t\t{\n\t\t\t\tif n % 3 == 0 and n % 5 == 0 then print("FizzBuzz");\n\t\t\t\telse if n % 3 == 0 then print("Fizz");\n\t\t\t\telse if n % 5 == 0 then print("Buzz");\n\t\t\t\telse print(n);\n\t\t\t}\n\t\t\t</tscript>\n\t\t\tThis may not be the most efficient and also not the most elegant\n\t\t\tsolution, but on the pro side, the intention becomes clear immediately.\n\t\t\t</p>\n\n\t\t\t<h2>Boolean Operators</h2>\n\t\t\t<p>\n\t\t\tAt this point, we have introduced a new construction: the keyword\n\t\t\t<code>and</code>. It takes two conditions and turns them\n\t\t\tinto a composite condition which is true if and only if both parts are\n\t\t\ttrue. Similarly, conditions can be combined with\n\t\t\t<code>or</code>, and a single condition can be negated with\n\t\t\t<code>not</code>. All of these keywords are known as\n\t\t\tlogical or Boolean operators (named in honor of\n\t\t\t<a target="_blank" href="https://en.wikipedia.org/wiki/George_Boole">George Boole</a>).\n\t\t\tAbove, we have argued that the and-operator creates a new condition from\n\t\t\ttwo simpler conditions. In programming, the formalization of this\n\t\t\tconcept is a bit different. The conditions remain separate. Only their\n\t\t\tresults, namely the truth values <code>true</code> and\n\t\t\t<code>false</code>, and combined with the logic operators.\n\t\t\tThat\'s one reason why it is important to understand these values as\n\t\t\tbelonging to their own data type.\n\t\t\t</p>\n\t\t\t<h2>Handling a Single Case</h2>\n\t\t\t<p>\n\t\t\tQuite often, we want to perform an operation in one case, but perform no\n\t\t\toperation whatsoever otherwise. In that case, the\n\t\t\t<code>else</code> part can simply be dropped. In fact, it\n\t\t\tis entirely optional.\n\t\t\t</p>\n\t\t\t<h2>Control Structures and Blocks</h2>\n\t\t\t<p>\n\t\t\tA conditional statement, just like a for-loop, is a <i>control\n\t\t\tstructure</i>. This term indicates that the constructs can flexibly\n\t\t\talter the <i>control flow</i>, i.e., the decision which statement is\n\t\t\texecuted next. All control structures have in common that they handle\n\t\t\tindividual statements, like the print commands found in the above\n\t\t\tFizzBuzz program. However, what if we want to execute more than one\n\t\t\tcommand in one of the cases?\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tThen we have to replace the command with a <i>block</i> of commands.\n\t\t\tWe have seen such blocks before when working with for-loops.\n\t\t\tStrictly speaking, a for-loop executes a single statement multiple\n\t\t\ttimes. However, the statement can always be replaced with a block of\n\t\t\tstatements, enclosed in curly braces. This is exactly what we called\n\t\t\tthe loop body in the previous unit. The same works with conditions:\n\t\t\t<tscript do-not-run>\n\t\t\tif value < 10 then\n\t\t\t{\n\t\t\t\tprint("The value is too small.");\n\t\t\t\tvalue = 10;\n\t\t\t}\n\t\t\t</tscript>\n\t\t\t</p>\n\t\t\t<div class="tutorial-exercise">\n\t\t\tThe function <code>prompt</code> can be used to obtain a\n\t\t\tvalue from the user, as follows:\n\t\t\t<tscript>\n\t\t\tvar s = prompt("Please enter some text!");\n\t\t\t</tscript>\n\t\t\tAfterwards, <code>s</code> contains the string entered by\n\t\t\tthe user or <code>null</code> if the user canceled the\n\t\t\tprompt dialog. Complete the program such that it outputs\n\t\t\t<code>s</code> only if the user did not cancel the\n\t\t\tinteraction.\n\t\t\t</div>\n\t\t\t',correct:'\n\t\t\tvar s = prompt("Please enter some text!");\n\t\t\tif s != null then print(s);\n\t\t\t',tests:[{type:"code",code:"",input:["Hello"]},{type:"code",code:"",input:[null]}]},{content:"\n            <h2>Wrap-up</h2>\n            <p>\n\t\t\tThe if-else-control structure makes a decision which code to execute\n\t\t\tunder certain conditions. Boolean statements are evaluated to be true or\n\t\t\tfalse and decide whether the then-case or the else-case is executed. It\n\t\t\tis possible to create conditions using comparison operators, and to\n\t\t\tcompose the conditions using logical operators.\n\t\t\t</p>\n            "}]}},8197:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tutorialData=void 0;const r=n(8090),i=n(948),a=n(9867),o=n(8866),s=n(8378),l=n(5385),c=n(4602),d=n(6469),h=n(313),u=n(2203),p=n(8319),f=n(4121),m=n(2107),g=n(4500),y=n(2618),v=n(3234),b=n(8386),w=n(2088),x=n(3370),k=n(3620);let A=new Array;A.push(r.tutorial_welcome),A.push(i.tutorial_helloworld),A.push(o.tutorial_graphics),A.push(s.tutorial_variables),A.push(a.tutorial_calculations),A.push(l.tutorial_datatypes),A.push(d.tutorial_forloop),A.push(c.tutorial_ifelse),A.push(h.tutorial_dowhile),A.push(u.tutorial_functions),A.push(p.tutorial_arrays),A.push(f.tutorial_dictionaries),A.push(m.tutorial_mutable),A.push(y.tutorial_oop),A.push(v.tutorial_inheritance),A.push(g.tutorial_events),A.push(b.tutorial_functiontype),A.push(w.tutorial_recursion),A.push(x.tutorial_anonymousfunc),A.push(k.tutorial_game),e.tutorialData=A},3234:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tutorial_inheritance=void 0,e.tutorial_inheritance={id:"inheritance",title:"Inheritance",sections:[{content:'\n\t\t\t<p>\n\t\t\tIn the previous unit we have learned about classes. With classes, we are\n\t\t\table to define our own data types. Such a type could be quite similar to\n\t\t\ta built-in type. For example, we could use a class to represent rational\n\t\t\tnumbers, also called fractions (like 4/7), as tuples of numerator and\n\t\t\tdenominator.\n\t\t\tHowever, most classes are not like that. They represent more complex\n\t\t\tentities in a program, which often correspond to objects in the real\n\t\t\tworld. We used <code>class Person</code> as an example, with objects\n\t\t\trepresenting Alice, Bob, and Charlie.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tIn the real world, categories tend to form hierarchies. For example, an\n\t\t\temployee is a person, and so is a customer (assuming end customers). The\n\t\t\tconcepts of "employee" and "customer" are both specializations of the\n\t\t\tgeneral category "person". They can be specialized further, all the way\n\t\t\tdown to an individual, which is usually represented as an object, not a\n\t\t\tcategory.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tThe same holds true for other things we may wish to manage, like goods\n\t\t\twe offer for sale in our website\'s shop. Assume that we sell furniture.\n\t\t\tThere are different types of furniture, like tables, chairs, wardrobes,\n\t\t\tshelves, beds, even whole kitchens composed of several types of quite\n\t\t\tspecialized cabinets, and so on. Depending on the type of furniture, the\n\t\t\tdifferent pieces have different properties, which shall be represented\n\t\t\tas attributes in our system. Every piece of furniture has a name, an\n\t\t\toverall size (with dimensions width, height, depth), a weight, and a\n\t\t\tprice. That\'s easy:\n\t\t\t<tscript>\n\t\t\tclass Furniture\n\t\t\t{\n\t\t\tpublic:\n\t\t\t\tconstructor(name, width, height, depth, weight, price)\n\t\t\t\t{\n\t\t\t\t\tm_name = name;\n\t\t\t\t\tm_width = width; m_height = height; m_depth = depth;\n\t\t\t\t\tm_weight = weight;\n\t\t\t\t\tm_price = price;\n\t\t\t\t}\n\n\t\t\t\tfunction name() { return m_name; }\n\t\t\t\tfunction size() { return [m_width, m_height, m_depth]; }\n\t\t\t\tfunction weight() { return m_weight; }\n\t\t\t\tfunction price() { return m_price; }\n\t\t\t\tfunction description()\n\t\t\t\t{\n\t\t\t\t\treturn m_name + ", size " + m_width + "x" + m_height + "x" + m_width\n\t\t\t\t\t\t+ ", weight " + m_weight + "kg, $" + m_price;\n\t\t\t\t}\n\n\t\t\tprivate:\n\t\t\t\tvar m_name;\n\t\t\t\tvar m_width, m_height, m_depth;\n\t\t\t\tvar m_weight;\n\t\t\t\tvar m_price;\n\t\t\t}\n\t\t\t</tscript>\n\t\t\tWe can now create a piece of furniture (an object) and output its\n\t\t\tdescription:\n\t\t\t<tscript>\n\t\t\t\tvar chair = Furniture("Solo", 48, 102, 55, 12.5, 69.95);\n\t\t\t\tprint(chair.description());\n\t\t\t</tscript>\n\t\t\tThis will print the following message:\n\t\t\t<pre>Solo, size 48x102x48, weight 12.5kg, $69.95</pre>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tFurniture also has a type, like "chair", "bed" or "cupboard". However,\n\t\t\tfurther properties like the number of compartments of a closet and the\n\t\t\tsize of the mattress of a bed (say, king size or queen size in the US\n\t\t\tsystem) make sense only if the furniture is of a certain type. So, how\n\t\t\tto represent this data in our class? Should the class contain an\n\t\t\tattribute <code>m_mattress_size</code> or rather not? If the object is\n\t\t\tnot a bed, then should that attribute simply be <code>null</code>?\n\t\t\t</p>\n\n\t\t\t<h2>Specialization</h2>\n\t\t\t<p>\n\t\t\tThe answer is that the furniture class should <i>not</i> contain that\n\t\t\tattribute. It should only include attributes that make sense for all\n\t\t\tfurniture. Instead, there should be a second class, which we may call\n\t\t\t<code>Bed</code>, and that class shall indeed contain the attribute.\n\t\t\tThe category "bed" is a specialization of the category "furniture". We\n\t\t\twill do exactly the same with the corresponding classes representing the\n\t\t\tcategories: we will create a class <code>Bed</code> which\n\t\t\t<i>specializes</i> the class <code>Furniture</code>:\n\t\t\t<tscript>\n\t\t\tclass Bed : Furniture\n\t\t\t{\n\t\t\tpublic:\n\t\t\t\tconstructor(name, width, height, depth, weight, price, mattress_size)\n\t\t\t\t: super(name, width, height, depth, weight, price)\n\t\t\t\t{\n\t\t\t\t\tm_mattress_size = mattress_size;\n\t\t\t\t}\n\n\t\t\t\tfunction mattress_size() { return m_mattress_size; }\n\n\t\t\tprivate:\n\t\t\t\tvar m_mattress_size;\n\t\t\t}\n\t\t\t</tscript>\n\t\t\tLet\'s go through this construction step by step:\n\t\t\t<ul>\n\t\t\t\t<li>After the class name <code>Bed</code>, we have used a colon and\n\t\t\t\t\tthe name of the general class <code>Furniture</code> which we\n\t\t\t\t\tspecialize. In this context, Bed is called the subclass, and\n\t\t\t\t\tFurniture is called the superclass. This tells TScript: please\n\t\t\t\t\tcopy everything from the super class into this class, so we do\n\t\t\t\t\tnot need to repeat it here.</li>\n\t\t\t\t<li>Because all members from <code>class Furniture</code> were\n\t\t\t\t\tcopied, we only need to write down in which aspects a bed\n\t\t\t\t\tdiffers from general furniture. This usually means adding a few\n\t\t\t\t\tthings, in particular the attributes that make sense only for\n\t\t\t\t\tthe more specialized concept. We therefore add the attribute\n\t\t\t\t\t<code>m_mattress_size</code> and a corresponding getter.</li>\n\t\t\t\t<li>The constructor takes a special form. Like in the superclass\n\t\t\t\t\tdefinition, we use a colon to denote that we wish to defer part\n\t\t\t\t\tof the job to the superclass. Since every bed is a piece of\n\t\t\t\t\tfurniture, and since furniture already has a constructor for\n\t\t\t\t\tinitializing its attributes, it makes sense to let that existing\n\t\t\t\t\tconstructor do its part of the initialization work. This is done\n\t\t\t\t\twith the <code>super</code> syntax. It simply calls the\n\t\t\t\t\tconstructor of the superclass. Inside of the function body of\n\t\t\t\t\tthe constructor we initialize the additional attributes.</li>\n\t\t\t</ul>\n\t\t\tThe process of copying all members from the superclass is called\n\t\t\tinheritance. We say that Bed is a subclass of Furniture, Furniture is\n\t\t\tthe superclass (or base class) of Bed, and Bed inherits Furniture. The\n\t\t\tlast statement is interesting. What we really mean is that the class Bed\n\t\t\tinherits all members of Furniture, so it also inherits its public\n\t\t\tinterface. As we can see, the subclass is free to extend the interface,\n\t\t\there by adding an additional getter.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tOn the level of objects, this means that every object of type Bed has\n\t\t\tseven attributes. Six thereof are inherited from class Furniture, and\n\t\t\tone is added by class Bed. Since the object has all properties of class\n\t\t\tFurniture, is actually <i>is</i> a piece of furniture. In particular,\n\t\t\tcode that operates on the public interface of <code>Furniture</code>\n\t\t\tworks flawlessly on an object of type <code>Bed</code>. What sounds like\n\t\t\ta pretty trivial statement is really a general guideline: inheritance in\n\t\t\tsoftware is meant to represent <i>is a</i> relations in the real world.\n\t\t\tIf you can say than every A is a B, then in software, it most probably\n\t\t\tmakes sense to model A and B as classes, where B is the superclass and A\n\t\t\tis the subclass.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tIf we had a shop selling only beds then the above construction would be\n\t\t\trather meaningless, and we could equally well have used a single class\n\t\t\t<code>Bed</code> containing the more general properties from the start.\n\t\t\tIf we also sell other types of furniture, then we will need to add more\n\t\t\tsubclasses like Table, Wardrobe, Shelf and so on, each of which adds\n\t\t\ttheir own attributes and their own public interface methods. They all\n\t\t\tshare a common base class. Like for real-world concepts, we can design\n\t\t\ta whole hierarchy of classes. For example, there may be different\n\t\t\tsub-types of wardrobes, and even the superclass Furniture may inherit a\n\t\t\tmore general <code>class Product</code>. This way, classes naturally\n\t\t\tform a tree structure.\n\t\t\t</p>\n\n\t\t\t<div class="tutorial-exercise">\n\t\t\t<p>\n\t\t\tRecall <code>class Animal</code> from the previous unit:\n\t\t\t<tscript>\n\t\t\tclass Animal\n\t\t\t{\n\t\t\tpublic:\n\t\t\t\tfunction greet()\n\t\t\t\t{ print("Hello, my name is " + m_name + "!"); }\n\n\t\t\t\tconstructor(name)\n\t\t\t\t{ m_name = name; }\n\n\t\t\t\tfunction name()\n\t\t\t\t{ return m_name; }\n\n\t\t\tprivate:\n\t\t\t\tvar m_name;\n\t\t\t}\n\t\t\t</tscript>\n\t\t\tCopy this class into the editor. Then create a subclass\n\t\t\t<code>Dog</code>. The subclass should add a new private attribute\n\t\t\t<code>m_breed</code>, a second parameter in the constructor to set the\n\t\t\tbreed, and a getter <code>function breed</code>. You should test your\n\t\t\tcode by creating a dog and printing its name and its breed.\n\t\t\t</p>\n\t\t\t</div>\n\t\t\t',correct:'\n\t\t\tclass Animal\n\t\t\t{\n\t\t\tpublic:\n\t\t\t\tfunction greet()\n\t\t\t\t{ print("Hello, my name is " + m_name + "!"); }\n\n\t\t\t\tconstructor(name)\n\t\t\t\t{ m_name = name; }\n\n\t\t\t\tfunction name()\n\t\t\t\t{ return m_name; }\n\n\t\t\tprivate:\n\t\t\t\tvar m_name;\n\t\t\t}\n\n\t\t\tclass Dog : Animal\n\t\t\t{\n\t\t\tpublic:\n\t\t\t\tconstructor(name, breed)\n\t\t\t\t: super(name)\n\t\t\t\t{ m_breed = breed; }\n\n\t\t\t\tfunction breed()\n\t\t\t\t{ return m_breed; }\n\n\t\t\tprivate:\n\t\t\t\tvar m_breed;\n\t\t\t}',tests:[{type:"code",code:'var d = Dog("Bella", "Terrier"); alert(d.name()); alert(d.breed());'}]},{content:'\n\t\t\t<h3>Overriding Superclass Behavior</h3>\n\t\t\t<p>\n\t\t\tSubclasses cannot only extend the interface of the base class, they can\n\t\t\talso alter the behavior. To see why that makes sense, let\'s create a\n\t\t\tnice bed:\n\t\t\t<tscript>\n\t\t\t\tvar someBed = Bed("Sweet Dreams", 209, 199, 72, 115, 999, "king size");\n\t\t\t\tprint(someBed.description());\n\t\t\t</tscript>\n\t\t\tWe obtain the following description:\n\t\t\t<pre>Sweet Dreams, size 209x199x209, weight 115kg, $999</pre>\n\t\t\tThis description neither tells us that we are looking at a bed, nor\n\t\t\twhich mattress size we have. This calls for an improvement. For beds, we\n\t\t\twould like to see a more specialized description. This is achieved by\n\t\t\t<i>overriding</i> the <code>description</code> method of the super\n\t\t\tclass. Inside of class Bed we add the following public method:\n\t\t\t<tscript>\n\t\t\t\tfunction description()\n\t\t\t\t{\n\t\t\t\t\tvar dim = size();\n\t\t\t\t\treturn "Bed \'" + name()\n\t\t\t\t\t\t+ "\', size " + dim[0] + "x" + dim[1] + "x" + dim[2]\n\t\t\t\t\t\t+ ", " + m_mattress_size + " mattress, weight "\n\t\t\t\t\t\t+ weight() + "kg, $" + price();\n\t\t\t\t}\n\t\t\t</tscript>\n\t\t\tCalling the same code as above, we now get the following message:\n\t\t\t<pre>Bed \'Sweet Dreams\', size 209x199x72, king size mattress, weight 115kg, $999</pre>\n\t\t\tThat\'s much better. How did that work? The class <code>Bed</code> now\n\t\t\thas two methods called <code>description</code>, on inherited from the\n\t\t\tsuper class and one own function. However, that does not cause a name\n\t\t\tcollision. Instead, the method defined in the subclass overrides the\n\t\t\tone defined in the superclass. Calling the method\'s name on an object of\n\t\t\ttype Bed always calls the more specialized method of the subclass.\n\t\t\tImagine a second subclass <code>Table</code> which decides not to\n\t\t\toverride the method, because it is not in need of a more specific\n\t\t\tdescription. Then, for an object of type Table, the method of the\n\t\t\tsuperclass is invoked.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tThe mechanism is similar to what happens in the constructor. The\n\t\t\tconstructor of the subclass first calls the constructor of the\n\t\t\tsuperclass and then runs its own function body. However, this case the\n\t\t\tdescription method of the superclass does not run at all. Sometimes it\n\t\t\tdoes already most of the job, so we may wish to use it. This works with\n\t\t\tthe keyword <code>super</code>. Here is an alternative implementation:\n\t\t\t<tscript>\n\t\t\t\tfunction description()\n\t\t\t\t{\n\t\t\t\t\tvar dim = size();\n\t\t\t\t\treturn "Bed " + super.description()\n\t\t\t\t\t\t+ ", " + m_mattress_size + " mattress";\n\t\t\t\t}\n\t\t\t</tscript>\n\t\t\tIt yields\n\t\t\t<pre>Bed Sweet Dreams, size 209x199x209, weight 115kg, $999, king size mattress</pre>\n\t\t\t</p>\n\n\t\t\t<div class="tutorial-exercise">\n\t\t\t<p>\n\t\t\tWe continue the animal example from above.\n\t\t\t<tscript>\n\t\t\tclass Animal\n\t\t\t{\n\t\t\tpublic:\n\t\t\t\tfunction greet()\n\t\t\t\t{ print("Hello, my name is " + m_name + "!"); }\n\n\t\t\t\tconstructor(name)\n\t\t\t\t{ m_name = name; }\n\n\t\t\t\tfunction name()\n\t\t\t\t{ return m_name; }\n\n\t\t\tprivate:\n\t\t\t\tvar m_name;\n\t\t\t}\n\n\t\t\tclass Dog : Animal\n\t\t\t{\n\t\t\tpublic:\n\t\t\t\tconstructor(name, breed)\n\t\t\t\t: super(name)\n\t\t\t\t{ m_breed = breed; }\n\n\t\t\t\tfunction breed()\n\t\t\t\t{ return m_breed; }\n\n\t\t\tprivate:\n\t\t\t\tvar m_breed;\n\t\t\t}\n\t\t\t</tscript>\n\t\t\tIn class Dog, override the <code>greet</code> method of the superclass\n\t\t\tso that a golden retriever called Luca greets with the following message:\n\t\t\t<pre>Woof! I am a golden retriever and my name is Luca!</pre>\n\t\t\t</p>\n\t\t\t</div>\n\t\t\t',correct:'\n\t\t\tclass Animal\n\t\t\t{\n\t\t\tpublic:\n\t\t\t\tfunction greet()\n\t\t\t\t{ print("Hello, my name is " + m_name + "!"); }\n\n\t\t\t\tconstructor(name)\n\t\t\t\t{ m_name = name; }\n\n\t\t\t\tfunction name()\n\t\t\t\t{ return m_name; }\n\n\t\t\tprivate:\n\t\t\t\tvar m_name;\n\t\t\t}\n\n\t\t\tclass Dog : Animal\n\t\t\t{\n\t\t\tpublic:\n\t\t\t\tconstructor(name, breed)\n\t\t\t\t: super(name)\n\t\t\t\t{ m_breed = breed; }\n\n\t\t\t\tfunction breed()\n\t\t\t\t{ return m_breed; }\n\n\t\t\t\tfunction greet()\n\t\t\t\t{ print("Woof! I am a " + breed() + " and my name is " + name() + "!"); }\n\n\t\t\tprivate:\n\t\t\t\tvar m_breed;\n\t\t\t}',tests:[{type:"code",code:'var d = Dog("Bella", "Terrier"); alert(d.name()); alert(d.breed()); d.greet();'}]},{content:'\n\t\t\t<h2>A Second Interface</h2>\n\t\t\t<p>\n\t\t\tNotice that the implementation of the method <code>description</code> of\n\t\t\tthe subclass <code>Bed</code> uses only the public interface of\n\t\t\t<code>class Furniture</code>. Indeed, it does not have access to its\n\t\t\tinternals, like the attribute <code>m_name</code>, since access is\n\t\t\trestricted to code inside of the superclass. At times, that can be quite\n\t\t\tinconvenient. A subclass may need access to internals. We can then\n\t\t\textend the public interface, but that gives everyone more access, which\n\t\t\tis not what we want.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tSince giving extra power to subclasses is a common demand, object\n\t\t\toriented programming offers a solution to that problem. It comes in the\n\t\t\tform of a new visibility specified, called <code>protected</code>. A\n\t\t\tprotected member is invisible to code using the class, like a private\n\t\t\tmember. However, it is visible from within a subclass (and the\n\t\t\tsubclasses thereof), like a public member. The following table\n\t\t\tsummarizes the effects of the three visibilities:\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\t<table class="nicetable">\n\t\t\t\t\t<tr><th>visibility</th><th>public</th><th>protected</th><th>private</th></tr>\n\t\t\t\t\t<tr><th>within the class</th><td>yes</td><td>yes</td><td>yes</td></tr>\n\t\t\t\t\t<tr><th>within subclasses</th><td>yes</td><td>yes</td><td>no</td></tr>\n\t\t\t\t\t<tr><th>everywhere</th><td>yes</td><td>no</td><td>no</td></tr>\n\t\t\t\t</table>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tA class effectively defines two interfaces: a public interface for\n\t\t\tgeneral use, and an extended interface for use only by subclasses,\n\t\t\tintended to extend the class. The interface for subclasses consists of\n\t\t\tall public and protected methods. For example, we may decide that all\n\t\t\tsubclasses get direct access to all attributes. This can be done by\n\t\t\tmaking all attributes protected. That\'s usually not a good idea though.\n\t\t\tInstead, we should keep interfaces minimal and stable, since exposing\n\t\t\timplementation details to subclasses bears the same problems in\n\t\t\tprinciple as exposing them to the public.\n\t\t\t</p>\n\n\t\t\t<h3>Communication between superclass and subclass</h3>\n\t\t\t<p>\n\t\t\tBy means of protected members, a subclass gets a direct channel for\n\t\t\t"talking" to its superclass (by invoking methods). Sometimes there is\n\t\t\talso a need for doing things the other way round. Say, we would like to\n\t\t\tadd a method <code>function html()</code> to class Furniture, which\n\t\t\tcreates an html snippet for our website. We could implement a basic\n\t\t\tversion of that function and override it in each subclass. However, that\n\t\t\twould be a duplication of efforts, since we already have a description\n\t\t\tmethod for that purpose.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tInstead, we decide that the <code>html()</code> method should wrap the\n\t\t\talready existing description and present it as html code. We will not\n\t\t\tgo into the details of how to do this properly (i.e., replace special\n\t\t\thtml characters), but simply wrap the description in a paragraph tag\n\t\t\twith CSS class "description" so that it can be styled as we wish. The\n\t\t\thtml function in the superclass could look like this:\n\t\t\t<tscript>\n\t\t\t\tfunction html()\n\t\t\t\t{\n\t\t\t\t\treturn "<p class=\\"description\\">"\n\t\t\t\t\t\t+ description()\n\t\t\t\t\t\t+ "</p>";\n\t\t\t\t}\n\t\t\t</tscript>\n\t\t\tHowever, to our surprise, it outputs the following message:\n\t\t\t<pre>&lt;p class="description">Sweet Dreams, size 209x199x209, weight 115kg, $999&lt;/p></pre>\n\t\t\tWhere is the mattress size? For some reason, the superclass method\n\t\t\t<code>description</code> was called, not the subclass method. Somehow,\n\t\t\tthe communication from superclass down to the subclass did not work out\n\t\t\tas intended. The reason is that the name <code>description</code> is\n\t\t\tlooked up <i>statically</i>, and it is found inside of the class, so the\n\t\t\tcorresponding method is called. But what we want here is to call the\n\t\t\tmethod of the same name in the subclass. This requires a <i>dynamic</i>\n\t\t\tname lookup, and that\'s a lookup at runtime. It is only at runtime that\n\t\t\tfunction <code>html()</code> can know that the object it is called upon\n\t\t\tis of type Bed, and not of type Table, Wardrobe or whatever.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tDynamic lookup is exactly what is performed by the dot-syntax. That\'s\n\t\t\talso why in our previous examples the correct function was called. The\n\t\t\tsolution is therefore to invoke <code>description()</code> using the\n\t\t\tdot-syntax inside of the <code>html()</code> method:\n\t\t\t<tscript>\n\t\t\t\tfunction html()\n\t\t\t\t{\n\t\t\t\t\treturn "<p class=\\"description\\">"\n\t\t\t\t\t\t+ this.description()\n\t\t\t\t\t\t+ "</p>";\n\t\t\t\t}\n\t\t\t</tscript>\n\t\t\tWe obtain the correct html:\n\t\t\t<pre>&lt;p class="description">Bed \'Sweet Dreams\', size 209x199x72, king size mattress, weight 115kg, $999&lt;/p></pre>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tIn short: subclasses can call public methods of superclasses. In\n\t\t\taddition a subclass can provide them an additional interface in the form\n\t\t\tof <code>protected</code> members. When communicating the other way\n\t\t\tround, which means that the superclass aims to call a method overridden\n\t\t\tby a subclass, a public member called with the dot-syntax does the job.\n\t\t\t</p>\n\n\t\t\t<h2>Composition of Objects</h2>\n\t\t\t<p>\n\t\t\tBeyond inheritance representing <i>is a</i> relationships (hierarchy),\n\t\t\tobjects often form other relations like <i>consists of</i> or similar\n\t\t\ttypes of links, often between objects of unrelated class. For example, a\n\t\t\tshopping cart object may refer to a whole list of furniture. That does\n\t\t\tnot mean that <code>class ShoppingCart</code> and <code>class\n\t\t\tFurniture</code> have a formal relation in term of inheritance. The\n\t\t\tshopping cart will most likely simply have an attribute holding an array\n\t\t\tof furniture. In software engineering, such relations are often looked\n\t\t\tat together, forming complex diagrams. However, in terms of programming\n\t\t\tlanguage support, the inheritance relation is special, in that it\n\t\t\trequires quite a bit of machinery, while other relations like\n\t\t\tcomposition are naturally expressed simply by managing attributes.\n\t\t\t</p>\n\n\t\t\t<h2>Wrap-up</h2>\n\t\t\t<p>\n\t\t\tInheritance allows to represent hierarchical relations of categories.\n\t\t\tA class represents all objects of a category, and its superclass\n\t\t\trepresents the objects of a more abstract category. Modeling objects of\n\t\t\tthe real world like this is the core idea of object oriented\n\t\t\tprogramming.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tInheritance represents an <i>is a</i> relationship. It is realized by\n\t\t\tsimply copying all members of the superclass into the subclass. This\n\t\t\tavoids code duplication and it is quite flexible, since the subclass can\n\t\t\textend the interface of the superclass. It can even alter its behavior\n\t\t\tby overriding methods, which helps to specialize categories in a\n\t\t\tmeaningful way. Finally, we have seen how classes can communicate along\n\t\t\tthe class hierarchy by overriding methods and calling these overrides\n\t\t\tdynamically at runtime.\n\t\t\t</p>\n\t\t\t'}]}},2107:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tutorial_mutable=void 0,e.tutorial_mutable={id:"mutable",title:"Mutable Values",sections:[{content:'\n\t\t\t<p>\n\t\t\tIn TScript and most other scripting languages (like Javascript and\n\t\t\tPython), a value can be <i>mutable</i> or <i>immutable</i>. Whether a\n\t\t\tvalue is mutable or not depends on its type. All types we encountered\n\t\t\tbefore we saw containers are immutable. This means that values cannot\n\t\t\tbe changed. Example:\n\t\t\t<tscript>\n\t\t\t\tvar n = 5;\n\t\t\t\tn += 2;\n\t\t\t</tscript>\n\t\t\tIn this program, the value 5 is created and stored in the variable\n\t\t\t<code>n</code>. Now it seems that in the second line the value is\n\t\t\t<i>altered</i> by adding 2, resulting in 7. However, that is not what\'s\n\t\t\thappening! The second line is just a shorthand for\n\t\t\t<tscript>\n\t\t\t\tn = n + 2;\n\t\t\t</tscript>\n\t\t\tThe following happens: TScript computes <code>n + 2</code>, resulting in\n\t\t\tthe new value 7. Now there are three values in the program, namely 5, 2,\n\t\t\tand 7. Then the assignment is executed. Its effect is that a new value\n\t\t\tis assigned to <code>n</code>, namely the value 7. The other values are\n\t\t\tstill around, and importantly, never changed. In short, even operators\n\t\t\tlike <code>+=</code> do not change existing values. They perform a\n\t\t\tcalculation, resulting in a new value, and then assign that value to a\n\t\t\tvariable.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tWhy is that important? Let\'s look at the following program:\n\t\t\t<tscript>\n\t\t\t\tvar n = 5;\n\t\t\t\tvar k = n;\n\t\t\t\tn += 2;\n\t\t\t\tprint(k);       # prints 5 (not 7)\n\t\t\t</tscript>\n\t\t\tThat\'s expected. We would be very irritated if the output had been 7,\n\t\t\tsince the variable n was changed, not k. Although this looks trivial,\n\t\t\tlet\'s recap in detail what happened:\n\t\t\t<ul>\n\t\t\t\t<li>We assign the integer 5 to the variable n. This means that n\n\t\t\t\t\treferences the integer 5.</li>\n\t\t\t\t<li>The variable k is created. It references the same value. At\n\t\t\t\t\tthis point there are two variables, but only a single value.\n\t\t\t\t\tTake note of this point, it will become very important soon.</li>\n\t\t\t\t<li>The compound assignment <code>n += 2;</code> creates the new\n\t\t\t\t\tvalue 7 and assigns it to n. The variable k still references\n\t\t\t\t\tthe old value 5.</li>\n\t\t\t\t<li>The print statement outputs the value referenced by k, which\n\t\t\t\t\tis 5.</li>\n\t\t\t</ul>\n\t\t\tThe effect is exactly the same as if variables would contain values,\n\t\t\tand if assignment meant to write a new independent copy of a value into\n\t\t\tthe variable. However, we have seen that different mechanisms are at\n\t\t\tplay.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tNow consider this quite similar program:\n\t\t\t<tscript>\n\t\t\t\tvar a = [5];\n\t\t\t\tvar b = a;\n\t\t\t\ta.push(2);\n\t\t\t\tprint(b);       # prints [5,2] (not [5])\n\t\t\t</tscript>\n\t\t\tWhat the heck happened to the variable b? We modified a, but b changed\n\t\t\ttoo! Let\'s have a detailed look at what just happened:\n\t\t\t<ul>\n\t\t\t\t<li>We assign the array <code>[5]</code> to the variable a. This\n\t\t\t\t\tmeans that a references the array. The array contains one item.\n\t\t\t\t\tHence, it references the value 5. At this point, there exist two\n\t\t\t\t\tvalues, namely <code>5</code> and <code>[5]</code>.</li>\n\t\t\t\t<li>The variable b is created. It references the same array as the\n\t\t\t\t\tvariable a. Like in the example above, the second line does not\n\t\t\t\t\tcreate an independent copy of the value referenced by a.\n\t\t\t\t\tInstead, both variables reference the same array.</li>\n\t\t\t\t<li>The command <code>a.push(2);</code> <i>alters</i> the value\n\t\t\t\t\treferenced by a! It does <i>not</i> create a new value (as the\n\t\t\t\t\tcompound assignment in the first program did). There is still\n\t\t\t\t\tonly a single array value in our program, and that value is\n\t\t\t\t\treferenced by a and b. However, the array itself changes. After\n\t\t\t\t\tthe command, it holds two items, referencing the integers 5 and\n\t\t\t\t\t2. Therefore, a and b both refer to the array\n\t\t\t\t\t<code>[5,2]</code>. Magically, without even mentioning the\n\t\t\t\t\tvariable b, its value has changed! That\'s actually accurate.\n\t\t\t\t\tIt still refers to the same value, but since the value is\n\t\t\t\t\tmutable, it can change at any time.</li>\n\t\t\t\t<li>The print statement outputs the array, which is still the only\n\t\t\t\t\tarray in the program, and hence prints <code>[5,2]</code>.</li>\n\t\t\t</ul>\n\t\t\tThe same works with dictionaries, which are also mutable values:\n\t\t\t<tscript>\n\t\t\t\tvar d1 = {};\n\t\t\t\tvar d2 = d1;\n\t\t\t\td1["foo"] = "bar";\n\t\t\t\tprint(d2);       # prints {foo:bar} (not {})\n\t\t\t</tscript>\n\t\t\tArguably, the fact that variables do not "contain" but only "reference"\n\t\t\tvalues, and the effect that changing a value through one variable\n\t\t\tnaturally affects all other variables referencing the same value, is not\n\t\t\talways the expected behavior. It is therefore a common source of bugs,\n\t\t\tand programming beginners should pay special attention.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tIn some situations the behavior of referencing instead of copying is not\n\t\t\tdesired. If a copy is needed, then the so-called constructor syntax can\n\t\t\tbe used:\n\t\t\t<tscript>\n\t\t\t\tvar a = [5];\n\t\t\t\tvar b = a;          # reference to the same array\n\t\t\t\tvar c = Array(a);   # copy of the array, so now we have a second independent array\n\t\t\t\ta.push(2);          # alter the first array\n\t\t\t\tprint(a);           # prints [5,2]\n\t\t\t\tprint(b);           # prints [5,2]\n\t\t\t\tprint(c);           # prints [5]\n\t\t\t</tscript>\n\t\t\tAgain, the same works with dictionaries. For nested containers, the\n\t\t\tabove solution copies only the top level:\n\t\t\t<tscript>\n\t\t\t\tvar data = {\n\t\t\t\t\t\tplayers: [\n\t\t\t\t\t\t\t{name: "Tom", console: "PC"},\n\t\t\t\t\t\t\t{name: "Tim", console: "PS"}\n\t\t\t\t\t\t]\n\t\t\t\t\t};\n\t\t\t\tvar copy = Dictionary(data);\n\t\t\t\tcopy["players"][0]["console"] = "none";\n\t\t\t\tprint(data["players"][0]["console"]);   # prints none\n\t\t\t</tscript>\n\t\t\t</p>\n\t\t\tWhy is that? Because <code>data["players"]</code> and\n\t\t\t<code>copy["players"]</code> are still references, referencing the same\n\t\t\tarray. If we want to copy a whole hierarchy of containers then we need\n\t\t\tto use the <code>deepcopy</code> function:\n\t\t\t<tscript>\n\t\t\t\tvar data = {\n\t\t\t\t\t\tplayers: [\n\t\t\t\t\t\t\t{name: "Tom", console: "PC"},\n\t\t\t\t\t\t\t{name: "Tim", console: "PS"}\n\t\t\t\t\t\t]\n\t\t\t\t\t};\n\t\t\t\tvar copy = deepcopy(data);\n\t\t\t\tcopy["players"][0]["console"] = "none";\n\t\t\t\tprint(data["players"][0]["console"]);   # prints PC\n\t\t\t</tscript>\n\n\t\t\t<h2>Wrap-up</h2>\n\t\t\t<p>\n\t\t\tWe have seen a major twist that comes with all containers: they are\n\t\t\tmutable values. This is where we see clearly that a variable references\n\t\t\ta value, in contrast to containing (an independent copy of) the value.\n\t\t\tThe effect can be quite unintuitive at first. It can easily result in\n\t\t\tsubtle bugs.\n\t\t\t</p>\n\t\t\t'}]}},2618:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tutorial_oop=void 0,e.tutorial_oop={id:"oop",title:"Object-oriented Programming",sections:[{content:'\n\t\t\t<p>\n\t\t\tRecall how we had previously solved the phone book problem with a\n\t\t\tdictionary. Using names as keys, we associated a phone number with\n\t\t\teach name. Now let\'s extend the program to an address book. Next to\n\t\t\tthe phone number we would like to store a postal address and an email\n\t\t\taddress. Of course, we could add even more fields, like a homepage,\n\t\t\tsocial media channels, and what not.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tHow should we represent such data? One option is to use one dictionary\n\t\t\tper field:\n\t\t\t<tscript>\n\t\t\t\tvar phone_number = {};\n\t\t\t\tvar postal_address = {};\n\t\t\t\tvar email_address = {};\n\t\t\t</tscript>\n\t\t\tThat\'s cumbersome, and it has the same problem we were aiming to solve\n\t\t\twith the dictionary: the various fields are disconnected. They reside in\n\t\t\tindependent containers, and they are connected only through a common\n\t\t\tkey.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tIt would be much better to use a single dictionary with the ability to\n\t\t\tassociate multiple values with a name. Well, we could use an array to\n\t\t\thold multiple values, maybe like this:\n\t\t\t<tscript>\n\t\t\t\tvar address_book = {};\n\t\t\t\taddress_book["Alice"] = [\n\t\t\t\t\t\t1234567,\n\t\t\t\t\t\t"Example Street 1001",\n\t\t\t\t\t\t"alice@example.com"\n\t\t\t\t\t];\n\t\t\t</tscript>\n\t\t\tThat works, but it has another downside. Let\'s write an email to Alice.\n\t\t\tTo obtain the address, we do the following:\n\t\t\t<tscript>\n\t\t\t\tvar e = address_book["Alice"][2];\n\t\t\t</tscript>\n\t\t\tIf we read that line of code in a few days in the future then we will\n\t\t\tmost probably have forgotten the significance of the index 2.\n\t\t\tThat\'s not good. We can improve by nesting dictionaries:\n\t\t\t<tscript>\n\t\t\t\tvar address_book = {};\n\t\t\t\taddress_book["Alice"] = {\n\t\t\t\t\t\t"phone": 1234567,\n\t\t\t\t\t\t"address": "Example Street 1001",\n\t\t\t\t\t\t"email": "alice@example.com"\n\t\t\t\t\t};\n\t\t\t</tscript>\n\t\t\tand then later on\n\t\t\t<tscript>\n\t\t\t\tvar e = address_book["Alice"]["email"];\n\t\t\t</tscript>\n\t\t\tThat\'s already pretty good! The only remaining problem is that entries\n\t\t\tin our address book are not forced to have a fixed data layout. Some\n\t\t\tpeople may have a field called "email", others may have "private email",\n\t\t\tand others again some fields we defined years ago and forgot about.\n\t\t\tIdeally, all entries in the address book would be homogeneous, so that\n\t\t\tthe same graphical user interface works for all of them. It is\n\t\t\tunderstood that our program can make sure that only a fixed number of\n\t\t\tkeys is used, but that\'s error prone, in particular if we change our\n\t\t\tmind or extend the functionality.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tGenerally speaking, variable-sized containers like arrays and\n\t\t\tdictionaries work best for homogeneous data, like multiple persons.\n\t\t\tWith homogeneous we mean that two persons should always be described by\n\t\t\tthe same attributes, like all rows in a spreadsheet cover the same\n\t\t\tcolumns. In contrast, the data describing a single person is\n\t\t\theterogeneous: the name is a string, the phone number could be an\n\t\t\tinteger, and age may be any number (usually we only care for integers),\n\t\t\tand so on. Even if we use strings for everything, the meanings of fields\n\t\t\tlike "postal address" and "email" is very different. This is what we\n\t\t\tcall heterogeneous data. For heterogeneous data, the set of valid keys\n\t\t\tis usually pre-defined (it does not change at runtime), and so is the\n\t\t\tmeaning of the keys.\n\t\t\t</p>\n\n\t\t\t<h2>Classes and Objects</h2>\n\t\t\t<p>\n\t\t\tIn programming, there is a special container for heterogeneous data: the\n\t\t\t<i>object</i>. In its simplest form, an object is just a collection of\n\t\t\tattributes, with a fixed layout:\n\t\t\t<tscript>\n\t\t\tclass Person\n\t\t\t{\n\t\t\tpublic:\n\t\t\t\tvar first_name;\n\t\t\t\tvar last_name;\n\t\t\t\tvar phone;\n\t\t\t\tvar address;\n\t\t\t\tvar email;\n\t\t\t}\n\t\t\t</tscript>\n\t\t\tThe <code>class</code> is a specification of the data layout. We should\n\t\t\tthink of it as a <i>blueprint</i> for objects of type\n\t\t\t<code>Person</code>. Indeed, this is more than mere analogy: a class\n\t\t\t<i>is</i> a data type, and objects are values of this type. Let\'s\n\t\t\tcreate an object:\n\t\t\t<tscript>\n\t\t\t\tvar p = Person();\n\t\t\t\tp.first_name = "Alice";\n\t\t\t\tp.last_name = "Example";\n\t\t\t\tp.phone = 1234567;\n\t\t\t\tp.address = "Example Street 1001";\n\t\t\t\tp.email = "alice@example.com";\n\t\t\t</tscript>\n\t\t\tThe first line creates a new object of type (of class) Person. The five\n\t\t\tfollowing lines fill in its attributes. In essence, our object is a\n\t\t\tcollection of five variables. Variables inside of an object are often\n\t\t\tcalled <i>attributes</i>. The variables are accessed with the\n\t\t\tdot-operator (e.g., <code>p.phone</code>).\n\t\t\tAn attempt to add further fields to the object fails:\n\t\t\t<tscript>\n\t\t\t\tp.birthday = "July 20";\n\t\t\t\t# error: type \'Person\' does not have a public member \'birthday\'\n\t\t\t</tscript>\n\t\t\tThe most important point here is that for a single class there can be an\n\t\t\tarbitrary number of objects. Let\'s create another one:\n\t\t\t<tscript>\n\t\t\t\tvar p2 = Person();\n\t\t\t\tp2.first_name = "Bob";\n\t\t\t\tp2.last_name = "Example";\n\t\t\t\tp2.phone = 55667788;\n\t\t\t\tp2.address = "Example Street 42";\n\t\t\t\tp2.email = "bob@example.com";\n\t\t\t</tscript>\n\t\t\tThis works just like with every other data type: there is only a single\n\t\t\ttype <code>String</code>, but there are many possible strings (values).\n\t\t\tThe same applies to classes and objects: a class is a data type, and\n\t\t\tthere may be arbitrarily many objects of that type. In our application,\n\t\t\tthere is only one layout definition for a person, but we may store any\n\t\t\tnumber of persons in the address book.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tWith these properties, objects are the ideal solution to our problem. We\n\t\t\tcan store all persons in a container (either array or dictionary), and\n\t\t\tthat makes sense since the items are homogeneous. Each item is a\n\t\t\t<code>Person</code> (to be precise: an object of type\n\t\t\t<code>Person</code>), which itself holds heterogeneous data with a fixed\n\t\t\tdata layout consisting of five well-defined attributes. We cannot change\n\t\t\tthat data layout at runtime. Of course, when changing the program we can\n\t\t\textend the class definition, say, by adding a <code>birthday</code>\n\t\t\tattribute. The good thing is that then all persons have that new\n\t\t\tattribute, so they stay homogeneous, and the same processing will work\n\t\t\tfor all persons.\n\t\t\t</p>\n\t\t\t<div class="tutorial-exercise">\n\n\t\t\t<p>\n\t\t\tCreate a class <code>Animal</code> with attribute <code>name</code>.\n\t\t\t</p>\n\t\t\t</div>\n\t\t\t',correct:"\n\t\t\tclass Animal\n\t\t\t{\n\t\t\tpublic:\n\t\t\t\tvar name;\n\t\t\t}",tests:[{type:"code",code:'var a = Animal(); a.name = "Donald Duck"; print(a.name);'}]},{content:'\n\t\t\t<h2>Methods</h2>\n\t\t\t<p>\n\t\t\tIt turns out that classes can do much more than defining attributes.\n\t\t\tThe concept is so powerful that some languages (like Java) are built\n\t\t\tentirely on top of classes. Beyond attributes, the second most useful\n\t\t\tconcept of classes are <i>methods</i>. At this point we should get used\n\t\t\tto the fact that in the field called object-oriented programming, there\n\t\t\tare many terms, and many of them seemingly duplicate concepts, which\n\t\t\talready have a name. We have simply rebranded a type as a class and a\n\t\t\tvariable as an attribute. Similarly, a method is a function.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tThe idea of a method is that there are operations on data types, and\n\t\t\tthat these operations should be "bound" to the class. For example,\n\t\t\tarrays can be sorted with the function <code>sort</code>. This is an\n\t\t\texample of a method. The method operates on exactly one array at a time.\n\t\t\tFor an array <code>a</code> it is called with the syntax\n\t\t\t<code>a.sort()</code>. We recognize the dot-operator, which is also used\n\t\t\tfor accessing attributes. Alternatively, the sorting functionality could\n\t\t\tbe implemented as a normal function, called like this:\n\t\t\t<code>sort(a)</code>. Would that make a big difference? Well, in the\n\t\t\tlatter case, nothing tells us that only arrays can be sorted. We could\n\t\t\ttry with a dictionary and probably fail. The whole point of making\n\t\t\t<code>sort</code> a method is to say: "Dear fellow programmer (or future\n\t\t\tself), the function <code>sort</code> is a method of class\n\t\t\t<code>Array</code> because it sorts arrays, and nothing else."\n\t\t\tIf there is another class that needs sorting then we can add a\n\t\t\t(different) sort method to that class, too. The mechanism of binding\n\t\t\toperations to datatypes on which they operate can help a lot with\n\t\t\tkeeping a large program organized and readable.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tDefining a class means to define our own data type. Defining a method\n\t\t\tmeans to define a function <i>within</i> that class. Let\'s define a\n\t\t\tsimple method that returns the full name of a person:\n\t\t\t<tscript>\n\t\t\tclass Person\n\t\t\t{\n\t\t\tpublic:\n\t\t\t\tvar first_name;\n\t\t\t\tvar last_name;\n\t\t\t\tvar phone;\n\t\t\t\tvar address;\n\t\t\t\tvar email;\n\n\t\t\t\tfunction full_name()\n\t\t\t\t{\n\t\t\t\t\treturn first_name + " " + last_name;\n\t\t\t\t}\n\t\t\t}\n\t\t\t</tscript>\n\t\t\tGiven a variable <code>p</code> referring to a person, the method is\n\t\t\tused as follows:\n\t\t\t<tscript>\n\t\t\t\tprint(p.full_name());   # may print: Alice Example\n\t\t\t</tscript>\n\t\t\tThe functionality of adding the strings is pretty simple. However, it\n\t\t\tis worthwhile to point out a few interesting aspects:\n\t\t\t<ul>\n\t\t\t\t<li>The method resides inside of the class body alongside the\n\t\t\t\t\tattributes. Attributes and methods are both "contained" in the\n\t\t\t\t\tclass. Jointly, they are called <i>members</i> of the class.</li>\n\t\t\t\t<li>A method is called on an object with the dot-operator. This is\n\t\t\t\t\tthe same as accessing an attribute.</li>\n\t\t\t\t<li>Within the class (and hence within the method), attributes can\n\t\t\t\t\tbe accessed by simply writing out their names. There is no need\n\t\t\t\t\tto use the dot operator, since the object itself is already\n\t\t\t\t\tspecified when invoking the method. The same holds when calling\n\t\t\t\t\ta method from within another method of the same class.</li>\n\t\t\t</ul>\n\t\t\tOtherwise, methods are just normal functions. They can have default\n\t\t\tparameters, implement any sub-program, and return a value.\n\t\t\t</p>\n\n\t\t\t<h3>Constructors</h3>\n\t\t\t<p>\n\t\t\tA <i>constructor</i> is a special method. It cannot be called like a\n\t\t\tfunction. Instead, it is called whenever a new object of the class is\n\t\t\tcreated. It is declared with the keyword <code>constructor</code>\n\t\t\tinstead of <code>function</code>, and it does not have a name:\n\t\t\t<tscript>\n\t\t\tclass Person\n\t\t\t{\n\t\t\tpublic:\n\t\t\t\tvar first_name;\n\t\t\t\tvar last_name;\n\t\t\t\tvar phone;\n\t\t\t\tvar address;\n\t\t\t\tvar email;\n\n\t\t\t\tconstructor(first, last, phone=null, address=null, email=null)\n\t\t\t\t{\n\t\t\t\t\tfirst_name = first;\n\t\t\t\t\tlast_name = last;\n\t\t\t\t\tthis.phone = phone;\n\t\t\t\t\tthis.address = address;\n\t\t\t\t\tthis.email = email;\n\t\t\t\t}\n\n\t\t\t\tfunction full_name()\n\t\t\t\t{\n\t\t\t\t\treturn first_name + " " + last_name;\n\t\t\t\t}\n\t\t\t}\n\t\t\t</tscript>\n\t\t\tAs we can see, a constructor can have parameters. This has consequences\n\t\t\tfor object construction: we need to provide the corresponding\n\t\t\tparameters:\n\t\t\t<tscript>\n\t\t\t\tvar p = Person("Alice", "Example", email="alice@example.com");\n\t\t\t</tscript>\n\t\t\tThis looks pretty convenient though, and indeed, it is. The role of the\n\t\t\tconstructor is to initialize a new object so that we do not need to set\n\t\t\tall of its attributes one by one.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tThere is one more particularity to notice in the above code: the use of\n\t\t\t<code>this</code>. The keyword refers to the object on which a method\n\t\t\twas called. Within the constructor, that\'s the newly created object.\n\t\t\tWe see that it allows us to refer to the attribute "phone" although a\n\t\t\tparameter of the same name exists, which would otherwise shadow the\n\t\t\tattribute.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tA brief note on name resolution inside of methods: a name is first\n\t\t\tmatched with all local variables (including parameters), then with all\n\t\t\tmembers (attributes and methods), and then with global names (variables,\n\t\t\tfunctions, classes).\n\t\t\t</p>\n\n\t\t\t<div class="tutorial-exercise">\n\t\t\t<p>\n\t\t\tExtend the above class <code>Animal</code> by a constructor taking a\n\t\t\tsingle argument to initialize the name, and a method <code>greet()</code>\n\t\t\twhich prints the text</p>\n\t\t\t<p><code>"Hello, my name is <...>!"</code></p>\n\t\t\t</p>where the animal\'s name shall be printed instead of <code><...></code>.\n\t\t\t</p>\n\t\t\t</div>\n\t\t\t',correct:'\n\t\t\tclass Animal\n\t\t\t{\n\t\t\tpublic:\n\t\t\t\tvar name;\n\t\t\t\tfunction greet()\n\t\t\t\t{\n\t\t\t\t\tprint("Hello, my name is " + name + "!");\n\t\t\t\t}\n\t\t\t\tconstructor(theName)\n\t\t\t\t{\n\t\t\t\t\tname = theName;\n\t\t\t\t}\n\t\t\t}',tests:[{type:"code",code:'var a = Animal("Donald Duck"); a.greet(); a.name = "Daisy Duck"; print(a.name);'}]},{content:'\n\t\t\t<div class="tutorial-exercise">\n\t\t\t<p>\n\t\t\tExtend the program further. Create an array <code>var mice</code>\n\t\t\tcontaining two animals called "Mickey" and "Minnie".\n\t\t\tUse a loop to make each of them say their greeting.\n\t\t\t</p>\n\t\t\t</div>\n\t\t\t',correct:'\n\t\t\tclass Animal\n\t\t\t{\n\t\t\tpublic:\n\t\t\t\tvar name;\n\t\t\t\tfunction greet()\n\t\t\t\t{\n\t\t\t\t\tprint("Hello, my name is " + name + "!");\n\t\t\t\t}\n\t\t\t\tconstructor(theName)\n\t\t\t\t{\n\t\t\t\t\tname = theName;\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar mice = [Animal("Mickey"), Animal("Minnie")];\n\t\t\tfor var mouse in mice do mouse.greet();\n\t\t\t'},{content:'\n\t\t\t<h2>Visibility</h2>\n\t\t\t<p>\n\t\t\tEach member of a class has a <i>visibility</i> attached. We have already\n\t\t\tseen a visibility type, that\'s the line <code>public:</code> which we\n\t\t\tdid not discuss yet. You may have wondered about its role, so here it is.\n\t\t\tAll declarations following <code>public</code> have public visibility.\n\t\t\tThis means that they are accessible from everywhere, and the important\n\t\t\tbit of it is that they are accessible from <i>outside</i> of the class.\n\t\t\tThe alternative is private visibility. A private attribute or method is\n\t\t\tvisible only from <i>within</i> the class. This means in particular that\n\t\t\tevery attempt to access a private member with the dot-syntax fails. In\n\t\t\tother words, we need to update our understanding of the dot-syntax: with\n\t\t\tthe syntax object.member, we can access a <i>public</i> member of an\n\t\t\tobject.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tMaking a member private is easy. In fact, it is not uncommon to make all\n\t\t\tattributes private. Let\'s try that:\n\t\t\t<tscript>\n\t\t\tclass Person\n\t\t\t{\n\t\t\tprivate:\n\t\t\t\tvar first_name;\n\t\t\t\tvar last_name;\n\t\t\t\tvar phone;\n\t\t\t\tvar address;\n\t\t\t\tvar email;\n\n\t\t\tpublic:\n\t\t\t\tconstructor(first, last, phone=null, address=null, email=null)\n\t\t\t\t{\n\t\t\t\t\tfirst_name = first;\n\t\t\t\t\tlast_name = last;\n\t\t\t\t\tthis.phone = phone;\n\t\t\t\t\tthis.address = address;\n\t\t\t\t\tthis.email = email;\n\t\t\t\t}\n\n\t\t\t\tfunction full_name()\n\t\t\t\t{\n\t\t\t\t\treturn first_name + " " + last_name;\n\t\t\t\t}\n\t\t\t}\n\t\t\t</tscript>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tThe following program still works:\n\t\t\t<tscript>\n\t\t\tvar p = Person("Alice", "Example", email="alice@example.com");\n\t\t\tprint(p.full_name());\n\t\t\t</tscript>\n\t\t\tHowever, the following does not:\n\t\t\t<tscript>\n\t\t\tvar p = Person("Alice", "Example", email="alice@example.com");\n\t\t\tprint(p.email);\n\t\t\t</tscript>\n\t\t\tThis is because <code>full_name</code> is a public member (the fact\n\t\t\tthat it is a function and not a variable has nothing to do with this),\n\t\t\twhile <code>email</code> is a private member.\n\t\t\t</p>\n\n\t\t\t<h3>The Public Interface</h3>\n\t\t\t<p>\n\t\t\tThis is all nice and good &mdash; but why should we do that? It seems\n\t\t\tthat making the attributes private makes our lives unnecessarily\n\t\t\tcomplicated, since now we cannot access email addresses and more. What\n\t\t\tdo we do if we want to write an email to Alice?\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tThe answer to that question has two parts. The first part is that we\n\t\t\tneed to extend the class further, so that the email can be accessed\n\t\t\tagain. As a nice side effect, we get finer control over the access. The\n\t\t\tsecond part is that this allows us to separate what is called the\n\t\t\t<i>interface</i> of a person (of the class Person) from its\n\t\t\t<i>implementation</i>.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tThe interface consists of all public members. This is how the outside\n\t\t\tworld interacts with a person. For designing an interface, we need to\n\t\t\tthink of all possible tasks. For this, the user of the class shall now\n\t\t\twhich methods are available, but they should not need to know anything\n\t\t\tabout <i>how</i> they work. One such task is writing an email. There\n\t\t\tare several options for interface design. One is to add a\n\t\t\t<code>writeEmailTo</code> method. However, one may then ask whether\n\t\t\tsending an email should be the job of a <code>Person</code> class or\n\t\t\tnot, and probably decide that the functionality does not belong into an\n\t\t\taddress book application. We will opt for a simpler and more generic\n\t\t\tinterface. Class <code>Person</code> will provide a method\n\t\t\t<code>function email()</code> that returns the email address. Such a\n\t\t\tmethod is often called a <i>getter</i> for the email attribute. Other\n\t\t\tconventions may demand that it is called <code>get_email()</code> or\n\t\t\tsimilar.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tSince the name <code>email</code> would now be used twice &mdash; once\n\t\t\tby the attribute and once by the method &mdash; we introduce a naming\n\t\t\tconvention for attributes: we will prefix them with <code>m_</code>,\n\t\t\tshorthand for "member". We also add getters for phone number and\n\t\t\taddress. Then our class looks as follows:\n\t\t\t<tscript>\n\t\t\tclass Person\n\t\t\t{\n\t\t\tprivate:\n\t\t\t\tvar m_first_name;\n\t\t\t\tvar m_last_name;\n\t\t\t\tvar m_phone;\n\t\t\t\tvar m_address;\n\t\t\t\tvar m_email;\n\n\t\t\tpublic:\n\t\t\t\tconstructor(first, last, phone=null, address=null, email=null)\n\t\t\t\t{\n\t\t\t\t\tm_first_name = first;\n\t\t\t\t\tm_last_name = last;\n\t\t\t\t\tm_phone = phone;\n\t\t\t\t\tm_address = address;\n\t\t\t\t\tm_email = email;\n\t\t\t\t}\n\n\t\t\t\tfunction full_name()\n\t\t\t\t{ return m_first_name + " " + m_last_name; }\n\t\t\t\tfunction phone()\n\t\t\t\t{ return m_phone; }\n\t\t\t\tfunction address()\n\t\t\t\t{ return m_address; }\n\t\t\t\tfunction email()\n\t\t\t\t{ return m_email; }\n\t\t\t}\n\t\t\t</tscript>\n\t\t\tWith all of this in place, our class can be used as follows:\n\t\t\t<tscript>\n\t\t\tvar p = Person("Alice", "Example", email="alice@example.com");\n\t\t\tprint(p.full_name());\n\t\t\tprint(p.phone());\n\t\t\tprint(p.address());\n\t\t\tprint(p.email());\n\t\t\t</tscript>\n\t\t\tIn effect, we have created a restricted interface for a person: It\n\t\t\tallows to specify all properties at construction time, but it does not\n\t\t\tallow to change anything later. That\'s of course not reasonable for an\n\t\t\taddress book. So let\'s add a function for changing the email. Such a\n\t\t\tfunction is called a <i>setter</i>. A simple implementation (to be\n\t\t\tinserted inside of the class) would look as follows:\n\t\t\t<tscript>\n\t\t\tfunction setEmail(email)\n\t\t\t{ m_email = email; }\n\t\t\t</tscript>\n\t\t\tNow we can read and write to the email field. However, if that\'s the\n\t\t\tcase, then why don\'t we simply make the attribute public? One reason is\n\t\t\tthat with an interface like this in place, we can add or change\n\t\t\tfunctionality "behind the scenes", i.e., without bothering the user of\n\t\t\tthe class. Let\'s say, we wish to only accept valid email addresses.\n\t\t\tWithout going into the details of what that means, a valid email address\n\t\t\tshould contain the "at"-character <code>"@"</code>. We change the setter\n\t\t\tto reflect this rule:\n\t\t\t<tscript>\n\t\t\tfunction setEmail(email)\n\t\t\t{\n\t\t\t\tif email.find("@") == null then throw "invalid email address";\n\t\t\t\tm_email = email;\n\t\t\t}\n\t\t\t</tscript>\n\t\t\tNotice that the change did not affect the interface at all! All code\n\t\t\tusing the class still works, with the only difference that we check for\n\t\t\tvalid parameter values. Had we made the attribute public, then the\n\t\t\tamount of work inside of the class would be considerably reduced, but\n\t\t\tthe amount of work done in code using the class increases. Imagine that\n\t\t\twe need to check the validity of an email address at five different\n\t\t\tplaces in a program, since that\'s the number of places where we set the\n\t\t\tvalue. Then we need to write the same check five times. And now imagine\n\t\t\tthat we want to make our email policy more strict and demand that the\n\t\t\tdomain contains at least one dot &mdash; that\'s the same change in five\n\t\t\tplaces. With that perspective in mind, the additional work inside of the\n\t\t\tclass body is well worth it.\n\t\t\t</p>\n\n\t\t\t<h3>Implementation</h3>\n\t\t\t<p>\n\t\t\tThe real reason why making things private to a class is that the users\n\t\t\tof the class are forced to restrict themselves to the public interface.\n\t\t\tThat\'s a serious advantage, even if the programmer of the class is its\n\t\t\tonly user. Sounds like a disadvantage at first, so why is that?\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tThe reason is that everything that is private can be changed, even later\n\t\t\ton when millions of lines of code use the class already, without\n\t\t\taffecting that code. In the example above, we changed the\n\t\t\t<i>implementation</i> of the method <code>setEmail</code> without\n\t\t\tchanging the interface. We could go further and change more of the\n\t\t\tprivate code, which is often called "implementation details". For\n\t\t\texample, we can rename the variable <code>m_email</code> into\n\t\t\t<code>m_private_email_address</code>. We have this freedom only because\n\t\t\tno user of the class relies on the variable\'s name being\n\t\t\t<code>m_email</code>, and that\'s because they cannot access it anyway.\n\t\t\tHad we made the name public then renaming the variable may entail a\n\t\t\tlarge number of changes down the road. We could even decide to store the\n\t\t\tdifferent parts of the email like the name and the domain (the part\n\t\t\tbefore and after the "@") in separate variables, or in a class\n\t\t\tdescribing an email address.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tNow think about a software library that is used in thousands of other\n\t\t\tproject, like a cryptographic library. Such a software library will\n\t\t\tlikely live for a long time, like a decade or more. During that time,\n\t\t\tcryptography, internet standards and many other circumstances may change\n\t\t\tconsiderably. Then the ability to change implementation details without\n\t\t\tbreaking thousands of apps is invaluable. Therefore, the separation of\n\t\t\tinterfaces and implementation details is a vital concept in software\n\t\t\tengineering.\n\t\t\t</p>\n\n\t\t\t<div class="tutorial-exercise">\n\t\t\t<p>\n\t\t\tIn the class Animal, rename the attribute into <code>m_name</code> and\n\t\t\tmake it private. Add a public getter <code>function name()</code> which\n\t\t\tallows to read the name. My defining a getter without a setter we\n\t\t\timplement a read-only attribute, which makes sense, since the name of an\n\t\t\tanimal (usually) does not change.\n\t\t\t</p>\n\t\t\t</div>\n\t\t\t',correct:'\n\t\t\tclass Animal\n\t\t\t{\n\t\t\tpublic:\n\t\t\t\tfunction greet()\n\t\t\t\t{\n\t\t\t\t\tprint("Hello, my name is " + m_name + "!");\n\t\t\t\t}\n\t\t\t\tconstructor(theName)\n\t\t\t\t{\n\t\t\t\t\tm_name = theName;\n\t\t\t\t}\n\t\t\t\tfunction name()\n\t\t\t\t{\n\t\t\t\t\treturn m_name;\n\t\t\t\t}\n\t\t\tprivate:\n\t\t\t\tvar m_name;\n\t\t\t}\n\t\t\t',tests:[{type:"code",code:'var a = Animal("Donald"); print(a.name()); a.greet();'}]},{content:'\n\t\t\t<h3>Simple Classes</h3>\n\t\t\t<p>\n\t\t\tNow that you know about interfaces, implementation details and their\n\t\t\tadvantages, it should be noted that not every class needs them. Consider\n\t\t\tthe following simple class, which could represent a position on the\n\t\t\tcanvas:\n\t\t\t<tscript>\n\t\t\tclass Point\n\t\t\t{\n\t\t\tpublic:\n\t\t\t\tvar x, y;\n\t\t\t}\n\t\t\t</tscript>\n\t\t\tIt is really just a minimal wrapper for the two coordinates, and there\n\t\t\tis absolutely no reason to over-engineer it by encapsulating\n\t\t\tfunctionality (it does not even have any methods) inside of the class,\n\t\t\thidden behind a stable interface. All we want here is two numbers bound\n\t\t\ttogether as one position. The question whether a class needs an\n\t\t\tinterface or not must be decided on a case-by-case basis. As\n\t\t\tprogrammers, we often start out with a simple class with public\n\t\t\tattributes, and as we add more functionality, we see more and more need\n\t\t\tfor hiding implementation details.\n\t\t\t</p>\n\n\t\t\t<h2>Static Members</h2>\n\t\t\t<p>\n\t\t\tMethods are syntactic sugar for conceptually linking functions operating\n\t\t\ton certain types of objects to these objects, or more specifically, to\n\t\t\ttheir class. Similarly, it can sometimes make sense to link a global\n\t\t\tvariable to a class. We do this by making it a variable of the class.\n\t\t\tThis is different from making it a variable of each object! A class\n\t\t\tvariable exists only once, while a normal attribute exists in each and\n\t\t\tevery object of that class. Such a class variable is declared as\n\t\t\t<code>static</code>. We can also make methods static, which means that\n\t\t\tthey are not tied to an object, but that we still want them to be tied\n\t\t\tto the class.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tAs an example, consider an array containing all objects of a class. For\n\t\t\tour address book, that would be all the data we need in our application.\n\t\t\tOf course, the array should exist only once, but it is still tightly\n\t\t\tlinked to the class Person, since it contains only Person objects. We\n\t\t\ttherefore do not make it an attribute of every object, but rather a\n\t\t\tstatic attribute of the class:\n\t\t\t<tscript>\n\t\t\tclass Person\n\t\t\t{\n\t\t\tprivate:\n\t\t\t\tvar m_first_name;\n\t\t\t\tvar m_last_name;\n\t\t\t\tvar m_phone;\n\t\t\t\tvar m_address;\n\t\t\t\tvar m_email;\n\t\t\t\tstatic var m_persons = [];\n\n\t\t\tpublic:\n\t\t\t\tconstructor(first, last, phone=null, address=null, email=null)\n\t\t\t\t{\n\t\t\t\t\tm_first_name = first;\n\t\t\t\t\tm_last_name = last;\n\t\t\t\t\tm_phone = phone;\n\t\t\t\t\tm_address = address;\n\t\t\t\t\tm_email = email;\n\t\t\t\t\tm_persons.push(this);\n\t\t\t\t}\n\n\t\t\t\tfunction full_name()\n\t\t\t\t{ return m_first_name + " " + m_last_name; }\n\t\t\t\tfunction phone()\n\t\t\t\t{ return m_phone; }\n\t\t\t\tfunction address()\n\t\t\t\t{ return m_address; }\n\t\t\t\tfunction email()\n\t\t\t\t{ return m_email; }\n\n\t\t\t\tfunction remove()\n\t\t\t\t{\n\t\t\t\t\tfor var i in 0:m_persons.size() do\n\t\t\t\t\t{\n\t\t\t\t\t\tif m_persons[i] == this then\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tm_persons.remove(i);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tstatic function all()\n\t\t\t\t{ return Array(m_persons); }\n\t\t\t}\n\t\t\t</tscript>\n\t\t\tWe have made four changes compared to the previous version:\n\t\t\t<ul>\n\t\t\t\t<li>There is a new variable <code>m_persons</code>, which is\n\t\t\t\t\tinitialized to an empty array. It works just like a global\n\t\t\t\t\tvariable, but it is formally inside of the class. It is also\n\t\t\t\t\thidden from view (private).</li>\n\t\t\t\t<li>Every newly constructed person is added to the array by the\n\t\t\t\t\tlast line of the constructor.</li>\n\t\t\t\t<li>The <code>remove</code> method effectively removes a person\n\t\t\t\t\tby removing it from the list of all persons.</li>\n\t\t\t\t<li>The static function <code>all()</code> returns the array\n\t\t\t\t\tcontaining all persons. It actually returns a copy of the\n\t\t\t\t\tarray, since arrays are mutable, so returning the original array\n\t\t\t\t\twould mean that code outside of the class could add things to\n\t\t\t\t\tthe array which do not belong there (like numbers, objects of\n\t\t\t\t\tunrelated type, or other rubbish).</li>\n\t\t\t</ul>\n\t\t\tIt is important that the <code>function all()</code> is static.\n\t\t\tOtherwise we would only be able to call it on an object, but it does not\n\t\t\tmake sense that we first need to know a person in order to obtain a list\n\t\t\tof all persons. And what do we do if no person is created yet at all?\n\t\t\tThe solution is that a static method can be called only with the class,\n\t\t\tand in particular without an object, as follows:\n\t\t\t<tscript>\n\t\t\tvar contacts = Person.all();\n\t\t\t</tscript>\n\t\t\tIn other words, we still use the dot-syntax, but we put the class name\n\t\t\tleft of the dot. Calling the method on an object of class\n\t\t\t<code>Person</code> also works.\n\t\t\t</p>\n\n\t\t\t<h2>Wrap-up</h2>\n\t\t\t<p>\n\t\t\tThe main use of classes is to represent <i>structured data</i>. An\n\t\t\tobject is an item with a fixed structure (public attributes), or more\n\t\t\tgenerally, with a fixed interface (public methods). This interface and\n\t\t\talso its implementation are defined by the corresponding class. Classes\n\t\t\tare data types, so with classes, we have the ability to implement our\n\t\t\town types.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tObject-oriented programming is a wide field, and understanding that\n\t\t\ttopic properly takes some time. Simply use classes and objects in your\n\t\t\town programs whenever you see fit, and that is whenever you encounter a\n\t\t\tset of entities which should be described by a fixed set of attributes.\n\t\t\t</p>\n\t\t\t'}]}},2088:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tutorial_recursion=void 0,e.tutorial_recursion={id:"recursion",title:"Recursion",sections:[{content:'\n\t\t\t<p>\n\t\t\tWe know how to call functions, and we also know that from within the\n\t\t\tbody of a function, we can call other function. However, what happens\n\t\t\twhen a function calls itself? Is that even possible?\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tIt turns out that yes, it is of course possible. In programming, a\n\t\t\tfunction that calls itself is called a <i>recursive</i> function. The\n\t\t\timplications of doing so are all but obvious. Let\'s start with a\n\t\t\tsimplistic example:\n\t\t\t<tscript>\n\t\t\tfunction f()\n\t\t\t{\n\t\t\t\tprint("Hello World!");\n\t\t\t\tf();\n\t\t\t}\n\t\t\t</tscript>\n\t\t\tThis function, when called, prints the familiar greeting "Hello World!".\n\t\t\tThen it calls itself. During that self-call, it again prints its\n\t\t\tgreeting, and then it calls itself again. This goes on and on until we\n\t\t\tinterrupt the program.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tWhat we have achieved is not very useful. The function keeps printing\n\t\t\tthe same message over and over, and it never stops. We could have\n\t\t\tachieved the same effect with a loop:\n\t\t\t<tscript>\n\t\t\tfunction f()\n\t\t\t{\n\t\t\t\twhile true do print("Hello World!");\n\t\t\t}\n\t\t\t</tscript>\n\t\t\tWhen thinking about it more carefully, this makes sense. A function that\n\t\t\tcalls itself keeps executing the same commands, until it reaches the\n\t\t\tself-call. This is akin to running the commands in a loop.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tIn order to achieve something useful with recursion we need to add two\n\t\t\tingredients: variation of the repetition (as we did by introducing a\n\t\t\tloop counter into our loops), and a way to stop. Both can be achieved by\n\t\t\tadding a parameter to the function. Consider the following example:\n\t\t\t<tscript>\n\t\t\tfunction f(n)\n\t\t\t{\n\t\t\t\tif n > 0 then\n\t\t\t\t{\n\t\t\t\t\tprint(n);\n\t\t\t\t\tf(n-1);\n\t\t\t\t}\n\t\t\t}\n\t\t\tf(5);\n\t\t\t</tscript>\n\t\t\tWhat happens when calling <code>f(5)</code>? You may be tempted to\n\t\t\tsimply try it out, but hold back for a second. Can you figure it out\n\t\t\twithout running the code? Give it a try!\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tNo matter how you found it out (hard thought or running the code), you\n\t\t\tshould have arrived at the conclusion that the function prints the\n\t\t\tnumbers 1 to 5 in descending order. In general, <code>f(n)</code>\n\t\t\tprints the numbers 1 to n in descending order. We could indeed achieve\n\t\t\tthe same with a loop. Let\'s look at a minimal variation: we swap the\n\t\t\torder of the self-call and the print statement. What happens? Again,\n\t\t\tfirst try to figure it out yourself before running the code.\n\t\t\t<tscript>\n\t\t\tfunction f(n)\n\t\t\t{\n\t\t\t\tif n > 0 then\n\t\t\t\t{\n\t\t\t\t\tf(n-1);\n\t\t\t\t\tprint(n);\n\t\t\t\t}\n\t\t\t}\n\t\t\tf(5);\n\t\t\t</tscript>\n\t\t\tSurprise: the behavior is quite similar, but this time the numbers are\n\t\t\tin ascending order! Let\'s shed some light on the process by using both\n\t\t\tprint statements:\n\t\t\t<tscript>\n\t\t\tfunction f(n)\n\t\t\t{\n\t\t\t\tif n > 0 then\n\t\t\t\t{\n\t\t\t\t\tprint(n);\n\t\t\t\t\tf(n-1);\n\t\t\t\t\tprint(n);\n\t\t\t\t}\n\t\t\t}\n\t\t\tf(5);\n\t\t\t</tscript>\n\t\t\tUnsurprisingly, this time we get descending and ascending numbers.\n\t\t\tLet\'s look at the process step by step in order to understand what is\n\t\t\tgoing on.\n\t\t\t<ul>\n\t\t\t\t<li>In the first call, the parameter n has the value 5. This value\n\t\t\t\t\tis printed. Then the function is invoked again, this time\n\t\t\t\t\trecursively with parameter value 4.</li>\n\t\t\t\t<li>At this point, the function is "active" twice. What we mean is\n\t\t\t\t\tthe following: the function was called with parameter n=5, and\n\t\t\t\t\tthat call did not return yet. Also, it did not yet arrive at the\n\t\t\t\t\tsecond print statement. In the middle of its execution, it\n\t\t\t\t\tinvoked itself with parameter value n=4. In that sense, two\n\t\t\t\t\tinvocations are pending at the same time.</li>\n\t\t\t\t<li>Due to the second invocation, the function body starts executing\n\t\t\t\t\tagain, but this time with a different parameter value. The value\n\t\t\t\t\t4 is printed as a message. Then the function invokes itself for\n\t\t\t\t\ta third time, with n=3.</li>\n\t\t\t\t<li>The same process happens two more times, with n=2 and n=1. After\n\t\t\t\t\tprinting the message 1, the function invokes itself with n=0.\n\t\t\t\t\tAt this point, a total of six invocations are active.</li>\n\t\t\t\t<li>However, this time the condition of the if-statement evaluates\n\t\t\t\t\tto <code>false</code> and the function returns without executing\n\t\t\t\t\tfurther print statements or self-invocations.</li>\n\t\t\t\t<li>The last invocation returns, so the instance with n=1 can\n\t\t\t\t\tcontinue running. It arrives at the second print statement and\n\t\t\t\t\tprints the message 1 a second time.</li>\n\t\t\t\t<li>Then also the invocation with n=1 is complete and it returns,\n\t\t\t\t\twhich allows the instance with n=2 to continue. It prints the\n\t\t\t\t\tmessage 2, then it returns.</li>\n\t\t\t\t<li>The process repeats for each of the invocations that were put on\n\t\t\t\t\thold earlier during the recursive invocations, until the very\n\t\t\t\t\tfirst instance prints the message 5 and finally leaves the\n\t\t\t\t\tfunction, returning to the call in the main program.</li>\n\t\t\t</ul>\n\t\t\tWe can visualize the process as follows:\n<pre>\nf(5)\n{                                  # function f(5) starts\n   print(5);\n   5 > 0 ==> f(4)\n   {                               # function f(4) starts\n      print(4);\n      4 > 0 ==> f(3)\n      {                            # function f(3) starts\n         print(3);\n         3 > 0 ==> f(2)\n         {                         # function f(2) starts\n            print(2);\n            2 > 0 ==> f(1)\n            {                      # function f(1) starts\n               print(1);\n               1 > 0 ==> f(0)\n               {                   # function f(0) starts\n                  0 <= 0 ==> return;\n               }                   # function f(0) returns\n               print(1);\n            }                      # function f(1) returns\n            print(2);\n         }                         # function f(2) returns\n         print(3);\n      }                            # function f(3) returns\n      print(4);\n   }                               # function f(4) returns\n   print(5);\n}                                  # function f(5) returns\n</pre>\n\t\t\t</p>\n\n\t\t\t<h2>Mimicking Loops</h2>\n\t\t\t<p>\n\t\t\tWe can approach the similarity with a loop more formally. Think of the\n\t\t\tfollowing type of loop, where <code>a:b</code> is a range:\n\t\t\t<tscript>\n\t\t\t\tfor var i in a:b do\n\t\t\t\t{\n\t\t\t\t\tdoSomething(i);\n\t\t\t\t}\n\t\t\t</tscript>\n\t\t\tWe can turn it into a recursion as follows:\n\t\t\t<tscript>\n\t\t\t\tfunction recursion(i, b)\n\t\t\t\t{\n\t\t\t\t\tif i < b then\n\t\t\t\t\t{\n\t\t\t\t\t\tdoSomething(i);\n\t\t\t\t\t\trecursion(i+1, b);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\trecursion(a, b);\n\t\t\t</tscript>\n\t\t\tIt is not hard to see that every loop can be turned into a recursion.\n\t\t\tThe opposite is also true, but doing so can be tricky.\n\t\t\t</p>\n\n\t\t\t<div class = "tutorial-exercise">\n\t\t\tWrite a recursive <code>function sumGauss(n)</code> that returns the sum\n\t\t\tof the values 1, 2, ..., n. (There is a closed-form solution for the\n\t\t\tproblem, however, the goal of the task is to actually sum of the values).\n\t\t\tWith a loop, the solution would be as follows:\n\t\t\t<tscript>\n\t\t\t\tfunction sumGauss(n)\n\t\t\t\t{\n\t\t\t\t\tvar sum = 0;\n\t\t\t\t\tfor var i in 1:n+1 do sum += i;\n\t\t\t\t\treturn n;\n\t\t\t\t}\n\t\t\t</tscript>\n\t\t\tThe goal is to achieve the same computation with a recursion. Do not\n\t\t\tuse a loop at all. You can use the version with loop to verify that\n\t\t\tyour function delivers the correct result.\n\t\t\t</div>\n\t\t\t',correct:"\n\t\t\tfunction sumGauss(n)\n\t\t\t{\n\t\t\t\tif (n <= 0) then return 0;\n\t\t\t\treturn n + sumGauss(n - 1);\n\t\t\t}\n\t\t\t",tests:[{type:"js",code:'\n\t\t\t\t\t\tlet program = parse(code).program;\n\t\t\t\t\t\tif (! program) return "Failed to parse the program code.";\n\t\t\t\t\t\tif (! isRecursive(program)) return "Please use recursion to solve the problem.";\n\t\t\t\t\t\tif (hasStructure(program, "loop;")) return "Do not use a loop in your program.";\n\t\t\t\t\t'},{type:"call",code:"sumGauss(1);"},{type:"call",code:"sumGauss(2);"},{type:"call",code:"sumGauss(7);"},{type:"call",code:"sumGauss(101);"}]},{content:"\n\t\t\t<h2>Recursive Problem Solving</h2>\n\t\t\t<p>\n\t\t\tIf recursion is no better or worse than using a loop, then why should we\n\t\t\tcare? We already know loops, and they are easy enough to use.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tHowever, it turns out that in some situations, recursion is a much\n\t\t\tbetter match for solving a problem. It can be argued that these\n\t\t\tsituations are rate compared with situations asking for a loop, but they\n\t\t\tare sufficiently frequent to be relevant. Therefore we should be well\n\t\t\taware of the concept of recursion.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tRecursive problem solving generally works as follows. We have a problem\n\t\t\tof \"size\" n. Say, we want to sort an array with n items. Sure, the array\n\t\t\ttype already has a built-in sort function, but for the sake of\n\t\t\tcuriosity, let's try to solve the problem ourselves. Then, would it\n\t\t\tbring us closer to the solution if we already knew how to sort an array\n\t\t\twith at most n-1 items?\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tThe answer is a clear yes! There are many strategies to exploit the\n\t\t\tability to sort smaller arrays. Here we will only use an extremely\n\t\t\tsimple (and inefficient) one. To this end, we will find the largest item\n\t\t\tin the array, move it to the end, and then sort the remaining n-1 items.\n\t\t\tIt is exactly this last step where the recursion comes into play.\n\t\t\tRecursive problem solving always consists of two parts: a reduction to a\n\t\t\tsimper (smaller) problem instance, and a base case that is solved with\n\t\t\telementary means. The base case is where the recursion stops.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tLet's make this more concrete. We write a\n\t\t\t<code>function sort(array, n)</code>\n\t\t\twhich shall sort the first n items of the given array. Calling it with\n\t\t\tthe size of the array as the second parameter sorts the whole array.\n\t\t\tThat's our goal. Let's apply the above outlined methodology of recursive\n\t\t\tproblem solving to achieve it.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tThe first thing we need is a base case. For example, can we sort an\n\t\t\tarray with two entries? Sure. If the first item is larger than the\n\t\t\tsecond item then we need to swap the items, otherwise the array is\n\t\t\talready sorted. That does the job, however, we can get away with\n\t\t\tsomething even simpler. What if we define the base case to be an array\n\t\t\twith either 0 or 1 elements? Well' an empty array is already sorted, and\n\t\t\tso is an array with a single element. That sounds like a good choice.\n\t\t\tIn code, we do the following:\n\t\t\t<tscript>\n\t\t\t\tfunction sort(array, n)\n\t\t\t\t{\n\t\t\t\t\tif n <= 1 then\n\t\t\t\t\t{\n\t\t\t\t\t\t# base case: nothing to do, array is already sorted\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\t# general case, to be discussed below\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t</tscript>\n\t\t\tWhat's left is the general case. This is where we aim to apply the\n\t\t\treduction to problem size n-1. As discussed above, we first need to\n\t\t\tfind the largest item and swap it to the end. Then we sort the first\n\t\t\tn-1 items. The solution is straightforward:\n\t\t\t<tscript>\n\t\t\t\tfunction sort(array, n)\n\t\t\t\t{\n\t\t\t\t\tif n <= 1 then\n\t\t\t\t\t{\n\t\t\t\t\t\t# base case: nothing to do, array is already sorted\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\t# find the position of the maximal entry\n\t\t\t\t\t\tvar argmax = 0;\n\t\t\t\t\t\tfor var i in 1:n do\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif array[i] > array[argmax] then argmax = i;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t# swap it with the last entry\n\t\t\t\t\t\tvar temp = array[argmax];\n\t\t\t\t\t\tarray[argmax] = array[n-1];\n\t\t\t\t\t\tarray[n-1] = temp;\n\n\t\t\t\t\t\t# solve the simpler problem\n\t\t\t\t\t\tsort(array, n-1);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t</tscript>\n\t\t\tLet's try it out!\n\t\t\t<tscript>\n\t\t\t\tvar a = [4,7,3,4,0,5];\n\t\t\t\tsort(a, a.size());\n\t\t\t\tprint(a);\n\t\t\t</tscript>\n\t\t\tIndeed, we see the sorted output:\n\t\t\t<pre>[0,3,4,4,5,7]</pre>\n\t\t\t</p>\n\n\t\t\t<div class = \"tutorial-exercise\">\n\t\t\tWrite a recursive <code>function contains(array, n, value)</code> that\n\t\t\treturns <code>true</code> if the value is contained in the first\n\t\t\tn items of the array, and <code>false</code> otherwise. Do not use a\n\t\t\tloop, but instead apply the recursive problem solving principle. What is\n\t\t\tthe simplest base case you can come up with? How to reduce the case with\n\t\t\titems n to n-1 items?\n\t\t\t</div>\n\t\t\t",correct:"\n\t\t\tfunction contains(array, n, value)\n\t\t\t{\n\t\t\t\tif n == 0 then return false;\n\t\t\t\tif array[n-1] == value then return true;\n\t\t\t\treturn contains(array, n-1, value);\n\t\t\t}\n\t\t\t",tests:[{type:"js",code:'\n\t\t\t\t\t\tlet program = parse(code).program;\n\t\t\t\t\t\tif (! program) return "Failed to parse the program code.";\n\t\t\t\t\t\tif (! isRecursive(program)) return "Please use recursion to solve the problem.";\n\t\t\t\t\t\tif (hasStructure(program, "loop;")) return "Do not use a loop in your program.";\n\t\t\t\t\t'},{type:"call",code:"contains([1,3,5,7,9], 5, 1);"},{type:"call",code:"contains([1,3,5,7,9], 5, 7);"},{type:"call",code:"contains([1,3,5,7,9], 5, 9);"},{type:"call",code:"contains([1,3,5,7,9], 5, 6);"}]},{content:'\n\t\t\t<h2>Processing Trees</h2>\n\t\t\t<p>\n\t\t\tThe real power of recursion happens when there are multiple self-calls.\n\t\t\tConsider the following program, which draws a beautiful ruler on the\n\t\t\tcanvas (give it a try):\n\t\t\t<tscript>\n\t\t\t\tfunction ruler(a, b, h, n)\n\t\t\t\t{\n\t\t\t\t\tif n == 0 then return;\n\t\t\t\t\tcanvas.line(a, 100, a, 100-h);\n\t\t\t\t\tcanvas.line(b, 100, b, 100-h);\n\t\t\t\t\truler(a, a/2+b/2, 0.8*h, n-1);\n\t\t\t\t\truler(a/2+b/2, b, 0.8*h, n-1);\n\t\t\t\t}\n\t\t\t\tcanvas.line(100, 100, 612, 100);\n\t\t\t\truler(100, 612, 32, 7);\n\t\t\t</tscript>\n\t\t\tIn this program, the recursive function calls itself <i>twice</i>. The\n\t\t\tinitial call spawns one instance, which spawns two more, which cause 4\n\t\t\tmore calls, which cause 8 more calls &mdash; and so on until the\n\t\t\trecursion arrives at the base case and stops. The base case occurs a\n\t\t\ttotal of 2<sup>7</sup> = 128 times. The same principle turns out to be\n\t\t\ttremendously useful for processing a data structure which is very\n\t\t\twidespread in computing: a tree.\n\t\t\t</p>\n\n\t\t\t<h3>Tree Data Structures</h3>\n\t\t\t<p>\n\t\t\tAn illustrative example of a tree data structure is a family tree.\n\t\t\tConsider the British royal family, and more specifically, the\n\t\t\t<a target="_blank" href="https://en.wikipedia.org/wiki/Family_tree_of_the_British_royal_family#House_of_Windsor">house of Windsor</a>.\n\t\t\tThe line starts with Queen Victoria (1819&ndash;1901). She had five\n\t\t\tchildren. They again had children, all the way down to Prince George of\n\t\t\tCambridge. The <i>is-a-child-of</i> relation naturally yields a tree\n\t\t\tstructure. A tree is a graph structure in which a root node (here\n\t\t\tVictoria) is related to zero or more other nodes (her children Victoria,\n\t\t\tEdward, Alice, Alfred and Helena). These nodes can again be considered\n\t\t\troot nodes of sub-trees, namely their direct and indirect descendants.\n\t\t\tThis way, each node appears only once in the graph &mdash; otherwise it\n\t\t\tis still a graph, but not a tree.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tWe will use a class to represent the tree. In fact, the class represents\n\t\t\ta single member of the family, and at the same time the complete\n\t\t\tsub-tree of descendants of that person. Each object (person) has only\n\t\t\ttwo attributes: a name, and a list of children. For simplicity, we make\n\t\t\tboth attributes public. We may leave the list of children incomplete if\n\t\t\twe do not care, otherwise the tree would grow very large. The data\n\t\t\tstructure representing (a part of) the house of Windsor, down to\n\t\t\tElisabeth II, could look like this:\n\t\t\t<tscript>\n\t\t\t\tclass FamilyMember\n\t\t\t\t{\n\t\t\t\tpublic:\n\t\t\t\t\tconstructor(name, children = [])\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.name = name;\n\t\t\t\t\t\tthis.children = children;\n\t\t\t\t\t}\n\t\t\t\t\tvar name;\n\t\t\t\t\tvar children;\n\t\t\t\t}\n\n\t\t\t\tvar victoria = FamilyMember("Victoria", [\n\t\t\t\t\t\tFamilyMember("Victoria", [\n\t\t\t\t\t\t\tFamilyMember("Wilhelm II", []),\n\t\t\t\t\t\t]),\n\t\t\t\t\t\tFamilyMember("Edward VII", [\n\t\t\t\t\t\t\tFamilyMember("Albert Victor", []),\n\t\t\t\t\t\t\tFamilyMember("George V", [\n\t\t\t\t\t\t\t\tFamilyMember("Edward VIII", []),\n\t\t\t\t\t\t\t\tFamilyMember("George VI", [\n\t\t\t\t\t\t\t\t\tFamilyMember("Elisabeth II", []),\n\t\t\t\t\t\t\t\t\tFamilyMember("Margaret", []),\n\t\t\t\t\t\t\t\t]),\n\t\t\t\t\t\t\t\tFamilyMember("Mary", []),\n\t\t\t\t\t\t\t\tFamilyMember("Henry", []),\n\t\t\t\t\t\t\t\tFamilyMember("George", []),\n\t\t\t\t\t\t\t\tFamilyMember("John", []),\n\t\t\t\t\t\t\t]),\n\t\t\t\t\t\t\tFamilyMember("Louise", []),\n\t\t\t\t\t\t\tFamilyMember("Victoria", []),\n\t\t\t\t\t\t\tFamilyMember("Maud", []),\n\t\t\t\t\t\t\tFamilyMember("Alexander John", []),\n\t\t\t\t\t\t]),\n\t\t\t\t\t\tFamilyMember("Alice", [\n\t\t\t\t\t\t\tFamilyMember("Ernest Louis", []),\n\t\t\t\t\t\t]),\n\t\t\t\t\t\tFamilyMember("Alfred", [\n\t\t\t\t\t\t\tFamilyMember("Alfred", []),\n\t\t\t\t\t\t\tFamilyMember("Marie", []),\n\t\t\t\t\t\t\tFamilyMember("Victoria Melita", []),\n\t\t\t\t\t\t\tFamilyMember("Alexandra", []),\n\t\t\t\t\t\t\tFamilyMember("Beatrice", []),\n\t\t\t\t\t\t]),\n\t\t\t\t\t\tFamilyMember("Helena", []),\n\t\t\t\t\t]);\n\t\t\t</tscript>\n\t\t\tThe lines are indented so as to highlight the tree structure, which\n\t\t\tgrows from left-top to right-bottom in this case. Many types of\n\t\t\thierarchically organized data forms tree structures, for example a file\n\t\t\tsystem, where a directory contains files and other directories, which\n\t\t\tcan again contain more files and directories, and so on.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tNow consider a rather simple task: print all names in the family tree.\n\t\t\tWithout recursion, this is a tricky task (although solvable). With\n\t\t\trecursion, it becomes nearly trivial.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tWe apply the recursive problem solving strategy to the problem. Printing\n\t\t\tall names in the tree is broken down into sub-problems as follows. The\n\t\t\tbase case will be a family member without children. Then the problem\n\t\t\treduces to printing the name. For a person with children, the problem is\n\t\t\tdecomposed into printing the name and processing all children,\n\t\t\trecursively. Hence, in this case, the number of recursive calls depends\n\t\t\ton the data, i.e., the number of children.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tIn program code, the solution is surprisingly neat. It turns out that we\n\t\t\tdo not even need a case distinction between base case and general case:\n\t\t\t<tscript>\n\t\t\t\tfunction printFamilyTree(person)\n\t\t\t\t{\n\t\t\t\t\tprint(person.name);\n\t\t\t\t\tfor var child in person.children do printFamilyTree(child);\n\t\t\t\t}\n\t\t\t\tprintFamilyTree(victoria);\n\t\t\t</tscript>\n\t\t\tCould it be any simpler? The solution is powerful and elegant. Solving\n\t\t\tthe same problem with a loop does not necessarily take a much longer\n\t\t\tprogram (it will be somewhat longer though), but it does require heavier\n\t\t\tmachinery, namely maintaining a so-called stack. Furthermore, the\n\t\t\trecursive variant is easier to understand and maintain.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tProcessing trees is where recursion shines, but it is not the only type\n\t\t\tof problem where recursion is preferred over a loop-based solution. In\n\t\t\tfact, once we have a solid grasp on recursion, iterating the nodes of a\n\t\t\ttree is nearly as simple as iterating the items of an array. For an\n\t\t\tarray, we use a for-loop. For a tree structure, we use a recursive\n\t\t\tfunction. Aside from printing all names, one can think of many such\n\t\t\tfunctions, for example for finding a person by name, for counting all\n\t\t\tpersons with a specific first name, and so on.\n\t\t\t</p>\n\n\t\t\t<h2>Wrap-up</h2>\n\t\t\t<p>\n\t\t\tThe concept of recursion is related to a loop, in the sense that the\n\t\t\tsame code can be executed multiple times. In most cases, loops are\n\t\t\tpreferable, but sometimes recursion offers stunningly simple and\n\t\t\texpressive solutions for seemingly complicated problems. When writing a\n\t\t\trecursive function to solve a problem, we always implement a base case\n\t\t\tand the general case, which contains the recursive call for solving a\n\t\t\tsmaller problem instance.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tOne class of problems where recursion is generally preferred over a loop\n\t\t\tis iterating a tree data structure. In a sense, recursion does for a\n\t\t\ttree what a for-loop does for an array.\n\t\t\t</p>\n\t\t\t'}]}},8378:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tutorial_variables=void 0,e.tutorial_variables={id:"variables",title:"Variables",sections:[{content:"\n\t\t\t<p>\n\t\t\t</p>\n\t\t\t"},{content:'\n\t\t\t<p>\n\t\t\tVariables make code much more generic. Instead of solving a single\n\t\t\tproblem, they allow us to solve a whole class of problems. Doing so\n\t\t\tgreatly increases efficiency.\n\t\t\t</p><p>\n\t\t\tA variable stores a value, like a string, a number, or more complicated\n\t\t\tdata (to be discovered later). For example, if we write some code to\n\t\t\tcompute the square root of a specific number, wouldn\'t we want to be\n\t\t\table to reuse the code to calculate the square root of a different\n\t\t\tnumber? Using variables (and functions) we are able to do so. With\n\t\t\t<tscript>\n\t\t\t    var x;\n\t\t\t</tscript>\n\t\t\twe create a variable with the name "x". The name could equally well\n\t\t\tbe more descriptive, like "points" or "animal". Using appropriate and\n\t\t\tdescriptive names depending on the context is improves readability\n\t\t\tand maintainability of code, and is therefore considered good style.\n\t\t\t<tscript>\n\t\t\t    var points;\n\t\t\t    var animal;\n\t\t\t</tscript>\n\t\t\tMultiple variables can (but do not need to be) declared with a single\n\t\t\tdeclaration as follows:\n\t\t\t<tscript>\n\t\t\t    var points, animal;\n\t\t\t</tscript>\n\t\t\tWe can think of a variable as a box. The box has a name tag, and it\n\t\t\tcan contain exactly one value. Using a computer analogy, we can think\n\t\t\tof the operating system\'s clipboard as a variable. When we select and\n\t\t\tcopy some text in the browser then this text is copied from the webpage\n\t\t\tinto the clipboard. When we paste the content into a text editor then\n\t\t\tit is copied from the clipboard into the editor. The ability of the\n\t\t\tclipboard to store text or images, but only one entity at a time, is\n\t\t\twhat makes it similar to a variable.\n\t\t\t</p><p>\n\t\t\tNotice that in the above examples, the word "var" is printed in dark\n\t\t\tblue. This is done to indicate that "var" is a so-called <i>keyword</i>.\n\t\t\tStructurally, keywords like "var" are no different from names like "x",\n\t\t\t"animal", and "print". However, they have a special meaning for the\n\t\t\tprogramming language, like declaring a variable, and are therefore not\n\t\t\tavailable as names. A complete list of keywords of the TScript language\n\t\t\tis found\n\t\t\t<a target="_blank" href="https://tglas.github.io/tscript/?doc=%2Flanguage%2Fsyntax%2Fkeywords">here</a>.\n\t\t\t</p><p>\n\t\t\tLet\'s return to our variable. In programming, a variable has two roles:\n\t\t\t<ul>\n\t\t\t<li>A variable stores a value. This way the program can remember\n\t\t\t\tinformation for later use.</li>\n\t\t\t<li>A variable can change. It is hence more flexible than other values.\n\t\t\t\tThink of the value <code>"Hello World"</code>. We had\n\t\t\t\thard-coded it into the print command. A variable adds flexibility.\n\t\t\t\tInstead of always printing the same text, a variable allows the\n\t\t\t\tprint command to print whatever is currently stored in the variable.\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t\tFor working with variables, we need two mechanisms, namely for\n\t\t\t<i>storing</i> a value in a variable (write operation), and for\n\t\t\t<i>retrieving</i> it later on (read operation).\n\t\t\t</p>\n\t\t\t'},{content:'\n\t\t\t<h2>Assignment</h2>\n\t\t\t<p>\n\t\t\tAn assignment statement copies a value into a variable. This is the\n\t\t\twrite operation mentioned above. The symbol (or operator) "=" marks an\n\t\t\tassignment. Beforehand we have already declared variable x. Storing\n\t\t\tvalues in x (and then overwriting them) works as follows:\n\t\t\t<tscript>\n\t\t\tx = 1;                  # now the number 1 is assigned to x\n\t\t\tx = "Hello World!";     # now the string "Hello World!" is assigned to x\n\t\t\t</tscript>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tIt is common to assign an initial value to a variable already when it is\n\t\t\tdeclared. This works as follows:\n\t\t\t<tscript>\n\t\t\tvar x = 1;              # declaration with initial assignment\n\t\t\t</tscript>\n\t\t\tNote that this syntax involves the "var" keyword, which declares the\n\t\t\tvariable. Each variable can only be declared once, but there can be an\n\t\t\tarbitrary number of assignments to the variable. If a further assignment\n\t\t\taccidentally uses the "var" keyword again, then it is a declaration, and\n\t\t\tnot (only) an assignment. The variable is now declared twice and we end\n\t\t\tup with an error message.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t<div class = "tutorial-exercise">\n\t\t\t\tDeclare a variable called "points". Assign the number\n\t\t\t\t<code>100</code> to it. Then declare a second variable called "animal"\n\t\t\t\tand assign the string <code>"dog"</code> to it. We can either use\n\t\t\t\tseparate assignments or assign initial values.\n\t\t\t</div>\n\t\t\t</p>\n\t\t\t',correct:'\n\t\t\t\tvar points = 100;   # variable declaration with initial value\n\t\t\t\tvar animal;         # variable declaration\n\t\t\t\tanimal = "dog";     # assignment\n\t\t\t\t',tests:[{type:"code",code:"print(points); print(animal);"}]},{content:'\n            <h2>Using Variables</h2>\n            <p>\n\t\t\tWe have stored value in variables. However, we did not observe the effect\n\t\t\tof the assignment, because we never used the stored values. Retrieving and\n\t\t\tusing values stored in variables is as simple as it gets: we refer to the\n\t\t\tvalue stored in a variable by writing out the variable name.\n\t\t\tExample:\n\t\t\t<tscript>\n\t\t\t    var animal = "dog";   # variable declaration with initial value\n\t\t\t    print(animal);        # prints "dog", not "animal"\n\t\t\t</tscript>\n\t\t\tThe above program prints "dog" to the message area. Let\'s break down the\n\t\t\tprint command into its elementary steps. The following happened:\n\t\t\t<ol>\n\t\t\t<li>The name <code>animal</code> is encountered. It is looked up and\n\t\t\t\tfound to be a variable.</li>\n\t\t\t<li>The value of the variable is found to be "dog". This value is\n\t\t\t\tpassed on to the <code>print</code> command.</li>\n\t\t\t<li>The print command adds the line "dog" to the message area.</li>\n\t\t\t</ol>\n\t\t\t</p><p>\n\t\t\tNote the quite different effects of the following commands:\n\t\t\t<tscript>\n\t\t\t    print("animal");      # print the string "animal"\n\t\t\t    print(animal);        # print the string "dog" stored in the variable "animal"\n\t\t\t</tscript>\n\t\t\tNow we can understand the reason why the text "Hello World!" was\n\t\t\tenclosed in double quotes. Recall that the double quotes tell the\n\t\t\tcomputer to treat <code>Hello World</code> as a string, a\n\t\t\tpiece of text, not as a piece of program code. The same happens in the\n\t\t\tfirst command. In the second command, <code>animal</code>\n\t\t\tis treated as program code, in this case as the name of a variable. The\n\t\t\tname is a piece of program code. Its meaning is: "look and the name of\n\t\t\tthe variable and read out its value". That\'s what happens in the second\n\t\t\tcommand.\n\t\t\t</p><p>\n\t\t\t<div class = "tutorial-exercise">\n\t\t\t\tExtend the task from above, where we assigned values to the variables\n\t\t\t\t"points" and "animal". Print out the values of these variables with\n\t\t\t\ttwo <code>print</code> commands. Print out the value of\n\t\t\t\t"points" first and the value of "animal" last. Hence, our program\n\t\t\t\tshould produce two messages containing the number 100 and the word\n\t\t\t\t"dog".\n            </div>\n            </p>\n            ',correct:'\n\t\t\t\tvar points = 100;   # variable declaration with initial value\n\t\t\t\tvar animal;         # variable declaration\n\t\t\t\tanimal = "dog";     # assignment\n\t\t\t\tprint(points);      # print 100\n\t\t\t\tprint(animal);      # print "dog"\n\t\t\t\t'},{content:"\n            <h2>Gaining Flexibility</h2>\n            <p>\n            Until now, variables may feel like an additional burden. Why write\n            <tscript>\n            \tvar message = \"Hello World!\";\n            \tprint(message);\n            </tscript>\n            if we can equally well use the much simpler\n            <tscript>\n            \tprint(\"Hello World!\");\n            </tscript>\n            to get the same effect? To see the benefit, let's look at a more\n            interesting example. The following program draws a regular triangle\n            with the turtle:\n            <tscript>\n            \tturtle.move(40);\n            \tturtle.turn(120);\n            \tturtle.move(40);\n            \tturtle.turn(120);\n            \tturtle.move(40);\n            </tscript>\n            The side length of the triangle is fixed to 40. What if we want to draw\n            a larger triangle? We surely don't want to write the same program over\n            and over for different triangles. So, let's make the side length a variable:\n            <tscript>\n            \tvar side = 40;        # change this at need\n            \tturtle.move(side);\n            \tturtle.turn(120);\n            \tturtle.move(side);\n            \tturtle.turn(120);\n            \tturtle.move(side);\n            </tscript>\n            If we ever need to change the size of the triangle, then we do that in a\n            single place. Changing it three times would be cumbersome, and actually\n            error-prone. It is easy to imagine a more complex situation where a value\n            would need to be changed 20 times, distributed over hundreds of lines of\n            code. In contrast, changing the value of a variable is a much better\n            solution. As we move on, we'll see that programming offers even better\n            solutions to the problem of code reuse. All of them will involve using\n            variables.\n            </p>\n            "},{content:"\n            <h2>Wrap-Up</h2>\n            <p>\n\t\t\tWe are now able to create variables to use in our program. We know about\n\t\t\tdeclarations and assignments. The process of both at the beginning of a\n\t\t\tprogram or algorithm is often referred to as initialization as we set\n\t\t\tthe initial status of out program before anything is done.\n            </p>\n            "}]}},8090:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tutorial_welcome=void 0,e.tutorial_welcome={id:"welcome",title:"Programming Tutorial with TScript",sections:[{content:"\n\t\t\t<p>\n\t\t\tWelcome to the TScript tutorial! This tutorial is designed for\n\t\t\tprogramming beginners. Its main purpose is to teach you how to program a\n\t\t\tcomputer. Of course, it will do this using the TScript programming\n\t\t\tlanguage. However, the general process is completely generic and\n\t\t\ttransfers easily to other programming languages.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tThe tutorial will guide you through a sequence of teaching units. Each\n\t\t\tunit is accompanied by programming tasks. This allows you to apply the\n\t\t\tnewly gained knowledge hands-on.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tThe tutorial consists of 20 units (this introduction included). As a\n\t\t\tbeginner, you should not try to complete the whole tutorial at once.\n\t\t\tInstead, do a few units and then try the learned knowledge out using a\n\t\t\tpet project of your own. Once you start to feel comfortable with the\n\t\t\tmaterial, you are ready to move on to the next challenge.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tYou cannot learn to program in a day. Nobody can. Programming requires a\n\t\t\tcertain way of thinking, and every new way of thinking takes some time\n\t\t\tto sink in. That's not specific to programming, it is true for most\n\t\t\tcomplicated things out there. Don't rush. Give it some time, and most\n\t\t\timportantly, practice a lot. On that way, this tutorial aims to be a\n\t\t\tgood start.\n\t\t\t</p>\n\t\t\t"}]}},9607:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.jwtDecode=e.InvalidTokenError=void 0;class n extends Error{}e.InvalidTokenError=n,n.prototype.name="InvalidTokenError",e.jwtDecode=function(t,e){if("string"!=typeof t)throw new n("Invalid token specified: must be a string");e||(e={});const r=!0===e.header?0:1,i=t.split(".")[r];if("string"!=typeof i)throw new n(`Invalid token specified: missing part #${r+1}`);let a;try{a=function(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return function(t){return decodeURIComponent(atob(t).replace(/(.)/g,((t,e)=>{let n=e.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n})))}(e)}catch(t){return atob(e)}}(i)}catch(t){throw new n(`Invalid token specified: invalid base64 for part #${r+1} (${t.message})`)}try{return JSON.parse(a)}catch(t){throw new n(`Invalid token specified: invalid json for part #${r+1} (${t.message})`)}}},5341:(t,e,n)=>{"use strict";n.r(e),n.d(e,{Store:()=>r,clear:()=>d,close:()=>u,del:()=>c,get:()=>o,keys:()=>h,set:()=>s,update:()=>l});class r{constructor(t="keyval-store",e="keyval"){this.storeName=e,this._dbName=t,this._storeName=e,this._init()}_init(){this._dbp||(this._dbp=new Promise(((t,e)=>{const n=indexedDB.open(this._dbName);n.onerror=()=>e(n.error),n.onsuccess=()=>t(n.result),n.onupgradeneeded=()=>{n.result.createObjectStore(this._storeName)}})))}_withIDBStore(t,e){return this._init(),this._dbp.then((n=>new Promise(((r,i)=>{const a=n.transaction(this.storeName,t);a.oncomplete=()=>r(),a.onabort=a.onerror=()=>i(a.error),e(a.objectStore(this.storeName))}))))}_close(){return this._init(),this._dbp.then((t=>{t.close(),this._dbp=void 0}))}}let i;function a(){return i||(i=new r),i}function o(t,e=a()){let n;return e._withIDBStore("readwrite",(e=>{n=e.get(t)})).then((()=>n.result))}function s(t,e,n=a()){return n._withIDBStore("readwrite",(n=>{n.put(e,t)}))}function l(t,e,n=a()){return n._withIDBStore("readwrite",(n=>{const r=n.get(t);r.onsuccess=()=>{n.put(e(r.result),t)}}))}function c(t,e=a()){return e._withIDBStore("readwrite",(e=>{e.delete(t)}))}function d(t=a()){return t._withIDBStore("readwrite",(t=>{t.clear()}))}function h(t=a()){const e=[];return t._withIDBStore("readwrite",(t=>{(t.openKeyCursor||t.openCursor).call(t).onsuccess=function(){this.result&&(e.push(this.result.key),this.result.continue())}})).then((()=>e))}function u(t=a()){return t._close()}},246:(t,e,n)=>{"use strict";async function r(t){let e=0;const n=[];await async function(t,e){const n=function(t){return t[Symbol.asyncIterator]?t[Symbol.asyncIterator]():t[Symbol.iterator]?t[Symbol.iterator]():t.next?t:function(t){let e=[t];return{next:()=>Promise.resolve({done:0===e.length,value:e.pop()}),return:()=>(e=[],{}),[Symbol.asyncIterator](){return this}}}(t)}(t);for(;;){const{value:t,done:r}=await n.next();if(t&&await e(t),r)break}n.return&&n.return()}(t,(t=>{n.push(t),e+=t.byteLength}));const r=new Uint8Array(e);let i=0;for(const t of n)r.set(t,i),i+=t.byteLength;return r}async function i({onProgress:t,url:e,method:n="GET",headers:i={},body:a}){a&&(a=await r(a));const o=await fetch(e,{method:n,headers:i,body:a}),s=o.body&&o.body.getReader?function(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{next:()=>e.read(),return:()=>(e.releaseLock(),{}),[Symbol.asyncIterator](){return this}}}(o.body):[new Uint8Array(await o.arrayBuffer())];i={};for(const[t,e]of o.headers.entries())i[t]=e;return{url:o.url,method:o.method,statusCode:o.status,statusMessage:o.statusText,body:s,headers:i}}n.r(e),n.d(e,{default:()=>a,request:()=>i});const a={request:i}},764:(t,e,n)=>{"use strict";n.r(e),n.d(e,{Errors:()=>ne,STAGE:()=>B,TREE:()=>ue,WORKDIR:()=>fe,abortMerge:()=>Se,add:()=>ze,addNote:()=>Ye,addRemote:()=>Ke,annotatedTag:()=>Xe,branch:()=>Ve,checkout:()=>tn,clone:()=>qn,commit:()=>Cn,currentBranch:()=>jn,default:()=>gi,deleteBranch:()=>zn,deleteRef:()=>Dn,deleteRemote:()=>On,deleteTag:()=>Mn,expandOid:()=>Bn,expandRef:()=>Fn,fastForward:()=>Wn,fetch:()=>Gn,findMergeBase:()=>Qn,findRoot:()=>Jn,getConfig:()=>Kn,getConfigAll:()=>Xn,getRemoteInfo:()=>Vn,getRemoteInfo2:()=>$n,hashBlob:()=>tr,indexPack:()=>er,init:()=>nr,isDescendent:()=>ir,isIgnored:()=>ar,listBranches:()=>or,listFiles:()=>cr,listNotes:()=>dr,listRefs:()=>hr,listRemotes:()=>ur,listServerRefs:()=>pr,listTags:()=>fr,log:()=>br,merge:()=>wr,packObjects:()=>Ar,pull:()=>Tr,push:()=>Er,readBlob:()=>Pr,readCommit:()=>qr,readNote:()=>Cr,readObject:()=>jr,readTag:()=>zr,readTree:()=>Dr,remove:()=>Or,removeNote:()=>Mr,renameBranch:()=>Br,resetIndex:()=>Rr,resolveRef:()=>Lr,setConfig:()=>Nr,stash:()=>ni,status:()=>ri,statusMatrix:()=>ai,tag:()=>oi,updateIndex:()=>si,version:()=>li,walk:()=>ci,writeBlob:()=>di,writeCommit:()=>hi,writeObject:()=>ui,writeRef:()=>pi,writeTag:()=>fi,writeTree:()=>mi});var r=n(9758),i=n(8336),a=n(6470),o=n(4606),s=n(9591),l=n(2352),c=n(5151),d=n(1990),h=n(9027),u=n(8764).Buffer;class p extends Error{constructor(t){super(t),this.caller=""}toJSON(){return{code:this.code,data:this.data,caller:this.caller,message:this.message,stack:this.stack}}fromJSON(t){const e=new p(t.message);return e.code=t.code,e.data=t.data,e.caller=t.caller,e.stack=t.stack,e}get isIsomorphicGitError(){return!0}}class f extends p{constructor(t){super(`Modifying the index is not possible because you have unmerged files: ${t.toString}. Fix them up in the work tree, and then use 'git add/rm as appropriate to mark resolution and make a commit.`),this.code=this.name=f.code,this.data={filepaths:t}}}f.code="UnmergedPathsError";class m extends p{constructor(t){super(`An internal error caused this command to fail. Please file a bug report at https://github.com/isomorphic-git/isomorphic-git/issues with this error message: ${t}`),this.code=this.name=m.code,this.data={message:t}}}m.code="InternalError";class g extends p{constructor(t){super(`The filepath "${t}" contains unsafe character sequences`),this.code=this.name=g.code,this.data={filepath:t}}}g.code="UnsafeFilepathError";class y{constructor(t){this.buffer=t,this._start=0}eof(){return this._start>=this.buffer.length}tell(){return this._start}seek(t){this._start=t}slice(t){const e=this.buffer.slice(this._start,this._start+t);return this._start+=t,e}toString(t,e){const n=this.buffer.toString(t,this._start,this._start+e);return this._start+=e,n}write(t,e,n){const r=this.buffer.write(t,this._start,e,n);return this._start+=e,r}copy(t,e,n){const r=t.copy(this.buffer,this._start,e,n);return this._start+=r,r}readUInt8(){const t=this.buffer.readUInt8(this._start);return this._start+=1,t}writeUInt8(t){const e=this.buffer.writeUInt8(t,this._start);return this._start+=1,e}readUInt16BE(){const t=this.buffer.readUInt16BE(this._start);return this._start+=2,t}writeUInt16BE(t){const e=this.buffer.writeUInt16BE(t,this._start);return this._start+=2,e}readUInt32BE(){const t=this.buffer.readUInt32BE(this._start);return this._start+=4,t}writeUInt32BE(t){const e=this.buffer.writeUInt32BE(t,this._start);return this._start+=4,e}}function v(t,e){return-(t<e)||+(t>e)}function b(t,e){return v(t.path,e.path)}function w(t){let e=t>0?t>>12:0;4!==e&&8!==e&&10!==e&&14!==e&&(e=8);let n=511&t;return n=73&n?493:420,8!==e&&(n=0),(e<<12)+n}const x=2**32;function k(t,e,n,r){if(void 0!==t&&void 0!==e)return[t,e];void 0===n&&(n=r.valueOf());const i=Math.floor(n/1e3);return[i,1e6*(n-1e3*i)]}function A(t){const[e,n]=k(t.ctimeSeconds,t.ctimeNanoseconds,t.ctimeMs,t.ctime),[r,i]=k(t.mtimeSeconds,t.mtimeNanoseconds,t.mtimeMs,t.mtime);return{ctimeSeconds:e%x,ctimeNanoseconds:n%x,mtimeSeconds:r%x,mtimeNanoseconds:i%x,dev:t.dev%x,ino:t.ino%x,mode:w(t.mode%x),uid:t.uid%x,gid:t.gid%x,size:t.size>-1?t.size%x:0}}let T=null;async function _(t){return null===T&&(T=await async function(){try{if("da39a3ee5e6b4b0d3255bfef95601890afd80709"===await E(new Uint8Array([])))return!0}catch(t){}return!1}()),T?E(t):function(t){return(new i).update(t).digest("hex")}(t)}async function E(t){return function(t){let e="";for(const n of new Uint8Array(t))n<16&&(e+="0"),e+=n.toString(16);return e}(await crypto.subtle.digest("SHA-1",t))}class S{constructor(t,e){this._dirty=!1,this._unmergedPaths=e||new Set,this._entries=t||new Map}_addEntry(t){if(0===t.flags.stage)t.stages=[t],this._entries.set(t.path,t),this._unmergedPaths.delete(t.path);else{let e=this._entries.get(t.path);e||(this._entries.set(t.path,t),e=t),e.stages[t.flags.stage]=t,this._unmergedPaths.add(t.path)}}static async from(t){if(u.isBuffer(t))return S.fromBuffer(t);if(null===t)return new S(null);throw new m("invalid type passed to GitIndex.from")}static async fromBuffer(t){if(0===t.length)throw new m("Index file is empty (.git/index)");const e=new S,n=new y(t),r=n.toString("utf8",4);if("DIRC"!==r)throw new m(`Invalid dircache magic file number: ${r}`);const i=await _(t.slice(0,-20)),a=t.slice(-20).toString("hex");if(a!==i)throw new m(`Invalid checksum in GitIndex buffer: expected ${a} but saw ${i}`);const o=n.readUInt32BE();if(2!==o)throw new m(`Unsupported dircache version: ${o}`);const s=n.readUInt32BE();let l=0;for(;!n.eof()&&l<s;){const r={};r.ctimeSeconds=n.readUInt32BE(),r.ctimeNanoseconds=n.readUInt32BE(),r.mtimeSeconds=n.readUInt32BE(),r.mtimeNanoseconds=n.readUInt32BE(),r.dev=n.readUInt32BE(),r.ino=n.readUInt32BE(),r.mode=n.readUInt32BE(),r.uid=n.readUInt32BE(),r.gid=n.readUInt32BE(),r.size=n.readUInt32BE(),r.oid=n.slice(20).toString("hex");const i=n.readUInt16BE();r.flags=(c=i,{assumeValid:Boolean(32768&c),extended:Boolean(16384&c),stage:(12288&c)>>12,nameLength:4095&c});const a=t.indexOf(0,n.tell()+1)-n.tell();if(a<1)throw new m(`Got a path length of: ${a}`);if(r.path=n.toString("utf8",a),r.path.includes("..\\")||r.path.includes("../"))throw new g(r.path);let o=8-(n.tell()-12)%8;for(0===o&&(o=8);o--;){const t=n.readUInt8();if(0!==t)throw new m(`Expected 1-8 null characters but got '${t}' after ${r.path}`);if(n.eof())throw new m("Unexpected end of file")}r.stages=[],e._addEntry(r),l++}var c;return e}get unmergedPaths(){return[...this._unmergedPaths]}get entries(){return[...this._entries.values()].sort(b)}get entriesMap(){return this._entries}get entriesFlat(){return[...this.entries].flatMap((t=>t.stages.length>1?t.stages.filter((t=>t)):t))}*[Symbol.iterator](){for(const t of this.entries)yield t}insert({filepath:t,stats:e,oid:n,stage:r=0}){e||(e={ctimeSeconds:0,ctimeNanoseconds:0,mtimeSeconds:0,mtimeNanoseconds:0,dev:0,ino:0,mode:0,uid:0,gid:0,size:0}),e=A(e);const i=u.from(t),a={ctimeSeconds:e.ctimeSeconds,ctimeNanoseconds:e.ctimeNanoseconds,mtimeSeconds:e.mtimeSeconds,mtimeNanoseconds:e.mtimeNanoseconds,dev:e.dev,ino:e.ino,mode:e.mode||33188,uid:e.uid,gid:e.gid,size:e.size,path:t,oid:n,flags:{assumeValid:!1,extended:!1,stage:r,nameLength:i.length<4095?i.length:4095},stages:[]};this._addEntry(a),this._dirty=!0}delete({filepath:t}){if(this._entries.has(t))this._entries.delete(t);else for(const e of this._entries.keys())e.startsWith(t+"/")&&this._entries.delete(e);this._unmergedPaths.has(t)&&this._unmergedPaths.delete(t),this._dirty=!0}clear(){this._entries.clear(),this._dirty=!0}has({filepath:t}){return this._entries.has(t)}render(){return this.entries.map((t=>`${t.mode.toString(8)} ${t.oid}    ${t.path}`)).join("\n")}static async _entryToBuffer(t){const e=u.from(t.path),n=8*Math.ceil((62+e.length+1)/8),r=u.alloc(n),i=new y(r),a=A(t);return i.writeUInt32BE(a.ctimeSeconds),i.writeUInt32BE(a.ctimeNanoseconds),i.writeUInt32BE(a.mtimeSeconds),i.writeUInt32BE(a.mtimeNanoseconds),i.writeUInt32BE(a.dev),i.writeUInt32BE(a.ino),i.writeUInt32BE(a.mode),i.writeUInt32BE(a.uid),i.writeUInt32BE(a.gid),i.writeUInt32BE(a.size),i.write(t.oid,20,"hex"),i.writeUInt16BE(function(t){const e=t.flags;return e.extended=!1,e.nameLength=Math.min(u.from(t.path).length,4095),(e.assumeValid?32768:0)+(e.extended?16384:0)+((3&e.stage)<<12)+(4095&e.nameLength)}(t)),i.write(t.path,e.length,"utf8"),r}async toObject(){const t=u.alloc(12),e=new y(t);e.write("DIRC",4,"utf8"),e.writeUInt32BE(2),e.writeUInt32BE(this.entriesFlat.length);let n=[];for(const t of this.entries)if(n.push(S._entryToBuffer(t)),t.stages.length>1)for(const e of t.stages)e&&e!==t&&n.push(S._entryToBuffer(e));n=await Promise.all(n);const r=u.concat(n),i=u.concat([t,r]),a=await _(i);return u.concat([i,u.from(a,"hex")])}}function I(t,e,n=!0,r=!0){const i=A(t),a=A(e);return n&&i.mode!==a.mode||i.mtimeSeconds!==a.mtimeSeconds||i.ctimeSeconds!==a.ctimeSeconds||i.uid!==a.uid||i.gid!==a.gid||r&&i.ino!==a.ino||i.size!==a.size}let P=null;const q=Symbol("IndexCache");class C{static async acquire({fs:t,gitdir:e,cache:n,allowUnmerged:i=!0},a){n[q]||(n[q]={map:new Map,stats:new Map});const o=`${e}/index`;let s;null===P&&(P=new r({maxPending:1/0}));let l=[];return await P.acquire(o,(async()=>{const e=n[q];await async function(t,e,n){const r=n.stats.get(e);if(void 0===r)return!0;if(null===r)return!1;const i=await t.lstat(e);return null!==i&&I(r,i)}(t,o,e)&&await async function(t,e,n){const[r,i]=await Promise.all([t.lstat(e),t.read(e)]),a=await S.from(i);n.map.set(e,a),n.stats.set(e,r)}(t,o,e);const r=e.map.get(o);if(l=r.unmergedPaths,l.length&&!i)throw new f(l);if(s=await a(r),r._dirty){const n=await r.toObject();await t.write(o,n),e.stats.set(o,await t.lstat(o)),r._dirty=!1}})),s}}function j(t){const e=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return e>-1&&(t=t.slice(e+1)),t}function z(t){const e=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===e?".":0===e?"/":t.slice(0,e)}function D(t){const e=new Map,n=function(t){if(!e.has(t)){const r={type:"tree",fullpath:t,basename:j(t),metadata:{},children:[]};e.set(t,r),r.parent=n(z(t)),r.parent&&r.parent!==r&&r.parent.children.push(r)}return e.get(t)},r=function(t,r){if(!e.has(t)){const i={type:"blob",fullpath:t,basename:j(t),metadata:r,parent:n(z(t)),children:[]};i.parent&&i.parent.children.push(i),e.set(t,i)}return e.get(t)};n(".");for(const e of t)r(e.path,e);return e}class O{constructor({fs:t,gitdir:e,cache:n}){this.treePromise=C.acquire({fs:t,gitdir:e,cache:n},(async function(t){return D(t.entries)}));const r=this;this.ConstructEntry=class{constructor(t){this._fullpath=t,this._type=!1,this._mode=!1,this._stat=!1,this._oid=!1}async type(){return r.type(this)}async mode(){return r.mode(this)}async stat(){return r.stat(this)}async content(){return r.content(this)}async oid(){return r.oid(this)}}}async readdir(t){const e=t._fullpath,n=(await this.treePromise).get(e);if(!n)return null;if("blob"===n.type)return null;if("tree"!==n.type)throw new Error(`ENOTDIR: not a directory, scandir '${e}'`);const r=n.children.map((t=>t.fullpath));return r.sort(v),r}async type(t){return!1===t._type&&await t.stat(),t._type}async mode(t){return!1===t._mode&&await t.stat(),t._mode}async stat(t){if(!1===t._stat){const e=(await this.treePromise).get(t._fullpath);if(!e)throw new Error(`ENOENT: no such file or directory, lstat '${t._fullpath}'`);const n="tree"===e.type?{}:A(e.metadata);t._type="tree"===e.type?"tree":function(t){switch(t){case 16384:return"tree";case 33188:case 33261:case 40960:return"blob";case 57344:return"commit"}throw new m(`Unexpected GitTree entry mode: ${t.toString(8)}`)}(n.mode),t._mode=n.mode,"tree"===e.type?t._stat=void 0:t._stat=n}return t._stat}async content(t){}async oid(t){if(!1===t._oid){const e=(await this.treePromise).get(t._fullpath);t._oid=e.metadata.oid}return t._oid}}const M=Symbol("GitWalkSymbol");function B(){const t=Object.create(null);return Object.defineProperty(t,M,{value:function({fs:t,gitdir:e,cache:n}){return new O({fs:t,gitdir:e,cache:n})}}),Object.freeze(t),t}class F extends p{constructor(t){super(`Could not find ${t}.`),this.code=this.name=F.code,this.data={what:t}}}F.code="NotFoundError";class R extends p{constructor(t,e,n,r){super(`Object ${t} ${r?`at ${r}`:""}was anticipated to be a ${n} but it is a ${e}.`),this.code=this.name=R.code,this.data={oid:t,actual:e,expected:n,filepath:r}}}R.code="ObjectTypeError";class L extends p{constructor(t){super(`Expected a 40-char hex object id but saw "${t}".`),this.code=this.name=L.code,this.data={value:t}}}L.code="InvalidOidError";class N extends p{constructor(t){super(`Could not find a fetch refspec for remote "${t}". Make sure the config file has an entry like the following:\n[remote "${t}"]\n\tfetch = +refs/heads/*:refs/remotes/origin/*\n`),this.code=this.name=N.code,this.data={remote:t}}}N.code="NoRefspecError";class H{constructor(t){if(this.refs=new Map,this.parsedConfig=[],t){let e=null;this.parsedConfig=t.trim().split("\n").map((t=>{if(/^\s*#/.test(t))return{line:t,comment:!0};const n=t.indexOf(" ");if(t.startsWith("^")){const n=t.slice(1);return this.refs.set(e+"^{}",n),{line:t,ref:e,peeled:n}}{const r=t.slice(0,n);return e=t.slice(n+1),this.refs.set(e,r),{line:t,ref:e,oid:r}}}))}return this}static from(t){return new H(t)}delete(t){this.parsedConfig=this.parsedConfig.filter((e=>e.ref!==t)),this.refs.delete(t)}toString(){return this.parsedConfig.map((({line:t})=>t)).join("\n")+"\n"}}class U{constructor({remotePath:t,localPath:e,force:n,matchPrefix:r}){Object.assign(this,{remotePath:t,localPath:e,force:n,matchPrefix:r})}static from(t){const[e,n,r,i,a]=t.match(/^(\+?)(.*?)(\*?):(.*?)(\*?)$/).slice(1),o="+"===e,s="*"===r;if(s!==("*"===a))throw new m("Invalid refspec");return new U({remotePath:n,localPath:i,force:o,matchPrefix:s})}translate(t){if(this.matchPrefix){if(t.startsWith(this.remotePath))return this.localPath+t.replace(this.remotePath,"")}else if(t===this.remotePath)return this.localPath;return null}reverseTranslate(t){if(this.matchPrefix){if(t.startsWith(this.localPath))return this.remotePath+t.replace(this.localPath,"")}else if(t===this.localPath)return this.remotePath;return null}}class W{constructor(t=[]){this.rules=t}static from(t){const e=[];for(const n of t)e.push(U.from(n));return new W(e)}add(t){const e=U.from(t);this.rules.push(e)}translate(t){const e=[];for(const n of this.rules)for(const r of t){const t=n.translate(r);t&&e.push([r,t])}return e}translateOne(t){let e=null;for(const n of this.rules){const r=n.translate(t);r&&(e=r)}return e}localNamespaces(){return this.rules.filter((t=>t.matchPrefix)).map((t=>t.localPath.replace(/\/$/,"")))}}function G(t,e){const n=t.replace(/\^\{\}$/,""),r=e.replace(/\^\{\}$/,""),i=-(n<r)||+(n>r);return 0===i?t.endsWith("^{}")?1:-1:i}const Q=t=>{if("boolean"==typeof t)return t;if("true"===(t=t.trim().toLowerCase())||"yes"===t||"on"===t)return!0;if("false"===t||"no"===t||"off"===t)return!1;throw Error(`Expected 'true', 'false', 'yes', 'no', 'on', or 'off', but got ${t}`)},Y={core:{filemode:Q,bare:Q,logallrefupdates:Q,symlinks:Q,ignorecase:Q,bigFileThreshold:t=>{if("number"==typeof t)return t;t=t.toLowerCase();let e=parseInt(t);return t.endsWith("k")&&(e*=1024),t.endsWith("m")&&(e*=1048576),t.endsWith("g")&&(e*=1073741824),e}}},J=/^\[([A-Za-z0-9-.]+)(?: "(.*)")?\]$/,K=/^[A-Za-z0-9-.]+$/,X=/^([A-Za-z][A-Za-z-]*)(?: *= *(.*))?$/,V=/^[A-Za-z][A-Za-z-]*$/,Z=/^(.*?)( *[#;].*)$/,$=t=>(t.match(/(?:^|[^\\])"/g)||[]).length%2!=0,tt=t=>t.split("").reduce(((t,e,n,r)=>{const i='"'===e&&"\\"!==r[n-1],a="\\"===e&&'"'===r[n+1];return i||a?t:t+e}),""),et=t=>null!=t?t.toLowerCase():null,nt=(t,e,n)=>[et(t),e,et(n)].filter((t=>null!=t)).join("."),rt=t=>{const e=t.split("."),n=e.shift(),r=e.pop(),i=e.length?e.join("."):void 0;return{section:n,subsection:i,name:r,path:nt(n,i,r),sectionPath:nt(n,i,null),isSection:!!n}};class it{constructor(t){let e=null,n=null;this.parsedConfig=t?t.split("\n").map((t=>{let r=null,i=null;const a=t.trim(),o=(t=>{const e=J.exec(t);if(null!=e){const[t,n]=e.slice(1);return[t,n]}return null})(a),s=null!=o;if(s)[e,n]=o;else{const t=(t=>{const e=X.exec(t);if(null!=e){const[t,n="true"]=e.slice(1),r=(t=>{const e=Z.exec(t);if(null==e)return t;const[n,r]=e.slice(1);return $(n)&&$(r)?`${n}${r}`:n})(n);return[t,tt(r)]}return null})(a);null!=t&&([r,i]=t)}const l=nt(e,n,r);return{line:t,isSection:s,section:e,subsection:n,name:r,value:i,path:l}})):[]}static from(t){return new it(t)}async get(t,e=!1){const n=rt(t).path,r=this.parsedConfig.filter((t=>t.path===n)).map((({section:t,name:e,value:n})=>{const r=Y[t]&&Y[t][e];return r?r(n):n}));return e?r:r.pop()}async getall(t){return this.get(t,!0)}async getSubsections(t){return this.parsedConfig.filter((e=>e.isSection&&e.section===t)).map((t=>t.subsection))}async deleteSection(t,e){this.parsedConfig=this.parsedConfig.filter((n=>!(n.section===t&&n.subsection===e)))}async append(t,e){return this.set(t,e,!0)}async set(t,e,n=!1){const{section:r,subsection:i,name:a,path:o,sectionPath:s,isSection:l}=rt(t),c=(d=this.parsedConfig,h=t=>t.path===o,d.reduce(((t,e,n)=>h(e)?n:t),-1));var d,h;if(null==e)-1!==c&&this.parsedConfig.splice(c,1);else if(-1!==c){const t=this.parsedConfig[c],r=Object.assign({},t,{name:a,value:e,modified:!0});n?this.parsedConfig.splice(c+1,0,r):this.parsedConfig[c]=r}else{const t=this.parsedConfig.findIndex((t=>t.path===s)),n={section:r,subsection:i,name:a,value:e,modified:!0,path:o};if(K.test(r)&&V.test(a))if(t>=0)this.parsedConfig.splice(t+1,0,n);else{const t={isSection:l,section:r,subsection:i,modified:!0,path:s};this.parsedConfig.push(t,n)}}}toString(){return this.parsedConfig.map((({line:t,section:e,subsection:n,name:r,value:i,modified:a=!1})=>a?null!=r&&null!=i?"string"==typeof i&&/[#;]/.test(i)?`\t${r} = "${i}"`:`\t${r} = ${i}`:null!=n?`[${e} "${n}"]`:`[${e}]`:t)).join("\n")}}class at{static async get({fs:t,gitdir:e}){const n=await t.read(`${e}/config`,{encoding:"utf8"});return it.from(n)}static async save({fs:t,gitdir:e,config:n}){await t.write(`${e}/config`,n.toString(),{encoding:"utf8"})}}const ot=t=>[`${t}`,`refs/${t}`,`refs/tags/${t}`,`refs/heads/${t}`,`refs/remotes/${t}`,`refs/remotes/${t}/HEAD`],st=["config","description","index","shallow","commondir"];let lt;async function ct(t,e){return void 0===lt&&(lt=new r),lt.acquire(t,e)}class dt{static async updateRemoteRefs({fs:t,gitdir:e,remote:n,refs:r,symrefs:i,tags:o,refspecs:s,prune:l=!1,pruneTags:c=!1}){for(const t of r.values())if(!t.match(/[0-9a-f]{40}/))throw new L(t);const d=await at.get({fs:t,gitdir:e});if(!s){if(0===(s=await d.getall(`remote.${n}.fetch`)).length)throw new N(n);s.unshift(`+HEAD:refs/remotes/${n}/HEAD`)}const h=W.from(s),u=new Map;if(c){const n=await dt.listRefs({fs:t,gitdir:e,filepath:"refs/tags"});await dt.deleteRefs({fs:t,gitdir:e,refs:n.map((t=>`refs/tags/${t}`))})}if(o)for(const n of r.keys())if(n.startsWith("refs/tags")&&!n.endsWith("^{}")&&!await dt.exists({fs:t,gitdir:e,ref:n})){const t=r.get(n);u.set(n,t)}const p=h.translate([...r.keys()]);for(const[t,e]of p){const n=r.get(t);u.set(e,n)}const f=h.translate([...i.keys()]);for(const[t,e]of f){const n=i.get(t),r=h.translateOne(n);r&&u.set(e,`ref: ${r}`)}const m=[];if(l){for(const n of h.localNamespaces()){const r=(await dt.listRefs({fs:t,gitdir:e,filepath:n})).map((t=>`${n}/${t}`));for(const t of r)u.has(t)||m.push(t)}m.length>0&&await dt.deleteRefs({fs:t,gitdir:e,refs:m})}for(const[n,r]of u)await ct(n,(async()=>t.write((0,a.join)(e,n),`${r.trim()}\n`,"utf8")));return{pruned:m}}static async writeRef({fs:t,gitdir:e,ref:n,value:r}){if(!r.match(/[0-9a-f]{40}/))throw new L(r);await ct(n,(async()=>t.write((0,a.join)(e,n),`${r.trim()}\n`,"utf8")))}static async writeSymbolicRef({fs:t,gitdir:e,ref:n,value:r}){await ct(n,(async()=>t.write((0,a.join)(e,n),`ref: ${r.trim()}\n`,"utf8")))}static async deleteRef({fs:t,gitdir:e,ref:n}){return dt.deleteRefs({fs:t,gitdir:e,refs:[n]})}static async deleteRefs({fs:t,gitdir:e,refs:n}){await Promise.all(n.map((n=>t.rm((0,a.join)(e,n)))));let r=await ct("packed-refs",(async()=>t.read(`${e}/packed-refs`,{encoding:"utf8"})));const i=H.from(r),o=i.refs.size;for(const t of n)i.refs.has(t)&&i.delete(t);i.refs.size<o&&(r=i.toString(),await ct("packed-refs",(async()=>t.write(`${e}/packed-refs`,r,{encoding:"utf8"}))))}static async resolve({fs:t,gitdir:e,ref:n,depth:r}){if(void 0!==r&&-1==--r)return n;if(n.startsWith("ref: "))return n=n.slice(5),dt.resolve({fs:t,gitdir:e,ref:n,depth:r});if(40===n.length&&/[0-9a-f]{40}/.test(n))return n;const i=await dt.packedRefs({fs:t,gitdir:e}),a=ot(n).filter((t=>!st.includes(t)));for(const n of a){const a=await ct(n,(async()=>await t.read(`${e}/${n}`,{encoding:"utf8"})||i.get(n)));if(a)return dt.resolve({fs:t,gitdir:e,ref:a.trim(),depth:r})}throw new F(n)}static async exists({fs:t,gitdir:e,ref:n}){try{return await dt.expand({fs:t,gitdir:e,ref:n}),!0}catch(t){return!1}}static async expand({fs:t,gitdir:e,ref:n}){if(40===n.length&&/[0-9a-f]{40}/.test(n))return n;const r=await dt.packedRefs({fs:t,gitdir:e}),i=ot(n);for(const n of i){if(await ct(n,(async()=>t.exists(`${e}/${n}`))))return n;if(r.has(n))return n}throw new F(n)}static async expandAgainstMap({ref:t,map:e}){const n=ot(t);for(const t of n)if(await e.has(t))return t;throw new F(t)}static resolveAgainstMap({ref:t,fullref:e=t,depth:n,map:r}){if(void 0!==n&&-1==--n)return{fullref:e,oid:t};if(t.startsWith("ref: "))return t=t.slice(5),dt.resolveAgainstMap({ref:t,fullref:e,depth:n,map:r});if(40===t.length&&/[0-9a-f]{40}/.test(t))return{fullref:e,oid:t};const i=ot(t);for(const t of i){const e=r.get(t);if(e)return dt.resolveAgainstMap({ref:e.trim(),fullref:t,depth:n,map:r})}throw new F(t)}static async packedRefs({fs:t,gitdir:e}){const n=await ct("packed-refs",(async()=>t.read(`${e}/packed-refs`,{encoding:"utf8"})));return H.from(n).refs}static async listRefs({fs:t,gitdir:e,filepath:n}){const r=dt.packedRefs({fs:t,gitdir:e});let i=null;try{i=await t.readdirDeep(`${e}/${n}`),i=i.map((t=>t.replace(`${e}/${n}/`,"")))}catch(t){i=[]}for(let t of(await r).keys())t.startsWith(n)&&(t=t.replace(n+"/",""),i.includes(t)||i.push(t));return i.sort(G),i}static async listBranches({fs:t,gitdir:e,remote:n}){return n?dt.listRefs({fs:t,gitdir:e,filepath:`refs/remotes/${n}`}):dt.listRefs({fs:t,gitdir:e,filepath:"refs/heads"})}static async listTags({fs:t,gitdir:e}){return(await dt.listRefs({fs:t,gitdir:e,filepath:"refs/tags"})).filter((t=>!t.endsWith("^{}")))}}function ht(t,e){return v(ut(t),ut(e))}function ut(t){return"040000"===t.mode?t.path+"/":t.path}function pt(t){switch(t){case"040000":return"tree";case"100644":case"100755":case"120000":return"blob";case"160000":return"commit"}throw new m(`Unexpected GitTree entry mode: ${t}`)}function ft(t){return!t.oid&&t.sha&&(t.oid=t.sha),t.mode=function(t){if("number"==typeof t&&(t=t.toString(8)),t.match(/^0?4.*/))return"040000";if(t.match(/^1006.*/))return"100644";if(t.match(/^1007.*/))return"100755";if(t.match(/^120.*/))return"120000";if(t.match(/^160.*/))return"160000";throw new m(`Could not understand file mode: ${t}`)}(t.mode),t.type||(t.type=pt(t.mode)),t}class mt{constructor(t){if(u.isBuffer(t))this._entries=function(t){const e=[];let n=0;for(;n<t.length;){const r=t.indexOf(32,n);if(-1===r)throw new m(`GitTree: Error parsing buffer at byte location ${n}: Could not find the next space character.`);const i=t.indexOf(0,n);if(-1===i)throw new m(`GitTree: Error parsing buffer at byte location ${n}: Could not find the next null character.`);let a=t.slice(n,r).toString("utf8");"40000"===a&&(a="040000");const o=pt(a),s=t.slice(r+1,i).toString("utf8");if(s.includes("\\")||s.includes("/"))throw new g(s);const l=t.slice(i+1,i+21).toString("hex");n=i+21,e.push({mode:a,path:s,oid:l,type:o})}return e}(t);else{if(!Array.isArray(t))throw new m("invalid type passed to GitTree constructor");this._entries=t.map(ft)}this._entries.sort(b)}static from(t){return new mt(t)}render(){return this._entries.map((t=>`${t.mode} ${t.type} ${t.oid}    ${t.path}`)).join("\n")}toObject(){const t=[...this._entries];return t.sort(ht),u.concat(t.map((t=>{const e=u.from(t.mode.replace(/^0/,"")),n=u.from(" "),r=u.from(t.path,"utf8"),i=u.from([0]),a=u.from(t.oid,"hex");return u.concat([e,n,r,i,a])})))}entries(){return this._entries}*[Symbol.iterator](){for(const t of this._entries)yield t}}class gt{static wrap({type:t,object:e}){return u.concat([u.from(`${t} ${e.byteLength.toString()}\0`),u.from(e)])}static unwrap(t){const e=t.indexOf(32),n=t.indexOf(0),r=t.slice(0,e).toString("utf8"),i=t.slice(e+1,n).toString("utf8"),a=t.length-(n+1);if(parseInt(i)!==a)throw new m(`Length mismatch: expected ${i} bytes but got ${a} instead.`);return{type:r,object:u.from(t.slice(n+1))}}}async function yt({fs:t,gitdir:e,oid:n}){const r=`objects/${n.slice(0,2)}/${n.slice(2)}`,i=await t.read(`${e}/${r}`);return i?{object:i,format:"deflated",source:r}:null}function vt(t){let e=0,n=0,r=null;do{r=t.readUInt8(),e|=(127&r)<<n,n+=7}while(128&r);return e}function bt(t,e,n){let r=0,i=0;for(;n--;)1&e&&(r|=t.readUInt8()<<i),e>>=1,i+=8;return r}function wt(t,e){const n=t.readUInt8();if(128&n){const r=bt(t,15&n,4);let i=bt(t,(112&n)>>4,3);return 0===i&&(i=65536),e.slice(r,r+i)}return t.slice(n)}function xt(t){return t[Symbol.asyncIterator]?t[Symbol.asyncIterator]():t[Symbol.iterator]?t[Symbol.iterator]():t.next?t:function(t){let e=[t];return{next:()=>Promise.resolve({done:0===e.length,value:e.pop()}),return:()=>(e=[],{}),[Symbol.asyncIterator](){return this}}}(t)}class kt{constructor(t){if(void 0===u)throw new Error("Missing Buffer dependency");this.stream=xt(t),this.buffer=null,this.cursor=0,this.undoCursor=0,this.started=!1,this._ended=!1,this._discardedBytes=0}eof(){return this._ended&&this.cursor===this.buffer.length}tell(){return this._discardedBytes+this.cursor}async byte(){if(!this.eof()&&(this.started||await this._init(),this.cursor!==this.buffer.length||(await this._loadnext(),!this._ended)))return this._moveCursor(1),this.buffer[this.undoCursor]}async chunk(){if(!this.eof()&&(this.started||await this._init(),this.cursor!==this.buffer.length||(await this._loadnext(),!this._ended)))return this._moveCursor(this.buffer.length),this.buffer.slice(this.undoCursor,this.cursor)}async read(t){if(!this.eof())return this.started||await this._init(),this.cursor+t>this.buffer.length&&(this._trim(),await this._accumulate(t)),this._moveCursor(t),this.buffer.slice(this.undoCursor,this.cursor)}async skip(t){this.eof()||(this.started||await this._init(),this.cursor+t>this.buffer.length&&(this._trim(),await this._accumulate(t)),this._moveCursor(t))}async undo(){this.cursor=this.undoCursor}async _next(){this.started=!0;let{done:t,value:e}=await this.stream.next();return t&&(this._ended=!0,!e)?u.alloc(0):(e&&(e=u.from(e)),e)}_trim(){this.buffer=this.buffer.slice(this.undoCursor),this.cursor-=this.undoCursor,this._discardedBytes+=this.undoCursor,this.undoCursor=0}_moveCursor(t){this.undoCursor=this.cursor,this.cursor+=t,this.cursor>this.buffer.length&&(this.cursor=this.buffer.length)}async _accumulate(t){if(this._ended)return;const e=[this.buffer];for(;this.cursor+t>At(e);){const t=await this._next();if(this._ended)break;e.push(t)}this.buffer=u.concat(e)}async _loadnext(){this._discardedBytes+=this.buffer.length,this.undoCursor=0,this.cursor=0,this.buffer=await this._next()}async _init(){this.buffer=await this._next()}}function At(t){return t.reduce(((t,e)=>t+e.length),0)}async function Tt(t){let e=await t.byte();const n=e>>4&7;let r,i,a=15&e;if(128&e){let n=4;do{e=await t.byte(),a|=(127&e)<<n,n+=7}while(128&e)}if(6===n){let n=0;r=0;const a=[];do{e=await t.byte(),r|=(127&e)<<n,n+=7,a.push(e)}while(128&e);i=u.from(a)}return 7===n&&(i=await t.read(20)),{type:n,length:a,ofs:r,reference:i}}let _t=!1;async function Et(t){return null===_t&&(_t=function(){try{if(new DecompressionStream("deflate"))return!0}catch(t){}return!1}()),_t?async function(t){const e=new DecompressionStream("deflate"),n=new Blob([t]).stream().pipeThrough(e);return new Uint8Array(await new Response(n).arrayBuffer())}(t):s.inflate(t)}class St{constructor(t){Object.assign(this,t),this.offsetCache={}}static async fromIdx({idx:t,getExternalRefDelta:e}){const n=new y(t);if("ff744f63"!==n.slice(4).toString("hex"))return;const r=n.readUInt32BE();if(2!==r)throw new m(`Unable to read version ${r} packfile IDX. (Only version 2 supported)`);if(t.byteLength>2147483648)throw new m("To keep implementation simple, I haven't implemented the layer 5 feature needed to support packfiles > 2GB in size.");n.seek(n.tell()+1020);const i=n.readUInt32BE(),a=[];for(let t=0;t<i;t++){const e=n.slice(20).toString("hex");a[t]=e}n.seek(n.tell()+4*i);const o=new Map;for(let t=0;t<i;t++)o.set(a[t],n.readUInt32BE());const s=n.slice(20).toString("hex");return new St({hashes:a,crcs:{},offsets:o,packfileSha:s,getExternalRefDelta:e})}static async fromPack({pack:t,getExternalRefDelta:e,onProgress:n}){const r={1:"commit",2:"tree",3:"blob",4:"tag",6:"ofs-delta",7:"ref-delta"},i={},a=t.slice(-20).toString("hex"),l=[],c={},d=new Map;let h=null,u=null;await async function(t,e){const n=new kt(t);let r=await n.read(4);if(r=r.toString("utf8"),"PACK"!==r)throw new m(`Invalid PACK header '${r}'`);let i=await n.read(4);if(i=i.readUInt32BE(0),2!==i)throw new m(`Invalid packfile version: ${i}`);let a=await n.read(4);if(a=a.readUInt32BE(0),!(a<1))for(;!n.eof()&&a--;){const t=n.tell(),{type:r,length:i,ofs:o,reference:l}=await Tt(n),c=new s.Inflate;for(;!c.result;){const s=await n.chunk();if(!s)break;if(c.push(s,!1),c.err)throw new m(`Pako error: ${c.msg}`);if(c.result){if(c.result.length!==i)throw new m("Inflated object size is different from that stated in packfile.");await n.undo(),await n.read(s.length-c.strm.avail_in);const d=n.tell();await e({data:c.result,type:r,num:a,offset:t,end:d,reference:l,ofs:o})}}}}([t],(async({data:t,type:e,reference:a,offset:o,num:s})=>{null===h&&(h=s);const l=Math.floor(100*(h-s)/h);l!==u&&n&&await n({phase:"Receiving objects",loaded:h-s,total:h}),u=l,(["commit","tree","blob","tag"].includes(e=r[e])||"ofs-delta"===e||"ref-delta"===e)&&(i[o]={type:e,offset:o})}));const p=Object.keys(i).map(Number);for(const[e,n]of p.entries()){const r=e+1===p.length?t.byteLength-20:p[e+1],a=i[n],s=o.buf(t.slice(n,r))>>>0;a.end=r,a.crc=s}const f=new St({pack:Promise.resolve(t),packfileSha:a,crcs:c,hashes:l,offsets:d,getExternalRefDelta:e});u=null;let g=0;const y=[0,0,0,0,0,0,0,0,0,0,0,0];for(let t in i){t=Number(t);const e=Math.floor(100*g/h);e!==u&&n&&await n({phase:"Resolving deltas",loaded:g,total:h}),g++,u=e;const r=i[t];if(!r.oid)try{f.readDepth=0,f.externalReadDepth=0;const{type:e,object:n}=await f.readSlice({start:t});y[f.readDepth]+=1;const i=await _(gt.wrap({type:e,object:n}));r.oid=i,l.push(i),d.set(i,t),c[i]=r.crc}catch(t){continue}}return l.sort(),f}async toBuffer(){const t=[],e=(e,n)=>{t.push(u.from(e,n))};e("ff744f63","hex"),e("00000002","hex");const n=new y(u.alloc(1024));for(let t=0;t<256;t++){let e=0;for(const n of this.hashes)parseInt(n.slice(0,2),16)<=t&&e++;n.writeUInt32BE(e)}t.push(n.buffer);for(const t of this.hashes)e(t,"hex");const r=new y(u.alloc(4*this.hashes.length));for(const t of this.hashes)r.writeUInt32BE(this.crcs[t]);t.push(r.buffer);const i=new y(u.alloc(4*this.hashes.length));for(const t of this.hashes)i.writeUInt32BE(this.offsets.get(t));t.push(i.buffer),e(this.packfileSha,"hex");const a=u.concat(t),o=await _(a),s=u.alloc(20);return s.write(o,"hex"),u.concat([a,s])}async load({pack:t}){this.pack=t}async unload(){this.pack=null}async read({oid:t}){if(!this.offsets.get(t)){if(this.getExternalRefDelta)return this.externalReadDepth++,this.getExternalRefDelta(t);throw new m(`Could not read object ${t} from packfile`)}const e=this.offsets.get(t);return this.readSlice({start:e})}async readSlice({start:t}){if(this.offsetCache[t])return Object.assign({},this.offsetCache[t]);if(this.readDepth++,!this.pack)throw new m("Tried to read from a GitPackIndex with no packfile loaded into memory");const e=(await this.pack).slice(t),n=new y(e),r=n.readUInt8(),i=112&r;let a={16:"commit",32:"tree",48:"blob",64:"tag",96:"ofs_delta",112:"ref_delta"}[i];if(void 0===a)throw new m("Unrecognized type: 0b"+i.toString(2));const o=15&r;let s=o;128&r&&(s=function(t,e){let n=e,r=4,i=null;do{i=t.readUInt8(),n|=(127&i)<<r,r+=7}while(128&i);return n}(n,o));let l=null,c=null;if("ofs_delta"===a){const e=function(t){const e=[];let n=0,r=0;do{n=t.readUInt8();const i=127&n;e.push(i),r=128&n}while(r);return e.reduce(((t,e)=>t+1<<7|e),-1)}(n),r=t-e;({object:l,type:a}=await this.readSlice({start:r}))}if("ref_delta"===a){const t=n.slice(20).toString("hex");({object:l,type:a}=await this.read({oid:t}))}const d=e.slice(n.tell());if(c=u.from(await Et(d)),c.byteLength!==s)throw new m(`Packfile told us object would have length ${s} but it had length ${c.byteLength}`);return l&&(c=u.from(function(t,e){const n=new y(t),r=vt(n);if(r!==e.byteLength)throw new m(`applyDelta expected source buffer to be ${r} bytes but the provided buffer was ${e.length} bytes`);const i=vt(n);let a;const o=wt(n,e);if(o.byteLength===i)a=o;else{a=u.alloc(i);const t=new y(a);for(t.copy(o);!n.eof();)t.copy(wt(n,e));const r=t.tell();if(i!==r)throw new m(`applyDelta expected target buffer to be ${i} bytes but the resulting buffer was ${r} bytes`)}return a}(c,l))),this.readDepth>3&&(this.offsetCache[t]={type:a,object:c}),{type:a,format:"content",object:c}}}const It=Symbol("PackfileCache");function Pt({fs:t,cache:e,filename:n,getExternalRefDelta:r,emitter:i,emitterPrefix:a}){e[It]||(e[It]=new Map);let o=e[It].get(n);return o||(o=async function({fs:t,filename:e,getExternalRefDelta:n,emitter:r,emitterPrefix:i}){const a=await t.read(e);return St.fromIdx({idx:a,getExternalRefDelta:n})}({fs:t,filename:n,getExternalRefDelta:r,emitter:i,emitterPrefix:a}),e[It].set(n,o)),o}async function qt({fs:t,cache:e,gitdir:n,oid:r,format:i="content"}){const o=r=>qt({fs:t,cache:e,gitdir:n,oid:r});let s;if("4b825dc642cb6eb9a060e54bf8d69288fbee4904"===r&&(s={format:"wrapped",object:u.from("tree 0\0")}),s||(s=await yt({fs:t,gitdir:n,oid:r})),!s){if(s=await async function({fs:t,cache:e,gitdir:n,oid:r,format:i="content",getExternalRefDelta:o}){let s=await t.readdir((0,a.join)(n,"objects/pack"));s=s.filter((t=>t.endsWith(".idx")));for(const i of s){const a=`${n}/objects/pack/${i}`,s=await Pt({fs:t,cache:e,filename:a,getExternalRefDelta:o});if(s.error)throw new m(s.error);if(s.offsets.has(r)){if(!s.pack){const e=a.replace(/idx$/,"pack");s.pack=t.read(e)}const e=await s.read({oid:r,getExternalRefDelta:o});return e.format="content",e.source=`objects/pack/${i.replace(/idx$/,"pack")}`,e}}return null}({fs:t,cache:e,gitdir:n,oid:r,getExternalRefDelta:o}),!s)throw new F(r);return s}if("deflated"===i)return s;if("deflated"===s.format&&(s.object=u.from(await Et(s.object)),s.format="wrapped"),"wrapped"===i)return s;const l=await _(s.object);if(l!==r)throw new m(`SHA check failed! Expected ${r}, computed ${l}`);const{object:c,type:d}=gt.unwrap(s.object);if(s.type=d,s.object=c,s.format="content","content"===i)return s;throw new m(`invalid requested format "${i}"`)}class Ct extends p{constructor(t,e,n=!0){super(`Failed to create ${t} at ${e} because it already exists.${n?` (Hint: use 'force: true' parameter to overwrite existing ${t}.)`:""}`),this.code=this.name=Ct.code,this.data={noun:t,where:e,canForce:n}}}Ct.code="AlreadyExistsError";class jt extends p{constructor(t,e,n){super(`Found multiple ${t} matching "${e}" (${n.join(", ")}). Use a longer abbreviation length to disambiguate them.`),this.code=this.name=jt.code,this.data={nouns:t,short:e,matches:n}}}jt.code="AmbiguousError";class zt extends p{constructor(t){super(`Your local changes to the following files would be overwritten by checkout: ${t.join(", ")}`),this.code=this.name=zt.code,this.data={filepaths:t}}}zt.code="CheckoutConflictError";class Dt extends p{constructor(t,e){super(`Failed to checkout "${t}" because commit ${e} is not available locally. Do a git fetch to make the branch available locally.`),this.code=this.name=Dt.code,this.data={ref:t,oid:e}}}Dt.code="CommitNotFetchedError";class Ot extends p{constructor(){super("Empty response from git server."),this.code=this.name=Ot.code,this.data={}}}Ot.code="EmptyServerResponseError";class Mt extends p{constructor(){super("A simple fast-forward merge was not possible."),this.code=this.name=Mt.code,this.data={}}}Mt.code="FastForwardError";class Bt extends p{constructor(t,e){super(`One or more branches were not updated: ${t}`),this.code=this.name=Bt.code,this.data={prettyDetails:t,result:e}}}Bt.code="GitPushError";class Ft extends p{constructor(t,e,n){super(`HTTP Error: ${t} ${e}`),this.code=this.name=Ft.code,this.data={statusCode:t,statusMessage:e,response:n}}}Ft.code="HttpError";class Rt extends p{constructor(t){let e="invalid filepath";"leading-slash"===t||"trailing-slash"===t?e='"filepath" parameter should not include leading or trailing directory separators because these can cause problems on some platforms.':"directory"===t&&(e='"filepath" should not be a directory.'),super(e),this.code=this.name=Rt.code,this.data={reason:t}}}Rt.code="InvalidFilepathError";class Lt extends p{constructor(t,e){super(`"${t}" would be an invalid git reference. (Hint: a valid alternative would be "${e}".)`),this.code=this.name=Lt.code,this.data={ref:t,suggestion:e}}}Lt.code="InvalidRefNameError";class Nt extends p{constructor(t){super(`Maximum search depth of ${t} exceeded.`),this.code=this.name=Nt.code,this.data={depth:t}}}Nt.code="MaxDepthError";class Ht extends p{constructor(){super("Merges with conflicts are not supported yet."),this.code=this.name=Ht.code,this.data={}}}Ht.code="MergeNotSupportedError";class Ut extends p{constructor(t,e,n,r){super(`Automatic merge failed with one or more merge conflicts in the following files: ${t.toString()}. Fix conflicts then commit the result.`),this.code=this.name=Ut.code,this.data={filepaths:t,bothModified:e,deleteByUs:n,deleteByTheirs:r}}}Ut.code="MergeConflictError";class Wt extends p{constructor(t){super(`No name was provided for ${t} in the argument or in the .git/config file.`),this.code=this.name=Wt.code,this.data={role:t}}}Wt.code="MissingNameError";class Gt extends p{constructor(t){super(`The function requires a "${t}" parameter but none was provided.`),this.code=this.name=Gt.code,this.data={parameter:t}}}Gt.code="MissingParameterError";class Qt extends p{constructor(t){super('There are multiple errors that were thrown by the method. Please refer to the "errors" property to see more'),this.code=this.name=Qt.code,this.data={errors:t},this.errors=t}}Qt.code="MultipleGitError";class Yt extends p{constructor(t,e){super(`Expected "${t}" but received "${e}".`),this.code=this.name=Yt.code,this.data={expected:t,actual:e}}}Yt.code="ParseError";class Jt extends p{constructor(t){let e="";"not-fast-forward"===t?e=" because it was not a simple fast-forward":"tag-exists"===t&&(e=" because tag already exists"),super(`Push rejected${e}. Use "force: true" to override.`),this.code=this.name=Jt.code,this.data={reason:t}}}Jt.code="PushRejectedError";class Kt extends p{constructor(t,e){super(`Remote does not support the "${t}" so the "${e}" parameter cannot be used.`),this.code=this.name=Kt.code,this.data={capability:t,parameter:e}}}Kt.code="RemoteCapabilityError";class Xt extends p{constructor(t,e){super(`Remote did not reply using the "smart" HTTP protocol. Expected "001e# service=git-upload-pack" but received: ${t}`),this.code=this.name=Xt.code,this.data={preview:t,response:e}}}Xt.code="SmartHttpError";class Vt extends p{constructor(t,e,n){super(`Git remote "${t}" uses an unrecognized transport protocol: "${e}"`),this.code=this.name=Vt.code,this.data={url:t,transport:e,suggestion:n}}}Vt.code="UnknownTransportError";class Zt extends p{constructor(t){super(`Cannot parse remote URL: "${t}"`),this.code=this.name=Zt.code,this.data={url:t}}}Zt.code="UrlParseError";class $t extends p{constructor(){super("The operation was canceled."),this.code=this.name=$t.code,this.data={}}}$t.code="UserCanceledError";class te extends p{constructor(t){super(`Could not merge index: Entry for '${t}' is not up to date. Either reset the index entry to HEAD, or stage your unstaged changes.`),this.code=this.name=te.code,this.data={filepath:t}}}te.code="IndexResetError";class ee extends p{constructor(t){super(`"${t}" does not point to any commit. You're maybe working on a repository with no commits yet. `),this.code=this.name=ee.code,this.data={ref:t}}}ee.code="NoCommitError";var ne=Object.freeze({__proto__:null,AlreadyExistsError:Ct,AmbiguousError:jt,CheckoutConflictError:zt,CommitNotFetchedError:Dt,EmptyServerResponseError:Ot,FastForwardError:Mt,GitPushError:Bt,HttpError:Ft,InternalError:m,InvalidFilepathError:Rt,InvalidOidError:L,InvalidRefNameError:Lt,MaxDepthError:Nt,MergeNotSupportedError:Ht,MergeConflictError:Ut,MissingNameError:Wt,MissingParameterError:Gt,MultipleGitError:Qt,NoRefspecError:N,NotFoundError:F,ObjectTypeError:R,ParseError:Yt,PushRejectedError:Jt,RemoteCapabilityError:Kt,SmartHttpError:Xt,UnknownTransportError:Vt,UnsafeFilepathError:g,UrlParseError:Zt,UserCanceledError:$t,UnmergedPathsError:f,IndexResetError:te,NoCommitError:ee});function re({name:t,email:e,timestamp:n,timezoneOffset:r}){return`${t} <${e}> ${n} ${r=function(t){const e=function(t){return Math.sign(t)||(Object.is(t,-0)?-1:1)}(0===(n=t)?n:-n);var n;t=Math.abs(t);const r=Math.floor(t/60);t-=60*r;let i=String(r),a=String(t);return i.length<2&&(i="0"+i),a.length<2&&(a="0"+a),(-1===e?"-":"+")+i+a}(r)}`}function ie(t){return(t=(t=t.replace(/\r/g,"")).replace(/^\n+/,"")).replace(/\n+$/,"")+"\n"}function ae(t){const[,e,n,r,i]=t.match(/^(.*) <(.*)> (.*) (.*)$/);return{name:e,email:n,timestamp:Number(r),timezoneOffset:oe(i)}}function oe(t){let[,e,n,r]=t.match(/(\+|-)(\d\d)(\d\d)/);return r=("+"===e?1:-1)*(60*Number(n)+Number(r)),0===(i=r)?i:-i;var i}class se{constructor(t){if("string"==typeof t)this._tag=t;else if(u.isBuffer(t))this._tag=t.toString("utf8");else{if("object"!=typeof t)throw new m("invalid type passed to GitAnnotatedTag constructor");this._tag=se.render(t)}}static from(t){return new se(t)}static render(t){return`object ${t.object}\ntype ${t.type}\ntag ${t.tag}\ntagger ${re(t.tagger)}\n\n${t.message}\n${t.gpgsig?t.gpgsig:""}`}justHeaders(){return this._tag.slice(0,this._tag.indexOf("\n\n"))}message(){const t=this.withoutSignature();return t.slice(t.indexOf("\n\n")+2)}parse(){return Object.assign(this.headers(),{message:this.message(),gpgsig:this.gpgsig()})}render(){return this._tag}headers(){const t=this.justHeaders().split("\n"),e=[];for(const n of t)" "===n[0]?e[e.length-1]+="\n"+n.slice(1):e.push(n);const n={};for(const t of e){const e=t.slice(0,t.indexOf(" ")),r=t.slice(t.indexOf(" ")+1);Array.isArray(n[e])?n[e].push(r):n[e]=r}return n.tagger&&(n.tagger=ae(n.tagger)),n.committer&&(n.committer=ae(n.committer)),n}withoutSignature(){const t=ie(this._tag);return-1===t.indexOf("\n-----BEGIN PGP SIGNATURE-----")?t:t.slice(0,t.lastIndexOf("\n-----BEGIN PGP SIGNATURE-----"))}gpgsig(){if(-1!==this._tag.indexOf("\n-----BEGIN PGP SIGNATURE-----"))return ie(this._tag.slice(this._tag.indexOf("-----BEGIN PGP SIGNATURE-----"),this._tag.indexOf("-----END PGP SIGNATURE-----")+27))}payload(){return this.withoutSignature()+"\n"}toObject(){return u.from(this._tag,"utf8")}static async sign(t,e,n){const r=t.payload();let{signature:i}=await e({payload:r,secretKey:n});i=ie(i);const a=r+i;return se.from(a)}}function le(t){return t.trim().split("\n").map((t=>" "+t)).join("\n")+"\n"}class ce{constructor(t){if("string"==typeof t)this._commit=t;else if(u.isBuffer(t))this._commit=t.toString("utf8");else{if("object"!=typeof t)throw new m("invalid type passed to GitCommit constructor");this._commit=ce.render(t)}}static fromPayloadSignature({payload:t,signature:e}){const n=ce.justHeaders(t),r=ce.justMessage(t),i=ie(n+"\ngpgsig"+le(e)+"\n"+r);return new ce(i)}static from(t){return new ce(t)}toObject(){return u.from(this._commit,"utf8")}headers(){return this.parseHeaders()}message(){return ce.justMessage(this._commit)}parse(){return Object.assign({message:this.message()},this.headers())}static justMessage(t){return ie(t.slice(t.indexOf("\n\n")+2))}static justHeaders(t){return t.slice(0,t.indexOf("\n\n"))}parseHeaders(){const t=ce.justHeaders(this._commit).split("\n"),e=[];for(const n of t)" "===n[0]?e[e.length-1]+="\n"+n.slice(1):e.push(n);const n={parent:[]};for(const t of e){const e=t.slice(0,t.indexOf(" ")),r=t.slice(t.indexOf(" ")+1);Array.isArray(n[e])?n[e].push(r):n[e]=r}return n.author&&(n.author=ae(n.author)),n.committer&&(n.committer=ae(n.committer)),n}static renderHeaders(t){let e="";if(t.tree?e+=`tree ${t.tree}\n`:e+="tree 4b825dc642cb6eb9a060e54bf8d69288fbee4904\n",t.parent){if(void 0===t.parent.length)throw new m("commit 'parent' property should be an array");for(const n of t.parent)e+=`parent ${n}\n`}return e+=`author ${re(t.author)}\n`,e+=`committer ${re(t.committer||t.author)}\n`,t.gpgsig&&(e+="gpgsig"+le(t.gpgsig)),e}static render(t){return ce.renderHeaders(t)+"\n"+ie(t.message)}render(){return this._commit}withoutSignature(){const t=ie(this._commit);return-1===t.indexOf("\ngpgsig")?t:ie(t.slice(0,t.indexOf("\ngpgsig"))+"\n"+t.slice(t.indexOf("-----END PGP SIGNATURE-----\n")+28))}isolateSignature(){return this._commit.slice(this._commit.indexOf("-----BEGIN PGP SIGNATURE-----"),this._commit.indexOf("-----END PGP SIGNATURE-----")+27).split("\n").map((t=>t.replace(/^ /,""))).join("\n")}static async sign(t,e,n){const r=t.withoutSignature(),i=ce.justMessage(t._commit);let{signature:a}=await e({payload:r,secretKey:n});a=ie(a);const o=ce.justHeaders(t._commit)+"\ngpgsig"+le(a)+"\n"+i;return ce.from(o)}}async function de({fs:t,cache:e,gitdir:n,oid:r}){if("4b825dc642cb6eb9a060e54bf8d69288fbee4904"===r)return{tree:mt.from([]),oid:r};const{type:i,object:a}=await qt({fs:t,cache:e,gitdir:n,oid:r});if("tag"===i)return de({fs:t,cache:e,gitdir:n,oid:r=se.from(a).parse().object});if("commit"===i)return de({fs:t,cache:e,gitdir:n,oid:r=ce.from(a).parse().tree});if("tree"!==i)throw new R(r,i,"tree");return{tree:mt.from(a),oid:r}}class he{constructor({fs:t,gitdir:e,ref:n,cache:r}){this.fs=t,this.cache=r,this.gitdir=e,this.mapPromise=(async()=>{const r=new Map;let i;try{i=await dt.resolve({fs:t,gitdir:e,ref:n})}catch(t){t instanceof F&&(i="4b825dc642cb6eb9a060e54bf8d69288fbee4904")}const a=await de({fs:t,cache:this.cache,gitdir:e,oid:i});return a.type="tree",a.mode="40000",r.set(".",a),r})();const i=this;this.ConstructEntry=class{constructor(t){this._fullpath=t,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return i.type(this)}async mode(){return i.mode(this)}async stat(){return i.stat(this)}async content(){return i.content(this)}async oid(){return i.oid(this)}}}async readdir(t){const e=t._fullpath,{fs:n,cache:r,gitdir:i}=this,o=await this.mapPromise,s=o.get(e);if(!s)throw new Error(`No obj for ${e}`);const l=s.oid;if(!l)throw new Error(`No oid for obj ${JSON.stringify(s)}`);if("tree"!==s.type)return null;const{type:c,object:d}=await qt({fs:n,cache:r,gitdir:i,oid:l});if(c!==s.type)throw new R(l,c,s.type);const h=mt.from(d);for(const t of h)o.set((0,a.join)(e,t.path),t);return h.entries().map((t=>(0,a.join)(e,t.path)))}async type(t){if(!1===t._type){const e=await this.mapPromise,{type:n}=e.get(t._fullpath);t._type=n}return t._type}async mode(t){if(!1===t._mode){const e=await this.mapPromise,{mode:n}=e.get(t._fullpath);t._mode=w(parseInt(n,8))}return t._mode}async stat(t){}async content(t){if(!1===t._content){const e=await this.mapPromise,{fs:n,cache:r,gitdir:i}=this,a=e.get(t._fullpath).oid,{type:o,object:s}=await qt({fs:n,cache:r,gitdir:i,oid:a});t._content="blob"!==o?void 0:new Uint8Array(s)}return t._content}async oid(t){if(!1===t._oid){const e=(await this.mapPromise).get(t._fullpath);t._oid=e.oid}return t._oid}}function ue({ref:t="HEAD"}={}){const e=Object.create(null);return Object.defineProperty(e,M,{value:function({fs:e,gitdir:n,cache:r}){return new he({fs:e,gitdir:n,ref:t,cache:r})}}),Object.freeze(e),e}class pe{constructor({fs:t,dir:e,gitdir:n,cache:r}){this.fs=t,this.cache=r,this.dir=e,this.gitdir=n,this.config=null;const i=this;this.ConstructEntry=class{constructor(t){this._fullpath=t,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return i.type(this)}async mode(){return i.mode(this)}async stat(){return i.stat(this)}async content(){return i.content(this)}async oid(){return i.oid(this)}}}async readdir(t){const e=t._fullpath,{fs:n,dir:r}=this,i=await n.readdir((0,a.join)(r,e));return null===i?null:i.map((t=>(0,a.join)(e,t)))}async type(t){return!1===t._type&&await t.stat(),t._type}async mode(t){return!1===t._mode&&await t.stat(),t._mode}async stat(t){if(!1===t._stat){const{fs:e,dir:n}=this;let r=await e.lstat(`${n}/${t._fullpath}`);if(!r)throw new Error(`ENOENT: no such file or directory, lstat '${t._fullpath}'`);let i=r.isDirectory()?"tree":"blob";"blob"!==i||r.isFile()||r.isSymbolicLink()||(i="special"),t._type=i,r=A(r),t._mode=r.mode,-1===r.size&&t._actualSize&&(r.size=t._actualSize),t._stat=r}return t._stat}async content(t){if(!1===t._content){const{fs:e,dir:n,gitdir:r}=this;if("tree"===await t.type())t._content=void 0;else{const i=await this._getGitConfig(e,r),a=await i.get("core.autocrlf"),o=await e.read(`${n}/${t._fullpath}`,{autocrlf:a});t._actualSize=o.length,t._stat&&-1===t._stat.size&&(t._stat.size=t._actualSize),t._content=new Uint8Array(o)}}return t._content}async oid(t){if(!1===t._oid){const e=this,{fs:n,gitdir:r,cache:i}=this;let a;await C.acquire({fs:n,gitdir:r,cache:i},(async function(i){const o=i.entriesMap.get(t._fullpath),s=await t.stat(),l=await e._getGitConfig(n,r),c=await l.get("core.filemode"),d="undefined"==typeof process||!("win32"===process.platform);if(!o||I(s,o,c,d)){const e=await t.content();void 0===e?a=void 0:(a=await _(gt.wrap({type:"blob",object:e})),!o||a!==o.oid||c&&s.mode!==o.mode||!I(s,o,c,d)||i.insert({filepath:t._fullpath,stats:s,oid:a}))}else a=o.oid})),t._oid=a}return t._oid}async _getGitConfig(t,e){return this.config||(this.config=await at.get({fs:t,gitdir:e})),this.config}}function fe(){const t=Object.create(null);return Object.defineProperty(t,M,{value:function({fs:t,dir:e,gitdir:n,cache:r}){return new pe({fs:t,dir:e,gitdir:n,cache:r})}}),Object.freeze(t),t}const me=void 0===Array.prototype.flat?t=>t.reduce(((t,e)=>t.concat(e)),[]):t=>t.flat();class ge{constructor(){this.value=null}consider(t){null!=t&&(null===this.value||t<this.value)&&(this.value=t)}reset(){this.value=null}}function*ye(t){const e=new ge;let n;const r=[],i=t.length;for(let n=0;n<i;n++)r[n]=t[n].next().value,void 0!==r[n]&&e.consider(r[n]);if(null!==e.value)for(;;){const a=[];n=e.value,e.reset();for(let o=0;o<i;o++)void 0!==r[o]&&r[o]===n?(a[o]=r[o],r[o]=t[o].next().value):a[o]=null,void 0!==r[o]&&e.consider(r[o]);if(yield a,null===e.value)return}}async function ve({fs:t,cache:e,dir:n,gitdir:r,trees:i,map:a=(async(t,e)=>e),reduce:o=(async(t,e)=>{const n=me(e);return void 0!==t&&n.unshift(t),n}),iterate:s=((t,e)=>Promise.all([...e].map(t)))}){const l=i.map((i=>i[M]({fs:t,dir:n,gitdir:r,cache:e}))),c=new Array(l.length).fill("."),d=function(t,e){const n=e-0;return Array.from({length:n},((t,e)=>0+e))}(0,l.length),h=async t=>{const{entries:e,children:n}=await(async t=>{d.map((e=>{const n=t[e];t[e]=n&&new l[e].ConstructEntry(n)}));const e=(await Promise.all(d.map((e=>{const n=t[e];return n?l[e].readdir(n):[]})))).map((t=>(null===t?[]:t)[Symbol.iterator]()));return{entries:t,children:ye(e)}})(t),r=e.find((t=>t&&t._fullpath))._fullpath,i=await a(r,e);if(null!==i){let t=await s(h,n);return t=t.filter((t=>void 0!==t)),o(i,t)}};return h(c)}async function be(t,e){const n=await t.readdir(e);null==n?await t.rm(e):n.length?await Promise.all(n.map((n=>{const r=(0,a.join)(e,n);return t.lstat(r).then((e=>{if(e)return e.isDirectory()?be(t,r):t.rm(r)}))}))).then((()=>t.rmdir(e))):await t.rmdir(e)}function we(t){return"function"==typeof t}function xe(t){return function(t){return t&&"object"==typeof t}(e=(t=>{try{return t.readFile().catch((t=>t))}catch(t){return t}})(t))&&we(e.then)&&we(e.catch);var e}const ke=["readFile","writeFile","mkdir","rmdir","unlink","stat","lstat","readdir","readlink","symlink"];function Ae(t,e){if(xe(e))for(const n of ke)t[`_${n}`]=e[n].bind(e);else for(const n of ke)t[`_${n}`]=l(e[n].bind(e));xe(e)?e.rm?t._rm=e.rm.bind(e):e.rmdir.length>1?t._rm=e.rmdir.bind(e):t._rm=be.bind(null,t):e.rm?t._rm=l(e.rm.bind(e)):e.rmdir.length>2?t._rm=l(e.rmdir.bind(e)):t._rm=be.bind(null,t)}class Te{constructor(t){if(void 0!==t._original_unwrapped_fs)return t;const e=Object.getOwnPropertyDescriptor(t,"promises");e&&e.enumerable?Ae(this,t.promises):Ae(this,t),this._original_unwrapped_fs=t}async exists(t,e={}){try{return await this._stat(t),!0}catch(t){if("ENOENT"===t.code||"ENOTDIR"===t.code||(t.code||"").includes("ENS"))return!1;throw console.log('Unhandled error in "FileSystem.exists()" function',t),t}}async read(t,e={}){try{let n=await this._readFile(t,e);if("true"===e.autocrlf)try{n=new TextDecoder("utf8",{fatal:!0}).decode(n),n=n.replace(/\r\n/g,"\n"),n=(new TextEncoder).encode(n)}catch(t){}return"string"!=typeof n&&(n=u.from(n)),n}catch(t){return null}}async write(t,e,n={}){try{return void await this._writeFile(t,e,n)}catch(r){await this.mkdir(z(t)),await this._writeFile(t,e,n)}}async mkdir(t,e=!1){try{return void await this._mkdir(t)}catch(n){if(null===n)return;if("EEXIST"===n.code)return;if(e)throw n;if("ENOENT"===n.code){const e=z(t);if("."===e||"/"===e||e===t)throw n;await this.mkdir(e),await this.mkdir(t,!0)}}}async rm(t){try{await this._unlink(t)}catch(t){if("ENOENT"!==t.code)throw t}}async rmdir(t,e){try{e&&e.recursive?await this._rm(t,e):await this._rmdir(t)}catch(t){if("ENOENT"!==t.code)throw t}}async readdir(t){try{const e=await this._readdir(t);return e.sort(v),e}catch(t){return"ENOTDIR"===t.code?null:[]}}async readdirDeep(t){const e=await this._readdir(t);return(await Promise.all(e.map((async e=>{const n=t+"/"+e;return(await this._stat(n)).isDirectory()?this.readdirDeep(n):n})))).reduce(((t,e)=>t.concat(e)),[])}async lstat(t){try{return await this._lstat(t)}catch(t){if("ENOENT"===t.code||(t.code||"").includes("ENS"))return null;throw t}}async readlink(t,e={encoding:"buffer"}){try{const n=await this._readlink(t,e);return u.isBuffer(n)?n:u.from(n)}catch(t){if("ENOENT"===t.code||(t.code||"").includes("ENS"))return null;throw t}}async writelink(t,e){return this._symlink(e.toString("utf8"),t)}}function _e(t,e){if(void 0===e)throw new Gt(t)}async function Ee(t,e){return!(!t&&!e||(!t||e)&&(t||!e)&&("tree"===await t.type()&&"tree"===await e.type()||await t.type()===await e.type()&&await t.mode()===await e.mode()&&await t.oid()===await e.oid()))}async function Se({fs:t,dir:e,gitdir:n=(0,a.join)(e,".git"),commit:r="HEAD",cache:i={}}){try{_e("fs",t),_e("dir",e),_e("gitdir",n);const a=new Te(t),o=[ue({ref:r}),fe(),B()];let s=[];await C.acquire({fs:a,gitdir:n,cache:i},(async function(t){s=t.unmergedPaths}));const l=await ve({fs:a,cache:i,dir:e,gitdir:n,trees:o,map:async function(t,[e,n,r]){const i=!await Ee(n,r),a=s.includes(t),o=!await Ee(r,e);if(i||a)return e?{path:t,mode:await e.mode(),oid:await e.oid(),type:await e.type(),content:await e.content()}:void 0;if(o)return!1;throw new te(t)}});await C.acquire({fs:a,gitdir:n,cache:i},(async function(t){for(const n of l)if(!1!==n)if(n){if("blob"===n.type){const r=(new TextDecoder).decode(n.content);await a.write(`${e}/${n.path}`,r,{mode:n.mode}),t.insert({filepath:n.path,oid:n.oid,stage:0})}}else await a.rmdir(`${e}/${n.path}`,{recursive:!0}),t.delete({filepath:n.path})}))}catch(t){throw t.caller="git.abortMerge",t}}class Ie{static async isIgnored({fs:t,dir:e,gitdir:n=(0,a.join)(e,".git"),filepath:r}){if(".git"===j(r))return!0;if("."===r)return!1;let i="";const o=(0,a.join)(n,"info","exclude");await t.exists(o)&&(i=await t.read(o,"utf8"));const s=[{gitignore:(0,a.join)(e,".gitignore"),filepath:r}],l=r.split("/").filter(Boolean);for(let t=1;t<l.length;t++){const n=l.slice(0,t).join("/"),r=l.slice(t).join("/");s.push({gitignore:(0,a.join)(e,n,".gitignore"),filepath:r})}let d=!1;for(const e of s){let n;try{n=await t.read(e.gitignore,"utf8")}catch(t){if("NOENT"===t.code)continue}const r=c().add(i);r.add(n);const a=z(e.filepath);if("."!==a&&r.ignores(a))return!0;d=d?!r.test(e.filepath).unignored:r.test(e.filepath).ignored}return d}}let Pe=null;async function qe(t){return null===Pe&&(Pe=function(){try{return new CompressionStream("deflate").writable.close(),new Blob([]).stream().cancel(),!0}catch(t){return!1}}()),Pe?async function(t){const e=new CompressionStream("deflate"),n=new Blob([t]).stream().pipeThrough(e);return new Uint8Array(await new Response(n).arrayBuffer())}(t):s.deflate(t)}async function Ce({fs:t,gitdir:e,type:n,object:r,format:i="content",oid:a,dryRun:o=!1}){return"deflated"!==i&&("wrapped"!==i&&(r=gt.wrap({type:n,object:r})),a=await _(r),r=u.from(await qe(r))),o||await async function({fs:t,gitdir:e,object:n,format:r,oid:i}){if("deflated"!==r)throw new m("GitObjectStoreLoose expects objects to write to be in deflated format");const a=`${e}/objects/${i.slice(0,2)}/${i.slice(2)}`;await t.exists(a)||await t.write(a,n)}({fs:t,gitdir:e,object:r,format:"deflated",oid:a}),a}function je(t){let e;for(;~(e=t.indexOf(92));)t[e]=47;return t}async function ze({fs:t,dir:e,gitdir:n=(0,a.join)(e,".git"),filepath:r,cache:i={},force:o=!1,parallel:s=!0}){try{_e("fs",t),_e("dir",e),_e("gitdir",n),_e("filepath",r);const a=new Te(t);await C.acquire({fs:a,gitdir:n,cache:i},(async t=>{const i=await at.get({fs:a,gitdir:n}),l=await i.get("core.autocrlf");return De({dir:e,gitdir:n,fs:a,filepath:r,index:t,force:o,parallel:s,autocrlf:l})}))}catch(t){throw t.caller="git.add",t}}async function De({dir:t,gitdir:e,fs:n,filepath:r,index:i,force:o,parallel:s,autocrlf:l}){const c=(r=Array.isArray(r)?r:[r]).map((async r=>{if(!o&&await Ie.isIgnored({fs:n,dir:t,gitdir:e,filepath:r}))return;const c=await n.lstat((0,a.join)(t,r));if(!c)throw new F(r);if(c.isDirectory()){const c=await n.readdir((0,a.join)(t,r));if(s){const d=c.map((c=>De({dir:t,gitdir:e,fs:n,filepath:[(0,a.join)(r,c)],index:i,force:o,parallel:s,autocrlf:l})));await Promise.all(d)}else for(const d of c)await De({dir:t,gitdir:e,fs:n,filepath:[(0,a.join)(r,d)],index:i,force:o,parallel:s,autocrlf:l})}else{const o=c.isSymbolicLink()?await n.readlink((0,a.join)(t,r)).then(je):await n.read((0,a.join)(t,r),{autocrlf:l});if(null===o)throw new F(r);const s=await Ce({fs:n,gitdir:e,type:"blob",object:o});i.insert({filepath:r,stats:c,oid:s})}})),d=await Promise.allSettled(c),h=d.filter((t=>"rejected"===t.status)).map((t=>t.reason));if(h.length>1)throw new Qt(h);if(1===h.length)throw h[0];return d.filter((t=>"fulfilled"===t.status&&t.value)).map((t=>t.value))}async function Oe({fs:t,gitdir:e,path:n}){return(await at.get({fs:t,gitdir:e})).get(n)}function Me(t,...e){for(const n of e)if(n)for(const e of Object.keys(n)){const r=n[e];void 0!==r&&(t[e]=r)}return t}async function Be({fs:t,gitdir:e,author:n,commit:r}){const i=Math.floor(Date.now()/1e3),a=Me({},{name:await Oe({fs:t,gitdir:e,path:"user.name"}),email:await Oe({fs:t,gitdir:e,path:"user.email"})||"",timestamp:i,timezoneOffset:new Date(1e3*i).getTimezoneOffset()},r?r.author:void 0,n);if(void 0!==a.name)return a}async function Fe({fs:t,gitdir:e,author:n,committer:r,commit:i}){const a=Math.floor(Date.now()/1e3),o=Me({},{name:await Oe({fs:t,gitdir:e,path:"user.name"}),email:await Oe({fs:t,gitdir:e,path:"user.email"})||"",timestamp:a,timezoneOffset:new Date(1e3*a).getTimezoneOffset()},i?i.committer:void 0,n,r);if(void 0!==o.name)return o}async function Re({fs:t,cache:e,gitdir:n,oid:r}){const{type:i,object:a}=await qt({fs:t,cache:e,gitdir:n,oid:r});if("tag"===i)return Re({fs:t,cache:e,gitdir:n,oid:r=se.from(a).parse().object});if("commit"!==i)throw new R(r,i,"commit");return{commit:ce.from(a),oid:r}}async function Le({fs:t,cache:e,gitdir:n,oid:r}){const{commit:i,oid:a}=await Re({fs:t,cache:e,gitdir:n,oid:r});return{oid:a,commit:i.parse(),payload:i.withoutSignature()}}async function Ne({fs:t,cache:e,onSign:n,gitdir:r,message:i,author:a,committer:o,signingKey:s,amend:l=!1,dryRun:c=!1,noUpdateBranch:d=!1,ref:h,parent:u,tree:p}){let f,m,g=!1;h||(h=await dt.resolve({fs:t,gitdir:r,ref:"HEAD",depth:2}));try{f=await dt.resolve({fs:t,gitdir:r,ref:h}),m=await Le({fs:t,gitdir:r,oid:f,cache:{}})}catch{g=!0}if(l&&g)throw new ee(h);const y=l?await Be({fs:t,gitdir:r,author:a,commit:m.commit}):await Be({fs:t,gitdir:r,author:a});if(!y)throw new Wt("author");const v=l?await Fe({fs:t,gitdir:r,author:y,committer:o,commit:m.commit}):await Fe({fs:t,gitdir:r,author:y,committer:o});if(!v)throw new Wt("committer");return C.acquire({fs:t,gitdir:r,cache:e,allowUnmerged:!1},(async function(e){const a=D(e.entries).get(".");if(p||(p=await He({fs:t,gitdir:r,inode:a,dryRun:c})),u=u?await Promise.all(u.map((e=>dt.resolve({fs:t,gitdir:r,ref:e})))):l?m.commit.parent:f?[f]:[],!i){if(!l)throw new Gt("message");i=m.commit.message}let o=ce.from({tree:p,parent:u,author:y,committer:v,message:i});s&&(o=await ce.sign(o,n,s));const g=await Ce({fs:t,gitdir:r,type:"commit",object:o.toObject(),dryRun:c});return d||c||await dt.writeRef({fs:t,gitdir:r,ref:h,value:g}),g}))}async function He({fs:t,gitdir:e,inode:n,dryRun:r}){const i=n.children;for(const n of i)"tree"===n.type&&(n.metadata.mode="040000",n.metadata.oid=await He({fs:t,gitdir:e,inode:n,dryRun:r}));const a=i.map((t=>({mode:t.metadata.mode,path:t.basename,oid:t.metadata.oid,type:t.type}))),o=mt.from(a);return await Ce({fs:t,gitdir:e,type:"tree",object:o.toObject(),dryRun:r})}async function Ue({fs:t,cache:e,gitdir:n,oid:r,filepath:i}){if(i.startsWith("/"))throw new Rt("leading-slash");if(i.endsWith("/"))throw new Rt("trailing-slash");const a=r,o=await de({fs:t,cache:e,gitdir:n,oid:r}),s=o.tree;if(""===i)r=o.oid;else{const o=i.split("/");r=await We({fs:t,cache:e,gitdir:n,tree:s,pathArray:o,oid:a,filepath:i})}return r}async function We({fs:t,cache:e,gitdir:n,tree:r,pathArray:i,oid:a,filepath:o}){const s=i.shift();for(const l of r)if(l.path===s){if(0===i.length)return l.oid;{const{type:s,object:c}=await qt({fs:t,cache:e,gitdir:n,oid:l.oid});if("tree"!==s)throw new R(a,s,"tree",o);return We({fs:t,cache:e,gitdir:n,tree:r=mt.from(c),pathArray:i,oid:a,filepath:o})}}throw new F(`file or directory found at "${a}:${o}"`)}async function Ge({fs:t,cache:e,gitdir:n,oid:r,filepath:i}){void 0!==i&&(r=await Ue({fs:t,cache:e,gitdir:n,oid:r,filepath:i}));const{tree:a,oid:o}=await de({fs:t,cache:e,gitdir:n,oid:r});return{oid:o,tree:a.entries()}}async function Qe({fs:t,gitdir:e,tree:n}){const r=mt.from(n).toObject();return await Ce({fs:t,gitdir:e,type:"tree",object:r,format:"content"})}async function Ye({fs:t,onSign:e,dir:n,gitdir:r=(0,a.join)(n,".git"),ref:i="refs/notes/commits",oid:o,note:s,force:l,author:c,committer:d,signingKey:h,cache:p={}}){try{_e("fs",t),_e("gitdir",r),_e("oid",o),_e("note",s),h&&_e("onSign",e);const n=new Te(t),a=await Be({fs:n,gitdir:r,author:c});if(!a)throw new Wt("author");const f=await Fe({fs:n,gitdir:r,author:a,committer:d});if(!f)throw new Wt("committer");return await async function({fs:t,cache:e,onSign:n,gitdir:r,ref:i,oid:a,note:o,force:s,author:l,committer:c,signingKey:d}){let h;try{h=await dt.resolve({gitdir:r,fs:t,ref:i})}catch(t){if(!(t instanceof F))throw t}let p=(await Ge({fs:t,cache:e,gitdir:r,oid:h||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"})).tree;if(s)p=p.filter((t=>t.path!==a));else for(const t of p)if(t.path===a)throw new Ct("note",a);"string"==typeof o&&(o=u.from(o,"utf8"));const f=await Ce({fs:t,gitdir:r,type:"blob",object:o,format:"content"});p.push({mode:"100644",path:a,oid:f,type:"blob"});const m=await Qe({fs:t,gitdir:r,tree:p});return await Ne({fs:t,cache:e,onSign:n,gitdir:r,ref:i,tree:m,parent:h&&[h],message:"Note added by 'isomorphic-git addNote'\n",author:l,committer:c,signingKey:d})}({fs:new Te(n),cache:p,onSign:e,gitdir:r,ref:i,oid:o,note:s,force:l,author:a,committer:f,signingKey:h})}catch(t){throw t.caller="git.addNote",t}}async function Je({fs:t,gitdir:e,remote:n,url:r,force:i}){if(n!==d.clean(n))throw new Lt(n,d.clean(n));const a=await at.get({fs:t,gitdir:e});if(!i&&(await a.getSubsections("remote")).includes(n)&&r!==await a.get(`remote.${n}.url`))throw new Ct("remote",n);await a.set(`remote.${n}.url`,r),await a.set(`remote.${n}.fetch`,`+refs/heads/*:refs/remotes/${n}/*`),await at.save({fs:t,gitdir:e,config:a})}async function Ke({fs:t,dir:e,gitdir:n=(0,a.join)(e,".git"),remote:r,url:i,force:o=!1}){try{return _e("fs",t),_e("gitdir",n),_e("remote",r),_e("url",i),await Je({fs:new Te(t),gitdir:n,remote:r,url:i,force:o})}catch(t){throw t.caller="git.addRemote",t}}async function Xe({fs:t,onSign:e,dir:n,gitdir:r=(0,a.join)(n,".git"),ref:i,tagger:o,message:s=i,gpgsig:l,object:c,signingKey:d,force:h=!1,cache:u={}}){try{_e("fs",t),_e("gitdir",r),_e("ref",i),d&&_e("onSign",e);const n=new Te(t),a=await Be({fs:n,gitdir:r,author:o});if(!a)throw new Wt("tagger");return await async function({fs:t,cache:e,onSign:n,gitdir:r,ref:i,tagger:a,message:o=i,gpgsig:s,object:l,signingKey:c,force:d=!1}){if(i=i.startsWith("refs/tags/")?i:`refs/tags/${i}`,!d&&await dt.exists({fs:t,gitdir:r,ref:i}))throw new Ct("tag",i);const h=await dt.resolve({fs:t,gitdir:r,ref:l||"HEAD"}),{type:u}=await qt({fs:t,cache:e,gitdir:r,oid:h});let p=se.from({object:h,type:u,tag:i.replace("refs/tags/",""),tagger:a,message:o,gpgsig:s});c&&(p=await se.sign(p,n,c));const f=await Ce({fs:t,gitdir:r,type:"tag",object:p.toObject()});await dt.writeRef({fs:t,gitdir:r,ref:i,value:f})}({fs:n,cache:u,onSign:e,gitdir:r,ref:i,tagger:a,message:s,gpgsig:l,object:c,signingKey:d,force:h})}catch(t){throw t.caller="git.annotatedTag",t}}async function Ve({fs:t,dir:e,gitdir:n=(0,a.join)(e,".git"),ref:r,object:i,checkout:o=!1,force:s=!1}){try{return _e("fs",t),_e("gitdir",n),_e("ref",r),await async function({fs:t,gitdir:e,ref:n,object:r,checkout:i=!1,force:a=!1}){if(n!==d.clean(n))throw new Lt(n,d.clean(n));const o=`refs/heads/${n}`;if(!a&&await dt.exists({fs:t,gitdir:e,ref:o}))throw new Ct("branch",n,!1);let s;try{s=await dt.resolve({fs:t,gitdir:e,ref:r||"HEAD"})}catch(t){}s&&await dt.writeRef({fs:t,gitdir:e,ref:o,value:s}),i&&await dt.writeSymbolicRef({fs:t,gitdir:e,ref:"HEAD",value:o})}({fs:new Te(t),gitdir:n,ref:r,object:i,checkout:o,force:s})}catch(t){throw t.caller="git.branch",t}}const Ze=(t,e)=>"."===t||null==e||0===e.length||"."===e||(e.length>=t.length?e.startsWith(t):t.startsWith(e));async function $e({fs:t,cache:e,onProgress:n,onPostCheckout:r,dir:i,gitdir:a,remote:o,ref:s,filepaths:l,noCheckout:c,noUpdateHead:d,dryRun:h,force:u,track:p=!0}){let f,g;if(r)try{f=await dt.resolve({fs:t,gitdir:a,ref:"HEAD"})}catch(t){f="0000000000000000000000000000000000000000"}try{g=await dt.resolve({fs:t,gitdir:a,ref:s})}catch(e){if("HEAD"===s)throw e;const n=`${o}/${s}`;if(g=await dt.resolve({fs:t,gitdir:a,ref:n}),p){const e=await at.get({fs:t,gitdir:a});await e.set(`branch.${s}.remote`,o),await e.set(`branch.${s}.merge`,`refs/heads/${s}`),await at.save({fs:t,gitdir:a,config:e})}await dt.writeRef({fs:t,gitdir:a,ref:`refs/heads/${s}`,value:g})}if(!c){let o;try{o=await async function({fs:t,cache:e,onProgress:n,dir:r,gitdir:i,ref:a,force:o,filepaths:s}){let l=0;return ve({fs:t,cache:e,dir:r,gitdir:i,trees:[ue({ref:a}),fe(),B()],map:async function(t,[e,r,i]){if("."!==t){if(s&&!s.some((e=>Ze(t,e))))return null;switch(n&&await n({phase:"Analyzing workdir",loaded:++l}),[!!i,!!e,!!r].map(Number).join("")){case"000":return;case"001":return o&&s&&s.includes(t)?["delete",t]:void 0;case"010":switch(await e.type()){case"tree":return["mkdir",t];case"blob":return["create",t,await e.oid(),await e.mode()];case"commit":return["mkdir-index",t,await e.oid(),await e.mode()];default:return["error",`new entry Unhandled type ${await e.type()}`]}case"011":switch(`${await e.type()}-${await r.type()}`){case"tree-tree":case"commit-tree":return;case"tree-blob":case"blob-tree":case"commit-blob":return["conflict",t];case"blob-blob":return await e.oid()!==await r.oid()?o?["update",t,await e.oid(),await e.mode(),await e.mode()!==await r.mode()]:["conflict",t]:await e.mode()!==await r.mode()?o?["update",t,await e.oid(),await e.mode(),!0]:["conflict",t]:["create-index",t,await e.oid(),await e.mode()];default:return["error",`new entry Unhandled type ${e.type}`]}case"100":return["delete-index",t];case"101":switch(await i.type()){case"tree":return["rmdir",t];case"blob":return await i.oid()!==await r.oid()?o?["delete",t]:["conflict",t]:["delete",t];case"commit":return["rmdir-index",t];default:return["error",`delete entry Unhandled type ${await i.type()}`]}case"110":case"111":switch(`${await i.type()}-${await e.type()}`){case"tree-tree":return;case"blob-blob":if(await i.oid()===await e.oid()&&await i.mode()===await e.mode()&&!o)return;if(r){if(await r.oid()!==await i.oid()&&await r.oid()!==await e.oid())return o?["update",t,await e.oid(),await e.mode(),await e.mode()!==await r.mode()]:["conflict",t]}else if(o)return["update",t,await e.oid(),await e.mode(),await e.mode()!==await i.mode()];return await e.mode()!==await i.mode()?["update",t,await e.oid(),await e.mode(),!0]:await e.oid()!==await i.oid()?["update",t,await e.oid(),await e.mode(),!1]:void 0;case"tree-blob":return["update-dir-to-blob",t,await e.oid()];case"blob-tree":return["update-blob-to-tree",t];case"commit-commit":return["mkdir-index",t,await e.oid(),await e.mode()];default:return["error",`update entry Unhandled type ${await i.type()}-${await e.type()}`]}}}},reduce:async function(t,e){return e=me(e),t?t&&"rmdir"===t[0]?(e.push(t),e):(e.unshift(t),e):e}})}({fs:t,cache:e,onProgress:n,dir:i,gitdir:a,ref:s,force:u,filepaths:l})}catch(t){throw t instanceof F&&t.data.what===g?new Dt(s,g):t}const c=o.filter((([t])=>"conflict"===t)).map((([t,e])=>e));if(c.length>0)throw new zt(c);const d=o.filter((([t])=>"error"===t)).map((([t,e])=>e));if(d.length>0)throw new m(d.join(", "));if(h)return void(r&&await r({previousHead:f,newHead:g,type:null!=l&&l.length>0?"file":"branch"}));let p=0;const y=o.length;await C.acquire({fs:t,gitdir:a,cache:e},(async function(e){await Promise.all(o.filter((([t])=>"delete"===t||"delete-index"===t)).map((async function([r,a]){const o=`${i}/${a}`;"delete"===r&&await t.rm(o),e.delete({filepath:a}),n&&await n({phase:"Updating workdir",loaded:++p,total:y})})))})),await C.acquire({fs:t,gitdir:a,cache:e},(async function(e){for(const[r,a]of o)if("rmdir"===r||"rmdir-index"===r){const o=`${i}/${a}`;try{"rmdir-index"===r&&e.delete({filepath:a}),await t.rmdir(o),n&&await n({phase:"Updating workdir",loaded:++p,total:y})}catch(t){if("ENOTEMPTY"!==t.code)throw t;console.log(`Did not delete ${a} because directory is not empty`)}}})),await Promise.all(o.filter((([t])=>"mkdir"===t||"mkdir-index"===t)).map((async function([e,r]){const a=`${i}/${r}`;await t.mkdir(a),n&&await n({phase:"Updating workdir",loaded:++p,total:y})}))),await C.acquire({fs:t,gitdir:a,cache:e},(async function(r){await Promise.all(o.filter((([t])=>"create"===t||"create-index"===t||"update"===t||"mkdir-index"===t)).map((async function([o,s,l,c,d]){const h=`${i}/${s}`;try{if("create-index"!==o&&"mkdir-index"!==o){const{object:n}=await qt({fs:t,cache:e,gitdir:a,oid:l});if(d&&await t.rm(h),33188===c)await t.write(h,n);else if(33261===c)await t.write(h,n,{mode:511});else{if(40960!==c)throw new m(`Invalid mode 0o${c.toString(8)} detected in blob ${l}`);await t.writelink(h,n)}}const i=await t.lstat(h);33261===c&&(i.mode=493),"mkdir-index"===o&&(i.mode=57344),r.insert({filepath:s,stats:i,oid:l}),n&&await n({phase:"Updating workdir",loaded:++p,total:y})}catch(t){console.log(t)}})))})),r&&await r({previousHead:f,newHead:g,type:null!=l&&l.length>0?"file":"branch"})}if(!d){const e=await dt.expand({fs:t,gitdir:a,ref:s});e.startsWith("refs/heads")?await dt.writeSymbolicRef({fs:t,gitdir:a,ref:"HEAD",value:e}):await dt.writeRef({fs:t,gitdir:a,ref:"HEAD",value:g})}}async function tn({fs:t,onProgress:e,onPostCheckout:n,dir:r,gitdir:i=(0,a.join)(r,".git"),remote:o="origin",ref:s,filepaths:l,noCheckout:c=!1,noUpdateHead:d=void 0===s,dryRun:h=!1,force:u=!1,track:p=!0,cache:f={}}){try{_e("fs",t),_e("dir",r),_e("gitdir",i);const a=s||"HEAD";return await $e({fs:new Te(t),cache:f,onProgress:e,onPostCheckout:n,dir:r,gitdir:i,remote:o,ref:a,filepaths:l,noCheckout:c,noUpdateHead:d,dryRun:h,force:u,track:p})}catch(t){throw t.caller="git.checkout",t}}const en=new RegExp("^refs/(heads/|tags/|remotes/)?(.*)");function nn(t){const e=en.exec(t);return e?"remotes/"===e[1]&&t.endsWith("/HEAD")?e[2].slice(0,-5):e[2]:t}async function rn({fs:t,gitdir:e,fullname:n=!1,test:r=!1}){const i=await dt.resolve({fs:t,gitdir:e,ref:"HEAD",depth:2});if(r)try{await dt.resolve({fs:t,gitdir:e,ref:i})}catch(t){return}if(i.startsWith("refs/"))return n?i:nn(i)}function an({username:t="",password:e=""}){return`Basic ${u.from(`${t}:${e}`).toString("base64")}`}async function on(t,e){const n=xt(t);for(;;){const{value:t,done:r}=await n.next();if(t&&await e(t),r)break}n.return&&n.return()}async function sn(t){let e=0;const n=[];await on(t,(t=>{n.push(t),e+=t.byteLength}));const r=new Uint8Array(e);let i=0;for(const t of n)r.set(t,i),i+=t.byteLength;return r}function ln(t){let e=t.match(/^https?:\/\/([^/]+)@/);if(null==e)return{url:t,auth:{}};e=e[1];const[n,r]=e.split(":");return{url:t=t.replace(`${e}@`,""),auth:{username:n,password:r}}}function cn(t,e){const n=e.toString(16);return"0".repeat(t-n.length)+n}class dn{static flush(){return u.from("0000","utf8")}static delim(){return u.from("0001","utf8")}static encode(t){"string"==typeof t&&(t=u.from(t));const e=cn(4,t.length+4);return u.concat([u.from(e,"utf8"),t])}static streamReader(t){const e=new kt(t);return async function(){try{let t=await e.read(4);if(null==t)return!0;if(t=parseInt(t.toString("utf8"),16),0===t)return null;if(1===t)return null;const n=await e.read(t-4);return null==n||n}catch(e){return t.error=e,!0}}}}async function hn(t){const e={};let n;for(;n=await t(),!0!==n;){if(null===n)continue;n=n.toString("utf8").replace(/\n$/,"");const t=n.indexOf("=");if(t>-1){const r=n.slice(0,t),i=n.slice(t+1);e[r]=i}else e[n]=!0}return{protocolVersion:2,capabilities2:e}}async function un(t,{service:e}){const n=new Set,r=new Map,i=new Map,a=dn.streamReader(t);let o=await a();for(;null===o;)o=await a();if(!0===o)throw new Ot;if(o.includes("version 2"))return hn(a);if(o.toString("utf8").replace(/\n$/,"")!==`# service=${e}`)throw new Yt(`# service=${e}\\n`,o.toString("utf8"));let s=await a();for(;null===s;)s=await a();if(!0===s)return{capabilities:n,refs:r,symrefs:i};if(s=s.toString("utf8"),s.includes("version 2"))return hn(a);const[l,c]=pn(s,"\0","\\x00");if(c.split(" ").map((t=>n.add(t))),"0000000000000000000000000000000000000000 capabilities^{}"!==l){const[t,e]=pn(l," "," ");for(r.set(e,t);;){const t=await a();if(!0===t)break;if(null!==t){const[e,n]=pn(t.toString("utf8")," "," ");r.set(n,e)}}}for(const t of n)if(t.startsWith("symref=")){const e=t.match(/symref=([^:]+):(.*)/);3===e.length&&i.set(e[1],e[2])}return{protocolVersion:1,capabilities:n,refs:r,symrefs:i}}function pn(t,e,n){const r=t.trim().split(e);if(2!==r.length)throw new Yt(`Two strings separated by '${n}'`,t.toString("utf8"));return r}const fn=(t,e)=>t.endsWith("?")?`${t}${e}`:`${t}/${e.replace(/^https?:\/\//,"")}`,mn=(t,e)=>{(e.username||e.password)&&(t.Authorization=an(e)),e.headers&&Object.assign(t,e.headers)},gn=async t=>{try{const e=u.from(await sn(t.body)),n=e.toString("utf8");return{preview:n.length<256?n:n.slice(0,256)+"...",response:n,data:e}}catch(t){return{}}};class yn{static async capabilities(){return["discover","connect"]}static async discover({http:t,onProgress:e,onAuth:n,onAuthSuccess:r,onAuthFailure:i,corsProxy:a,service:o,url:s,headers:l,protocolVersion:c}){let{url:d,auth:h}=ln(s);const u=a?fn(a,d):d;let p,f;(h.username||h.password)&&(l.Authorization=an(h)),2===c&&(l["Git-Protocol"]="version=2");let m=!1;do{if(p=await t.request({onProgress:e,method:"GET",url:`${u}/info/refs?service=${o}`,headers:l}),f=!1,401===p.statusCode||203===p.statusCode){const t=m?i:n;if(t){if(h=await t(d,{...h,headers:{...l}}),h&&h.cancel)throw new $t;h&&(mn(l,h),m=!0,f=!0)}}else 200===p.statusCode&&m&&r&&await r(d,h)}while(f);if(200!==p.statusCode){const{response:t}=await gn(p);throw new Ft(p.statusCode,p.statusMessage,t)}if(p.headers["content-type"]===`application/x-${o}-advertisement`){const t=await un(p.body,{service:o});return t.auth=h,t}{const{preview:t,response:e,data:n}=await gn(p);try{const t=await un([n],{service:o});return t.auth=h,t}catch(n){throw new Xt(t,e)}}}static async connect({http:t,onProgress:e,corsProxy:n,service:r,url:i,auth:a,body:o,headers:s}){const l=ln(i);l&&(i=l.url),n&&(i=fn(n,i)),s["content-type"]=`application/x-${r}-request`,s.accept=`application/x-${r}-result`,mn(s,a);const c=await t.request({onProgress:e,method:"POST",url:`${i}/${r}`,body:o,headers:s});if(200!==c.statusCode){const{response:t}=gn(c);throw new Ft(c.statusCode,c.statusMessage,t)}return c}}class vn{static getRemoteHelperFor({url:t}){const e=new Map;e.set("http",yn),e.set("https",yn);const n=function({url:t}){if(t.startsWith("git@"))return{transport:"ssh",address:t};const e=t.match(/(\w+)(:\/\/|::)(.*)/);return null!==e?"://"===e[2]?{transport:e[1],address:e[0]}:"::"===e[2]?{transport:e[1],address:e[3]}:void 0:void 0}({url:t});if(!n)throw new Zt(t);if(e.has(n.transport))return e.get(n.transport);throw new Vt(t,n.transport,"ssh"===n.transport?function(t){return(t=t.replace(/^git@([^:]+):/,"https://$1/")).replace(/^ssh:\/\//,"https://")}(t):void 0)}}let bn=null;class wn{static async read({fs:t,gitdir:e}){null===bn&&(bn=new r);const n=(0,a.join)(e,"shallow"),i=new Set;return await bn.acquire(n,(async function(){const e=await t.read(n,{encoding:"utf8"});return null===e||""===e.trim()?i:void e.trim().split("\n").map((t=>i.add(t)))})),i}static async write({fs:t,gitdir:e,oids:n}){null===bn&&(bn=new r);const i=(0,a.join)(e,"shallow");if(n.size>0){const e=[...n].join("\n")+"\n";await bn.acquire(i,(async function(){await t.write(i,e,{encoding:"utf8"})}))}else await bn.acquire(i,(async function(){await t.rm(i)}))}}async function xn({fs:t,cache:e,gitdir:n,oid:r,format:i="content"}){let o=await async function({fs:t,gitdir:e,oid:n}){const r=`objects/${n.slice(0,2)}/${n.slice(2)}`;return t.exists(`${e}/${r}`)}({fs:t,gitdir:n,oid:r});return o||(o=await async function({fs:t,cache:e,gitdir:n,oid:r,getExternalRefDelta:i}){let o=await t.readdir((0,a.join)(n,"objects/pack"));o=o.filter((t=>t.endsWith(".idx")));for(const a of o){const o=`${n}/objects/pack/${a}`,s=await Pt({fs:t,cache:e,filename:o,getExternalRefDelta:i});if(s.error)throw new m(s.error);if(s.offsets.has(r))return!0}return!1}({fs:t,cache:e,gitdir:n,oid:r,getExternalRefDelta:r=>qt({fs:t,cache:e,gitdir:n,oid:r})})),o}function kn(t,e){const n=t.map((t=>t.split("=",1)[0]));return e.filter((t=>{const e=t.split("=",1)[0];return n.includes(e)}))}const An={name:"isomorphic-git",version:"1.30.1",agent:"git/isomorphic-git@1.30.1"};class Tn{constructor(){this._queue=[]}write(t){if(this._ended)throw Error("You cannot write to a FIFO that has already been ended!");if(this._waiting){const e=this._waiting;this._waiting=null,e({value:t})}else this._queue.push(t)}end(){if(this._ended=!0,this._waiting){const t=this._waiting;this._waiting=null,t({done:!0})}}destroy(t){this.error=t,this.end()}async next(){if(this._queue.length>0)return{value:this._queue.shift()};if(this._ended)return{done:!0};if(this._waiting)throw Error("You cannot call read until the previous call to read has returned!");return new Promise((t=>{this._waiting=t}))}}function _n(t){const e=t.indexOf("\r"),n=t.indexOf("\n");return-1===e&&-1===n?-1:-1===e?n+1:-1===n?e+1:n===e+1?n+1:Math.min(e,n)+1}function En(t){const e=new Tn;let n="";return(async()=>{await on(t,(t=>{for(t=t.toString("utf8"),n+=t;;){const t=_n(n);if(-1===t)break;e.write(n.slice(0,t)),n=n.slice(t)}})),n.length>0&&e.write(n),e.end()})(),e}class Sn{static demux(t){const e=dn.streamReader(t),n=new Tn,r=new Tn,i=new Tn,a=async function(){const o=await e();if(null===o)return a();if(!0===o)return n.end(),i.end(),void(t.error?r.destroy(t.error):r.end());switch(o[0]){case 1:r.write(o.slice(1));break;case 2:i.write(o.slice(1));break;case 3:{const t=o.slice(1);return i.write(t),n.end(),i.end(),void r.destroy(new Error(t.toString("utf8")))}default:n.write(o)}a()};return a(),{packetlines:n,packfile:r,progress:i}}}async function In({fs:t,cache:e,http:n,onProgress:r,onMessage:i,onAuth:o,onAuthSuccess:s,onAuthFailure:l,gitdir:c,ref:d,remoteRef:h,remote:p,url:f,corsProxy:m,depth:g=null,since:y=null,exclude:v=[],relative:b=!1,tags:w=!1,singleBranch:x=!1,headers:k={},prune:A=!1,pruneTags:T=!1}){const _=d||await rn({fs:t,gitdir:c,test:!0}),E=await at.get({fs:t,gitdir:c}),S=p||_&&await E.get(`branch.${_}.remote`)||"origin",I=f||await E.get(`remote.${S}.url`);if(void 0===I)throw new Gt("remote OR url");const P=h||_&&await E.get(`branch.${_}.merge`)||d||"HEAD";void 0===m&&(m=await E.get("http.corsProxy"));const q=vn.getRemoteHelperFor({url:I}),C=await q.discover({http:n,onAuth:o,onAuthSuccess:s,onAuthFailure:l,corsProxy:m,service:"git-upload-pack",url:I,headers:k,protocolVersion:1}),j=C.auth,z=C.refs;if(0===z.size)return{defaultBranch:null,fetchHead:null,fetchHeadDescription:null};if(null!==g&&!C.capabilities.has("shallow"))throw new Kt("shallow","depth");if(null!==y&&!C.capabilities.has("deepen-since"))throw new Kt("deepen-since","since");if(v.length>0&&!C.capabilities.has("deepen-not"))throw new Kt("deepen-not","exclude");if(!0===b&&!C.capabilities.has("deepen-relative"))throw new Kt("deepen-relative","relative");const{oid:D,fullref:O}=dt.resolveAgainstMap({ref:P,map:z});for(const t of z.keys())t===O||"HEAD"===t||t.startsWith("refs/heads/")||w&&t.startsWith("refs/tags/")||z.delete(t);const M=kn([...C.capabilities],["multi_ack_detailed","no-done","side-band-64k","ofs-delta",`agent=${An.agent}`]);b&&M.push("deepen-relative");const B=x?[D]:z.values(),F=x?[_]:await dt.listRefs({fs:t,gitdir:c,filepath:"refs"});let R=[];for(let n of F)try{n=await dt.expand({fs:t,gitdir:c,ref:n});const r=await dt.resolve({fs:t,gitdir:c,ref:n});await xn({fs:t,cache:e,gitdir:c,oid:r})&&R.push(r)}catch(t){}R=[...new Set(R)];const N=await wn.read({fs:t,gitdir:c}),H=function({capabilities:t=[],wants:e=[],haves:n=[],shallows:r=[],depth:i=null,since:a=null,exclude:o=[]}){const s=[];e=[...new Set(e)];let l=` ${t.join(" ")}`;for(const t of e)s.push(dn.encode(`want ${t}${l}\n`)),l="";for(const t of r)s.push(dn.encode(`shallow ${t}\n`));null!==i&&s.push(dn.encode(`deepen ${i}\n`)),null!==a&&s.push(dn.encode(`deepen-since ${Math.floor(a.valueOf()/1e3)}\n`));for(const t of o)s.push(dn.encode(`deepen-not ${t}\n`));s.push(dn.flush());for(const t of n)s.push(dn.encode(`have ${t}\n`));return s.push(dn.encode("done\n")),s}({capabilities:M,wants:B,haves:R,shallows:C.capabilities.has("shallow")?[...N]:[],depth:g,since:y,exclude:v}),U=u.from(await sn(H)),W=await q.connect({http:n,onProgress:r,corsProxy:m,service:"git-upload-pack",url:I,auth:j,body:[U],headers:k}),G=await async function(t){const{packetlines:e,packfile:n,progress:r}=Sn.demux(t),i=[],a=[],o=[];let s=!1,l=!1;return new Promise(((c,d)=>{on(e,(e=>{const h=e.toString("utf8").trim();if(h.startsWith("shallow")){const t=h.slice(-41).trim();40!==t.length&&d(new L(t)),i.push(t)}else if(h.startsWith("unshallow")){const t=h.slice(-41).trim();40!==t.length&&d(new L(t)),a.push(t)}else if(h.startsWith("ACK")){const[,t,e]=h.split(" ");o.push({oid:t,status:e}),e||(l=!0)}else h.startsWith("NAK")?(s=!0,l=!0):(l=!0,s=!0);l&&(t.error?d(t.error):c({shallows:i,unshallows:a,acks:o,nak:s,packfile:n,progress:r}))})).finally((()=>{l||(t.error?d(t.error):c({shallows:i,unshallows:a,acks:o,nak:s,packfile:n,progress:r}))}))}))}(W.body);W.headers&&(G.headers=W.headers);for(const n of G.shallows)if(!N.has(n))try{const{object:r}=await qt({fs:t,cache:e,gitdir:c,oid:n}),i=new ce(r),a=await Promise.all(i.headers().parent.map((n=>xn({fs:t,cache:e,gitdir:c,oid:n}))));0===a.length||a.every((t=>t))||N.add(n)}catch(t){N.add(n)}for(const t of G.unshallows)N.delete(t);if(await wn.write({fs:t,gitdir:c,oids:N}),x){const e=new Map([[O,D]]),n=new Map;let r=10,i=O;for(;r--;){const t=C.symrefs.get(i);if(void 0===t)break;n.set(i,t),i=t}const a=z.get(i);a&&e.set(i,a);const{pruned:o}=await dt.updateRemoteRefs({fs:t,gitdir:c,remote:S,refs:e,symrefs:n,tags:w,prune:A});A&&(G.pruned=o)}else{const{pruned:e}=await dt.updateRemoteRefs({fs:t,gitdir:c,remote:S,refs:z,symrefs:C.symrefs,tags:w,prune:A,pruneTags:T});A&&(G.pruned=e)}if(G.HEAD=C.symrefs.get("HEAD"),void 0===G.HEAD){const{oid:t}=dt.resolveAgainstMap({ref:"HEAD",map:z});for(const[e,n]of z.entries())if("HEAD"!==e&&n===t){G.HEAD=e;break}}const Q=O.startsWith("refs/tags")?"tag":"branch";G.FETCH_HEAD={oid:D,description:`${Q} '${nn(O)}' of ${I}`},(r||i)&&on(En(G.progress),(async t=>{if(i&&await i(t),r){const e=t.match(/([^:]*).*\((\d+?)\/(\d+?)\)/);e&&await r({phase:e[1].trim(),loaded:parseInt(e[2],10),total:parseInt(e[3],10)})}}));const Y=u.from(await sn(G.packfile));if(W.body.error)throw W.body.error;const J=Y.slice(-20).toString("hex"),K={defaultBranch:G.HEAD,fetchHead:G.FETCH_HEAD.oid,fetchHeadDescription:G.FETCH_HEAD.description};if(G.headers&&(K.headers=G.headers),A&&(K.pruned=G.pruned),""!==J&&"5041434b0000000200000000"!==Y.slice(0,12).toString("hex")){K.packfile=`objects/pack/pack-${J}.pack`;const n=(0,a.join)(c,K.packfile);await t.write(n,Y);const i=n=>qt({fs:t,cache:e,gitdir:c,oid:n}),o=await St.fromPack({pack:Y,getExternalRefDelta:i,onProgress:r});await t.write(n.replace(/\.pack$/,".idx"),await o.toBuffer())}return K}async function Pn({fs:t,bare:e=!1,dir:n,gitdir:r=(e?n:(0,a.join)(n,".git")),defaultBranch:i="master"}){if(await t.exists(r+"/config"))return;let o=["hooks","info","objects/info","objects/pack","refs/heads","refs/tags"];o=o.map((t=>r+"/"+t));for(const e of o)await t.mkdir(e);await t.write(r+"/config",`[core]\n\trepositoryformatversion = 0\n\tfilemode = false\n\tbare = ${e}\n`+(e?"":"\tlogallrefupdates = true\n")+"\tsymlinks = false\n\tignorecase = true\n"),await t.write(r+"/HEAD",`ref: refs/heads/${i}\n`)}async function qn({fs:t,http:e,onProgress:n,onMessage:r,onAuth:i,onAuthSuccess:o,onAuthFailure:s,onPostCheckout:l,dir:c,gitdir:d=(0,a.join)(c,".git"),url:h,corsProxy:u,ref:p,remote:f="origin",depth:m,since:g,exclude:y=[],relative:v=!1,singleBranch:b=!1,noCheckout:w=!1,noTags:x=!1,headers:k={},cache:A={}}){try{return _e("fs",t),_e("http",e),_e("gitdir",d),w||_e("dir",c),_e("url",h),await async function({fs:t,cache:e,http:n,onProgress:r,onMessage:i,onAuth:a,onAuthSuccess:o,onAuthFailure:s,onPostCheckout:l,dir:c,gitdir:d,url:h,corsProxy:u,ref:p,remote:f,depth:m,since:g,exclude:y,relative:v,singleBranch:b,noCheckout:w,noTags:x,headers:k}){try{if(await Pn({fs:t,gitdir:d}),await Je({fs:t,gitdir:d,remote:f,url:h,force:!1}),u){const e=await at.get({fs:t,gitdir:d});await e.set("http.corsProxy",u),await at.save({fs:t,gitdir:d,config:e})}const{defaultBranch:A,fetchHead:T}=await In({fs:t,cache:e,http:n,onProgress:r,onMessage:i,onAuth:a,onAuthSuccess:o,onAuthFailure:s,gitdir:d,ref:p,remote:f,corsProxy:u,depth:m,since:g,exclude:y,relative:v,singleBranch:b,headers:k,tags:!x});if(null===T)return;p=(p=p||A).replace("refs/heads/",""),await $e({fs:t,cache:e,onProgress:r,onPostCheckout:l,dir:c,gitdir:d,ref:p,remote:f,noCheckout:w})}catch(e){throw await t.rmdir(d,{recursive:!0,maxRetries:10}).catch((()=>{})),e}}({fs:new Te(t),cache:A,http:e,onProgress:n,onMessage:r,onAuth:i,onAuthSuccess:o,onAuthFailure:s,onPostCheckout:l,dir:c,gitdir:d,url:h,corsProxy:u,ref:p,remote:f,depth:m,since:g,exclude:y,relative:v,singleBranch:b,noCheckout:w,noTags:x,headers:k})}catch(t){throw t.caller="git.clone",t}}async function Cn({fs:t,onSign:e,dir:n,gitdir:r=(0,a.join)(n,".git"),message:i,author:o,committer:s,signingKey:l,amend:c=!1,dryRun:d=!1,noUpdateBranch:h=!1,ref:u,parent:p,tree:f,cache:m={}}){try{_e("fs",t),c||_e("message",i),l&&_e("onSign",e);const n=new Te(t);return await Ne({fs:n,cache:m,onSign:e,gitdir:r,message:i,author:o,committer:s,signingKey:l,amend:c,dryRun:d,noUpdateBranch:h,ref:u,parent:p,tree:f})}catch(t){throw t.caller="git.commit",t}}async function jn({fs:t,dir:e,gitdir:n=(0,a.join)(e,".git"),fullname:r=!1,test:i=!1}){try{return _e("fs",t),_e("gitdir",n),await rn({fs:new Te(t),gitdir:n,fullname:r,test:i})}catch(t){throw t.caller="git.currentBranch",t}}async function zn({fs:t,dir:e,gitdir:n=(0,a.join)(e,".git"),ref:r}){try{return _e("fs",t),_e("ref",r),await async function({fs:t,gitdir:e,ref:n}){if(n=n.startsWith("refs/heads/")?n:`refs/heads/${n}`,!await dt.exists({fs:t,gitdir:e,ref:n}))throw new F(n);const r=await dt.expand({fs:t,gitdir:e,ref:n});if(r===await rn({fs:t,gitdir:e,fullname:!0})){const n=await dt.resolve({fs:t,gitdir:e,ref:r});await dt.writeRef({fs:t,gitdir:e,ref:"HEAD",value:n})}await dt.deleteRef({fs:t,gitdir:e,ref:r});const i=nn(n),a=await at.get({fs:t,gitdir:e});await a.deleteSection("branch",i),await at.save({fs:t,gitdir:e,config:a})}({fs:new Te(t),gitdir:n,ref:r})}catch(t){throw t.caller="git.deleteBranch",t}}async function Dn({fs:t,dir:e,gitdir:n=(0,a.join)(e,".git"),ref:r}){try{_e("fs",t),_e("ref",r),await dt.deleteRef({fs:new Te(t),gitdir:n,ref:r})}catch(t){throw t.caller="git.deleteRef",t}}async function On({fs:t,dir:e,gitdir:n=(0,a.join)(e,".git"),remote:r}){try{return _e("fs",t),_e("remote",r),await async function({fs:t,gitdir:e,remote:n}){const r=await at.get({fs:t,gitdir:e});await r.deleteSection("remote",n),await at.save({fs:t,gitdir:e,config:r})}({fs:new Te(t),gitdir:n,remote:r})}catch(t){throw t.caller="git.deleteRemote",t}}async function Mn({fs:t,dir:e,gitdir:n=(0,a.join)(e,".git"),ref:r}){try{return _e("fs",t),_e("ref",r),await async function({fs:t,gitdir:e,ref:n}){n=n.startsWith("refs/tags/")?n:`refs/tags/${n}`,await dt.deleteRef({fs:t,gitdir:e,ref:n})}({fs:new Te(t),gitdir:n,ref:r})}catch(t){throw t.caller="git.deleteTag",t}}async function Bn({fs:t,dir:e,gitdir:n=(0,a.join)(e,".git"),oid:r,cache:i={}}){try{return _e("fs",t),_e("gitdir",n),_e("oid",r),await async function({fs:t,cache:e,gitdir:n,oid:r}){const i=await async function({fs:t,gitdir:e,oid:n}){const r=n.slice(0,2);return(await t.readdir(`${e}/objects/${r}`)).map((t=>`${r}${t}`)).filter((t=>t.startsWith(n)))}({fs:t,gitdir:n,oid:r}),o=await async function({fs:t,cache:e,gitdir:n,oid:r,getExternalRefDelta:i}){const o=[];let s=await t.readdir((0,a.join)(n,"objects/pack"));s=s.filter((t=>t.endsWith(".idx")));for(const a of s){const s=`${n}/objects/pack/${a}`,l=await Pt({fs:t,cache:e,filename:s,getExternalRefDelta:i});if(l.error)throw new m(l.error);for(const t of l.offsets.keys())t.startsWith(r)&&o.push(t)}return o}({fs:t,cache:e,gitdir:n,oid:r,getExternalRefDelta:r=>qt({fs:t,cache:e,gitdir:n,oid:r})});for(const t of o)-1===i.indexOf(t)&&i.push(t);if(1===i.length)return i[0];if(i.length>1)throw new jt("oids",r,i);throw new F(`an object matching "${r}"`)}({fs:new Te(t),cache:i,gitdir:n,oid:r})}catch(t){throw t.caller="git.expandOid",t}}async function Fn({fs:t,dir:e,gitdir:n=(0,a.join)(e,".git"),ref:r}){try{return _e("fs",t),_e("gitdir",n),_e("ref",r),await dt.expand({fs:new Te(t),gitdir:n,ref:r})}catch(t){throw t.caller="git.expandRef",t}}async function Rn({fs:t,cache:e,gitdir:n,oids:r}){const i={},a=r.length;let o=r.map(((t,e)=>({index:e,oid:t})));for(;o.length;){const r=new Set;for(const{oid:t,index:e}of o)i[t]||(i[t]=new Set),i[t].add(e),i[t].size===a&&r.add(t);if(r.size>0)return[...r];const s=new Map;for(const{oid:r,index:a}of o)try{const{object:o}=await qt({fs:t,cache:e,gitdir:n,oid:r}),l=ce.from(o),{parent:c}=l.parseHeaders();for(const t of c)i[t]&&i[t].has(a)||s.set(t+":"+a,{oid:t,index:a})}catch(t){}o=Array.from(s.values())}return[]}const Ln=/^.*(\r?\n|$)/gm;function Nn({branches:t,contents:e}){const n=t[1],r=t[2],i=e[0],a=e[1],o=e[2],s=a.match(Ln),l=i.match(Ln),c=o.match(Ln),d=h(s,l,c);let u="",p=!0;for(const t of d)t.ok&&(u+=t.ok.join("")),t.conflict&&(p=!1,u+=`${"<".repeat(7)} ${n}\n`,u+=t.conflict.a.join(""),u+=`${"=".repeat(7)}\n`,u+=t.conflict.b.join(""),u+=`${">".repeat(7)} ${r}\n`);return{cleanMerge:p,mergedText:u}}async function Hn({fs:t,cache:e,dir:n,gitdir:r,ours:i,theirs:o,fastForward:s=!0,fastForwardOnly:l=!1,dryRun:c=!1,noUpdateBranch:d=!1,abortOnConflict:h=!0,message:p,author:f,committer:m,signingKey:g,onSign:y,mergeDriver:v}){void 0===i&&(i=await rn({fs:t,gitdir:r,fullname:!0})),i=await dt.expand({fs:t,gitdir:r,ref:i}),o=await dt.expand({fs:t,gitdir:r,ref:o});const b=await dt.resolve({fs:t,gitdir:r,ref:i}),w=await dt.resolve({fs:t,gitdir:r,ref:o}),x=await Rn({fs:t,cache:e,gitdir:r,oids:[b,w]});if(1!==x.length)throw new Ht;const k=x[0];if(k===w)return{oid:b,alreadyMerged:!0};if(s&&k===b)return c||d||await dt.writeRef({fs:t,gitdir:r,ref:i,value:w}),{oid:w,fastForward:!0};{if(l)throw new Mt;const s=await C.acquire({fs:t,gitdir:r,cache:e,allowUnmerged:!1},(async s=>async function({fs:t,cache:e,dir:n,gitdir:r=(0,a.join)(n,".git"),index:i,ourOid:o,baseOid:s,theirOid:l,ourName:c="ours",baseName:d="base",theirName:h="theirs",dryRun:p=!1,abortOnConflict:f=!0,mergeDriver:m}){const g=ue({ref:o}),y=ue({ref:s}),v=ue({ref:l}),b=[],w=[],x=[],k=[],A=await ve({fs:t,cache:e,dir:n,gitdir:r,trees:[g,y,v],map:async function(e,[n,a,o]){const s=j(e);switch(`${await Ee(n,a)}-${await Ee(o,a)}`){case"false-false":return{mode:await a.mode(),path:s,oid:await a.oid(),type:await a.type()};case"false-true":return o?{mode:await o.mode(),path:s,oid:await o.oid(),type:await o.type()}:void 0;case"true-false":return n?{mode:await n.mode(),path:s,oid:await n.oid(),type:await n.type()}:void 0;case"true-true":if(n&&a&&o&&"blob"===await n.type()&&"blob"===await a.type()&&"blob"===await o.type())return async function({fs:t,gitdir:e,path:n,ours:r,base:i,theirs:a,ourName:o,theirName:s,baseName:l,dryRun:c,mergeDriver:d=Nn}){const h="blob",p=await i.mode()===await r.mode()?await a.mode():await r.mode();if(await r.oid()===await a.oid())return{cleanMerge:!0,mergeResult:{mode:p,path:n,oid:await r.oid(),type:h}};if(await r.oid()===await i.oid())return{cleanMerge:!0,mergeResult:{mode:p,path:n,oid:await a.oid(),type:h}};if(await a.oid()===await i.oid())return{cleanMerge:!0,mergeResult:{mode:p,path:n,oid:await r.oid(),type:h}};const f=u.from(await r.content()).toString("utf8"),m=u.from(await i.content()).toString("utf8"),g=u.from(await a.content()).toString("utf8"),{mergedText:y,cleanMerge:v}=await d({branches:[l,o,s],contents:[m,f,g],path:n});return{cleanMerge:v,mergeResult:{mode:p,path:n,oid:await Ce({fs:t,gitdir:e,type:"blob",object:u.from(y,"utf8"),dryRun:c}),type:h}}}({fs:t,gitdir:r,path:s,ours:n,base:a,theirs:o,ourName:c,baseName:d,theirName:h,mergeDriver:m}).then((async t=>{if(t.cleanMerge)f||i.insert({filepath:e,oid:t.mergeResult.oid,stage:0});else if(b.push(e),w.push(e),!f){const t=await a.oid(),r=await n.oid(),s=await o.oid();i.delete({filepath:e}),i.insert({filepath:e,oid:t,stage:1}),i.insert({filepath:e,oid:r,stage:2}),i.insert({filepath:e,oid:s,stage:3})}return t.mergeResult}));if(a&&!n&&o&&"blob"===await a.type()&&"blob"===await o.type()){if(b.push(e),x.push(e),!f){const t=await a.oid(),n=await o.oid();i.delete({filepath:e}),i.insert({filepath:e,oid:t,stage:1}),i.insert({filepath:e,oid:n,stage:3})}return{mode:await o.mode(),oid:await o.oid(),type:"blob",path:s}}if(a&&n&&!o&&"blob"===await a.type()&&"blob"===await n.type()){if(b.push(e),k.push(e),!f){const t=await a.oid(),r=await n.oid();i.delete({filepath:e}),i.insert({filepath:e,oid:t,stage:1}),i.insert({filepath:e,oid:r,stage:2})}return{mode:await n.mode(),oid:await n.oid(),type:"blob",path:s}}if(a&&!n&&!o&&"blob"===await a.type())return;throw new Ht}},reduce:0===b.length||n&&!f?async(e,n)=>{const i=n.filter(Boolean);if(e&&(!e||"tree"!==e.type||0!==i.length)){if(i.length>0){const n=new mt(i).toObject(),a=await Ce({fs:t,gitdir:r,type:"tree",object:n,dryRun:p});e.oid=a}return e}}:void 0});return 0!==b.length?(n&&!f&&await ve({fs:t,cache:e,dir:n,gitdir:r,trees:[ue({ref:A.oid})],map:async function(e,[r]){const i=`${n}/${e}`;if("blob"===await r.type()){const e=await r.mode(),n=(new TextDecoder).decode(await r.content());await t.write(i,n,{mode:e})}return!0}}),new Ut(b,w,x,k)):A.oid}({fs:t,cache:e,dir:n,gitdir:r,index:s,ourOid:b,theirOid:w,baseOid:k,ourName:nn(i),baseName:"base",theirName:nn(o),dryRun:c,abortOnConflict:h,mergeDriver:v})));if(s instanceof Ut)throw s;return p||(p=`Merge branch '${nn(o)}' into ${nn(i)}`),{oid:await Ne({fs:t,cache:e,gitdir:r,message:p,ref:i,tree:s,parent:[b,w],author:f,committer:m,signingKey:g,onSign:y,dryRun:c,noUpdateBranch:d}),tree:s,mergeCommit:!0}}}async function Un({fs:t,cache:e,http:n,onProgress:r,onMessage:i,onAuth:a,onAuthSuccess:o,onAuthFailure:s,dir:l,gitdir:c,ref:d,url:h,remote:u,remoteRef:p,prune:f,pruneTags:m,fastForward:g,fastForwardOnly:y,corsProxy:v,singleBranch:b,headers:w,author:x,committer:k,signingKey:A}){try{if(!d){const e=await rn({fs:t,gitdir:c});if(!e)throw new Gt("ref");d=e}const{fetchHead:T,fetchHeadDescription:_}=await In({fs:t,cache:e,http:n,onProgress:r,onMessage:i,onAuth:a,onAuthSuccess:o,onAuthFailure:s,gitdir:c,corsProxy:v,ref:d,url:h,remote:u,remoteRef:p,singleBranch:b,headers:w,prune:f,pruneTags:m});await Hn({fs:t,cache:e,gitdir:c,ours:d,theirs:T,fastForward:g,fastForwardOnly:y,message:`Merge ${_}`,author:x,committer:k,signingKey:A,dryRun:!1,noUpdateBranch:!1}),await $e({fs:t,cache:e,onProgress:r,dir:l,gitdir:c,ref:d,remote:u,noCheckout:!1})}catch(t){throw t.caller="git.pull",t}}async function Wn({fs:t,http:e,onProgress:n,onMessage:r,onAuth:i,onAuthSuccess:o,onAuthFailure:s,dir:l,gitdir:c=(0,a.join)(l,".git"),ref:d,url:h,remote:u,remoteRef:p,corsProxy:f,singleBranch:m,headers:g={},cache:y={}}){try{_e("fs",t),_e("http",e),_e("gitdir",c);const a={name:"",email:"",timestamp:Date.now(),timezoneOffset:0};return await Un({fs:new Te(t),cache:y,http:e,onProgress:n,onMessage:r,onAuth:i,onAuthSuccess:o,onAuthFailure:s,dir:l,gitdir:c,ref:d,url:h,remote:u,remoteRef:p,fastForwardOnly:!0,corsProxy:f,singleBranch:m,headers:g,author:a,committer:a})}catch(t){throw t.caller="git.fastForward",t}}async function Gn({fs:t,http:e,onProgress:n,onMessage:r,onAuth:i,onAuthSuccess:o,onAuthFailure:s,dir:l,gitdir:c=(0,a.join)(l,".git"),ref:d,remote:h,remoteRef:u,url:p,corsProxy:f,depth:m=null,since:g=null,exclude:y=[],relative:v=!1,tags:b=!1,singleBranch:w=!1,headers:x={},prune:k=!1,pruneTags:A=!1,cache:T={}}){try{return _e("fs",t),_e("http",e),_e("gitdir",c),await In({fs:new Te(t),cache:T,http:e,onProgress:n,onMessage:r,onAuth:i,onAuthSuccess:o,onAuthFailure:s,gitdir:c,ref:d,remote:h,remoteRef:u,url:p,corsProxy:f,depth:m,since:g,exclude:y,relative:v,tags:b,singleBranch:w,headers:x,prune:k,pruneTags:A})}catch(t){throw t.caller="git.fetch",t}}async function Qn({fs:t,dir:e,gitdir:n=(0,a.join)(e,".git"),oids:r,cache:i={}}){try{return _e("fs",t),_e("gitdir",n),_e("oids",r),await Rn({fs:new Te(t),cache:i,gitdir:n,oids:r})}catch(t){throw t.caller="git.findMergeBase",t}}async function Yn({fs:t,filepath:e}){if(await t.exists((0,a.join)(e,".git")))return e;{const n=z(e);if(n===e)throw new F(`git root for ${e}`);return Yn({fs:t,filepath:n})}}async function Jn({fs:t,filepath:e}){try{return _e("fs",t),_e("filepath",e),await Yn({fs:new Te(t),filepath:e})}catch(t){throw t.caller="git.findRoot",t}}async function Kn({fs:t,dir:e,gitdir:n=(0,a.join)(e,".git"),path:r}){try{return _e("fs",t),_e("gitdir",n),_e("path",r),await Oe({fs:new Te(t),gitdir:n,path:r})}catch(t){throw t.caller="git.getConfig",t}}async function Xn({fs:t,dir:e,gitdir:n=(0,a.join)(e,".git"),path:r}){try{return _e("fs",t),_e("gitdir",n),_e("path",r),await async function({fs:t,gitdir:e,path:n}){return(await at.get({fs:t,gitdir:e})).getall(n)}({fs:new Te(t),gitdir:n,path:r})}catch(t){throw t.caller="git.getConfigAll",t}}async function Vn({http:t,onAuth:e,onAuthSuccess:n,onAuthFailure:r,corsProxy:i,url:a,headers:o={},forPush:s=!1}){try{_e("http",t),_e("url",a);const l=vn.getRemoteHelperFor({url:a}),c=await l.discover({http:t,onAuth:e,onAuthSuccess:n,onAuthFailure:r,corsProxy:i,service:s?"git-receive-pack":"git-upload-pack",url:a,headers:o,protocolVersion:1}),d={capabilities:[...c.capabilities]};for(const[t,e]of c.refs){const n=t.split("/"),r=n.pop();let i=d;for(const t of n)i[t]=i[t]||{},i=i[t];i[r]=e}for(const[t,e]of c.symrefs){const n=t.split("/"),r=n.pop();let i=d;for(const t of n)i[t]=i[t]||{},i=i[t];i[r]=e}return d}catch(t){throw t.caller="git.getRemoteInfo",t}}function Zn(t,e,n,r){const i=[];for(const[a,o]of t.refs){if(e&&!a.startsWith(e))continue;if(a.endsWith("^{}")){if(r){const t=a.replace("^{}",""),e=i[i.length-1],n=e.ref===t?e:i.find((e=>e.ref===t));if(void 0===n)throw new Error("I did not expect this to happen");n.peeled=o}continue}const s={ref:a,oid:o};n&&t.symrefs.has(a)&&(s.target=t.symrefs.get(a)),i.push(s)}return i}async function $n({http:t,onAuth:e,onAuthSuccess:n,onAuthFailure:r,corsProxy:i,url:a,headers:o={},forPush:s=!1,protocolVersion:l=2}){try{_e("http",t),_e("url",a);const c=vn.getRemoteHelperFor({url:a}),d=await c.discover({http:t,onAuth:e,onAuthSuccess:n,onAuthFailure:r,corsProxy:i,service:s?"git-receive-pack":"git-upload-pack",url:a,headers:o,protocolVersion:l});if(2===d.protocolVersion)return{protocolVersion:d.protocolVersion,capabilities:d.capabilities2};const h={};for(const t of d.capabilities){const[e,n]=t.split("=");h[e]=n||!0}return{protocolVersion:1,capabilities:h,refs:Zn(d,void 0,!0,!0)}}catch(t){throw t.caller="git.getRemoteInfo2",t}}async function tr({object:t}){try{_e("object",t),t="string"==typeof t?u.from(t,"utf8"):u.from(t);const e="blob",{oid:n,object:r}=await async function({type:t,object:e,format:n="content",oid:r}){return"deflated"!==n&&("wrapped"!==n&&(e=gt.wrap({type:t,object:e})),r=await _(e)),{oid:r,object:e}}({type:"blob",format:"content",object:t});return{oid:n,type:e,object:new Uint8Array(r),format:"wrapped"}}catch(t){throw t.caller="git.hashBlob",t}}async function er({fs:t,onProgress:e,dir:n,gitdir:r=(0,a.join)(n,".git"),filepath:i,cache:o={}}){try{return _e("fs",t),_e("dir",n),_e("gitdir",n),_e("filepath",i),await async function({fs:t,cache:e,onProgress:n,dir:r,gitdir:i,filepath:o}){try{o=(0,a.join)(r,o);const s=await t.read(o),l=n=>qt({fs:t,cache:e,gitdir:i,oid:n}),c=await St.fromPack({pack:s,getExternalRefDelta:l,onProgress:n});return await t.write(o.replace(/\.pack$/,".idx"),await c.toBuffer()),{oids:[...c.hashes]}}catch(t){throw t.caller="git.indexPack",t}}({fs:new Te(t),cache:o,onProgress:e,dir:n,gitdir:r,filepath:i})}catch(t){throw t.caller="git.indexPack",t}}async function nr({fs:t,bare:e=!1,dir:n,gitdir:r=(e?n:(0,a.join)(n,".git")),defaultBranch:i="master"}){try{return _e("fs",t),_e("gitdir",r),e||_e("dir",n),await Pn({fs:new Te(t),bare:e,dir:n,gitdir:r,defaultBranch:i})}catch(t){throw t.caller="git.init",t}}async function rr({fs:t,cache:e,gitdir:n,oid:r,ancestor:i,depth:a}){const o=await wn.read({fs:t,gitdir:n});if(!r)throw new Gt("oid");if(!i)throw new Gt("ancestor");if(r===i)return!1;const s=[r],l=new Set;let c=0;for(;s.length;){if(c++===a)throw new Nt(a);const r=s.shift(),{type:d,object:h}=await qt({fs:t,cache:e,gitdir:n,oid:r});if("commit"!==d)throw new R(r,d,"commit");const u=ce.from(h).parse();for(const t of u.parent)if(t===i)return!0;if(!o.has(r))for(const t of u.parent)l.has(t)||(s.push(t),l.add(t))}return!1}async function ir({fs:t,dir:e,gitdir:n=(0,a.join)(e,".git"),oid:r,ancestor:i,depth:o=-1,cache:s={}}){try{return _e("fs",t),_e("gitdir",n),_e("oid",r),_e("ancestor",i),await rr({fs:new Te(t),cache:s,gitdir:n,oid:r,ancestor:i,depth:o})}catch(t){throw t.caller="git.isDescendent",t}}async function ar({fs:t,dir:e,gitdir:n=(0,a.join)(e,".git"),filepath:r}){try{return _e("fs",t),_e("dir",e),_e("gitdir",n),_e("filepath",r),Ie.isIgnored({fs:new Te(t),dir:e,gitdir:n,filepath:r})}catch(t){throw t.caller="git.isIgnored",t}}async function or({fs:t,dir:e,gitdir:n=(0,a.join)(e,".git"),remote:r}){try{return _e("fs",t),_e("gitdir",n),dt.listBranches({fs:new Te(t),gitdir:n,remote:r})}catch(t){throw t.caller="git.listBranches",t}}async function sr({fs:t,gitdir:e,ref:n,cache:r}){if(n){const i=await dt.resolve({gitdir:e,fs:t,ref:n}),a=[];return await lr({fs:t,cache:r,gitdir:e,oid:i,filenames:a,prefix:""}),a}return C.acquire({fs:t,gitdir:e,cache:r},(async function(t){return t.entries.map((t=>t.path))}))}async function lr({fs:t,cache:e,gitdir:n,oid:r,filenames:i,prefix:o}){const{tree:s}=await Ge({fs:t,cache:e,gitdir:n,oid:r});for(const r of s)"tree"===r.type?await lr({fs:t,cache:e,gitdir:n,oid:r.oid,filenames:i,prefix:(0,a.join)(o,r.path)}):i.push((0,a.join)(o,r.path))}async function cr({fs:t,dir:e,gitdir:n=(0,a.join)(e,".git"),ref:r,cache:i={}}){try{return _e("fs",t),_e("gitdir",n),await sr({fs:new Te(t),cache:i,gitdir:n,ref:r})}catch(t){throw t.caller="git.listFiles",t}}async function dr({fs:t,dir:e,gitdir:n=(0,a.join)(e,".git"),ref:r="refs/notes/commits",cache:i={}}){try{return _e("fs",t),_e("gitdir",n),_e("ref",r),await async function({fs:t,cache:e,gitdir:n,ref:r}){let i;try{i=await dt.resolve({gitdir:n,fs:t,ref:r})}catch(t){if(t instanceof F)return[]}return(await Ge({fs:t,cache:e,gitdir:n,oid:i})).tree.map((t=>({target:t.path,note:t.oid})))}({fs:new Te(t),cache:i,gitdir:n,ref:r})}catch(t){throw t.caller="git.listNotes",t}}async function hr({fs:t,dir:e,gitdir:n=(0,a.join)(e,".git"),filepath:r}){try{return _e("fs",t),_e("gitdir",n),dt.listRefs({fs:new Te(t),gitdir:n,filepath:r})}catch(t){throw t.caller="git.listRefs",t}}async function ur({fs:t,dir:e,gitdir:n=(0,a.join)(e,".git")}){try{return _e("fs",t),_e("gitdir",n),await async function({fs:t,gitdir:e}){const n=await at.get({fs:t,gitdir:e}),r=await n.getSubsections("remote");return Promise.all(r.map((async t=>({remote:t,url:await n.get(`remote.${t}.url`)}))))}({fs:new Te(t),gitdir:n})}catch(t){throw t.caller="git.listRemotes",t}}async function pr({http:t,onAuth:e,onAuthSuccess:n,onAuthFailure:r,corsProxy:i,url:a,headers:o={},forPush:s=!1,protocolVersion:l=2,prefix:c,symrefs:d,peelTags:h}){try{_e("http",t),_e("url",a);const u=await yn.discover({http:t,onAuth:e,onAuthSuccess:n,onAuthFailure:r,corsProxy:i,service:s?"git-receive-pack":"git-upload-pack",url:a,headers:o,protocolVersion:l});if(1===u.protocolVersion)return Zn(u,c,d,h);const p=await async function({prefix:t,symrefs:e,peelTags:n}){const r=[];return r.push(dn.encode("command=ls-refs\n")),r.push(dn.encode(`agent=${An.agent}\n`)),(n||e||t)&&r.push(dn.delim()),n&&r.push(dn.encode("peel")),e&&r.push(dn.encode("symrefs")),t&&r.push(dn.encode(`ref-prefix ${t}`)),r.push(dn.flush()),r}({prefix:c,symrefs:d,peelTags:h});return async function(t){const e=dn.streamReader(t),n=[];let r;for(;r=await e(),!0!==r;){if(null===r)continue;r=r.toString("utf8").replace(/\n$/,"");const[t,e,...i]=r.split(" "),a={ref:e,oid:t};for(const t of i){const[e,n]=t.split(":");"symref-target"===e?a.target=n:"peeled"===e&&(a.peeled=n)}n.push(a)}return n}((await yn.connect({http:t,auth:u.auth,headers:o,corsProxy:i,service:s?"git-receive-pack":"git-upload-pack",url:a,body:p})).body)}catch(t){throw t.caller="git.listServerRefs",t}}async function fr({fs:t,dir:e,gitdir:n=(0,a.join)(e,".git")}){try{return _e("fs",t),_e("gitdir",n),dt.listTags({fs:new Te(t),gitdir:n})}catch(t){throw t.caller="git.listTags",t}}function mr(t,e){return t.committer.timestamp-e.committer.timestamp}const gr="e69de29bb2d1d6434b8b29ae775ad8c2e48c5391";async function yr({fs:t,cache:e,gitdir:n,oid:r,fileId:i}){if(i===gr)return;const a=r;let o;const s=await de({fs:t,cache:e,gitdir:n,oid:r}),l=s.tree;return i===s.oid?o=s.path:(o=await vr({fs:t,cache:e,gitdir:n,tree:l,fileId:i,oid:a}),Array.isArray(o)&&(0===o.length?o=void 0:1===o.length&&(o=o[0]))),o}async function vr({fs:t,cache:e,gitdir:n,tree:r,fileId:i,oid:o,filepaths:s=[],parentPath:l=""}){const c=r.entries().map((function(r){let c;return r.oid===i?(c=(0,a.join)(l,r.path),s.push(c)):"tree"===r.type&&(c=qt({fs:t,cache:e,gitdir:n,oid:r.oid}).then((function({object:c}){return vr({fs:t,cache:e,gitdir:n,tree:mt.from(c),fileId:i,oid:o,filepaths:s,parentPath:(0,a.join)(l,r.path)})}))),c}));return await Promise.all(c),s}async function br({fs:t,dir:e,gitdir:n=(0,a.join)(e,".git"),filepath:r,ref:i="HEAD",depth:o,since:s,force:l,follow:c,cache:d={}}){try{return _e("fs",t),_e("gitdir",n),_e("ref",i),await async function({fs:t,cache:e,gitdir:n,filepath:r,ref:i,depth:a,since:o,force:s,follow:l}){const c=void 0===o?void 0:Math.floor(o.valueOf()/1e3),d=[],h=await wn.read({fs:t,gitdir:n}),u=await dt.resolve({fs:t,gitdir:n,ref:i}),p=[await Le({fs:t,cache:e,gitdir:n,oid:u})];let f,m,g;function y(t){g&&r&&d.push(t)}for(;p.length>0;){const i=p.pop();if(void 0!==c&&i.commit.committer.timestamp<=c)break;if(r){let a;try{a=await Ue({fs:t,cache:e,gitdir:n,oid:i.commit.tree,filepath:r}),m&&f!==a&&d.push(m),f=a,m=i,g=!0}catch(a){if(!(a instanceof F))throw a;{let o=l&&f;if(o&&(o=await yr({fs:t,cache:e,gitdir:n,oid:i.commit.tree,fileId:f}),o))if(Array.isArray(o)){if(m){const i=await yr({fs:t,cache:e,gitdir:n,oid:m.commit.tree,fileId:f});if(Array.isArray(i)){if(o=o.filter((t=>-1===i.indexOf(t))),1!==o.length){o=!1,m&&d.push(m);break}o=o[0],r=o,m&&d.push(m)}}}else r=o,m&&d.push(m);if(!o){if(g&&f&&(d.push(m),!s))break;if(!s&&!l)throw a}m=i,g=!1}}}else d.push(i);if(void 0!==a&&d.length===a){y(i);break}if(!h.has(i.oid))for(const r of i.commit.parent){const i=await Le({fs:t,cache:e,gitdir:n,oid:r});p.map((t=>t.oid)).includes(i.oid)||p.push(i)}0===p.length&&y(i),p.sort(((t,e)=>mr(t.commit,e.commit)))}return d}({fs:new Te(t),cache:d,gitdir:n,filepath:r,ref:i,depth:o,since:s,force:l,follow:c})}catch(t){throw t.caller="git.log",t}}async function wr({fs:t,onSign:e,dir:n,gitdir:r=(0,a.join)(n,".git"),ours:i,theirs:o,fastForward:s=!0,fastForwardOnly:l=!1,dryRun:c=!1,noUpdateBranch:d=!1,abortOnConflict:h=!0,message:u,author:p,committer:f,signingKey:m,cache:g={},mergeDriver:y}){try{_e("fs",t),m&&_e("onSign",e);const a=new Te(t),v=await Be({fs:a,gitdir:r,author:p});if(!(v||l&&s))throw new Wt("author");const b=await Fe({fs:a,gitdir:r,author:v,committer:f});if(!(b||l&&s))throw new Wt("committer");return await Hn({fs:a,cache:g,dir:n,gitdir:r,ours:i,theirs:o,fastForward:s,fastForwardOnly:l,dryRun:c,noUpdateBranch:d,abortOnConflict:h,message:u,author:v,committer:b,signingKey:m,onSign:e,mergeDriver:y})}catch(t){throw t.caller="git.merge",t}}const xr={commit:16,tree:32,blob:48,tag:64,ofs_delta:96,ref_delta:112};async function kr({fs:t,cache:e,dir:n,gitdir:r=(0,a.join)(n,".git"),oids:o}){const s=new i,l=[];function c(t,e){const n=u.from(t,e);l.push(n),s.update(n)}async function d({stype:t,object:e}){const n=xr[t];let r=e.length,i=r>15?128:0;const a=15&r;r>>>=4;let o=(i|n|a).toString(16);for(c(o,"hex");i;)i=r>127?128:0,o=i|127&r,c(cn(2,o),"hex"),r>>>=7;c(u.from(await qe(e)))}c("PACK"),c("00000002","hex"),c(cn(8,o.length),"hex");for(const n of o){const{type:i,object:a}=await qt({fs:t,cache:e,gitdir:r,oid:n});await d({write:c,object:a,stype:i})}const h=s.digest();return l.push(h),l}async function Ar({fs:t,dir:e,gitdir:n=(0,a.join)(e,".git"),oids:r,write:i=!1,cache:o={}}){try{return _e("fs",t),_e("gitdir",n),_e("oids",r),await async function({fs:t,cache:e,gitdir:n,oids:r,write:i}){const o=await kr({fs:t,cache:e,gitdir:n,oids:r}),s=u.from(await sn(o)),l=`pack-${s.slice(-20).toString("hex")}.pack`;return i?(await t.write((0,a.join)(n,`objects/pack/${l}`),s),{filename:l}):{filename:l,packfile:new Uint8Array(s)}}({fs:new Te(t),cache:o,gitdir:n,oids:r,write:i})}catch(t){throw t.caller="git.packObjects",t}}async function Tr({fs:t,http:e,onProgress:n,onMessage:r,onAuth:i,onAuthSuccess:o,onAuthFailure:s,dir:l,gitdir:c=(0,a.join)(l,".git"),ref:d,url:h,remote:u,remoteRef:p,prune:f=!1,pruneTags:m=!1,fastForward:g=!0,fastForwardOnly:y=!1,corsProxy:v,singleBranch:b,headers:w={},author:x,committer:k,signingKey:A,cache:T={}}){try{_e("fs",t),_e("gitdir",c);const a=new Te(t),_=await Be({fs:a,gitdir:c,author:x});if(!_)throw new Wt("author");const E=await Fe({fs:a,gitdir:c,author:_,committer:k});if(!E)throw new Wt("committer");return await Un({fs:a,cache:T,http:e,onProgress:n,onMessage:r,onAuth:i,onAuthSuccess:o,onAuthFailure:s,dir:l,gitdir:c,ref:d,url:h,remote:u,remoteRef:p,fastForward:g,fastForwardOnly:y,corsProxy:v,singleBranch:b,headers:w,author:_,committer:E,signingKey:A,prune:f,pruneTags:m})}catch(t){throw t.caller="git.pull",t}}async function _r({fs:t,cache:e,dir:n,gitdir:r=(0,a.join)(n,".git"),oids:i}){const o=new Set;async function s(n){if(o.has(n))return;o.add(n);const{type:i,object:a}=await qt({fs:t,cache:e,gitdir:r,oid:n});if("tag"===i){const t=se.from(a).headers().object;await s(t)}else if("commit"===i){const t=ce.from(a).headers().tree;await s(t)}else if("tree"===i){const t=mt.from(a);for(const e of t)"blob"===e.type&&o.add(e.oid),"tree"===e.type&&await s(e.oid)}}for(const t of i)await s(t);return o}async function Er({fs:t,http:e,onProgress:n,onMessage:r,onAuth:i,onAuthSuccess:o,onAuthFailure:s,onPrePush:l,dir:c,gitdir:d=(0,a.join)(c,".git"),ref:h,remoteRef:u,remote:p="origin",url:f,force:m=!1,delete:g=!1,corsProxy:y,headers:v={},cache:b={}}){try{return _e("fs",t),_e("http",e),_e("gitdir",d),await async function({fs:t,cache:e,http:n,onProgress:r,onMessage:i,onAuth:o,onAuthSuccess:s,onAuthFailure:l,onPrePush:c,gitdir:d,ref:h,remoteRef:u,remote:p,url:f,force:m=!1,delete:g=!1,corsProxy:y,headers:v={}}){const b=h||await rn({fs:t,gitdir:d});if(void 0===b)throw new Gt("ref");const w=await at.get({fs:t,gitdir:d});p=p||await w.get(`branch.${b}.pushRemote`)||await w.get("remote.pushDefault")||await w.get(`branch.${b}.remote`)||"origin";const x=f||await w.get(`remote.${p}.pushurl`)||await w.get(`remote.${p}.url`);if(void 0===x)throw new Gt("remote OR url");const k=u||await w.get(`branch.${b}.merge`);if(void 0===x)throw new Gt("remoteRef");void 0===y&&(y=await w.get("http.corsProxy"));const A=await dt.expand({fs:t,gitdir:d,ref:b}),T=g?"0000000000000000000000000000000000000000":await dt.resolve({fs:t,gitdir:d,ref:A}),_=vn.getRemoteHelperFor({url:x}),E=await _.discover({http:n,onAuth:o,onAuthSuccess:s,onAuthFailure:l,corsProxy:y,service:"git-receive-pack",url:x,headers:v,protocolVersion:1}),S=E.auth;let I;if(k)try{I=await dt.expandAgainstMap({ref:k,map:E.refs})}catch(t){if(!(t instanceof F))throw t;I=k.startsWith("refs/")?k:`refs/heads/${k}`}else I=A;const P=E.refs.get(I)||"0000000000000000000000000000000000000000";if(c&&!await c({remote:p,url:x,localRef:{ref:g?"(delete)":A,oid:T},remoteRef:{ref:I,oid:P}}))throw new $t;const q=!E.capabilities.has("no-thin");let C=new Set;if(!g){const n=[...E.refs.values()];let r=new Set;if("0000000000000000000000000000000000000000"!==P){const i=await Rn({fs:t,cache:e,gitdir:d,oids:[T,P]});for(const t of i)n.push(t);q&&(r=await _r({fs:t,cache:e,gitdir:d,oids:i}))}if(!n.includes(T)){const r=await async function({fs:t,cache:e,dir:n,gitdir:r=(0,a.join)(n,".git"),start:i,finish:o}){const s=await wn.read({fs:t,gitdir:r}),l=new Set,c=new Set;for(const e of i)l.add(await dt.resolve({fs:t,gitdir:r,ref:e}));for(const e of o)try{const n=await dt.resolve({fs:t,gitdir:r,ref:e});c.add(n)}catch(t){}const d=new Set;async function h(n){d.add(n);const{type:i,object:a}=await qt({fs:t,cache:e,gitdir:r,oid:n});if("tag"===i)return h(se.from(a).headers().object);if("commit"!==i)throw new R(n,i,"commit");if(!s.has(n)){const t=ce.from(a).headers().parent;for(n of t)c.has(n)||d.has(n)||await h(n)}}for(const t of l)await h(t);return d}({fs:t,cache:e,gitdir:d,start:[T],finish:n});C=await _r({fs:t,cache:e,gitdir:d,oids:r})}if(q){try{const n=await dt.resolve({fs:t,gitdir:d,ref:`refs/remotes/${p}/HEAD`,depth:2}),{oid:i}=await dt.resolveAgainstMap({ref:n.replace(`refs/remotes/${p}/`,""),fullref:n,map:E.refs}),a=[i];for(const n of await _r({fs:t,cache:e,gitdir:d,oids:a}))r.add(n)}catch(t){}for(const t of r)C.delete(t)}if(T===P&&(m=!0),!m){if(A.startsWith("refs/tags")&&"0000000000000000000000000000000000000000"!==P)throw new Jt("tag-exists");if("0000000000000000000000000000000000000000"!==T&&"0000000000000000000000000000000000000000"!==P&&!await rr({fs:t,cache:e,gitdir:d,oid:T,ancestor:P,depth:-1}))throw new Jt("not-fast-forward")}}const j=kn([...E.capabilities],["report-status","side-band-64k",`agent=${An.agent}`]),z=await async function({capabilities:t=[],triplets:e=[]}){const n=[];let r=`\0 ${t.join(" ")}`;for(const t of e)n.push(dn.encode(`${t.oldoid} ${t.oid} ${t.fullRef}${r}\n`)),r="";return n.push(dn.flush()),n}({capabilities:j,triplets:[{oldoid:P,oid:T,fullRef:I}]}),D=g?[]:await kr({fs:t,cache:e,gitdir:d,oids:[...C]}),O=await _.connect({http:n,onProgress:r,corsProxy:y,service:"git-receive-pack",url:x,auth:S,headers:v,body:[...z,...D]}),{packfile:M,progress:B}=await Sn.demux(O.body);i&&on(En(B),(async t=>{await i(t)}));const L=await async function(t){const e={};let n="";const r=dn.streamReader(t);let i=await r();for(;!0!==i;)null!==i&&(n+=i.toString("utf8")+"\n"),i=await r();const a=n.toString("utf8").split("\n");if(i=a.shift(),!i.startsWith("unpack "))throw new Yt('unpack ok" or "unpack [error message]',i);e.ok="unpack ok"===i,e.ok||(e.error=i.slice(7)),e.refs={};for(const t of a){if(""===t.trim())continue;const n=t.slice(0,2),r=t.slice(3);let i=r.indexOf(" ");-1===i&&(i=r.length);const a=r.slice(0,i),o=r.slice(i+1);e.refs[a]={ok:"ok"===n,error:o}}return e}(M);if(O.headers&&(L.headers=O.headers),p&&L.ok&&L.refs[I].ok&&!A.startsWith("refs/tags")){const e=`refs/remotes/${p}/${I.replace("refs/heads","")}`;g?await dt.deleteRef({fs:t,gitdir:d,ref:e}):await dt.writeRef({fs:t,gitdir:d,ref:e,value:T})}if(L.ok&&Object.values(L.refs).every((t=>t.ok)))return L;{const t=Object.entries(L.refs).filter((([t,e])=>!e.ok)).map((([t,e])=>`\n  - ${t}: ${e.error}`)).join("");throw new Bt(t,L)}}({fs:new Te(t),cache:b,http:e,onProgress:n,onMessage:r,onAuth:i,onAuthSuccess:o,onAuthFailure:s,onPrePush:l,gitdir:d,ref:h,remoteRef:u,remote:p,url:f,force:m,delete:g,corsProxy:y,headers:v})}catch(t){throw t.caller="git.push",t}}async function Sr({fs:t,cache:e,gitdir:n,oid:r}){const{type:i,object:a}=await qt({fs:t,cache:e,gitdir:n,oid:r});if("tag"===i)return Sr({fs:t,cache:e,gitdir:n,oid:r=se.from(a).parse().object});if("blob"!==i)throw new R(r,i,"blob");return{oid:r,blob:new Uint8Array(a)}}async function Ir({fs:t,cache:e,gitdir:n,oid:r,filepath:i}){return void 0!==i&&(r=await Ue({fs:t,cache:e,gitdir:n,oid:r,filepath:i})),await Sr({fs:t,cache:e,gitdir:n,oid:r})}async function Pr({fs:t,dir:e,gitdir:n=(0,a.join)(e,".git"),oid:r,filepath:i,cache:o={}}){try{return _e("fs",t),_e("gitdir",n),_e("oid",r),await Ir({fs:new Te(t),cache:o,gitdir:n,oid:r,filepath:i})}catch(t){throw t.caller="git.readBlob",t}}async function qr({fs:t,dir:e,gitdir:n=(0,a.join)(e,".git"),oid:r,cache:i={}}){try{return _e("fs",t),_e("gitdir",n),_e("oid",r),await Le({fs:new Te(t),cache:i,gitdir:n,oid:r})}catch(t){throw t.caller="git.readCommit",t}}async function Cr({fs:t,dir:e,gitdir:n=(0,a.join)(e,".git"),ref:r="refs/notes/commits",oid:i,cache:o={}}){try{return _e("fs",t),_e("gitdir",n),_e("ref",r),_e("oid",i),await async function({fs:t,cache:e,gitdir:n,ref:r="refs/notes/commits",oid:i}){const a=await dt.resolve({gitdir:n,fs:t,ref:r}),{blob:o}=await Ir({fs:t,cache:e,gitdir:n,oid:a,filepath:i});return o}({fs:new Te(t),cache:o,gitdir:n,ref:r,oid:i})}catch(t){throw t.caller="git.readNote",t}}async function jr({fs:t,dir:e,gitdir:n=(0,a.join)(e,".git"),oid:r,format:i="parsed",filepath:o,encoding:s,cache:l={}}){try{_e("fs",t),_e("gitdir",n),_e("oid",r);const e=new Te(t);void 0!==o&&(r=await Ue({fs:e,cache:l,gitdir:n,oid:r,filepath:o}));const a="parsed"===i?"content":i,c=await qt({fs:e,cache:l,gitdir:n,oid:r,format:a});if(c.oid=r,"parsed"===i)switch(c.format="parsed",c.type){case"commit":c.object=ce.from(c.object).parse();break;case"tree":c.object=mt.from(c.object).entries();break;case"blob":s?c.object=c.object.toString(s):(c.object=new Uint8Array(c.object),c.format="content");break;case"tag":c.object=se.from(c.object).parse();break;default:throw new R(c.oid,c.type,"blob|commit|tag|tree")}else"deflated"!==c.format&&"wrapped"!==c.format||(c.type=c.format);return c}catch(t){throw t.caller="git.readObject",t}}async function zr({fs:t,dir:e,gitdir:n=(0,a.join)(e,".git"),oid:r,cache:i={}}){try{return _e("fs",t),_e("gitdir",n),_e("oid",r),await async function({fs:t,cache:e,gitdir:n,oid:r}){const{type:i,object:a}=await qt({fs:t,cache:e,gitdir:n,oid:r,format:"content"});if("tag"!==i)throw new R(r,i,"tag");const o=se.from(a);return{oid:r,tag:o.parse(),payload:o.payload()}}({fs:new Te(t),cache:i,gitdir:n,oid:r})}catch(t){throw t.caller="git.readTag",t}}async function Dr({fs:t,dir:e,gitdir:n=(0,a.join)(e,".git"),oid:r,filepath:i,cache:o={}}){try{return _e("fs",t),_e("gitdir",n),_e("oid",r),await Ge({fs:new Te(t),cache:o,gitdir:n,oid:r,filepath:i})}catch(t){throw t.caller="git.readTree",t}}async function Or({fs:t,dir:e,gitdir:n=(0,a.join)(e,".git"),filepath:r,cache:i={}}){try{_e("fs",t),_e("gitdir",n),_e("filepath",r),await C.acquire({fs:new Te(t),gitdir:n,cache:i},(async function(t){t.delete({filepath:r})}))}catch(t){throw t.caller="git.remove",t}}async function Mr({fs:t,onSign:e,dir:n,gitdir:r=(0,a.join)(n,".git"),ref:i="refs/notes/commits",oid:o,author:s,committer:l,signingKey:c,cache:d={}}){try{_e("fs",t),_e("gitdir",r),_e("oid",o);const n=new Te(t),a=await Be({fs:n,gitdir:r,author:s});if(!a)throw new Wt("author");const h=await Fe({fs:n,gitdir:r,author:a,committer:l});if(!h)throw new Wt("committer");return await async function({fs:t,cache:e,onSign:n,gitdir:r,ref:i="refs/notes/commits",oid:a,author:o,committer:s,signingKey:l}){let c;try{c=await dt.resolve({gitdir:r,fs:t,ref:i})}catch(t){if(!(t instanceof F))throw t}let d=(await Ge({fs:t,gitdir:r,oid:c||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"})).tree;d=d.filter((t=>t.path!==a));const h=await Qe({fs:t,gitdir:r,tree:d});return await Ne({fs:t,cache:e,onSign:n,gitdir:r,ref:i,tree:h,parent:c&&[c],message:"Note removed by 'isomorphic-git removeNote'\n",author:o,committer:s,signingKey:l})}({fs:n,cache:d,onSign:e,gitdir:r,ref:i,oid:o,author:a,committer:h,signingKey:c})}catch(t){throw t.caller="git.removeNote",t}}async function Br({fs:t,dir:e,gitdir:n=(0,a.join)(e,".git"),ref:r,oldref:i,checkout:o=!1}){try{return _e("fs",t),_e("gitdir",n),_e("ref",r),_e("oldref",i),await async function({fs:t,gitdir:e,oldref:n,ref:r,checkout:i=!1}){if(r!==d.clean(r))throw new Lt(r,d.clean(r));if(n!==d.clean(n))throw new Lt(n,d.clean(n));const a=`refs/heads/${n}`,o=`refs/heads/${r}`;if(await dt.exists({fs:t,gitdir:e,ref:o}))throw new Ct("branch",r,!1);const s=await dt.resolve({fs:t,gitdir:e,ref:a,depth:1});await dt.writeRef({fs:t,gitdir:e,ref:o,value:s}),await dt.deleteRef({fs:t,gitdir:e,ref:a});const l=await rn({fs:t,gitdir:e,fullname:!0});(i||l===a)&&await dt.writeSymbolicRef({fs:t,gitdir:e,ref:"HEAD",value:o})}({fs:new Te(t),gitdir:n,ref:r,oldref:i,checkout:o})}catch(t){throw t.caller="git.renameBranch",t}}async function Fr({gitdir:t,type:e,object:n}){return _(gt.wrap({type:e,object:n}))}async function Rr({fs:t,dir:e,gitdir:n=(0,a.join)(e,".git"),filepath:r,ref:i,cache:o={}}){try{_e("fs",t),_e("gitdir",n),_e("filepath",r);const s=new Te(t);let l,c;try{l=await dt.resolve({fs:s,gitdir:n,ref:i||"HEAD"})}catch(t){if(i)throw t}if(l)try{l=await Ue({fs:s,cache:o,gitdir:n,oid:l,filepath:r})}catch(t){l=null}let d={ctime:new Date(0),mtime:new Date(0),dev:0,ino:0,mode:0,uid:0,gid:0,size:0};const h=e&&await s.read((0,a.join)(e,r));h&&(c=await Fr({gitdir:n,type:"blob",object:h}),l===c&&(d=await s.lstat((0,a.join)(e,r)))),await C.acquire({fs:s,gitdir:n,cache:o},(async function(t){t.delete({filepath:r}),l&&t.insert({filepath:r,stats:d,oid:l})}))}catch(t){throw t.caller="git.reset",t}}async function Lr({fs:t,dir:e,gitdir:n=(0,a.join)(e,".git"),ref:r,depth:i}){try{return _e("fs",t),_e("gitdir",n),_e("ref",r),await dt.resolve({fs:new Te(t),gitdir:n,ref:r,depth:i})}catch(t){throw t.caller="git.resolveRef",t}}async function Nr({fs:t,dir:e,gitdir:n=(0,a.join)(e,".git"),path:r,value:i,append:o=!1}){try{_e("fs",t),_e("gitdir",n),_e("path",r);const e=new Te(t),a=await at.get({fs:e,gitdir:n});o?await a.append(r,i):await a.set(r,i),await at.save({fs:e,gitdir:n,config:a})}catch(t){throw t.caller="git.setConfig",t}}async function Hr({fs:t,gitdir:e,commit:n}){const r=ce.from(n).toObject();return await Ce({fs:t,gitdir:e,type:"commit",object:r,format:"content"})}class Ur{static get timezoneOffsetForRefLogEntry(){const t=(new Date).getTimezoneOffset(),e=Math.abs(Math.floor(t/60)),n=Math.abs(t%60).toString().padStart(2,"0");return`${t>0?"-":"+"}${e.toString().padStart(2,"0")}${n}`}static createStashReflogEntry(t,e,n){const r=t.name.replace(/\s/g,""),i=Math.floor(Date.now()/1e3),a=Ur.timezoneOffsetForRefLogEntry;return`0000000000000000000000000000000000000000 ${e} ${r} ${t.email} ${i} ${a}\t${n}\n`}static getStashReflogEntry(t,e=!1){return t.split("\n").filter((t=>t)).reverse().map(((t,n)=>e?`stash@{${n}}: ${t.split("\t")[1]}`:t))}}const Wr={stage:B,workdir:fe};let Gr;async function Qr(t,e){return void 0===Gr&&(Gr=new r),Gr.acquire(t,e)}async function Yr({fs:t,dir:e,gitdir:n,treePair:r}){const i="stage"===r[1],o=r.map((t=>"string"==typeof t?Wr[t]():t)),s=[],l=await ve({fs:t,cache:{},dir:e,gitdir:n,trees:o,map:async(r,[i,a])=>{if("."!==r&&!await Ie.isIgnored({fs:t,dir:e,gitdir:n,filepath:r}))return a?((!i||await i.oid()!==await a.oid()&&void 0!==await a.oid())&&s.push([i,a]),{mode:await a.mode(),path:r,oid:await a.oid(),type:await a.type()}):void 0},reduce:async(t,e)=>(e=e.filter(Boolean),t?(t.children=e,t):e.length>0?e:void 0),iterate:async(n,r)=>{const a=[];for(const n of r){const[r,o]=n;i?o&&(await t.exists(`${e}/${o.toString()}`)?a.push(n):s.push([null,o])):r&&(o?a.push(n):s.push([r,null]))}return a.length?Promise.all(a.map(n)):[]}});if(0===s.length||0===l.length)return null;const c=(await async function({fs:t,dir:e,gitdir:n,entries:r}){return Promise.all(r.map((async function r(i){if("tree"===i.type){if(!i.oid){const e=await Promise.all(i.children.map(r));i.oid=await Qe({fs:t,gitdir:n,tree:e}),i.mode=16384}}else"blob"===i.type&&(i.oid=await async function(t,e,n,r,i=null){const o=(0,a.join)(n,r),s=await t.lstat(o);if(!s)throw new F(o);if(s.isDirectory())throw new m(`${o}: file expected, but found directory`);const l=i?await yt({fs:t,gitdir:e,oid:i}):void 0;let c=l?i:void 0;return l||await Qr({fs:t,gitdir:e,currentFilepath:o},(async()=>{const n=s.isSymbolicLink()?await t.readlink(o).then(je):await t.read(o);if(null===n)throw new F(o);c=await Ce({fs:t,gitdir:e,type:"blob",object:n})})),c}(t,n,e,i.path,i.oid),i.mode=33188);return i.path=i.path.split("/").pop(),i})))}({fs:t,dir:e,gitdir:n,entries:l})).filter(Boolean).map((t=>({mode:t.mode,path:t.path,oid:t.oid,type:t.type})));return Qe({fs:t,gitdir:n,tree:c})}async function Jr({fs:t,dir:e,gitdir:n,stashCommit:r,parentCommit:i,wasStaged:o}){const s=[],l=[],c=await ve({fs:t,cache:{},dir:e,gitdir:n,trees:[ue({ref:i}),ue({ref:r})],map:async(r,[i,c])=>{if("."===r||await Ie.isIgnored({fs:t,dir:e,gitdir:n,filepath:r}))return;const d=c?await c.type():await i.type();if("tree"!==d&&"blob"!==d)return;if(!c&&i){const t="tree"===d?"rmdir":"rm";return"tree"===d&&s.push(r),"blob"===d&&o&&l.push({filepath:r,oid:await i.oid()}),{method:t,filepath:r}}const h=await c.oid();return i&&await i.oid()===h?void 0:"tree"===d?{method:"mkdir",filepath:r}:(o&&l.push({filepath:r,oid:h,stats:await t.lstat((0,a.join)(e,r))}),{method:"write",filepath:r,oid:h})}});await Qr({fs:t,gitdir:n,dirRemoved:s,ops:c},(async()=>{for(const r of c){const i=(0,a.join)(e,r.filepath);switch(r.method){case"rmdir":await t.rmdir(i);break;case"mkdir":await t.mkdir(i);break;case"rm":await t.rm(i);break;case"write":if(!s.some((t=>i.startsWith(t)))){const{object:e}=await qt({fs:t,cache:{},gitdir:n,oid:r.oid});await t.exists(i)&&await t.rm(i),await t.write(i,e)}}}})),await C.acquire({fs:t,gitdir:n,cache:{}},(async t=>{l.forEach((({filepath:e,stats:n,oid:r})=>{t.insert({filepath:e,stats:n,oid:r})}))}))}class Kr{constructor({fs:t,dir:e,gitdir:n=(0,a.join)(e,".git")}){Object.assign(this,{fs:t,dir:e,gitdir:n,_author:null})}static get refStash(){return"refs/stash"}static get refLogsStash(){return"logs/refs/stash"}get refStashPath(){return(0,a.join)(this.gitdir,Kr.refStash)}get refLogsStashPath(){return(0,a.join)(this.gitdir,Kr.refLogsStash)}async getAuthor(){if(!this._author&&(this._author=await Be({fs:this.fs,gitdir:this.gitdir,author:{}}),!this._author))throw new Wt("author");return this._author}async getStashSHA(t,e){return await this.fs.exists(this.refStashPath)?(e||await this.readStashReflogs({parsed:!1}))[t].split(" ")[1]:null}async writeStashCommit({message:t,tree:e,parent:n}){return Hr({fs:this.fs,gitdir:this.gitdir,commit:{message:t,tree:e,parent:n,author:await this.getAuthor(),committer:await this.getAuthor()}})}async readStashCommit(t){const e=await this.readStashReflogs({parsed:!1});if(0!==t&&(t<0||t>e.length-1))throw new Lt(`stash@${t}`,"number that is in range of [0, num of stash pushed]");const n=await this.getStashSHA(t,e);return n?Le({fs:this.fs,cache:{},gitdir:this.gitdir,oid:n}):{}}async writeStashRef(t){return dt.writeRef({fs:this.fs,gitdir:this.gitdir,ref:Kr.refStash,value:t})}async writeStashReflogEntry({stashCommit:t,message:e}){const n=await this.getAuthor(),r=Ur.createStashReflogEntry(n,t,e),i=this.refLogsStashPath;await Qr({filepath:i,entry:r},(async()=>{const t=await this.fs.exists(i)?await this.fs.read(i,"utf8"):"";await this.fs.write(i,t+r,"utf8")}))}async readStashReflogs({parsed:t=!1}){if(!await this.fs.exists(this.refLogsStashPath))return[];const e=(await this.fs.read(this.refLogsStashPath)).toString();return Ur.getStashReflogEntry(e,t)}}async function Xr({fs:t,dir:e,gitdir:n,message:r=""}){const i=new Kr({fs:t,dir:e,gitdir:n});await i.getAuthor();const a=await rn({fs:t,gitdir:n,fullname:!1}),o=await dt.resolve({fs:t,gitdir:n,ref:"HEAD"}),s=(await qr({fs:t,dir:e,gitdir:n,oid:o})).commit.message,l=[o];let c=null,d=ue({ref:"HEAD"});const h=await Yr({fs:t,dir:e,gitdir:n,treePair:[ue({ref:"HEAD"}),"stage"]});if(h){const t=await i.writeStashCommit({message:`stash-Index: WIP on ${a} - ${(new Date).toISOString()}`,tree:h,parent:l});l.push(t),c=h,d=B()}const u=await Yr({fs:t,dir:e,gitdir:n,treePair:[d,"workdir"]});if(u){const t=await i.writeStashCommit({message:`stash-WorkDir: WIP on ${a} - ${(new Date).toISOString()}`,tree:u,parent:[l[l.length-1]]});l.push(t),c=u}if(!c||!h&&!u)throw new F("changes, nothing to stash");const p=(r.trim()||`WIP on ${a}`)+`: ${o.substring(0,7)} ${s}`,f=await i.writeStashCommit({message:p,tree:c,parent:l});return await i.writeStashRef(f),await i.writeStashReflogEntry({stashCommit:f,message:p}),await tn({fs:t,dir:e,gitdir:n,ref:a,track:!1,force:!0}),f}async function Vr({fs:t,dir:e,gitdir:n,refIdx:r=0}){const i=new Kr({fs:t,dir:e,gitdir:n}),a=await i.readStashCommit(r),{parent:o=null}=a.commit?a.commit:{};if(o&&Array.isArray(o))for(let r=0;r<o.length-1;r++){const i=(await Le({fs:t,cache:{},gitdir:n,oid:o[r+1]})).commit.message.startsWith("stash-Index");await Jr({fs:t,dir:e,gitdir:n,stashCommit:o[r+1],parentCommit:o[r],wasStaged:i})}}async function Zr({fs:t,dir:e,gitdir:n,refIdx:r=0}){const i=new Kr({fs:t,dir:e,gitdir:n});if(!(await i.readStashCommit(r)).commit)return;const a=i.refStashPath;await Qr(a,(async()=>{await t.exists(a)&&await t.rm(a)}));const o=await i.readStashReflogs({parsed:!1});if(!o.length)return;o.splice(r,1);const s=i.refLogsStashPath;await Qr({reflogEntries:o,stashReflogPath:s,stashMgr:i},(async()=>{if(o.length){await t.write(s,o.join("\n"),"utf8");const e=o[o.length-1].split(" ")[1];await i.writeStashRef(e)}else await t.rm(s)}))}async function $r({fs:t,dir:e,gitdir:n}){return new Kr({fs:t,dir:e,gitdir:n}).readStashReflogs({parsed:!0})}async function ti({fs:t,dir:e,gitdir:n}){const r=new Kr({fs:t,dir:e,gitdir:n}),i=[r.refStashPath,r.refLogsStashPath];await Qr(i,(async()=>{await Promise.all(i.map((async e=>{if(await t.exists(e))return t.rm(e)})))}))}async function ei({fs:t,dir:e,gitdir:n,refIdx:r=0}){await Vr({fs:t,dir:e,gitdir:n,refIdx:r}),await Zr({fs:t,dir:e,gitdir:n,refIdx:r})}async function ni({fs:t,dir:e,gitdir:n=(0,a.join)(e,".git"),op:r="push",message:i="",refIdx:o=0}){_e("fs",t),_e("dir",e),_e("gitdir",n),_e("op",r);const s={push:Xr,apply:Vr,drop:Zr,list:$r,clear:ti,pop:ei},l=["apply","drop","pop"];try{const c=new Te(t);["refs","logs","logs/refs"].map((t=>(0,a.join)(n,t))).forEach((async t=>{await c.exists(t)||await c.mkdir(t)}));const d=s[r];if(d){if(l.includes(r)&&o<0)throw new Lt(`stash@${o}`,"number that is in range of [0, num of stash pushed]");return await d({fs:c,dir:e,gitdir:n,message:i,refIdx:o})}throw new Error(`To be implemented: ${r}`)}catch(t){throw t.caller="git.stash",t}}async function ri({fs:t,dir:e,gitdir:n=(0,a.join)(e,".git"),filepath:r,cache:i={}}){try{_e("fs",t),_e("gitdir",n),_e("filepath",r);const o=new Te(t);if(await Ie.isIgnored({fs:o,gitdir:n,dir:e,filepath:r}))return"ignored";const s=await async function({fs:t,cache:e,gitdir:n}){let r;try{r=await dt.resolve({fs:t,gitdir:n,ref:"HEAD"})}catch(t){if(t instanceof F)return[]}const{tree:i}=await Ge({fs:t,cache:e,gitdir:n,oid:r});return i}({fs:o,cache:i,gitdir:n}),l=await ii({fs:o,cache:i,gitdir:n,tree:s,path:r}),c=await C.acquire({fs:o,gitdir:n,cache:i},(async function(t){for(const e of t)if(e.path===r)return e;return null})),d=await o.lstat((0,a.join)(e,r)),h=null!==l,u=null!==c,p=null!==d,f=async()=>{if(u&&!I(c,d))return c.oid;{const t=await o.read((0,a.join)(e,r)),s=await Fr({gitdir:n,type:"blob",object:t});return u&&c.oid===s&&-1!==d.size&&C.acquire({fs:o,gitdir:n,cache:i},(async function(t){t.insert({filepath:r,stats:d,oid:s})})),s}};if(!h&&!p&&!u)return"absent";if(!h&&!p&&u)return"*absent";if(!h&&p&&!u)return"*added";if(!h&&p&&u)return await f()===c.oid?"added":"*added";if(h&&!p&&!u)return"deleted";if(h&&!p&&u)return c.oid,"*deleted";if(h&&p&&!u)return await f()===l?"*undeleted":"*undeletemodified";if(h&&p&&u){const t=await f();return t===l?t===c.oid?"unmodified":"*unmodified":t===c.oid?"modified":"*modified"}}catch(t){throw t.caller="git.status",t}}async function ii({fs:t,cache:e,gitdir:n,tree:r,path:i}){"string"==typeof i&&(i=i.split("/"));const a=i.shift();for(const o of r)if(o.path===a){if(0===i.length)return o.oid;const{type:r,object:a}=await qt({fs:t,cache:e,gitdir:n,oid:o.oid});if("tree"===r)return ii({fs:t,cache:e,gitdir:n,tree:mt.from(a),path:i});if("blob"===r)throw new R(o.oid,r,"blob",i.join("/"))}return null}async function ai({fs:t,dir:e,gitdir:n=(0,a.join)(e,".git"),ref:r="HEAD",filepaths:i=["."],filter:o,cache:s={},ignored:l=!1}){try{_e("fs",t),_e("gitdir",n),_e("ref",r);const a=new Te(t);return await ve({fs:a,cache:s,dir:e,gitdir:n,trees:[ue({ref:r}),fe(),B()],map:async function(t,[n,r,s]){if(!n&&!s&&r&&!l&&await Ie.isIgnored({fs:a,dir:e,filepath:t}))return null;if(!i.some((e=>Ze(t,e))))return null;if(o&&!o(t))return;const[c,d,h]=await Promise.all([n&&n.type(),r&&r.type(),s&&s.type()]),u=[c,d,h].includes("blob");if(("tree"===c||"special"===c)&&!u)return;if("commit"===c)return null;if(("tree"===d||"special"===d)&&!u)return;if("commit"===h)return null;if(("tree"===h||"special"===h)&&!u)return;const p="blob"===c?await n.oid():void 0,f="blob"===h?await s.oid():void 0;let m;"blob"!==c&&"blob"===d&&"blob"!==h?m="42":"blob"===d&&(m=await r.oid());const g=[void 0,p,m,f],y=g.map((t=>g.indexOf(t)));return y.shift(),[t,...y]}})}catch(t){throw t.caller="git.statusMatrix",t}}async function oi({fs:t,dir:e,gitdir:n=(0,a.join)(e,".git"),ref:r,object:i,force:o=!1}){try{_e("fs",t),_e("gitdir",n),_e("ref",r);const e=new Te(t);if(void 0===r)throw new Gt("ref");r=r.startsWith("refs/tags/")?r:`refs/tags/${r}`;const a=await dt.resolve({fs:e,gitdir:n,ref:i||"HEAD"});if(!o&&await dt.exists({fs:e,gitdir:n,ref:r}))throw new Ct("tag",r);await dt.writeRef({fs:e,gitdir:n,ref:r,value:a})}catch(t){throw t.caller="git.tag",t}}async function si({fs:t,dir:e,gitdir:n=(0,a.join)(e,".git"),cache:r={},filepath:i,oid:o,mode:s,add:l,remove:c,force:d}){try{_e("fs",t),_e("gitdir",n),_e("filepath",i);const h=new Te(t);if(c)return await C.acquire({fs:h,gitdir:n,cache:r},(async function(t){if(!d){const t=await h.lstat((0,a.join)(e,i));if(t){if(t.isDirectory())throw new Rt("directory");return}}t.has({filepath:i})&&t.delete({filepath:i})}));let u;if(!o){if(u=await h.lstat((0,a.join)(e,i)),!u)throw new F(`file at "${i}" on disk and "remove" not set`);if(u.isDirectory())throw new Rt("directory")}return await C.acquire({fs:h,gitdir:n,cache:r},(async function(t){if(!l&&!t.has({filepath:i}))throw new F(`file at "${i}" in index and "add" not set`);let r;if(o)r={ctime:new Date(0),mtime:new Date(0),dev:0,ino:0,mode:s,uid:0,gid:0,size:0};else{r=u;const t=r.isSymbolicLink()?await h.readlink((0,a.join)(e,i)):await h.read((0,a.join)(e,i));o=await Ce({fs:h,gitdir:n,type:"blob",format:"content",object:t})}return t.insert({filepath:i,oid:o,stats:r}),o}))}catch(t){throw t.caller="git.updateIndex",t}}function li(){try{return An.version}catch(t){throw t.caller="git.version",t}}async function ci({fs:t,dir:e,gitdir:n=(0,a.join)(e,".git"),trees:r,map:i,reduce:o,iterate:s,cache:l={}}){try{return _e("fs",t),_e("gitdir",n),_e("trees",r),await ve({fs:new Te(t),cache:l,dir:e,gitdir:n,trees:r,map:i,reduce:o,iterate:s})}catch(t){throw t.caller="git.walk",t}}async function di({fs:t,dir:e,gitdir:n=(0,a.join)(e,".git"),blob:r}){try{return _e("fs",t),_e("gitdir",n),_e("blob",r),await Ce({fs:new Te(t),gitdir:n,type:"blob",object:r,format:"content"})}catch(t){throw t.caller="git.writeBlob",t}}async function hi({fs:t,dir:e,gitdir:n=(0,a.join)(e,".git"),commit:r}){try{return _e("fs",t),_e("gitdir",n),_e("commit",r),await Hr({fs:new Te(t),gitdir:n,commit:r})}catch(t){throw t.caller="git.writeCommit",t}}async function ui({fs:t,dir:e,gitdir:n=(0,a.join)(e,".git"),type:r,object:i,format:o="parsed",oid:s,encoding:l}){try{const e=new Te(t);if("parsed"===o){switch(r){case"commit":i=ce.from(i).toObject();break;case"tree":i=mt.from(i).toObject();break;case"blob":i=u.from(i,l);break;case"tag":i=se.from(i).toObject();break;default:throw new R(s||"",r,"blob|commit|tag|tree")}o="content"}return await Ce({fs:e,gitdir:n,type:r,object:i,oid:s,format:o})}catch(t){throw t.caller="git.writeObject",t}}async function pi({fs:t,dir:e,gitdir:n=(0,a.join)(e,".git"),ref:r,value:i,force:o=!1,symbolic:s=!1}){try{_e("fs",t),_e("gitdir",n),_e("ref",r),_e("value",i);const e=new Te(t);if(r!==d.clean(r))throw new Lt(r,d.clean(r));if(!o&&await dt.exists({fs:e,gitdir:n,ref:r}))throw new Ct("ref",r);s?await dt.writeSymbolicRef({fs:e,gitdir:n,ref:r,value:i}):(i=await dt.resolve({fs:e,gitdir:n,ref:i}),await dt.writeRef({fs:e,gitdir:n,ref:r,value:i}))}catch(t){throw t.caller="git.writeRef",t}}async function fi({fs:t,dir:e,gitdir:n=(0,a.join)(e,".git"),tag:r}){try{return _e("fs",t),_e("gitdir",n),_e("tag",r),await async function({fs:t,gitdir:e,tag:n}){const r=se.from(n).toObject();return await Ce({fs:t,gitdir:e,type:"tag",object:r,format:"content"})}({fs:new Te(t),gitdir:n,tag:r})}catch(t){throw t.caller="git.writeTag",t}}async function mi({fs:t,dir:e,gitdir:n=(0,a.join)(e,".git"),tree:r}){try{return _e("fs",t),_e("gitdir",n),_e("tree",r),await Qe({fs:new Te(t),gitdir:n,tree:r})}catch(t){throw t.caller="git.writeTree",t}}const gi={Errors:ne,STAGE:B,TREE:ue,WORKDIR:fe,add:ze,abortMerge:Se,addNote:Ye,addRemote:Ke,annotatedTag:Xe,branch:Ve,checkout:tn,clone:qn,commit:Cn,getConfig:Kn,getConfigAll:Xn,setConfig:Nr,currentBranch:jn,deleteBranch:zn,deleteRef:Dn,deleteRemote:On,deleteTag:Mn,expandOid:Bn,expandRef:Fn,fastForward:Wn,fetch:Gn,findMergeBase:Qn,findRoot:Jn,getRemoteInfo:Vn,getRemoteInfo2:$n,hashBlob:tr,indexPack:er,init:nr,isDescendent:ir,isIgnored:ar,listBranches:or,listFiles:cr,listNotes:dr,listRefs:hr,listRemotes:ur,listServerRefs:pr,listTags:fr,log:br,merge:wr,packObjects:Ar,pull:Tr,push:Er,readBlob:Pr,readCommit:qr,readNote:Cr,readObject:jr,readTag:zr,readTree:Dr,remove:Or,removeNote:Mr,renameBranch:Br,resetIndex:Rr,updateIndex:si,resolveRef:Lr,status:ri,statusMatrix:ai,tag:oi,version:li,walk:ci,writeBlob:di,writeCommit:hi,writeObject:ui,writeRef:pi,writeTag:fi,writeTree:mi,stash:ni}},4147:t=>{"use strict";t.exports=JSON.parse('{"name":"tscript","version":"1.3.12","description":"","main":"tscript.js","scripts":{"build":"webpack --mode=production","dev":"webpack --mode=development --watch","interop":"webpack --mode=production --config webpack.interop.js","test":"mocha -r ts-node/register \\"src/**/*.test.ts\\"","test:fmt":"prettier --check \\"**/*\\"","prettier":"prettier --write \\"**/*\\"","gen-icons":"npx ts-node ./src/ide/gen-icons.ts"},"devDependencies":{"@interactjs/types":"^1.10.2","@types/chai":"^4.2.14","@types/lodash":"^4.14.167","@types/mocha":"^9.0.0","chai":"^4.2.0","css-loader":"^6.2.0","html-inline-css-webpack-plugin":"^1.10.0","html-inline-script-webpack-plugin":"^2.0.2","html-webpack-plugin":"^5.0.0-beta.6","mini-css-extract-plugin":"^2.2.2","mocha":"^9.1.1","prettier":"^2.2.1","ts-loader":"^9.2.5","ts-node":"^10.2.1","typescript":"^4.4.2","webpack":"^5.52.0","webpack-cli":"^4.8.0","webpack-dev-server":"^4.1.1"},"dependencies":{"@isomorphic-git/lightning-fs":"^4.6.0","buffer":"^6.0.3","interactjs":"^1.10.2","isomorphic-git":"^1.30.1","jwt-decode":"^4.0.0"}}')}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var n=__webpack_module_cache__[t]={id:t,loaded:!1,exports:{}};return __webpack_modules__[t].call(n.exports,n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.d=(t,e)=>{for(var n in e)__webpack_require__.o(e,n)&&!__webpack_require__.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),__webpack_require__.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__.nmd=t=>(t.paths=[],t.children||(t.children=[]),t);var __webpack_exports__=__webpack_require__(7744)})();</script><style type="text/css">/* general page styles */

:root {
	--general-page-style--line-height: 1.3em;
}

* {
	margin: 0;
	padding: 0;
	border: 0;
	line-height: var(--general-page-style--line-height);
	box-sizing: border-box;
}

img {
	max-width: 100%;
}

#doc-main {
	font-family: sans-serif;
	font-size: 12pt;
	line-height: 140%;
	color: #000;
}

#searchtext {
	margin: 10px 10px 10px 10px;
	padding: 0 10px 0 10px;
	width: calc(100% - 20px);
	height: 30px;
	vertical-align: middle;
	background: #eee;
	color: #444;
	border: 1px solid #888;
	border-radius: 4px;
	font-size: 10pt;
	line-height: 130%;
}

input:focus {
	background: #fff;
	color: #000;
	border: 1px solid #000;
}

#sidebar {
	box-sizing: border-box;
	position: absolute;
	left: 0;
	top: 0;
	width: 20%;
	height: 100%;
	background: #ddd;
}

#version {
	left: 0;
	top: 0;
	position: absolute;
	box-sizing: border-box;
	width: 100%;
	height: 45px;
	line-height: 150%;
	color: #000;
	background: #ddd;
	padding: 2px;
	text-align: center;
	font-size: 7pt;
	cursor: pointer;
}

#search {
	left: 0;
	top: 45px;
	position: absolute;
	box-sizing: border-box;
	width: 100%;
	height: 50px;
	color: #fff;
	background: #44c;
}

#tree {
	left: 0;
	top: 95px;
	position: absolute;
	box-sizing: border-box;
	width: 100%;
	height: calc(100% - 100px);
	color: #000;
	background: #ddd;
}

#content {
	box-sizing: border-box;
	display: block;
	position: absolute;
	left: 20%;
	top: 0;
	width: 80%;
	height: 100%;
	padding: 3% 5% 3% 5%;
	color: #000;
	background: #fff;
	overflow-x: hidden;
	overflow-y: scroll;
	border-left: solid 5px #88c;
	border-right: solid 5px #88c;
}

#content .pad {
	box-sizing: border-box;
	margin-bottom: 10%;
}

.related {
	margin-top: 10%;
	transform: scale(0.9);
	padding: 10px;
	background: #f4f4fc;
	border: 2px solid #44c;
	border-radius: 10px;
}

/* styles for the content */

a:link,
a:visited {
	color: #44c;
	text-decoration: underline;
}

a:active,
a:hover {
	color: #c44;
	text-decoration: underline;
}

h1 {
	font-size: 20pt;
	line-height: 130%;
	margin: 10pt 0 10pt 0;
}

h2 {
	font-size: 18pt;
	line-height: 130%;
	margin: 9pt 0 9pt 0;
}

h3 {
	font-size: 16pt;
	line-height: 130%;
	margin: 8pt 0 8pt 0;
}

p,
ul,
ol {
	margin: 8pt 0 8pt 0;
}

li {
	margin: 3pt 0 3pt 3ex;
}

pre {
	width: 100%;
	overflow-x: auto;
	padding: 5pt;
	margin: 3pt 0 3pt 0;
}

div.copy {
	cursor: copy;
}

code {
	font-family: monospace;
}

hr {
	margin: 5% 0;
	height: 1px;
	background: #888;
}

.nicetable {
	margin: 5px auto 5px auto;
	border-collapse: collapse;
	display: table;
	margin: 10px;
}

.nicetable th {
	border: 2px solid #854;
	background: #fa8;
	font-weight: bold;
	padding: 1ex;
	text-align: center;
}

.nicetable td {
	border: 2px solid #558;
	background: #aaf;
	padding: 1ex;
	text-align: center;
}

.nicetable th a {
	color: #000;
}

.nicetable td a {
	color: #000;
}

.nicetable.left td {
	text-align: left !important;
}

.flex {
	display: flex;
	flex-wrap: wrap;
	flex-flow: space-evenly;
	align-items: stretch;
}

.methods {
	margin: 5px auto 5px 0px;
	border-collapse: collapse;
	display: table;
}

.methods th {
	border: 1px solid #888;
	background: #fed;
	font-weight: bold;
	padding: 1ex;
	text-align: left;
	vertical-align: top;
}

.methods td {
	border: 1px solid #888;
	padding: 1ex;
	text-align: left;
}

.searchresults {
	font-size: 70%;
	margin-left: 5ex;
	color: #666;
}

/* styles for the tree view */

.entry {
	padding: 4px 4px 2px 4px;
	font-family: sans;
}

.current {
	background: #fa4;
}

.tgui-tree {
	font-family: sans;
	font-size: 10pt;
	line-height: 150%;
	color: #000;
	border: none;
	padding: 3px;
	position: relative;

	width: 100%;
	height: 100%;
	overflow: auto;
}

.tgui-tree-main {
	border-collapse: collapse;
}

.tgui-tree-cell-toggle {
	display: block;
	width: 15px;
}

.tgui-tree-cell-content {
	width: calc(100% - 15px);
	white-space: nowrap;
}

.tgui-tree-toggle {
	vertical-align: middle;
	padding-right: 3px;
	color: #999;
	transition: color 0.5s;
}

.tgui-tree-toggle:hover {
	color: #000;
}

.tgui-tree-element {
}

.tgui-tree-element:hover {
	background: #cdf;
}

.tgui-hidden {
	display: none;
}

/* highlighting */

.example {
	margin: 10px 0 10px 0;
	padding: 10px;
	border: 2px solid #c66;
	border-radius: 10px;
}

.warning {
	margin: 10px 0 10px 0;
	padding: 10px;
	border: 4px solid #c66;
	background: #fcc;
	border-radius: 10px;
}

.keyword {
	font-family: monospace;
	background: #dde;
	border: 1px solid #dde;
	border-radius: 2px;
	font-weight: bold;
}

.code {
	background: #f4f4f4;
	padding: 1px 4px;
	border: 1px solid #e8e8e8;
	border-radius: 2px;
}
.code .code {
	background: transparent !important;
	border: none !important;
}
.code-keyword {
	color: #00c;
}
.code-identifier {
	color: #000;
}
.code-integer {
	color: #088;
}
.code-real {
	color: #480;
}
.code-string {
	color: #800;
}
.code-operator {
	color: #000;
}
.code-grouping {
	color: #080;
}
.code-delimiter {
	color: #000;
}
.code-comment {
	color: #888;
}

.ebnf {
	background: #dee;
}
.ebnf-identifier {
	color: #c00;
}
.ebnf-literal {
	color: #080;
}
.ebnf-special {
	color: #808;
	font-style: italic;
}
.ebnf-operator {
	color: #000;
}
.ebnf-grouping {
	color: #c80;
}
.ebnf-delimiter {
	color: #888;
}
.ebnf-comment {
	color: #888;
}

#version {
	display: flex;
	justify-content: center;
	align-items: center;
}

.tgui-tree {
	overflow: auto;
}

tbody {
	max-width: 80vw;
}

th {
	max-width: 10vw;
}

td {
	max-width: 60vw;
}

@media screen and (max-width: 1000px) {
	td {
		max-width: 55vw;
	}
}

/* Layout change to put the sidebar above the content */

@media screen and (max-width: 756px) {
	#version {
		height: 20px;
	}

	#sidebar {
		width: 100%;
		max-height: 30%;
		overflow: hidden;
	}

	.tgui-tree {
		overflow-x: auto !important;
	}

	#content {
		left: 0%;
		top: 30%;
		width: 100%;
		height: 70%;

		border-top: solid 5px #88c;
	}

	#searchtext {
		margin: 2px;
		width: calc(100% - 4px);
	}

	#search {
		top: 20px;
		height: 34px;
	}

	#tree {
		top: 54px;
		height: calc(100% - 54px);
	}

	.dark-theme #content {
		border-top: solid 5px #347;
	}

	#tree > div > table {
		display: grid;
		grid-template-columns: 1fr 1fr 1fr;
		gap: 0.5rem;
		padding-bottom: 2rem;
		padding-top: 1rem;
	}

	#tree > div > table > tr:nth-child(1) {
		display: flex;
		grid-column: span 3;
	}

	td {
		max-width: 68vw;
	}
}

@media screen and (max-width: 540px) {
	#tree > div > table {
		grid-template-columns: 1fr 1fr;
	}

	#tree > div > table > tr:nth-child(1) {
		grid-column: span 2;
	}

	#content {
		padding: 2%;
	}

	td {
		max-width: 62vw;
	}
}

.icon-border {
	stroke: #000;
	fill: none;
}

.icon-panel-back {
	stroke: none;
	fill: #fff;
}

.icon-panel-title {
	stroke: none;
	fill: #00c;
}

.icon-red-fill {
	stroke: none;
	fill: #c00;
}
.icon-green-fill {
	stroke: none;
	fill: #080;
}
.icon-green-frame {
	stroke: #080;
	stroke-width: 2;
	fill: none;
}
.icon-blue-fill {
	stroke: none;
	fill: #00f;
}
.icon-blue-line {
	stroke: #00f;
	fill: none;
}

.icon-neutral-line {
	stroke: #000;
	fill: none;
}
.icon-neutral-fill {
	stroke: none;
	fill: #000;
}

.ide {
	margin: 0;
	padding: 0;
	border: 0;
	box-sizing: border-box;
}

body {
	margin: 0;
	padding: 0;
	border: 0;
	box-sizing: border-box;
}

[contenteditable] {
	outline: 0px solid transparent;
}

a:link,
a:visited,
a:active,
a:hover {
	color: #44c;
	text-decoration: underline;
}

li {
	margin-left: 3ex;
}

h1 {
	font-size: 24pt;
	margin-top: 20pt;
}

h2 {
	font-size: 16pt;
	margin-top: 20pt;
}

p {
	margin: 10px 0 10px 0;
}

button {
	border: black 1px solid;
}

.ide-main {
	min-width: 400px;
	min-height: 300px;
	color: #000;
	background: #f00;
	overflow: hidden;
	font-family: monospace;
	font-size: 10pt;
}

.ide-panel-area {
	position: absolute;
	left: 0;
	top: 30px;
	width: 100%;
	height: calc(100% - 30px);
	min-width: 650px;
	min-height: 300px;
	background: #aaa;
	overflow: hidden;
	box-shadow: inset 0px 1px 8px #00000030;
}

.ide-toolbar {
	width: 100%;
	height: 30px;
	background: #ccc;
	color: #000;
	border-bottom: #888 solid 1px;
	box-shadow: inset 0px -1px 0px #ddd;
	box-sizing: border-box;
}

.ide-add-document-tabs {
	width: 20px;
	height: 20px;
	border: black 1px solid;
	background: #ccc;
	color: #000;
	float: left;
}

.tgui .editor {
	width: 100%;
	height: 100%;
}

.ide-stackview {
	background: #ffe;
	color: #000;
	border-left: #888 solid 2px;
	border-bottom: #888 solid 2px;
	overflow: hidden;
}

.ide-programview {
	background: #ffe;
	color: #000;
	overflow: hidden;
	border-left: #888 solid 2px;
}

.ide-messages {
	width: 100%;
	height: 100%;
	background: #eee;
	color: #000;
	overflow: scroll;
	padding: 0 5px 0 0;
	box-sizing: border-box;
}

.ide-message {
	width: 100%;
	white-space: pre;
}

.ide-message:hover {
	background: #cdf;
}

.ide-truncation {
	color: #808;
}

.ide-errormessage {
	cursor: pointer;
	color: #f00;
	text-decoration: underline;
}

.ide-errormessage:hover {
	font-weight: bold;
}

.ide-program-ancestor {
	background: #fc8;
}

.ide-program-current {
	background: #fa4;
	font-weight: bold;
}

.ide-turtle {
	background: #eee;
	width: 100%;
	height: 100%;
}

.ide-tutorial {
	overflow-y: auto;
	background: #fff4e8;
	width: 100%;
	height: 100%;
	padding: 15px;
	font-family: sans-serif;
	font-size: 11pt;
	line-height: 140%;
	color: #000;
}

.ide-index {
	color: #00f;
}

.tgui-label.ide-state-unchecked {
	background-color: #ee8;
}

.tgui-label.ide-state-error {
	background-color: #f44;
}

.tgui-label.ide-state-running {
	background-color: #8e8;
}

.tgui-label.ide-state-waiting {
	background-color: #aca;
}

.tgui-label.ide-state-stepping {
	background-color: #8ee;
}

.tgui-label.ide-state-finished {
	background-color: #88e;
}

.ide-export-status {
	position: absolute;
	width: 80%;
	left: 10%;
	height: 40px;
	line-height: 35px;
	color: #000;
	padding: 2px 10px;
	vertical-align: middle;
	border: 1px solid #000;
}

.ide-export-download {
	position: absolute;
	width: 80%;
	left: 10%;
	height: 40px;
	line-height: 35px;
	background: #fff;
	color: #44c !important;
	font-decoration: underline;
	padding: 2px 10px;
	vertical-align: middle;
	border: 1px solid #000;
	display: none;
}

.ide-prompt-input {
	width: 100%;
	padding: 3px 6px;
}

.highlight-overlay {
	opacity: 1;
	position: fixed;
	left: 50%;
	transform: translateX(-50%);
	transition: opacity 1s ease 3s;
	top: 35vh;
	font-size: 5vh;
	background: #ffd;
	color: #000;
	padding: 1vh 2vh;
	border: 1px solid #aaa;
	border-radius: 1vh;
	user-select: none;
	z-index: 10;
}

.tabs-container {
	display: flex;
	width: 100%;
	height: 100%;
	overflow: hidden;
}

.tabs-container.horizontal {
	flex-direction: column;
}

.tabs-container.vertical {
	flex-direction: row;
}

.tabs {
	display: flex;
	color: #000;
	background: #fff;
	user-select: none;
	flex-grow: 0;
}

.tabs-container.horizontal div.tabs {
	flex-direction: row;
	flex-wrap: wrap;
	align-items: center;
	width: 100%;
	border-bottom: 1px solid #aaa;
	border-right: 1px solid #aaa;
}

.tabs-container.vertical div.tabs {
	flex-direction: column;
	align-items: flex-start;
	height: 100%;
	border-right: 1px solid #aaa;
	overflow-x: hidden;
	overflow-y: auto;
}

.switch {
	font-size: 150%;
	padding: 0 5px;
}
.switch:hover {
	color: #f00;
}

.tabs div.file {
	white-space: nowrap;
	height: 20px;
	display: flex;
	justify-content: flex-start;
	align-items: center;
	margin: 0 2px;
	padding: 2px 4px;
	border-right: 1px solid #aaa;
	border-bottom: 1px solid #aaa;
	border-radius: 4px;
}
.tabs-container.vertical div.tabs div.file {
	margin: 0 1px;
	width: calc(100% - 1px);
}
.tabs div.file.active {
	background: #cdd;
}

.tabs div.file span.name {
	font-size: 90%;
	flex-grow: 1;
}

.tabs div.file span.close {
	color: #800;
	flex-grow: 0;
}
.tabs div.file span.close:hover {
	color: #f00;
}

.tabs-container.horizontal .name {
	order: 1;
}
.tabs-container.horizontal .close {
	order: 2;
	padding: 0 1px 0 5px;
}
.tabs-container.vertical .name {
	order: 2;
}
.tabs-container.vertical .close {
	order: 1;
	padding: 0 5px 0 1px;
}

.tabs-container.horizontal div.editorcontainer {
	width: 100%;
	height: calc(100% - 27px);
}
.tabs-container.vertical div.editorcontainer {
	height: 100%;
	flex-grow: 1;
}

hr.file-tree {
	margin: 2px 0px;
	color: #333;
	background-color: #333;
}

/* increase specifity to override .tgui-tree-element:hover */
.file-tree-selected.file-tree-selected.file-tree-selected.file-tree-selected {
	background-color: #abf;
}

/*TODO remove classes from modal components, instead: .tgui-modal button ...*/

.tgui {
	margin: 0;
	padding: 0;
	border: 0;
	box-sizing: border-box;
}

.tgui-control {
	font-family: sans-serif;
	font-size: 10pt;
	color: #000;
	border: none;
	margin: 3px;
	position: relative;
	margin: 3px calc(min(3px, max(0.5px, calc(0.5vw - 3px)))); /* TODO: only for toolbar items */
}

.tgui-hidden {
	display: none;
}

.tgui-tooltip {
	display: none;
	background-color: #eec;
	color: #000;
	font-family: sans-serif;
	font-size: 9pt;
	transition: opacity 0.5s;
	padding: 2px;
	border: 1px solid #000;
	border-radius: 3px;
	white-space: nowrap;
	z-index: 10;
}

.tgui-tooltip-left {
	position: absolute;
	left: 1px;
	top: 25px;
}

.tgui-tooltip-right {
	position: absolute;
	right: 1px;
	top: 25px;
}

.tgui-control:hover .tgui-tooltip {
	display: block;
}

.tgui-toolbar-separator {
	float: left;
	width: 1px;
	height: 22px;
	background: #999;
	margin: 3px calc(min(10px, max(1.5px, calc(1vw - 3px)))); /* TODO: only for toolbar items */

	box-shadow: 0px 1px 2px #ffffff80;
}

/* used for program status on the toolbar */
.tgui-label {
	background: #ccc;
	box-shadow: inset 0px 1px 4px #00000030, inset 0px -1px 4px #ffffff50,
		0px 0px 1px 0px #000000a0, 0px 2px 1px 0px #ffffffc0;

	text-align: center;
	vertical-align: middle;
	padding: 2px 10px 2px 10px;
	border-radius: 1px;
}

.tgui-button-text {
	cursor: pointer;

	background: #ddd;

	border-width: 1px;
	border-style: solid;

	border-color: #eee;
	box-shadow: 0px 1px 2px rgba(0, 0, 0, 0.2);
	border-radius: 1.5px;

	text-align: center;
	vertical-align: middle;
	padding: 2px 10px 2px 10px;
}

.tgui-button-text:hover:not(:disabled) {
	background: #eee;
	border-color: #fff;
}

.tgui-button-text:focus:not(:disabled) {
	border-color: #222;
}

.tgui-button-text:active:not(:disabled) {
	background: #bbb;
	border-color: #888;
	box-shadow: inset 0px 0px 2px rgba(0, 0, 0, 0.2), 0px 0px 1px 1px #ffffff20;
}

.tgui-button-text:disabled {
	background: #bbb;
	color: #333;
}

.tgui-button-icon:not(:disabled) {
	cursor: pointer;

	background: #ddd;

	border-width: 1px;
	border-style: solid;
	border-color: #eee;

	box-shadow: 0px 1px 2px rgba(0, 0, 0, 0.2);

	border-radius: 1.5px;
}

.tgui-button-icon:hover:not(:disabled) {
	background: #eee;
	border-color: #fff;
}

.tgui-button-icon:focus:not(:disabled) {
	border-color: #222;
}

.tgui-button-icon:active:not(:disabled) {
	background: #bbb;
	border-color: #888;
	box-shadow: inset 0px 0px 2px rgba(0, 0, 0, 0.2), 0px 0px 1px 1px #ffffff20;
}

.tgui-button-icon:disabled {
	background: #bbb;
	color: #333;
}

/* used in file dialog */
.tgui-status-box {
	vertical-align: middle;
	padding: 4px;
}

.tgui-list-box {
	background-color: #fff;
	box-shadow: 0px 0px 2px #00000030;
	border-radius: 2px;
	border: 1px solid #ccc;
	padding: 3px;
}

.tgui-text-box {
	background-color: #fff;
	box-shadow: 0px 0px 2px #00000030;
	border-radius: 2px;
	border: 1px solid #ccc;
	padding: 0 0 0 3px;
}

.tgui-tree {
	width: 100%;
	height: 100%;
	font-family: monospace;
	font-size: 9pt;
	line-height: 13px;
	overflow: auto;
}

.tgui-tree-main {
	border-collapse: collapse;
}

.tgui-tree-cell-toggle {
	display: block;
	width: 15px;
	overflow: hidden;
}

.tgui-tree-cell-content {
	width: calc(100% - 15px);
	white-space: nowrap;
}

.tgui-tree-toggle {
	vertical-align: middle;
	color: #999;
	transition: color 0.5s;
	transform: translate(0.5em, 0) scale(1.5);
}

.tgui-tree-toggle:hover {
	color: #000;
}

.tgui-tree-element {
}

.tgui-tree-element:hover {
	background: #cdf;
}

.tgui-separator {
	display: block;
	position: fixed;
	left: 0vw;
	top: 0vh;
	width: 100vw;
	height: 100vh;
	z-index: 99;
	background: rgba(64, 64, 64, 0.8);
}

.tgui-modal {
	position: absolute;
	box-sizing: border-box;
	color: #000;
	font-family: sans-serif;
	font-size: 10pt;
	border: 5px solid #888;
	overflow-y: scroll;
}

.tgui-modal-titlebar {
	display: flex;
	flex-direction: row;

	background: #008;
	color: #fff;
	padding: 2px 2px 2px 10px;

	font-weight: bold;
	font-size: 10pt;
	user-select: none;
}

.tgui-modal-titlebar-title {
	flex: auto;
	color: #fff;
	font-family: sans-serif;
	vertical-align: middle;
	width: auto;
}

.tgui-modal-content {
	background: #eee;
	position: absolute;
	overflow: auto;
	padding: 0px 10px;
	left: 0;
	top: 24px;
	width: 100%;
	/*height: calc(100% - 24px);*/
}

.tgui-modal-buttonbar {
	position: absolute;
	box-shadow: inset 0px 2px 3px -1px #00000040;
	/*background: #0000ff60; /* */
	background: #e5e5e5;
	width: 100%;
	height: 39px;
	padding: 7px 0px;
	bottom: 0px;
	display: flex;
	justify-content: flex-end;
}

.tgui-modal-button {
	cursor: pointer;

	background: #eee;
	border-width: 1px;
	border-color: #000;
	box-shadow: 0px 1px 3px #00000033;

	border-radius: 2px;
	color: #000;
}
.tgui-modal-button:focus:not(:disabled) {
	background: #eee;
	border-width: 2px;
}

.tgui-modal-button:hover:not(:disabled) {
	background: #fff;
	border-width: 2px;
}

.tgui-modal-button:active:not(:disabled) {
	background: #bbb;
	border-width: 2px;
	box-shadow: inset 0px 0px 3px #00000066;
	color: #000;
}

.tgui-modal-button:disabled {
	color: #333;
}

.tgui-modal-default-button {
	cursor: pointer;

	font-weight: bold;

	background: #16f;
	border-width: 1px;
	border-color: #04d;
	box-shadow: 0px 1px 3px #00000033;

	border-radius: 2px;
	color: #fff;
}
.tgui-modal-default-button:focus {
	background: #16f;
	border-width: 2px;
	border-color: #027;
}

.tgui-modal-default-button:hover {
	background: #27f;
	border-width: 2px;
}

.tgui-modal-default-button:active {
	background: #139;
	border-width: 2px;
	border-color: #000;
	box-shadow: inset 0px 0px 3px #00000066;
}

.tgui-modal-default-button:disabled:disabled {
	background: #4bf;
	color: #333;
}

.tgui-modal-dropdown {
	background-color: #fff;
	box-shadow: 0px 0px 2px #00000030;
	border-radius: 2px;
	border: 1px solid #ccc;
	padding: 3px;
}

.tgui-panel-container {
	overflow: hidden;
	touch-action: none;
	box-sizing: border-box;
}

/* this class is additionaly used for floating panels */
.tgui-panel-float {
	box-shadow: 0px 1px 8px #00000050, 0px 0px 0px 1px #00000020;
}

.tgui-panel-titlebar {
	display: flex;
	flex-direction: row;

	position: absolute;
	width: 100%;
	height: 22px;
	line-height: 22px;
	padding: 1px;
	left: 0;
	top: 0;
	background: #00c;
	color: #fff;
	font-family: sans-serif;
	vertical-align: middle;
	/*old style on browsers like firefox: font-family: serif; -- "sans" does not work and leads to "serif"*/
	font-weight: bold;
	font-size: 10pt;

	-webkit-touch-callout: none;
	-webkit-user-select: none;
	-khtml-user-select: none;
	-moz-user-select: none;
	-ms-user-select: none;
	user-select: none;
}

.tgui-panel-titlebar-icon {
	margin-right: 1px;
}

.tgui-panel-titlebar-title {
	flex: auto;
	color: #fff;
	font-family: sans-serif;
	vertical-align: middle;
	padding-left: 1px;
	width: auto;
}

/* .tgui-panel-dockbutton is also used in modal dialogs */
.tgui-panel-dockbutton {
	padding: 0;
	width: 20px;
	height: 20px;
	margin: 0 0 0 1px;

	background: #ddd;

	border-width: 1px;
	border-style: solid;
	border-color: #eee #ccc #ccc #eee;

	box-shadow: inset -1px -1px 2px -2px #00000050,
		inset 1px 1px 2px -2px #fffffff0;

	border-radius: 1.5px;
}

.tgui-panel-dockbutton:focus {
	border-color: #77f;
	box-shadow: inset 0px 0px 0.5px 0.5px #7777ff30;
}

.tgui-panel-dockbutton:active {
	background: #bbb;
	border-color: #777;
	background-clip: padding-box;
	box-shadow: inset 1px 0px 3px -1px #00000040,
		inset 0px 2px 3px -1px #00000040;
}

.tgui-panel-content {
	position: absolute;
	width: 100%;
	height: calc(100% - 22px);
	left: 0;
	top: 22px;
	background: #ffe;
	color: #000;
	overflow: hidden;
}

.ide-tutorial pre {
	background: #ddd;
}
.ide-tutorial code {
	background: #ddd;
}

.tutorial-nav {
	display: flex;
	flex-wrap: wrap;
}

.tutorial-nav-button {
	width: 100px;
	height: 30px;
	margin: 5px 10px 5px 0;
}

.tutorial-home-button {
	width: 150px;
	height: 30px;
	margin: 5px 10px 5px 0;
	float: right;
}

.tutorial-reset-button {
	width: 150px;
	height: 30px;
}

.tutorial-toc {
	color: #44c;
	cursor: pointer;
	padding: 5px 0;
}

.code-evaluation th {
	padding: 5px 10px;
	background: #468;
	color: #fff;
}

.code-evaluation td {
	padding: 5px 10px;
	background: #fed;
	border: 1px solid #aaa;
}

.tutorial-exercise {
	padding: 5px;
	background: #eff;
	border: 1px solid #aaa;
}
.tutorial-exercise::before {
	content: "[exercise] ";
	font-weight: bold;
}

.tutorial-error {
	width: 100%;
	padding: 10px;
	margin: 5px 0;
	border: 3px solid #f00;
	cursor: pointer;
}

/* general page styles */

.dark-theme #doc-main {
	color: #fff;
}

.dark-theme #searchtext {
	background: #222;
	color: #fff;
	border-color: #888;
}

.dark-theme input:focus {
	background: #222;
	color: #fff;
	border-color: #fff;
}

.dark-theme #sidebar {
	background: #272727;
}

.dark-theme #version {
	color: #fff;
	background: #272727;
}

.dark-theme #search {
	color: #fff;
	background: #57f;
}

.dark-theme #tree {
	color: #fff;
	background: #272727;
}

.dark-theme #content {
	color: #fff;
	background: #222;
	border-left: solid 5px #347;
	border-right: solid 5px #347;
}

.dark-theme .related {
	background: #272727;
	border-color: #57f;
}

/* styles for the content */

.dark-theme a:link,
.dark-theme a:visited {
	color: #57f;
}

.dark-theme a:active,
.dark-theme a:hover {
	color: #f44;
}

.dark-theme hr {
	background: #151515;
}

.dark-theme .nicetable th {
	border: 2px solid #854;
	background: #432;
}

.dark-theme .nicetable td {
	border: 2px solid #568;
	background: #234;
}

.dark-theme .nicetable th a {
	color: #fff;
}

.dark-theme .nicetable td a {
	color: #fff;
}

.dark-theme .methods th {
	border-color: #888;
	background: #543;
}

.dark-theme .methods td {
	border-color: #888;
}

.dark-theme .searchresults {
	color: #666;
}

/* styles for the tree view */

.dark-theme .current {
	color: #fa4;
	background: #654;
}

.dark-theme .tgui-tree {
	color: #fff;
}

.dark-theme .tgui-tree-toggle {
	color: #fff;
}

.dark-theme .tgui-tree-toggle:hover {
	color: #fff;
}

.dark-theme .tgui-tree-element:hover {
	background: #444;
}

/* highlighting */

.dark-theme .example {
	border-color: #c66;
}

.dark-theme .warning {
	border-color: #c66;
	background: #633;
}

.dark-theme .keyword {
	background: #333;
	border-color: #333;
}

.dark-theme .code {
	background: #333;
	padding: 1px 4px;
	border: 1px solid #444;
	border-radius: 2px;
}
.dark-theme .code-keyword {
	color: #4af;
}
.dark-theme .code-identifier {
	color: #fff;
}
.dark-theme .code-integer {
	color: #4fe;
}
.dark-theme .code-real {
	color: #4f4;
}
.dark-theme .code-string {
	color: #f44;
}
.dark-theme .code-operator {
	color: #fff;
}
.dark-theme .code-grouping {
	color: #4f4;
}
.dark-theme .code-delimiter {
	color: #fff;
}
.dark-theme .code-comment {
	color: #888;
}

.dark-theme .ebnf {
	background: #151919;
}
.dark-theme .ebnf-identifier {
	color: #f44;
}
.dark-theme .ebnf-literal {
	color: #4f4;
}
.dark-theme .ebnf-special {
	color: #c4f;
}
.dark-theme .ebnf-operator {
	color: #fff;
}
.dark-theme .ebnf-grouping {
	color: #c80;
}
.dark-theme .ebnf-delimiter {
	color: #888;
}
.dark-theme .ebnf-comment {
	color: #888;
}

.dark-theme .icon-border {
	stroke: #fff;
}

.dark-theme .icon-panel-back {
	fill: #444;
}

.dark-theme .icon-panel-title {
	fill: #36f;
}

.dark-theme .icon-red-fill {
	fill: #f31;
}
.dark-theme .icon-green-fill {
	fill: #4c2;
}
.dark-theme .icon-green-frame {
	stroke: #4c2;
}

.dark-theme .icon-blue-fill {
	fill: #49f;
}
.dark-theme .icon-blue-line {
	stroke: #49f;
}
.dark-theme .icon-neutral-line {
	stroke: #ccc;
}
.dark-theme .icon-neutral-fill {
	fill: #ccc;
}

.dark-theme button {
	border-color: #fff;
}

.dark-theme .ide-main {
	color: #fff;
	background: #f00;
}

.dark-theme .ide-panel-area {
	background: #111;
}

.dark-theme .ide-toolbar {
	background: #303030;
	color: #fff;
	border-bottom: #222 solid 1px;
	box-shadow: inset 0px -1px 0px #292929;
}

.dark-theme .ide-stackview {
	background: #222;
	color: #fff;
}

.dark-theme .ide-programview {
	background: #222;
	color: #fff;
}

.dark-theme .ide-messages {
	background: #222;
	color: #fff;
}

.dark-theme .ide-message:hover {
	background: #449;
}

.dark-theme .ide-errormessage {
	color: #f44;
}

.dark-theme .ide-program-ancestor {
	color: #fc6;
	background: #653;
}

.dark-theme .ide-program-current {
	color: #fc6;
	background: #863;
}

.dark-theme .ide-turtle {
	background: #333;
}

.dark-theme .ide-tutorial {
	background: #222;
	color: #fff;
}

.dark-theme .ide-index {
	color: #26f;
}

.dark-theme .tgui-label.ide-state-unchecked {
	background-color: #970;
	color: #fe8;
}

.dark-theme .tgui-label.ide-state-error {
	background-color: #c32;
	color: #fc8;
}

.dark-theme .tgui-label.ide-state-running {
	background-color: #2a2;
	color: #cfc;
}

.dark-theme .tgui-label.ide-state-waiting {
	background-color: #171;
	color: #8f8;
}

.dark-theme .tgui-label.ide-state-stepping {
	background-color: #0ab;
	color: #cff;
}

.dark-theme .tgui-label.ide-state-finished {
	background-color: #139;
	color: #8cf;
}

.dark-theme .ide-export-status {
	color: #fff;
	border-color: #fff;
}

.dark-theme .ide-export-download {
	background: #222;
	color: #46f !important;
	border-color: #fff;
}

.dark-theme .tabs {
	color: #eee;
	background: #222;
}

.dark-theme .switch:hover {
	color: #f88;
}

.dark-theme .tabs div.file.active {
	background: #044;
	color: #fff;
}

.dark-theme .tabs div.file span.close {
	color: #f88;
	flex-grow: 0;
}
.dark-theme .tabs div.file span.close:hover {
	color: #f44;
}

.dark-theme hr.file-tree {
	color: #999;
	background-color: #999;
}

/* increase specifity to override .tgui-tree-element:hover */
.dark-theme
	.file-tree-selected.file-tree-selected.file-tree-selected.file-tree-selected {
	background-color: #44a;
}

.dark-theme {
	/* dark theme for scrollbars, etc */
	color-scheme: dark;
}

.dark-theme .tgui-control {
	color: #fff;
}

.dark-theme .tgui-tooltip {
	background-color: #654;
	color: #fe7;
	border: 1px solid #777;
}

.dark-theme .tgui-toolbar-separator {
	background: #393939;
	box-shadow: 0px 1px 2px #00000040;
}

/* used for program status on the toolbar */
/* TODO: create separate css classes for the different states */
.dark-theme .tgui-label {
	background: #222;
	box-shadow: inset 0px 1px 4px #00000030, inset 0px -1px 4px #00000050,
		0px 0px 1px 0px #000000a0, 0px 2px 1px 0px #ffffff18;
}

.dark-theme .tgui-button-text {
	color: #fff;
	background: #373737;
	border-color: #444;
}

.dark-theme .tgui-button-text:hover:not(:disabled) {
	background: #444;
	border-color: #666;
}

.dark-theme .tgui-button-text:focus:not(:disabled) {
	border-color: #fff;
}

.dark-theme .tgui-button-text:active:not(:disabled) {
	background: #222;
	border-color: #000;
	box-shadow: inset 0px 0px 2px #000;
}

.dark-theme .tgui-button-text:disabled {
	color: #bbb;
	background: #202020;
}

.dark-theme .tgui-button-icon {
	background: #373737;
	border-color: #444;
}

.dark-theme .tgui-button-icon:hover:not(:disabled) {
	background: #444;
	border-color: #666;
}

.dark-theme .tgui-button-icon:focus:not(:disabled) {
	border-color: #fff;
}

.dark-theme .tgui-button-icon:active:not(:disabled) {
	background: #222;
	border-color: #000;
	box-shadow: inset 0px 0px 2px #000;
}

.dark-theme .tgui-button-icon:disabled {
	background: #202020;
}

.dark-theme .tgui-list-box {
	color: #fff;
	background-color: #222;
	border-color: #444;
}

.dark-theme .tgui-text-box {
	color: #fff;
	background-color: #222;
	border-color: #444;
}

.dark-theme .tgui-tree-toggle {
	color: #777;
}

.dark-theme .tgui-tree-toggle:hover {
	color: #fff;
}

.dark-theme .tgui-tree-element:hover {
	background: #447;
}

.dark-theme .tgui-separator {
	background: rgba(0, 0, 0, 0.8);
}

.dark-theme .tgui-modal {
	color: #fff;
	border-color: #444;
}

.dark-theme .tgui-modal-titlebar {
	background: #008;
	color: #fff;
}

.dark-theme .tgui-modal-titlebar-title {
	color: #fff;
}

.dark-theme .tgui-modal-content {
	background: #333;
}

.dark-theme .tgui-modal-buttonbar {
	background: #272727;
}

.dark-theme .tgui-modal-button {
	background: #333;
	border-color: #fff;
	color: #fff;
}
.dark-theme .tgui-modal-button:focus:not(:disabled) {
	background: #444;
}

.dark-theme .tgui-modal-button:hover:not(:disabled) {
	background: #346;
}

.dark-theme .tgui-modal-button:active:not(:disabled) {
	background: #222;
	color: #fff;
}

.dark-theme .tgui-modal-button:disabled {
	color: #bbb;
}

.dark-theme .tgui-modal-default-button {
	background: #16f;
	border-color: #4af;
	color: #fff;
}
.dark-theme .tgui-modal-default-button:focus {
	background: #16f;
	border-color: #4af;
}

.dark-theme .tgui-modal-default-button:hover {
	background: #27f;
}

.dark-theme .tgui-modal-default-button:active {
	background: #139;
	border-color: #27f;
}

.dark-theme .tgui-modal-default-button:disabled:disabled {
	background: #4bf;
	color: #bbb;
}

.dark-theme .tgui-modal-dropdown {
	color: #fff;
	background-color: #222;
	border-color: #444;
}

.dark-theme .tgui-panel-titlebar {
	background: #00c;
	color: #fff;
}

.dark-theme .tgui-panel-titlebar-title {
	color: #fff;
}

/* .tgui-panel-dockbutton is also used in modal dialogs */
.dark-theme .tgui-panel-dockbutton {
	background: #333;
	border-color: #444 #393939 #393939 #444;
	box-shadow: none;
}

.dark-theme .tgui-panel-dockbutton:focus {
	border-color: #77f;
}

.dark-theme .tgui-panel-dockbutton:hover {
	background: #444;
}

.dark-theme .tgui-panel-dockbutton:active {
	background: #222;
	border-color: #000;
	box-shadow: inset 1px 0px 3px -1px #00000040,
		inset 0px 2px 3px -1px #00000040;
}

.dark-theme .tgui-panel-content {
	background: #222;
	color: #fff;
}

.dark-theme .tgui-panel-container {
	background: #222;
	color: #fff;
}

.dark-theme .tutorial-toc {
	color: #44c;
}

.dark-theme .code-evaluation th {
	padding: 5px 10px;
	background: #468;
	color: #fff;
}

.dark-theme .code-evaluation td {
	padding: 5px 10px;
	background: #fed;
	border: 1px solid #aaa;
}

.dark-theme .code-evaluation th {
	background: #468;
	color: #fff;
}

.dark-theme .code-evaluation td {
	background: #222;
	border-color: #444;
}

.dark-theme .tutorial-exercise {
	color: #fff;
	background: #222;
	border-color: #444;
}

</style></head><body style="overflow: hidden"><div id="ide-container" style="position: absolute;
				left: 0;
				top: 0;
				width: 100vw;
				height: 100vh;"></div></body></html>